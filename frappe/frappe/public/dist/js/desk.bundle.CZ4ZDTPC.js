(() => {
  var __create = Object.create;
  var __defProp = Object.defineProperty;
  var __defProps = Object.defineProperties;
  var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
  var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
  var __getOwnPropNames = Object.getOwnPropertyNames;
  var __getOwnPropSymbols = Object.getOwnPropertySymbols;
  var __getProtoOf = Object.getPrototypeOf;
  var __hasOwnProp = Object.prototype.hasOwnProperty;
  var __propIsEnum = Object.prototype.propertyIsEnumerable;
  var __defNormalProp = (obj, key2, value) => key2 in obj ? __defProp(obj, key2, { enumerable: true, configurable: true, writable: true, value }) : obj[key2] = value;
  var __spreadValues = (a2, b2) => {
    for (var prop in b2 || (b2 = {}))
      if (__hasOwnProp.call(b2, prop))
        __defNormalProp(a2, prop, b2[prop]);
    if (__getOwnPropSymbols)
      for (var prop of __getOwnPropSymbols(b2)) {
        if (__propIsEnum.call(b2, prop))
          __defNormalProp(a2, prop, b2[prop]);
      }
    return a2;
  };
  var __spreadProps = (a2, b2) => __defProps(a2, __getOwnPropDescs(b2));
  var __require = /* @__PURE__ */ ((x2) => typeof require !== "undefined" ? require : typeof Proxy !== "undefined" ? new Proxy(x2, {
    get: (a2, b2) => (typeof require !== "undefined" ? require : a2)[b2]
  }) : x2)(function(x2) {
    if (typeof require !== "undefined")
      return require.apply(this, arguments);
    throw new Error('Dynamic require of "' + x2 + '" is not supported');
  });
  var __commonJS = (cb, mod) => function __require2() {
    return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
  };
  var __copyProps = (to, from, except, desc) => {
    if (from && typeof from === "object" || typeof from === "function") {
      for (let key2 of __getOwnPropNames(from))
        if (!__hasOwnProp.call(to, key2) && key2 !== except)
          __defProp(to, key2, { get: () => from[key2], enumerable: !(desc = __getOwnPropDesc(from, key2)) || desc.enumerable });
    }
    return to;
  };
  var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target, mod));

  // frappe/public/js/frappe/socketio_client.js
  var require_socketio_client = __commonJS({
    "frappe/public/js/frappe/socketio_client.js"(exports, module) {
      frappe.socketio = {
        open_tasks: {},
        open_docs: [],
        emit_queue: [],
        init: function(port = 3e3) {
          if (!window.io) {
            return;
          }
          if (frappe.boot.disable_async) {
            return;
          }
          if (frappe.socketio.socket) {
            return;
          }
          if (window.location.protocol == "https:") {
            frappe.socketio.socket = io.connect(frappe.socketio.get_host(port), { secure: true });
          } else if (window.location.protocol == "http:") {
            frappe.socketio.socket = io.connect(frappe.socketio.get_host(port));
          } else if (window.location.protocol == "file:") {
            frappe.socketio.socket = io.connect(window.localStorage.server);
          }
          if (!frappe.socketio.socket) {
            console.log("Unable to connect to " + frappe.socketio.get_host(port));
            return;
          }
          frappe.socketio.socket.on("msgprint", function(message2) {
            frappe.msgprint(message2);
          });
          frappe.socketio.socket.on("eval_js", function(message) {
            eval(message);
          });
          frappe.socketio.socket.on("progress", function(data) {
            if (data.progress) {
              data.percent = flt(data.progress[0]) / data.progress[1] * 100;
            }
            if (data.percent) {
              if (data.percent == 100) {
                frappe.hide_progress();
              } else {
                frappe.show_progress(data.title || __("Progress"), data.percent, 100, data.description);
              }
            }
          });
          frappe.socketio.setup_listeners();
          frappe.socketio.setup_reconnect();
          $(document).on("form-load form-rename", function(e2, frm) {
            if (frm.is_new()) {
              return;
            }
            for (var i2 = 0, l2 = frappe.socketio.open_docs.length; i2 < l2; i2++) {
              var d2 = frappe.socketio.open_docs[i2];
              if (frm.doctype == d2.doctype && frm.docname == d2.name) {
                return false;
              }
            }
            frappe.socketio.doc_subscribe(frm.doctype, frm.docname);
          });
          $(document).on("form-refresh", function(e2, frm) {
            if (frm.is_new()) {
              return;
            }
            frappe.socketio.doc_open(frm.doctype, frm.docname);
          });
          $(document).on("form-unload", function(e2, frm) {
            if (frm.is_new()) {
              return;
            }
            frappe.socketio.doc_close(frm.doctype, frm.docname);
          });
          $(document).on("form-typing", function(e2, frm) {
            frappe.socketio.form_typing(frm.doctype, frm.docname);
          });
          $(document).on("form-stopped-typing", function(e2, frm) {
            frappe.socketio.form_stopped_typing(frm.doctype, frm.docname);
          });
          window.addEventListener("beforeunload", () => {
            if (!cur_frm || cur_frm.is_new()) {
              return;
            }
            if (cur_frm.doc) {
              frappe.socketio.doc_close(cur_frm.doctype, cur_frm.docname);
            }
          });
        },
        get_host: function(port2 = 3e3) {
          var host = window.location.origin;
          if (window.dev_server) {
            var parts = host.split(":");
            port2 = frappe.boot.socketio_port || port2.toString() || "3000";
            if (parts.length > 2) {
              host = parts[0] + ":" + parts[1];
            }
            host = host + ":" + port2;
          }
          return host;
        },
        subscribe: function(task_id, opts) {
          frappe.socketio.socket.emit("task_subscribe", task_id);
          frappe.socketio.socket.emit("progress_subscribe", task_id);
          frappe.socketio.open_tasks[task_id] = opts;
        },
        task_subscribe: function(task_id) {
          frappe.socketio.socket.emit("task_subscribe", task_id);
        },
        task_unsubscribe: function(task_id) {
          frappe.socketio.socket.emit("task_unsubscribe", task_id);
        },
        doc_subscribe: function(doctype2, docname) {
          if (frappe.flags.doc_subscribe) {
            console.log("throttled");
            return;
          }
          frappe.flags.doc_subscribe = true;
          setTimeout(function() {
            frappe.flags.doc_subscribe = false;
          }, 1e3);
          frappe.socketio.socket.emit("doc_subscribe", doctype2, docname);
          frappe.socketio.open_docs.push({ doctype: doctype2, docname });
        },
        doc_unsubscribe: function(doctype2, docname) {
          frappe.socketio.socket.emit("doc_unsubscribe", doctype2, docname);
          frappe.socketio.open_docs = $.filter(frappe.socketio.open_docs, function(d2) {
            if (d2.doctype === doctype2 && d2.name === docname) {
              return null;
            } else {
              return d2;
            }
          });
        },
        doc_open: function(doctype2, docname) {
          if (!frappe.socketio.last_doc || (frappe.socketio.last_doc[0] != doctype2 || frappe.socketio.last_doc[1] != docname)) {
            frappe.socketio.socket.emit("doc_open", doctype2, docname);
            frappe.socketio.last_doc && frappe.socketio.doc_close(frappe.socketio.last_doc[0], frappe.socketio.last_doc[1]);
          }
          frappe.socketio.last_doc = [doctype2, docname];
        },
        doc_close: function(doctype2, docname) {
          frappe.socketio.socket.emit("doc_close", doctype2, docname);
          frappe.socketio.socket.emit("doc_typing_stopped", doctype2, docname);
        },
        form_typing: function(doctype2, docname) {
          frappe.socketio.socket.emit("doc_typing", doctype2, docname);
        },
        form_stopped_typing: function(doctype2, docname) {
          frappe.socketio.socket.emit("doc_typing_stopped", doctype2, docname);
        },
        setup_listeners: function() {
          frappe.socketio.socket.on("task_status_change", function(data) {
            frappe.socketio.process_response(data, data.status.toLowerCase());
          });
          frappe.socketio.socket.on("task_progress", function(data) {
            frappe.socketio.process_response(data, "progress");
          });
        },
        setup_reconnect: function() {
          frappe.socketio.socket.on("connect", function() {
            setTimeout(function() {
              $.each(frappe.socketio.open_tasks, function(task_id, opts) {
                frappe.socketio.subscribe(task_id, opts);
              });
              $.each(frappe.socketio.open_docs, function(d2) {
                if (locals[d2.doctype] && locals[d2.doctype][d2.name]) {
                  frappe.socketio.doc_subscribe(d2.doctype, d2.name);
                }
              });
              if (cur_frm && cur_frm.doc) {
                frappe.socketio.doc_open(cur_frm.doc.doctype, cur_frm.doc.name);
              }
            }, 5e3);
          });
        },
        process_response: function(data, method) {
          if (!data) {
            return;
          }
          var opts = frappe.socketio.open_tasks[data.task_id];
          if (opts[method]) {
            opts[method](data);
          }
          if (method === "success") {
            if (opts.callback)
              opts.callback(data);
          }
          frappe.request.cleanup(opts, data);
          if (opts.always) {
            opts.always(data);
          }
          if (data.status_code && data.status_code > 400 && opts.error) {
            opts.error(data);
          }
        }
      };
      frappe.provide("frappe.realtime");
      frappe.realtime.on = function(event2, callback) {
        frappe.socketio.socket && frappe.socketio.socket.on(event2, callback);
      };
      frappe.realtime.off = function(event2, callback) {
        frappe.socketio.socket && frappe.socketio.socket.off(event2, callback);
      };
      frappe.realtime.publish = function(event2, message2) {
        if (frappe.socketio.socket) {
          frappe.socketio.socket.emit(event2, message2);
        }
      };
    }
  });

  // node_modules/fast-deep-equal/index.js
  var require_fast_deep_equal = __commonJS({
    "node_modules/fast-deep-equal/index.js"(exports2, module2) {
      "use strict";
      var isArray = Array.isArray;
      var keyList = Object.keys;
      var hasProp = Object.prototype.hasOwnProperty;
      module2.exports = function equal(a2, b2) {
        if (a2 === b2)
          return true;
        if (a2 && b2 && typeof a2 == "object" && typeof b2 == "object") {
          var arrA = isArray(a2), arrB = isArray(b2), i2, length, key2;
          if (arrA && arrB) {
            length = a2.length;
            if (length != b2.length)
              return false;
            for (i2 = length; i2-- !== 0; )
              if (!equal(a2[i2], b2[i2]))
                return false;
            return true;
          }
          if (arrA != arrB)
            return false;
          var dateA = a2 instanceof Date, dateB = b2 instanceof Date;
          if (dateA != dateB)
            return false;
          if (dateA && dateB)
            return a2.getTime() == b2.getTime();
          var regexpA = a2 instanceof RegExp, regexpB = b2 instanceof RegExp;
          if (regexpA != regexpB)
            return false;
          if (regexpA && regexpB)
            return a2.toString() == b2.toString();
          var keys = keyList(a2);
          length = keys.length;
          if (length !== keyList(b2).length)
            return false;
          for (i2 = length; i2-- !== 0; )
            if (!hasProp.call(b2, keys[i2]))
              return false;
          for (i2 = length; i2-- !== 0; ) {
            key2 = keys[i2];
            if (!equal(a2[key2], b2[key2]))
              return false;
          }
          return true;
        }
        return a2 !== a2 && b2 !== b2;
      };
    }
  });

  // frappe/public/js/frappe/model/model.js
  var require_model = __commonJS({
    "frappe/public/js/frappe/model/model.js"(exports, module) {
      frappe.provide("frappe.model");
      $.extend(frappe.model, {
        no_value_type: [
          "Section Break",
          "Column Break",
          "Tab Break",
          "HTML",
          "Table",
          "Table MultiSelect",
          "Button",
          "Image",
          "Fold",
          "Heading"
        ],
        layout_fields: ["Section Break", "Column Break", "Tab Break", "Fold"],
        std_fields_list: [
          "name",
          "owner",
          "creation",
          "modified",
          "modified_by",
          "_user_tags",
          "_comments",
          "_assign",
          "_liked_by",
          "docstatus",
          "idx"
        ],
        child_table_field_list: ["parent", "parenttype", "parentfield"],
        core_doctypes_list: [
          "DocType",
          "DocField",
          "DocPerm",
          "User",
          "Role",
          "Has Role",
          "Page",
          "Module Def",
          "Print Format",
          "Report",
          "Customize Form",
          "Customize Form Field",
          "Property Setter",
          "Custom Field",
          "Client Script"
        ],
        std_fields: [
          { fieldname: "name", fieldtype: "Link", label: __("ID") },
          { fieldname: "owner", fieldtype: "Link", label: __("Created By"), options: "User" },
          { fieldname: "idx", fieldtype: "Int", label: __("Index") },
          { fieldname: "creation", fieldtype: "Date", label: __("Created On") },
          { fieldname: "modified", fieldtype: "Date", label: __("Last Updated On") },
          { fieldname: "modified_by", fieldtype: "Data", label: __("Last Updated By") },
          { fieldname: "_user_tags", fieldtype: "Data", label: __("Tags") },
          { fieldname: "_liked_by", fieldtype: "Data", label: __("Liked By") },
          { fieldname: "_comments", fieldtype: "Text", label: __("Comments") },
          { fieldname: "_assign", fieldtype: "Text", label: __("Assigned To") },
          { fieldname: "docstatus", fieldtype: "Int", label: __("Document Status") }
        ],
        numeric_fieldtypes: ["Int", "Float", "Currency", "Percent", "Duration"],
        std_fields_table: [
          { fieldname: "parent", fieldtype: "Data", label: __("Parent") }
        ],
        table_fields: ["Table", "Table MultiSelect"],
        new_names: {},
        events: {},
        user_settings: {},
        init: function() {
          frappe.realtime.on("doc_update", function(data) {
            frappe.views.ListView.trigger_list_update(data);
            var doc2 = locals[data.doctype] && locals[data.doctype][data.name];
            if (doc2) {
              if (frappe.get_route()[0] === "Form" && cur_frm.doc.doctype === doc2.doctype && cur_frm.doc.name === doc2.name) {
                if (!frappe.ui.form.is_saving && data.modified != cur_frm.doc.modified) {
                  doc2.__needs_refresh = true;
                  cur_frm.check_doctype_conflict();
                }
              } else {
                if (!doc2.__unsaved) {
                  frappe.model.remove_from_locals(doc2.doctype, doc2.name);
                } else {
                  doc2.__needs_refresh = true;
                }
              }
            }
          });
          frappe.realtime.on("list_update", function(data) {
            frappe.views.ListView.trigger_list_update(data);
          });
        },
        is_value_type: function(fieldtype) {
          if (typeof fieldtype == "object") {
            fieldtype = fieldtype.fieldtype;
          }
          return frappe.model.no_value_type.indexOf(fieldtype) === -1;
        },
        is_non_std_field: function(fieldname) {
          return ![...frappe.model.std_fields_list, ...frappe.model.child_table_field_list].includes(fieldname);
        },
        get_std_field: function(fieldname, ignore = false) {
          var docfield = $.map([].concat(frappe.model.std_fields).concat(frappe.model.std_fields_table), function(d2) {
            if (d2.fieldname == fieldname)
              return d2;
          });
          if (!docfield.length) {
            if (ignore) {
              return { fieldname };
            } else {
              frappe.msgprint(__("Unknown Column: {0}", [fieldname]));
            }
          }
          return docfield[0];
        },
        get_from_localstorage: function(doctype2) {
          if (localStorage["_doctype:" + doctype2]) {
            return JSON.parse(localStorage["_doctype:" + doctype2]);
          }
        },
        set_in_localstorage: function(doctype2, docs) {
          try {
            localStorage["_doctype:" + doctype2] = JSON.stringify(docs);
          } catch (e2) {
            console.warn("localStorage quota exceeded, clearing doctype cache");
            frappe.model.clear_local_storage();
            localStorage["_doctype:" + doctype2] = JSON.stringify(docs);
          }
        },
        clear_local_storage: function() {
          for (var key2 in localStorage) {
            if (key2.startsWith("_doctype:")) {
              localStorage.removeItem(key2);
            }
          }
        },
        with_doctype: function(doctype2, callback, async) {
          if (locals.DocType[doctype2]) {
            callback && callback();
            return Promise.resolve();
          } else {
            let cached_timestamp = null;
            let cached_doc = null;
            let cached_docs = frappe.model.get_from_localstorage(doctype2);
            if (cached_docs) {
              cached_doc = cached_docs.filter((doc2) => doc2.name === doctype2)[0];
              if (cached_doc) {
                cached_timestamp = cached_doc.modified;
              }
            }
            return frappe.call({
              method: "frappe.desk.form.load.getdoctype",
              type: "GET",
              args: {
                doctype: doctype2,
                with_parent: 1,
                cached_timestamp
              },
              async,
              callback: function(r2) {
                if (r2.exc) {
                  frappe.msgprint(__("Unable to load: {0}", [__(doctype2)]));
                  throw "No doctype";
                }
                if (r2.message == "use_cache") {
                  frappe.model.sync(cached_doc);
                } else {
                  frappe.model.set_in_localstorage(doctype2, r2.docs);
                }
                frappe.model.init_doctype(doctype2);
                if (r2.user_settings) {
                  frappe.model.user_settings[doctype2] = JSON.parse(r2.user_settings);
                  frappe.model.user_settings[doctype2].updated_on = moment().toString();
                }
                callback && callback(r2);
              }
            });
          }
        },
        init_doctype: function(doctype) {
          var meta = locals.DocType[doctype];
          if (meta.__list_js) {
            eval(meta.__list_js);
          }
          if (meta.__custom_list_js) {
            eval(meta.__custom_list_js);
          }
          if (meta.__calendar_js) {
            eval(meta.__calendar_js);
          }
          if (meta.__map_js) {
            eval(meta.__map_js);
          }
          if (meta.__tree_js) {
            eval(meta.__tree_js);
          }
          if (meta.__templates) {
            $.extend(frappe.templates, meta.__templates);
          }
        },
        with_doc: function(doctype2, name2, callback) {
          return new Promise((resolve) => {
            if (!name2)
              name2 = doctype2;
            if (locals[doctype2] && locals[doctype2][name2] && frappe.model.get_docinfo(doctype2, name2)) {
              callback && callback(name2);
              resolve(frappe.get_doc(doctype2, name2));
            } else {
              return frappe.call({
                method: "frappe.desk.form.load.getdoc",
                type: "GET",
                args: {
                  doctype: doctype2,
                  name: name2
                },
                callback: function(r2) {
                  callback && callback(name2, r2);
                  resolve(frappe.get_doc(doctype2, name2));
                }
              });
            }
          });
        },
        get_docinfo: function(doctype2, name2) {
          return frappe.model.docinfo[doctype2] && frappe.model.docinfo[doctype2][name2] || null;
        },
        set_docinfo: function(doctype2, name2, key2, value) {
          if (frappe.model.docinfo[doctype2] && frappe.model.docinfo[doctype2][name2]) {
            frappe.model.docinfo[doctype2][name2][key2] = value;
          }
        },
        get_shared: function(doctype2, name2) {
          return frappe.model.get_docinfo(doctype2, name2).shared;
        },
        get_server_module_name: function(doctype2) {
          var dt2 = frappe.model.scrub(doctype2);
          var module2 = frappe.model.scrub(locals.DocType[doctype2].module);
          var app = frappe.boot.module_app[module2];
          return app + "." + module2 + ".doctype." + dt2 + "." + dt2;
        },
        scrub: function(txt2) {
          return txt2.replace(/ /g, "_").toLowerCase();
        },
        unscrub: function(txt2) {
          return __(txt2 || "").replace(/-|_/g, " ").replace(/\w*/g, function(keywords) {
            return keywords.charAt(0).toUpperCase() + keywords.substr(1).toLowerCase();
          });
        },
        can_create: function(doctype2) {
          return frappe.boot.user.can_create.indexOf(doctype2) !== -1;
        },
        can_select: function(doctype2) {
          if (frappe.boot.user) {
            return frappe.boot.user.can_select.indexOf(doctype2) !== -1;
          }
        },
        can_read: function(doctype2) {
          if (frappe.boot.user) {
            return frappe.boot.user.can_read.indexOf(doctype2) !== -1;
          }
        },
        can_write: function(doctype2) {
          return frappe.boot.user.can_write.indexOf(doctype2) !== -1;
        },
        can_get_report: function(doctype2) {
          return frappe.boot.user.can_get_report.indexOf(doctype2) !== -1;
        },
        can_delete: function(doctype2) {
          if (!doctype2)
            return false;
          return frappe.boot.user.can_delete.indexOf(doctype2) !== -1;
        },
        can_cancel: function(doctype2) {
          if (!doctype2)
            return false;
          return frappe.boot.user.can_cancel.indexOf(doctype2) !== -1;
        },
        has_workflow: function(doctype2) {
          return frappe.get_list("Workflow", {
            "document_type": doctype2,
            "is_active": 1
          }).length;
        },
        is_submittable: function(doctype2) {
          if (!doctype2)
            return false;
          return locals.DocType[doctype2] && locals.DocType[doctype2].is_submittable;
        },
        is_table: function(doctype2) {
          if (!doctype2)
            return false;
          return locals.DocType[doctype2] && locals.DocType[doctype2].istable;
        },
        is_single: function(doctype2) {
          if (!doctype2)
            return false;
          return frappe.boot.single_types.indexOf(doctype2) != -1;
        },
        is_tree: function(doctype2) {
          if (!doctype2)
            return false;
          return frappe.boot.treeviews.indexOf(doctype2) != -1;
        },
        is_fresh(doc2) {
          return doc2 && doc2.__last_sync_on && new Date() - doc2.__last_sync_on < 5e3;
        },
        can_import: function(doctype2, frm, meta2 = null) {
          if (meta2 && !meta2.allow_import)
            return false;
          if (frappe.user_roles.includes("System Manager"))
            return true;
          if (frm)
            return frm.perm[0].import === 1;
          return frappe.boot.user.can_import.indexOf(doctype2) !== -1;
        },
        can_export: function(doctype2, frm) {
          if (frappe.user_roles.includes("System Manager"))
            return true;
          if (frm)
            return frm.perm[0].export === 1;
          return frappe.boot.user.can_export.indexOf(doctype2) !== -1;
        },
        can_print: function(doctype2, frm) {
          if (frm)
            return frm.perm[0].print === 1;
          return frappe.boot.user.can_print.indexOf(doctype2) !== -1;
        },
        can_email: function(doctype2, frm) {
          if (frm)
            return frm.perm[0].email === 1;
          return frappe.boot.user.can_email.indexOf(doctype2) !== -1;
        },
        can_share: function(doctype2, frm) {
          if (frm) {
            return frm.perm[0].share === 1;
          }
          return frappe.boot.user.can_share.indexOf(doctype2) !== -1;
        },
        can_set_user_permissions: function(doctype2, frm) {
          if (frappe.user_roles.includes("System Manager"))
            return true;
          if (frm)
            return frm.perm[0].set_user_permissions === 1;
          return frappe.boot.user.can_set_user_permissions.indexOf(doctype2) !== -1;
        },
        has_value: function(dt2, dn, fn) {
          var val2 = locals[dt2] && locals[dt2][dn] && locals[dt2][dn][fn];
          var df = frappe.meta.get_docfield(dt2, fn, dn);
          if (frappe.model.table_fields.includes(df.fieldtype)) {
            var ret = false;
            $.each(locals[df.options] || {}, function(k2, d2) {
              if (d2.parent == dn && d2.parenttype == dt2 && d2.parentfield == df.fieldname) {
                ret = true;
                return false;
              }
            });
          } else {
            var ret = !is_null(val2);
          }
          return ret ? true : false;
        },
        get_list: function(doctype2, filters2) {
          var docsdict = locals[doctype2] || locals[":" + doctype2] || {};
          if ($.isEmptyObject(docsdict))
            return [];
          return frappe.utils.filter_dict(docsdict, filters2);
        },
        get_value: function(doctype2, filters2, fieldname, callback) {
          if (callback) {
            frappe.call({
              method: "frappe.client.get_value",
              args: {
                doctype: doctype2,
                fieldname,
                filters: filters2
              },
              callback: function(r2) {
                if (!r2.exc) {
                  callback(r2.message);
                }
              }
            });
          } else {
            if (typeof filters2 === "string" && locals[doctype2] && locals[doctype2][filters2]) {
              return locals[doctype2][filters2][fieldname];
            } else {
              var l2 = frappe.get_list(doctype2, filters2);
              return l2.length && l2[0] ? l2[0][fieldname] : null;
            }
          }
        },
        set_value: function(doctype2, docname, fieldname, value, fieldtype, skip_dirty_trigger = false) {
          var doc2;
          if ($.isPlainObject(doctype2)) {
            doc2 = doctype2;
            fieldname = docname;
            value = fieldname;
          } else {
            doc2 = locals[doctype2] && locals[doctype2][docname];
          }
          let to_update = fieldname;
          let tasks = [];
          if (!$.isPlainObject(to_update)) {
            to_update = {};
            to_update[fieldname] = value;
          }
          $.each(to_update, (key2, value2) => {
            if (doc2 && doc2[key2] !== value2) {
              if (doc2.__unedited && !(!doc2[key2] && !value2)) {
                doc2.__unedited = false;
              }
              doc2[key2] = value2;
              tasks.push(() => frappe.model.trigger(key2, value2, doc2, skip_dirty_trigger));
            } else {
              if (in_list(["Link", "Dynamic Link"], fieldtype) && doc2) {
                tasks.push(() => frappe.model.trigger(key2, value2, doc2, skip_dirty_trigger));
              }
            }
          });
          return frappe.run_serially(tasks);
        },
        on: function(doctype2, fieldname, fn) {
          frappe.provide("frappe.model.events." + doctype2);
          if (!frappe.model.events[doctype2][fieldname]) {
            frappe.model.events[doctype2][fieldname] = [];
          }
          frappe.model.events[doctype2][fieldname].push(fn);
        },
        trigger: function(fieldname, value, doc2, skip_dirty_trigger = false) {
          const tasks = [];
          function enqueue_events(events) {
            if (!events)
              return;
            for (const fn of events) {
              if (!fn)
                continue;
              tasks.push(() => {
                const return_value = fn(fieldname, value, doc2, skip_dirty_trigger);
                if (return_value && return_value.then) {
                  return return_value;
                } else {
                  return frappe.after_server_call();
                }
              });
            }
          }
          ;
          if (frappe.model.events[doc2.doctype]) {
            enqueue_events(frappe.model.events[doc2.doctype][fieldname]);
            enqueue_events(frappe.model.events[doc2.doctype]["*"]);
          }
          return frappe.run_serially(tasks);
        },
        get_doc: function(doctype2, name2) {
          if (!name2)
            name2 = doctype2;
          if ($.isPlainObject(name2)) {
            var doc2 = frappe.get_list(doctype2, name2);
            return doc2 && doc2.length ? doc2[0] : null;
          }
          return locals[doctype2] ? locals[doctype2][name2] : null;
        },
        get_children: function(doctype2, parent, parentfield, filters2) {
          if ($.isPlainObject(doctype2)) {
            var doc2 = doctype2;
            var filters2 = parentfield;
            var parentfield = parent;
          } else {
            var doc2 = frappe.get_doc(doctype2, parent);
          }
          var children = doc2[parentfield] || [];
          if (filters2) {
            return frappe.utils.filter_dict(children, filters2);
          } else {
            return children;
          }
        },
        clear_table: function(doc2, parentfield) {
          for (var i2 = 0, l2 = (doc2[parentfield] || []).length; i2 < l2; i2++) {
            var d2 = doc2[parentfield][i2];
            delete locals[d2.doctype][d2.name];
          }
          doc2[parentfield] = [];
        },
        remove_from_locals: function(doctype2, name2) {
          this.clear_doc(doctype2, name2);
          if (frappe.views.formview[doctype2]) {
            delete frappe.views.formview[doctype2].frm.opendocs[name2];
          }
        },
        clear_doc: function(doctype2, name2) {
          var doc2 = locals[doctype2] && locals[doctype2][name2];
          if (!doc2)
            return;
          var parent = null;
          if (doc2.parenttype) {
            var parent = doc2.parent, parenttype = doc2.parenttype, parentfield = doc2.parentfield;
          }
          delete locals[doctype2][name2];
          if (parent) {
            var parent_doc = locals[parenttype][parent];
            var newlist = [], idx = 1;
            $.each(parent_doc[parentfield], function(i2, d2) {
              if (d2.name != name2) {
                newlist.push(d2);
                d2.idx = idx;
                idx++;
              }
              parent_doc[parentfield] = newlist;
            });
          }
        },
        get_no_copy_list: function(doctype2) {
          var no_copy_list = ["name", "amended_from", "amendment_date", "cancel_reason"];
          var docfields = frappe.get_doc("DocType", doctype2).fields || [];
          for (var i2 = 0, j2 = docfields.length; i2 < j2; i2++) {
            var df = docfields[i2];
            if (cint(df.no_copy))
              no_copy_list.push(df.fieldname);
          }
          return no_copy_list;
        },
        delete_doc: function(doctype2, docname, callback) {
          let title = docname;
          const title_field = frappe.get_meta(doctype2).title_field;
          if (frappe.get_meta(doctype2).autoname == "hash" && title_field) {
            const value = frappe.model.get_value(doctype2, docname, title_field);
            if (value) {
              title = `${value} (${docname})`;
            }
          }
          frappe.confirm(__("Permanently delete {0}?", [title.bold()]), function() {
            return frappe.call({
              method: "frappe.client.delete",
              args: {
                doctype: doctype2,
                name: docname
              },
              callback: function(r2, rt2) {
                if (!r2.exc) {
                  frappe.utils.play_sound("delete");
                  frappe.model.clear_doc(doctype2, docname);
                  if (callback)
                    callback(r2, rt2);
                }
              }
            });
          });
        },
        rename_doc: function(doctype2, docname, callback) {
          let message2 = __("Merge with existing");
          let warning = __("This cannot be undone");
          let merge_label = message2 + " <b>(" + warning + ")</b>";
          var d2 = new frappe.ui.Dialog({
            title: __("Rename {0}", [__(docname)]),
            fields: [
              { label: __("New Name"), fieldname: "new_name", fieldtype: "Data", reqd: 1, "default": docname },
              { label: merge_label, fieldtype: "Check", fieldname: "merge" }
            ]
          });
          d2.set_primary_action(__("Rename"), function() {
            d2.hide();
            var args = d2.get_values();
            if (!args)
              return;
            return frappe.call({
              method: "frappe.rename_doc",
              freeze: true,
              freeze_message: "Updating related fields...",
              args: {
                doctype: doctype2,
                old: docname,
                new: args.new_name,
                merge: args.merge
              },
              btn: d2.get_primary_btn(),
              callback: function(r2, rt2) {
                if (!r2.exc) {
                  $(document).trigger("rename", [
                    doctype2,
                    docname,
                    r2.message || args.new_name
                  ]);
                  if (locals[doctype2] && locals[doctype2][docname])
                    delete locals[doctype2][docname];
                  d2.hide();
                  if (callback)
                    callback(r2.message);
                }
              }
            });
          });
          d2.show();
        },
        round_floats_in: function(doc2, fieldnames) {
          if (!fieldnames) {
            fieldnames = frappe.meta.get_fieldnames(doc2.doctype, doc2.parent, { "fieldtype": ["in", ["Currency", "Float"]] });
          }
          for (var i2 = 0, j2 = fieldnames.length; i2 < j2; i2++) {
            var fieldname = fieldnames[i2];
            doc2[fieldname] = flt(doc2[fieldname], precision(fieldname, doc2));
          }
        },
        validate_missing: function(doc2, fieldname) {
          if (!doc2[fieldname]) {
            frappe.throw(__("Please specify") + ": " + __(frappe.meta.get_label(doc2.doctype, fieldname, doc2.parent || doc2.name)));
          }
        },
        get_all_docs: function(doc2) {
          var all = [doc2];
          for (var key2 in doc2) {
            if ($.isArray(doc2[key2])) {
              var children = doc2[key2];
              for (var i2 = 0, l2 = children.length; i2 < l2; i2++) {
                all.push(children[i2]);
              }
            }
          }
          return all;
        },
        get_full_column_name: function(fieldname, doctype2) {
          if (fieldname.includes("`tab"))
            return fieldname;
          return "`tab" + doctype2 + "`.`" + fieldname + "`";
        },
        is_numeric_field: function(fieldtype) {
          if (!fieldtype)
            return;
          if (typeof fieldtype === "object") {
            fieldtype = fieldtype.fieldtype;
          }
          return frappe.model.numeric_fieldtypes.includes(fieldtype);
        }
      });
      frappe.get_doc = frappe.model.get_doc;
      frappe.get_children = frappe.model.get_children;
      frappe.get_list = frappe.model.get_list;
      var getchildren = function(doctype2, parent, parentfield) {
        var children = [];
        $.each(locals[doctype2] || {}, function(i2, d2) {
          if (d2.parent === parent && d2.parentfield === parentfield) {
            children.push(d2);
          }
        });
        return children;
      };
    }
  });

  // node_modules/crypt/crypt.js
  var require_crypt = __commonJS({
    "node_modules/crypt/crypt.js"(exports2, module2) {
      (function() {
        var base64map = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", crypt = {
          rotl: function(n2, b2) {
            return n2 << b2 | n2 >>> 32 - b2;
          },
          rotr: function(n2, b2) {
            return n2 << 32 - b2 | n2 >>> b2;
          },
          endian: function(n2) {
            if (n2.constructor == Number) {
              return crypt.rotl(n2, 8) & 16711935 | crypt.rotl(n2, 24) & 4278255360;
            }
            for (var i2 = 0; i2 < n2.length; i2++)
              n2[i2] = crypt.endian(n2[i2]);
            return n2;
          },
          randomBytes: function(n2) {
            for (var bytes = []; n2 > 0; n2--)
              bytes.push(Math.floor(Math.random() * 256));
            return bytes;
          },
          bytesToWords: function(bytes) {
            for (var words = [], i2 = 0, b2 = 0; i2 < bytes.length; i2++, b2 += 8)
              words[b2 >>> 5] |= bytes[i2] << 24 - b2 % 32;
            return words;
          },
          wordsToBytes: function(words) {
            for (var bytes = [], b2 = 0; b2 < words.length * 32; b2 += 8)
              bytes.push(words[b2 >>> 5] >>> 24 - b2 % 32 & 255);
            return bytes;
          },
          bytesToHex: function(bytes) {
            for (var hex = [], i2 = 0; i2 < bytes.length; i2++) {
              hex.push((bytes[i2] >>> 4).toString(16));
              hex.push((bytes[i2] & 15).toString(16));
            }
            return hex.join("");
          },
          hexToBytes: function(hex) {
            for (var bytes = [], c2 = 0; c2 < hex.length; c2 += 2)
              bytes.push(parseInt(hex.substr(c2, 2), 16));
            return bytes;
          },
          bytesToBase64: function(bytes) {
            for (var base64 = [], i2 = 0; i2 < bytes.length; i2 += 3) {
              var triplet = bytes[i2] << 16 | bytes[i2 + 1] << 8 | bytes[i2 + 2];
              for (var j2 = 0; j2 < 4; j2++)
                if (i2 * 8 + j2 * 6 <= bytes.length * 8)
                  base64.push(base64map.charAt(triplet >>> 6 * (3 - j2) & 63));
                else
                  base64.push("=");
            }
            return base64.join("");
          },
          base64ToBytes: function(base64) {
            base64 = base64.replace(/[^A-Z0-9+\/]/ig, "");
            for (var bytes = [], i2 = 0, imod4 = 0; i2 < base64.length; imod4 = ++i2 % 4) {
              if (imod4 == 0)
                continue;
              bytes.push((base64map.indexOf(base64.charAt(i2 - 1)) & Math.pow(2, -2 * imod4 + 8) - 1) << imod4 * 2 | base64map.indexOf(base64.charAt(i2)) >>> 6 - imod4 * 2);
            }
            return bytes;
          }
        };
        module2.exports = crypt;
      })();
    }
  });

  // node_modules/charenc/charenc.js
  var require_charenc = __commonJS({
    "node_modules/charenc/charenc.js"(exports2, module2) {
      var charenc = {
        utf8: {
          stringToBytes: function(str) {
            return charenc.bin.stringToBytes(unescape(encodeURIComponent(str)));
          },
          bytesToString: function(bytes) {
            return decodeURIComponent(escape(charenc.bin.bytesToString(bytes)));
          }
        },
        bin: {
          stringToBytes: function(str) {
            for (var bytes = [], i2 = 0; i2 < str.length; i2++)
              bytes.push(str.charCodeAt(i2) & 255);
            return bytes;
          },
          bytesToString: function(bytes) {
            for (var str = [], i2 = 0; i2 < bytes.length; i2++)
              str.push(String.fromCharCode(bytes[i2]));
            return str.join("");
          }
        }
      };
      module2.exports = charenc;
    }
  });

  // node_modules/is-buffer/index.js
  var require_is_buffer = __commonJS({
    "node_modules/is-buffer/index.js"(exports2, module2) {
      module2.exports = function(obj) {
        return obj != null && (isBuffer(obj) || isSlowBuffer(obj) || !!obj._isBuffer);
      };
      function isBuffer(obj) {
        return !!obj.constructor && typeof obj.constructor.isBuffer === "function" && obj.constructor.isBuffer(obj);
      }
      function isSlowBuffer(obj) {
        return typeof obj.readFloatLE === "function" && typeof obj.slice === "function" && isBuffer(obj.slice(0, 0));
      }
    }
  });

  // node_modules/md5/md5.js
  var require_md5 = __commonJS({
    "node_modules/md5/md5.js"(exports2, module2) {
      (function() {
        var crypt = require_crypt(), utf8 = require_charenc().utf8, isBuffer = require_is_buffer(), bin = require_charenc().bin, md52 = function(message2, options) {
          if (message2.constructor == String)
            if (options && options.encoding === "binary")
              message2 = bin.stringToBytes(message2);
            else
              message2 = utf8.stringToBytes(message2);
          else if (isBuffer(message2))
            message2 = Array.prototype.slice.call(message2, 0);
          else if (!Array.isArray(message2) && message2.constructor !== Uint8Array)
            message2 = message2.toString();
          var m2 = crypt.bytesToWords(message2), l2 = message2.length * 8, a2 = 1732584193, b2 = -271733879, c2 = -1732584194, d2 = 271733878;
          for (var i2 = 0; i2 < m2.length; i2++) {
            m2[i2] = (m2[i2] << 8 | m2[i2] >>> 24) & 16711935 | (m2[i2] << 24 | m2[i2] >>> 8) & 4278255360;
          }
          m2[l2 >>> 5] |= 128 << l2 % 32;
          m2[(l2 + 64 >>> 9 << 4) + 14] = l2;
          var FF = md52._ff, GG = md52._gg, HH = md52._hh, II = md52._ii;
          for (var i2 = 0; i2 < m2.length; i2 += 16) {
            var aa = a2, bb = b2, cc = c2, dd = d2;
            a2 = FF(a2, b2, c2, d2, m2[i2 + 0], 7, -680876936);
            d2 = FF(d2, a2, b2, c2, m2[i2 + 1], 12, -389564586);
            c2 = FF(c2, d2, a2, b2, m2[i2 + 2], 17, 606105819);
            b2 = FF(b2, c2, d2, a2, m2[i2 + 3], 22, -1044525330);
            a2 = FF(a2, b2, c2, d2, m2[i2 + 4], 7, -176418897);
            d2 = FF(d2, a2, b2, c2, m2[i2 + 5], 12, 1200080426);
            c2 = FF(c2, d2, a2, b2, m2[i2 + 6], 17, -1473231341);
            b2 = FF(b2, c2, d2, a2, m2[i2 + 7], 22, -45705983);
            a2 = FF(a2, b2, c2, d2, m2[i2 + 8], 7, 1770035416);
            d2 = FF(d2, a2, b2, c2, m2[i2 + 9], 12, -1958414417);
            c2 = FF(c2, d2, a2, b2, m2[i2 + 10], 17, -42063);
            b2 = FF(b2, c2, d2, a2, m2[i2 + 11], 22, -1990404162);
            a2 = FF(a2, b2, c2, d2, m2[i2 + 12], 7, 1804603682);
            d2 = FF(d2, a2, b2, c2, m2[i2 + 13], 12, -40341101);
            c2 = FF(c2, d2, a2, b2, m2[i2 + 14], 17, -1502002290);
            b2 = FF(b2, c2, d2, a2, m2[i2 + 15], 22, 1236535329);
            a2 = GG(a2, b2, c2, d2, m2[i2 + 1], 5, -165796510);
            d2 = GG(d2, a2, b2, c2, m2[i2 + 6], 9, -1069501632);
            c2 = GG(c2, d2, a2, b2, m2[i2 + 11], 14, 643717713);
            b2 = GG(b2, c2, d2, a2, m2[i2 + 0], 20, -373897302);
            a2 = GG(a2, b2, c2, d2, m2[i2 + 5], 5, -701558691);
            d2 = GG(d2, a2, b2, c2, m2[i2 + 10], 9, 38016083);
            c2 = GG(c2, d2, a2, b2, m2[i2 + 15], 14, -660478335);
            b2 = GG(b2, c2, d2, a2, m2[i2 + 4], 20, -405537848);
            a2 = GG(a2, b2, c2, d2, m2[i2 + 9], 5, 568446438);
            d2 = GG(d2, a2, b2, c2, m2[i2 + 14], 9, -1019803690);
            c2 = GG(c2, d2, a2, b2, m2[i2 + 3], 14, -187363961);
            b2 = GG(b2, c2, d2, a2, m2[i2 + 8], 20, 1163531501);
            a2 = GG(a2, b2, c2, d2, m2[i2 + 13], 5, -1444681467);
            d2 = GG(d2, a2, b2, c2, m2[i2 + 2], 9, -51403784);
            c2 = GG(c2, d2, a2, b2, m2[i2 + 7], 14, 1735328473);
            b2 = GG(b2, c2, d2, a2, m2[i2 + 12], 20, -1926607734);
            a2 = HH(a2, b2, c2, d2, m2[i2 + 5], 4, -378558);
            d2 = HH(d2, a2, b2, c2, m2[i2 + 8], 11, -2022574463);
            c2 = HH(c2, d2, a2, b2, m2[i2 + 11], 16, 1839030562);
            b2 = HH(b2, c2, d2, a2, m2[i2 + 14], 23, -35309556);
            a2 = HH(a2, b2, c2, d2, m2[i2 + 1], 4, -1530992060);
            d2 = HH(d2, a2, b2, c2, m2[i2 + 4], 11, 1272893353);
            c2 = HH(c2, d2, a2, b2, m2[i2 + 7], 16, -155497632);
            b2 = HH(b2, c2, d2, a2, m2[i2 + 10], 23, -1094730640);
            a2 = HH(a2, b2, c2, d2, m2[i2 + 13], 4, 681279174);
            d2 = HH(d2, a2, b2, c2, m2[i2 + 0], 11, -358537222);
            c2 = HH(c2, d2, a2, b2, m2[i2 + 3], 16, -722521979);
            b2 = HH(b2, c2, d2, a2, m2[i2 + 6], 23, 76029189);
            a2 = HH(a2, b2, c2, d2, m2[i2 + 9], 4, -640364487);
            d2 = HH(d2, a2, b2, c2, m2[i2 + 12], 11, -421815835);
            c2 = HH(c2, d2, a2, b2, m2[i2 + 15], 16, 530742520);
            b2 = HH(b2, c2, d2, a2, m2[i2 + 2], 23, -995338651);
            a2 = II(a2, b2, c2, d2, m2[i2 + 0], 6, -198630844);
            d2 = II(d2, a2, b2, c2, m2[i2 + 7], 10, 1126891415);
            c2 = II(c2, d2, a2, b2, m2[i2 + 14], 15, -1416354905);
            b2 = II(b2, c2, d2, a2, m2[i2 + 5], 21, -57434055);
            a2 = II(a2, b2, c2, d2, m2[i2 + 12], 6, 1700485571);
            d2 = II(d2, a2, b2, c2, m2[i2 + 3], 10, -1894986606);
            c2 = II(c2, d2, a2, b2, m2[i2 + 10], 15, -1051523);
            b2 = II(b2, c2, d2, a2, m2[i2 + 1], 21, -2054922799);
            a2 = II(a2, b2, c2, d2, m2[i2 + 8], 6, 1873313359);
            d2 = II(d2, a2, b2, c2, m2[i2 + 15], 10, -30611744);
            c2 = II(c2, d2, a2, b2, m2[i2 + 6], 15, -1560198380);
            b2 = II(b2, c2, d2, a2, m2[i2 + 13], 21, 1309151649);
            a2 = II(a2, b2, c2, d2, m2[i2 + 4], 6, -145523070);
            d2 = II(d2, a2, b2, c2, m2[i2 + 11], 10, -1120210379);
            c2 = II(c2, d2, a2, b2, m2[i2 + 2], 15, 718787259);
            b2 = II(b2, c2, d2, a2, m2[i2 + 9], 21, -343485551);
            a2 = a2 + aa >>> 0;
            b2 = b2 + bb >>> 0;
            c2 = c2 + cc >>> 0;
            d2 = d2 + dd >>> 0;
          }
          return crypt.endian([a2, b2, c2, d2]);
        };
        md52._ff = function(a2, b2, c2, d2, x2, s2, t3) {
          var n2 = a2 + (b2 & c2 | ~b2 & d2) + (x2 >>> 0) + t3;
          return (n2 << s2 | n2 >>> 32 - s2) + b2;
        };
        md52._gg = function(a2, b2, c2, d2, x2, s2, t3) {
          var n2 = a2 + (b2 & d2 | c2 & ~d2) + (x2 >>> 0) + t3;
          return (n2 << s2 | n2 >>> 32 - s2) + b2;
        };
        md52._hh = function(a2, b2, c2, d2, x2, s2, t3) {
          var n2 = a2 + (b2 ^ c2 ^ d2) + (x2 >>> 0) + t3;
          return (n2 << s2 | n2 >>> 32 - s2) + b2;
        };
        md52._ii = function(a2, b2, c2, d2, x2, s2, t3) {
          var n2 = a2 + (c2 ^ (b2 | ~d2)) + (x2 >>> 0) + t3;
          return (n2 << s2 | n2 >>> 32 - s2) + b2;
        };
        md52._blocksize = 16;
        md52._digestsize = 16;
        module2.exports = function(message2, options) {
          if (message2 === void 0 || message2 === null)
            throw new Error("Illegal argument " + message2);
          var digestbytes = crypt.wordsToBytes(md52(message2, options));
          return options && options.asBytes ? digestbytes : options && options.asString ? bin.bytesToString(digestbytes) : crypt.bytesToHex(digestbytes);
        };
      })();
    }
  });

  // node_modules/showdown/dist/showdown.js
  var require_showdown = __commonJS({
    "node_modules/showdown/dist/showdown.js"(exports2, module2) {
      (function() {
        function getDefaultOpts(simple) {
          "use strict";
          var defaultOptions = {
            omitExtraWLInCodeBlocks: {
              defaultValue: false,
              describe: "Omit the default extra whiteline added to code blocks",
              type: "boolean"
            },
            noHeaderId: {
              defaultValue: false,
              describe: "Turn on/off generated header id",
              type: "boolean"
            },
            prefixHeaderId: {
              defaultValue: false,
              describe: "Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",
              type: "string"
            },
            rawPrefixHeaderId: {
              defaultValue: false,
              describe: 'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',
              type: "boolean"
            },
            ghCompatibleHeaderId: {
              defaultValue: false,
              describe: "Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",
              type: "boolean"
            },
            rawHeaderId: {
              defaultValue: false,
              describe: `Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,
              type: "boolean"
            },
            headerLevelStart: {
              defaultValue: false,
              describe: "The header blocks level start",
              type: "integer"
            },
            parseImgDimensions: {
              defaultValue: false,
              describe: "Turn on/off image dimension parsing",
              type: "boolean"
            },
            simplifiedAutoLink: {
              defaultValue: false,
              describe: "Turn on/off GFM autolink style",
              type: "boolean"
            },
            excludeTrailingPunctuationFromURLs: {
              defaultValue: false,
              describe: "Excludes trailing punctuation from links generated with autoLinking",
              type: "boolean"
            },
            literalMidWordUnderscores: {
              defaultValue: false,
              describe: "Parse midword underscores as literal underscores",
              type: "boolean"
            },
            literalMidWordAsterisks: {
              defaultValue: false,
              describe: "Parse midword asterisks as literal asterisks",
              type: "boolean"
            },
            strikethrough: {
              defaultValue: false,
              describe: "Turn on/off strikethrough support",
              type: "boolean"
            },
            tables: {
              defaultValue: false,
              describe: "Turn on/off tables support",
              type: "boolean"
            },
            tablesHeaderId: {
              defaultValue: false,
              describe: "Add an id to table headers",
              type: "boolean"
            },
            ghCodeBlocks: {
              defaultValue: true,
              describe: "Turn on/off GFM fenced code blocks support",
              type: "boolean"
            },
            tasklists: {
              defaultValue: false,
              describe: "Turn on/off GFM tasklist support",
              type: "boolean"
            },
            smoothLivePreview: {
              defaultValue: false,
              describe: "Prevents weird effects in live previews due to incomplete input",
              type: "boolean"
            },
            smartIndentationFix: {
              defaultValue: false,
              description: "Tries to smartly fix indentation in es6 strings",
              type: "boolean"
            },
            disableForced4SpacesIndentedSublists: {
              defaultValue: false,
              description: "Disables the requirement of indenting nested sublists by 4 spaces",
              type: "boolean"
            },
            simpleLineBreaks: {
              defaultValue: false,
              description: "Parses simple line breaks as <br> (GFM Style)",
              type: "boolean"
            },
            requireSpaceBeforeHeadingText: {
              defaultValue: false,
              description: "Makes adding a space between `#` and the header text mandatory (GFM Style)",
              type: "boolean"
            },
            ghMentions: {
              defaultValue: false,
              description: "Enables github @mentions",
              type: "boolean"
            },
            ghMentionsLink: {
              defaultValue: "https://github.com/{u}",
              description: "Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",
              type: "string"
            },
            encodeEmails: {
              defaultValue: true,
              description: "Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",
              type: "boolean"
            },
            openLinksInNewWindow: {
              defaultValue: false,
              description: "Open all links in new windows",
              type: "boolean"
            },
            backslashEscapesHTMLTags: {
              defaultValue: false,
              description: "Support for HTML Tag escaping. ex: <div>foo</div>",
              type: "boolean"
            },
            emoji: {
              defaultValue: false,
              description: "Enable emoji support. Ex: `this is a :smile: emoji`",
              type: "boolean"
            },
            underline: {
              defaultValue: false,
              description: "Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",
              type: "boolean"
            },
            completeHTMLDocument: {
              defaultValue: false,
              description: "Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",
              type: "boolean"
            },
            metadata: {
              defaultValue: false,
              description: "Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",
              type: "boolean"
            },
            splitAdjacentBlockquotes: {
              defaultValue: false,
              description: "Split adjacent blockquote blocks",
              type: "boolean"
            }
          };
          if (simple === false) {
            return JSON.parse(JSON.stringify(defaultOptions));
          }
          var ret = {};
          for (var opt in defaultOptions) {
            if (defaultOptions.hasOwnProperty(opt)) {
              ret[opt] = defaultOptions[opt].defaultValue;
            }
          }
          return ret;
        }
        function allOptionsOn() {
          "use strict";
          var options = getDefaultOpts(true), ret = {};
          for (var opt in options) {
            if (options.hasOwnProperty(opt)) {
              ret[opt] = true;
            }
          }
          return ret;
        }
        var showdown2 = {}, parsers = {}, extensions = {}, globalOptions = getDefaultOpts(true), setFlavor = "vanilla", flavor = {
          github: {
            omitExtraWLInCodeBlocks: true,
            simplifiedAutoLink: true,
            excludeTrailingPunctuationFromURLs: true,
            literalMidWordUnderscores: true,
            strikethrough: true,
            tables: true,
            tablesHeaderId: true,
            ghCodeBlocks: true,
            tasklists: true,
            disableForced4SpacesIndentedSublists: true,
            simpleLineBreaks: true,
            requireSpaceBeforeHeadingText: true,
            ghCompatibleHeaderId: true,
            ghMentions: true,
            backslashEscapesHTMLTags: true,
            emoji: true,
            splitAdjacentBlockquotes: true
          },
          original: {
            noHeaderId: true,
            ghCodeBlocks: false
          },
          ghost: {
            omitExtraWLInCodeBlocks: true,
            parseImgDimensions: true,
            simplifiedAutoLink: true,
            excludeTrailingPunctuationFromURLs: true,
            literalMidWordUnderscores: true,
            strikethrough: true,
            tables: true,
            tablesHeaderId: true,
            ghCodeBlocks: true,
            tasklists: true,
            smoothLivePreview: true,
            simpleLineBreaks: true,
            requireSpaceBeforeHeadingText: true,
            ghMentions: false,
            encodeEmails: true
          },
          vanilla: getDefaultOpts(true),
          allOn: allOptionsOn()
        };
        showdown2.helper = {};
        showdown2.extensions = {};
        showdown2.setOption = function(key2, value) {
          "use strict";
          globalOptions[key2] = value;
          return this;
        };
        showdown2.getOption = function(key2) {
          "use strict";
          return globalOptions[key2];
        };
        showdown2.getOptions = function() {
          "use strict";
          return globalOptions;
        };
        showdown2.resetOptions = function() {
          "use strict";
          globalOptions = getDefaultOpts(true);
        };
        showdown2.setFlavor = function(name2) {
          "use strict";
          if (!flavor.hasOwnProperty(name2)) {
            throw Error(name2 + " flavor was not found");
          }
          showdown2.resetOptions();
          var preset = flavor[name2];
          setFlavor = name2;
          for (var option in preset) {
            if (preset.hasOwnProperty(option)) {
              globalOptions[option] = preset[option];
            }
          }
        };
        showdown2.getFlavor = function() {
          "use strict";
          return setFlavor;
        };
        showdown2.getFlavorOptions = function(name2) {
          "use strict";
          if (flavor.hasOwnProperty(name2)) {
            return flavor[name2];
          }
        };
        showdown2.getDefaultOptions = function(simple) {
          "use strict";
          return getDefaultOpts(simple);
        };
        showdown2.subParser = function(name2, func) {
          "use strict";
          if (showdown2.helper.isString(name2)) {
            if (typeof func !== "undefined") {
              parsers[name2] = func;
            } else {
              if (parsers.hasOwnProperty(name2)) {
                return parsers[name2];
              } else {
                throw Error("SubParser named " + name2 + " not registered!");
              }
            }
          }
        };
        showdown2.extension = function(name2, ext) {
          "use strict";
          if (!showdown2.helper.isString(name2)) {
            throw Error("Extension 'name' must be a string");
          }
          name2 = showdown2.helper.stdExtName(name2);
          if (showdown2.helper.isUndefined(ext)) {
            if (!extensions.hasOwnProperty(name2)) {
              throw Error("Extension named " + name2 + " is not registered!");
            }
            return extensions[name2];
          } else {
            if (typeof ext === "function") {
              ext = ext();
            }
            if (!showdown2.helper.isArray(ext)) {
              ext = [ext];
            }
            var validExtension = validate(ext, name2);
            if (validExtension.valid) {
              extensions[name2] = ext;
            } else {
              throw Error(validExtension.error);
            }
          }
        };
        showdown2.getAllExtensions = function() {
          "use strict";
          return extensions;
        };
        showdown2.removeExtension = function(name2) {
          "use strict";
          delete extensions[name2];
        };
        showdown2.resetExtensions = function() {
          "use strict";
          extensions = {};
        };
        function validate(extension, name2) {
          "use strict";
          var errMsg = name2 ? "Error in " + name2 + " extension->" : "Error in unnamed extension", ret = {
            valid: true,
            error: ""
          };
          if (!showdown2.helper.isArray(extension)) {
            extension = [extension];
          }
          for (var i2 = 0; i2 < extension.length; ++i2) {
            var baseMsg = errMsg + " sub-extension " + i2 + ": ", ext = extension[i2];
            if (typeof ext !== "object") {
              ret.valid = false;
              ret.error = baseMsg + "must be an object, but " + typeof ext + " given";
              return ret;
            }
            if (!showdown2.helper.isString(ext.type)) {
              ret.valid = false;
              ret.error = baseMsg + 'property "type" must be a string, but ' + typeof ext.type + " given";
              return ret;
            }
            var type = ext.type = ext.type.toLowerCase();
            if (type === "language") {
              type = ext.type = "lang";
            }
            if (type === "html") {
              type = ext.type = "output";
            }
            if (type !== "lang" && type !== "output" && type !== "listener") {
              ret.valid = false;
              ret.error = baseMsg + "type " + type + ' is not recognized. Valid values: "lang/language", "output/html" or "listener"';
              return ret;
            }
            if (type === "listener") {
              if (showdown2.helper.isUndefined(ext.listeners)) {
                ret.valid = false;
                ret.error = baseMsg + '. Extensions of type "listener" must have a property called "listeners"';
                return ret;
              }
            } else {
              if (showdown2.helper.isUndefined(ext.filter) && showdown2.helper.isUndefined(ext.regex)) {
                ret.valid = false;
                ret.error = baseMsg + type + ' extensions must define either a "regex" property or a "filter" method';
                return ret;
              }
            }
            if (ext.listeners) {
              if (typeof ext.listeners !== "object") {
                ret.valid = false;
                ret.error = baseMsg + '"listeners" property must be an object but ' + typeof ext.listeners + " given";
                return ret;
              }
              for (var ln in ext.listeners) {
                if (ext.listeners.hasOwnProperty(ln)) {
                  if (typeof ext.listeners[ln] !== "function") {
                    ret.valid = false;
                    ret.error = baseMsg + '"listeners" property must be an hash of [event name]: [callback]. listeners.' + ln + " must be a function but " + typeof ext.listeners[ln] + " given";
                    return ret;
                  }
                }
              }
            }
            if (ext.filter) {
              if (typeof ext.filter !== "function") {
                ret.valid = false;
                ret.error = baseMsg + '"filter" must be a function, but ' + typeof ext.filter + " given";
                return ret;
              }
            } else if (ext.regex) {
              if (showdown2.helper.isString(ext.regex)) {
                ext.regex = new RegExp(ext.regex, "g");
              }
              if (!(ext.regex instanceof RegExp)) {
                ret.valid = false;
                ret.error = baseMsg + '"regex" property must either be a string or a RegExp object, but ' + typeof ext.regex + " given";
                return ret;
              }
              if (showdown2.helper.isUndefined(ext.replace)) {
                ret.valid = false;
                ret.error = baseMsg + '"regex" extensions must implement a replace string or function';
                return ret;
              }
            }
          }
          return ret;
        }
        showdown2.validateExtension = function(ext) {
          "use strict";
          var validateExtension = validate(ext, null);
          if (!validateExtension.valid) {
            console.warn(validateExtension.error);
            return false;
          }
          return true;
        };
        if (!showdown2.hasOwnProperty("helper")) {
          showdown2.helper = {};
        }
        showdown2.helper.isString = function(a2) {
          "use strict";
          return typeof a2 === "string" || a2 instanceof String;
        };
        showdown2.helper.isFunction = function(a2) {
          "use strict";
          var getType = {};
          return a2 && getType.toString.call(a2) === "[object Function]";
        };
        showdown2.helper.isArray = function(a2) {
          "use strict";
          return Array.isArray(a2);
        };
        showdown2.helper.isUndefined = function(value) {
          "use strict";
          return typeof value === "undefined";
        };
        showdown2.helper.forEach = function(obj, callback) {
          "use strict";
          if (showdown2.helper.isUndefined(obj)) {
            throw new Error("obj param is required");
          }
          if (showdown2.helper.isUndefined(callback)) {
            throw new Error("callback param is required");
          }
          if (!showdown2.helper.isFunction(callback)) {
            throw new Error("callback param must be a function/closure");
          }
          if (typeof obj.forEach === "function") {
            obj.forEach(callback);
          } else if (showdown2.helper.isArray(obj)) {
            for (var i2 = 0; i2 < obj.length; i2++) {
              callback(obj[i2], i2, obj);
            }
          } else if (typeof obj === "object") {
            for (var prop in obj) {
              if (obj.hasOwnProperty(prop)) {
                callback(obj[prop], prop, obj);
              }
            }
          } else {
            throw new Error("obj does not seem to be an array or an iterable object");
          }
        };
        showdown2.helper.stdExtName = function(s2) {
          "use strict";
          return s2.replace(/[_?*+\/\\.^-]/g, "").replace(/\s/g, "").toLowerCase();
        };
        function escapeCharactersCallback(wholeMatch, m1) {
          "use strict";
          var charCodeToEscape = m1.charCodeAt(0);
          return "\xA8E" + charCodeToEscape + "E";
        }
        showdown2.helper.escapeCharactersCallback = escapeCharactersCallback;
        showdown2.helper.escapeCharacters = function(text, charsToEscape, afterBackslash) {
          "use strict";
          var regexString = "([" + charsToEscape.replace(/([\[\]\\])/g, "\\$1") + "])";
          if (afterBackslash) {
            regexString = "\\\\" + regexString;
          }
          var regex = new RegExp(regexString, "g");
          text = text.replace(regex, escapeCharactersCallback);
          return text;
        };
        showdown2.helper.unescapeHTMLEntities = function(txt2) {
          "use strict";
          return txt2.replace(/&quot;/g, '"').replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&");
        };
        var rgxFindMatchPos = function(str, left, right, flags) {
          "use strict";
          var f3 = flags || "", g2 = f3.indexOf("g") > -1, x2 = new RegExp(left + "|" + right, "g" + f3.replace(/g/g, "")), l2 = new RegExp(left, f3.replace(/g/g, "")), pos = [], t3, s2, m2, start, end;
          do {
            t3 = 0;
            while (m2 = x2.exec(str)) {
              if (l2.test(m2[0])) {
                if (!t3++) {
                  s2 = x2.lastIndex;
                  start = s2 - m2[0].length;
                }
              } else if (t3) {
                if (!--t3) {
                  end = m2.index + m2[0].length;
                  var obj = {
                    left: { start, end: s2 },
                    match: { start: s2, end: m2.index },
                    right: { start: m2.index, end },
                    wholeMatch: { start, end }
                  };
                  pos.push(obj);
                  if (!g2) {
                    return pos;
                  }
                }
              }
            }
          } while (t3 && (x2.lastIndex = s2));
          return pos;
        };
        showdown2.helper.matchRecursiveRegExp = function(str, left, right, flags) {
          "use strict";
          var matchPos = rgxFindMatchPos(str, left, right, flags), results = [];
          for (var i2 = 0; i2 < matchPos.length; ++i2) {
            results.push([
              str.slice(matchPos[i2].wholeMatch.start, matchPos[i2].wholeMatch.end),
              str.slice(matchPos[i2].match.start, matchPos[i2].match.end),
              str.slice(matchPos[i2].left.start, matchPos[i2].left.end),
              str.slice(matchPos[i2].right.start, matchPos[i2].right.end)
            ]);
          }
          return results;
        };
        showdown2.helper.replaceRecursiveRegExp = function(str, replacement, left, right, flags) {
          "use strict";
          if (!showdown2.helper.isFunction(replacement)) {
            var repStr = replacement;
            replacement = function() {
              return repStr;
            };
          }
          var matchPos = rgxFindMatchPos(str, left, right, flags), finalStr = str, lng = matchPos.length;
          if (lng > 0) {
            var bits = [];
            if (matchPos[0].wholeMatch.start !== 0) {
              bits.push(str.slice(0, matchPos[0].wholeMatch.start));
            }
            for (var i2 = 0; i2 < lng; ++i2) {
              bits.push(replacement(str.slice(matchPos[i2].wholeMatch.start, matchPos[i2].wholeMatch.end), str.slice(matchPos[i2].match.start, matchPos[i2].match.end), str.slice(matchPos[i2].left.start, matchPos[i2].left.end), str.slice(matchPos[i2].right.start, matchPos[i2].right.end)));
              if (i2 < lng - 1) {
                bits.push(str.slice(matchPos[i2].wholeMatch.end, matchPos[i2 + 1].wholeMatch.start));
              }
            }
            if (matchPos[lng - 1].wholeMatch.end < str.length) {
              bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));
            }
            finalStr = bits.join("");
          }
          return finalStr;
        };
        showdown2.helper.regexIndexOf = function(str, regex, fromIndex) {
          "use strict";
          if (!showdown2.helper.isString(str)) {
            throw "InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";
          }
          if (regex instanceof RegExp === false) {
            throw "InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";
          }
          var indexOf = str.substring(fromIndex || 0).search(regex);
          return indexOf >= 0 ? indexOf + (fromIndex || 0) : indexOf;
        };
        showdown2.helper.splitAtIndex = function(str, index) {
          "use strict";
          if (!showdown2.helper.isString(str)) {
            throw "InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";
          }
          return [str.substring(0, index), str.substring(index)];
        };
        showdown2.helper.encodeEmailAddress = function(mail) {
          "use strict";
          var encode = [
            function(ch) {
              return "&#" + ch.charCodeAt(0) + ";";
            },
            function(ch) {
              return "&#x" + ch.charCodeAt(0).toString(16) + ";";
            },
            function(ch) {
              return ch;
            }
          ];
          mail = mail.replace(/./g, function(ch) {
            if (ch === "@") {
              ch = encode[Math.floor(Math.random() * 2)](ch);
            } else {
              var r2 = Math.random();
              ch = r2 > 0.9 ? encode[2](ch) : r2 > 0.45 ? encode[1](ch) : encode[0](ch);
            }
            return ch;
          });
          return mail;
        };
        showdown2.helper.padEnd = function padEnd(str, targetLength, padString) {
          "use strict";
          targetLength = targetLength >> 0;
          padString = String(padString || " ");
          if (str.length > targetLength) {
            return String(str);
          } else {
            targetLength = targetLength - str.length;
            if (targetLength > padString.length) {
              padString += padString.repeat(targetLength / padString.length);
            }
            return String(str) + padString.slice(0, targetLength);
          }
        };
        if (typeof console === "undefined") {
          console = {
            warn: function(msg) {
              "use strict";
              alert(msg);
            },
            log: function(msg) {
              "use strict";
              alert(msg);
            },
            error: function(msg) {
              "use strict";
              throw msg;
            }
          };
        }
        showdown2.helper.regexes = {
          asteriskDashAndColon: /([*_:~])/g
        };
        showdown2.helper.emojis = {
          "+1": "\u{1F44D}",
          "-1": "\u{1F44E}",
          "100": "\u{1F4AF}",
          "1234": "\u{1F522}",
          "1st_place_medal": "\u{1F947}",
          "2nd_place_medal": "\u{1F948}",
          "3rd_place_medal": "\u{1F949}",
          "8ball": "\u{1F3B1}",
          "a": "\u{1F170}\uFE0F",
          "ab": "\u{1F18E}",
          "abc": "\u{1F524}",
          "abcd": "\u{1F521}",
          "accept": "\u{1F251}",
          "aerial_tramway": "\u{1F6A1}",
          "airplane": "\u2708\uFE0F",
          "alarm_clock": "\u23F0",
          "alembic": "\u2697\uFE0F",
          "alien": "\u{1F47D}",
          "ambulance": "\u{1F691}",
          "amphora": "\u{1F3FA}",
          "anchor": "\u2693\uFE0F",
          "angel": "\u{1F47C}",
          "anger": "\u{1F4A2}",
          "angry": "\u{1F620}",
          "anguished": "\u{1F627}",
          "ant": "\u{1F41C}",
          "apple": "\u{1F34E}",
          "aquarius": "\u2652\uFE0F",
          "aries": "\u2648\uFE0F",
          "arrow_backward": "\u25C0\uFE0F",
          "arrow_double_down": "\u23EC",
          "arrow_double_up": "\u23EB",
          "arrow_down": "\u2B07\uFE0F",
          "arrow_down_small": "\u{1F53D}",
          "arrow_forward": "\u25B6\uFE0F",
          "arrow_heading_down": "\u2935\uFE0F",
          "arrow_heading_up": "\u2934\uFE0F",
          "arrow_left": "\u2B05\uFE0F",
          "arrow_lower_left": "\u2199\uFE0F",
          "arrow_lower_right": "\u2198\uFE0F",
          "arrow_right": "\u27A1\uFE0F",
          "arrow_right_hook": "\u21AA\uFE0F",
          "arrow_up": "\u2B06\uFE0F",
          "arrow_up_down": "\u2195\uFE0F",
          "arrow_up_small": "\u{1F53C}",
          "arrow_upper_left": "\u2196\uFE0F",
          "arrow_upper_right": "\u2197\uFE0F",
          "arrows_clockwise": "\u{1F503}",
          "arrows_counterclockwise": "\u{1F504}",
          "art": "\u{1F3A8}",
          "articulated_lorry": "\u{1F69B}",
          "artificial_satellite": "\u{1F6F0}",
          "astonished": "\u{1F632}",
          "athletic_shoe": "\u{1F45F}",
          "atm": "\u{1F3E7}",
          "atom_symbol": "\u269B\uFE0F",
          "avocado": "\u{1F951}",
          "b": "\u{1F171}\uFE0F",
          "baby": "\u{1F476}",
          "baby_bottle": "\u{1F37C}",
          "baby_chick": "\u{1F424}",
          "baby_symbol": "\u{1F6BC}",
          "back": "\u{1F519}",
          "bacon": "\u{1F953}",
          "badminton": "\u{1F3F8}",
          "baggage_claim": "\u{1F6C4}",
          "baguette_bread": "\u{1F956}",
          "balance_scale": "\u2696\uFE0F",
          "balloon": "\u{1F388}",
          "ballot_box": "\u{1F5F3}",
          "ballot_box_with_check": "\u2611\uFE0F",
          "bamboo": "\u{1F38D}",
          "banana": "\u{1F34C}",
          "bangbang": "\u203C\uFE0F",
          "bank": "\u{1F3E6}",
          "bar_chart": "\u{1F4CA}",
          "barber": "\u{1F488}",
          "baseball": "\u26BE\uFE0F",
          "basketball": "\u{1F3C0}",
          "basketball_man": "\u26F9\uFE0F",
          "basketball_woman": "\u26F9\uFE0F&zwj;\u2640\uFE0F",
          "bat": "\u{1F987}",
          "bath": "\u{1F6C0}",
          "bathtub": "\u{1F6C1}",
          "battery": "\u{1F50B}",
          "beach_umbrella": "\u{1F3D6}",
          "bear": "\u{1F43B}",
          "bed": "\u{1F6CF}",
          "bee": "\u{1F41D}",
          "beer": "\u{1F37A}",
          "beers": "\u{1F37B}",
          "beetle": "\u{1F41E}",
          "beginner": "\u{1F530}",
          "bell": "\u{1F514}",
          "bellhop_bell": "\u{1F6CE}",
          "bento": "\u{1F371}",
          "biking_man": "\u{1F6B4}",
          "bike": "\u{1F6B2}",
          "biking_woman": "\u{1F6B4}&zwj;\u2640\uFE0F",
          "bikini": "\u{1F459}",
          "biohazard": "\u2623\uFE0F",
          "bird": "\u{1F426}",
          "birthday": "\u{1F382}",
          "black_circle": "\u26AB\uFE0F",
          "black_flag": "\u{1F3F4}",
          "black_heart": "\u{1F5A4}",
          "black_joker": "\u{1F0CF}",
          "black_large_square": "\u2B1B\uFE0F",
          "black_medium_small_square": "\u25FE\uFE0F",
          "black_medium_square": "\u25FC\uFE0F",
          "black_nib": "\u2712\uFE0F",
          "black_small_square": "\u25AA\uFE0F",
          "black_square_button": "\u{1F532}",
          "blonde_man": "\u{1F471}",
          "blonde_woman": "\u{1F471}&zwj;\u2640\uFE0F",
          "blossom": "\u{1F33C}",
          "blowfish": "\u{1F421}",
          "blue_book": "\u{1F4D8}",
          "blue_car": "\u{1F699}",
          "blue_heart": "\u{1F499}",
          "blush": "\u{1F60A}",
          "boar": "\u{1F417}",
          "boat": "\u26F5\uFE0F",
          "bomb": "\u{1F4A3}",
          "book": "\u{1F4D6}",
          "bookmark": "\u{1F516}",
          "bookmark_tabs": "\u{1F4D1}",
          "books": "\u{1F4DA}",
          "boom": "\u{1F4A5}",
          "boot": "\u{1F462}",
          "bouquet": "\u{1F490}",
          "bowing_man": "\u{1F647}",
          "bow_and_arrow": "\u{1F3F9}",
          "bowing_woman": "\u{1F647}&zwj;\u2640\uFE0F",
          "bowling": "\u{1F3B3}",
          "boxing_glove": "\u{1F94A}",
          "boy": "\u{1F466}",
          "bread": "\u{1F35E}",
          "bride_with_veil": "\u{1F470}",
          "bridge_at_night": "\u{1F309}",
          "briefcase": "\u{1F4BC}",
          "broken_heart": "\u{1F494}",
          "bug": "\u{1F41B}",
          "building_construction": "\u{1F3D7}",
          "bulb": "\u{1F4A1}",
          "bullettrain_front": "\u{1F685}",
          "bullettrain_side": "\u{1F684}",
          "burrito": "\u{1F32F}",
          "bus": "\u{1F68C}",
          "business_suit_levitating": "\u{1F574}",
          "busstop": "\u{1F68F}",
          "bust_in_silhouette": "\u{1F464}",
          "busts_in_silhouette": "\u{1F465}",
          "butterfly": "\u{1F98B}",
          "cactus": "\u{1F335}",
          "cake": "\u{1F370}",
          "calendar": "\u{1F4C6}",
          "call_me_hand": "\u{1F919}",
          "calling": "\u{1F4F2}",
          "camel": "\u{1F42B}",
          "camera": "\u{1F4F7}",
          "camera_flash": "\u{1F4F8}",
          "camping": "\u{1F3D5}",
          "cancer": "\u264B\uFE0F",
          "candle": "\u{1F56F}",
          "candy": "\u{1F36C}",
          "canoe": "\u{1F6F6}",
          "capital_abcd": "\u{1F520}",
          "capricorn": "\u2651\uFE0F",
          "car": "\u{1F697}",
          "card_file_box": "\u{1F5C3}",
          "card_index": "\u{1F4C7}",
          "card_index_dividers": "\u{1F5C2}",
          "carousel_horse": "\u{1F3A0}",
          "carrot": "\u{1F955}",
          "cat": "\u{1F431}",
          "cat2": "\u{1F408}",
          "cd": "\u{1F4BF}",
          "chains": "\u26D3",
          "champagne": "\u{1F37E}",
          "chart": "\u{1F4B9}",
          "chart_with_downwards_trend": "\u{1F4C9}",
          "chart_with_upwards_trend": "\u{1F4C8}",
          "checkered_flag": "\u{1F3C1}",
          "cheese": "\u{1F9C0}",
          "cherries": "\u{1F352}",
          "cherry_blossom": "\u{1F338}",
          "chestnut": "\u{1F330}",
          "chicken": "\u{1F414}",
          "children_crossing": "\u{1F6B8}",
          "chipmunk": "\u{1F43F}",
          "chocolate_bar": "\u{1F36B}",
          "christmas_tree": "\u{1F384}",
          "church": "\u26EA\uFE0F",
          "cinema": "\u{1F3A6}",
          "circus_tent": "\u{1F3AA}",
          "city_sunrise": "\u{1F307}",
          "city_sunset": "\u{1F306}",
          "cityscape": "\u{1F3D9}",
          "cl": "\u{1F191}",
          "clamp": "\u{1F5DC}",
          "clap": "\u{1F44F}",
          "clapper": "\u{1F3AC}",
          "classical_building": "\u{1F3DB}",
          "clinking_glasses": "\u{1F942}",
          "clipboard": "\u{1F4CB}",
          "clock1": "\u{1F550}",
          "clock10": "\u{1F559}",
          "clock1030": "\u{1F565}",
          "clock11": "\u{1F55A}",
          "clock1130": "\u{1F566}",
          "clock12": "\u{1F55B}",
          "clock1230": "\u{1F567}",
          "clock130": "\u{1F55C}",
          "clock2": "\u{1F551}",
          "clock230": "\u{1F55D}",
          "clock3": "\u{1F552}",
          "clock330": "\u{1F55E}",
          "clock4": "\u{1F553}",
          "clock430": "\u{1F55F}",
          "clock5": "\u{1F554}",
          "clock530": "\u{1F560}",
          "clock6": "\u{1F555}",
          "clock630": "\u{1F561}",
          "clock7": "\u{1F556}",
          "clock730": "\u{1F562}",
          "clock8": "\u{1F557}",
          "clock830": "\u{1F563}",
          "clock9": "\u{1F558}",
          "clock930": "\u{1F564}",
          "closed_book": "\u{1F4D5}",
          "closed_lock_with_key": "\u{1F510}",
          "closed_umbrella": "\u{1F302}",
          "cloud": "\u2601\uFE0F",
          "cloud_with_lightning": "\u{1F329}",
          "cloud_with_lightning_and_rain": "\u26C8",
          "cloud_with_rain": "\u{1F327}",
          "cloud_with_snow": "\u{1F328}",
          "clown_face": "\u{1F921}",
          "clubs": "\u2663\uFE0F",
          "cocktail": "\u{1F378}",
          "coffee": "\u2615\uFE0F",
          "coffin": "\u26B0\uFE0F",
          "cold_sweat": "\u{1F630}",
          "comet": "\u2604\uFE0F",
          "computer": "\u{1F4BB}",
          "computer_mouse": "\u{1F5B1}",
          "confetti_ball": "\u{1F38A}",
          "confounded": "\u{1F616}",
          "confused": "\u{1F615}",
          "congratulations": "\u3297\uFE0F",
          "construction": "\u{1F6A7}",
          "construction_worker_man": "\u{1F477}",
          "construction_worker_woman": "\u{1F477}&zwj;\u2640\uFE0F",
          "control_knobs": "\u{1F39B}",
          "convenience_store": "\u{1F3EA}",
          "cookie": "\u{1F36A}",
          "cool": "\u{1F192}",
          "policeman": "\u{1F46E}",
          "copyright": "\xA9\uFE0F",
          "corn": "\u{1F33D}",
          "couch_and_lamp": "\u{1F6CB}",
          "couple": "\u{1F46B}",
          "couple_with_heart_woman_man": "\u{1F491}",
          "couple_with_heart_man_man": "\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",
          "couple_with_heart_woman_woman": "\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",
          "couplekiss_man_man": "\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",
          "couplekiss_man_woman": "\u{1F48F}",
          "couplekiss_woman_woman": "\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",
          "cow": "\u{1F42E}",
          "cow2": "\u{1F404}",
          "cowboy_hat_face": "\u{1F920}",
          "crab": "\u{1F980}",
          "crayon": "\u{1F58D}",
          "credit_card": "\u{1F4B3}",
          "crescent_moon": "\u{1F319}",
          "cricket": "\u{1F3CF}",
          "crocodile": "\u{1F40A}",
          "croissant": "\u{1F950}",
          "crossed_fingers": "\u{1F91E}",
          "crossed_flags": "\u{1F38C}",
          "crossed_swords": "\u2694\uFE0F",
          "crown": "\u{1F451}",
          "cry": "\u{1F622}",
          "crying_cat_face": "\u{1F63F}",
          "crystal_ball": "\u{1F52E}",
          "cucumber": "\u{1F952}",
          "cupid": "\u{1F498}",
          "curly_loop": "\u27B0",
          "currency_exchange": "\u{1F4B1}",
          "curry": "\u{1F35B}",
          "custard": "\u{1F36E}",
          "customs": "\u{1F6C3}",
          "cyclone": "\u{1F300}",
          "dagger": "\u{1F5E1}",
          "dancer": "\u{1F483}",
          "dancing_women": "\u{1F46F}",
          "dancing_men": "\u{1F46F}&zwj;\u2642\uFE0F",
          "dango": "\u{1F361}",
          "dark_sunglasses": "\u{1F576}",
          "dart": "\u{1F3AF}",
          "dash": "\u{1F4A8}",
          "date": "\u{1F4C5}",
          "deciduous_tree": "\u{1F333}",
          "deer": "\u{1F98C}",
          "department_store": "\u{1F3EC}",
          "derelict_house": "\u{1F3DA}",
          "desert": "\u{1F3DC}",
          "desert_island": "\u{1F3DD}",
          "desktop_computer": "\u{1F5A5}",
          "male_detective": "\u{1F575}\uFE0F",
          "diamond_shape_with_a_dot_inside": "\u{1F4A0}",
          "diamonds": "\u2666\uFE0F",
          "disappointed": "\u{1F61E}",
          "disappointed_relieved": "\u{1F625}",
          "dizzy": "\u{1F4AB}",
          "dizzy_face": "\u{1F635}",
          "do_not_litter": "\u{1F6AF}",
          "dog": "\u{1F436}",
          "dog2": "\u{1F415}",
          "dollar": "\u{1F4B5}",
          "dolls": "\u{1F38E}",
          "dolphin": "\u{1F42C}",
          "door": "\u{1F6AA}",
          "doughnut": "\u{1F369}",
          "dove": "\u{1F54A}",
          "dragon": "\u{1F409}",
          "dragon_face": "\u{1F432}",
          "dress": "\u{1F457}",
          "dromedary_camel": "\u{1F42A}",
          "drooling_face": "\u{1F924}",
          "droplet": "\u{1F4A7}",
          "drum": "\u{1F941}",
          "duck": "\u{1F986}",
          "dvd": "\u{1F4C0}",
          "e-mail": "\u{1F4E7}",
          "eagle": "\u{1F985}",
          "ear": "\u{1F442}",
          "ear_of_rice": "\u{1F33E}",
          "earth_africa": "\u{1F30D}",
          "earth_americas": "\u{1F30E}",
          "earth_asia": "\u{1F30F}",
          "egg": "\u{1F95A}",
          "eggplant": "\u{1F346}",
          "eight_pointed_black_star": "\u2734\uFE0F",
          "eight_spoked_asterisk": "\u2733\uFE0F",
          "electric_plug": "\u{1F50C}",
          "elephant": "\u{1F418}",
          "email": "\u2709\uFE0F",
          "end": "\u{1F51A}",
          "envelope_with_arrow": "\u{1F4E9}",
          "euro": "\u{1F4B6}",
          "european_castle": "\u{1F3F0}",
          "european_post_office": "\u{1F3E4}",
          "evergreen_tree": "\u{1F332}",
          "exclamation": "\u2757\uFE0F",
          "expressionless": "\u{1F611}",
          "eye": "\u{1F441}",
          "eye_speech_bubble": "\u{1F441}&zwj;\u{1F5E8}",
          "eyeglasses": "\u{1F453}",
          "eyes": "\u{1F440}",
          "face_with_head_bandage": "\u{1F915}",
          "face_with_thermometer": "\u{1F912}",
          "fist_oncoming": "\u{1F44A}",
          "factory": "\u{1F3ED}",
          "fallen_leaf": "\u{1F342}",
          "family_man_woman_boy": "\u{1F46A}",
          "family_man_boy": "\u{1F468}&zwj;\u{1F466}",
          "family_man_boy_boy": "\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",
          "family_man_girl": "\u{1F468}&zwj;\u{1F467}",
          "family_man_girl_boy": "\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",
          "family_man_girl_girl": "\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",
          "family_man_man_boy": "\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",
          "family_man_man_boy_boy": "\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",
          "family_man_man_girl": "\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",
          "family_man_man_girl_boy": "\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",
          "family_man_man_girl_girl": "\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",
          "family_man_woman_boy_boy": "\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",
          "family_man_woman_girl": "\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",
          "family_man_woman_girl_boy": "\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",
          "family_man_woman_girl_girl": "\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",
          "family_woman_boy": "\u{1F469}&zwj;\u{1F466}",
          "family_woman_boy_boy": "\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",
          "family_woman_girl": "\u{1F469}&zwj;\u{1F467}",
          "family_woman_girl_boy": "\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",
          "family_woman_girl_girl": "\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",
          "family_woman_woman_boy": "\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",
          "family_woman_woman_boy_boy": "\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",
          "family_woman_woman_girl": "\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",
          "family_woman_woman_girl_boy": "\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",
          "family_woman_woman_girl_girl": "\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",
          "fast_forward": "\u23E9",
          "fax": "\u{1F4E0}",
          "fearful": "\u{1F628}",
          "feet": "\u{1F43E}",
          "female_detective": "\u{1F575}\uFE0F&zwj;\u2640\uFE0F",
          "ferris_wheel": "\u{1F3A1}",
          "ferry": "\u26F4",
          "field_hockey": "\u{1F3D1}",
          "file_cabinet": "\u{1F5C4}",
          "file_folder": "\u{1F4C1}",
          "film_projector": "\u{1F4FD}",
          "film_strip": "\u{1F39E}",
          "fire": "\u{1F525}",
          "fire_engine": "\u{1F692}",
          "fireworks": "\u{1F386}",
          "first_quarter_moon": "\u{1F313}",
          "first_quarter_moon_with_face": "\u{1F31B}",
          "fish": "\u{1F41F}",
          "fish_cake": "\u{1F365}",
          "fishing_pole_and_fish": "\u{1F3A3}",
          "fist_raised": "\u270A",
          "fist_left": "\u{1F91B}",
          "fist_right": "\u{1F91C}",
          "flags": "\u{1F38F}",
          "flashlight": "\u{1F526}",
          "fleur_de_lis": "\u269C\uFE0F",
          "flight_arrival": "\u{1F6EC}",
          "flight_departure": "\u{1F6EB}",
          "floppy_disk": "\u{1F4BE}",
          "flower_playing_cards": "\u{1F3B4}",
          "flushed": "\u{1F633}",
          "fog": "\u{1F32B}",
          "foggy": "\u{1F301}",
          "football": "\u{1F3C8}",
          "footprints": "\u{1F463}",
          "fork_and_knife": "\u{1F374}",
          "fountain": "\u26F2\uFE0F",
          "fountain_pen": "\u{1F58B}",
          "four_leaf_clover": "\u{1F340}",
          "fox_face": "\u{1F98A}",
          "framed_picture": "\u{1F5BC}",
          "free": "\u{1F193}",
          "fried_egg": "\u{1F373}",
          "fried_shrimp": "\u{1F364}",
          "fries": "\u{1F35F}",
          "frog": "\u{1F438}",
          "frowning": "\u{1F626}",
          "frowning_face": "\u2639\uFE0F",
          "frowning_man": "\u{1F64D}&zwj;\u2642\uFE0F",
          "frowning_woman": "\u{1F64D}",
          "middle_finger": "\u{1F595}",
          "fuelpump": "\u26FD\uFE0F",
          "full_moon": "\u{1F315}",
          "full_moon_with_face": "\u{1F31D}",
          "funeral_urn": "\u26B1\uFE0F",
          "game_die": "\u{1F3B2}",
          "gear": "\u2699\uFE0F",
          "gem": "\u{1F48E}",
          "gemini": "\u264A\uFE0F",
          "ghost": "\u{1F47B}",
          "gift": "\u{1F381}",
          "gift_heart": "\u{1F49D}",
          "girl": "\u{1F467}",
          "globe_with_meridians": "\u{1F310}",
          "goal_net": "\u{1F945}",
          "goat": "\u{1F410}",
          "golf": "\u26F3\uFE0F",
          "golfing_man": "\u{1F3CC}\uFE0F",
          "golfing_woman": "\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",
          "gorilla": "\u{1F98D}",
          "grapes": "\u{1F347}",
          "green_apple": "\u{1F34F}",
          "green_book": "\u{1F4D7}",
          "green_heart": "\u{1F49A}",
          "green_salad": "\u{1F957}",
          "grey_exclamation": "\u2755",
          "grey_question": "\u2754",
          "grimacing": "\u{1F62C}",
          "grin": "\u{1F601}",
          "grinning": "\u{1F600}",
          "guardsman": "\u{1F482}",
          "guardswoman": "\u{1F482}&zwj;\u2640\uFE0F",
          "guitar": "\u{1F3B8}",
          "gun": "\u{1F52B}",
          "haircut_woman": "\u{1F487}",
          "haircut_man": "\u{1F487}&zwj;\u2642\uFE0F",
          "hamburger": "\u{1F354}",
          "hammer": "\u{1F528}",
          "hammer_and_pick": "\u2692",
          "hammer_and_wrench": "\u{1F6E0}",
          "hamster": "\u{1F439}",
          "hand": "\u270B",
          "handbag": "\u{1F45C}",
          "handshake": "\u{1F91D}",
          "hankey": "\u{1F4A9}",
          "hatched_chick": "\u{1F425}",
          "hatching_chick": "\u{1F423}",
          "headphones": "\u{1F3A7}",
          "hear_no_evil": "\u{1F649}",
          "heart": "\u2764\uFE0F",
          "heart_decoration": "\u{1F49F}",
          "heart_eyes": "\u{1F60D}",
          "heart_eyes_cat": "\u{1F63B}",
          "heartbeat": "\u{1F493}",
          "heartpulse": "\u{1F497}",
          "hearts": "\u2665\uFE0F",
          "heavy_check_mark": "\u2714\uFE0F",
          "heavy_division_sign": "\u2797",
          "heavy_dollar_sign": "\u{1F4B2}",
          "heavy_heart_exclamation": "\u2763\uFE0F",
          "heavy_minus_sign": "\u2796",
          "heavy_multiplication_x": "\u2716\uFE0F",
          "heavy_plus_sign": "\u2795",
          "helicopter": "\u{1F681}",
          "herb": "\u{1F33F}",
          "hibiscus": "\u{1F33A}",
          "high_brightness": "\u{1F506}",
          "high_heel": "\u{1F460}",
          "hocho": "\u{1F52A}",
          "hole": "\u{1F573}",
          "honey_pot": "\u{1F36F}",
          "horse": "\u{1F434}",
          "horse_racing": "\u{1F3C7}",
          "hospital": "\u{1F3E5}",
          "hot_pepper": "\u{1F336}",
          "hotdog": "\u{1F32D}",
          "hotel": "\u{1F3E8}",
          "hotsprings": "\u2668\uFE0F",
          "hourglass": "\u231B\uFE0F",
          "hourglass_flowing_sand": "\u23F3",
          "house": "\u{1F3E0}",
          "house_with_garden": "\u{1F3E1}",
          "houses": "\u{1F3D8}",
          "hugs": "\u{1F917}",
          "hushed": "\u{1F62F}",
          "ice_cream": "\u{1F368}",
          "ice_hockey": "\u{1F3D2}",
          "ice_skate": "\u26F8",
          "icecream": "\u{1F366}",
          "id": "\u{1F194}",
          "ideograph_advantage": "\u{1F250}",
          "imp": "\u{1F47F}",
          "inbox_tray": "\u{1F4E5}",
          "incoming_envelope": "\u{1F4E8}",
          "tipping_hand_woman": "\u{1F481}",
          "information_source": "\u2139\uFE0F",
          "innocent": "\u{1F607}",
          "interrobang": "\u2049\uFE0F",
          "iphone": "\u{1F4F1}",
          "izakaya_lantern": "\u{1F3EE}",
          "jack_o_lantern": "\u{1F383}",
          "japan": "\u{1F5FE}",
          "japanese_castle": "\u{1F3EF}",
          "japanese_goblin": "\u{1F47A}",
          "japanese_ogre": "\u{1F479}",
          "jeans": "\u{1F456}",
          "joy": "\u{1F602}",
          "joy_cat": "\u{1F639}",
          "joystick": "\u{1F579}",
          "kaaba": "\u{1F54B}",
          "key": "\u{1F511}",
          "keyboard": "\u2328\uFE0F",
          "keycap_ten": "\u{1F51F}",
          "kick_scooter": "\u{1F6F4}",
          "kimono": "\u{1F458}",
          "kiss": "\u{1F48B}",
          "kissing": "\u{1F617}",
          "kissing_cat": "\u{1F63D}",
          "kissing_closed_eyes": "\u{1F61A}",
          "kissing_heart": "\u{1F618}",
          "kissing_smiling_eyes": "\u{1F619}",
          "kiwi_fruit": "\u{1F95D}",
          "koala": "\u{1F428}",
          "koko": "\u{1F201}",
          "label": "\u{1F3F7}",
          "large_blue_circle": "\u{1F535}",
          "large_blue_diamond": "\u{1F537}",
          "large_orange_diamond": "\u{1F536}",
          "last_quarter_moon": "\u{1F317}",
          "last_quarter_moon_with_face": "\u{1F31C}",
          "latin_cross": "\u271D\uFE0F",
          "laughing": "\u{1F606}",
          "leaves": "\u{1F343}",
          "ledger": "\u{1F4D2}",
          "left_luggage": "\u{1F6C5}",
          "left_right_arrow": "\u2194\uFE0F",
          "leftwards_arrow_with_hook": "\u21A9\uFE0F",
          "lemon": "\u{1F34B}",
          "leo": "\u264C\uFE0F",
          "leopard": "\u{1F406}",
          "level_slider": "\u{1F39A}",
          "libra": "\u264E\uFE0F",
          "light_rail": "\u{1F688}",
          "link": "\u{1F517}",
          "lion": "\u{1F981}",
          "lips": "\u{1F444}",
          "lipstick": "\u{1F484}",
          "lizard": "\u{1F98E}",
          "lock": "\u{1F512}",
          "lock_with_ink_pen": "\u{1F50F}",
          "lollipop": "\u{1F36D}",
          "loop": "\u27BF",
          "loud_sound": "\u{1F50A}",
          "loudspeaker": "\u{1F4E2}",
          "love_hotel": "\u{1F3E9}",
          "love_letter": "\u{1F48C}",
          "low_brightness": "\u{1F505}",
          "lying_face": "\u{1F925}",
          "m": "\u24C2\uFE0F",
          "mag": "\u{1F50D}",
          "mag_right": "\u{1F50E}",
          "mahjong": "\u{1F004}\uFE0F",
          "mailbox": "\u{1F4EB}",
          "mailbox_closed": "\u{1F4EA}",
          "mailbox_with_mail": "\u{1F4EC}",
          "mailbox_with_no_mail": "\u{1F4ED}",
          "man": "\u{1F468}",
          "man_artist": "\u{1F468}&zwj;\u{1F3A8}",
          "man_astronaut": "\u{1F468}&zwj;\u{1F680}",
          "man_cartwheeling": "\u{1F938}&zwj;\u2642\uFE0F",
          "man_cook": "\u{1F468}&zwj;\u{1F373}",
          "man_dancing": "\u{1F57A}",
          "man_facepalming": "\u{1F926}&zwj;\u2642\uFE0F",
          "man_factory_worker": "\u{1F468}&zwj;\u{1F3ED}",
          "man_farmer": "\u{1F468}&zwj;\u{1F33E}",
          "man_firefighter": "\u{1F468}&zwj;\u{1F692}",
          "man_health_worker": "\u{1F468}&zwj;\u2695\uFE0F",
          "man_in_tuxedo": "\u{1F935}",
          "man_judge": "\u{1F468}&zwj;\u2696\uFE0F",
          "man_juggling": "\u{1F939}&zwj;\u2642\uFE0F",
          "man_mechanic": "\u{1F468}&zwj;\u{1F527}",
          "man_office_worker": "\u{1F468}&zwj;\u{1F4BC}",
          "man_pilot": "\u{1F468}&zwj;\u2708\uFE0F",
          "man_playing_handball": "\u{1F93E}&zwj;\u2642\uFE0F",
          "man_playing_water_polo": "\u{1F93D}&zwj;\u2642\uFE0F",
          "man_scientist": "\u{1F468}&zwj;\u{1F52C}",
          "man_shrugging": "\u{1F937}&zwj;\u2642\uFE0F",
          "man_singer": "\u{1F468}&zwj;\u{1F3A4}",
          "man_student": "\u{1F468}&zwj;\u{1F393}",
          "man_teacher": "\u{1F468}&zwj;\u{1F3EB}",
          "man_technologist": "\u{1F468}&zwj;\u{1F4BB}",
          "man_with_gua_pi_mao": "\u{1F472}",
          "man_with_turban": "\u{1F473}",
          "tangerine": "\u{1F34A}",
          "mans_shoe": "\u{1F45E}",
          "mantelpiece_clock": "\u{1F570}",
          "maple_leaf": "\u{1F341}",
          "martial_arts_uniform": "\u{1F94B}",
          "mask": "\u{1F637}",
          "massage_woman": "\u{1F486}",
          "massage_man": "\u{1F486}&zwj;\u2642\uFE0F",
          "meat_on_bone": "\u{1F356}",
          "medal_military": "\u{1F396}",
          "medal_sports": "\u{1F3C5}",
          "mega": "\u{1F4E3}",
          "melon": "\u{1F348}",
          "memo": "\u{1F4DD}",
          "men_wrestling": "\u{1F93C}&zwj;\u2642\uFE0F",
          "menorah": "\u{1F54E}",
          "mens": "\u{1F6B9}",
          "metal": "\u{1F918}",
          "metro": "\u{1F687}",
          "microphone": "\u{1F3A4}",
          "microscope": "\u{1F52C}",
          "milk_glass": "\u{1F95B}",
          "milky_way": "\u{1F30C}",
          "minibus": "\u{1F690}",
          "minidisc": "\u{1F4BD}",
          "mobile_phone_off": "\u{1F4F4}",
          "money_mouth_face": "\u{1F911}",
          "money_with_wings": "\u{1F4B8}",
          "moneybag": "\u{1F4B0}",
          "monkey": "\u{1F412}",
          "monkey_face": "\u{1F435}",
          "monorail": "\u{1F69D}",
          "moon": "\u{1F314}",
          "mortar_board": "\u{1F393}",
          "mosque": "\u{1F54C}",
          "motor_boat": "\u{1F6E5}",
          "motor_scooter": "\u{1F6F5}",
          "motorcycle": "\u{1F3CD}",
          "motorway": "\u{1F6E3}",
          "mount_fuji": "\u{1F5FB}",
          "mountain": "\u26F0",
          "mountain_biking_man": "\u{1F6B5}",
          "mountain_biking_woman": "\u{1F6B5}&zwj;\u2640\uFE0F",
          "mountain_cableway": "\u{1F6A0}",
          "mountain_railway": "\u{1F69E}",
          "mountain_snow": "\u{1F3D4}",
          "mouse": "\u{1F42D}",
          "mouse2": "\u{1F401}",
          "movie_camera": "\u{1F3A5}",
          "moyai": "\u{1F5FF}",
          "mrs_claus": "\u{1F936}",
          "muscle": "\u{1F4AA}",
          "mushroom": "\u{1F344}",
          "musical_keyboard": "\u{1F3B9}",
          "musical_note": "\u{1F3B5}",
          "musical_score": "\u{1F3BC}",
          "mute": "\u{1F507}",
          "nail_care": "\u{1F485}",
          "name_badge": "\u{1F4DB}",
          "national_park": "\u{1F3DE}",
          "nauseated_face": "\u{1F922}",
          "necktie": "\u{1F454}",
          "negative_squared_cross_mark": "\u274E",
          "nerd_face": "\u{1F913}",
          "neutral_face": "\u{1F610}",
          "new": "\u{1F195}",
          "new_moon": "\u{1F311}",
          "new_moon_with_face": "\u{1F31A}",
          "newspaper": "\u{1F4F0}",
          "newspaper_roll": "\u{1F5DE}",
          "next_track_button": "\u23ED",
          "ng": "\u{1F196}",
          "no_good_man": "\u{1F645}&zwj;\u2642\uFE0F",
          "no_good_woman": "\u{1F645}",
          "night_with_stars": "\u{1F303}",
          "no_bell": "\u{1F515}",
          "no_bicycles": "\u{1F6B3}",
          "no_entry": "\u26D4\uFE0F",
          "no_entry_sign": "\u{1F6AB}",
          "no_mobile_phones": "\u{1F4F5}",
          "no_mouth": "\u{1F636}",
          "no_pedestrians": "\u{1F6B7}",
          "no_smoking": "\u{1F6AD}",
          "non-potable_water": "\u{1F6B1}",
          "nose": "\u{1F443}",
          "notebook": "\u{1F4D3}",
          "notebook_with_decorative_cover": "\u{1F4D4}",
          "notes": "\u{1F3B6}",
          "nut_and_bolt": "\u{1F529}",
          "o": "\u2B55\uFE0F",
          "o2": "\u{1F17E}\uFE0F",
          "ocean": "\u{1F30A}",
          "octopus": "\u{1F419}",
          "oden": "\u{1F362}",
          "office": "\u{1F3E2}",
          "oil_drum": "\u{1F6E2}",
          "ok": "\u{1F197}",
          "ok_hand": "\u{1F44C}",
          "ok_man": "\u{1F646}&zwj;\u2642\uFE0F",
          "ok_woman": "\u{1F646}",
          "old_key": "\u{1F5DD}",
          "older_man": "\u{1F474}",
          "older_woman": "\u{1F475}",
          "om": "\u{1F549}",
          "on": "\u{1F51B}",
          "oncoming_automobile": "\u{1F698}",
          "oncoming_bus": "\u{1F68D}",
          "oncoming_police_car": "\u{1F694}",
          "oncoming_taxi": "\u{1F696}",
          "open_file_folder": "\u{1F4C2}",
          "open_hands": "\u{1F450}",
          "open_mouth": "\u{1F62E}",
          "open_umbrella": "\u2602\uFE0F",
          "ophiuchus": "\u26CE",
          "orange_book": "\u{1F4D9}",
          "orthodox_cross": "\u2626\uFE0F",
          "outbox_tray": "\u{1F4E4}",
          "owl": "\u{1F989}",
          "ox": "\u{1F402}",
          "package": "\u{1F4E6}",
          "page_facing_up": "\u{1F4C4}",
          "page_with_curl": "\u{1F4C3}",
          "pager": "\u{1F4DF}",
          "paintbrush": "\u{1F58C}",
          "palm_tree": "\u{1F334}",
          "pancakes": "\u{1F95E}",
          "panda_face": "\u{1F43C}",
          "paperclip": "\u{1F4CE}",
          "paperclips": "\u{1F587}",
          "parasol_on_ground": "\u26F1",
          "parking": "\u{1F17F}\uFE0F",
          "part_alternation_mark": "\u303D\uFE0F",
          "partly_sunny": "\u26C5\uFE0F",
          "passenger_ship": "\u{1F6F3}",
          "passport_control": "\u{1F6C2}",
          "pause_button": "\u23F8",
          "peace_symbol": "\u262E\uFE0F",
          "peach": "\u{1F351}",
          "peanuts": "\u{1F95C}",
          "pear": "\u{1F350}",
          "pen": "\u{1F58A}",
          "pencil2": "\u270F\uFE0F",
          "penguin": "\u{1F427}",
          "pensive": "\u{1F614}",
          "performing_arts": "\u{1F3AD}",
          "persevere": "\u{1F623}",
          "person_fencing": "\u{1F93A}",
          "pouting_woman": "\u{1F64E}",
          "phone": "\u260E\uFE0F",
          "pick": "\u26CF",
          "pig": "\u{1F437}",
          "pig2": "\u{1F416}",
          "pig_nose": "\u{1F43D}",
          "pill": "\u{1F48A}",
          "pineapple": "\u{1F34D}",
          "ping_pong": "\u{1F3D3}",
          "pisces": "\u2653\uFE0F",
          "pizza": "\u{1F355}",
          "place_of_worship": "\u{1F6D0}",
          "plate_with_cutlery": "\u{1F37D}",
          "play_or_pause_button": "\u23EF",
          "point_down": "\u{1F447}",
          "point_left": "\u{1F448}",
          "point_right": "\u{1F449}",
          "point_up": "\u261D\uFE0F",
          "point_up_2": "\u{1F446}",
          "police_car": "\u{1F693}",
          "policewoman": "\u{1F46E}&zwj;\u2640\uFE0F",
          "poodle": "\u{1F429}",
          "popcorn": "\u{1F37F}",
          "post_office": "\u{1F3E3}",
          "postal_horn": "\u{1F4EF}",
          "postbox": "\u{1F4EE}",
          "potable_water": "\u{1F6B0}",
          "potato": "\u{1F954}",
          "pouch": "\u{1F45D}",
          "poultry_leg": "\u{1F357}",
          "pound": "\u{1F4B7}",
          "rage": "\u{1F621}",
          "pouting_cat": "\u{1F63E}",
          "pouting_man": "\u{1F64E}&zwj;\u2642\uFE0F",
          "pray": "\u{1F64F}",
          "prayer_beads": "\u{1F4FF}",
          "pregnant_woman": "\u{1F930}",
          "previous_track_button": "\u23EE",
          "prince": "\u{1F934}",
          "princess": "\u{1F478}",
          "printer": "\u{1F5A8}",
          "purple_heart": "\u{1F49C}",
          "purse": "\u{1F45B}",
          "pushpin": "\u{1F4CC}",
          "put_litter_in_its_place": "\u{1F6AE}",
          "question": "\u2753",
          "rabbit": "\u{1F430}",
          "rabbit2": "\u{1F407}",
          "racehorse": "\u{1F40E}",
          "racing_car": "\u{1F3CE}",
          "radio": "\u{1F4FB}",
          "radio_button": "\u{1F518}",
          "radioactive": "\u2622\uFE0F",
          "railway_car": "\u{1F683}",
          "railway_track": "\u{1F6E4}",
          "rainbow": "\u{1F308}",
          "rainbow_flag": "\u{1F3F3}\uFE0F&zwj;\u{1F308}",
          "raised_back_of_hand": "\u{1F91A}",
          "raised_hand_with_fingers_splayed": "\u{1F590}",
          "raised_hands": "\u{1F64C}",
          "raising_hand_woman": "\u{1F64B}",
          "raising_hand_man": "\u{1F64B}&zwj;\u2642\uFE0F",
          "ram": "\u{1F40F}",
          "ramen": "\u{1F35C}",
          "rat": "\u{1F400}",
          "record_button": "\u23FA",
          "recycle": "\u267B\uFE0F",
          "red_circle": "\u{1F534}",
          "registered": "\xAE\uFE0F",
          "relaxed": "\u263A\uFE0F",
          "relieved": "\u{1F60C}",
          "reminder_ribbon": "\u{1F397}",
          "repeat": "\u{1F501}",
          "repeat_one": "\u{1F502}",
          "rescue_worker_helmet": "\u26D1",
          "restroom": "\u{1F6BB}",
          "revolving_hearts": "\u{1F49E}",
          "rewind": "\u23EA",
          "rhinoceros": "\u{1F98F}",
          "ribbon": "\u{1F380}",
          "rice": "\u{1F35A}",
          "rice_ball": "\u{1F359}",
          "rice_cracker": "\u{1F358}",
          "rice_scene": "\u{1F391}",
          "right_anger_bubble": "\u{1F5EF}",
          "ring": "\u{1F48D}",
          "robot": "\u{1F916}",
          "rocket": "\u{1F680}",
          "rofl": "\u{1F923}",
          "roll_eyes": "\u{1F644}",
          "roller_coaster": "\u{1F3A2}",
          "rooster": "\u{1F413}",
          "rose": "\u{1F339}",
          "rosette": "\u{1F3F5}",
          "rotating_light": "\u{1F6A8}",
          "round_pushpin": "\u{1F4CD}",
          "rowing_man": "\u{1F6A3}",
          "rowing_woman": "\u{1F6A3}&zwj;\u2640\uFE0F",
          "rugby_football": "\u{1F3C9}",
          "running_man": "\u{1F3C3}",
          "running_shirt_with_sash": "\u{1F3BD}",
          "running_woman": "\u{1F3C3}&zwj;\u2640\uFE0F",
          "sa": "\u{1F202}\uFE0F",
          "sagittarius": "\u2650\uFE0F",
          "sake": "\u{1F376}",
          "sandal": "\u{1F461}",
          "santa": "\u{1F385}",
          "satellite": "\u{1F4E1}",
          "saxophone": "\u{1F3B7}",
          "school": "\u{1F3EB}",
          "school_satchel": "\u{1F392}",
          "scissors": "\u2702\uFE0F",
          "scorpion": "\u{1F982}",
          "scorpius": "\u264F\uFE0F",
          "scream": "\u{1F631}",
          "scream_cat": "\u{1F640}",
          "scroll": "\u{1F4DC}",
          "seat": "\u{1F4BA}",
          "secret": "\u3299\uFE0F",
          "see_no_evil": "\u{1F648}",
          "seedling": "\u{1F331}",
          "selfie": "\u{1F933}",
          "shallow_pan_of_food": "\u{1F958}",
          "shamrock": "\u2618\uFE0F",
          "shark": "\u{1F988}",
          "shaved_ice": "\u{1F367}",
          "sheep": "\u{1F411}",
          "shell": "\u{1F41A}",
          "shield": "\u{1F6E1}",
          "shinto_shrine": "\u26E9",
          "ship": "\u{1F6A2}",
          "shirt": "\u{1F455}",
          "shopping": "\u{1F6CD}",
          "shopping_cart": "\u{1F6D2}",
          "shower": "\u{1F6BF}",
          "shrimp": "\u{1F990}",
          "signal_strength": "\u{1F4F6}",
          "six_pointed_star": "\u{1F52F}",
          "ski": "\u{1F3BF}",
          "skier": "\u26F7",
          "skull": "\u{1F480}",
          "skull_and_crossbones": "\u2620\uFE0F",
          "sleeping": "\u{1F634}",
          "sleeping_bed": "\u{1F6CC}",
          "sleepy": "\u{1F62A}",
          "slightly_frowning_face": "\u{1F641}",
          "slightly_smiling_face": "\u{1F642}",
          "slot_machine": "\u{1F3B0}",
          "small_airplane": "\u{1F6E9}",
          "small_blue_diamond": "\u{1F539}",
          "small_orange_diamond": "\u{1F538}",
          "small_red_triangle": "\u{1F53A}",
          "small_red_triangle_down": "\u{1F53B}",
          "smile": "\u{1F604}",
          "smile_cat": "\u{1F638}",
          "smiley": "\u{1F603}",
          "smiley_cat": "\u{1F63A}",
          "smiling_imp": "\u{1F608}",
          "smirk": "\u{1F60F}",
          "smirk_cat": "\u{1F63C}",
          "smoking": "\u{1F6AC}",
          "snail": "\u{1F40C}",
          "snake": "\u{1F40D}",
          "sneezing_face": "\u{1F927}",
          "snowboarder": "\u{1F3C2}",
          "snowflake": "\u2744\uFE0F",
          "snowman": "\u26C4\uFE0F",
          "snowman_with_snow": "\u2603\uFE0F",
          "sob": "\u{1F62D}",
          "soccer": "\u26BD\uFE0F",
          "soon": "\u{1F51C}",
          "sos": "\u{1F198}",
          "sound": "\u{1F509}",
          "space_invader": "\u{1F47E}",
          "spades": "\u2660\uFE0F",
          "spaghetti": "\u{1F35D}",
          "sparkle": "\u2747\uFE0F",
          "sparkler": "\u{1F387}",
          "sparkles": "\u2728",
          "sparkling_heart": "\u{1F496}",
          "speak_no_evil": "\u{1F64A}",
          "speaker": "\u{1F508}",
          "speaking_head": "\u{1F5E3}",
          "speech_balloon": "\u{1F4AC}",
          "speedboat": "\u{1F6A4}",
          "spider": "\u{1F577}",
          "spider_web": "\u{1F578}",
          "spiral_calendar": "\u{1F5D3}",
          "spiral_notepad": "\u{1F5D2}",
          "spoon": "\u{1F944}",
          "squid": "\u{1F991}",
          "stadium": "\u{1F3DF}",
          "star": "\u2B50\uFE0F",
          "star2": "\u{1F31F}",
          "star_and_crescent": "\u262A\uFE0F",
          "star_of_david": "\u2721\uFE0F",
          "stars": "\u{1F320}",
          "station": "\u{1F689}",
          "statue_of_liberty": "\u{1F5FD}",
          "steam_locomotive": "\u{1F682}",
          "stew": "\u{1F372}",
          "stop_button": "\u23F9",
          "stop_sign": "\u{1F6D1}",
          "stopwatch": "\u23F1",
          "straight_ruler": "\u{1F4CF}",
          "strawberry": "\u{1F353}",
          "stuck_out_tongue": "\u{1F61B}",
          "stuck_out_tongue_closed_eyes": "\u{1F61D}",
          "stuck_out_tongue_winking_eye": "\u{1F61C}",
          "studio_microphone": "\u{1F399}",
          "stuffed_flatbread": "\u{1F959}",
          "sun_behind_large_cloud": "\u{1F325}",
          "sun_behind_rain_cloud": "\u{1F326}",
          "sun_behind_small_cloud": "\u{1F324}",
          "sun_with_face": "\u{1F31E}",
          "sunflower": "\u{1F33B}",
          "sunglasses": "\u{1F60E}",
          "sunny": "\u2600\uFE0F",
          "sunrise": "\u{1F305}",
          "sunrise_over_mountains": "\u{1F304}",
          "surfing_man": "\u{1F3C4}",
          "surfing_woman": "\u{1F3C4}&zwj;\u2640\uFE0F",
          "sushi": "\u{1F363}",
          "suspension_railway": "\u{1F69F}",
          "sweat": "\u{1F613}",
          "sweat_drops": "\u{1F4A6}",
          "sweat_smile": "\u{1F605}",
          "sweet_potato": "\u{1F360}",
          "swimming_man": "\u{1F3CA}",
          "swimming_woman": "\u{1F3CA}&zwj;\u2640\uFE0F",
          "symbols": "\u{1F523}",
          "synagogue": "\u{1F54D}",
          "syringe": "\u{1F489}",
          "taco": "\u{1F32E}",
          "tada": "\u{1F389}",
          "tanabata_tree": "\u{1F38B}",
          "taurus": "\u2649\uFE0F",
          "taxi": "\u{1F695}",
          "tea": "\u{1F375}",
          "telephone_receiver": "\u{1F4DE}",
          "telescope": "\u{1F52D}",
          "tennis": "\u{1F3BE}",
          "tent": "\u26FA\uFE0F",
          "thermometer": "\u{1F321}",
          "thinking": "\u{1F914}",
          "thought_balloon": "\u{1F4AD}",
          "ticket": "\u{1F3AB}",
          "tickets": "\u{1F39F}",
          "tiger": "\u{1F42F}",
          "tiger2": "\u{1F405}",
          "timer_clock": "\u23F2",
          "tipping_hand_man": "\u{1F481}&zwj;\u2642\uFE0F",
          "tired_face": "\u{1F62B}",
          "tm": "\u2122\uFE0F",
          "toilet": "\u{1F6BD}",
          "tokyo_tower": "\u{1F5FC}",
          "tomato": "\u{1F345}",
          "tongue": "\u{1F445}",
          "top": "\u{1F51D}",
          "tophat": "\u{1F3A9}",
          "tornado": "\u{1F32A}",
          "trackball": "\u{1F5B2}",
          "tractor": "\u{1F69C}",
          "traffic_light": "\u{1F6A5}",
          "train": "\u{1F68B}",
          "train2": "\u{1F686}",
          "tram": "\u{1F68A}",
          "triangular_flag_on_post": "\u{1F6A9}",
          "triangular_ruler": "\u{1F4D0}",
          "trident": "\u{1F531}",
          "triumph": "\u{1F624}",
          "trolleybus": "\u{1F68E}",
          "trophy": "\u{1F3C6}",
          "tropical_drink": "\u{1F379}",
          "tropical_fish": "\u{1F420}",
          "truck": "\u{1F69A}",
          "trumpet": "\u{1F3BA}",
          "tulip": "\u{1F337}",
          "tumbler_glass": "\u{1F943}",
          "turkey": "\u{1F983}",
          "turtle": "\u{1F422}",
          "tv": "\u{1F4FA}",
          "twisted_rightwards_arrows": "\u{1F500}",
          "two_hearts": "\u{1F495}",
          "two_men_holding_hands": "\u{1F46C}",
          "two_women_holding_hands": "\u{1F46D}",
          "u5272": "\u{1F239}",
          "u5408": "\u{1F234}",
          "u55b6": "\u{1F23A}",
          "u6307": "\u{1F22F}\uFE0F",
          "u6708": "\u{1F237}\uFE0F",
          "u6709": "\u{1F236}",
          "u6e80": "\u{1F235}",
          "u7121": "\u{1F21A}\uFE0F",
          "u7533": "\u{1F238}",
          "u7981": "\u{1F232}",
          "u7a7a": "\u{1F233}",
          "umbrella": "\u2614\uFE0F",
          "unamused": "\u{1F612}",
          "underage": "\u{1F51E}",
          "unicorn": "\u{1F984}",
          "unlock": "\u{1F513}",
          "up": "\u{1F199}",
          "upside_down_face": "\u{1F643}",
          "v": "\u270C\uFE0F",
          "vertical_traffic_light": "\u{1F6A6}",
          "vhs": "\u{1F4FC}",
          "vibration_mode": "\u{1F4F3}",
          "video_camera": "\u{1F4F9}",
          "video_game": "\u{1F3AE}",
          "violin": "\u{1F3BB}",
          "virgo": "\u264D\uFE0F",
          "volcano": "\u{1F30B}",
          "volleyball": "\u{1F3D0}",
          "vs": "\u{1F19A}",
          "vulcan_salute": "\u{1F596}",
          "walking_man": "\u{1F6B6}",
          "walking_woman": "\u{1F6B6}&zwj;\u2640\uFE0F",
          "waning_crescent_moon": "\u{1F318}",
          "waning_gibbous_moon": "\u{1F316}",
          "warning": "\u26A0\uFE0F",
          "wastebasket": "\u{1F5D1}",
          "watch": "\u231A\uFE0F",
          "water_buffalo": "\u{1F403}",
          "watermelon": "\u{1F349}",
          "wave": "\u{1F44B}",
          "wavy_dash": "\u3030\uFE0F",
          "waxing_crescent_moon": "\u{1F312}",
          "wc": "\u{1F6BE}",
          "weary": "\u{1F629}",
          "wedding": "\u{1F492}",
          "weight_lifting_man": "\u{1F3CB}\uFE0F",
          "weight_lifting_woman": "\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",
          "whale": "\u{1F433}",
          "whale2": "\u{1F40B}",
          "wheel_of_dharma": "\u2638\uFE0F",
          "wheelchair": "\u267F\uFE0F",
          "white_check_mark": "\u2705",
          "white_circle": "\u26AA\uFE0F",
          "white_flag": "\u{1F3F3}\uFE0F",
          "white_flower": "\u{1F4AE}",
          "white_large_square": "\u2B1C\uFE0F",
          "white_medium_small_square": "\u25FD\uFE0F",
          "white_medium_square": "\u25FB\uFE0F",
          "white_small_square": "\u25AB\uFE0F",
          "white_square_button": "\u{1F533}",
          "wilted_flower": "\u{1F940}",
          "wind_chime": "\u{1F390}",
          "wind_face": "\u{1F32C}",
          "wine_glass": "\u{1F377}",
          "wink": "\u{1F609}",
          "wolf": "\u{1F43A}",
          "woman": "\u{1F469}",
          "woman_artist": "\u{1F469}&zwj;\u{1F3A8}",
          "woman_astronaut": "\u{1F469}&zwj;\u{1F680}",
          "woman_cartwheeling": "\u{1F938}&zwj;\u2640\uFE0F",
          "woman_cook": "\u{1F469}&zwj;\u{1F373}",
          "woman_facepalming": "\u{1F926}&zwj;\u2640\uFE0F",
          "woman_factory_worker": "\u{1F469}&zwj;\u{1F3ED}",
          "woman_farmer": "\u{1F469}&zwj;\u{1F33E}",
          "woman_firefighter": "\u{1F469}&zwj;\u{1F692}",
          "woman_health_worker": "\u{1F469}&zwj;\u2695\uFE0F",
          "woman_judge": "\u{1F469}&zwj;\u2696\uFE0F",
          "woman_juggling": "\u{1F939}&zwj;\u2640\uFE0F",
          "woman_mechanic": "\u{1F469}&zwj;\u{1F527}",
          "woman_office_worker": "\u{1F469}&zwj;\u{1F4BC}",
          "woman_pilot": "\u{1F469}&zwj;\u2708\uFE0F",
          "woman_playing_handball": "\u{1F93E}&zwj;\u2640\uFE0F",
          "woman_playing_water_polo": "\u{1F93D}&zwj;\u2640\uFE0F",
          "woman_scientist": "\u{1F469}&zwj;\u{1F52C}",
          "woman_shrugging": "\u{1F937}&zwj;\u2640\uFE0F",
          "woman_singer": "\u{1F469}&zwj;\u{1F3A4}",
          "woman_student": "\u{1F469}&zwj;\u{1F393}",
          "woman_teacher": "\u{1F469}&zwj;\u{1F3EB}",
          "woman_technologist": "\u{1F469}&zwj;\u{1F4BB}",
          "woman_with_turban": "\u{1F473}&zwj;\u2640\uFE0F",
          "womans_clothes": "\u{1F45A}",
          "womans_hat": "\u{1F452}",
          "women_wrestling": "\u{1F93C}&zwj;\u2640\uFE0F",
          "womens": "\u{1F6BA}",
          "world_map": "\u{1F5FA}",
          "worried": "\u{1F61F}",
          "wrench": "\u{1F527}",
          "writing_hand": "\u270D\uFE0F",
          "x": "\u274C",
          "yellow_heart": "\u{1F49B}",
          "yen": "\u{1F4B4}",
          "yin_yang": "\u262F\uFE0F",
          "yum": "\u{1F60B}",
          "zap": "\u26A1\uFE0F",
          "zipper_mouth_face": "\u{1F910}",
          "zzz": "\u{1F4A4}",
          "octocat": '<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',
          "showdown": `<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`
        };
        showdown2.Converter = function(converterOptions) {
          "use strict";
          var options = {}, langExtensions = [], outputModifiers = [], listeners = {}, setConvFlavor = setFlavor, metadata = {
            parsed: {},
            raw: "",
            format: ""
          };
          _constructor();
          function _constructor() {
            converterOptions = converterOptions || {};
            for (var gOpt in globalOptions) {
              if (globalOptions.hasOwnProperty(gOpt)) {
                options[gOpt] = globalOptions[gOpt];
              }
            }
            if (typeof converterOptions === "object") {
              for (var opt in converterOptions) {
                if (converterOptions.hasOwnProperty(opt)) {
                  options[opt] = converterOptions[opt];
                }
              }
            } else {
              throw Error("Converter expects the passed parameter to be an object, but " + typeof converterOptions + " was passed instead.");
            }
            if (options.extensions) {
              showdown2.helper.forEach(options.extensions, _parseExtension);
            }
          }
          function _parseExtension(ext, name2) {
            name2 = name2 || null;
            if (showdown2.helper.isString(ext)) {
              ext = showdown2.helper.stdExtName(ext);
              name2 = ext;
              if (showdown2.extensions[ext]) {
                console.warn("DEPRECATION WARNING: " + ext + " is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!");
                legacyExtensionLoading(showdown2.extensions[ext], ext);
                return;
              } else if (!showdown2.helper.isUndefined(extensions[ext])) {
                ext = extensions[ext];
              } else {
                throw Error('Extension "' + ext + '" could not be loaded. It was either not found or is not a valid extension.');
              }
            }
            if (typeof ext === "function") {
              ext = ext();
            }
            if (!showdown2.helper.isArray(ext)) {
              ext = [ext];
            }
            var validExt = validate(ext, name2);
            if (!validExt.valid) {
              throw Error(validExt.error);
            }
            for (var i2 = 0; i2 < ext.length; ++i2) {
              switch (ext[i2].type) {
                case "lang":
                  langExtensions.push(ext[i2]);
                  break;
                case "output":
                  outputModifiers.push(ext[i2]);
                  break;
              }
              if (ext[i2].hasOwnProperty("listeners")) {
                for (var ln in ext[i2].listeners) {
                  if (ext[i2].listeners.hasOwnProperty(ln)) {
                    listen(ln, ext[i2].listeners[ln]);
                  }
                }
              }
            }
          }
          function legacyExtensionLoading(ext, name2) {
            if (typeof ext === "function") {
              ext = ext(new showdown2.Converter());
            }
            if (!showdown2.helper.isArray(ext)) {
              ext = [ext];
            }
            var valid = validate(ext, name2);
            if (!valid.valid) {
              throw Error(valid.error);
            }
            for (var i2 = 0; i2 < ext.length; ++i2) {
              switch (ext[i2].type) {
                case "lang":
                  langExtensions.push(ext[i2]);
                  break;
                case "output":
                  outputModifiers.push(ext[i2]);
                  break;
                default:
                  throw Error("Extension loader error: Type unrecognized!!!");
              }
            }
          }
          function listen(name2, callback) {
            if (!showdown2.helper.isString(name2)) {
              throw Error("Invalid argument in converter.listen() method: name must be a string, but " + typeof name2 + " given");
            }
            if (typeof callback !== "function") {
              throw Error("Invalid argument in converter.listen() method: callback must be a function, but " + typeof callback + " given");
            }
            if (!listeners.hasOwnProperty(name2)) {
              listeners[name2] = [];
            }
            listeners[name2].push(callback);
          }
          function rTrimInputText(text) {
            var rsp = text.match(/^\s*/)[0].length, rgx = new RegExp("^\\s{0," + rsp + "}", "gm");
            return text.replace(rgx, "");
          }
          this._dispatch = function dispatch(evtName, text, options2, globals) {
            if (listeners.hasOwnProperty(evtName)) {
              for (var ei = 0; ei < listeners[evtName].length; ++ei) {
                var nText = listeners[evtName][ei](evtName, text, this, options2, globals);
                if (nText && typeof nText !== "undefined") {
                  text = nText;
                }
              }
            }
            return text;
          };
          this.listen = function(name2, callback) {
            listen(name2, callback);
            return this;
          };
          this.makeHtml = function(text) {
            if (!text) {
              return text;
            }
            var globals = {
              gHtmlBlocks: [],
              gHtmlMdBlocks: [],
              gHtmlSpans: [],
              gUrls: {},
              gTitles: {},
              gDimensions: {},
              gListLevel: 0,
              hashLinkCounts: {},
              langExtensions,
              outputModifiers,
              converter: this,
              ghCodeBlocks: [],
              metadata: {
                parsed: {},
                raw: "",
                format: ""
              }
            };
            text = text.replace(//g, "\xA8T");
            text = text.replace(/\$/g, "\xA8D");
            text = text.replace(/\r\n/g, "\n");
            text = text.replace(/\r/g, "\n");
            text = text.replace(/\u00A0/g, "&nbsp;");
            if (options.smartIndentationFix) {
              text = rTrimInputText(text);
            }
            text = "\n\n" + text + "\n\n";
            text = showdown2.subParser("detab")(text, options, globals);
            text = text.replace(/^[ \t]+$/mg, "");
            showdown2.helper.forEach(langExtensions, function(ext) {
              text = showdown2.subParser("runExtension")(ext, text, options, globals);
            });
            text = showdown2.subParser("metadata")(text, options, globals);
            text = showdown2.subParser("hashPreCodeTags")(text, options, globals);
            text = showdown2.subParser("githubCodeBlocks")(text, options, globals);
            text = showdown2.subParser("hashHTMLBlocks")(text, options, globals);
            text = showdown2.subParser("hashCodeTags")(text, options, globals);
            text = showdown2.subParser("stripLinkDefinitions")(text, options, globals);
            text = showdown2.subParser("blockGamut")(text, options, globals);
            text = showdown2.subParser("unhashHTMLSpans")(text, options, globals);
            text = showdown2.subParser("unescapeSpecialChars")(text, options, globals);
            text = text.replace(/D/g, "$$");
            text = text.replace(/T/g, "\xA8");
            text = showdown2.subParser("completeHTMLDocument")(text, options, globals);
            showdown2.helper.forEach(outputModifiers, function(ext) {
              text = showdown2.subParser("runExtension")(ext, text, options, globals);
            });
            metadata = globals.metadata;
            return text;
          };
          this.makeMarkdown = this.makeMd = function(src, HTMLParser) {
            src = src.replace(/\r\n/g, "\n");
            src = src.replace(/\r/g, "\n");
            src = src.replace(/>[ \t]+</, ">\xA8NBSP;<");
            if (!HTMLParser) {
              if (window && window.document) {
                HTMLParser = window.document;
              } else {
                throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");
              }
            }
            var doc2 = HTMLParser.createElement("div");
            doc2.innerHTML = src;
            var globals = {
              preList: substitutePreCodeTags(doc2)
            };
            clean(doc2);
            var nodes = doc2.childNodes, mdDoc = "";
            for (var i2 = 0; i2 < nodes.length; i2++) {
              mdDoc += showdown2.subParser("makeMarkdown.node")(nodes[i2], globals);
            }
            function clean(node) {
              for (var n2 = 0; n2 < node.childNodes.length; ++n2) {
                var child = node.childNodes[n2];
                if (child.nodeType === 3) {
                  if (!/\S/.test(child.nodeValue)) {
                    node.removeChild(child);
                    --n2;
                  } else {
                    child.nodeValue = child.nodeValue.split("\n").join(" ");
                    child.nodeValue = child.nodeValue.replace(/(\s)+/g, "$1");
                  }
                } else if (child.nodeType === 1) {
                  clean(child);
                }
              }
            }
            function substitutePreCodeTags(doc3) {
              var pres = doc3.querySelectorAll("pre"), presPH = [];
              for (var i3 = 0; i3 < pres.length; ++i3) {
                if (pres[i3].childElementCount === 1 && pres[i3].firstChild.tagName.toLowerCase() === "code") {
                  var content = pres[i3].firstChild.innerHTML.trim(), language = pres[i3].firstChild.getAttribute("data-language") || "";
                  if (language === "") {
                    var classes = pres[i3].firstChild.className.split(" ");
                    for (var c2 = 0; c2 < classes.length; ++c2) {
                      var matches = classes[c2].match(/^language-(.+)$/);
                      if (matches !== null) {
                        language = matches[1];
                        break;
                      }
                    }
                  }
                  content = showdown2.helper.unescapeHTMLEntities(content);
                  presPH.push(content);
                  pres[i3].outerHTML = '<precode language="' + language + '" precodenum="' + i3.toString() + '"></precode>';
                } else {
                  presPH.push(pres[i3].innerHTML);
                  pres[i3].innerHTML = "";
                  pres[i3].setAttribute("prenum", i3.toString());
                }
              }
              return presPH;
            }
            return mdDoc;
          };
          this.setOption = function(key2, value) {
            options[key2] = value;
          };
          this.getOption = function(key2) {
            return options[key2];
          };
          this.getOptions = function() {
            return options;
          };
          this.addExtension = function(extension, name2) {
            name2 = name2 || null;
            _parseExtension(extension, name2);
          };
          this.useExtension = function(extensionName) {
            _parseExtension(extensionName);
          };
          this.setFlavor = function(name2) {
            if (!flavor.hasOwnProperty(name2)) {
              throw Error(name2 + " flavor was not found");
            }
            var preset = flavor[name2];
            setConvFlavor = name2;
            for (var option in preset) {
              if (preset.hasOwnProperty(option)) {
                options[option] = preset[option];
              }
            }
          };
          this.getFlavor = function() {
            return setConvFlavor;
          };
          this.removeExtension = function(extension) {
            if (!showdown2.helper.isArray(extension)) {
              extension = [extension];
            }
            for (var a2 = 0; a2 < extension.length; ++a2) {
              var ext = extension[a2];
              for (var i2 = 0; i2 < langExtensions.length; ++i2) {
                if (langExtensions[i2] === ext) {
                  langExtensions[i2].splice(i2, 1);
                }
              }
              for (var ii = 0; ii < outputModifiers.length; ++i2) {
                if (outputModifiers[ii] === ext) {
                  outputModifiers[ii].splice(i2, 1);
                }
              }
            }
          };
          this.getAllExtensions = function() {
            return {
              language: langExtensions,
              output: outputModifiers
            };
          };
          this.getMetadata = function(raw) {
            if (raw) {
              return metadata.raw;
            } else {
              return metadata.parsed;
            }
          };
          this.getMetadataFormat = function() {
            return metadata.format;
          };
          this._setMetadataPair = function(key2, value) {
            metadata.parsed[key2] = value;
          };
          this._setMetadataFormat = function(format2) {
            metadata.format = format2;
          };
          this._setMetadataRaw = function(raw) {
            metadata.raw = raw;
          };
        };
        showdown2.subParser("anchors", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("anchors.before", text, options, globals);
          var writeAnchorTag = function(wholeMatch, linkText, linkId, url, m5, m6, title) {
            if (showdown2.helper.isUndefined(title)) {
              title = "";
            }
            linkId = linkId.toLowerCase();
            if (wholeMatch.search(/\(<?\s*>? ?(['"].*['"])?\)$/m) > -1) {
              url = "";
            } else if (!url) {
              if (!linkId) {
                linkId = linkText.toLowerCase().replace(/ ?\n/g, " ");
              }
              url = "#" + linkId;
              if (!showdown2.helper.isUndefined(globals.gUrls[linkId])) {
                url = globals.gUrls[linkId];
                if (!showdown2.helper.isUndefined(globals.gTitles[linkId])) {
                  title = globals.gTitles[linkId];
                }
              } else {
                return wholeMatch;
              }
            }
            url = url.replace(showdown2.helper.regexes.asteriskDashAndColon, showdown2.helper.escapeCharactersCallback);
            var result = '<a href="' + url + '"';
            if (title !== "" && title !== null) {
              title = title.replace(/"/g, "&quot;");
              title = title.replace(showdown2.helper.regexes.asteriskDashAndColon, showdown2.helper.escapeCharactersCallback);
              result += ' title="' + title + '"';
            }
            if (options.openLinksInNewWindow && !/^#/.test(url)) {
              result += ' rel="noopener noreferrer" target="\xA8E95Eblank"';
            }
            result += ">" + linkText + "</a>";
            return result;
          };
          text = text.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g, writeAnchorTag);
          text = text.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g, writeAnchorTag);
          text = text.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g, writeAnchorTag);
          text = text.replace(/\[([^\[\]]+)]()()()()()/g, writeAnchorTag);
          if (options.ghMentions) {
            text = text.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi, function(wm, st2, escape2, mentions, username) {
              if (escape2 === "\\") {
                return st2 + mentions;
              }
              if (!showdown2.helper.isString(options.ghMentionsLink)) {
                throw new Error("ghMentionsLink option must be a string");
              }
              var lnk = options.ghMentionsLink.replace(/\{u}/g, username), target = "";
              if (options.openLinksInNewWindow) {
                target = ' rel="noopener noreferrer" target="\xA8E95Eblank"';
              }
              return st2 + '<a href="' + lnk + '"' + target + ">" + mentions + "</a>";
            });
          }
          text = globals.converter._dispatch("anchors.after", text, options, globals);
          return text;
        });
        var simpleURLRegex = /([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi, simpleURLRegex2 = /([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi, delimUrlRegex = /()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi, simpleMailRegex = /(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi, delimMailRegex = /<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi, replaceLink = function(options) {
          "use strict";
          return function(wm, leadingMagicChars, link, m2, m3, trailingPunctuation, trailingMagicChars) {
            link = link.replace(showdown2.helper.regexes.asteriskDashAndColon, showdown2.helper.escapeCharactersCallback);
            var lnkTxt = link, append = "", target = "", lmc = leadingMagicChars || "", tmc = trailingMagicChars || "";
            if (/^www\./i.test(link)) {
              link = link.replace(/^www\./i, "http://www.");
            }
            if (options.excludeTrailingPunctuationFromURLs && trailingPunctuation) {
              append = trailingPunctuation;
            }
            if (options.openLinksInNewWindow) {
              target = ' rel="noopener noreferrer" target="\xA8E95Eblank"';
            }
            return lmc + '<a href="' + link + '"' + target + ">" + lnkTxt + "</a>" + append + tmc;
          };
        }, replaceMail = function(options, globals) {
          "use strict";
          return function(wholeMatch, b2, mail) {
            var href = "mailto:";
            b2 = b2 || "";
            mail = showdown2.subParser("unescapeSpecialChars")(mail, options, globals);
            if (options.encodeEmails) {
              href = showdown2.helper.encodeEmailAddress(href + mail);
              mail = showdown2.helper.encodeEmailAddress(mail);
            } else {
              href = href + mail;
            }
            return b2 + '<a href="' + href + '">' + mail + "</a>";
          };
        };
        showdown2.subParser("autoLinks", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("autoLinks.before", text, options, globals);
          text = text.replace(delimUrlRegex, replaceLink(options));
          text = text.replace(delimMailRegex, replaceMail(options, globals));
          text = globals.converter._dispatch("autoLinks.after", text, options, globals);
          return text;
        });
        showdown2.subParser("simplifiedAutoLinks", function(text, options, globals) {
          "use strict";
          if (!options.simplifiedAutoLink) {
            return text;
          }
          text = globals.converter._dispatch("simplifiedAutoLinks.before", text, options, globals);
          if (options.excludeTrailingPunctuationFromURLs) {
            text = text.replace(simpleURLRegex2, replaceLink(options));
          } else {
            text = text.replace(simpleURLRegex, replaceLink(options));
          }
          text = text.replace(simpleMailRegex, replaceMail(options, globals));
          text = globals.converter._dispatch("simplifiedAutoLinks.after", text, options, globals);
          return text;
        });
        showdown2.subParser("blockGamut", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("blockGamut.before", text, options, globals);
          text = showdown2.subParser("blockQuotes")(text, options, globals);
          text = showdown2.subParser("headers")(text, options, globals);
          text = showdown2.subParser("horizontalRule")(text, options, globals);
          text = showdown2.subParser("lists")(text, options, globals);
          text = showdown2.subParser("codeBlocks")(text, options, globals);
          text = showdown2.subParser("tables")(text, options, globals);
          text = showdown2.subParser("hashHTMLBlocks")(text, options, globals);
          text = showdown2.subParser("paragraphs")(text, options, globals);
          text = globals.converter._dispatch("blockGamut.after", text, options, globals);
          return text;
        });
        showdown2.subParser("blockQuotes", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("blockQuotes.before", text, options, globals);
          text = text + "\n\n";
          var rgx = /(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;
          if (options.splitAdjacentBlockquotes) {
            rgx = /^ {0,3}>[\s\S]*?(?:\n\n)/gm;
          }
          text = text.replace(rgx, function(bq) {
            bq = bq.replace(/^[ \t]*>[ \t]?/gm, "");
            bq = bq.replace(/0/g, "");
            bq = bq.replace(/^[ \t]+$/gm, "");
            bq = showdown2.subParser("githubCodeBlocks")(bq, options, globals);
            bq = showdown2.subParser("blockGamut")(bq, options, globals);
            bq = bq.replace(/(^|\n)/g, "$1  ");
            bq = bq.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm, function(wholeMatch, m1) {
              var pre = m1;
              pre = pre.replace(/^  /mg, "\xA80");
              pre = pre.replace(/0/g, "");
              return pre;
            });
            return showdown2.subParser("hashBlock")("<blockquote>\n" + bq + "\n</blockquote>", options, globals);
          });
          text = globals.converter._dispatch("blockQuotes.after", text, options, globals);
          return text;
        });
        showdown2.subParser("codeBlocks", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("codeBlocks.before", text, options, globals);
          text += "\xA80";
          var pattern = /(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=0))/g;
          text = text.replace(pattern, function(wholeMatch, m1, m2) {
            var codeblock = m1, nextChar = m2, end = "\n";
            codeblock = showdown2.subParser("outdent")(codeblock, options, globals);
            codeblock = showdown2.subParser("encodeCode")(codeblock, options, globals);
            codeblock = showdown2.subParser("detab")(codeblock, options, globals);
            codeblock = codeblock.replace(/^\n+/g, "");
            codeblock = codeblock.replace(/\n+$/g, "");
            if (options.omitExtraWLInCodeBlocks) {
              end = "";
            }
            codeblock = "<pre><code>" + codeblock + end + "</code></pre>";
            return showdown2.subParser("hashBlock")(codeblock, options, globals) + nextChar;
          });
          text = text.replace(/0/, "");
          text = globals.converter._dispatch("codeBlocks.after", text, options, globals);
          return text;
        });
        showdown2.subParser("codeSpans", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("codeSpans.before", text, options, globals);
          if (typeof text === "undefined") {
            text = "";
          }
          text = text.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm, function(wholeMatch, m1, m2, m3) {
            var c2 = m3;
            c2 = c2.replace(/^([ \t]*)/g, "");
            c2 = c2.replace(/[ \t]*$/g, "");
            c2 = showdown2.subParser("encodeCode")(c2, options, globals);
            c2 = m1 + "<code>" + c2 + "</code>";
            c2 = showdown2.subParser("hashHTMLSpans")(c2, options, globals);
            return c2;
          });
          text = globals.converter._dispatch("codeSpans.after", text, options, globals);
          return text;
        });
        showdown2.subParser("completeHTMLDocument", function(text, options, globals) {
          "use strict";
          if (!options.completeHTMLDocument) {
            return text;
          }
          text = globals.converter._dispatch("completeHTMLDocument.before", text, options, globals);
          var doctype2 = "html", doctypeParsed = "<!DOCTYPE HTML>\n", title = "", charset = '<meta charset="utf-8">\n', lang = "", metadata = "";
          if (typeof globals.metadata.parsed.doctype !== "undefined") {
            doctypeParsed = "<!DOCTYPE " + globals.metadata.parsed.doctype + ">\n";
            doctype2 = globals.metadata.parsed.doctype.toString().toLowerCase();
            if (doctype2 === "html" || doctype2 === "html5") {
              charset = '<meta charset="utf-8">';
            }
          }
          for (var meta2 in globals.metadata.parsed) {
            if (globals.metadata.parsed.hasOwnProperty(meta2)) {
              switch (meta2.toLowerCase()) {
                case "doctype":
                  break;
                case "title":
                  title = "<title>" + globals.metadata.parsed.title + "</title>\n";
                  break;
                case "charset":
                  if (doctype2 === "html" || doctype2 === "html5") {
                    charset = '<meta charset="' + globals.metadata.parsed.charset + '">\n';
                  } else {
                    charset = '<meta name="charset" content="' + globals.metadata.parsed.charset + '">\n';
                  }
                  break;
                case "language":
                case "lang":
                  lang = ' lang="' + globals.metadata.parsed[meta2] + '"';
                  metadata += '<meta name="' + meta2 + '" content="' + globals.metadata.parsed[meta2] + '">\n';
                  break;
                default:
                  metadata += '<meta name="' + meta2 + '" content="' + globals.metadata.parsed[meta2] + '">\n';
              }
            }
          }
          text = doctypeParsed + "<html" + lang + ">\n<head>\n" + title + charset + metadata + "</head>\n<body>\n" + text.trim() + "\n</body>\n</html>";
          text = globals.converter._dispatch("completeHTMLDocument.after", text, options, globals);
          return text;
        });
        showdown2.subParser("detab", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("detab.before", text, options, globals);
          text = text.replace(/\t(?=\t)/g, "    ");
          text = text.replace(/\t/g, "\xA8A\xA8B");
          text = text.replace(/B(.+?)A/g, function(wholeMatch, m1) {
            var leadingText = m1, numSpaces = 4 - leadingText.length % 4;
            for (var i2 = 0; i2 < numSpaces; i2++) {
              leadingText += " ";
            }
            return leadingText;
          });
          text = text.replace(/A/g, "    ");
          text = text.replace(/B/g, "");
          text = globals.converter._dispatch("detab.after", text, options, globals);
          return text;
        });
        showdown2.subParser("ellipsis", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("ellipsis.before", text, options, globals);
          text = text.replace(/\.\.\./g, "\u2026");
          text = globals.converter._dispatch("ellipsis.after", text, options, globals);
          return text;
        });
        showdown2.subParser("emoji", function(text, options, globals) {
          "use strict";
          if (!options.emoji) {
            return text;
          }
          text = globals.converter._dispatch("emoji.before", text, options, globals);
          var emojiRgx = /:([\S]+?):/g;
          text = text.replace(emojiRgx, function(wm, emojiCode) {
            if (showdown2.helper.emojis.hasOwnProperty(emojiCode)) {
              return showdown2.helper.emojis[emojiCode];
            }
            return wm;
          });
          text = globals.converter._dispatch("emoji.after", text, options, globals);
          return text;
        });
        showdown2.subParser("encodeAmpsAndAngles", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("encodeAmpsAndAngles.before", text, options, globals);
          text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g, "&amp;");
          text = text.replace(/<(?![a-z\/?$!])/gi, "&lt;");
          text = text.replace(/</g, "&lt;");
          text = text.replace(/>/g, "&gt;");
          text = globals.converter._dispatch("encodeAmpsAndAngles.after", text, options, globals);
          return text;
        });
        showdown2.subParser("encodeBackslashEscapes", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("encodeBackslashEscapes.before", text, options, globals);
          text = text.replace(/\\(\\)/g, showdown2.helper.escapeCharactersCallback);
          text = text.replace(/\\([`*_{}\[\]()>#+.!~=|-])/g, showdown2.helper.escapeCharactersCallback);
          text = globals.converter._dispatch("encodeBackslashEscapes.after", text, options, globals);
          return text;
        });
        showdown2.subParser("encodeCode", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("encodeCode.before", text, options, globals);
          text = text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/([*_{}\[\]\\=~-])/g, showdown2.helper.escapeCharactersCallback);
          text = globals.converter._dispatch("encodeCode.after", text, options, globals);
          return text;
        });
        showdown2.subParser("escapeSpecialCharsWithinTagAttributes", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before", text, options, globals);
          var tags = /<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi, comments = /<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;
          text = text.replace(tags, function(wholeMatch) {
            return wholeMatch.replace(/(.)<\/?code>(?=.)/g, "$1`").replace(/([\\`*_~=|])/g, showdown2.helper.escapeCharactersCallback);
          });
          text = text.replace(comments, function(wholeMatch) {
            return wholeMatch.replace(/([\\`*_~=|])/g, showdown2.helper.escapeCharactersCallback);
          });
          text = globals.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after", text, options, globals);
          return text;
        });
        showdown2.subParser("githubCodeBlocks", function(text, options, globals) {
          "use strict";
          if (!options.ghCodeBlocks) {
            return text;
          }
          text = globals.converter._dispatch("githubCodeBlocks.before", text, options, globals);
          text += "\xA80";
          text = text.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g, function(wholeMatch, delim, language, codeblock) {
            var end = options.omitExtraWLInCodeBlocks ? "" : "\n";
            codeblock = showdown2.subParser("encodeCode")(codeblock, options, globals);
            codeblock = showdown2.subParser("detab")(codeblock, options, globals);
            codeblock = codeblock.replace(/^\n+/g, "");
            codeblock = codeblock.replace(/\n+$/g, "");
            codeblock = "<pre><code" + (language ? ' class="' + language + " language-" + language + '"' : "") + ">" + codeblock + end + "</code></pre>";
            codeblock = showdown2.subParser("hashBlock")(codeblock, options, globals);
            return "\n\n\xA8G" + (globals.ghCodeBlocks.push({ text: wholeMatch, codeblock }) - 1) + "G\n\n";
          });
          text = text.replace(/0/, "");
          return globals.converter._dispatch("githubCodeBlocks.after", text, options, globals);
        });
        showdown2.subParser("hashBlock", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("hashBlock.before", text, options, globals);
          text = text.replace(/(^\n+|\n+$)/g, "");
          text = "\n\n\xA8K" + (globals.gHtmlBlocks.push(text) - 1) + "K\n\n";
          text = globals.converter._dispatch("hashBlock.after", text, options, globals);
          return text;
        });
        showdown2.subParser("hashCodeTags", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("hashCodeTags.before", text, options, globals);
          var repFunc = function(wholeMatch, match, left, right) {
            var codeblock = left + showdown2.subParser("encodeCode")(match, options, globals) + right;
            return "\xA8C" + (globals.gHtmlSpans.push(codeblock) - 1) + "C";
          };
          text = showdown2.helper.replaceRecursiveRegExp(text, repFunc, "<code\\b[^>]*>", "</code>", "gim");
          text = globals.converter._dispatch("hashCodeTags.after", text, options, globals);
          return text;
        });
        showdown2.subParser("hashElement", function(text, options, globals) {
          "use strict";
          return function(wholeMatch, m1) {
            var blockText = m1;
            blockText = blockText.replace(/\n\n/g, "\n");
            blockText = blockText.replace(/^\n/, "");
            blockText = blockText.replace(/\n+$/g, "");
            blockText = "\n\n\xA8K" + (globals.gHtmlBlocks.push(blockText) - 1) + "K\n\n";
            return blockText;
          };
        });
        showdown2.subParser("hashHTMLBlocks", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("hashHTMLBlocks.before", text, options, globals);
          var blockTags = [
            "pre",
            "div",
            "h1",
            "h2",
            "h3",
            "h4",
            "h5",
            "h6",
            "blockquote",
            "table",
            "dl",
            "ol",
            "ul",
            "script",
            "noscript",
            "form",
            "fieldset",
            "iframe",
            "math",
            "style",
            "section",
            "header",
            "footer",
            "nav",
            "article",
            "aside",
            "address",
            "audio",
            "canvas",
            "figure",
            "hgroup",
            "output",
            "video",
            "p"
          ], repFunc = function(wholeMatch, match, left, right) {
            var txt2 = wholeMatch;
            if (left.search(/\bmarkdown\b/) !== -1) {
              txt2 = left + globals.converter.makeHtml(match) + right;
            }
            return "\n\n\xA8K" + (globals.gHtmlBlocks.push(txt2) - 1) + "K\n\n";
          };
          if (options.backslashEscapesHTMLTags) {
            text = text.replace(/\\<(\/?[^>]+?)>/g, function(wm, inside) {
              return "&lt;" + inside + "&gt;";
            });
          }
          for (var i2 = 0; i2 < blockTags.length; ++i2) {
            var opTagPos, rgx1 = new RegExp("^ {0,3}(<" + blockTags[i2] + "\\b[^>]*>)", "im"), patLeft = "<" + blockTags[i2] + "\\b[^>]*>", patRight = "</" + blockTags[i2] + ">";
            while ((opTagPos = showdown2.helper.regexIndexOf(text, rgx1)) !== -1) {
              var subTexts = showdown2.helper.splitAtIndex(text, opTagPos), newSubText1 = showdown2.helper.replaceRecursiveRegExp(subTexts[1], repFunc, patLeft, patRight, "im");
              if (newSubText1 === subTexts[1]) {
                break;
              }
              text = subTexts[0].concat(newSubText1);
            }
          }
          text = text.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g, showdown2.subParser("hashElement")(text, options, globals));
          text = showdown2.helper.replaceRecursiveRegExp(text, function(txt2) {
            return "\n\n\xA8K" + (globals.gHtmlBlocks.push(txt2) - 1) + "K\n\n";
          }, "^ {0,3}<!--", "-->", "gm");
          text = text.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g, showdown2.subParser("hashElement")(text, options, globals));
          text = globals.converter._dispatch("hashHTMLBlocks.after", text, options, globals);
          return text;
        });
        showdown2.subParser("hashHTMLSpans", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("hashHTMLSpans.before", text, options, globals);
          function hashHTMLSpan(html) {
            return "\xA8C" + (globals.gHtmlSpans.push(html) - 1) + "C";
          }
          text = text.replace(/<[^>]+?\/>/gi, function(wm) {
            return hashHTMLSpan(wm);
          });
          text = text.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g, function(wm) {
            return hashHTMLSpan(wm);
          });
          text = text.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g, function(wm) {
            return hashHTMLSpan(wm);
          });
          text = text.replace(/<[^>]+?>/gi, function(wm) {
            return hashHTMLSpan(wm);
          });
          text = globals.converter._dispatch("hashHTMLSpans.after", text, options, globals);
          return text;
        });
        showdown2.subParser("unhashHTMLSpans", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("unhashHTMLSpans.before", text, options, globals);
          for (var i2 = 0; i2 < globals.gHtmlSpans.length; ++i2) {
            var repText = globals.gHtmlSpans[i2], limit = 0;
            while (/C(\d+)C/.test(repText)) {
              var num = RegExp.$1;
              repText = repText.replace("\xA8C" + num + "C", globals.gHtmlSpans[num]);
              if (limit === 10) {
                console.error("maximum nesting of 10 spans reached!!!");
                break;
              }
              ++limit;
            }
            text = text.replace("\xA8C" + i2 + "C", repText);
          }
          text = globals.converter._dispatch("unhashHTMLSpans.after", text, options, globals);
          return text;
        });
        showdown2.subParser("hashPreCodeTags", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("hashPreCodeTags.before", text, options, globals);
          var repFunc = function(wholeMatch, match, left, right) {
            var codeblock = left + showdown2.subParser("encodeCode")(match, options, globals) + right;
            return "\n\n\xA8G" + (globals.ghCodeBlocks.push({ text: wholeMatch, codeblock }) - 1) + "G\n\n";
          };
          text = showdown2.helper.replaceRecursiveRegExp(text, repFunc, "^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>", "^ {0,3}</code>\\s*</pre>", "gim");
          text = globals.converter._dispatch("hashPreCodeTags.after", text, options, globals);
          return text;
        });
        showdown2.subParser("headers", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("headers.before", text, options, globals);
          var headerLevelStart = isNaN(parseInt(options.headerLevelStart)) ? 1 : parseInt(options.headerLevelStart), setextRegexH1 = options.smoothLivePreview ? /^(.+)[ \t]*\n={2,}[ \t]*\n+/gm : /^(.+)[ \t]*\n=+[ \t]*\n+/gm, setextRegexH2 = options.smoothLivePreview ? /^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm : /^(.+)[ \t]*\n-+[ \t]*\n+/gm;
          text = text.replace(setextRegexH1, function(wholeMatch, m1) {
            var spanGamut = showdown2.subParser("spanGamut")(m1, options, globals), hID = options.noHeaderId ? "" : ' id="' + headerId(m1) + '"', hLevel = headerLevelStart, hashBlock = "<h" + hLevel + hID + ">" + spanGamut + "</h" + hLevel + ">";
            return showdown2.subParser("hashBlock")(hashBlock, options, globals);
          });
          text = text.replace(setextRegexH2, function(matchFound, m1) {
            var spanGamut = showdown2.subParser("spanGamut")(m1, options, globals), hID = options.noHeaderId ? "" : ' id="' + headerId(m1) + '"', hLevel = headerLevelStart + 1, hashBlock = "<h" + hLevel + hID + ">" + spanGamut + "</h" + hLevel + ">";
            return showdown2.subParser("hashBlock")(hashBlock, options, globals);
          });
          var atxStyle = options.requireSpaceBeforeHeadingText ? /^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm : /^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;
          text = text.replace(atxStyle, function(wholeMatch, m1, m2) {
            var hText = m2;
            if (options.customizedHeaderId) {
              hText = m2.replace(/\s?\{([^{]+?)}\s*$/, "");
            }
            var span = showdown2.subParser("spanGamut")(hText, options, globals), hID = options.noHeaderId ? "" : ' id="' + headerId(m2) + '"', hLevel = headerLevelStart - 1 + m1.length, header = "<h" + hLevel + hID + ">" + span + "</h" + hLevel + ">";
            return showdown2.subParser("hashBlock")(header, options, globals);
          });
          function headerId(m2) {
            var title, prefix;
            if (options.customizedHeaderId) {
              var match = m2.match(/\{([^{]+?)}\s*$/);
              if (match && match[1]) {
                m2 = match[1];
              }
            }
            title = m2;
            if (showdown2.helper.isString(options.prefixHeaderId)) {
              prefix = options.prefixHeaderId;
            } else if (options.prefixHeaderId === true) {
              prefix = "section-";
            } else {
              prefix = "";
            }
            if (!options.rawPrefixHeaderId) {
              title = prefix + title;
            }
            if (options.ghCompatibleHeaderId) {
              title = title.replace(/ /g, "-").replace(/&amp;/g, "").replace(/T/g, "").replace(/D/g, "").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g, "").toLowerCase();
            } else if (options.rawHeaderId) {
              title = title.replace(/ /g, "-").replace(/&amp;/g, "&").replace(/T/g, "\xA8").replace(/D/g, "$").replace(/["']/g, "-").toLowerCase();
            } else {
              title = title.replace(/[^\w]/g, "").toLowerCase();
            }
            if (options.rawPrefixHeaderId) {
              title = prefix + title;
            }
            if (globals.hashLinkCounts[title]) {
              title = title + "-" + globals.hashLinkCounts[title]++;
            } else {
              globals.hashLinkCounts[title] = 1;
            }
            return title;
          }
          text = globals.converter._dispatch("headers.after", text, options, globals);
          return text;
        });
        showdown2.subParser("horizontalRule", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("horizontalRule.before", text, options, globals);
          var key2 = showdown2.subParser("hashBlock")("<hr />", options, globals);
          text = text.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm, key2);
          text = text.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm, key2);
          text = text.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm, key2);
          text = globals.converter._dispatch("horizontalRule.after", text, options, globals);
          return text;
        });
        showdown2.subParser("images", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("images.before", text, options, globals);
          var inlineRegExp = /!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g, crazyRegExp = /!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g, base64RegExp = /!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g, referenceRegExp = /!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g, refShortcutRegExp = /!\[([^\[\]]+)]()()()()()/g;
          function writeImageTagBase64(wholeMatch, altText, linkId, url, width, height, m5, title) {
            url = url.replace(/\s/g, "");
            return writeImageTag(wholeMatch, altText, linkId, url, width, height, m5, title);
          }
          function writeImageTag(wholeMatch, altText, linkId, url, width, height, m5, title) {
            var gUrls = globals.gUrls, gTitles = globals.gTitles, gDims = globals.gDimensions;
            linkId = linkId.toLowerCase();
            if (!title) {
              title = "";
            }
            if (wholeMatch.search(/\(<?\s*>? ?(['"].*['"])?\)$/m) > -1) {
              url = "";
            } else if (url === "" || url === null) {
              if (linkId === "" || linkId === null) {
                linkId = altText.toLowerCase().replace(/ ?\n/g, " ");
              }
              url = "#" + linkId;
              if (!showdown2.helper.isUndefined(gUrls[linkId])) {
                url = gUrls[linkId];
                if (!showdown2.helper.isUndefined(gTitles[linkId])) {
                  title = gTitles[linkId];
                }
                if (!showdown2.helper.isUndefined(gDims[linkId])) {
                  width = gDims[linkId].width;
                  height = gDims[linkId].height;
                }
              } else {
                return wholeMatch;
              }
            }
            altText = altText.replace(/"/g, "&quot;").replace(showdown2.helper.regexes.asteriskDashAndColon, showdown2.helper.escapeCharactersCallback);
            url = url.replace(showdown2.helper.regexes.asteriskDashAndColon, showdown2.helper.escapeCharactersCallback);
            var result = '<img src="' + url + '" alt="' + altText + '"';
            if (title && showdown2.helper.isString(title)) {
              title = title.replace(/"/g, "&quot;").replace(showdown2.helper.regexes.asteriskDashAndColon, showdown2.helper.escapeCharactersCallback);
              result += ' title="' + title + '"';
            }
            if (width && height) {
              width = width === "*" ? "auto" : width;
              height = height === "*" ? "auto" : height;
              result += ' width="' + width + '"';
              result += ' height="' + height + '"';
            }
            result += " />";
            return result;
          }
          text = text.replace(referenceRegExp, writeImageTag);
          text = text.replace(base64RegExp, writeImageTagBase64);
          text = text.replace(crazyRegExp, writeImageTag);
          text = text.replace(inlineRegExp, writeImageTag);
          text = text.replace(refShortcutRegExp, writeImageTag);
          text = globals.converter._dispatch("images.after", text, options, globals);
          return text;
        });
        showdown2.subParser("italicsAndBold", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("italicsAndBold.before", text, options, globals);
          function parseInside(txt2, left, right) {
            return left + txt2 + right;
          }
          if (options.literalMidWordUnderscores) {
            text = text.replace(/\b___(\S[\s\S]*?)___\b/g, function(wm, txt2) {
              return parseInside(txt2, "<strong><em>", "</em></strong>");
            });
            text = text.replace(/\b__(\S[\s\S]*?)__\b/g, function(wm, txt2) {
              return parseInside(txt2, "<strong>", "</strong>");
            });
            text = text.replace(/\b_(\S[\s\S]*?)_\b/g, function(wm, txt2) {
              return parseInside(txt2, "<em>", "</em>");
            });
          } else {
            text = text.replace(/___(\S[\s\S]*?)___/g, function(wm, m2) {
              return /\S$/.test(m2) ? parseInside(m2, "<strong><em>", "</em></strong>") : wm;
            });
            text = text.replace(/__(\S[\s\S]*?)__/g, function(wm, m2) {
              return /\S$/.test(m2) ? parseInside(m2, "<strong>", "</strong>") : wm;
            });
            text = text.replace(/_([^\s_][\s\S]*?)_/g, function(wm, m2) {
              return /\S$/.test(m2) ? parseInside(m2, "<em>", "</em>") : wm;
            });
          }
          if (options.literalMidWordAsterisks) {
            text = text.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g, function(wm, lead, txt2) {
              return parseInside(txt2, lead + "<strong><em>", "</em></strong>");
            });
            text = text.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g, function(wm, lead, txt2) {
              return parseInside(txt2, lead + "<strong>", "</strong>");
            });
            text = text.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g, function(wm, lead, txt2) {
              return parseInside(txt2, lead + "<em>", "</em>");
            });
          } else {
            text = text.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g, function(wm, m2) {
              return /\S$/.test(m2) ? parseInside(m2, "<strong><em>", "</em></strong>") : wm;
            });
            text = text.replace(/\*\*(\S[\s\S]*?)\*\*/g, function(wm, m2) {
              return /\S$/.test(m2) ? parseInside(m2, "<strong>", "</strong>") : wm;
            });
            text = text.replace(/\*([^\s*][\s\S]*?)\*/g, function(wm, m2) {
              return /\S$/.test(m2) ? parseInside(m2, "<em>", "</em>") : wm;
            });
          }
          text = globals.converter._dispatch("italicsAndBold.after", text, options, globals);
          return text;
        });
        showdown2.subParser("lists", function(text, options, globals) {
          "use strict";
          function processListItems(listStr, trimTrailing) {
            globals.gListLevel++;
            listStr = listStr.replace(/\n{2,}$/, "\n");
            listStr += "\xA80";
            var rgx = /(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0| {0,3}([*+-]|\d+[.])[ \t]+))/gm, isParagraphed = /\n[ \t]*\n(?!0)/.test(listStr);
            if (options.disableForced4SpacesIndentedSublists) {
              rgx = /(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(0|\2([*+-]|\d+[.])[ \t]+))/gm;
            }
            listStr = listStr.replace(rgx, function(wholeMatch, m1, m2, m3, m4, taskbtn, checked) {
              checked = checked && checked.trim() !== "";
              var item = showdown2.subParser("outdent")(m4, options, globals), bulletStyle = "";
              if (taskbtn && options.tasklists) {
                bulletStyle = ' class="task-list-item" style="list-style-type: none;"';
                item = item.replace(/^[ \t]*\[(x|X| )?]/m, function() {
                  var otp = '<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';
                  if (checked) {
                    otp += " checked";
                  }
                  otp += ">";
                  return otp;
                });
              }
              item = item.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g, function(wm2) {
                return "\xA8A" + wm2;
              });
              if (m1 || item.search(/\n{2,}/) > -1) {
                item = showdown2.subParser("githubCodeBlocks")(item, options, globals);
                item = showdown2.subParser("blockGamut")(item, options, globals);
              } else {
                item = showdown2.subParser("lists")(item, options, globals);
                item = item.replace(/\n$/, "");
                item = showdown2.subParser("hashHTMLBlocks")(item, options, globals);
                item = item.replace(/\n\n+/g, "\n\n");
                if (isParagraphed) {
                  item = showdown2.subParser("paragraphs")(item, options, globals);
                } else {
                  item = showdown2.subParser("spanGamut")(item, options, globals);
                }
              }
              item = item.replace("\xA8A", "");
              item = "<li" + bulletStyle + ">" + item + "</li>\n";
              return item;
            });
            listStr = listStr.replace(/0/g, "");
            globals.gListLevel--;
            if (trimTrailing) {
              listStr = listStr.replace(/\s+$/, "");
            }
            return listStr;
          }
          function styleStartNumber(list, listType) {
            if (listType === "ol") {
              var res = list.match(/^ *(\d+)\./);
              if (res && res[1] !== "1") {
                return ' start="' + res[1] + '"';
              }
            }
            return "";
          }
          function parseConsecutiveLists(list, listType, trimTrailing) {
            var olRgx = options.disableForced4SpacesIndentedSublists ? /^ ?\d+\.[ \t]/gm : /^ {0,3}\d+\.[ \t]/gm, ulRgx = options.disableForced4SpacesIndentedSublists ? /^ ?[*+-][ \t]/gm : /^ {0,3}[*+-][ \t]/gm, counterRxg = listType === "ul" ? olRgx : ulRgx, result = "";
            if (list.search(counterRxg) !== -1) {
              (function parseCL(txt2) {
                var pos = txt2.search(counterRxg), style2 = styleStartNumber(list, listType);
                if (pos !== -1) {
                  result += "\n\n<" + listType + style2 + ">\n" + processListItems(txt2.slice(0, pos), !!trimTrailing) + "</" + listType + ">\n";
                  listType = listType === "ul" ? "ol" : "ul";
                  counterRxg = listType === "ul" ? olRgx : ulRgx;
                  parseCL(txt2.slice(pos));
                } else {
                  result += "\n\n<" + listType + style2 + ">\n" + processListItems(txt2, !!trimTrailing) + "</" + listType + ">\n";
                }
              })(list);
            } else {
              var style = styleStartNumber(list, listType);
              result = "\n\n<" + listType + style + ">\n" + processListItems(list, !!trimTrailing) + "</" + listType + ">\n";
            }
            return result;
          }
          text = globals.converter._dispatch("lists.before", text, options, globals);
          text += "\xA80";
          if (globals.gListLevel) {
            text = text.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm, function(wholeMatch, list, m2) {
              var listType = m2.search(/[*+-]/g) > -1 ? "ul" : "ol";
              return parseConsecutiveLists(list, listType, true);
            });
          } else {
            text = text.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm, function(wholeMatch, m1, list, m3) {
              var listType = m3.search(/[*+-]/g) > -1 ? "ul" : "ol";
              return parseConsecutiveLists(list, listType, false);
            });
          }
          text = text.replace(/0/, "");
          text = globals.converter._dispatch("lists.after", text, options, globals);
          return text;
        });
        showdown2.subParser("metadata", function(text, options, globals) {
          "use strict";
          if (!options.metadata) {
            return text;
          }
          text = globals.converter._dispatch("metadata.before", text, options, globals);
          function parseMetadataContents(content) {
            globals.metadata.raw = content;
            content = content.replace(/&/g, "&amp;").replace(/"/g, "&quot;");
            content = content.replace(/\n {4}/g, " ");
            content.replace(/^([\S ]+): +([\s\S]+?)$/gm, function(wm, key2, value) {
              globals.metadata.parsed[key2] = value;
              return "";
            });
          }
          text = text.replace(/^\s*+(\S*?)\n([\s\S]+?)\n+\n/, function(wholematch, format2, content) {
            parseMetadataContents(content);
            return "\xA8M";
          });
          text = text.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/, function(wholematch, format2, content) {
            if (format2) {
              globals.metadata.format = format2;
            }
            parseMetadataContents(content);
            return "\xA8M";
          });
          text = text.replace(/M/g, "");
          text = globals.converter._dispatch("metadata.after", text, options, globals);
          return text;
        });
        showdown2.subParser("outdent", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("outdent.before", text, options, globals);
          text = text.replace(/^(\t|[ ]{1,4})/gm, "\xA80");
          text = text.replace(/0/g, "");
          text = globals.converter._dispatch("outdent.after", text, options, globals);
          return text;
        });
        showdown2.subParser("paragraphs", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("paragraphs.before", text, options, globals);
          text = text.replace(/^\n+/g, "");
          text = text.replace(/\n+$/g, "");
          var grafs = text.split(/\n{2,}/g), grafsOut = [], end = grafs.length;
          for (var i2 = 0; i2 < end; i2++) {
            var str = grafs[i2];
            if (str.search(/(K|G)(\d+)\1/g) >= 0) {
              grafsOut.push(str);
            } else if (str.search(/\S/) >= 0) {
              str = showdown2.subParser("spanGamut")(str, options, globals);
              str = str.replace(/^([ \t]*)/g, "<p>");
              str += "</p>";
              grafsOut.push(str);
            }
          }
          end = grafsOut.length;
          for (i2 = 0; i2 < end; i2++) {
            var blockText = "", grafsOutIt = grafsOut[i2], codeFlag = false;
            while (/(K|G)(\d+)\1/.test(grafsOutIt)) {
              var delim = RegExp.$1, num = RegExp.$2;
              if (delim === "K") {
                blockText = globals.gHtmlBlocks[num];
              } else {
                if (codeFlag) {
                  blockText = showdown2.subParser("encodeCode")(globals.ghCodeBlocks[num].text, options, globals);
                } else {
                  blockText = globals.ghCodeBlocks[num].codeblock;
                }
              }
              blockText = blockText.replace(/\$/g, "$$$$");
              grafsOutIt = grafsOutIt.replace(/(\n\n)?(K|G)\d+\2(\n\n)?/, blockText);
              if (/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(grafsOutIt)) {
                codeFlag = true;
              }
            }
            grafsOut[i2] = grafsOutIt;
          }
          text = grafsOut.join("\n");
          text = text.replace(/^\n+/g, "");
          text = text.replace(/\n+$/g, "");
          return globals.converter._dispatch("paragraphs.after", text, options, globals);
        });
        showdown2.subParser("runExtension", function(ext, text, options, globals) {
          "use strict";
          if (ext.filter) {
            text = ext.filter(text, globals.converter, options);
          } else if (ext.regex) {
            var re = ext.regex;
            if (!(re instanceof RegExp)) {
              re = new RegExp(re, "g");
            }
            text = text.replace(re, ext.replace);
          }
          return text;
        });
        showdown2.subParser("spanGamut", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("spanGamut.before", text, options, globals);
          text = showdown2.subParser("codeSpans")(text, options, globals);
          text = showdown2.subParser("escapeSpecialCharsWithinTagAttributes")(text, options, globals);
          text = showdown2.subParser("encodeBackslashEscapes")(text, options, globals);
          text = showdown2.subParser("images")(text, options, globals);
          text = showdown2.subParser("anchors")(text, options, globals);
          text = showdown2.subParser("autoLinks")(text, options, globals);
          text = showdown2.subParser("simplifiedAutoLinks")(text, options, globals);
          text = showdown2.subParser("emoji")(text, options, globals);
          text = showdown2.subParser("underline")(text, options, globals);
          text = showdown2.subParser("italicsAndBold")(text, options, globals);
          text = showdown2.subParser("strikethrough")(text, options, globals);
          text = showdown2.subParser("ellipsis")(text, options, globals);
          text = showdown2.subParser("hashHTMLSpans")(text, options, globals);
          text = showdown2.subParser("encodeAmpsAndAngles")(text, options, globals);
          if (options.simpleLineBreaks) {
            if (!/\n\nK/.test(text)) {
              text = text.replace(/\n+/g, "<br />\n");
            }
          } else {
            text = text.replace(/  +\n/g, "<br />\n");
          }
          text = globals.converter._dispatch("spanGamut.after", text, options, globals);
          return text;
        });
        showdown2.subParser("strikethrough", function(text, options, globals) {
          "use strict";
          function parseInside(txt2) {
            if (options.simplifiedAutoLink) {
              txt2 = showdown2.subParser("simplifiedAutoLinks")(txt2, options, globals);
            }
            return "<del>" + txt2 + "</del>";
          }
          if (options.strikethrough) {
            text = globals.converter._dispatch("strikethrough.before", text, options, globals);
            text = text.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g, function(wm, txt2) {
              return parseInside(txt2);
            });
            text = globals.converter._dispatch("strikethrough.after", text, options, globals);
          }
          return text;
        });
        showdown2.subParser("stripLinkDefinitions", function(text, options, globals) {
          "use strict";
          var regex = /^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=0))/gm, base64Regex = /^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=0)|(?=\n\[))/gm;
          text += "\xA80";
          var replaceFunc = function(wholeMatch, linkId, url, width, height, blankLines, title) {
            linkId = linkId.toLowerCase();
            if (url.match(/^data:.+?\/.+?;base64,/)) {
              globals.gUrls[linkId] = url.replace(/\s/g, "");
            } else {
              globals.gUrls[linkId] = showdown2.subParser("encodeAmpsAndAngles")(url, options, globals);
            }
            if (blankLines) {
              return blankLines + title;
            } else {
              if (title) {
                globals.gTitles[linkId] = title.replace(/"|'/g, "&quot;");
              }
              if (options.parseImgDimensions && width && height) {
                globals.gDimensions[linkId] = {
                  width,
                  height
                };
              }
            }
            return "";
          };
          text = text.replace(base64Regex, replaceFunc);
          text = text.replace(regex, replaceFunc);
          text = text.replace(/0/, "");
          return text;
        });
        showdown2.subParser("tables", function(text, options, globals) {
          "use strict";
          if (!options.tables) {
            return text;
          }
          var tableRgx = /^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|0)/gm, singeColTblRgx = /^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|0)/gm;
          function parseStyles(sLine) {
            if (/^:[ \t]*--*$/.test(sLine)) {
              return ' style="text-align:left;"';
            } else if (/^--*[ \t]*:[ \t]*$/.test(sLine)) {
              return ' style="text-align:right;"';
            } else if (/^:[ \t]*--*[ \t]*:$/.test(sLine)) {
              return ' style="text-align:center;"';
            } else {
              return "";
            }
          }
          function parseHeaders(header, style) {
            var id = "";
            header = header.trim();
            if (options.tablesHeaderId || options.tableHeaderId) {
              id = ' id="' + header.replace(/ /g, "_").toLowerCase() + '"';
            }
            header = showdown2.subParser("spanGamut")(header, options, globals);
            return "<th" + id + style + ">" + header + "</th>\n";
          }
          function parseCells(cell, style) {
            var subText = showdown2.subParser("spanGamut")(cell, options, globals);
            return "<td" + style + ">" + subText + "</td>\n";
          }
          function buildTable(headers, cells) {
            var tb = "<table>\n<thead>\n<tr>\n", tblLgn = headers.length;
            for (var i2 = 0; i2 < tblLgn; ++i2) {
              tb += headers[i2];
            }
            tb += "</tr>\n</thead>\n<tbody>\n";
            for (i2 = 0; i2 < cells.length; ++i2) {
              tb += "<tr>\n";
              for (var ii = 0; ii < tblLgn; ++ii) {
                tb += cells[i2][ii];
              }
              tb += "</tr>\n";
            }
            tb += "</tbody>\n</table>\n";
            return tb;
          }
          function parseTable(rawTable) {
            var i2, tableLines = rawTable.split("\n");
            for (i2 = 0; i2 < tableLines.length; ++i2) {
              if (/^ {0,3}\|/.test(tableLines[i2])) {
                tableLines[i2] = tableLines[i2].replace(/^ {0,3}\|/, "");
              }
              if (/\|[ \t]*$/.test(tableLines[i2])) {
                tableLines[i2] = tableLines[i2].replace(/\|[ \t]*$/, "");
              }
              tableLines[i2] = showdown2.subParser("codeSpans")(tableLines[i2], options, globals);
            }
            var rawHeaders = tableLines[0].split("|").map(function(s2) {
              return s2.trim();
            }), rawStyles = tableLines[1].split("|").map(function(s2) {
              return s2.trim();
            }), rawCells = [], headers = [], styles = [], cells = [];
            tableLines.shift();
            tableLines.shift();
            for (i2 = 0; i2 < tableLines.length; ++i2) {
              if (tableLines[i2].trim() === "") {
                continue;
              }
              rawCells.push(tableLines[i2].split("|").map(function(s2) {
                return s2.trim();
              }));
            }
            if (rawHeaders.length < rawStyles.length) {
              return rawTable;
            }
            for (i2 = 0; i2 < rawStyles.length; ++i2) {
              styles.push(parseStyles(rawStyles[i2]));
            }
            for (i2 = 0; i2 < rawHeaders.length; ++i2) {
              if (showdown2.helper.isUndefined(styles[i2])) {
                styles[i2] = "";
              }
              headers.push(parseHeaders(rawHeaders[i2], styles[i2]));
            }
            for (i2 = 0; i2 < rawCells.length; ++i2) {
              var row = [];
              for (var ii = 0; ii < headers.length; ++ii) {
                if (showdown2.helper.isUndefined(rawCells[i2][ii])) {
                }
                row.push(parseCells(rawCells[i2][ii], styles[ii]));
              }
              cells.push(row);
            }
            return buildTable(headers, cells);
          }
          text = globals.converter._dispatch("tables.before", text, options, globals);
          text = text.replace(/\\(\|)/g, showdown2.helper.escapeCharactersCallback);
          text = text.replace(tableRgx, parseTable);
          text = text.replace(singeColTblRgx, parseTable);
          text = globals.converter._dispatch("tables.after", text, options, globals);
          return text;
        });
        showdown2.subParser("underline", function(text, options, globals) {
          "use strict";
          if (!options.underline) {
            return text;
          }
          text = globals.converter._dispatch("underline.before", text, options, globals);
          if (options.literalMidWordUnderscores) {
            text = text.replace(/\b___(\S[\s\S]*?)___\b/g, function(wm, txt2) {
              return "<u>" + txt2 + "</u>";
            });
            text = text.replace(/\b__(\S[\s\S]*?)__\b/g, function(wm, txt2) {
              return "<u>" + txt2 + "</u>";
            });
          } else {
            text = text.replace(/___(\S[\s\S]*?)___/g, function(wm, m2) {
              return /\S$/.test(m2) ? "<u>" + m2 + "</u>" : wm;
            });
            text = text.replace(/__(\S[\s\S]*?)__/g, function(wm, m2) {
              return /\S$/.test(m2) ? "<u>" + m2 + "</u>" : wm;
            });
          }
          text = text.replace(/(_)/g, showdown2.helper.escapeCharactersCallback);
          text = globals.converter._dispatch("underline.after", text, options, globals);
          return text;
        });
        showdown2.subParser("unescapeSpecialChars", function(text, options, globals) {
          "use strict";
          text = globals.converter._dispatch("unescapeSpecialChars.before", text, options, globals);
          text = text.replace(/E(\d+)E/g, function(wholeMatch, m1) {
            var charCodeToReplace = parseInt(m1);
            return String.fromCharCode(charCodeToReplace);
          });
          text = globals.converter._dispatch("unescapeSpecialChars.after", text, options, globals);
          return text;
        });
        showdown2.subParser("makeMarkdown.blockquote", function(node, globals) {
          "use strict";
          var txt2 = "";
          if (node.hasChildNodes()) {
            var children = node.childNodes, childrenLength = children.length;
            for (var i2 = 0; i2 < childrenLength; ++i2) {
              var innerTxt = showdown2.subParser("makeMarkdown.node")(children[i2], globals);
              if (innerTxt === "") {
                continue;
              }
              txt2 += innerTxt;
            }
          }
          txt2 = txt2.trim();
          txt2 = "> " + txt2.split("\n").join("\n> ");
          return txt2;
        });
        showdown2.subParser("makeMarkdown.codeBlock", function(node, globals) {
          "use strict";
          var lang = node.getAttribute("language"), num = node.getAttribute("precodenum");
          return "```" + lang + "\n" + globals.preList[num] + "\n```";
        });
        showdown2.subParser("makeMarkdown.codeSpan", function(node) {
          "use strict";
          return "`" + node.innerHTML + "`";
        });
        showdown2.subParser("makeMarkdown.emphasis", function(node, globals) {
          "use strict";
          var txt2 = "";
          if (node.hasChildNodes()) {
            txt2 += "*";
            var children = node.childNodes, childrenLength = children.length;
            for (var i2 = 0; i2 < childrenLength; ++i2) {
              txt2 += showdown2.subParser("makeMarkdown.node")(children[i2], globals);
            }
            txt2 += "*";
          }
          return txt2;
        });
        showdown2.subParser("makeMarkdown.header", function(node, globals, headerLevel) {
          "use strict";
          var headerMark = new Array(headerLevel + 1).join("#"), txt2 = "";
          if (node.hasChildNodes()) {
            txt2 = headerMark + " ";
            var children = node.childNodes, childrenLength = children.length;
            for (var i2 = 0; i2 < childrenLength; ++i2) {
              txt2 += showdown2.subParser("makeMarkdown.node")(children[i2], globals);
            }
          }
          return txt2;
        });
        showdown2.subParser("makeMarkdown.hr", function() {
          "use strict";
          return "---";
        });
        showdown2.subParser("makeMarkdown.image", function(node) {
          "use strict";
          var txt2 = "";
          if (node.hasAttribute("src")) {
            txt2 += "![" + node.getAttribute("alt") + "](";
            txt2 += "<" + node.getAttribute("src") + ">";
            if (node.hasAttribute("width") && node.hasAttribute("height")) {
              txt2 += " =" + node.getAttribute("width") + "x" + node.getAttribute("height");
            }
            if (node.hasAttribute("title")) {
              txt2 += ' "' + node.getAttribute("title") + '"';
            }
            txt2 += ")";
          }
          return txt2;
        });
        showdown2.subParser("makeMarkdown.links", function(node, globals) {
          "use strict";
          var txt2 = "";
          if (node.hasChildNodes() && node.hasAttribute("href")) {
            var children = node.childNodes, childrenLength = children.length;
            txt2 = "[";
            for (var i2 = 0; i2 < childrenLength; ++i2) {
              txt2 += showdown2.subParser("makeMarkdown.node")(children[i2], globals);
            }
            txt2 += "](";
            txt2 += "<" + node.getAttribute("href") + ">";
            if (node.hasAttribute("title")) {
              txt2 += ' "' + node.getAttribute("title") + '"';
            }
            txt2 += ")";
          }
          return txt2;
        });
        showdown2.subParser("makeMarkdown.list", function(node, globals, type) {
          "use strict";
          var txt2 = "";
          if (!node.hasChildNodes()) {
            return "";
          }
          var listItems = node.childNodes, listItemsLenght = listItems.length, listNum = node.getAttribute("start") || 1;
          for (var i2 = 0; i2 < listItemsLenght; ++i2) {
            if (typeof listItems[i2].tagName === "undefined" || listItems[i2].tagName.toLowerCase() !== "li") {
              continue;
            }
            var bullet = "";
            if (type === "ol") {
              bullet = listNum.toString() + ". ";
            } else {
              bullet = "- ";
            }
            txt2 += bullet + showdown2.subParser("makeMarkdown.listItem")(listItems[i2], globals);
            ++listNum;
          }
          txt2 += "\n<!-- -->\n";
          return txt2.trim();
        });
        showdown2.subParser("makeMarkdown.listItem", function(node, globals) {
          "use strict";
          var listItemTxt = "";
          var children = node.childNodes, childrenLenght = children.length;
          for (var i2 = 0; i2 < childrenLenght; ++i2) {
            listItemTxt += showdown2.subParser("makeMarkdown.node")(children[i2], globals);
          }
          if (!/\n$/.test(listItemTxt)) {
            listItemTxt += "\n";
          } else {
            listItemTxt = listItemTxt.split("\n").join("\n    ").replace(/^ {4}$/gm, "").replace(/\n\n+/g, "\n\n");
          }
          return listItemTxt;
        });
        showdown2.subParser("makeMarkdown.node", function(node, globals, spansOnly) {
          "use strict";
          spansOnly = spansOnly || false;
          var txt2 = "";
          if (node.nodeType === 3) {
            return showdown2.subParser("makeMarkdown.txt")(node, globals);
          }
          if (node.nodeType === 8) {
            return "<!--" + node.data + "-->\n\n";
          }
          if (node.nodeType !== 1) {
            return "";
          }
          var tagName = node.tagName.toLowerCase();
          switch (tagName) {
            case "h1":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.header")(node, globals, 1) + "\n\n";
              }
              break;
            case "h2":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.header")(node, globals, 2) + "\n\n";
              }
              break;
            case "h3":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.header")(node, globals, 3) + "\n\n";
              }
              break;
            case "h4":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.header")(node, globals, 4) + "\n\n";
              }
              break;
            case "h5":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.header")(node, globals, 5) + "\n\n";
              }
              break;
            case "h6":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.header")(node, globals, 6) + "\n\n";
              }
              break;
            case "p":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.paragraph")(node, globals) + "\n\n";
              }
              break;
            case "blockquote":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.blockquote")(node, globals) + "\n\n";
              }
              break;
            case "hr":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.hr")(node, globals) + "\n\n";
              }
              break;
            case "ol":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.list")(node, globals, "ol") + "\n\n";
              }
              break;
            case "ul":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.list")(node, globals, "ul") + "\n\n";
              }
              break;
            case "precode":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.codeBlock")(node, globals) + "\n\n";
              }
              break;
            case "pre":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.pre")(node, globals) + "\n\n";
              }
              break;
            case "table":
              if (!spansOnly) {
                txt2 = showdown2.subParser("makeMarkdown.table")(node, globals) + "\n\n";
              }
              break;
            case "code":
              txt2 = showdown2.subParser("makeMarkdown.codeSpan")(node, globals);
              break;
            case "em":
            case "i":
              txt2 = showdown2.subParser("makeMarkdown.emphasis")(node, globals);
              break;
            case "strong":
            case "b":
              txt2 = showdown2.subParser("makeMarkdown.strong")(node, globals);
              break;
            case "del":
              txt2 = showdown2.subParser("makeMarkdown.strikethrough")(node, globals);
              break;
            case "a":
              txt2 = showdown2.subParser("makeMarkdown.links")(node, globals);
              break;
            case "img":
              txt2 = showdown2.subParser("makeMarkdown.image")(node, globals);
              break;
            default:
              txt2 = node.outerHTML + "\n\n";
          }
          return txt2;
        });
        showdown2.subParser("makeMarkdown.paragraph", function(node, globals) {
          "use strict";
          var txt2 = "";
          if (node.hasChildNodes()) {
            var children = node.childNodes, childrenLength = children.length;
            for (var i2 = 0; i2 < childrenLength; ++i2) {
              txt2 += showdown2.subParser("makeMarkdown.node")(children[i2], globals);
            }
          }
          txt2 = txt2.trim();
          return txt2;
        });
        showdown2.subParser("makeMarkdown.pre", function(node, globals) {
          "use strict";
          var num = node.getAttribute("prenum");
          return "<pre>" + globals.preList[num] + "</pre>";
        });
        showdown2.subParser("makeMarkdown.strikethrough", function(node, globals) {
          "use strict";
          var txt2 = "";
          if (node.hasChildNodes()) {
            txt2 += "~~";
            var children = node.childNodes, childrenLength = children.length;
            for (var i2 = 0; i2 < childrenLength; ++i2) {
              txt2 += showdown2.subParser("makeMarkdown.node")(children[i2], globals);
            }
            txt2 += "~~";
          }
          return txt2;
        });
        showdown2.subParser("makeMarkdown.strong", function(node, globals) {
          "use strict";
          var txt2 = "";
          if (node.hasChildNodes()) {
            txt2 += "**";
            var children = node.childNodes, childrenLength = children.length;
            for (var i2 = 0; i2 < childrenLength; ++i2) {
              txt2 += showdown2.subParser("makeMarkdown.node")(children[i2], globals);
            }
            txt2 += "**";
          }
          return txt2;
        });
        showdown2.subParser("makeMarkdown.table", function(node, globals) {
          "use strict";
          var txt2 = "", tableArray = [[], []], headings = node.querySelectorAll("thead>tr>th"), rows = node.querySelectorAll("tbody>tr"), i2, ii;
          for (i2 = 0; i2 < headings.length; ++i2) {
            var headContent = showdown2.subParser("makeMarkdown.tableCell")(headings[i2], globals), allign = "---";
            if (headings[i2].hasAttribute("style")) {
              var style = headings[i2].getAttribute("style").toLowerCase().replace(/\s/g, "");
              switch (style) {
                case "text-align:left;":
                  allign = ":---";
                  break;
                case "text-align:right;":
                  allign = "---:";
                  break;
                case "text-align:center;":
                  allign = ":---:";
                  break;
              }
            }
            tableArray[0][i2] = headContent.trim();
            tableArray[1][i2] = allign;
          }
          for (i2 = 0; i2 < rows.length; ++i2) {
            var r2 = tableArray.push([]) - 1, cols = rows[i2].getElementsByTagName("td");
            for (ii = 0; ii < headings.length; ++ii) {
              var cellContent = " ";
              if (typeof cols[ii] !== "undefined") {
                cellContent = showdown2.subParser("makeMarkdown.tableCell")(cols[ii], globals);
              }
              tableArray[r2].push(cellContent);
            }
          }
          var cellSpacesCount = 3;
          for (i2 = 0; i2 < tableArray.length; ++i2) {
            for (ii = 0; ii < tableArray[i2].length; ++ii) {
              var strLen = tableArray[i2][ii].length;
              if (strLen > cellSpacesCount) {
                cellSpacesCount = strLen;
              }
            }
          }
          for (i2 = 0; i2 < tableArray.length; ++i2) {
            for (ii = 0; ii < tableArray[i2].length; ++ii) {
              if (i2 === 1) {
                if (tableArray[i2][ii].slice(-1) === ":") {
                  tableArray[i2][ii] = showdown2.helper.padEnd(tableArray[i2][ii].slice(-1), cellSpacesCount - 1, "-") + ":";
                } else {
                  tableArray[i2][ii] = showdown2.helper.padEnd(tableArray[i2][ii], cellSpacesCount, "-");
                }
              } else {
                tableArray[i2][ii] = showdown2.helper.padEnd(tableArray[i2][ii], cellSpacesCount);
              }
            }
            txt2 += "| " + tableArray[i2].join(" | ") + " |\n";
          }
          return txt2.trim();
        });
        showdown2.subParser("makeMarkdown.tableCell", function(node, globals) {
          "use strict";
          var txt2 = "";
          if (!node.hasChildNodes()) {
            return "";
          }
          var children = node.childNodes, childrenLength = children.length;
          for (var i2 = 0; i2 < childrenLength; ++i2) {
            txt2 += showdown2.subParser("makeMarkdown.node")(children[i2], globals, true);
          }
          return txt2.trim();
        });
        showdown2.subParser("makeMarkdown.txt", function(node) {
          "use strict";
          var txt2 = node.nodeValue;
          txt2 = txt2.replace(/ +/g, " ");
          txt2 = txt2.replace(/NBSP;/g, " ");
          txt2 = showdown2.helper.unescapeHTMLEntities(txt2);
          txt2 = txt2.replace(/([*_~|`])/g, "\\$1");
          txt2 = txt2.replace(/^(\s*)>/g, "\\$1>");
          txt2 = txt2.replace(/^#/gm, "\\#");
          txt2 = txt2.replace(/^(\s*)([-=]{3,})(\s*)$/, "$1\\$2$3");
          txt2 = txt2.replace(/^( {0,3}\d+)\./gm, "$1\\.");
          txt2 = txt2.replace(/^( {0,3})([+-])/gm, "$1\\$2");
          txt2 = txt2.replace(/]([\s]*)\(/g, "\\]$1\\(");
          txt2 = txt2.replace(/^ {0,3}\[([\S \t]*?)]:/gm, "\\[$1]:");
          return txt2;
        });
        var root = this;
        if (typeof define === "function" && define.amd) {
          define(function() {
            "use strict";
            return showdown2;
          });
        } else if (typeof module2 !== "undefined" && module2.exports) {
          module2.exports = showdown2;
        } else {
          root.showdown = showdown2;
        }
      }).call(exports2);
    }
  });

  // node_modules/cropperjs/dist/cropper.js
  var require_cropper = __commonJS({
    "node_modules/cropperjs/dist/cropper.js"(exports2, module2) {
      (function(global2, factory) {
        typeof exports2 === "object" && typeof module2 !== "undefined" ? module2.exports = factory() : typeof define === "function" && define.amd ? define(factory) : (global2 = typeof globalThis !== "undefined" ? globalThis : global2 || self, global2.Cropper = factory());
      })(exports2, function() {
        "use strict";
        function ownKeys(object, enumerableOnly) {
          var keys = Object.keys(object);
          if (Object.getOwnPropertySymbols) {
            var symbols = Object.getOwnPropertySymbols(object);
            if (enumerableOnly) {
              symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
              });
            }
            keys.push.apply(keys, symbols);
          }
          return keys;
        }
        function _objectSpread2(target) {
          for (var i2 = 1; i2 < arguments.length; i2++) {
            var source = arguments[i2] != null ? arguments[i2] : {};
            if (i2 % 2) {
              ownKeys(Object(source), true).forEach(function(key2) {
                _defineProperty(target, key2, source[key2]);
              });
            } else if (Object.getOwnPropertyDescriptors) {
              Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));
            } else {
              ownKeys(Object(source)).forEach(function(key2) {
                Object.defineProperty(target, key2, Object.getOwnPropertyDescriptor(source, key2));
              });
            }
          }
          return target;
        }
        function _typeof(obj) {
          "@babel/helpers - typeof";
          if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
            _typeof = function(obj2) {
              return typeof obj2;
            };
          } else {
            _typeof = function(obj2) {
              return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
            };
          }
          return _typeof(obj);
        }
        function _classCallCheck(instance, Constructor) {
          if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
          }
        }
        function _defineProperties(target, props) {
          for (var i2 = 0; i2 < props.length; i2++) {
            var descriptor = props[i2];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor)
              descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
          }
        }
        function _createClass(Constructor, protoProps, staticProps) {
          if (protoProps)
            _defineProperties(Constructor.prototype, protoProps);
          if (staticProps)
            _defineProperties(Constructor, staticProps);
          return Constructor;
        }
        function _defineProperty(obj, key2, value) {
          if (key2 in obj) {
            Object.defineProperty(obj, key2, {
              value,
              enumerable: true,
              configurable: true,
              writable: true
            });
          } else {
            obj[key2] = value;
          }
          return obj;
        }
        function _toConsumableArray(arr) {
          return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
        }
        function _arrayWithoutHoles(arr) {
          if (Array.isArray(arr))
            return _arrayLikeToArray(arr);
        }
        function _iterableToArray(iter) {
          if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null)
            return Array.from(iter);
        }
        function _unsupportedIterableToArray(o2, minLen) {
          if (!o2)
            return;
          if (typeof o2 === "string")
            return _arrayLikeToArray(o2, minLen);
          var n2 = Object.prototype.toString.call(o2).slice(8, -1);
          if (n2 === "Object" && o2.constructor)
            n2 = o2.constructor.name;
          if (n2 === "Map" || n2 === "Set")
            return Array.from(o2);
          if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
            return _arrayLikeToArray(o2, minLen);
        }
        function _arrayLikeToArray(arr, len) {
          if (len == null || len > arr.length)
            len = arr.length;
          for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++)
            arr2[i2] = arr[i2];
          return arr2;
        }
        function _nonIterableSpread() {
          throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        var IS_BROWSER = typeof window !== "undefined" && typeof window.document !== "undefined";
        var WINDOW = IS_BROWSER ? window : {};
        var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? "ontouchstart" in WINDOW.document.documentElement : false;
        var HAS_POINTER_EVENT = IS_BROWSER ? "PointerEvent" in WINDOW : false;
        var NAMESPACE = "cropper";
        var ACTION_ALL = "all";
        var ACTION_CROP = "crop";
        var ACTION_MOVE = "move";
        var ACTION_ZOOM = "zoom";
        var ACTION_EAST = "e";
        var ACTION_WEST = "w";
        var ACTION_SOUTH = "s";
        var ACTION_NORTH = "n";
        var ACTION_NORTH_EAST = "ne";
        var ACTION_NORTH_WEST = "nw";
        var ACTION_SOUTH_EAST = "se";
        var ACTION_SOUTH_WEST = "sw";
        var CLASS_CROP = "".concat(NAMESPACE, "-crop");
        var CLASS_DISABLED = "".concat(NAMESPACE, "-disabled");
        var CLASS_HIDDEN = "".concat(NAMESPACE, "-hidden");
        var CLASS_HIDE = "".concat(NAMESPACE, "-hide");
        var CLASS_INVISIBLE = "".concat(NAMESPACE, "-invisible");
        var CLASS_MODAL = "".concat(NAMESPACE, "-modal");
        var CLASS_MOVE = "".concat(NAMESPACE, "-move");
        var DATA_ACTION = "".concat(NAMESPACE, "Action");
        var DATA_PREVIEW = "".concat(NAMESPACE, "Preview");
        var DRAG_MODE_CROP = "crop";
        var DRAG_MODE_MOVE = "move";
        var DRAG_MODE_NONE = "none";
        var EVENT_CROP = "crop";
        var EVENT_CROP_END = "cropend";
        var EVENT_CROP_MOVE = "cropmove";
        var EVENT_CROP_START = "cropstart";
        var EVENT_DBLCLICK = "dblclick";
        var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? "touchstart" : "mousedown";
        var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? "touchmove" : "mousemove";
        var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? "touchend touchcancel" : "mouseup";
        var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? "pointerdown" : EVENT_TOUCH_START;
        var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? "pointermove" : EVENT_TOUCH_MOVE;
        var EVENT_POINTER_UP = HAS_POINTER_EVENT ? "pointerup pointercancel" : EVENT_TOUCH_END;
        var EVENT_READY = "ready";
        var EVENT_RESIZE = "resize";
        var EVENT_WHEEL = "wheel";
        var EVENT_ZOOM = "zoom";
        var MIME_TYPE_JPEG = "image/jpeg";
        var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;
        var REGEXP_DATA_URL = /^data:/;
        var REGEXP_DATA_URL_JPEG = /^data:image\/jpeg;base64,/;
        var REGEXP_TAG_NAME = /^img|canvas$/i;
        var MIN_CONTAINER_WIDTH = 200;
        var MIN_CONTAINER_HEIGHT = 100;
        var DEFAULTS = {
          viewMode: 0,
          dragMode: DRAG_MODE_CROP,
          initialAspectRatio: NaN,
          aspectRatio: NaN,
          data: null,
          preview: "",
          responsive: true,
          restore: true,
          checkCrossOrigin: true,
          checkOrientation: true,
          modal: true,
          guides: true,
          center: true,
          highlight: true,
          background: true,
          autoCrop: true,
          autoCropArea: 0.8,
          movable: true,
          rotatable: true,
          scalable: true,
          zoomable: true,
          zoomOnTouch: true,
          zoomOnWheel: true,
          wheelZoomRatio: 0.1,
          cropBoxMovable: true,
          cropBoxResizable: true,
          toggleDragModeOnDblclick: true,
          minCanvasWidth: 0,
          minCanvasHeight: 0,
          minCropBoxWidth: 0,
          minCropBoxHeight: 0,
          minContainerWidth: MIN_CONTAINER_WIDTH,
          minContainerHeight: MIN_CONTAINER_HEIGHT,
          ready: null,
          cropstart: null,
          cropmove: null,
          cropend: null,
          crop: null,
          zoom: null
        };
        var TEMPLATE = '<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>';
        var isNaN2 = Number.isNaN || WINDOW.isNaN;
        function isNumber(value) {
          return typeof value === "number" && !isNaN2(value);
        }
        var isPositiveNumber = function isPositiveNumber2(value) {
          return value > 0 && value < Infinity;
        };
        function isUndefined(value) {
          return typeof value === "undefined";
        }
        function isObject(value) {
          return _typeof(value) === "object" && value !== null;
        }
        var hasOwnProperty = Object.prototype.hasOwnProperty;
        function isPlainObject(value) {
          if (!isObject(value)) {
            return false;
          }
          try {
            var _constructor = value.constructor;
            var prototype = _constructor.prototype;
            return _constructor && prototype && hasOwnProperty.call(prototype, "isPrototypeOf");
          } catch (error) {
            return false;
          }
        }
        function isFunction(value) {
          return typeof value === "function";
        }
        var slice = Array.prototype.slice;
        function toArray(value) {
          return Array.from ? Array.from(value) : slice.call(value);
        }
        function forEach(data, callback) {
          if (data && isFunction(callback)) {
            if (Array.isArray(data) || isNumber(data.length)) {
              toArray(data).forEach(function(value, key2) {
                callback.call(data, value, key2, data);
              });
            } else if (isObject(data)) {
              Object.keys(data).forEach(function(key2) {
                callback.call(data, data[key2], key2, data);
              });
            }
          }
          return data;
        }
        var assign = Object.assign || function assign2(target) {
          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            args[_key - 1] = arguments[_key];
          }
          if (isObject(target) && args.length > 0) {
            args.forEach(function(arg) {
              if (isObject(arg)) {
                Object.keys(arg).forEach(function(key2) {
                  target[key2] = arg[key2];
                });
              }
            });
          }
          return target;
        };
        var REGEXP_DECIMALS = /\.\d*(?:0|9){12}\d*$/;
        function normalizeDecimalNumber(value) {
          var times = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1e11;
          return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;
        }
        var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;
        function setStyle(element, styles) {
          var style = element.style;
          forEach(styles, function(value, property) {
            if (REGEXP_SUFFIX.test(property) && isNumber(value)) {
              value = "".concat(value, "px");
            }
            style[property] = value;
          });
        }
        function hasClass(element, value) {
          return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;
        }
        function addClass(element, value) {
          if (!value) {
            return;
          }
          if (isNumber(element.length)) {
            forEach(element, function(elem) {
              addClass(elem, value);
            });
            return;
          }
          if (element.classList) {
            element.classList.add(value);
            return;
          }
          var className = element.className.trim();
          if (!className) {
            element.className = value;
          } else if (className.indexOf(value) < 0) {
            element.className = "".concat(className, " ").concat(value);
          }
        }
        function removeClass(element, value) {
          if (!value) {
            return;
          }
          if (isNumber(element.length)) {
            forEach(element, function(elem) {
              removeClass(elem, value);
            });
            return;
          }
          if (element.classList) {
            element.classList.remove(value);
            return;
          }
          if (element.className.indexOf(value) >= 0) {
            element.className = element.className.replace(value, "");
          }
        }
        function toggleClass(element, value, added) {
          if (!value) {
            return;
          }
          if (isNumber(element.length)) {
            forEach(element, function(elem) {
              toggleClass(elem, value, added);
            });
            return;
          }
          if (added) {
            addClass(element, value);
          } else {
            removeClass(element, value);
          }
        }
        var REGEXP_CAMEL_CASE = /([a-z\d])([A-Z])/g;
        function toParamCase(value) {
          return value.replace(REGEXP_CAMEL_CASE, "$1-$2").toLowerCase();
        }
        function getData(element, name2) {
          if (isObject(element[name2])) {
            return element[name2];
          }
          if (element.dataset) {
            return element.dataset[name2];
          }
          return element.getAttribute("data-".concat(toParamCase(name2)));
        }
        function setData(element, name2, data) {
          if (isObject(data)) {
            element[name2] = data;
          } else if (element.dataset) {
            element.dataset[name2] = data;
          } else {
            element.setAttribute("data-".concat(toParamCase(name2)), data);
          }
        }
        function removeData(element, name2) {
          if (isObject(element[name2])) {
            try {
              delete element[name2];
            } catch (error) {
              element[name2] = void 0;
            }
          } else if (element.dataset) {
            try {
              delete element.dataset[name2];
            } catch (error) {
              element.dataset[name2] = void 0;
            }
          } else {
            element.removeAttribute("data-".concat(toParamCase(name2)));
          }
        }
        var REGEXP_SPACES = /\s\s*/;
        var onceSupported = function() {
          var supported = false;
          if (IS_BROWSER) {
            var once = false;
            var listener = function listener2() {
            };
            var options = Object.defineProperty({}, "once", {
              get: function get() {
                supported = true;
                return once;
              },
              set: function set(value) {
                once = value;
              }
            });
            WINDOW.addEventListener("test", listener, options);
            WINDOW.removeEventListener("test", listener, options);
          }
          return supported;
        }();
        function removeListener(element, type, listener) {
          var options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
          var handler = listener;
          type.trim().split(REGEXP_SPACES).forEach(function(event2) {
            if (!onceSupported) {
              var listeners = element.listeners;
              if (listeners && listeners[event2] && listeners[event2][listener]) {
                handler = listeners[event2][listener];
                delete listeners[event2][listener];
                if (Object.keys(listeners[event2]).length === 0) {
                  delete listeners[event2];
                }
                if (Object.keys(listeners).length === 0) {
                  delete element.listeners;
                }
              }
            }
            element.removeEventListener(event2, handler, options);
          });
        }
        function addListener(element, type, listener) {
          var options = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
          var _handler = listener;
          type.trim().split(REGEXP_SPACES).forEach(function(event2) {
            if (options.once && !onceSupported) {
              var _element$listeners = element.listeners, listeners = _element$listeners === void 0 ? {} : _element$listeners;
              _handler = function handler() {
                delete listeners[event2][listener];
                element.removeEventListener(event2, _handler, options);
                for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
                  args[_key2] = arguments[_key2];
                }
                listener.apply(element, args);
              };
              if (!listeners[event2]) {
                listeners[event2] = {};
              }
              if (listeners[event2][listener]) {
                element.removeEventListener(event2, listeners[event2][listener], options);
              }
              listeners[event2][listener] = _handler;
              element.listeners = listeners;
            }
            element.addEventListener(event2, _handler, options);
          });
        }
        function dispatchEvent(element, type, data) {
          var event2;
          if (isFunction(Event) && isFunction(CustomEvent)) {
            event2 = new CustomEvent(type, {
              detail: data,
              bubbles: true,
              cancelable: true
            });
          } else {
            event2 = document.createEvent("CustomEvent");
            event2.initCustomEvent(type, true, true, data);
          }
          return element.dispatchEvent(event2);
        }
        function getOffset(element) {
          var box = element.getBoundingClientRect();
          return {
            left: box.left + (window.pageXOffset - document.documentElement.clientLeft),
            top: box.top + (window.pageYOffset - document.documentElement.clientTop)
          };
        }
        var location2 = WINDOW.location;
        var REGEXP_ORIGINS = /^(\w+:)\/\/([^:/?#]*):?(\d*)/i;
        function isCrossOriginURL(url) {
          var parts = url.match(REGEXP_ORIGINS);
          return parts !== null && (parts[1] !== location2.protocol || parts[2] !== location2.hostname || parts[3] !== location2.port);
        }
        function addTimestamp(url) {
          var timestamp = "timestamp=".concat(new Date().getTime());
          return url + (url.indexOf("?") === -1 ? "?" : "&") + timestamp;
        }
        function getTransforms(_ref) {
          var rotate = _ref.rotate, scaleX = _ref.scaleX, scaleY = _ref.scaleY, translateX = _ref.translateX, translateY = _ref.translateY;
          var values = [];
          if (isNumber(translateX) && translateX !== 0) {
            values.push("translateX(".concat(translateX, "px)"));
          }
          if (isNumber(translateY) && translateY !== 0) {
            values.push("translateY(".concat(translateY, "px)"));
          }
          if (isNumber(rotate) && rotate !== 0) {
            values.push("rotate(".concat(rotate, "deg)"));
          }
          if (isNumber(scaleX) && scaleX !== 1) {
            values.push("scaleX(".concat(scaleX, ")"));
          }
          if (isNumber(scaleY) && scaleY !== 1) {
            values.push("scaleY(".concat(scaleY, ")"));
          }
          var transform2 = values.length ? values.join(" ") : "none";
          return {
            WebkitTransform: transform2,
            msTransform: transform2,
            transform: transform2
          };
        }
        function getMaxZoomRatio(pointers) {
          var pointers2 = _objectSpread2({}, pointers);
          var maxRatio = 0;
          forEach(pointers, function(pointer, pointerId) {
            delete pointers2[pointerId];
            forEach(pointers2, function(pointer2) {
              var x1 = Math.abs(pointer.startX - pointer2.startX);
              var y1 = Math.abs(pointer.startY - pointer2.startY);
              var x2 = Math.abs(pointer.endX - pointer2.endX);
              var y2 = Math.abs(pointer.endY - pointer2.endY);
              var z1 = Math.sqrt(x1 * x1 + y1 * y1);
              var z2 = Math.sqrt(x2 * x2 + y2 * y2);
              var ratio = (z2 - z1) / z1;
              if (Math.abs(ratio) > Math.abs(maxRatio)) {
                maxRatio = ratio;
              }
            });
          });
          return maxRatio;
        }
        function getPointer(_ref2, endOnly) {
          var pageX = _ref2.pageX, pageY = _ref2.pageY;
          var end = {
            endX: pageX,
            endY: pageY
          };
          return endOnly ? end : _objectSpread2({
            startX: pageX,
            startY: pageY
          }, end);
        }
        function getPointersCenter(pointers) {
          var pageX = 0;
          var pageY = 0;
          var count = 0;
          forEach(pointers, function(_ref3) {
            var startX = _ref3.startX, startY = _ref3.startY;
            pageX += startX;
            pageY += startY;
            count += 1;
          });
          pageX /= count;
          pageY /= count;
          return {
            pageX,
            pageY
          };
        }
        function getAdjustedSizes(_ref4) {
          var aspectRatio = _ref4.aspectRatio, height = _ref4.height, width = _ref4.width;
          var type = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "contain";
          var isValidWidth = isPositiveNumber(width);
          var isValidHeight = isPositiveNumber(height);
          if (isValidWidth && isValidHeight) {
            var adjustedWidth = height * aspectRatio;
            if (type === "contain" && adjustedWidth > width || type === "cover" && adjustedWidth < width) {
              height = width / aspectRatio;
            } else {
              width = height * aspectRatio;
            }
          } else if (isValidWidth) {
            height = width / aspectRatio;
          } else if (isValidHeight) {
            width = height * aspectRatio;
          }
          return {
            width,
            height
          };
        }
        function getRotatedSizes(_ref5) {
          var width = _ref5.width, height = _ref5.height, degree = _ref5.degree;
          degree = Math.abs(degree) % 180;
          if (degree === 90) {
            return {
              width: height,
              height: width
            };
          }
          var arc = degree % 90 * Math.PI / 180;
          var sinArc = Math.sin(arc);
          var cosArc = Math.cos(arc);
          var newWidth = width * cosArc + height * sinArc;
          var newHeight = width * sinArc + height * cosArc;
          return degree > 90 ? {
            width: newHeight,
            height: newWidth
          } : {
            width: newWidth,
            height: newHeight
          };
        }
        function getSourceCanvas(image, _ref6, _ref7, _ref8) {
          var imageAspectRatio = _ref6.aspectRatio, imageNaturalWidth = _ref6.naturalWidth, imageNaturalHeight = _ref6.naturalHeight, _ref6$rotate = _ref6.rotate, rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate, _ref6$scaleX = _ref6.scaleX, scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX, _ref6$scaleY = _ref6.scaleY, scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;
          var aspectRatio = _ref7.aspectRatio, naturalWidth = _ref7.naturalWidth, naturalHeight = _ref7.naturalHeight;
          var _ref8$fillColor = _ref8.fillColor, fillColor = _ref8$fillColor === void 0 ? "transparent" : _ref8$fillColor, _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled, imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE, _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality, imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? "low" : _ref8$imageSmoothingQ, _ref8$maxWidth = _ref8.maxWidth, maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth, _ref8$maxHeight = _ref8.maxHeight, maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight, _ref8$minWidth = _ref8.minWidth, minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth, _ref8$minHeight = _ref8.minHeight, minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;
          var canvas = document.createElement("canvas");
          var context = canvas.getContext("2d");
          var maxSizes = getAdjustedSizes({
            aspectRatio,
            width: maxWidth,
            height: maxHeight
          });
          var minSizes = getAdjustedSizes({
            aspectRatio,
            width: minWidth,
            height: minHeight
          }, "cover");
          var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));
          var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight));
          var destMaxSizes = getAdjustedSizes({
            aspectRatio: imageAspectRatio,
            width: maxWidth,
            height: maxHeight
          });
          var destMinSizes = getAdjustedSizes({
            aspectRatio: imageAspectRatio,
            width: minWidth,
            height: minHeight
          }, "cover");
          var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));
          var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));
          var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];
          canvas.width = normalizeDecimalNumber(width);
          canvas.height = normalizeDecimalNumber(height);
          context.fillStyle = fillColor;
          context.fillRect(0, 0, width, height);
          context.save();
          context.translate(width / 2, height / 2);
          context.rotate(rotate * Math.PI / 180);
          context.scale(scaleX, scaleY);
          context.imageSmoothingEnabled = imageSmoothingEnabled;
          context.imageSmoothingQuality = imageSmoothingQuality;
          context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function(param) {
            return Math.floor(normalizeDecimalNumber(param));
          }))));
          context.restore();
          return canvas;
        }
        var fromCharCode = String.fromCharCode;
        function getStringFromCharCode(dataView, start, length) {
          var str = "";
          length += start;
          for (var i2 = start; i2 < length; i2 += 1) {
            str += fromCharCode(dataView.getUint8(i2));
          }
          return str;
        }
        var REGEXP_DATA_URL_HEAD = /^data:.*,/;
        function dataURLToArrayBuffer(dataURL) {
          var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, "");
          var binary = atob(base64);
          var arrayBuffer = new ArrayBuffer(binary.length);
          var uint8 = new Uint8Array(arrayBuffer);
          forEach(uint8, function(value, i2) {
            uint8[i2] = binary.charCodeAt(i2);
          });
          return arrayBuffer;
        }
        function arrayBufferToDataURL(arrayBuffer, mimeType) {
          var chunks = [];
          var chunkSize = 8192;
          var uint8 = new Uint8Array(arrayBuffer);
          while (uint8.length > 0) {
            chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));
            uint8 = uint8.subarray(chunkSize);
          }
          return "data:".concat(mimeType, ";base64,").concat(btoa(chunks.join("")));
        }
        function resetAndGetOrientation(arrayBuffer) {
          var dataView = new DataView(arrayBuffer);
          var orientation;
          try {
            var littleEndian;
            var app1Start;
            var ifdStart;
            if (dataView.getUint8(0) === 255 && dataView.getUint8(1) === 216) {
              var length = dataView.byteLength;
              var offset = 2;
              while (offset + 1 < length) {
                if (dataView.getUint8(offset) === 255 && dataView.getUint8(offset + 1) === 225) {
                  app1Start = offset;
                  break;
                }
                offset += 1;
              }
            }
            if (app1Start) {
              var exifIDCode = app1Start + 4;
              var tiffOffset = app1Start + 10;
              if (getStringFromCharCode(dataView, exifIDCode, 4) === "Exif") {
                var endianness = dataView.getUint16(tiffOffset);
                littleEndian = endianness === 18761;
                if (littleEndian || endianness === 19789) {
                  if (dataView.getUint16(tiffOffset + 2, littleEndian) === 42) {
                    var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);
                    if (firstIFDOffset >= 8) {
                      ifdStart = tiffOffset + firstIFDOffset;
                    }
                  }
                }
              }
            }
            if (ifdStart) {
              var _length = dataView.getUint16(ifdStart, littleEndian);
              var _offset;
              var i2;
              for (i2 = 0; i2 < _length; i2 += 1) {
                _offset = ifdStart + i2 * 12 + 2;
                if (dataView.getUint16(_offset, littleEndian) === 274) {
                  _offset += 8;
                  orientation = dataView.getUint16(_offset, littleEndian);
                  dataView.setUint16(_offset, 1, littleEndian);
                  break;
                }
              }
            }
          } catch (error) {
            orientation = 1;
          }
          return orientation;
        }
        function parseOrientation(orientation) {
          var rotate = 0;
          var scaleX = 1;
          var scaleY = 1;
          switch (orientation) {
            case 2:
              scaleX = -1;
              break;
            case 3:
              rotate = -180;
              break;
            case 4:
              scaleY = -1;
              break;
            case 5:
              rotate = 90;
              scaleY = -1;
              break;
            case 6:
              rotate = 90;
              break;
            case 7:
              rotate = 90;
              scaleX = -1;
              break;
            case 8:
              rotate = -90;
              break;
          }
          return {
            rotate,
            scaleX,
            scaleY
          };
        }
        var render = {
          render: function render2() {
            this.initContainer();
            this.initCanvas();
            this.initCropBox();
            this.renderCanvas();
            if (this.cropped) {
              this.renderCropBox();
            }
          },
          initContainer: function initContainer() {
            var element = this.element, options = this.options, container = this.container, cropper = this.cropper;
            var minWidth = Number(options.minContainerWidth);
            var minHeight = Number(options.minContainerHeight);
            addClass(cropper, CLASS_HIDDEN);
            removeClass(element, CLASS_HIDDEN);
            var containerData = {
              width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),
              height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)
            };
            this.containerData = containerData;
            setStyle(cropper, {
              width: containerData.width,
              height: containerData.height
            });
            addClass(element, CLASS_HIDDEN);
            removeClass(cropper, CLASS_HIDDEN);
          },
          initCanvas: function initCanvas() {
            var containerData = this.containerData, imageData = this.imageData;
            var viewMode = this.options.viewMode;
            var rotated = Math.abs(imageData.rotate) % 180 === 90;
            var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;
            var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;
            var aspectRatio = naturalWidth / naturalHeight;
            var canvasWidth = containerData.width;
            var canvasHeight = containerData.height;
            if (containerData.height * aspectRatio > containerData.width) {
              if (viewMode === 3) {
                canvasWidth = containerData.height * aspectRatio;
              } else {
                canvasHeight = containerData.width / aspectRatio;
              }
            } else if (viewMode === 3) {
              canvasHeight = containerData.width / aspectRatio;
            } else {
              canvasWidth = containerData.height * aspectRatio;
            }
            var canvasData = {
              aspectRatio,
              naturalWidth,
              naturalHeight,
              width: canvasWidth,
              height: canvasHeight
            };
            this.canvasData = canvasData;
            this.limited = viewMode === 1 || viewMode === 2;
            this.limitCanvas(true, true);
            canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);
            canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);
            canvasData.left = (containerData.width - canvasData.width) / 2;
            canvasData.top = (containerData.height - canvasData.height) / 2;
            canvasData.oldLeft = canvasData.left;
            canvasData.oldTop = canvasData.top;
            this.initialCanvasData = assign({}, canvasData);
          },
          limitCanvas: function limitCanvas(sizeLimited, positionLimited) {
            var options = this.options, containerData = this.containerData, canvasData = this.canvasData, cropBoxData = this.cropBoxData;
            var viewMode = options.viewMode;
            var aspectRatio = canvasData.aspectRatio;
            var cropped = this.cropped && cropBoxData;
            if (sizeLimited) {
              var minCanvasWidth = Number(options.minCanvasWidth) || 0;
              var minCanvasHeight = Number(options.minCanvasHeight) || 0;
              if (viewMode > 1) {
                minCanvasWidth = Math.max(minCanvasWidth, containerData.width);
                minCanvasHeight = Math.max(minCanvasHeight, containerData.height);
                if (viewMode === 3) {
                  if (minCanvasHeight * aspectRatio > minCanvasWidth) {
                    minCanvasWidth = minCanvasHeight * aspectRatio;
                  } else {
                    minCanvasHeight = minCanvasWidth / aspectRatio;
                  }
                }
              } else if (viewMode > 0) {
                if (minCanvasWidth) {
                  minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);
                } else if (minCanvasHeight) {
                  minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);
                } else if (cropped) {
                  minCanvasWidth = cropBoxData.width;
                  minCanvasHeight = cropBoxData.height;
                  if (minCanvasHeight * aspectRatio > minCanvasWidth) {
                    minCanvasWidth = minCanvasHeight * aspectRatio;
                  } else {
                    minCanvasHeight = minCanvasWidth / aspectRatio;
                  }
                }
              }
              var _getAdjustedSizes = getAdjustedSizes({
                aspectRatio,
                width: minCanvasWidth,
                height: minCanvasHeight
              });
              minCanvasWidth = _getAdjustedSizes.width;
              minCanvasHeight = _getAdjustedSizes.height;
              canvasData.minWidth = minCanvasWidth;
              canvasData.minHeight = minCanvasHeight;
              canvasData.maxWidth = Infinity;
              canvasData.maxHeight = Infinity;
            }
            if (positionLimited) {
              if (viewMode > (cropped ? 0 : 1)) {
                var newCanvasLeft = containerData.width - canvasData.width;
                var newCanvasTop = containerData.height - canvasData.height;
                canvasData.minLeft = Math.min(0, newCanvasLeft);
                canvasData.minTop = Math.min(0, newCanvasTop);
                canvasData.maxLeft = Math.max(0, newCanvasLeft);
                canvasData.maxTop = Math.max(0, newCanvasTop);
                if (cropped && this.limited) {
                  canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));
                  canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));
                  canvasData.maxLeft = cropBoxData.left;
                  canvasData.maxTop = cropBoxData.top;
                  if (viewMode === 2) {
                    if (canvasData.width >= containerData.width) {
                      canvasData.minLeft = Math.min(0, newCanvasLeft);
                      canvasData.maxLeft = Math.max(0, newCanvasLeft);
                    }
                    if (canvasData.height >= containerData.height) {
                      canvasData.minTop = Math.min(0, newCanvasTop);
                      canvasData.maxTop = Math.max(0, newCanvasTop);
                    }
                  }
                }
              } else {
                canvasData.minLeft = -canvasData.width;
                canvasData.minTop = -canvasData.height;
                canvasData.maxLeft = containerData.width;
                canvasData.maxTop = containerData.height;
              }
            }
          },
          renderCanvas: function renderCanvas(changed, transformed) {
            var canvasData = this.canvasData, imageData = this.imageData;
            if (transformed) {
              var _getRotatedSizes = getRotatedSizes({
                width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),
                height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),
                degree: imageData.rotate || 0
              }), naturalWidth = _getRotatedSizes.width, naturalHeight = _getRotatedSizes.height;
              var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);
              var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);
              canvasData.left -= (width - canvasData.width) / 2;
              canvasData.top -= (height - canvasData.height) / 2;
              canvasData.width = width;
              canvasData.height = height;
              canvasData.aspectRatio = naturalWidth / naturalHeight;
              canvasData.naturalWidth = naturalWidth;
              canvasData.naturalHeight = naturalHeight;
              this.limitCanvas(true, false);
            }
            if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {
              canvasData.left = canvasData.oldLeft;
            }
            if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {
              canvasData.top = canvasData.oldTop;
            }
            canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);
            canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);
            this.limitCanvas(false, true);
            canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);
            canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);
            canvasData.oldLeft = canvasData.left;
            canvasData.oldTop = canvasData.top;
            setStyle(this.canvas, assign({
              width: canvasData.width,
              height: canvasData.height
            }, getTransforms({
              translateX: canvasData.left,
              translateY: canvasData.top
            })));
            this.renderImage(changed);
            if (this.cropped && this.limited) {
              this.limitCropBox(true, true);
            }
          },
          renderImage: function renderImage(changed) {
            var canvasData = this.canvasData, imageData = this.imageData;
            var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);
            var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);
            assign(imageData, {
              width,
              height,
              left: (canvasData.width - width) / 2,
              top: (canvasData.height - height) / 2
            });
            setStyle(this.image, assign({
              width: imageData.width,
              height: imageData.height
            }, getTransforms(assign({
              translateX: imageData.left,
              translateY: imageData.top
            }, imageData))));
            if (changed) {
              this.output();
            }
          },
          initCropBox: function initCropBox() {
            var options = this.options, canvasData = this.canvasData;
            var aspectRatio = options.aspectRatio || options.initialAspectRatio;
            var autoCropArea = Number(options.autoCropArea) || 0.8;
            var cropBoxData = {
              width: canvasData.width,
              height: canvasData.height
            };
            if (aspectRatio) {
              if (canvasData.height * aspectRatio > canvasData.width) {
                cropBoxData.height = cropBoxData.width / aspectRatio;
              } else {
                cropBoxData.width = cropBoxData.height * aspectRatio;
              }
            }
            this.cropBoxData = cropBoxData;
            this.limitCropBox(true, true);
            cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);
            cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);
            cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);
            cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);
            cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;
            cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;
            cropBoxData.oldLeft = cropBoxData.left;
            cropBoxData.oldTop = cropBoxData.top;
            this.initialCropBoxData = assign({}, cropBoxData);
          },
          limitCropBox: function limitCropBox(sizeLimited, positionLimited) {
            var options = this.options, containerData = this.containerData, canvasData = this.canvasData, cropBoxData = this.cropBoxData, limited = this.limited;
            var aspectRatio = options.aspectRatio;
            if (sizeLimited) {
              var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;
              var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;
              var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;
              var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height;
              minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);
              minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);
              if (aspectRatio) {
                if (minCropBoxWidth && minCropBoxHeight) {
                  if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {
                    minCropBoxHeight = minCropBoxWidth / aspectRatio;
                  } else {
                    minCropBoxWidth = minCropBoxHeight * aspectRatio;
                  }
                } else if (minCropBoxWidth) {
                  minCropBoxHeight = minCropBoxWidth / aspectRatio;
                } else if (minCropBoxHeight) {
                  minCropBoxWidth = minCropBoxHeight * aspectRatio;
                }
                if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {
                  maxCropBoxHeight = maxCropBoxWidth / aspectRatio;
                } else {
                  maxCropBoxWidth = maxCropBoxHeight * aspectRatio;
                }
              }
              cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);
              cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);
              cropBoxData.maxWidth = maxCropBoxWidth;
              cropBoxData.maxHeight = maxCropBoxHeight;
            }
            if (positionLimited) {
              if (limited) {
                cropBoxData.minLeft = Math.max(0, canvasData.left);
                cropBoxData.minTop = Math.max(0, canvasData.top);
                cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;
                cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;
              } else {
                cropBoxData.minLeft = 0;
                cropBoxData.minTop = 0;
                cropBoxData.maxLeft = containerData.width - cropBoxData.width;
                cropBoxData.maxTop = containerData.height - cropBoxData.height;
              }
            }
          },
          renderCropBox: function renderCropBox() {
            var options = this.options, containerData = this.containerData, cropBoxData = this.cropBoxData;
            if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {
              cropBoxData.left = cropBoxData.oldLeft;
            }
            if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {
              cropBoxData.top = cropBoxData.oldTop;
            }
            cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);
            cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);
            this.limitCropBox(false, true);
            cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);
            cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);
            cropBoxData.oldLeft = cropBoxData.left;
            cropBoxData.oldTop = cropBoxData.top;
            if (options.movable && options.cropBoxMovable) {
              setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);
            }
            setStyle(this.cropBox, assign({
              width: cropBoxData.width,
              height: cropBoxData.height
            }, getTransforms({
              translateX: cropBoxData.left,
              translateY: cropBoxData.top
            })));
            if (this.cropped && this.limited) {
              this.limitCanvas(true, true);
            }
            if (!this.disabled) {
              this.output();
            }
          },
          output: function output() {
            this.preview();
            dispatchEvent(this.element, EVENT_CROP, this.getData());
          }
        };
        var preview = {
          initPreview: function initPreview() {
            var element = this.element, crossOrigin = this.crossOrigin;
            var preview2 = this.options.preview;
            var url = crossOrigin ? this.crossOriginUrl : this.url;
            var alt = element.alt || "The image to preview";
            var image = document.createElement("img");
            if (crossOrigin) {
              image.crossOrigin = crossOrigin;
            }
            image.src = url;
            image.alt = alt;
            this.viewBox.appendChild(image);
            this.viewBoxImage = image;
            if (!preview2) {
              return;
            }
            var previews = preview2;
            if (typeof preview2 === "string") {
              previews = element.ownerDocument.querySelectorAll(preview2);
            } else if (preview2.querySelector) {
              previews = [preview2];
            }
            this.previews = previews;
            forEach(previews, function(el) {
              var img = document.createElement("img");
              setData(el, DATA_PREVIEW, {
                width: el.offsetWidth,
                height: el.offsetHeight,
                html: el.innerHTML
              });
              if (crossOrigin) {
                img.crossOrigin = crossOrigin;
              }
              img.src = url;
              img.alt = alt;
              img.style.cssText = 'display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';
              el.innerHTML = "";
              el.appendChild(img);
            });
          },
          resetPreview: function resetPreview() {
            forEach(this.previews, function(element) {
              var data = getData(element, DATA_PREVIEW);
              setStyle(element, {
                width: data.width,
                height: data.height
              });
              element.innerHTML = data.html;
              removeData(element, DATA_PREVIEW);
            });
          },
          preview: function preview2() {
            var imageData = this.imageData, canvasData = this.canvasData, cropBoxData = this.cropBoxData;
            var cropBoxWidth = cropBoxData.width, cropBoxHeight = cropBoxData.height;
            var width = imageData.width, height = imageData.height;
            var left = cropBoxData.left - canvasData.left - imageData.left;
            var top = cropBoxData.top - canvasData.top - imageData.top;
            if (!this.cropped || this.disabled) {
              return;
            }
            setStyle(this.viewBoxImage, assign({
              width,
              height
            }, getTransforms(assign({
              translateX: -left,
              translateY: -top
            }, imageData))));
            forEach(this.previews, function(element) {
              var data = getData(element, DATA_PREVIEW);
              var originalWidth = data.width;
              var originalHeight = data.height;
              var newWidth = originalWidth;
              var newHeight = originalHeight;
              var ratio = 1;
              if (cropBoxWidth) {
                ratio = originalWidth / cropBoxWidth;
                newHeight = cropBoxHeight * ratio;
              }
              if (cropBoxHeight && newHeight > originalHeight) {
                ratio = originalHeight / cropBoxHeight;
                newWidth = cropBoxWidth * ratio;
                newHeight = originalHeight;
              }
              setStyle(element, {
                width: newWidth,
                height: newHeight
              });
              setStyle(element.getElementsByTagName("img")[0], assign({
                width: width * ratio,
                height: height * ratio
              }, getTransforms(assign({
                translateX: -left * ratio,
                translateY: -top * ratio
              }, imageData))));
            });
          }
        };
        var events = {
          bind: function bind() {
            var element = this.element, options = this.options, cropper = this.cropper;
            if (isFunction(options.cropstart)) {
              addListener(element, EVENT_CROP_START, options.cropstart);
            }
            if (isFunction(options.cropmove)) {
              addListener(element, EVENT_CROP_MOVE, options.cropmove);
            }
            if (isFunction(options.cropend)) {
              addListener(element, EVENT_CROP_END, options.cropend);
            }
            if (isFunction(options.crop)) {
              addListener(element, EVENT_CROP, options.crop);
            }
            if (isFunction(options.zoom)) {
              addListener(element, EVENT_ZOOM, options.zoom);
            }
            addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));
            if (options.zoomable && options.zoomOnWheel) {
              addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {
                passive: false,
                capture: true
              });
            }
            if (options.toggleDragModeOnDblclick) {
              addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));
            }
            addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));
            addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));
            if (options.responsive) {
              addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));
            }
          },
          unbind: function unbind() {
            var element = this.element, options = this.options, cropper = this.cropper;
            if (isFunction(options.cropstart)) {
              removeListener(element, EVENT_CROP_START, options.cropstart);
            }
            if (isFunction(options.cropmove)) {
              removeListener(element, EVENT_CROP_MOVE, options.cropmove);
            }
            if (isFunction(options.cropend)) {
              removeListener(element, EVENT_CROP_END, options.cropend);
            }
            if (isFunction(options.crop)) {
              removeListener(element, EVENT_CROP, options.crop);
            }
            if (isFunction(options.zoom)) {
              removeListener(element, EVENT_ZOOM, options.zoom);
            }
            removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);
            if (options.zoomable && options.zoomOnWheel) {
              removeListener(cropper, EVENT_WHEEL, this.onWheel, {
                passive: false,
                capture: true
              });
            }
            if (options.toggleDragModeOnDblclick) {
              removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);
            }
            removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);
            removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);
            if (options.responsive) {
              removeListener(window, EVENT_RESIZE, this.onResize);
            }
          }
        };
        var handlers = {
          resize: function resize() {
            if (this.disabled) {
              return;
            }
            var options = this.options, container = this.container, containerData = this.containerData;
            var ratioX = container.offsetWidth / containerData.width;
            var ratioY = container.offsetHeight / containerData.height;
            var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY;
            if (ratio !== 1) {
              var canvasData;
              var cropBoxData;
              if (options.restore) {
                canvasData = this.getCanvasData();
                cropBoxData = this.getCropBoxData();
              }
              this.render();
              if (options.restore) {
                this.setCanvasData(forEach(canvasData, function(n2, i2) {
                  canvasData[i2] = n2 * ratio;
                }));
                this.setCropBoxData(forEach(cropBoxData, function(n2, i2) {
                  cropBoxData[i2] = n2 * ratio;
                }));
              }
            }
          },
          dblclick: function dblclick() {
            if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {
              return;
            }
            this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);
          },
          wheel: function wheel(event2) {
            var _this = this;
            var ratio = Number(this.options.wheelZoomRatio) || 0.1;
            var delta = 1;
            if (this.disabled) {
              return;
            }
            event2.preventDefault();
            if (this.wheeling) {
              return;
            }
            this.wheeling = true;
            setTimeout(function() {
              _this.wheeling = false;
            }, 50);
            if (event2.deltaY) {
              delta = event2.deltaY > 0 ? 1 : -1;
            } else if (event2.wheelDelta) {
              delta = -event2.wheelDelta / 120;
            } else if (event2.detail) {
              delta = event2.detail > 0 ? 1 : -1;
            }
            this.zoom(-delta * ratio, event2);
          },
          cropStart: function cropStart(event2) {
            var buttons = event2.buttons, button = event2.button;
            if (this.disabled || (event2.type === "mousedown" || event2.type === "pointerdown" && event2.pointerType === "mouse") && (isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0 || event2.ctrlKey)) {
              return;
            }
            var options = this.options, pointers = this.pointers;
            var action;
            if (event2.changedTouches) {
              forEach(event2.changedTouches, function(touch) {
                pointers[touch.identifier] = getPointer(touch);
              });
            } else {
              pointers[event2.pointerId || 0] = getPointer(event2);
            }
            if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {
              action = ACTION_ZOOM;
            } else {
              action = getData(event2.target, DATA_ACTION);
            }
            if (!REGEXP_ACTIONS.test(action)) {
              return;
            }
            if (dispatchEvent(this.element, EVENT_CROP_START, {
              originalEvent: event2,
              action
            }) === false) {
              return;
            }
            event2.preventDefault();
            this.action = action;
            this.cropping = false;
            if (action === ACTION_CROP) {
              this.cropping = true;
              addClass(this.dragBox, CLASS_MODAL);
            }
          },
          cropMove: function cropMove(event2) {
            var action = this.action;
            if (this.disabled || !action) {
              return;
            }
            var pointers = this.pointers;
            event2.preventDefault();
            if (dispatchEvent(this.element, EVENT_CROP_MOVE, {
              originalEvent: event2,
              action
            }) === false) {
              return;
            }
            if (event2.changedTouches) {
              forEach(event2.changedTouches, function(touch) {
                assign(pointers[touch.identifier] || {}, getPointer(touch, true));
              });
            } else {
              assign(pointers[event2.pointerId || 0] || {}, getPointer(event2, true));
            }
            this.change(event2);
          },
          cropEnd: function cropEnd(event2) {
            if (this.disabled) {
              return;
            }
            var action = this.action, pointers = this.pointers;
            if (event2.changedTouches) {
              forEach(event2.changedTouches, function(touch) {
                delete pointers[touch.identifier];
              });
            } else {
              delete pointers[event2.pointerId || 0];
            }
            if (!action) {
              return;
            }
            event2.preventDefault();
            if (!Object.keys(pointers).length) {
              this.action = "";
            }
            if (this.cropping) {
              this.cropping = false;
              toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);
            }
            dispatchEvent(this.element, EVENT_CROP_END, {
              originalEvent: event2,
              action
            });
          }
        };
        var change = {
          change: function change2(event2) {
            var options = this.options, canvasData = this.canvasData, containerData = this.containerData, cropBoxData = this.cropBoxData, pointers = this.pointers;
            var action = this.action;
            var aspectRatio = options.aspectRatio;
            var left = cropBoxData.left, top = cropBoxData.top, width = cropBoxData.width, height = cropBoxData.height;
            var right = left + width;
            var bottom = top + height;
            var minLeft = 0;
            var minTop = 0;
            var maxWidth = containerData.width;
            var maxHeight = containerData.height;
            var renderable = true;
            var offset;
            if (!aspectRatio && event2.shiftKey) {
              aspectRatio = width && height ? width / height : 1;
            }
            if (this.limited) {
              minLeft = cropBoxData.minLeft;
              minTop = cropBoxData.minTop;
              maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);
              maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);
            }
            var pointer = pointers[Object.keys(pointers)[0]];
            var range = {
              x: pointer.endX - pointer.startX,
              y: pointer.endY - pointer.startY
            };
            var check = function check2(side) {
              switch (side) {
                case ACTION_EAST:
                  if (right + range.x > maxWidth) {
                    range.x = maxWidth - right;
                  }
                  break;
                case ACTION_WEST:
                  if (left + range.x < minLeft) {
                    range.x = minLeft - left;
                  }
                  break;
                case ACTION_NORTH:
                  if (top + range.y < minTop) {
                    range.y = minTop - top;
                  }
                  break;
                case ACTION_SOUTH:
                  if (bottom + range.y > maxHeight) {
                    range.y = maxHeight - bottom;
                  }
                  break;
              }
            };
            switch (action) {
              case ACTION_ALL:
                left += range.x;
                top += range.y;
                break;
              case ACTION_EAST:
                if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {
                  renderable = false;
                  break;
                }
                check(ACTION_EAST);
                width += range.x;
                if (width < 0) {
                  action = ACTION_WEST;
                  width = -width;
                  left -= width;
                }
                if (aspectRatio) {
                  height = width / aspectRatio;
                  top += (cropBoxData.height - height) / 2;
                }
                break;
              case ACTION_NORTH:
                if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {
                  renderable = false;
                  break;
                }
                check(ACTION_NORTH);
                height -= range.y;
                top += range.y;
                if (height < 0) {
                  action = ACTION_SOUTH;
                  height = -height;
                  top -= height;
                }
                if (aspectRatio) {
                  width = height * aspectRatio;
                  left += (cropBoxData.width - width) / 2;
                }
                break;
              case ACTION_WEST:
                if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {
                  renderable = false;
                  break;
                }
                check(ACTION_WEST);
                width -= range.x;
                left += range.x;
                if (width < 0) {
                  action = ACTION_EAST;
                  width = -width;
                  left -= width;
                }
                if (aspectRatio) {
                  height = width / aspectRatio;
                  top += (cropBoxData.height - height) / 2;
                }
                break;
              case ACTION_SOUTH:
                if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {
                  renderable = false;
                  break;
                }
                check(ACTION_SOUTH);
                height += range.y;
                if (height < 0) {
                  action = ACTION_NORTH;
                  height = -height;
                  top -= height;
                }
                if (aspectRatio) {
                  width = height * aspectRatio;
                  left += (cropBoxData.width - width) / 2;
                }
                break;
              case ACTION_NORTH_EAST:
                if (aspectRatio) {
                  if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {
                    renderable = false;
                    break;
                  }
                  check(ACTION_NORTH);
                  height -= range.y;
                  top += range.y;
                  width = height * aspectRatio;
                } else {
                  check(ACTION_NORTH);
                  check(ACTION_EAST);
                  if (range.x >= 0) {
                    if (right < maxWidth) {
                      width += range.x;
                    } else if (range.y <= 0 && top <= minTop) {
                      renderable = false;
                    }
                  } else {
                    width += range.x;
                  }
                  if (range.y <= 0) {
                    if (top > minTop) {
                      height -= range.y;
                      top += range.y;
                    }
                  } else {
                    height -= range.y;
                    top += range.y;
                  }
                }
                if (width < 0 && height < 0) {
                  action = ACTION_SOUTH_WEST;
                  height = -height;
                  width = -width;
                  top -= height;
                  left -= width;
                } else if (width < 0) {
                  action = ACTION_NORTH_WEST;
                  width = -width;
                  left -= width;
                } else if (height < 0) {
                  action = ACTION_SOUTH_EAST;
                  height = -height;
                  top -= height;
                }
                break;
              case ACTION_NORTH_WEST:
                if (aspectRatio) {
                  if (range.y <= 0 && (top <= minTop || left <= minLeft)) {
                    renderable = false;
                    break;
                  }
                  check(ACTION_NORTH);
                  height -= range.y;
                  top += range.y;
                  width = height * aspectRatio;
                  left += cropBoxData.width - width;
                } else {
                  check(ACTION_NORTH);
                  check(ACTION_WEST);
                  if (range.x <= 0) {
                    if (left > minLeft) {
                      width -= range.x;
                      left += range.x;
                    } else if (range.y <= 0 && top <= minTop) {
                      renderable = false;
                    }
                  } else {
                    width -= range.x;
                    left += range.x;
                  }
                  if (range.y <= 0) {
                    if (top > minTop) {
                      height -= range.y;
                      top += range.y;
                    }
                  } else {
                    height -= range.y;
                    top += range.y;
                  }
                }
                if (width < 0 && height < 0) {
                  action = ACTION_SOUTH_EAST;
                  height = -height;
                  width = -width;
                  top -= height;
                  left -= width;
                } else if (width < 0) {
                  action = ACTION_NORTH_EAST;
                  width = -width;
                  left -= width;
                } else if (height < 0) {
                  action = ACTION_SOUTH_WEST;
                  height = -height;
                  top -= height;
                }
                break;
              case ACTION_SOUTH_WEST:
                if (aspectRatio) {
                  if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {
                    renderable = false;
                    break;
                  }
                  check(ACTION_WEST);
                  width -= range.x;
                  left += range.x;
                  height = width / aspectRatio;
                } else {
                  check(ACTION_SOUTH);
                  check(ACTION_WEST);
                  if (range.x <= 0) {
                    if (left > minLeft) {
                      width -= range.x;
                      left += range.x;
                    } else if (range.y >= 0 && bottom >= maxHeight) {
                      renderable = false;
                    }
                  } else {
                    width -= range.x;
                    left += range.x;
                  }
                  if (range.y >= 0) {
                    if (bottom < maxHeight) {
                      height += range.y;
                    }
                  } else {
                    height += range.y;
                  }
                }
                if (width < 0 && height < 0) {
                  action = ACTION_NORTH_EAST;
                  height = -height;
                  width = -width;
                  top -= height;
                  left -= width;
                } else if (width < 0) {
                  action = ACTION_SOUTH_EAST;
                  width = -width;
                  left -= width;
                } else if (height < 0) {
                  action = ACTION_NORTH_WEST;
                  height = -height;
                  top -= height;
                }
                break;
              case ACTION_SOUTH_EAST:
                if (aspectRatio) {
                  if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {
                    renderable = false;
                    break;
                  }
                  check(ACTION_EAST);
                  width += range.x;
                  height = width / aspectRatio;
                } else {
                  check(ACTION_SOUTH);
                  check(ACTION_EAST);
                  if (range.x >= 0) {
                    if (right < maxWidth) {
                      width += range.x;
                    } else if (range.y >= 0 && bottom >= maxHeight) {
                      renderable = false;
                    }
                  } else {
                    width += range.x;
                  }
                  if (range.y >= 0) {
                    if (bottom < maxHeight) {
                      height += range.y;
                    }
                  } else {
                    height += range.y;
                  }
                }
                if (width < 0 && height < 0) {
                  action = ACTION_NORTH_WEST;
                  height = -height;
                  width = -width;
                  top -= height;
                  left -= width;
                } else if (width < 0) {
                  action = ACTION_SOUTH_WEST;
                  width = -width;
                  left -= width;
                } else if (height < 0) {
                  action = ACTION_NORTH_EAST;
                  height = -height;
                  top -= height;
                }
                break;
              case ACTION_MOVE:
                this.move(range.x, range.y);
                renderable = false;
                break;
              case ACTION_ZOOM:
                this.zoom(getMaxZoomRatio(pointers), event2);
                renderable = false;
                break;
              case ACTION_CROP:
                if (!range.x || !range.y) {
                  renderable = false;
                  break;
                }
                offset = getOffset(this.cropper);
                left = pointer.startX - offset.left;
                top = pointer.startY - offset.top;
                width = cropBoxData.minWidth;
                height = cropBoxData.minHeight;
                if (range.x > 0) {
                  action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;
                } else if (range.x < 0) {
                  left -= width;
                  action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;
                }
                if (range.y < 0) {
                  top -= height;
                }
                if (!this.cropped) {
                  removeClass(this.cropBox, CLASS_HIDDEN);
                  this.cropped = true;
                  if (this.limited) {
                    this.limitCropBox(true, true);
                  }
                }
                break;
            }
            if (renderable) {
              cropBoxData.width = width;
              cropBoxData.height = height;
              cropBoxData.left = left;
              cropBoxData.top = top;
              this.action = action;
              this.renderCropBox();
            }
            forEach(pointers, function(p2) {
              p2.startX = p2.endX;
              p2.startY = p2.endY;
            });
          }
        };
        var methods = {
          crop: function crop() {
            if (this.ready && !this.cropped && !this.disabled) {
              this.cropped = true;
              this.limitCropBox(true, true);
              if (this.options.modal) {
                addClass(this.dragBox, CLASS_MODAL);
              }
              removeClass(this.cropBox, CLASS_HIDDEN);
              this.setCropBoxData(this.initialCropBoxData);
            }
            return this;
          },
          reset: function reset() {
            if (this.ready && !this.disabled) {
              this.imageData = assign({}, this.initialImageData);
              this.canvasData = assign({}, this.initialCanvasData);
              this.cropBoxData = assign({}, this.initialCropBoxData);
              this.renderCanvas();
              if (this.cropped) {
                this.renderCropBox();
              }
            }
            return this;
          },
          clear: function clear() {
            if (this.cropped && !this.disabled) {
              assign(this.cropBoxData, {
                left: 0,
                top: 0,
                width: 0,
                height: 0
              });
              this.cropped = false;
              this.renderCropBox();
              this.limitCanvas(true, true);
              this.renderCanvas();
              removeClass(this.dragBox, CLASS_MODAL);
              addClass(this.cropBox, CLASS_HIDDEN);
            }
            return this;
          },
          replace: function replace(url) {
            var hasSameSize = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
            if (!this.disabled && url) {
              if (this.isImg) {
                this.element.src = url;
              }
              if (hasSameSize) {
                this.url = url;
                this.image.src = url;
                if (this.ready) {
                  this.viewBoxImage.src = url;
                  forEach(this.previews, function(element) {
                    element.getElementsByTagName("img")[0].src = url;
                  });
                }
              } else {
                if (this.isImg) {
                  this.replaced = true;
                }
                this.options.data = null;
                this.uncreate();
                this.load(url);
              }
            }
            return this;
          },
          enable: function enable() {
            if (this.ready && this.disabled) {
              this.disabled = false;
              removeClass(this.cropper, CLASS_DISABLED);
            }
            return this;
          },
          disable: function disable() {
            if (this.ready && !this.disabled) {
              this.disabled = true;
              addClass(this.cropper, CLASS_DISABLED);
            }
            return this;
          },
          destroy: function destroy() {
            var element = this.element;
            if (!element[NAMESPACE]) {
              return this;
            }
            element[NAMESPACE] = void 0;
            if (this.isImg && this.replaced) {
              element.src = this.originalUrl;
            }
            this.uncreate();
            return this;
          },
          move: function move(offsetX) {
            var offsetY = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : offsetX;
            var _this$canvasData = this.canvasData, left = _this$canvasData.left, top = _this$canvasData.top;
            return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));
          },
          moveTo: function moveTo(x2) {
            var y2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : x2;
            var canvasData = this.canvasData;
            var changed = false;
            x2 = Number(x2);
            y2 = Number(y2);
            if (this.ready && !this.disabled && this.options.movable) {
              if (isNumber(x2)) {
                canvasData.left = x2;
                changed = true;
              }
              if (isNumber(y2)) {
                canvasData.top = y2;
                changed = true;
              }
              if (changed) {
                this.renderCanvas(true);
              }
            }
            return this;
          },
          zoom: function zoom(ratio, _originalEvent) {
            var canvasData = this.canvasData;
            ratio = Number(ratio);
            if (ratio < 0) {
              ratio = 1 / (1 - ratio);
            } else {
              ratio = 1 + ratio;
            }
            return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);
          },
          zoomTo: function zoomTo(ratio, pivot, _originalEvent) {
            var options = this.options, canvasData = this.canvasData;
            var width = canvasData.width, height = canvasData.height, naturalWidth = canvasData.naturalWidth, naturalHeight = canvasData.naturalHeight;
            ratio = Number(ratio);
            if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {
              var newWidth = naturalWidth * ratio;
              var newHeight = naturalHeight * ratio;
              if (dispatchEvent(this.element, EVENT_ZOOM, {
                ratio,
                oldRatio: width / naturalWidth,
                originalEvent: _originalEvent
              }) === false) {
                return this;
              }
              if (_originalEvent) {
                var pointers = this.pointers;
                var offset = getOffset(this.cropper);
                var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {
                  pageX: _originalEvent.pageX,
                  pageY: _originalEvent.pageY
                };
                canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);
                canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);
              } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {
                canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);
                canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);
              } else {
                canvasData.left -= (newWidth - width) / 2;
                canvasData.top -= (newHeight - height) / 2;
              }
              canvasData.width = newWidth;
              canvasData.height = newHeight;
              this.renderCanvas(true);
            }
            return this;
          },
          rotate: function rotate(degree) {
            return this.rotateTo((this.imageData.rotate || 0) + Number(degree));
          },
          rotateTo: function rotateTo(degree) {
            degree = Number(degree);
            if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {
              this.imageData.rotate = degree % 360;
              this.renderCanvas(true, true);
            }
            return this;
          },
          scaleX: function scaleX(_scaleX) {
            var scaleY = this.imageData.scaleY;
            return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);
          },
          scaleY: function scaleY(_scaleY) {
            var scaleX = this.imageData.scaleX;
            return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);
          },
          scale: function scale(scaleX) {
            var scaleY = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : scaleX;
            var imageData = this.imageData;
            var transformed = false;
            scaleX = Number(scaleX);
            scaleY = Number(scaleY);
            if (this.ready && !this.disabled && this.options.scalable) {
              if (isNumber(scaleX)) {
                imageData.scaleX = scaleX;
                transformed = true;
              }
              if (isNumber(scaleY)) {
                imageData.scaleY = scaleY;
                transformed = true;
              }
              if (transformed) {
                this.renderCanvas(true, true);
              }
            }
            return this;
          },
          getData: function getData2() {
            var rounded = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
            var options = this.options, imageData = this.imageData, canvasData = this.canvasData, cropBoxData = this.cropBoxData;
            var data;
            if (this.ready && this.cropped) {
              data = {
                x: cropBoxData.left - canvasData.left,
                y: cropBoxData.top - canvasData.top,
                width: cropBoxData.width,
                height: cropBoxData.height
              };
              var ratio = imageData.width / imageData.naturalWidth;
              forEach(data, function(n2, i2) {
                data[i2] = n2 / ratio;
              });
              if (rounded) {
                var bottom = Math.round(data.y + data.height);
                var right = Math.round(data.x + data.width);
                data.x = Math.round(data.x);
                data.y = Math.round(data.y);
                data.width = right - data.x;
                data.height = bottom - data.y;
              }
            } else {
              data = {
                x: 0,
                y: 0,
                width: 0,
                height: 0
              };
            }
            if (options.rotatable) {
              data.rotate = imageData.rotate || 0;
            }
            if (options.scalable) {
              data.scaleX = imageData.scaleX || 1;
              data.scaleY = imageData.scaleY || 1;
            }
            return data;
          },
          setData: function setData2(data) {
            var options = this.options, imageData = this.imageData, canvasData = this.canvasData;
            var cropBoxData = {};
            if (this.ready && !this.disabled && isPlainObject(data)) {
              var transformed = false;
              if (options.rotatable) {
                if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {
                  imageData.rotate = data.rotate;
                  transformed = true;
                }
              }
              if (options.scalable) {
                if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {
                  imageData.scaleX = data.scaleX;
                  transformed = true;
                }
                if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {
                  imageData.scaleY = data.scaleY;
                  transformed = true;
                }
              }
              if (transformed) {
                this.renderCanvas(true, true);
              }
              var ratio = imageData.width / imageData.naturalWidth;
              if (isNumber(data.x)) {
                cropBoxData.left = data.x * ratio + canvasData.left;
              }
              if (isNumber(data.y)) {
                cropBoxData.top = data.y * ratio + canvasData.top;
              }
              if (isNumber(data.width)) {
                cropBoxData.width = data.width * ratio;
              }
              if (isNumber(data.height)) {
                cropBoxData.height = data.height * ratio;
              }
              this.setCropBoxData(cropBoxData);
            }
            return this;
          },
          getContainerData: function getContainerData() {
            return this.ready ? assign({}, this.containerData) : {};
          },
          getImageData: function getImageData() {
            return this.sized ? assign({}, this.imageData) : {};
          },
          getCanvasData: function getCanvasData() {
            var canvasData = this.canvasData;
            var data = {};
            if (this.ready) {
              forEach(["left", "top", "width", "height", "naturalWidth", "naturalHeight"], function(n2) {
                data[n2] = canvasData[n2];
              });
            }
            return data;
          },
          setCanvasData: function setCanvasData(data) {
            var canvasData = this.canvasData;
            var aspectRatio = canvasData.aspectRatio;
            if (this.ready && !this.disabled && isPlainObject(data)) {
              if (isNumber(data.left)) {
                canvasData.left = data.left;
              }
              if (isNumber(data.top)) {
                canvasData.top = data.top;
              }
              if (isNumber(data.width)) {
                canvasData.width = data.width;
                canvasData.height = data.width / aspectRatio;
              } else if (isNumber(data.height)) {
                canvasData.height = data.height;
                canvasData.width = data.height * aspectRatio;
              }
              this.renderCanvas(true);
            }
            return this;
          },
          getCropBoxData: function getCropBoxData() {
            var cropBoxData = this.cropBoxData;
            var data;
            if (this.ready && this.cropped) {
              data = {
                left: cropBoxData.left,
                top: cropBoxData.top,
                width: cropBoxData.width,
                height: cropBoxData.height
              };
            }
            return data || {};
          },
          setCropBoxData: function setCropBoxData(data) {
            var cropBoxData = this.cropBoxData;
            var aspectRatio = this.options.aspectRatio;
            var widthChanged;
            var heightChanged;
            if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {
              if (isNumber(data.left)) {
                cropBoxData.left = data.left;
              }
              if (isNumber(data.top)) {
                cropBoxData.top = data.top;
              }
              if (isNumber(data.width) && data.width !== cropBoxData.width) {
                widthChanged = true;
                cropBoxData.width = data.width;
              }
              if (isNumber(data.height) && data.height !== cropBoxData.height) {
                heightChanged = true;
                cropBoxData.height = data.height;
              }
              if (aspectRatio) {
                if (widthChanged) {
                  cropBoxData.height = cropBoxData.width / aspectRatio;
                } else if (heightChanged) {
                  cropBoxData.width = cropBoxData.height * aspectRatio;
                }
              }
              this.renderCropBox();
            }
            return this;
          },
          getCroppedCanvas: function getCroppedCanvas() {
            var options = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
            if (!this.ready || !window.HTMLCanvasElement) {
              return null;
            }
            var canvasData = this.canvasData;
            var source = getSourceCanvas(this.image, this.imageData, canvasData, options);
            if (!this.cropped) {
              return source;
            }
            var _this$getData = this.getData(), initialX = _this$getData.x, initialY = _this$getData.y, initialWidth = _this$getData.width, initialHeight = _this$getData.height;
            var ratio = source.width / Math.floor(canvasData.naturalWidth);
            if (ratio !== 1) {
              initialX *= ratio;
              initialY *= ratio;
              initialWidth *= ratio;
              initialHeight *= ratio;
            }
            var aspectRatio = initialWidth / initialHeight;
            var maxSizes = getAdjustedSizes({
              aspectRatio,
              width: options.maxWidth || Infinity,
              height: options.maxHeight || Infinity
            });
            var minSizes = getAdjustedSizes({
              aspectRatio,
              width: options.minWidth || 0,
              height: options.minHeight || 0
            }, "cover");
            var _getAdjustedSizes = getAdjustedSizes({
              aspectRatio,
              width: options.width || (ratio !== 1 ? source.width : initialWidth),
              height: options.height || (ratio !== 1 ? source.height : initialHeight)
            }), width = _getAdjustedSizes.width, height = _getAdjustedSizes.height;
            width = Math.min(maxSizes.width, Math.max(minSizes.width, width));
            height = Math.min(maxSizes.height, Math.max(minSizes.height, height));
            var canvas = document.createElement("canvas");
            var context = canvas.getContext("2d");
            canvas.width = normalizeDecimalNumber(width);
            canvas.height = normalizeDecimalNumber(height);
            context.fillStyle = options.fillColor || "transparent";
            context.fillRect(0, 0, width, height);
            var _options$imageSmoothi = options.imageSmoothingEnabled, imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi, imageSmoothingQuality = options.imageSmoothingQuality;
            context.imageSmoothingEnabled = imageSmoothingEnabled;
            if (imageSmoothingQuality) {
              context.imageSmoothingQuality = imageSmoothingQuality;
            }
            var sourceWidth = source.width;
            var sourceHeight = source.height;
            var srcX = initialX;
            var srcY = initialY;
            var srcWidth;
            var srcHeight;
            var dstX;
            var dstY;
            var dstWidth;
            var dstHeight;
            if (srcX <= -initialWidth || srcX > sourceWidth) {
              srcX = 0;
              srcWidth = 0;
              dstX = 0;
              dstWidth = 0;
            } else if (srcX <= 0) {
              dstX = -srcX;
              srcX = 0;
              srcWidth = Math.min(sourceWidth, initialWidth + srcX);
              dstWidth = srcWidth;
            } else if (srcX <= sourceWidth) {
              dstX = 0;
              srcWidth = Math.min(initialWidth, sourceWidth - srcX);
              dstWidth = srcWidth;
            }
            if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {
              srcY = 0;
              srcHeight = 0;
              dstY = 0;
              dstHeight = 0;
            } else if (srcY <= 0) {
              dstY = -srcY;
              srcY = 0;
              srcHeight = Math.min(sourceHeight, initialHeight + srcY);
              dstHeight = srcHeight;
            } else if (srcY <= sourceHeight) {
              dstY = 0;
              srcHeight = Math.min(initialHeight, sourceHeight - srcY);
              dstHeight = srcHeight;
            }
            var params = [srcX, srcY, srcWidth, srcHeight];
            if (dstWidth > 0 && dstHeight > 0) {
              var scale = width / initialWidth;
              params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);
            }
            context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function(param) {
              return Math.floor(normalizeDecimalNumber(param));
            }))));
            return canvas;
          },
          setAspectRatio: function setAspectRatio(aspectRatio) {
            var options = this.options;
            if (!this.disabled && !isUndefined(aspectRatio)) {
              options.aspectRatio = Math.max(0, aspectRatio) || NaN;
              if (this.ready) {
                this.initCropBox();
                if (this.cropped) {
                  this.renderCropBox();
                }
              }
            }
            return this;
          },
          setDragMode: function setDragMode(mode) {
            var options = this.options, dragBox = this.dragBox, face = this.face;
            if (this.ready && !this.disabled) {
              var croppable = mode === DRAG_MODE_CROP;
              var movable = options.movable && mode === DRAG_MODE_MOVE;
              mode = croppable || movable ? mode : DRAG_MODE_NONE;
              options.dragMode = mode;
              setData(dragBox, DATA_ACTION, mode);
              toggleClass(dragBox, CLASS_CROP, croppable);
              toggleClass(dragBox, CLASS_MOVE, movable);
              if (!options.cropBoxMovable) {
                setData(face, DATA_ACTION, mode);
                toggleClass(face, CLASS_CROP, croppable);
                toggleClass(face, CLASS_MOVE, movable);
              }
            }
            return this;
          }
        };
        var AnotherCropper = WINDOW.Cropper;
        var Cropper2 = /* @__PURE__ */ function() {
          function Cropper3(element) {
            var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            _classCallCheck(this, Cropper3);
            if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {
              throw new Error("The first argument is required and must be an <img> or <canvas> element.");
            }
            this.element = element;
            this.options = assign({}, DEFAULTS, isPlainObject(options) && options);
            this.cropped = false;
            this.disabled = false;
            this.pointers = {};
            this.ready = false;
            this.reloading = false;
            this.replaced = false;
            this.sized = false;
            this.sizing = false;
            this.init();
          }
          _createClass(Cropper3, [{
            key: "init",
            value: function init() {
              var element = this.element;
              var tagName = element.tagName.toLowerCase();
              var url;
              if (element[NAMESPACE]) {
                return;
              }
              element[NAMESPACE] = this;
              if (tagName === "img") {
                this.isImg = true;
                url = element.getAttribute("src") || "";
                this.originalUrl = url;
                if (!url) {
                  return;
                }
                url = element.src;
              } else if (tagName === "canvas" && window.HTMLCanvasElement) {
                url = element.toDataURL();
              }
              this.load(url);
            }
          }, {
            key: "load",
            value: function load(url) {
              var _this = this;
              if (!url) {
                return;
              }
              this.url = url;
              this.imageData = {};
              var element = this.element, options = this.options;
              if (!options.rotatable && !options.scalable) {
                options.checkOrientation = false;
              }
              if (!options.checkOrientation || !window.ArrayBuffer) {
                this.clone();
                return;
              }
              if (REGEXP_DATA_URL.test(url)) {
                if (REGEXP_DATA_URL_JPEG.test(url)) {
                  this.read(dataURLToArrayBuffer(url));
                } else {
                  this.clone();
                }
                return;
              }
              var xhr = new XMLHttpRequest();
              var clone = this.clone.bind(this);
              this.reloading = true;
              this.xhr = xhr;
              xhr.onabort = clone;
              xhr.onerror = clone;
              xhr.ontimeout = clone;
              xhr.onprogress = function() {
                if (xhr.getResponseHeader("content-type") !== MIME_TYPE_JPEG) {
                  xhr.abort();
                }
              };
              xhr.onload = function() {
                _this.read(xhr.response);
              };
              xhr.onloadend = function() {
                _this.reloading = false;
                _this.xhr = null;
              };
              if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {
                url = addTimestamp(url);
              }
              xhr.open("GET", url, true);
              xhr.responseType = "arraybuffer";
              xhr.withCredentials = element.crossOrigin === "use-credentials";
              xhr.send();
            }
          }, {
            key: "read",
            value: function read2(arrayBuffer) {
              var options = this.options, imageData = this.imageData;
              var orientation = resetAndGetOrientation(arrayBuffer);
              var rotate = 0;
              var scaleX = 1;
              var scaleY = 1;
              if (orientation > 1) {
                this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);
                var _parseOrientation = parseOrientation(orientation);
                rotate = _parseOrientation.rotate;
                scaleX = _parseOrientation.scaleX;
                scaleY = _parseOrientation.scaleY;
              }
              if (options.rotatable) {
                imageData.rotate = rotate;
              }
              if (options.scalable) {
                imageData.scaleX = scaleX;
                imageData.scaleY = scaleY;
              }
              this.clone();
            }
          }, {
            key: "clone",
            value: function clone() {
              var element = this.element, url = this.url;
              var crossOrigin = element.crossOrigin;
              var crossOriginUrl = url;
              if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {
                if (!crossOrigin) {
                  crossOrigin = "anonymous";
                }
                crossOriginUrl = addTimestamp(url);
              }
              this.crossOrigin = crossOrigin;
              this.crossOriginUrl = crossOriginUrl;
              var image = document.createElement("img");
              if (crossOrigin) {
                image.crossOrigin = crossOrigin;
              }
              image.src = crossOriginUrl || url;
              image.alt = element.alt || "The image to crop";
              this.image = image;
              image.onload = this.start.bind(this);
              image.onerror = this.stop.bind(this);
              addClass(image, CLASS_HIDE);
              element.parentNode.insertBefore(image, element.nextSibling);
            }
          }, {
            key: "start",
            value: function start() {
              var _this2 = this;
              var image = this.image;
              image.onload = null;
              image.onerror = null;
              this.sizing = true;
              var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);
              var done = function done2(naturalWidth, naturalHeight) {
                assign(_this2.imageData, {
                  naturalWidth,
                  naturalHeight,
                  aspectRatio: naturalWidth / naturalHeight
                });
                _this2.initialImageData = assign({}, _this2.imageData);
                _this2.sizing = false;
                _this2.sized = true;
                _this2.build();
              };
              if (image.naturalWidth && !isIOSWebKit) {
                done(image.naturalWidth, image.naturalHeight);
                return;
              }
              var sizingImage = document.createElement("img");
              var body = document.body || document.documentElement;
              this.sizingImage = sizingImage;
              sizingImage.onload = function() {
                done(sizingImage.width, sizingImage.height);
                if (!isIOSWebKit) {
                  body.removeChild(sizingImage);
                }
              };
              sizingImage.src = image.src;
              if (!isIOSWebKit) {
                sizingImage.style.cssText = "left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;";
                body.appendChild(sizingImage);
              }
            }
          }, {
            key: "stop",
            value: function stop() {
              var image = this.image;
              image.onload = null;
              image.onerror = null;
              image.parentNode.removeChild(image);
              this.image = null;
            }
          }, {
            key: "build",
            value: function build() {
              if (!this.sized || this.ready) {
                return;
              }
              var element = this.element, options = this.options, image = this.image;
              var container = element.parentNode;
              var template = document.createElement("div");
              template.innerHTML = TEMPLATE;
              var cropper = template.querySelector(".".concat(NAMESPACE, "-container"));
              var canvas = cropper.querySelector(".".concat(NAMESPACE, "-canvas"));
              var dragBox = cropper.querySelector(".".concat(NAMESPACE, "-drag-box"));
              var cropBox = cropper.querySelector(".".concat(NAMESPACE, "-crop-box"));
              var face = cropBox.querySelector(".".concat(NAMESPACE, "-face"));
              this.container = container;
              this.cropper = cropper;
              this.canvas = canvas;
              this.dragBox = dragBox;
              this.cropBox = cropBox;
              this.viewBox = cropper.querySelector(".".concat(NAMESPACE, "-view-box"));
              this.face = face;
              canvas.appendChild(image);
              addClass(element, CLASS_HIDDEN);
              container.insertBefore(cropper, element.nextSibling);
              if (!this.isImg) {
                removeClass(image, CLASS_HIDE);
              }
              this.initPreview();
              this.bind();
              options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;
              options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;
              options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;
              addClass(cropBox, CLASS_HIDDEN);
              if (!options.guides) {
                addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-dashed")), CLASS_HIDDEN);
              }
              if (!options.center) {
                addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-center")), CLASS_HIDDEN);
              }
              if (options.background) {
                addClass(cropper, "".concat(NAMESPACE, "-bg"));
              }
              if (!options.highlight) {
                addClass(face, CLASS_INVISIBLE);
              }
              if (options.cropBoxMovable) {
                addClass(face, CLASS_MOVE);
                setData(face, DATA_ACTION, ACTION_ALL);
              }
              if (!options.cropBoxResizable) {
                addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-line")), CLASS_HIDDEN);
                addClass(cropBox.getElementsByClassName("".concat(NAMESPACE, "-point")), CLASS_HIDDEN);
              }
              this.render();
              this.ready = true;
              this.setDragMode(options.dragMode);
              if (options.autoCrop) {
                this.crop();
              }
              this.setData(options.data);
              if (isFunction(options.ready)) {
                addListener(element, EVENT_READY, options.ready, {
                  once: true
                });
              }
              dispatchEvent(element, EVENT_READY);
            }
          }, {
            key: "unbuild",
            value: function unbuild() {
              if (!this.ready) {
                return;
              }
              this.ready = false;
              this.unbind();
              this.resetPreview();
              this.cropper.parentNode.removeChild(this.cropper);
              removeClass(this.element, CLASS_HIDDEN);
            }
          }, {
            key: "uncreate",
            value: function uncreate() {
              if (this.ready) {
                this.unbuild();
                this.ready = false;
                this.cropped = false;
              } else if (this.sizing) {
                this.sizingImage.onload = null;
                this.sizing = false;
                this.sized = false;
              } else if (this.reloading) {
                this.xhr.onabort = null;
                this.xhr.abort();
              } else if (this.image) {
                this.stop();
              }
            }
          }], [{
            key: "noConflict",
            value: function noConflict() {
              window.Cropper = AnotherCropper;
              return Cropper3;
            }
          }, {
            key: "setDefaults",
            value: function setDefaults(options) {
              assign(DEFAULTS, isPlainObject(options) && options);
            }
          }]);
          return Cropper3;
        }();
        assign(Cropper2.prototype, render, preview, events, handlers, change, methods);
        return Cropper2;
      });
    }
  });

  // frappe/public/js/frappe/ui/toolbar/awesome_bar.js
  var require_awesome_bar = __commonJS({
    "frappe/public/js/frappe/ui/toolbar/awesome_bar.js"(exports, module) {
      frappe.provide("frappe.search");
      frappe.provide("frappe.tags");
      frappe.search.AwesomeBar = class AwesomeBar {
        setup(element) {
          var me = this;
          $(".search-bar").removeClass("hidden");
          var $input = $(element);
          var input = $input.get(0);
          this.options = [];
          this.global_results = [];
          var awesomplete = new Awesomplete(input, {
            minChars: 0,
            maxItems: 99,
            autoFirst: true,
            list: [],
            filter: function(text, term) {
              return true;
            },
            data: function(item, input2) {
              return {
                label: item.index || "",
                value: item.value
              };
            },
            item: function(item, term) {
              var d2 = this.get_item(item.value);
              var name2 = __(d2.label || d2.value);
              var html = "<span>" + name2 + "</span>";
              if (d2.description && d2.value !== d2.description) {
                html += '<br><span class="text-muted ellipsis">' + __(d2.description) + "</span>";
              }
              return $("<li></li>").data("item.autocomplete", d2).html(`<a style="font-weight:normal">${html}</a>`).get(0);
            },
            sort: function(a2, b2) {
              return b2.label - a2.label;
            }
          });
          input.awesomplete = awesomplete;
          this.awesomplete = awesomplete;
          $input.on("input", frappe.utils.debounce(function(e2) {
            var value = e2.target.value;
            var txt2 = value.trim().replace(/\s\s+/g, " ");
            var last_space = txt2.lastIndexOf(" ");
            me.global_results = [];
            me.options = [];
            if (txt2 && txt2.length > 1) {
              if (last_space !== -1) {
                me.set_specifics(txt2.slice(0, last_space), txt2.slice(last_space + 1));
              }
              me.add_defaults(txt2);
              me.options = me.options.concat(me.build_options(txt2));
              me.options = me.options.concat(me.global_results);
            } else {
              me.options = me.options.concat(me.deduplicate(frappe.search.utils.get_recent_pages(txt2 || "")));
              me.options = me.options.concat(frappe.search.utils.get_frequent_links());
            }
            me.add_help();
            awesomplete.list = me.deduplicate(me.options);
          }, 100));
          var open_recent = function() {
            if (!this.autocomplete_open) {
              $(this).trigger("input");
            }
          };
          $input.on("focus", open_recent);
          $input.on("awesomplete-open", function(e2) {
            me.autocomplete_open = e2.target;
          });
          $input.on("awesomplete-close", function(e2) {
            me.autocomplete_open = false;
          });
          $input.on("awesomplete-select", function(e2) {
            var o2 = e2.originalEvent;
            var value = o2.text.value;
            var item = awesomplete.get_item(value);
            if (item.route_options) {
              frappe.route_options = item.route_options;
            }
            if (item.onclick) {
              item.onclick(item.match);
            } else {
              frappe.set_route(item.route);
            }
            $input.val("");
          });
          $input.on("awesomplete-selectcomplete", function(e2) {
            $input.val("");
          });
          $input.on("keydown", (e2) => {
            if (e2.key == "Escape") {
              $input.trigger("blur");
            }
          });
          frappe.search.utils.setup_recent();
          frappe.tags.utils.fetch_tags();
        }
        add_help() {
          this.options.push({
            value: __("Help on Search"),
            index: -10,
            default: "Help",
            onclick: function() {
              var txt2 = '<table class="table table-bordered">					<tr><td style="width: 50%">' + __("Create a new record") + "</td><td>" + __("new type of document") + "</td></tr>					<tr><td>" + __("List a document type") + "</td><td>" + __("document type..., e.g. customer") + "</td></tr>					<tr><td>" + __("Search in a document type") + "</td><td>" + __("text in document type") + "</td></tr>					<tr><td>" + __("Tags") + "</td><td>" + __("tag name..., e.g. #tag") + "</td></tr>					<tr><td>" + __("Open a module or tool") + "</td><td>" + __("module name...") + "</td></tr>					<tr><td>" + __("Calculate") + "</td><td>" + __("e.g. (55 + 434) / 4 or =Math.sin(Math.PI/2)...") + "</td></tr>				</table>";
              frappe.msgprint(txt2, __("Search Help"));
            }
          });
        }
        set_specifics(txt2, end_txt) {
          var me = this;
          var results = this.build_options(txt2);
          results.forEach(function(r2) {
            if (r2.type && r2.type.toLowerCase().indexOf(end_txt.toLowerCase()) === 0) {
              me.options.push(r2);
            }
          });
        }
        add_defaults(txt2) {
          this.make_global_search(txt2);
          this.make_search_in_current(txt2);
          this.make_calculator(txt2);
          this.make_random(txt2);
        }
        build_options(txt2) {
          var options = frappe.search.utils.get_creatables(txt2).concat(frappe.search.utils.get_search_in_list(txt2), frappe.search.utils.get_doctypes(txt2), frappe.search.utils.get_reports(txt2), frappe.search.utils.get_pages(txt2), frappe.search.utils.get_workspaces(txt2), frappe.search.utils.get_dashboards(txt2), frappe.search.utils.get_recent_pages(txt2 || ""), frappe.search.utils.get_executables(txt2));
          if (txt2.charAt(0) === "#") {
            options = frappe.tags.utils.get_tags(txt2);
          }
          var out = this.deduplicate(options);
          return out.sort(function(a2, b2) {
            return b2.index - a2.index;
          });
        }
        deduplicate(options) {
          var out = [], routes = [];
          options.forEach(function(option) {
            if (option.route) {
              if (option.route[0] === "List" && option.route[2] !== "Report" && option.route[2] !== "Inbox") {
                option.route.splice(2);
              }
              var str_route = typeof option.route === "string" ? option.route : option.route.join("/");
              if (routes.indexOf(str_route) === -1) {
                out.push(option);
                routes.push(str_route);
              } else {
                var old = routes.indexOf(str_route);
                if (out[old].index < option.index && !option.recent) {
                  out[old] = option;
                }
              }
            } else {
              out.push(option);
              routes.push("");
            }
          });
          return out;
        }
        set_global_results(global_results, txt2) {
          this.global_results = this.global_results.concat(global_results);
        }
        make_global_search(txt2) {
          if (txt2.charAt(0) === "#") {
            return;
          }
          this.options.push({
            label: `
				<span class="flex justify-between text-medium">
					<span class="ellipsis">${__("Search for {0}", [frappe.utils.xss_sanitise(txt2).bold()])}</span>
					<kbd>\u21B5</kbd>
				</span>
			`,
            value: __("Search for {0}", [txt2]),
            match: txt2,
            index: 100,
            default: "Search",
            onclick: function() {
              frappe.searchdialog.search.init_search(txt2, "global_search");
            }
          });
        }
        make_search_in_current(txt2) {
          var route = frappe.get_route();
          if (route[0] === "List" && txt2.indexOf(" in") === -1) {
            var meta2 = frappe.get_meta(frappe.container.page.list_view.doctype);
            var search_field = meta2.title_field || "name";
            var options = {};
            options[search_field] = ["like", "%" + txt2 + "%"];
            this.options.push({
              label: __("Find {0} in {1}", [txt2.bold(), __(route[1]).bold()]),
              value: __("Find {0} in {1}", [txt2, __(route[1])]),
              route_options: options,
              onclick: function() {
                cur_list.show();
              },
              index: 90,
              default: "Current",
              match: txt2
            });
          }
        }
        make_calculator(txt) {
          var first = txt.substr(0, 1);
          if (first == parseInt(first) || first === "(" || first === "=") {
            if (first === "=") {
              txt = txt.substr(1);
            }
            try {
              var val = eval(txt);
              var formatted_value = __("{0} = {1}", [txt, (val + "").bold()]);
              this.options.push({
                label: formatted_value,
                value: __("{0} = {1}", [txt, val]),
                match: val,
                index: 80,
                default: "Calculator",
                onclick: function() {
                  frappe.msgprint(formatted_value, __("Result"));
                }
              });
            } catch (e2) {
            }
          }
        }
        make_random(txt2) {
          if (txt2.toLowerCase().includes("random")) {
            this.options.push({
              label: __("Generate Random Password"),
              value: frappe.utils.get_random(16),
              onclick: function() {
                frappe.msgprint(frappe.utils.get_random(16), __("Result"));
              }
            });
          }
        }
      };
    }
  });

  // node_modules/localforage/dist/localforage.js
  var require_localforage = __commonJS({
    "node_modules/localforage/dist/localforage.js"(exports2, module2) {
      (function(f3) {
        if (typeof exports2 === "object" && typeof module2 !== "undefined") {
          module2.exports = f3();
        } else if (typeof define === "function" && define.amd) {
          define([], f3);
        } else {
          var g2;
          if (typeof window !== "undefined") {
            g2 = window;
          } else if (typeof global !== "undefined") {
            g2 = global;
          } else if (typeof self !== "undefined") {
            g2 = self;
          } else {
            g2 = this;
          }
          g2.localforage = f3();
        }
      })(function() {
        var define2, module3, exports3;
        return function e2(t3, n2, r2) {
          function s2(o3, u2) {
            if (!n2[o3]) {
              if (!t3[o3]) {
                var a2 = typeof __require == "function" && __require;
                if (!u2 && a2)
                  return a2(o3, true);
                if (i2)
                  return i2(o3, true);
                var f3 = new Error("Cannot find module '" + o3 + "'");
                throw f3.code = "MODULE_NOT_FOUND", f3;
              }
              var l2 = n2[o3] = { exports: {} };
              t3[o3][0].call(l2.exports, function(e3) {
                var n3 = t3[o3][1][e3];
                return s2(n3 ? n3 : e3);
              }, l2, l2.exports, e2, t3, n2, r2);
            }
            return n2[o3].exports;
          }
          var i2 = typeof __require == "function" && __require;
          for (var o2 = 0; o2 < r2.length; o2++)
            s2(r2[o2]);
          return s2;
        }({ 1: [function(_dereq_, module4, exports4) {
          (function(global2) {
            "use strict";
            var Mutation = global2.MutationObserver || global2.WebKitMutationObserver;
            var scheduleDrain;
            {
              if (Mutation) {
                var called = 0;
                var observer = new Mutation(nextTick);
                var element = global2.document.createTextNode("");
                observer.observe(element, {
                  characterData: true
                });
                scheduleDrain = function() {
                  element.data = called = ++called % 2;
                };
              } else if (!global2.setImmediate && typeof global2.MessageChannel !== "undefined") {
                var channel = new global2.MessageChannel();
                channel.port1.onmessage = nextTick;
                scheduleDrain = function() {
                  channel.port2.postMessage(0);
                };
              } else if ("document" in global2 && "onreadystatechange" in global2.document.createElement("script")) {
                scheduleDrain = function() {
                  var scriptEl = global2.document.createElement("script");
                  scriptEl.onreadystatechange = function() {
                    nextTick();
                    scriptEl.onreadystatechange = null;
                    scriptEl.parentNode.removeChild(scriptEl);
                    scriptEl = null;
                  };
                  global2.document.documentElement.appendChild(scriptEl);
                };
              } else {
                scheduleDrain = function() {
                  setTimeout(nextTick, 0);
                };
              }
            }
            var draining;
            var queue = [];
            function nextTick() {
              draining = true;
              var i2, oldQueue;
              var len = queue.length;
              while (len) {
                oldQueue = queue;
                queue = [];
                i2 = -1;
                while (++i2 < len) {
                  oldQueue[i2]();
                }
                len = queue.length;
              }
              draining = false;
            }
            module4.exports = immediate;
            function immediate(task) {
              if (queue.push(task) === 1 && !draining) {
                scheduleDrain();
              }
            }
          }).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
        }, {}], 2: [function(_dereq_, module4, exports4) {
          "use strict";
          var immediate = _dereq_(1);
          function INTERNAL() {
          }
          var handlers = {};
          var REJECTED = ["REJECTED"];
          var FULFILLED = ["FULFILLED"];
          var PENDING = ["PENDING"];
          module4.exports = Promise2;
          function Promise2(resolver) {
            if (typeof resolver !== "function") {
              throw new TypeError("resolver must be a function");
            }
            this.state = PENDING;
            this.queue = [];
            this.outcome = void 0;
            if (resolver !== INTERNAL) {
              safelyResolveThenable(this, resolver);
            }
          }
          Promise2.prototype["catch"] = function(onRejected) {
            return this.then(null, onRejected);
          };
          Promise2.prototype.then = function(onFulfilled, onRejected) {
            if (typeof onFulfilled !== "function" && this.state === FULFILLED || typeof onRejected !== "function" && this.state === REJECTED) {
              return this;
            }
            var promise = new this.constructor(INTERNAL);
            if (this.state !== PENDING) {
              var resolver = this.state === FULFILLED ? onFulfilled : onRejected;
              unwrap(promise, resolver, this.outcome);
            } else {
              this.queue.push(new QueueItem(promise, onFulfilled, onRejected));
            }
            return promise;
          };
          function QueueItem(promise, onFulfilled, onRejected) {
            this.promise = promise;
            if (typeof onFulfilled === "function") {
              this.onFulfilled = onFulfilled;
              this.callFulfilled = this.otherCallFulfilled;
            }
            if (typeof onRejected === "function") {
              this.onRejected = onRejected;
              this.callRejected = this.otherCallRejected;
            }
          }
          QueueItem.prototype.callFulfilled = function(value) {
            handlers.resolve(this.promise, value);
          };
          QueueItem.prototype.otherCallFulfilled = function(value) {
            unwrap(this.promise, this.onFulfilled, value);
          };
          QueueItem.prototype.callRejected = function(value) {
            handlers.reject(this.promise, value);
          };
          QueueItem.prototype.otherCallRejected = function(value) {
            unwrap(this.promise, this.onRejected, value);
          };
          function unwrap(promise, func, value) {
            immediate(function() {
              var returnValue;
              try {
                returnValue = func(value);
              } catch (e2) {
                return handlers.reject(promise, e2);
              }
              if (returnValue === promise) {
                handlers.reject(promise, new TypeError("Cannot resolve promise with itself"));
              } else {
                handlers.resolve(promise, returnValue);
              }
            });
          }
          handlers.resolve = function(self2, value) {
            var result = tryCatch(getThen, value);
            if (result.status === "error") {
              return handlers.reject(self2, result.value);
            }
            var thenable = result.value;
            if (thenable) {
              safelyResolveThenable(self2, thenable);
            } else {
              self2.state = FULFILLED;
              self2.outcome = value;
              var i2 = -1;
              var len = self2.queue.length;
              while (++i2 < len) {
                self2.queue[i2].callFulfilled(value);
              }
            }
            return self2;
          };
          handlers.reject = function(self2, error) {
            self2.state = REJECTED;
            self2.outcome = error;
            var i2 = -1;
            var len = self2.queue.length;
            while (++i2 < len) {
              self2.queue[i2].callRejected(error);
            }
            return self2;
          };
          function getThen(obj) {
            var then = obj && obj.then;
            if (obj && (typeof obj === "object" || typeof obj === "function") && typeof then === "function") {
              return function appyThen() {
                then.apply(obj, arguments);
              };
            }
          }
          function safelyResolveThenable(self2, thenable) {
            var called = false;
            function onError(value) {
              if (called) {
                return;
              }
              called = true;
              handlers.reject(self2, value);
            }
            function onSuccess(value) {
              if (called) {
                return;
              }
              called = true;
              handlers.resolve(self2, value);
            }
            function tryToUnwrap() {
              thenable(onSuccess, onError);
            }
            var result = tryCatch(tryToUnwrap);
            if (result.status === "error") {
              onError(result.value);
            }
          }
          function tryCatch(func, value) {
            var out = {};
            try {
              out.value = func(value);
              out.status = "success";
            } catch (e2) {
              out.status = "error";
              out.value = e2;
            }
            return out;
          }
          Promise2.resolve = resolve;
          function resolve(value) {
            if (value instanceof this) {
              return value;
            }
            return handlers.resolve(new this(INTERNAL), value);
          }
          Promise2.reject = reject;
          function reject(reason) {
            var promise = new this(INTERNAL);
            return handlers.reject(promise, reason);
          }
          Promise2.all = all;
          function all(iterable) {
            var self2 = this;
            if (Object.prototype.toString.call(iterable) !== "[object Array]") {
              return this.reject(new TypeError("must be an array"));
            }
            var len = iterable.length;
            var called = false;
            if (!len) {
              return this.resolve([]);
            }
            var values = new Array(len);
            var resolved = 0;
            var i2 = -1;
            var promise = new this(INTERNAL);
            while (++i2 < len) {
              allResolver(iterable[i2], i2);
            }
            return promise;
            function allResolver(value, i3) {
              self2.resolve(value).then(resolveFromAll, function(error) {
                if (!called) {
                  called = true;
                  handlers.reject(promise, error);
                }
              });
              function resolveFromAll(outValue) {
                values[i3] = outValue;
                if (++resolved === len && !called) {
                  called = true;
                  handlers.resolve(promise, values);
                }
              }
            }
          }
          Promise2.race = race;
          function race(iterable) {
            var self2 = this;
            if (Object.prototype.toString.call(iterable) !== "[object Array]") {
              return this.reject(new TypeError("must be an array"));
            }
            var len = iterable.length;
            var called = false;
            if (!len) {
              return this.resolve([]);
            }
            var i2 = -1;
            var promise = new this(INTERNAL);
            while (++i2 < len) {
              resolver(iterable[i2]);
            }
            return promise;
            function resolver(value) {
              self2.resolve(value).then(function(response) {
                if (!called) {
                  called = true;
                  handlers.resolve(promise, response);
                }
              }, function(error) {
                if (!called) {
                  called = true;
                  handlers.reject(promise, error);
                }
              });
            }
          }
        }, { "1": 1 }], 3: [function(_dereq_, module4, exports4) {
          (function(global2) {
            "use strict";
            if (typeof global2.Promise !== "function") {
              global2.Promise = _dereq_(2);
            }
          }).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
        }, { "2": 2 }], 4: [function(_dereq_, module4, exports4) {
          "use strict";
          var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
            return typeof obj;
          } : function(obj) {
            return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
          };
          function _classCallCheck(instance, Constructor) {
            if (!(instance instanceof Constructor)) {
              throw new TypeError("Cannot call a class as a function");
            }
          }
          function getIDB() {
            try {
              if (typeof indexedDB !== "undefined") {
                return indexedDB;
              }
              if (typeof webkitIndexedDB !== "undefined") {
                return webkitIndexedDB;
              }
              if (typeof mozIndexedDB !== "undefined") {
                return mozIndexedDB;
              }
              if (typeof OIndexedDB !== "undefined") {
                return OIndexedDB;
              }
              if (typeof msIndexedDB !== "undefined") {
                return msIndexedDB;
              }
            } catch (e2) {
              return;
            }
          }
          var idb = getIDB();
          function isIndexedDBValid() {
            try {
              if (!idb || !idb.open) {
                return false;
              }
              var isSafari = typeof openDatabase !== "undefined" && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);
              var hasFetch = typeof fetch === "function" && fetch.toString().indexOf("[native code") !== -1;
              return (!isSafari || hasFetch) && typeof indexedDB !== "undefined" && typeof IDBKeyRange !== "undefined";
            } catch (e2) {
              return false;
            }
          }
          function createBlob(parts, properties) {
            parts = parts || [];
            properties = properties || {};
            try {
              return new Blob(parts, properties);
            } catch (e2) {
              if (e2.name !== "TypeError") {
                throw e2;
              }
              var Builder = typeof BlobBuilder !== "undefined" ? BlobBuilder : typeof MSBlobBuilder !== "undefined" ? MSBlobBuilder : typeof MozBlobBuilder !== "undefined" ? MozBlobBuilder : WebKitBlobBuilder;
              var builder = new Builder();
              for (var i2 = 0; i2 < parts.length; i2 += 1) {
                builder.append(parts[i2]);
              }
              return builder.getBlob(properties.type);
            }
          }
          if (typeof Promise === "undefined") {
            _dereq_(3);
          }
          var Promise$1 = Promise;
          function executeCallback(promise, callback) {
            if (callback) {
              promise.then(function(result) {
                callback(null, result);
              }, function(error) {
                callback(error);
              });
            }
          }
          function executeTwoCallbacks(promise, callback, errorCallback) {
            if (typeof callback === "function") {
              promise.then(callback);
            }
            if (typeof errorCallback === "function") {
              promise["catch"](errorCallback);
            }
          }
          function normalizeKey(key3) {
            if (typeof key3 !== "string") {
              console.warn(key3 + " used as a key, but it is not a string.");
              key3 = String(key3);
            }
            return key3;
          }
          function getCallback() {
            if (arguments.length && typeof arguments[arguments.length - 1] === "function") {
              return arguments[arguments.length - 1];
            }
          }
          var DETECT_BLOB_SUPPORT_STORE = "local-forage-detect-blob-support";
          var supportsBlobs = void 0;
          var dbContexts = {};
          var toString = Object.prototype.toString;
          var READ_ONLY = "readonly";
          var READ_WRITE = "readwrite";
          function _binStringToArrayBuffer(bin) {
            var length2 = bin.length;
            var buf = new ArrayBuffer(length2);
            var arr = new Uint8Array(buf);
            for (var i2 = 0; i2 < length2; i2++) {
              arr[i2] = bin.charCodeAt(i2);
            }
            return buf;
          }
          function _checkBlobSupportWithoutCaching(idb2) {
            return new Promise$1(function(resolve) {
              var txn = idb2.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);
              var blob = createBlob([""]);
              txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, "key");
              txn.onabort = function(e2) {
                e2.preventDefault();
                e2.stopPropagation();
                resolve(false);
              };
              txn.oncomplete = function() {
                var matchedChrome = navigator.userAgent.match(/Chrome\/(\d+)/);
                var matchedEdge = navigator.userAgent.match(/Edge\//);
                resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);
              };
            })["catch"](function() {
              return false;
            });
          }
          function _checkBlobSupport(idb2) {
            if (typeof supportsBlobs === "boolean") {
              return Promise$1.resolve(supportsBlobs);
            }
            return _checkBlobSupportWithoutCaching(idb2).then(function(value) {
              supportsBlobs = value;
              return supportsBlobs;
            });
          }
          function _deferReadiness(dbInfo) {
            var dbContext = dbContexts[dbInfo.name];
            var deferredOperation = {};
            deferredOperation.promise = new Promise$1(function(resolve, reject) {
              deferredOperation.resolve = resolve;
              deferredOperation.reject = reject;
            });
            dbContext.deferredOperations.push(deferredOperation);
            if (!dbContext.dbReady) {
              dbContext.dbReady = deferredOperation.promise;
            } else {
              dbContext.dbReady = dbContext.dbReady.then(function() {
                return deferredOperation.promise;
              });
            }
          }
          function _advanceReadiness(dbInfo) {
            var dbContext = dbContexts[dbInfo.name];
            var deferredOperation = dbContext.deferredOperations.pop();
            if (deferredOperation) {
              deferredOperation.resolve();
              return deferredOperation.promise;
            }
          }
          function _rejectReadiness(dbInfo, err) {
            var dbContext = dbContexts[dbInfo.name];
            var deferredOperation = dbContext.deferredOperations.pop();
            if (deferredOperation) {
              deferredOperation.reject(err);
              return deferredOperation.promise;
            }
          }
          function _getConnection(dbInfo, upgradeNeeded) {
            return new Promise$1(function(resolve, reject) {
              dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();
              if (dbInfo.db) {
                if (upgradeNeeded) {
                  _deferReadiness(dbInfo);
                  dbInfo.db.close();
                } else {
                  return resolve(dbInfo.db);
                }
              }
              var dbArgs = [dbInfo.name];
              if (upgradeNeeded) {
                dbArgs.push(dbInfo.version);
              }
              var openreq = idb.open.apply(idb, dbArgs);
              if (upgradeNeeded) {
                openreq.onupgradeneeded = function(e2) {
                  var db = openreq.result;
                  try {
                    db.createObjectStore(dbInfo.storeName);
                    if (e2.oldVersion <= 1) {
                      db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);
                    }
                  } catch (ex) {
                    if (ex.name === "ConstraintError") {
                      console.warn('The database "' + dbInfo.name + '" has been upgraded from version ' + e2.oldVersion + " to version " + e2.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                    } else {
                      throw ex;
                    }
                  }
                };
              }
              openreq.onerror = function(e2) {
                e2.preventDefault();
                reject(openreq.error);
              };
              openreq.onsuccess = function() {
                resolve(openreq.result);
                _advanceReadiness(dbInfo);
              };
            });
          }
          function _getOriginalConnection(dbInfo) {
            return _getConnection(dbInfo, false);
          }
          function _getUpgradedConnection(dbInfo) {
            return _getConnection(dbInfo, true);
          }
          function _isUpgradeNeeded(dbInfo, defaultVersion) {
            if (!dbInfo.db) {
              return true;
            }
            var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
            var isDowngrade = dbInfo.version < dbInfo.db.version;
            var isUpgrade = dbInfo.version > dbInfo.db.version;
            if (isDowngrade) {
              if (dbInfo.version !== defaultVersion) {
                console.warn('The database "' + dbInfo.name + `" can't be downgraded from version ` + dbInfo.db.version + " to version " + dbInfo.version + ".");
              }
              dbInfo.version = dbInfo.db.version;
            }
            if (isUpgrade || isNewStore) {
              if (isNewStore) {
                var incVersion = dbInfo.db.version + 1;
                if (incVersion > dbInfo.version) {
                  dbInfo.version = incVersion;
                }
              }
              return true;
            }
            return false;
          }
          function _encodeBlob(blob) {
            return new Promise$1(function(resolve, reject) {
              var reader = new FileReader();
              reader.onerror = reject;
              reader.onloadend = function(e2) {
                var base64 = btoa(e2.target.result || "");
                resolve({
                  __local_forage_encoded_blob: true,
                  data: base64,
                  type: blob.type
                });
              };
              reader.readAsBinaryString(blob);
            });
          }
          function _decodeBlob(encodedBlob) {
            var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));
            return createBlob([arrayBuff], { type: encodedBlob.type });
          }
          function _isEncodedBlob(value) {
            return value && value.__local_forage_encoded_blob;
          }
          function _fullyReady(callback) {
            var self2 = this;
            var promise = self2._initReady().then(function() {
              var dbContext = dbContexts[self2._dbInfo.name];
              if (dbContext && dbContext.dbReady) {
                return dbContext.dbReady;
              }
            });
            executeTwoCallbacks(promise, callback, callback);
            return promise;
          }
          function _tryReconnect(dbInfo) {
            _deferReadiness(dbInfo);
            var dbContext = dbContexts[dbInfo.name];
            var forages = dbContext.forages;
            for (var i2 = 0; i2 < forages.length; i2++) {
              var forage = forages[i2];
              if (forage._dbInfo.db) {
                forage._dbInfo.db.close();
                forage._dbInfo.db = null;
              }
            }
            dbInfo.db = null;
            return _getOriginalConnection(dbInfo).then(function(db) {
              dbInfo.db = db;
              if (_isUpgradeNeeded(dbInfo)) {
                return _getUpgradedConnection(dbInfo);
              }
              return db;
            }).then(function(db) {
              dbInfo.db = dbContext.db = db;
              for (var i3 = 0; i3 < forages.length; i3++) {
                forages[i3]._dbInfo.db = db;
              }
            })["catch"](function(err) {
              _rejectReadiness(dbInfo, err);
              throw err;
            });
          }
          function createTransaction(dbInfo, mode, callback, retries) {
            if (retries === void 0) {
              retries = 1;
            }
            try {
              var tx = dbInfo.db.transaction(dbInfo.storeName, mode);
              callback(null, tx);
            } catch (err) {
              if (retries > 0 && (!dbInfo.db || err.name === "InvalidStateError" || err.name === "NotFoundError")) {
                return Promise$1.resolve().then(function() {
                  if (!dbInfo.db || err.name === "NotFoundError" && !dbInfo.db.objectStoreNames.contains(dbInfo.storeName) && dbInfo.version <= dbInfo.db.version) {
                    if (dbInfo.db) {
                      dbInfo.version = dbInfo.db.version + 1;
                    }
                    return _getUpgradedConnection(dbInfo);
                  }
                }).then(function() {
                  return _tryReconnect(dbInfo).then(function() {
                    createTransaction(dbInfo, mode, callback, retries - 1);
                  });
                })["catch"](callback);
              }
              callback(err);
            }
          }
          function createDbContext() {
            return {
              forages: [],
              db: null,
              dbReady: null,
              deferredOperations: []
            };
          }
          function _initStorage(options) {
            var self2 = this;
            var dbInfo = {
              db: null
            };
            if (options) {
              for (var i2 in options) {
                dbInfo[i2] = options[i2];
              }
            }
            var dbContext = dbContexts[dbInfo.name];
            if (!dbContext) {
              dbContext = createDbContext();
              dbContexts[dbInfo.name] = dbContext;
            }
            dbContext.forages.push(self2);
            if (!self2._initReady) {
              self2._initReady = self2.ready;
              self2.ready = _fullyReady;
            }
            var initPromises = [];
            function ignoreErrors() {
              return Promise$1.resolve();
            }
            for (var j2 = 0; j2 < dbContext.forages.length; j2++) {
              var forage = dbContext.forages[j2];
              if (forage !== self2) {
                initPromises.push(forage._initReady()["catch"](ignoreErrors));
              }
            }
            var forages = dbContext.forages.slice(0);
            return Promise$1.all(initPromises).then(function() {
              dbInfo.db = dbContext.db;
              return _getOriginalConnection(dbInfo);
            }).then(function(db) {
              dbInfo.db = db;
              if (_isUpgradeNeeded(dbInfo, self2._defaultConfig.version)) {
                return _getUpgradedConnection(dbInfo);
              }
              return db;
            }).then(function(db) {
              dbInfo.db = dbContext.db = db;
              self2._dbInfo = dbInfo;
              for (var k2 = 0; k2 < forages.length; k2++) {
                var forage2 = forages[k2];
                if (forage2 !== self2) {
                  forage2._dbInfo.db = dbInfo.db;
                  forage2._dbInfo.version = dbInfo.version;
                }
              }
            });
          }
          function getItem(key3, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    var req = store.get(key3);
                    req.onsuccess = function() {
                      var value = req.result;
                      if (value === void 0) {
                        value = null;
                      }
                      if (_isEncodedBlob(value)) {
                        value = _decodeBlob(value);
                      }
                      resolve(value);
                    };
                    req.onerror = function() {
                      reject(req.error);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function iterate(iterator, callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    var req = store.openCursor();
                    var iterationNumber = 1;
                    req.onsuccess = function() {
                      var cursor = req.result;
                      if (cursor) {
                        var value = cursor.value;
                        if (_isEncodedBlob(value)) {
                          value = _decodeBlob(value);
                        }
                        var result = iterator(value, cursor.key, iterationNumber++);
                        if (result !== void 0) {
                          resolve(result);
                        } else {
                          cursor["continue"]();
                        }
                      } else {
                        resolve();
                      }
                    };
                    req.onerror = function() {
                      reject(req.error);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function setItem(key3, value, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = new Promise$1(function(resolve, reject) {
              var dbInfo;
              self2.ready().then(function() {
                dbInfo = self2._dbInfo;
                if (toString.call(value) === "[object Blob]") {
                  return _checkBlobSupport(dbInfo.db).then(function(blobSupport) {
                    if (blobSupport) {
                      return value;
                    }
                    return _encodeBlob(value);
                  });
                }
                return value;
              }).then(function(value2) {
                createTransaction(self2._dbInfo, READ_WRITE, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    if (value2 === null) {
                      value2 = void 0;
                    }
                    var req = store.put(value2, key3);
                    transaction.oncomplete = function() {
                      if (value2 === void 0) {
                        value2 = null;
                      }
                      resolve(value2);
                    };
                    transaction.onabort = transaction.onerror = function() {
                      var err2 = req.error ? req.error : req.transaction.error;
                      reject(err2);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function removeItem(key3, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                createTransaction(self2._dbInfo, READ_WRITE, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    var req = store["delete"](key3);
                    transaction.oncomplete = function() {
                      resolve();
                    };
                    transaction.onerror = function() {
                      reject(req.error);
                    };
                    transaction.onabort = function() {
                      var err2 = req.error ? req.error : req.transaction.error;
                      reject(err2);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function clear(callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                createTransaction(self2._dbInfo, READ_WRITE, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    var req = store.clear();
                    transaction.oncomplete = function() {
                      resolve();
                    };
                    transaction.onabort = transaction.onerror = function() {
                      var err2 = req.error ? req.error : req.transaction.error;
                      reject(err2);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function length(callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    var req = store.count();
                    req.onsuccess = function() {
                      resolve(req.result);
                    };
                    req.onerror = function() {
                      reject(req.error);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function key2(n2, callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              if (n2 < 0) {
                resolve(null);
                return;
              }
              self2.ready().then(function() {
                createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    var advanced = false;
                    var req = store.openKeyCursor();
                    req.onsuccess = function() {
                      var cursor = req.result;
                      if (!cursor) {
                        resolve(null);
                        return;
                      }
                      if (n2 === 0) {
                        resolve(cursor.key);
                      } else {
                        if (!advanced) {
                          advanced = true;
                          cursor.advance(n2);
                        } else {
                          resolve(cursor.key);
                        }
                      }
                    };
                    req.onerror = function() {
                      reject(req.error);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function keys(callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                  if (err) {
                    return reject(err);
                  }
                  try {
                    var store = transaction.objectStore(self2._dbInfo.storeName);
                    var req = store.openKeyCursor();
                    var keys2 = [];
                    req.onsuccess = function() {
                      var cursor = req.result;
                      if (!cursor) {
                        resolve(keys2);
                        return;
                      }
                      keys2.push(cursor.key);
                      cursor["continue"]();
                    };
                    req.onerror = function() {
                      reject(req.error);
                    };
                  } catch (e2) {
                    reject(e2);
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function dropInstance(options, callback) {
            callback = getCallback.apply(this, arguments);
            var currentConfig = this.config();
            options = typeof options !== "function" && options || {};
            if (!options.name) {
              options.name = options.name || currentConfig.name;
              options.storeName = options.storeName || currentConfig.storeName;
            }
            var self2 = this;
            var promise;
            if (!options.name) {
              promise = Promise$1.reject("Invalid arguments");
            } else {
              var isCurrentDb = options.name === currentConfig.name && self2._dbInfo.db;
              var dbPromise = isCurrentDb ? Promise$1.resolve(self2._dbInfo.db) : _getOriginalConnection(options).then(function(db) {
                var dbContext = dbContexts[options.name];
                var forages = dbContext.forages;
                dbContext.db = db;
                for (var i2 = 0; i2 < forages.length; i2++) {
                  forages[i2]._dbInfo.db = db;
                }
                return db;
              });
              if (!options.storeName) {
                promise = dbPromise.then(function(db) {
                  _deferReadiness(options);
                  var dbContext = dbContexts[options.name];
                  var forages = dbContext.forages;
                  db.close();
                  for (var i2 = 0; i2 < forages.length; i2++) {
                    var forage = forages[i2];
                    forage._dbInfo.db = null;
                  }
                  var dropDBPromise = new Promise$1(function(resolve, reject) {
                    var req = idb.deleteDatabase(options.name);
                    req.onerror = req.onblocked = function(err) {
                      var db2 = req.result;
                      if (db2) {
                        db2.close();
                      }
                      reject(err);
                    };
                    req.onsuccess = function() {
                      var db2 = req.result;
                      if (db2) {
                        db2.close();
                      }
                      resolve(db2);
                    };
                  });
                  return dropDBPromise.then(function(db2) {
                    dbContext.db = db2;
                    for (var i3 = 0; i3 < forages.length; i3++) {
                      var _forage = forages[i3];
                      _advanceReadiness(_forage._dbInfo);
                    }
                  })["catch"](function(err) {
                    (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function() {
                    });
                    throw err;
                  });
                });
              } else {
                promise = dbPromise.then(function(db) {
                  if (!db.objectStoreNames.contains(options.storeName)) {
                    return;
                  }
                  var newVersion = db.version + 1;
                  _deferReadiness(options);
                  var dbContext = dbContexts[options.name];
                  var forages = dbContext.forages;
                  db.close();
                  for (var i2 = 0; i2 < forages.length; i2++) {
                    var forage = forages[i2];
                    forage._dbInfo.db = null;
                    forage._dbInfo.version = newVersion;
                  }
                  var dropObjectPromise = new Promise$1(function(resolve, reject) {
                    var req = idb.open(options.name, newVersion);
                    req.onerror = function(err) {
                      var db2 = req.result;
                      db2.close();
                      reject(err);
                    };
                    req.onupgradeneeded = function() {
                      var db2 = req.result;
                      db2.deleteObjectStore(options.storeName);
                    };
                    req.onsuccess = function() {
                      var db2 = req.result;
                      db2.close();
                      resolve(db2);
                    };
                  });
                  return dropObjectPromise.then(function(db2) {
                    dbContext.db = db2;
                    for (var j2 = 0; j2 < forages.length; j2++) {
                      var _forage2 = forages[j2];
                      _forage2._dbInfo.db = db2;
                      _advanceReadiness(_forage2._dbInfo);
                    }
                  })["catch"](function(err) {
                    (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function() {
                    });
                    throw err;
                  });
                });
              }
            }
            executeCallback(promise, callback);
            return promise;
          }
          var asyncStorage = {
            _driver: "asyncStorage",
            _initStorage,
            _support: isIndexedDBValid(),
            iterate,
            getItem,
            setItem,
            removeItem,
            clear,
            length,
            key: key2,
            keys,
            dropInstance
          };
          function isWebSQLValid() {
            return typeof openDatabase === "function";
          }
          var BASE_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
          var BLOB_TYPE_PREFIX = "~~local_forage_type~";
          var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;
          var SERIALIZED_MARKER = "__lfsc__:";
          var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;
          var TYPE_ARRAYBUFFER = "arbf";
          var TYPE_BLOB = "blob";
          var TYPE_INT8ARRAY = "si08";
          var TYPE_UINT8ARRAY = "ui08";
          var TYPE_UINT8CLAMPEDARRAY = "uic8";
          var TYPE_INT16ARRAY = "si16";
          var TYPE_INT32ARRAY = "si32";
          var TYPE_UINT16ARRAY = "ur16";
          var TYPE_UINT32ARRAY = "ui32";
          var TYPE_FLOAT32ARRAY = "fl32";
          var TYPE_FLOAT64ARRAY = "fl64";
          var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;
          var toString$1 = Object.prototype.toString;
          function stringToBuffer(serializedString) {
            var bufferLength = serializedString.length * 0.75;
            var len = serializedString.length;
            var i2;
            var p2 = 0;
            var encoded1, encoded2, encoded3, encoded4;
            if (serializedString[serializedString.length - 1] === "=") {
              bufferLength--;
              if (serializedString[serializedString.length - 2] === "=") {
                bufferLength--;
              }
            }
            var buffer = new ArrayBuffer(bufferLength);
            var bytes = new Uint8Array(buffer);
            for (i2 = 0; i2 < len; i2 += 4) {
              encoded1 = BASE_CHARS.indexOf(serializedString[i2]);
              encoded2 = BASE_CHARS.indexOf(serializedString[i2 + 1]);
              encoded3 = BASE_CHARS.indexOf(serializedString[i2 + 2]);
              encoded4 = BASE_CHARS.indexOf(serializedString[i2 + 3]);
              bytes[p2++] = encoded1 << 2 | encoded2 >> 4;
              bytes[p2++] = (encoded2 & 15) << 4 | encoded3 >> 2;
              bytes[p2++] = (encoded3 & 3) << 6 | encoded4 & 63;
            }
            return buffer;
          }
          function bufferToString(buffer) {
            var bytes = new Uint8Array(buffer);
            var base64String = "";
            var i2;
            for (i2 = 0; i2 < bytes.length; i2 += 3) {
              base64String += BASE_CHARS[bytes[i2] >> 2];
              base64String += BASE_CHARS[(bytes[i2] & 3) << 4 | bytes[i2 + 1] >> 4];
              base64String += BASE_CHARS[(bytes[i2 + 1] & 15) << 2 | bytes[i2 + 2] >> 6];
              base64String += BASE_CHARS[bytes[i2 + 2] & 63];
            }
            if (bytes.length % 3 === 2) {
              base64String = base64String.substring(0, base64String.length - 1) + "=";
            } else if (bytes.length % 3 === 1) {
              base64String = base64String.substring(0, base64String.length - 2) + "==";
            }
            return base64String;
          }
          function serialize(value, callback) {
            var valueType = "";
            if (value) {
              valueType = toString$1.call(value);
            }
            if (value && (valueType === "[object ArrayBuffer]" || value.buffer && toString$1.call(value.buffer) === "[object ArrayBuffer]")) {
              var buffer;
              var marker = SERIALIZED_MARKER;
              if (value instanceof ArrayBuffer) {
                buffer = value;
                marker += TYPE_ARRAYBUFFER;
              } else {
                buffer = value.buffer;
                if (valueType === "[object Int8Array]") {
                  marker += TYPE_INT8ARRAY;
                } else if (valueType === "[object Uint8Array]") {
                  marker += TYPE_UINT8ARRAY;
                } else if (valueType === "[object Uint8ClampedArray]") {
                  marker += TYPE_UINT8CLAMPEDARRAY;
                } else if (valueType === "[object Int16Array]") {
                  marker += TYPE_INT16ARRAY;
                } else if (valueType === "[object Uint16Array]") {
                  marker += TYPE_UINT16ARRAY;
                } else if (valueType === "[object Int32Array]") {
                  marker += TYPE_INT32ARRAY;
                } else if (valueType === "[object Uint32Array]") {
                  marker += TYPE_UINT32ARRAY;
                } else if (valueType === "[object Float32Array]") {
                  marker += TYPE_FLOAT32ARRAY;
                } else if (valueType === "[object Float64Array]") {
                  marker += TYPE_FLOAT64ARRAY;
                } else {
                  callback(new Error("Failed to get type for BinaryArray"));
                }
              }
              callback(marker + bufferToString(buffer));
            } else if (valueType === "[object Blob]") {
              var fileReader = new FileReader();
              fileReader.onload = function() {
                var str = BLOB_TYPE_PREFIX + value.type + "~" + bufferToString(this.result);
                callback(SERIALIZED_MARKER + TYPE_BLOB + str);
              };
              fileReader.readAsArrayBuffer(value);
            } else {
              try {
                callback(JSON.stringify(value));
              } catch (e2) {
                console.error("Couldn't convert value into a JSON string: ", value);
                callback(null, e2);
              }
            }
          }
          function deserialize(value) {
            if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
              return JSON.parse(value);
            }
            var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
            var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);
            var blobType;
            if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
              var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
              blobType = matcher[1];
              serializedString = serializedString.substring(matcher[0].length);
            }
            var buffer = stringToBuffer(serializedString);
            switch (type) {
              case TYPE_ARRAYBUFFER:
                return buffer;
              case TYPE_BLOB:
                return createBlob([buffer], { type: blobType });
              case TYPE_INT8ARRAY:
                return new Int8Array(buffer);
              case TYPE_UINT8ARRAY:
                return new Uint8Array(buffer);
              case TYPE_UINT8CLAMPEDARRAY:
                return new Uint8ClampedArray(buffer);
              case TYPE_INT16ARRAY:
                return new Int16Array(buffer);
              case TYPE_UINT16ARRAY:
                return new Uint16Array(buffer);
              case TYPE_INT32ARRAY:
                return new Int32Array(buffer);
              case TYPE_UINT32ARRAY:
                return new Uint32Array(buffer);
              case TYPE_FLOAT32ARRAY:
                return new Float32Array(buffer);
              case TYPE_FLOAT64ARRAY:
                return new Float64Array(buffer);
              default:
                throw new Error("Unkown type: " + type);
            }
          }
          var localforageSerializer = {
            serialize,
            deserialize,
            stringToBuffer,
            bufferToString
          };
          function createDbTable(t3, dbInfo, callback, errorCallback) {
            t3.executeSql("CREATE TABLE IF NOT EXISTS " + dbInfo.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], callback, errorCallback);
          }
          function _initStorage$1(options) {
            var self2 = this;
            var dbInfo = {
              db: null
            };
            if (options) {
              for (var i2 in options) {
                dbInfo[i2] = typeof options[i2] !== "string" ? options[i2].toString() : options[i2];
              }
            }
            var dbInfoPromise = new Promise$1(function(resolve, reject) {
              try {
                dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
              } catch (e2) {
                return reject(e2);
              }
              dbInfo.db.transaction(function(t3) {
                createDbTable(t3, dbInfo, function() {
                  self2._dbInfo = dbInfo;
                  resolve();
                }, function(t4, error) {
                  reject(error);
                });
              }, reject);
            });
            dbInfo.serializer = localforageSerializer;
            return dbInfoPromise;
          }
          function tryExecuteSql(t3, dbInfo, sqlStatement, args, callback, errorCallback) {
            t3.executeSql(sqlStatement, args, callback, function(t4, error) {
              if (error.code === error.SYNTAX_ERR) {
                t4.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [dbInfo.storeName], function(t5, results) {
                  if (!results.rows.length) {
                    createDbTable(t5, dbInfo, function() {
                      t5.executeSql(sqlStatement, args, callback, errorCallback);
                    }, errorCallback);
                  } else {
                    errorCallback(t5, error);
                  }
                }, errorCallback);
              } else {
                errorCallback(t4, error);
              }
            }, errorCallback);
          }
          function getItem$1(key3, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                var dbInfo = self2._dbInfo;
                dbInfo.db.transaction(function(t3) {
                  tryExecuteSql(t3, dbInfo, "SELECT * FROM " + dbInfo.storeName + " WHERE key = ? LIMIT 1", [key3], function(t4, results) {
                    var result = results.rows.length ? results.rows.item(0).value : null;
                    if (result) {
                      result = dbInfo.serializer.deserialize(result);
                    }
                    resolve(result);
                  }, function(t4, error) {
                    reject(error);
                  });
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function iterate$1(iterator, callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                var dbInfo = self2._dbInfo;
                dbInfo.db.transaction(function(t3) {
                  tryExecuteSql(t3, dbInfo, "SELECT * FROM " + dbInfo.storeName, [], function(t4, results) {
                    var rows = results.rows;
                    var length2 = rows.length;
                    for (var i2 = 0; i2 < length2; i2++) {
                      var item = rows.item(i2);
                      var result = item.value;
                      if (result) {
                        result = dbInfo.serializer.deserialize(result);
                      }
                      result = iterator(result, item.key, i2 + 1);
                      if (result !== void 0) {
                        resolve(result);
                        return;
                      }
                    }
                    resolve();
                  }, function(t4, error) {
                    reject(error);
                  });
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function _setItem(key3, value, callback, retriesLeft) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                if (value === void 0) {
                  value = null;
                }
                var originalValue = value;
                var dbInfo = self2._dbInfo;
                dbInfo.serializer.serialize(value, function(value2, error) {
                  if (error) {
                    reject(error);
                  } else {
                    dbInfo.db.transaction(function(t3) {
                      tryExecuteSql(t3, dbInfo, "INSERT OR REPLACE INTO " + dbInfo.storeName + " (key, value) VALUES (?, ?)", [key3, value2], function() {
                        resolve(originalValue);
                      }, function(t4, error2) {
                        reject(error2);
                      });
                    }, function(sqlError) {
                      if (sqlError.code === sqlError.QUOTA_ERR) {
                        if (retriesLeft > 0) {
                          resolve(_setItem.apply(self2, [key3, originalValue, callback, retriesLeft - 1]));
                          return;
                        }
                        reject(sqlError);
                      }
                    });
                  }
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function setItem$1(key3, value, callback) {
            return _setItem.apply(this, [key3, value, callback, 1]);
          }
          function removeItem$1(key3, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                var dbInfo = self2._dbInfo;
                dbInfo.db.transaction(function(t3) {
                  tryExecuteSql(t3, dbInfo, "DELETE FROM " + dbInfo.storeName + " WHERE key = ?", [key3], function() {
                    resolve();
                  }, function(t4, error) {
                    reject(error);
                  });
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function clear$1(callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                var dbInfo = self2._dbInfo;
                dbInfo.db.transaction(function(t3) {
                  tryExecuteSql(t3, dbInfo, "DELETE FROM " + dbInfo.storeName, [], function() {
                    resolve();
                  }, function(t4, error) {
                    reject(error);
                  });
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function length$1(callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                var dbInfo = self2._dbInfo;
                dbInfo.db.transaction(function(t3) {
                  tryExecuteSql(t3, dbInfo, "SELECT COUNT(key) as c FROM " + dbInfo.storeName, [], function(t4, results) {
                    var result = results.rows.item(0).c;
                    resolve(result);
                  }, function(t4, error) {
                    reject(error);
                  });
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function key$1(n2, callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                var dbInfo = self2._dbInfo;
                dbInfo.db.transaction(function(t3) {
                  tryExecuteSql(t3, dbInfo, "SELECT key FROM " + dbInfo.storeName + " WHERE id = ? LIMIT 1", [n2 + 1], function(t4, results) {
                    var result = results.rows.length ? results.rows.item(0).key : null;
                    resolve(result);
                  }, function(t4, error) {
                    reject(error);
                  });
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function keys$1(callback) {
            var self2 = this;
            var promise = new Promise$1(function(resolve, reject) {
              self2.ready().then(function() {
                var dbInfo = self2._dbInfo;
                dbInfo.db.transaction(function(t3) {
                  tryExecuteSql(t3, dbInfo, "SELECT key FROM " + dbInfo.storeName, [], function(t4, results) {
                    var keys2 = [];
                    for (var i2 = 0; i2 < results.rows.length; i2++) {
                      keys2.push(results.rows.item(i2).key);
                    }
                    resolve(keys2);
                  }, function(t4, error) {
                    reject(error);
                  });
                });
              })["catch"](reject);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function getAllStoreNames(db) {
            return new Promise$1(function(resolve, reject) {
              db.transaction(function(t3) {
                t3.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function(t4, results) {
                  var storeNames = [];
                  for (var i2 = 0; i2 < results.rows.length; i2++) {
                    storeNames.push(results.rows.item(i2).name);
                  }
                  resolve({
                    db,
                    storeNames
                  });
                }, function(t4, error) {
                  reject(error);
                });
              }, function(sqlError) {
                reject(sqlError);
              });
            });
          }
          function dropInstance$1(options, callback) {
            callback = getCallback.apply(this, arguments);
            var currentConfig = this.config();
            options = typeof options !== "function" && options || {};
            if (!options.name) {
              options.name = options.name || currentConfig.name;
              options.storeName = options.storeName || currentConfig.storeName;
            }
            var self2 = this;
            var promise;
            if (!options.name) {
              promise = Promise$1.reject("Invalid arguments");
            } else {
              promise = new Promise$1(function(resolve) {
                var db;
                if (options.name === currentConfig.name) {
                  db = self2._dbInfo.db;
                } else {
                  db = openDatabase(options.name, "", "", 0);
                }
                if (!options.storeName) {
                  resolve(getAllStoreNames(db));
                } else {
                  resolve({
                    db,
                    storeNames: [options.storeName]
                  });
                }
              }).then(function(operationInfo) {
                return new Promise$1(function(resolve, reject) {
                  operationInfo.db.transaction(function(t3) {
                    function dropTable(storeName) {
                      return new Promise$1(function(resolve2, reject2) {
                        t3.executeSql("DROP TABLE IF EXISTS " + storeName, [], function() {
                          resolve2();
                        }, function(t4, error) {
                          reject2(error);
                        });
                      });
                    }
                    var operations = [];
                    for (var i2 = 0, len = operationInfo.storeNames.length; i2 < len; i2++) {
                      operations.push(dropTable(operationInfo.storeNames[i2]));
                    }
                    Promise$1.all(operations).then(function() {
                      resolve();
                    })["catch"](function(e2) {
                      reject(e2);
                    });
                  }, function(sqlError) {
                    reject(sqlError);
                  });
                });
              });
            }
            executeCallback(promise, callback);
            return promise;
          }
          var webSQLStorage = {
            _driver: "webSQLStorage",
            _initStorage: _initStorage$1,
            _support: isWebSQLValid(),
            iterate: iterate$1,
            getItem: getItem$1,
            setItem: setItem$1,
            removeItem: removeItem$1,
            clear: clear$1,
            length: length$1,
            key: key$1,
            keys: keys$1,
            dropInstance: dropInstance$1
          };
          function isLocalStorageValid() {
            try {
              return typeof localStorage !== "undefined" && "setItem" in localStorage && !!localStorage.setItem;
            } catch (e2) {
              return false;
            }
          }
          function _getKeyPrefix(options, defaultConfig) {
            var keyPrefix = options.name + "/";
            if (options.storeName !== defaultConfig.storeName) {
              keyPrefix += options.storeName + "/";
            }
            return keyPrefix;
          }
          function checkIfLocalStorageThrows() {
            var localStorageTestKey = "_localforage_support_test";
            try {
              localStorage.setItem(localStorageTestKey, true);
              localStorage.removeItem(localStorageTestKey);
              return false;
            } catch (e2) {
              return true;
            }
          }
          function _isLocalStorageUsable() {
            return !checkIfLocalStorageThrows() || localStorage.length > 0;
          }
          function _initStorage$2(options) {
            var self2 = this;
            var dbInfo = {};
            if (options) {
              for (var i2 in options) {
                dbInfo[i2] = options[i2];
              }
            }
            dbInfo.keyPrefix = _getKeyPrefix(options, self2._defaultConfig);
            if (!_isLocalStorageUsable()) {
              return Promise$1.reject();
            }
            self2._dbInfo = dbInfo;
            dbInfo.serializer = localforageSerializer;
            return Promise$1.resolve();
          }
          function clear$2(callback) {
            var self2 = this;
            var promise = self2.ready().then(function() {
              var keyPrefix = self2._dbInfo.keyPrefix;
              for (var i2 = localStorage.length - 1; i2 >= 0; i2--) {
                var key3 = localStorage.key(i2);
                if (key3.indexOf(keyPrefix) === 0) {
                  localStorage.removeItem(key3);
                }
              }
            });
            executeCallback(promise, callback);
            return promise;
          }
          function getItem$2(key3, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              var result = localStorage.getItem(dbInfo.keyPrefix + key3);
              if (result) {
                result = dbInfo.serializer.deserialize(result);
              }
              return result;
            });
            executeCallback(promise, callback);
            return promise;
          }
          function iterate$2(iterator, callback) {
            var self2 = this;
            var promise = self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              var keyPrefix = dbInfo.keyPrefix;
              var keyPrefixLength = keyPrefix.length;
              var length2 = localStorage.length;
              var iterationNumber = 1;
              for (var i2 = 0; i2 < length2; i2++) {
                var key3 = localStorage.key(i2);
                if (key3.indexOf(keyPrefix) !== 0) {
                  continue;
                }
                var value = localStorage.getItem(key3);
                if (value) {
                  value = dbInfo.serializer.deserialize(value);
                }
                value = iterator(value, key3.substring(keyPrefixLength), iterationNumber++);
                if (value !== void 0) {
                  return value;
                }
              }
            });
            executeCallback(promise, callback);
            return promise;
          }
          function key$2(n2, callback) {
            var self2 = this;
            var promise = self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              var result;
              try {
                result = localStorage.key(n2);
              } catch (error) {
                result = null;
              }
              if (result) {
                result = result.substring(dbInfo.keyPrefix.length);
              }
              return result;
            });
            executeCallback(promise, callback);
            return promise;
          }
          function keys$2(callback) {
            var self2 = this;
            var promise = self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              var length2 = localStorage.length;
              var keys2 = [];
              for (var i2 = 0; i2 < length2; i2++) {
                var itemKey = localStorage.key(i2);
                if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {
                  keys2.push(itemKey.substring(dbInfo.keyPrefix.length));
                }
              }
              return keys2;
            });
            executeCallback(promise, callback);
            return promise;
          }
          function length$2(callback) {
            var self2 = this;
            var promise = self2.keys().then(function(keys2) {
              return keys2.length;
            });
            executeCallback(promise, callback);
            return promise;
          }
          function removeItem$2(key3, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              localStorage.removeItem(dbInfo.keyPrefix + key3);
            });
            executeCallback(promise, callback);
            return promise;
          }
          function setItem$2(key3, value, callback) {
            var self2 = this;
            key3 = normalizeKey(key3);
            var promise = self2.ready().then(function() {
              if (value === void 0) {
                value = null;
              }
              var originalValue = value;
              return new Promise$1(function(resolve, reject) {
                var dbInfo = self2._dbInfo;
                dbInfo.serializer.serialize(value, function(value2, error) {
                  if (error) {
                    reject(error);
                  } else {
                    try {
                      localStorage.setItem(dbInfo.keyPrefix + key3, value2);
                      resolve(originalValue);
                    } catch (e2) {
                      if (e2.name === "QuotaExceededError" || e2.name === "NS_ERROR_DOM_QUOTA_REACHED") {
                        reject(e2);
                      }
                      reject(e2);
                    }
                  }
                });
              });
            });
            executeCallback(promise, callback);
            return promise;
          }
          function dropInstance$2(options, callback) {
            callback = getCallback.apply(this, arguments);
            options = typeof options !== "function" && options || {};
            if (!options.name) {
              var currentConfig = this.config();
              options.name = options.name || currentConfig.name;
              options.storeName = options.storeName || currentConfig.storeName;
            }
            var self2 = this;
            var promise;
            if (!options.name) {
              promise = Promise$1.reject("Invalid arguments");
            } else {
              promise = new Promise$1(function(resolve) {
                if (!options.storeName) {
                  resolve(options.name + "/");
                } else {
                  resolve(_getKeyPrefix(options, self2._defaultConfig));
                }
              }).then(function(keyPrefix) {
                for (var i2 = localStorage.length - 1; i2 >= 0; i2--) {
                  var key3 = localStorage.key(i2);
                  if (key3.indexOf(keyPrefix) === 0) {
                    localStorage.removeItem(key3);
                  }
                }
              });
            }
            executeCallback(promise, callback);
            return promise;
          }
          var localStorageWrapper = {
            _driver: "localStorageWrapper",
            _initStorage: _initStorage$2,
            _support: isLocalStorageValid(),
            iterate: iterate$2,
            getItem: getItem$2,
            setItem: setItem$2,
            removeItem: removeItem$2,
            clear: clear$2,
            length: length$2,
            key: key$2,
            keys: keys$2,
            dropInstance: dropInstance$2
          };
          var sameValue = function sameValue2(x2, y2) {
            return x2 === y2 || typeof x2 === "number" && typeof y2 === "number" && isNaN(x2) && isNaN(y2);
          };
          var includes = function includes2(array, searchElement) {
            var len = array.length;
            var i2 = 0;
            while (i2 < len) {
              if (sameValue(array[i2], searchElement)) {
                return true;
              }
              i2++;
            }
            return false;
          };
          var isArray = Array.isArray || function(arg) {
            return Object.prototype.toString.call(arg) === "[object Array]";
          };
          var DefinedDrivers = {};
          var DriverSupport = {};
          var DefaultDrivers = {
            INDEXEDDB: asyncStorage,
            WEBSQL: webSQLStorage,
            LOCALSTORAGE: localStorageWrapper
          };
          var DefaultDriverOrder = [DefaultDrivers.INDEXEDDB._driver, DefaultDrivers.WEBSQL._driver, DefaultDrivers.LOCALSTORAGE._driver];
          var OptionalDriverMethods = ["dropInstance"];
          var LibraryMethods = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(OptionalDriverMethods);
          var DefaultConfig = {
            description: "",
            driver: DefaultDriverOrder.slice(),
            name: "localforage",
            size: 4980736,
            storeName: "keyvaluepairs",
            version: 1
          };
          function callWhenReady(localForageInstance, libraryMethod) {
            localForageInstance[libraryMethod] = function() {
              var _args = arguments;
              return localForageInstance.ready().then(function() {
                return localForageInstance[libraryMethod].apply(localForageInstance, _args);
              });
            };
          }
          function extend() {
            for (var i2 = 1; i2 < arguments.length; i2++) {
              var arg = arguments[i2];
              if (arg) {
                for (var _key in arg) {
                  if (arg.hasOwnProperty(_key)) {
                    if (isArray(arg[_key])) {
                      arguments[0][_key] = arg[_key].slice();
                    } else {
                      arguments[0][_key] = arg[_key];
                    }
                  }
                }
              }
            }
            return arguments[0];
          }
          var LocalForage = function() {
            function LocalForage2(options) {
              _classCallCheck(this, LocalForage2);
              for (var driverTypeKey in DefaultDrivers) {
                if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {
                  var driver = DefaultDrivers[driverTypeKey];
                  var driverName = driver._driver;
                  this[driverTypeKey] = driverName;
                  if (!DefinedDrivers[driverName]) {
                    this.defineDriver(driver);
                  }
                }
              }
              this._defaultConfig = extend({}, DefaultConfig);
              this._config = extend({}, this._defaultConfig, options);
              this._driverSet = null;
              this._initDriver = null;
              this._ready = false;
              this._dbInfo = null;
              this._wrapLibraryMethodsWithReady();
              this.setDriver(this._config.driver)["catch"](function() {
              });
            }
            LocalForage2.prototype.config = function config(options) {
              if ((typeof options === "undefined" ? "undefined" : _typeof(options)) === "object") {
                if (this._ready) {
                  return new Error("Can't call config() after localforage has been used.");
                }
                for (var i2 in options) {
                  if (i2 === "storeName") {
                    options[i2] = options[i2].replace(/\W/g, "_");
                  }
                  if (i2 === "version" && typeof options[i2] !== "number") {
                    return new Error("Database version must be a number.");
                  }
                  this._config[i2] = options[i2];
                }
                if ("driver" in options && options.driver) {
                  return this.setDriver(this._config.driver);
                }
                return true;
              } else if (typeof options === "string") {
                return this._config[options];
              } else {
                return this._config;
              }
            };
            LocalForage2.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {
              var promise = new Promise$1(function(resolve, reject) {
                try {
                  var driverName = driverObject._driver;
                  var complianceError = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
                  if (!driverObject._driver) {
                    reject(complianceError);
                    return;
                  }
                  var driverMethods = LibraryMethods.concat("_initStorage");
                  for (var i2 = 0, len = driverMethods.length; i2 < len; i2++) {
                    var driverMethodName = driverMethods[i2];
                    var isRequired = !includes(OptionalDriverMethods, driverMethodName);
                    if ((isRequired || driverObject[driverMethodName]) && typeof driverObject[driverMethodName] !== "function") {
                      reject(complianceError);
                      return;
                    }
                  }
                  var configureMissingMethods = function configureMissingMethods2() {
                    var methodNotImplementedFactory = function methodNotImplementedFactory2(methodName) {
                      return function() {
                        var error = new Error("Method " + methodName + " is not implemented by the current driver");
                        var promise2 = Promise$1.reject(error);
                        executeCallback(promise2, arguments[arguments.length - 1]);
                        return promise2;
                      };
                    };
                    for (var _i = 0, _len = OptionalDriverMethods.length; _i < _len; _i++) {
                      var optionalDriverMethod = OptionalDriverMethods[_i];
                      if (!driverObject[optionalDriverMethod]) {
                        driverObject[optionalDriverMethod] = methodNotImplementedFactory(optionalDriverMethod);
                      }
                    }
                  };
                  configureMissingMethods();
                  var setDriverSupport = function setDriverSupport2(support) {
                    if (DefinedDrivers[driverName]) {
                      console.info("Redefining LocalForage driver: " + driverName);
                    }
                    DefinedDrivers[driverName] = driverObject;
                    DriverSupport[driverName] = support;
                    resolve();
                  };
                  if ("_support" in driverObject) {
                    if (driverObject._support && typeof driverObject._support === "function") {
                      driverObject._support().then(setDriverSupport, reject);
                    } else {
                      setDriverSupport(!!driverObject._support);
                    }
                  } else {
                    setDriverSupport(true);
                  }
                } catch (e2) {
                  reject(e2);
                }
              });
              executeTwoCallbacks(promise, callback, errorCallback);
              return promise;
            };
            LocalForage2.prototype.driver = function driver() {
              return this._driver || null;
            };
            LocalForage2.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {
              var getDriverPromise = DefinedDrivers[driverName] ? Promise$1.resolve(DefinedDrivers[driverName]) : Promise$1.reject(new Error("Driver not found."));
              executeTwoCallbacks(getDriverPromise, callback, errorCallback);
              return getDriverPromise;
            };
            LocalForage2.prototype.getSerializer = function getSerializer(callback) {
              var serializerPromise = Promise$1.resolve(localforageSerializer);
              executeTwoCallbacks(serializerPromise, callback);
              return serializerPromise;
            };
            LocalForage2.prototype.ready = function ready(callback) {
              var self2 = this;
              var promise = self2._driverSet.then(function() {
                if (self2._ready === null) {
                  self2._ready = self2._initDriver();
                }
                return self2._ready;
              });
              executeTwoCallbacks(promise, callback, callback);
              return promise;
            };
            LocalForage2.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {
              var self2 = this;
              if (!isArray(drivers)) {
                drivers = [drivers];
              }
              var supportedDrivers = this._getSupportedDrivers(drivers);
              function setDriverToConfig() {
                self2._config.driver = self2.driver();
              }
              function extendSelfWithDriver(driver) {
                self2._extend(driver);
                setDriverToConfig();
                self2._ready = self2._initStorage(self2._config);
                return self2._ready;
              }
              function initDriver(supportedDrivers2) {
                return function() {
                  var currentDriverIndex = 0;
                  function driverPromiseLoop() {
                    while (currentDriverIndex < supportedDrivers2.length) {
                      var driverName = supportedDrivers2[currentDriverIndex];
                      currentDriverIndex++;
                      self2._dbInfo = null;
                      self2._ready = null;
                      return self2.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop);
                    }
                    setDriverToConfig();
                    var error = new Error("No available storage method found.");
                    self2._driverSet = Promise$1.reject(error);
                    return self2._driverSet;
                  }
                  return driverPromiseLoop();
                };
              }
              var oldDriverSetDone = this._driverSet !== null ? this._driverSet["catch"](function() {
                return Promise$1.resolve();
              }) : Promise$1.resolve();
              this._driverSet = oldDriverSetDone.then(function() {
                var driverName = supportedDrivers[0];
                self2._dbInfo = null;
                self2._ready = null;
                return self2.getDriver(driverName).then(function(driver) {
                  self2._driver = driver._driver;
                  setDriverToConfig();
                  self2._wrapLibraryMethodsWithReady();
                  self2._initDriver = initDriver(supportedDrivers);
                });
              })["catch"](function() {
                setDriverToConfig();
                var error = new Error("No available storage method found.");
                self2._driverSet = Promise$1.reject(error);
                return self2._driverSet;
              });
              executeTwoCallbacks(this._driverSet, callback, errorCallback);
              return this._driverSet;
            };
            LocalForage2.prototype.supports = function supports(driverName) {
              return !!DriverSupport[driverName];
            };
            LocalForage2.prototype._extend = function _extend(libraryMethodsAndProperties) {
              extend(this, libraryMethodsAndProperties);
            };
            LocalForage2.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {
              var supportedDrivers = [];
              for (var i2 = 0, len = drivers.length; i2 < len; i2++) {
                var driverName = drivers[i2];
                if (this.supports(driverName)) {
                  supportedDrivers.push(driverName);
                }
              }
              return supportedDrivers;
            };
            LocalForage2.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {
              for (var i2 = 0, len = LibraryMethods.length; i2 < len; i2++) {
                callWhenReady(this, LibraryMethods[i2]);
              }
            };
            LocalForage2.prototype.createInstance = function createInstance(options) {
              return new LocalForage2(options);
            };
            return LocalForage2;
          }();
          var localforage_js = new LocalForage();
          module4.exports = localforage_js;
        }, { "3": 3 }] }, {}, [4])(4);
      });
    }
  });

  // node_modules/@editorjs/editorjs/dist/editor.js
  var require_editor = __commonJS({
    "node_modules/@editorjs/editorjs/dist/editor.js"(exports2, module2) {
      !function(t3, e2) {
        typeof exports2 == "object" && typeof module2 == "object" ? module2.exports = e2() : typeof define == "function" && define.amd ? define([], e2) : typeof exports2 == "object" ? exports2.EditorJS = e2() : t3.EditorJS = e2();
      }(window, function() {
        return function(t3) {
          var e2 = {};
          function n2(o2) {
            if (e2[o2])
              return e2[o2].exports;
            var r2 = e2[o2] = { i: o2, l: false, exports: {} };
            return t3[o2].call(r2.exports, r2, r2.exports, n2), r2.l = true, r2.exports;
          }
          return n2.m = t3, n2.c = e2, n2.d = function(t4, e3, o2) {
            n2.o(t4, e3) || Object.defineProperty(t4, e3, { enumerable: true, get: o2 });
          }, n2.r = function(t4) {
            typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t4, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t4, "__esModule", { value: true });
          }, n2.t = function(t4, e3) {
            if (1 & e3 && (t4 = n2(t4)), 8 & e3)
              return t4;
            if (4 & e3 && typeof t4 == "object" && t4 && t4.__esModule)
              return t4;
            var o2 = /* @__PURE__ */ Object.create(null);
            if (n2.r(o2), Object.defineProperty(o2, "default", { enumerable: true, value: t4 }), 2 & e3 && typeof t4 != "string")
              for (var r2 in t4)
                n2.d(o2, r2, function(e4) {
                  return t4[e4];
                }.bind(null, r2));
            return o2;
          }, n2.n = function(t4) {
            var e3 = t4 && t4.__esModule ? function() {
              return t4.default;
            } : function() {
              return t4;
            };
            return n2.d(e3, "a", e3), e3;
          }, n2.o = function(t4, e3) {
            return Object.prototype.hasOwnProperty.call(t4, e3);
          }, n2.p = "", n2(n2.s = 183);
        }([function(t3, e2, n2) {
          var o2 = n2(10), r2 = n2(17), i2 = n2(27), a2 = n2(23), s2 = n2(31), c2 = function(t4, e3, n3) {
            var l2, u2, f3, d2, p2 = t4 & c2.F, h2 = t4 & c2.G, v2 = t4 & c2.S, y2 = t4 & c2.P, g2 = t4 & c2.B, b2 = h2 ? o2 : v2 ? o2[e3] || (o2[e3] = {}) : (o2[e3] || {}).prototype, m2 = h2 ? r2 : r2[e3] || (r2[e3] = {}), k2 = m2.prototype || (m2.prototype = {});
            for (l2 in h2 && (n3 = e3), n3)
              f3 = ((u2 = !p2 && b2 && b2[l2] !== void 0) ? b2 : n3)[l2], d2 = g2 && u2 ? s2(f3, o2) : y2 && typeof f3 == "function" ? s2(Function.call, f3) : f3, b2 && a2(b2, l2, f3, t4 & c2.U), m2[l2] != f3 && i2(m2, l2, d2), y2 && k2[l2] != f3 && (k2[l2] = f3);
          };
          o2.core = r2, c2.F = 1, c2.G = 2, c2.S = 4, c2.P = 8, c2.B = 16, c2.W = 32, c2.U = 64, c2.R = 128, t3.exports = c2;
        }, function(t3, e2) {
          t3.exports = function(t4) {
            return t4 && t4.__esModule ? t4 : { default: t4 };
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3) {
            if (!(t4 instanceof e3))
              throw new TypeError("Cannot call a class as a function");
          };
        }, function(t3, e2) {
          function n2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var o2 = e3[n3];
              o2.enumerable = o2.enumerable || false, o2.configurable = true, "value" in o2 && (o2.writable = true), Object.defineProperty(t4, o2.key, o2);
            }
          }
          t3.exports = function(t4, e3, o2) {
            return e3 && n2(t4.prototype, e3), o2 && n2(t4, o2), t4;
          };
        }, function(t3, e2) {
          function n2(e3) {
            return t3.exports = n2 = Object.setPrototypeOf ? Object.getPrototypeOf : function(t4) {
              return t4.__proto__ || Object.getPrototypeOf(t4);
            }, n2(e3);
          }
          t3.exports = n2;
        }, function(t3, e2, n2) {
          var o2 = n2(107);
          t3.exports = function(t4, e3) {
            if (typeof e3 != "function" && e3 !== null)
              throw new TypeError("Super expression must either be null or a function");
            t4.prototype = Object.create(e3 && e3.prototype, { constructor: { value: t4, writable: true, configurable: true } }), e3 && o2(t4, e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(143), r2 = n2(368);
          t3.exports = function(t4, e3) {
            return !e3 || o2(e3) !== "object" && typeof e3 != "function" ? r2(t4) : e3;
          };
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(374)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            function c2(t4) {
              if (typeof Symbol == "undefined" || t4[Symbol.iterator] == null) {
                if (Array.isArray(t4) || (t4 = function(t5, e4) {
                  if (t5) {
                    if (typeof t5 == "string")
                      return l2(t5, e4);
                    var n4 = Object.prototype.toString.call(t5).slice(8, -1);
                    return n4 === "Object" && t5.constructor && (n4 = t5.constructor.name), n4 === "Map" || n4 === "Set" ? Array.from(n4) : n4 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n4) ? l2(t5, e4) : void 0;
                  }
                }(t4))) {
                  var e3 = 0, n3 = function() {
                  };
                  return { s: n3, n: function() {
                    return e3 >= t4.length ? { done: true } : { done: false, value: t4[e3++] };
                  }, e: function(t5) {
                    throw t5;
                  }, f: n3 };
                }
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
              }
              var o4, r4, i4 = true, a3 = false;
              return { s: function() {
                o4 = t4[Symbol.iterator]();
              }, n: function() {
                var t5 = o4.next();
                return i4 = t5.done, t5;
              }, e: function(t5) {
                a3 = true, r4 = t5;
              }, f: function() {
                try {
                  i4 || o4.return == null || o4.return();
                } finally {
                  if (a3)
                    throw r4;
                }
              } };
            }
            function l2(t4, e3) {
              (e3 == null || e3 > t4.length) && (e3 = t4.length);
              for (var n3 = 0, o4 = new Array(e3); n3 < e3; n3++)
                o4[n3] = t4[n3];
              return o4;
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var u2 = function() {
              function t4(e3) {
                var n3 = this, o4 = e3.config, i4 = e3.eventsDispatcher;
                if ((0, r3.default)(this, t4), this.nodes = {}, this.listeners = new a2.default(), this.readOnlyMutableListeners = { on: function(t5, e4, o5) {
                  var r4 = arguments.length > 3 && arguments[3] !== void 0 && arguments[3];
                  n3.mutableListenerIds.push(n3.listeners.on(t5, e4, o5, r4));
                }, clearAll: function() {
                  var t5, e4 = c2(n3.mutableListenerIds);
                  try {
                    for (e4.s(); !(t5 = e4.n()).done; ) {
                      var o5 = t5.value;
                      n3.listeners.offById(o5);
                    }
                  } catch (t6) {
                    e4.e(t6);
                  } finally {
                    e4.f();
                  }
                  n3.mutableListenerIds = [];
                } }, this.mutableListenerIds = [], (this instanceof t4 ? this.constructor : void 0) === t4)
                  throw new TypeError("Constructors for abstract class Module are not allowed.");
                this.config = o4, this.eventsDispatcher = i4;
              }
              return (0, i3.default)(t4, [{ key: "removeAllNodes", value: function() {
                for (var t5 in this.nodes) {
                  var e3 = this.nodes[t5];
                  e3 instanceof HTMLElement && e3.remove();
                }
              } }, { key: "state", set: function(t5) {
                this.Editor = t5;
              } }, { key: "isRtl", get: function() {
                return this.config.i18n.direction === "rtl";
              } }]), t4;
            }();
            o3.default = u2, u2.displayName = "Module", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(367), n2(22), n2(15)], (i2 = typeof (o2 = function(t4, e3, o3, r3, i3) {
            "use strict";
            var a2, s2 = n2(1);
            function c2(t5, e4) {
              var n3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "log", o4 = arguments.length > 3 ? arguments[3] : void 0, r4 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "color: inherit";
              if ("console" in window && window.console[n3]) {
                var i4 = ["info", "log", "warn", "error"].includes(n3), s3 = [];
                switch (c2.logLevel) {
                  case a2.ERROR:
                    if (n3 !== "error")
                      return;
                    break;
                  case a2.WARN:
                    if (!["error", "warn"].includes(n3))
                      return;
                    break;
                  case a2.INFO:
                    if (!i4 || t5)
                      return;
                }
                o4 && s3.push(o4);
                var l3 = "Editor.js ".concat("2.20.0"), u3 = "line-height: 1em;\n            color: #006FEA;\n            display: inline-block;\n            font-size: 11px;\n            line-height: 1em;\n            background-color: #fff;\n            padding: 4px 9px;\n            border-radius: 30px;\n            border: 1px solid rgba(56, 138, 229, 0.16);\n            margin: 4px 5px 4px 0;";
                t5 && (i4 ? (s3.unshift(u3, r4), e4 = "%c".concat(l3, "%c ").concat(e4)) : e4 = "( ".concat(l3, " )").concat(e4));
                try {
                  if (i4)
                    if (o4) {
                      var f4;
                      (f4 = console)[n3].apply(f4, ["".concat(e4, " %o")].concat(s3));
                    } else {
                      var d3;
                      (d3 = console)[n3].apply(d3, [e4].concat(s3));
                    }
                  else
                    console[n3](e4);
                } catch (t6) {
                }
              }
            }
            Object.defineProperty(t4, "__esModule", { value: true }), t4.setLogLevel = function(t5) {
              c2.logLevel = t5;
            }, t4.typeOf = f3, t4.isFunction = d2, t4.isObject = p2, t4.isString = function(t5) {
              return f3(t5) === "string";
            }, t4.isBoolean = function(t5) {
              return f3(t5) === "boolean";
            }, t4.isNumber = function(t5) {
              return f3(t5) === "number";
            }, t4.isUndefined = h2, t4.isClass = function(t5) {
              return d2(t5) && /^\s*class\s+/.test(t5.toString());
            }, t4.isEmpty = function(t5) {
              return !t5 || Object.keys(t5).length === 0 && t5.constructor === Object;
            }, t4.isPromise = function(t5) {
              return Promise.resolve(t5) === t5;
            }, t4.isPrintableKey = function(t5) {
              return t5 > 47 && t5 < 58 || t5 === 32 || t5 === 13 || t5 === 229 || t5 > 64 && t5 < 91 || t5 > 95 && t5 < 112 || t5 > 185 && t5 < 193 || t5 > 218 && t5 < 223;
            }, t4.sequence = function(t5) {
              return v2.apply(this, arguments);
            }, t4.array = function(t5) {
              return Array.prototype.slice.call(t5);
            }, t4.delay = function(t5, e4) {
              return function() {
                var n3 = this, o4 = arguments;
                window.setTimeout(function() {
                  return t5.apply(n3, o4);
                }, e4);
              };
            }, t4.getFileExtension = function(t5) {
              return t5.name.split(".").pop();
            }, t4.isValidMimeType = function(t5) {
              return /^[-\w]+\/([-+\w]+|\*)$/.test(t5);
            }, t4.debounce = function(t5, e4, n3) {
              var o4, r4 = arguments, i4 = this;
              return function() {
                var a3 = i4, s3 = r4, c3 = n3 && !o4;
                window.clearTimeout(o4), o4 = window.setTimeout(function() {
                  o4 = null, n3 || t5.apply(a3, s3);
                }, e4), c3 && t5.apply(a3, s3);
              };
            }, t4.copyTextToClipboard = function(t5) {
              var e4 = i3.default.make("div", "codex-editor-clipboard", { innerHTML: t5 });
              document.body.appendChild(e4);
              var n3 = window.getSelection(), o4 = document.createRange();
              o4.selectNode(e4), window.getSelection().removeAllRanges(), n3.addRange(o4), document.execCommand("copy"), document.body.removeChild(e4);
            }, t4.getUserOS = y2, t4.capitalize = function(t5) {
              return t5[0].toUpperCase() + t5.slice(1);
            }, t4.deepMerge = function t5(e4) {
              for (var n3 = arguments.length, r4 = new Array(n3 > 1 ? n3 - 1 : 0), i4 = 1; i4 < n3; i4++)
                r4[i4 - 1] = arguments[i4];
              if (!r4.length)
                return e4;
              var a3 = r4.shift();
              if (p2(e4) && p2(a3))
                for (var s3 in a3)
                  p2(a3[s3]) ? (e4[s3] || Object.assign(e4, (0, o3.default)({}, s3, {})), t5(e4[s3], a3[s3])) : Object.assign(e4, (0, o3.default)({}, s3, a3[s3]));
              return t5.apply(void 0, [e4].concat(r4));
            }, t4.beautifyShortcut = function(t5) {
              var e4 = y2();
              return t5 = t5.replace(/shift/gi, "\u21E7").replace(/backspace/gi, "\u232B").replace(/enter/gi, "\u23CE").replace(/up/gi, "\u2191").replace(/left/gi, "\u2192").replace(/down/gi, "\u2193").replace(/right/gi, "\u2190").replace(/escape/gi, "\u238B").replace(/insert/gi, "Ins").replace(/delete/gi, "\u2421").replace(/\+/gi, " + "), t5 = e4.mac ? t5.replace(/ctrl|cmd/gi, "\u2318").replace(/alt/gi, "\u2325") : t5.replace(/cmd/gi, "Ctrl").replace(/windows/gi, "WIN");
            }, t4.getValidUrl = function(t5) {
              try {
                return new URL(t5).href;
              } catch (t6) {
              }
              return t5.substring(0, 2) === "//" ? window.location.protocol + t5 : window.location.origin + t5;
            }, t4.openTab = function(t5) {
              window.open(t5, "_blank");
            }, t4.generateId = function() {
              var t5 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
              return "".concat(t5).concat(Math.floor(1e8 * Math.random()).toString(16));
            }, t4.deprecationAssert = function(t5, e4, n3) {
              var o4 = "\xAB".concat(e4, "\xBB is deprecated and will be removed in the next major release. Please use the \xAB").concat(n3, "\xBB instead.");
              t5 && u2(o4, "warn");
            }, t4.isTouchSupported = t4.logLabeled = t4.log = t4.mouseButtons = t4.keyCodes = t4.LogLevels = void 0, e3 = s2(e3), o3 = s2(o3), r3 = s2(r3), i3 = s2(i3), t4.LogLevels = a2, function(t5) {
              t5.VERBOSE = "VERBOSE", t5.INFO = "INFO", t5.WARN = "WARN", t5.ERROR = "ERROR";
            }(a2 || (t4.LogLevels = a2 = {})), t4.keyCodes = { BACKSPACE: 8, TAB: 9, ENTER: 13, SHIFT: 16, CTRL: 17, ALT: 18, ESC: 27, SPACE: 32, LEFT: 37, UP: 38, DOWN: 40, RIGHT: 39, DELETE: 46, META: 91 }, t4.mouseButtons = { LEFT: 0, WHEEL: 1, RIGHT: 2, BACKWARD: 3, FORWARD: 4 }, c2.logLevel = a2.VERBOSE;
            var l2 = c2.bind(window, false);
            t4.log = l2;
            var u2 = c2.bind(window, true);
            function f3(t5) {
              return Object.prototype.toString.call(t5).match(/\s([a-zA-Z]+)/)[1].toLowerCase();
            }
            function d2(t5) {
              return f3(t5) === "function";
            }
            function p2(t5) {
              return f3(t5) === "object";
            }
            function h2(t5) {
              return f3(t5) === "undefined";
            }
            function v2() {
              return (v2 = (0, r3.default)(e3.default.mark(function t5(n3) {
                var o4, i4, a3, s3, c3 = arguments;
                return e3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return s3 = function() {
                          return (s3 = (0, r3.default)(e3.default.mark(function t7(n4, o5, r4) {
                            return e3.default.wrap(function(t8) {
                              for (; ; )
                                switch (t8.prev = t8.next) {
                                  case 0:
                                    return t8.prev = 0, t8.next = 3, n4.function(n4.data);
                                  case 3:
                                    return t8.next = 5, o5(h2(n4.data) ? {} : n4.data);
                                  case 5:
                                    t8.next = 10;
                                    break;
                                  case 7:
                                    t8.prev = 7, t8.t0 = t8.catch(0), r4(h2(n4.data) ? {} : n4.data);
                                  case 10:
                                  case "end":
                                    return t8.stop();
                                }
                            }, t7, null, [[0, 7]]);
                          }))).apply(this, arguments);
                        }, a3 = function(t7, e4, n4) {
                          return s3.apply(this, arguments);
                        }, o4 = c3.length > 1 && c3[1] !== void 0 ? c3[1] : function() {
                        }, i4 = c3.length > 2 && c3[2] !== void 0 ? c3[2] : function() {
                        }, t6.abrupt("return", n3.reduce(function() {
                          var t7 = (0, r3.default)(e3.default.mark(function t8(n4, r4) {
                            return e3.default.wrap(function(t9) {
                              for (; ; )
                                switch (t9.prev = t9.next) {
                                  case 0:
                                    return t9.next = 2, n4;
                                  case 2:
                                    return t9.abrupt("return", a3(r4, o4, i4));
                                  case 3:
                                  case "end":
                                    return t9.stop();
                                }
                            }, t8);
                          }));
                          return function(e4, n4) {
                            return t7.apply(this, arguments);
                          };
                        }(), Promise.resolve()));
                      case 5:
                      case "end":
                        return t6.stop();
                    }
                }, t5);
              }))).apply(this, arguments);
            }
            function y2() {
              var t5 = { win: false, mac: false, x11: false, linux: false }, e4 = Object.keys(t5).find(function(t6) {
                return navigator.appVersion.toLowerCase().indexOf(t6) !== -1;
              });
              return e4 ? (t5[e4] = true, t5) : t5;
            }
            t4.logLabeled = u2;
            var g2 = "ontouchstart" in document.documentElement;
            t4.isTouchSupported = g2;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = n2(143);
          function r2() {
            if (typeof WeakMap != "function")
              return null;
            var t4 = /* @__PURE__ */ new WeakMap();
            return r2 = function() {
              return t4;
            }, t4;
          }
          t3.exports = function(t4) {
            if (t4 && t4.__esModule)
              return t4;
            if (t4 === null || o2(t4) !== "object" && typeof t4 != "function")
              return { default: t4 };
            var e3 = r2();
            if (e3 && e3.has(t4))
              return e3.get(t4);
            var n3 = {}, i2 = Object.defineProperty && Object.getOwnPropertyDescriptor;
            for (var a2 in t4)
              if (Object.prototype.hasOwnProperty.call(t4, a2)) {
                var s2 = i2 ? Object.getOwnPropertyDescriptor(t4, a2) : null;
                s2 && (s2.get || s2.set) ? Object.defineProperty(n3, a2, s2) : n3[a2] = t4[a2];
              }
            return n3.default = t4, e3 && e3.set(t4, n3), n3;
          };
        }, function(t3, e2) {
          var n2 = t3.exports = typeof window != "undefined" && window.Math == Math ? window : typeof self != "undefined" && self.Math == Math ? self : Function("return this")();
          typeof __g == "number" && (__g = n2);
        }, function(t3, e2) {
          t3.exports = function(t4) {
            try {
              return !!t4();
            } catch (t5) {
              return true;
            }
          };
        }, function(t3, e2, n2) {
          var o2 = n2(13);
          t3.exports = function(t4) {
            if (!o2(t4))
              throw TypeError(t4 + " is not an object!");
            return t4;
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            return typeof t4 == "object" ? t4 !== null : typeof t4 == "function";
          };
        }, function(t3, e2, n2) {
          var o2 = n2(67)("wks"), r2 = n2(44), i2 = n2(10).Symbol, a2 = typeof i2 == "function";
          (t3.exports = function(t4) {
            return o2[t4] || (o2[t4] = a2 && i2[t4] || (a2 ? i2 : r2)("Symbol." + t4));
          }).store = o2;
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(42), n2(2), n2(3), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2) {
            "use strict";
            var c2 = n2(9), l2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = l2(r3), i3 = l2(i3), a2 = l2(a2), s2 = c2(s2);
            var u2 = function() {
              function t4() {
                (0, i3.default)(this, t4);
              }
              return (0, a2.default)(t4, null, [{ key: "isSingleTag", value: function(t5) {
                return t5.tagName && ["AREA", "BASE", "BR", "COL", "COMMAND", "EMBED", "HR", "IMG", "INPUT", "KEYGEN", "LINK", "META", "PARAM", "SOURCE", "TRACK", "WBR"].includes(t5.tagName);
              } }, { key: "isLineBreakTag", value: function(t5) {
                return t5 && t5.tagName && ["BR", "WBR"].includes(t5.tagName);
              } }, { key: "make", value: function(t5) {
                var e3, n3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : null, o4 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, i4 = document.createElement(t5);
                for (var a3 in Array.isArray(n3) ? (e3 = i4.classList).add.apply(e3, (0, r3.default)(n3)) : n3 && i4.classList.add(n3), o4)
                  Object.prototype.hasOwnProperty.call(o4, a3) && (i4[a3] = o4[a3]);
                return i4;
              } }, { key: "text", value: function(t5) {
                return document.createTextNode(t5);
              } }, { key: "svg", value: function(t5) {
                var e3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 14, n3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 14, o4 = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                return o4.classList.add("icon", "icon--" + t5), o4.setAttribute("width", e3 + "px"), o4.setAttribute("height", n3 + "px"), o4.innerHTML = '<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#'.concat(t5, '"></use>'), o4;
              } }, { key: "append", value: function(t5, e3) {
                Array.isArray(e3) ? e3.forEach(function(e4) {
                  return t5.appendChild(e4);
                }) : t5.appendChild(e3);
              } }, { key: "prepend", value: function(t5, e3) {
                Array.isArray(e3) ? (e3 = e3.reverse()).forEach(function(e4) {
                  return t5.prepend(e4);
                }) : t5.prepend(e3);
              } }, { key: "swap", value: function(t5, e3) {
                var n3 = document.createElement("div"), o4 = t5.parentNode;
                o4.insertBefore(n3, t5), o4.insertBefore(t5, e3), o4.insertBefore(e3, n3), o4.removeChild(n3);
              } }, { key: "find", value: function() {
                var t5 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : document, e3 = arguments.length > 1 ? arguments[1] : void 0;
                return t5.querySelector(e3);
              } }, { key: "get", value: function(t5) {
                return document.getElementById(t5);
              } }, { key: "findAll", value: function() {
                var t5 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : document, e3 = arguments.length > 1 ? arguments[1] : void 0;
                return t5.querySelectorAll(e3);
              } }, { key: "findAllInputs", value: function(e3) {
                return s2.array(e3.querySelectorAll(t4.allInputsSelector)).reduce(function(e4, n3) {
                  return t4.isNativeInput(n3) || t4.containsOnlyInlineElements(n3) ? [].concat((0, r3.default)(e4), [n3]) : [].concat((0, r3.default)(e4), (0, r3.default)(t4.getDeepestBlockElements(n3)));
                }, []);
              } }, { key: "getDeepestNode", value: function(e3) {
                var n3 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], o4 = n3 ? "lastChild" : "firstChild", r4 = n3 ? "previousSibling" : "nextSibling";
                if (e3 && e3.nodeType === Node.ELEMENT_NODE && e3[o4]) {
                  var i4 = e3[o4];
                  if (t4.isSingleTag(i4) && !t4.isNativeInput(i4) && !t4.isLineBreakTag(i4))
                    if (i4[r4])
                      i4 = i4[r4];
                    else {
                      if (!i4.parentNode[r4])
                        return i4.parentNode;
                      i4 = i4.parentNode[r4];
                    }
                  return this.getDeepestNode(i4, n3);
                }
                return e3;
              } }, { key: "isElement", value: function(t5) {
                return !s2.isNumber(t5) && t5 && t5.nodeType && t5.nodeType === Node.ELEMENT_NODE;
              } }, { key: "isFragment", value: function(t5) {
                return !s2.isNumber(t5) && t5 && t5.nodeType && t5.nodeType === Node.DOCUMENT_FRAGMENT_NODE;
              } }, { key: "isContentEditable", value: function(t5) {
                return t5.contentEditable === "true";
              } }, { key: "isNativeInput", value: function(t5) {
                return !(!t5 || !t5.tagName) && ["INPUT", "TEXTAREA"].includes(t5.tagName);
              } }, { key: "canSetCaret", value: function(e3) {
                var n3 = true;
                if (t4.isNativeInput(e3))
                  switch (e3.type) {
                    case "file":
                    case "checkbox":
                    case "radio":
                    case "hidden":
                    case "submit":
                    case "button":
                    case "image":
                    case "reset":
                      n3 = false;
                  }
                else
                  n3 = t4.isContentEditable(e3);
                return n3;
              } }, { key: "isNodeEmpty", value: function(t5) {
                return !(this.isSingleTag(t5) && !this.isLineBreakTag(t5)) && (this.isElement(t5) && this.isNativeInput(t5) ? t5.value : t5.textContent.replace("\u200B", "")).trim().length === 0;
              } }, { key: "isLeaf", value: function(t5) {
                return !!t5 && t5.childNodes.length === 0;
              } }, { key: "isEmpty", value: function(t5) {
                t5.normalize();
                for (var e3 = [t5]; e3.length > 0; )
                  if (t5 = e3.shift()) {
                    if (this.isLeaf(t5) && !this.isNodeEmpty(t5))
                      return false;
                    t5.childNodes && e3.push.apply(e3, (0, r3.default)(Array.from(t5.childNodes)));
                  }
                return true;
              } }, { key: "isHTMLString", value: function(e3) {
                var n3 = t4.make("div");
                return n3.innerHTML = e3, n3.childElementCount > 0;
              } }, { key: "getContentLength", value: function(e3) {
                return t4.isNativeInput(e3) ? e3.value.length : e3.nodeType === Node.TEXT_NODE ? e3.length : e3.textContent.length;
              } }, { key: "containsOnlyInlineElements", value: function(e3) {
                var n3;
                return s2.isString(e3) ? (n3 = document.createElement("div")).innerHTML = e3 : n3 = e3, Array.from(n3.children).every(function e4(n4) {
                  return !t4.blockElements.includes(n4.tagName.toLowerCase()) && Array.from(n4.children).every(e4);
                });
              } }, { key: "getDeepestBlockElements", value: function(e3) {
                return t4.containsOnlyInlineElements(e3) ? [e3] : Array.from(e3.children).reduce(function(e4, n3) {
                  return [].concat((0, r3.default)(e4), (0, r3.default)(t4.getDeepestBlockElements(n3)));
                }, []);
              } }, { key: "getHolder", value: function(t5) {
                return s2.isString(t5) ? document.getElementById(t5) : t5;
              } }, { key: "isExtensionNode", value: function(t5) {
                return t5 && ["GRAMMARLY-EXTENSION"].includes(t5.nodeName);
              } }, { key: "isAnchor", value: function(t5) {
                return t5.tagName.toLowerCase() === "a";
              } }, { key: "allInputsSelector", get: function() {
                return "[contenteditable], textarea, input:not([type]), " + ["text", "password", "email", "number", "search", "tel", "url"].map(function(t5) {
                  return 'input[type="'.concat(t5, '"]');
                }).join(", ");
              } }, { key: "blockElements", get: function() {
                return ["address", "article", "aside", "blockquote", "canvas", "div", "dl", "dt", "fieldset", "figcaption", "figure", "footer", "form", "h1", "h2", "h3", "h4", "h5", "h6", "header", "hgroup", "hr", "li", "main", "nav", "noscript", "ol", "output", "p", "pre", "ruby", "section", "table", "tr", "tfoot", "ul", "video"];
              } }]), t4;
            }();
            o3.default = u2, u2.displayName = "Dom", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = n2(33), r2 = Math.min;
          t3.exports = function(t4) {
            return t4 > 0 ? r2(o2(t4), 9007199254740991) : 0;
          };
        }, function(t3, e2) {
          var n2 = t3.exports = { version: "2.6.11" };
          typeof __e == "number" && (__e = n2);
        }, function(t3, e2, n2) {
          t3.exports = !n2(11)(function() {
            return Object.defineProperty({}, "a", { get: function() {
              return 7;
            } }).a != 7;
          });
        }, function(t3, e2, n2) {
          var o2 = n2(12), r2 = n2(109), i2 = n2(40), a2 = Object.defineProperty;
          e2.f = n2(18) ? Object.defineProperty : function(t4, e3, n3) {
            if (o2(t4), e3 = i2(e3, true), o2(n3), r2)
              try {
                return a2(t4, e3, n3);
              } catch (t5) {
              }
            if ("get" in n3 || "set" in n3)
              throw TypeError("Accessors not supported!");
            return "value" in n3 && (t4[e3] = n3.value), t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(38);
          t3.exports = function(t4) {
            return Object(o2(t4));
          };
        }, function(t3, e2, n2) {
          t3.exports = n2(140);
        }, function(t3, e2) {
          function n2(t4, e3, n3, o2, r2, i2, a2) {
            try {
              var s2 = t4[i2](a2), c2 = s2.value;
            } catch (t5) {
              return void n3(t5);
            }
            s2.done ? e3(c2) : Promise.resolve(c2).then(o2, r2);
          }
          t3.exports = function(t4) {
            return function() {
              var e3 = this, o2 = arguments;
              return new Promise(function(r2, i2) {
                var a2 = t4.apply(e3, o2);
                function s2(t5) {
                  n2(a2, r2, i2, s2, c2, "next", t5);
                }
                function c2(t5) {
                  n2(a2, r2, i2, s2, c2, "throw", t5);
                }
                s2(void 0);
              });
            };
          };
        }, function(t3, e2, n2) {
          var o2 = n2(10), r2 = n2(27), i2 = n2(26), a2 = n2(44)("src"), s2 = n2(188), c2 = ("" + s2).split("toString");
          n2(17).inspectSource = function(t4) {
            return s2.call(t4);
          }, (t3.exports = function(t4, e3, n3, s3) {
            var l2 = typeof n3 == "function";
            l2 && (i2(n3, "name") || r2(n3, "name", e3)), t4[e3] !== n3 && (l2 && (i2(n3, a2) || r2(n3, a2, t4[e3] ? "" + t4[e3] : c2.join(String(e3)))), t4 === o2 ? t4[e3] = n3 : s3 ? t4[e3] ? t4[e3] = n3 : r2(t4, e3, n3) : (delete t4[e3], r2(t4, e3, n3)));
          })(Function.prototype, "toString", function() {
            return typeof this == "function" && this[a2] || s2.call(this);
          });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(11), i2 = n2(38), a2 = /"/g, s2 = function(t4, e3, n3, o3) {
            var r3 = String(i2(t4)), s3 = "<" + e3;
            return n3 !== "" && (s3 += " " + n3 + '="' + String(o3).replace(a2, "&quot;") + '"'), s3 + ">" + r3 + "</" + e3 + ">";
          };
          t3.exports = function(t4, e3) {
            var n3 = {};
            n3[t4] = e3(s2), o2(o2.P + o2.F * r2(function() {
              var e4 = ""[t4]('"');
              return e4 !== e4.toLowerCase() || e4.split('"').length > 3;
            }), "String", n3);
          };
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(8), n2(15)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2) {
            "use strict";
            var c2 = n2(9), l2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = l2(r3), i3 = l2(i3), a2 = c2(a2), s2 = l2(s2);
            var u2 = function() {
              function t4() {
                (0, r3.default)(this, t4), this.instance = null, this.selection = null, this.savedSelectionRange = null, this.isFakeBackgroundEnabled = false, this.commandBackground = "backColor", this.commandRemoveFormat = "removeFormat";
              }
              return (0, i3.default)(t4, [{ key: "removeFakeBackground", value: function() {
                this.isFakeBackgroundEnabled && (this.isFakeBackgroundEnabled = false, document.execCommand(this.commandRemoveFormat));
              } }, { key: "setFakeBackground", value: function() {
                document.execCommand(this.commandBackground, false, "#a8d6ff"), this.isFakeBackgroundEnabled = true;
              } }, { key: "save", value: function() {
                this.savedSelectionRange = t4.range;
              } }, { key: "restore", value: function() {
                if (this.savedSelectionRange) {
                  var t5 = window.getSelection();
                  t5.removeAllRanges(), t5.addRange(this.savedSelectionRange);
                }
              } }, { key: "clearSaved", value: function() {
                this.savedSelectionRange = null;
              } }, { key: "collapseToEnd", value: function() {
                var t5 = window.getSelection(), e3 = document.createRange();
                e3.selectNodeContents(t5.focusNode), e3.collapse(false), t5.removeAllRanges(), t5.addRange(e3);
              } }, { key: "findParentTag", value: function(t5, e3) {
                var n3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 10, o4 = window.getSelection(), r4 = null;
                if (!o4 || !o4.anchorNode || !o4.focusNode)
                  return null;
                var i4 = [o4.anchorNode, o4.focusNode];
                return i4.forEach(function(o5) {
                  for (var i5 = n3; i5 > 0 && o5.parentNode && (o5.tagName !== t5 || (r4 = o5, e3 && o5.classList && !o5.classList.contains(e3) && (r4 = null), !r4)); )
                    o5 = o5.parentNode, i5--;
                }), r4;
              } }, { key: "expandToTag", value: function(t5) {
                var e3 = window.getSelection();
                e3.removeAllRanges();
                var n3 = document.createRange();
                n3.selectNodeContents(t5), e3.addRange(n3);
              } }], [{ key: "get", value: function() {
                return window.getSelection();
              } }, { key: "setCursor", value: function(t5) {
                var e3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n3 = document.createRange(), o4 = window.getSelection();
                if (s2.default.isNativeInput(t5)) {
                  if (!s2.default.canSetCaret(t5))
                    return;
                  return t5.focus(), t5.selectionStart = t5.selectionEnd = e3, t5.getBoundingClientRect();
                }
                return n3.setStart(t5, e3), n3.setEnd(t5, e3), o4.removeAllRanges(), o4.addRange(n3), n3.getBoundingClientRect();
              } }, { key: "CSS", get: function() {
                return { editorWrapper: "codex-editor", editorZone: "codex-editor__redactor" };
              } }, { key: "anchorNode", get: function() {
                var t5 = window.getSelection();
                return t5 ? t5.anchorNode : null;
              } }, { key: "anchorElement", get: function() {
                var t5 = window.getSelection();
                if (!t5)
                  return null;
                var e3 = t5.anchorNode;
                return e3 ? s2.default.isElement(e3) ? e3 : e3.parentElement : null;
              } }, { key: "anchorOffset", get: function() {
                var t5 = window.getSelection();
                return t5 ? t5.anchorOffset : null;
              } }, { key: "isCollapsed", get: function() {
                var t5 = window.getSelection();
                return t5 ? t5.isCollapsed : null;
              } }, { key: "isAtEditor", get: function() {
                var e3 = t4.get(), n3 = e3.anchorNode || e3.focusNode;
                n3 && n3.nodeType === Node.TEXT_NODE && (n3 = n3.parentNode);
                var o4 = null;
                return n3 && (o4 = n3.closest(".".concat(t4.CSS.editorZone))), o4 && o4.nodeType === Node.ELEMENT_NODE;
              } }, { key: "isSelectionExists", get: function() {
                return !!t4.get().anchorNode;
              } }, { key: "range", get: function() {
                var t5 = window.getSelection();
                return t5 && t5.rangeCount ? t5.getRangeAt(0) : null;
              } }, { key: "rect", get: function() {
                var t5, e3 = document.selection, n3 = { x: 0, y: 0, width: 0, height: 0 };
                if (e3 && e3.type !== "Control")
                  return t5 = (e3 = e3).createRange(), n3.x = t5.boundingLeft, n3.y = t5.boundingTop, n3.width = t5.boundingWidth, n3.height = t5.boundingHeight, n3;
                if (!window.getSelection)
                  return a2.log("Method window.getSelection is not supported", "warn"), n3;
                if ((e3 = window.getSelection()).rangeCount === null || isNaN(e3.rangeCount))
                  return a2.log("Method SelectionUtils.rangeCount is not supported", "warn"), n3;
                if (e3.rangeCount === 0)
                  return n3;
                if ((t5 = e3.getRangeAt(0).cloneRange()).getBoundingClientRect && (n3 = t5.getBoundingClientRect()), n3.x === 0 && n3.y === 0) {
                  var o4 = document.createElement("span");
                  if (o4.getBoundingClientRect) {
                    o4.appendChild(document.createTextNode("\u200B")), t5.insertNode(o4), n3 = o4.getBoundingClientRect();
                    var r4 = o4.parentNode;
                    r4.removeChild(o4), r4.normalize();
                  }
                }
                return n3;
              } }, { key: "text", get: function() {
                return window.getSelection ? window.getSelection().toString() : "";
              } }]), t4;
            }();
            o3.default = u2, u2.displayName = "SelectionUtils", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2) {
          var n2 = {}.hasOwnProperty;
          t3.exports = function(t4, e3) {
            return n2.call(t4, e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(19), r2 = n2(43);
          t3.exports = n2(18) ? function(t4, e3, n3) {
            return o2.f(t4, e3, r2(1, n3));
          } : function(t4, e3, n3) {
            return t4[e3] = n3, t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(62), r2 = n2(38);
          t3.exports = function(t4) {
            return o2(r2(t4));
          };
        }, function(t3, e2, n2) {
          var o2 = n2(357), r2 = n2(358), i2 = n2(141), a2 = n2(359);
          t3.exports = function(t4, e3) {
            return o2(t4) || r2(t4, e3) || i2(t4, e3) || a2();
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(11);
          t3.exports = function(t4, e3) {
            return !!t4 && o2(function() {
              e3 ? t4.call(null, function() {
              }, 1) : t4.call(null);
            });
          };
        }, function(t3, e2, n2) {
          var o2 = n2(32);
          t3.exports = function(t4, e3, n3) {
            if (o2(t4), e3 === void 0)
              return t4;
            switch (n3) {
              case 1:
                return function(n4) {
                  return t4.call(e3, n4);
                };
              case 2:
                return function(n4, o3) {
                  return t4.call(e3, n4, o3);
                };
              case 3:
                return function(n4, o3, r2) {
                  return t4.call(e3, n4, o3, r2);
                };
            }
            return function() {
              return t4.apply(e3, arguments);
            };
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            if (typeof t4 != "function")
              throw TypeError(t4 + " is not a function!");
            return t4;
          };
        }, function(t3, e2) {
          var n2 = Math.ceil, o2 = Math.floor;
          t3.exports = function(t4) {
            return isNaN(t4 = +t4) ? 0 : (t4 > 0 ? o2 : n2)(t4);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(63), r2 = n2(43), i2 = n2(28), a2 = n2(40), s2 = n2(26), c2 = n2(109), l2 = Object.getOwnPropertyDescriptor;
          e2.f = n2(18) ? l2 : function(t4, e3) {
            if (t4 = i2(t4), e3 = a2(e3, true), c2)
              try {
                return l2(t4, e3);
              } catch (t5) {
              }
            if (s2(t4, e3))
              return r2(!o2.f.call(t4, e3), t4[e3]);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(17), i2 = n2(11);
          t3.exports = function(t4, e3) {
            var n3 = (r2.Object || {})[t4] || Object[t4], a2 = {};
            a2[t4] = e3(n3), o2(o2.S + o2.F * i2(function() {
              n3(1);
            }), "Object", a2);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(31), r2 = n2(62), i2 = n2(20), a2 = n2(16), s2 = n2(125);
          t3.exports = function(t4, e3) {
            var n3 = t4 == 1, c2 = t4 == 2, l2 = t4 == 3, u2 = t4 == 4, f3 = t4 == 6, d2 = t4 == 5 || f3, p2 = e3 || s2;
            return function(e4, s3, h2) {
              for (var v2, y2, g2 = i2(e4), b2 = r2(g2), m2 = o2(s3, h2, 3), k2 = a2(b2.length), x2 = 0, w2 = n3 ? p2(e4, k2) : c2 ? p2(e4, 0) : void 0; k2 > x2; x2++)
                if ((d2 || x2 in b2) && (y2 = m2(v2 = b2[x2], x2, g2), t4)) {
                  if (n3)
                    w2[x2] = y2;
                  else if (y2)
                    switch (t4) {
                      case 3:
                        return true;
                      case 5:
                        return v2;
                      case 6:
                        return x2;
                      case 2:
                        w2.push(v2);
                    }
                  else if (u2)
                    return false;
                }
              return f3 ? -1 : l2 || u2 ? u2 : w2;
            };
          };
        }, function(t3, e2) {
          var n2 = {}.toString;
          t3.exports = function(t4) {
            return n2.call(t4).slice(8, -1);
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            if (t4 == null)
              throw TypeError("Can't call method on  " + t4);
            return t4;
          };
        }, function(t3, e2, n2) {
          "use strict";
          if (n2(18)) {
            var o2 = n2(45), r2 = n2(10), i2 = n2(11), a2 = n2(0), s2 = n2(78), c2 = n2(106), l2 = n2(31), u2 = n2(57), f3 = n2(43), d2 = n2(27), p2 = n2(58), h2 = n2(33), v2 = n2(16), y2 = n2(136), g2 = n2(47), b2 = n2(40), m2 = n2(26), k2 = n2(64), x2 = n2(13), w2 = n2(20), S2 = n2(98), T2 = n2(48), E2 = n2(50), C2 = n2(49).f, B2 = n2(100), _2 = n2(44), I2 = n2(14), O2 = n2(36), M2 = n2(68), R2 = n2(65), A2 = n2(102), N2 = n2(55), P2 = n2(71), L2 = n2(56), D2 = n2(101), j2 = n2(127), F2 = n2(19), U2 = n2(34), H2 = F2.f, z2 = U2.f, W2 = r2.RangeError, Y2 = r2.TypeError, V2 = r2.Uint8Array, X2 = Array.prototype, G2 = c2.ArrayBuffer, K2 = c2.DataView, Z2 = O2(0), q2 = O2(2), J2 = O2(3), $3 = O2(4), Q2 = O2(5), tt2 = O2(6), et2 = M2(true), nt2 = M2(false), ot2 = A2.values, rt2 = A2.keys, it2 = A2.entries, at2 = X2.lastIndexOf, st2 = X2.reduce, ct2 = X2.reduceRight, lt2 = X2.join, ut2 = X2.sort, ft2 = X2.slice, dt2 = X2.toString, pt2 = X2.toLocaleString, ht2 = I2("iterator"), vt2 = I2("toStringTag"), yt2 = _2("typed_constructor"), gt2 = _2("def_constructor"), bt2 = s2.CONSTR, mt2 = s2.TYPED, kt2 = s2.VIEW, xt2 = O2(1, function(t4, e3) {
              return Ct2(R2(t4, t4[gt2]), e3);
            }), wt2 = i2(function() {
              return new V2(new Uint16Array([1]).buffer)[0] === 1;
            }), St2 = !!V2 && !!V2.prototype.set && i2(function() {
              new V2(1).set({});
            }), Tt2 = function(t4, e3) {
              var n3 = h2(t4);
              if (n3 < 0 || n3 % e3)
                throw W2("Wrong offset!");
              return n3;
            }, Et2 = function(t4) {
              if (x2(t4) && mt2 in t4)
                return t4;
              throw Y2(t4 + " is not a typed array!");
            }, Ct2 = function(t4, e3) {
              if (!x2(t4) || !(yt2 in t4))
                throw Y2("It is not a typed array constructor!");
              return new t4(e3);
            }, Bt2 = function(t4, e3) {
              return _t(R2(t4, t4[gt2]), e3);
            }, _t = function(t4, e3) {
              for (var n3 = 0, o3 = e3.length, r3 = Ct2(t4, o3); o3 > n3; )
                r3[n3] = e3[n3++];
              return r3;
            }, It2 = function(t4, e3, n3) {
              H2(t4, e3, { get: function() {
                return this._d[n3];
              } });
            }, Ot2 = function(t4) {
              var e3, n3, o3, r3, i3, a3, s3 = w2(t4), c3 = arguments.length, u3 = c3 > 1 ? arguments[1] : void 0, f4 = u3 !== void 0, d3 = B2(s3);
              if (d3 != null && !S2(d3)) {
                for (a3 = d3.call(s3), o3 = [], e3 = 0; !(i3 = a3.next()).done; e3++)
                  o3.push(i3.value);
                s3 = o3;
              }
              for (f4 && c3 > 2 && (u3 = l2(u3, arguments[2], 2)), e3 = 0, n3 = v2(s3.length), r3 = Ct2(this, n3); n3 > e3; e3++)
                r3[e3] = f4 ? u3(s3[e3], e3) : s3[e3];
              return r3;
            }, Mt2 = function() {
              for (var t4 = 0, e3 = arguments.length, n3 = Ct2(this, e3); e3 > t4; )
                n3[t4] = arguments[t4++];
              return n3;
            }, Rt2 = !!V2 && i2(function() {
              pt2.call(new V2(1));
            }), At2 = function() {
              return pt2.apply(Rt2 ? ft2.call(Et2(this)) : Et2(this), arguments);
            }, Nt2 = { copyWithin: function(t4, e3) {
              return j2.call(Et2(this), t4, e3, arguments.length > 2 ? arguments[2] : void 0);
            }, every: function(t4) {
              return $3(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, fill: function(t4) {
              return D2.apply(Et2(this), arguments);
            }, filter: function(t4) {
              return Bt2(this, q2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0));
            }, find: function(t4) {
              return Q2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, findIndex: function(t4) {
              return tt2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, forEach: function(t4) {
              Z2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, indexOf: function(t4) {
              return nt2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, includes: function(t4) {
              return et2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, join: function(t4) {
              return lt2.apply(Et2(this), arguments);
            }, lastIndexOf: function(t4) {
              return at2.apply(Et2(this), arguments);
            }, map: function(t4) {
              return xt2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, reduce: function(t4) {
              return st2.apply(Et2(this), arguments);
            }, reduceRight: function(t4) {
              return ct2.apply(Et2(this), arguments);
            }, reverse: function() {
              for (var t4, e3 = Et2(this).length, n3 = Math.floor(e3 / 2), o3 = 0; o3 < n3; )
                t4 = this[o3], this[o3++] = this[--e3], this[e3] = t4;
              return this;
            }, some: function(t4) {
              return J2(Et2(this), t4, arguments.length > 1 ? arguments[1] : void 0);
            }, sort: function(t4) {
              return ut2.call(Et2(this), t4);
            }, subarray: function(t4, e3) {
              var n3 = Et2(this), o3 = n3.length, r3 = g2(t4, o3);
              return new (R2(n3, n3[gt2]))(n3.buffer, n3.byteOffset + r3 * n3.BYTES_PER_ELEMENT, v2((e3 === void 0 ? o3 : g2(e3, o3)) - r3));
            } }, Pt2 = function(t4, e3) {
              return Bt2(this, ft2.call(Et2(this), t4, e3));
            }, Lt2 = function(t4) {
              Et2(this);
              var e3 = Tt2(arguments[1], 1), n3 = this.length, o3 = w2(t4), r3 = v2(o3.length), i3 = 0;
              if (r3 + e3 > n3)
                throw W2("Wrong length!");
              for (; i3 < r3; )
                this[e3 + i3] = o3[i3++];
            }, Dt2 = { entries: function() {
              return it2.call(Et2(this));
            }, keys: function() {
              return rt2.call(Et2(this));
            }, values: function() {
              return ot2.call(Et2(this));
            } }, jt2 = function(t4, e3) {
              return x2(t4) && t4[mt2] && typeof e3 != "symbol" && e3 in t4 && String(+e3) == String(e3);
            }, Ft2 = function(t4, e3) {
              return jt2(t4, e3 = b2(e3, true)) ? f3(2, t4[e3]) : z2(t4, e3);
            }, Ut2 = function(t4, e3, n3) {
              return !(jt2(t4, e3 = b2(e3, true)) && x2(n3) && m2(n3, "value")) || m2(n3, "get") || m2(n3, "set") || n3.configurable || m2(n3, "writable") && !n3.writable || m2(n3, "enumerable") && !n3.enumerable ? H2(t4, e3, n3) : (t4[e3] = n3.value, t4);
            };
            bt2 || (U2.f = Ft2, F2.f = Ut2), a2(a2.S + a2.F * !bt2, "Object", { getOwnPropertyDescriptor: Ft2, defineProperty: Ut2 }), i2(function() {
              dt2.call({});
            }) && (dt2 = pt2 = function() {
              return lt2.call(this);
            });
            var Ht2 = p2({}, Nt2);
            p2(Ht2, Dt2), d2(Ht2, ht2, Dt2.values), p2(Ht2, { slice: Pt2, set: Lt2, constructor: function() {
            }, toString: dt2, toLocaleString: At2 }), It2(Ht2, "buffer", "b"), It2(Ht2, "byteOffset", "o"), It2(Ht2, "byteLength", "l"), It2(Ht2, "length", "e"), H2(Ht2, vt2, { get: function() {
              return this[mt2];
            } }), t3.exports = function(t4, e3, n3, c3) {
              var l3 = t4 + ((c3 = !!c3) ? "Clamped" : "") + "Array", f4 = "get" + t4, p3 = "set" + t4, h3 = r2[l3], g3 = h3 || {}, b3 = h3 && E2(h3), m3 = !h3 || !s2.ABV, w3 = {}, S3 = h3 && h3.prototype, B3 = function(t5, n4) {
                H2(t5, n4, { get: function() {
                  return function(t6, n5) {
                    var o3 = t6._d;
                    return o3.v[f4](n5 * e3 + o3.o, wt2);
                  }(this, n4);
                }, set: function(t6) {
                  return function(t7, n5, o3) {
                    var r3 = t7._d;
                    c3 && (o3 = (o3 = Math.round(o3)) < 0 ? 0 : o3 > 255 ? 255 : 255 & o3), r3.v[p3](n5 * e3 + r3.o, o3, wt2);
                  }(this, n4, t6);
                }, enumerable: true });
              };
              m3 ? (h3 = n3(function(t5, n4, o3, r3) {
                u2(t5, h3, l3, "_d");
                var i3, a3, s3, c4, f5 = 0, p4 = 0;
                if (x2(n4)) {
                  if (!(n4 instanceof G2 || (c4 = k2(n4)) == "ArrayBuffer" || c4 == "SharedArrayBuffer"))
                    return mt2 in n4 ? _t(h3, n4) : Ot2.call(h3, n4);
                  i3 = n4, p4 = Tt2(o3, e3);
                  var g4 = n4.byteLength;
                  if (r3 === void 0) {
                    if (g4 % e3)
                      throw W2("Wrong length!");
                    if ((a3 = g4 - p4) < 0)
                      throw W2("Wrong length!");
                  } else if ((a3 = v2(r3) * e3) + p4 > g4)
                    throw W2("Wrong length!");
                  s3 = a3 / e3;
                } else
                  s3 = y2(n4), i3 = new G2(a3 = s3 * e3);
                for (d2(t5, "_d", { b: i3, o: p4, l: a3, e: s3, v: new K2(i3) }); f5 < s3; )
                  B3(t5, f5++);
              }), S3 = h3.prototype = T2(Ht2), d2(S3, "constructor", h3)) : i2(function() {
                h3(1);
              }) && i2(function() {
                new h3(-1);
              }) && P2(function(t5) {
                new h3(), new h3(null), new h3(1.5), new h3(t5);
              }, true) || (h3 = n3(function(t5, n4, o3, r3) {
                var i3;
                return u2(t5, h3, l3), x2(n4) ? n4 instanceof G2 || (i3 = k2(n4)) == "ArrayBuffer" || i3 == "SharedArrayBuffer" ? r3 !== void 0 ? new g3(n4, Tt2(o3, e3), r3) : o3 !== void 0 ? new g3(n4, Tt2(o3, e3)) : new g3(n4) : mt2 in n4 ? _t(h3, n4) : Ot2.call(h3, n4) : new g3(y2(n4));
              }), Z2(b3 !== Function.prototype ? C2(g3).concat(C2(b3)) : C2(g3), function(t5) {
                t5 in h3 || d2(h3, t5, g3[t5]);
              }), h3.prototype = S3, o2 || (S3.constructor = h3));
              var _3 = S3[ht2], I3 = !!_3 && (_3.name == "values" || _3.name == null), O3 = Dt2.values;
              d2(h3, yt2, true), d2(S3, mt2, l3), d2(S3, kt2, true), d2(S3, gt2, h3), (c3 ? new h3(1)[vt2] == l3 : vt2 in S3) || H2(S3, vt2, { get: function() {
                return l3;
              } }), w3[l3] = h3, a2(a2.G + a2.W + a2.F * (h3 != g3), w3), a2(a2.S, l3, { BYTES_PER_ELEMENT: e3 }), a2(a2.S + a2.F * i2(function() {
                g3.of.call(h3, 1);
              }), l3, { from: Ot2, of: Mt2 }), "BYTES_PER_ELEMENT" in S3 || d2(S3, "BYTES_PER_ELEMENT", e3), a2(a2.P, l3, Nt2), L2(l3), a2(a2.P + a2.F * St2, l3, { set: Lt2 }), a2(a2.P + a2.F * !I3, l3, Dt2), o2 || S3.toString == dt2 || (S3.toString = dt2), a2(a2.P + a2.F * i2(function() {
                new h3(1).slice();
              }), l3, { slice: Pt2 }), a2(a2.P + a2.F * (i2(function() {
                return [1, 2].toLocaleString() != new h3([1, 2]).toLocaleString();
              }) || !i2(function() {
                S3.toLocaleString.call([1, 2]);
              })), l3, { toLocaleString: At2 }), N2[l3] = I3 ? _3 : O3, o2 || I3 || d2(S3, ht2, O3);
            };
          } else
            t3.exports = function() {
            };
        }, function(t3, e2, n2) {
          var o2 = n2(13);
          t3.exports = function(t4, e3) {
            if (!o2(t4))
              return t4;
            var n3, r2;
            if (e3 && typeof (n3 = t4.toString) == "function" && !o2(r2 = n3.call(t4)))
              return r2;
            if (typeof (n3 = t4.valueOf) == "function" && !o2(r2 = n3.call(t4)))
              return r2;
            if (!e3 && typeof (n3 = t4.toString) == "function" && !o2(r2 = n3.call(t4)))
              return r2;
            throw TypeError("Can't convert object to primitive value");
          };
        }, function(t3, e2, n2) {
          var o2 = n2(44)("meta"), r2 = n2(13), i2 = n2(26), a2 = n2(19).f, s2 = 0, c2 = Object.isExtensible || function() {
            return true;
          }, l2 = !n2(11)(function() {
            return c2(Object.preventExtensions({}));
          }), u2 = function(t4) {
            a2(t4, o2, { value: { i: "O" + ++s2, w: {} } });
          }, f3 = t3.exports = { KEY: o2, NEED: false, fastKey: function(t4, e3) {
            if (!r2(t4))
              return typeof t4 == "symbol" ? t4 : (typeof t4 == "string" ? "S" : "P") + t4;
            if (!i2(t4, o2)) {
              if (!c2(t4))
                return "F";
              if (!e3)
                return "E";
              u2(t4);
            }
            return t4[o2].i;
          }, getWeak: function(t4, e3) {
            if (!i2(t4, o2)) {
              if (!c2(t4))
                return true;
              if (!e3)
                return false;
              u2(t4);
            }
            return t4[o2].w;
          }, onFreeze: function(t4) {
            return l2 && f3.NEED && c2(t4) && !i2(t4, o2) && u2(t4), t4;
          } };
        }, function(t3, e2, n2) {
          var o2 = n2(364), r2 = n2(365), i2 = n2(141), a2 = n2(366);
          t3.exports = function(t4) {
            return o2(t4) || r2(t4) || i2(t4) || a2();
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3) {
            return { enumerable: !(1 & t4), configurable: !(2 & t4), writable: !(4 & t4), value: e3 };
          };
        }, function(t3, e2) {
          var n2 = 0, o2 = Math.random();
          t3.exports = function(t4) {
            return "Symbol(".concat(t4 === void 0 ? "" : t4, ")_", (++n2 + o2).toString(36));
          };
        }, function(t3, e2) {
          t3.exports = false;
        }, function(t3, e2, n2) {
          var o2 = n2(111), r2 = n2(85);
          t3.exports = Object.keys || function(t4) {
            return o2(t4, r2);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(33), r2 = Math.max, i2 = Math.min;
          t3.exports = function(t4, e3) {
            return (t4 = o2(t4)) < 0 ? r2(t4 + e3, 0) : i2(t4, e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(12), r2 = n2(112), i2 = n2(85), a2 = n2(84)("IE_PROTO"), s2 = function() {
          }, c2 = function() {
            var t4, e3 = n2(82)("iframe"), o3 = i2.length;
            for (e3.style.display = "none", n2(86).appendChild(e3), e3.src = "javascript:", (t4 = e3.contentWindow.document).open(), t4.write("<script>document.F=Object<\/script>"), t4.close(), c2 = t4.F; o3--; )
              delete c2.prototype[i2[o3]];
            return c2();
          };
          t3.exports = Object.create || function(t4, e3) {
            var n3;
            return t4 !== null ? (s2.prototype = o2(t4), n3 = new s2(), s2.prototype = null, n3[a2] = t4) : n3 = c2(), e3 === void 0 ? n3 : r2(n3, e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(111), r2 = n2(85).concat("length", "prototype");
          e2.f = Object.getOwnPropertyNames || function(t4) {
            return o2(t4, r2);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(26), r2 = n2(20), i2 = n2(84)("IE_PROTO"), a2 = Object.prototype;
          t3.exports = Object.getPrototypeOf || function(t4) {
            return t4 = r2(t4), o2(t4, i2) ? t4[i2] : typeof t4.constructor == "function" && t4 instanceof t4.constructor ? t4.constructor.prototype : t4 instanceof Object ? a2 : null;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(14)("unscopables"), r2 = Array.prototype;
          r2[o2] == null && n2(27)(r2, o2, {}), t3.exports = function(t4) {
            r2[o2][t4] = true;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(13);
          t3.exports = function(t4, e3) {
            if (!o2(t4) || t4._t !== e3)
              throw TypeError("Incompatible receiver, " + e3 + " required!");
            return t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(19).f, r2 = n2(26), i2 = n2(14)("toStringTag");
          t3.exports = function(t4, e3, n3) {
            t4 && !r2(t4 = n3 ? t4 : t4.prototype, i2) && o2(t4, i2, { configurable: true, value: e3 });
          };
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(38), i2 = n2(11), a2 = n2(88), s2 = "[" + a2 + "]", c2 = RegExp("^" + s2 + s2 + "*"), l2 = RegExp(s2 + s2 + "*$"), u2 = function(t4, e3, n3) {
            var r3 = {}, s3 = i2(function() {
              return !!a2[t4]() || "\u200B\x85"[t4]() != "\u200B\x85";
            }), c3 = r3[t4] = s3 ? e3(f3) : a2[t4];
            n3 && (r3[n3] = c3), o2(o2.P + o2.F * s3, "String", r3);
          }, f3 = u2.trim = function(t4, e3) {
            return t4 = String(r2(t4)), 1 & e3 && (t4 = t4.replace(c2, "")), 2 & e3 && (t4 = t4.replace(l2, "")), t4;
          };
          t3.exports = u2;
        }, function(t3, e2) {
          t3.exports = {};
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(10), r2 = n2(19), i2 = n2(18), a2 = n2(14)("species");
          t3.exports = function(t4) {
            var e3 = o2[t4];
            i2 && e3 && !e3[a2] && r2.f(e3, a2, { configurable: true, get: function() {
              return this;
            } });
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3, n2, o2) {
            if (!(t4 instanceof e3) || o2 !== void 0 && o2 in t4)
              throw TypeError(n2 + ": incorrect invocation!");
            return t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(23);
          t3.exports = function(t4, e3, n3) {
            for (var r2 in e3)
              o2(t4, r2, e3[r2], n3);
            return t4;
          };
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(144)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var c2 = function() {
              function t4() {
                (0, r3.default)(this, t4);
              }
              return (0, i3.default)(t4, null, [{ key: "ui", value: function(e3, n3) {
                return t4._t(e3, n3);
              } }, { key: "t", value: function(e3, n3) {
                return t4._t(e3, n3);
              } }, { key: "setDictionary", value: function(e3) {
                t4.currentDictionary = e3;
              } }, { key: "_t", value: function(e3, n3) {
                var o4 = t4.getNamespace(e3);
                return o4 && o4[n3] ? o4[n3] : n3;
              } }, { key: "getNamespace", value: function(e3) {
                return e3.split(".").reduce(function(t5, e4) {
                  return t5 && Object.keys(t5).length ? t5[e4] : {};
                }, t4.currentDictionary);
              } }]), t4;
            }();
            o3.default = c2, c2.displayName = "I18n", c2.currentDictionary = a2.default, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(375), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2) {
            "use strict";
            var c2 = n2(9), l2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = l2(r3), i3 = l2(i3), a2 = l2(a2), s2 = c2(s2);
            var u2 = function() {
              function t4(e3) {
                var n3 = this;
                (0, r3.default)(this, t4), this.iterator = null, this.activated = false, this.allowArrows = true, this.onKeyDown = function(e4) {
                  if (n3.isEventReadyForHandling(e4))
                    switch (t4.usedKeys.includes(e4.keyCode) && e4.preventDefault(), e4.keyCode) {
                      case s2.keyCodes.TAB:
                        n3.handleTabPress(e4);
                        break;
                      case s2.keyCodes.LEFT:
                      case s2.keyCodes.UP:
                        n3.flipLeft();
                        break;
                      case s2.keyCodes.RIGHT:
                      case s2.keyCodes.DOWN:
                        n3.flipRight();
                        break;
                      case s2.keyCodes.ENTER:
                        n3.handleEnterPress(e4);
                    }
                }, this.allowArrows = !s2.isBoolean(e3.allowArrows) || e3.allowArrows, this.iterator = new a2.default(e3.items, e3.focusedItemClass), this.activateCallback = e3.activateCallback;
              }
              return (0, i3.default)(t4, [{ key: "activate", value: function(t5) {
                this.activated = true, t5 && this.iterator.setItems(t5), document.addEventListener("keydown", this.onKeyDown);
              } }, { key: "deactivate", value: function() {
                this.activated = false, this.dropCursor(), document.removeEventListener("keydown", this.onKeyDown);
              } }, { key: "focusFirst", value: function() {
                this.dropCursor(), this.flipRight();
              } }, { key: "flipLeft", value: function() {
                this.iterator.previous();
              } }, { key: "flipRight", value: function() {
                this.iterator.next();
              } }, { key: "dropCursor", value: function() {
                this.iterator.dropCursor();
              } }, { key: "isEventReadyForHandling", value: function(t5) {
                var e3 = [s2.keyCodes.TAB, s2.keyCodes.ENTER], n3 = this.iterator.currentItem == document.activeElement;
                return this.allowArrows && !n3 && e3.push(s2.keyCodes.LEFT, s2.keyCodes.RIGHT, s2.keyCodes.UP, s2.keyCodes.DOWN), this.activated && e3.indexOf(t5.keyCode) !== -1;
              } }, { key: "handleTabPress", value: function(t5) {
                switch (t5.shiftKey ? a2.default.directions.LEFT : a2.default.directions.RIGHT) {
                  case a2.default.directions.RIGHT:
                    this.flipRight();
                    break;
                  case a2.default.directions.LEFT:
                    this.flipLeft();
                }
              } }, { key: "handleEnterPress", value: function(t5) {
                this.activated && (this.iterator.currentItem && this.iterator.currentItem.click(), s2.isFunction(this.activateCallback) && this.activateCallback(this.iterator.currentItem), t5.preventDefault(), t5.stopPropagation());
              } }, { key: "currentItem", get: function() {
                return this.iterator.currentItem;
              } }], [{ key: "usedKeys", get: function() {
                return [s2.keyCodes.TAB, s2.keyCodes.LEFT, s2.keyCodes.RIGHT, s2.keyCodes.ENTER, s2.keyCodes.UP, s2.keyCodes.DOWN];
              } }]), t4;
            }();
            o3.default = u2, u2.displayName = "Flipper", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(42), n2(21), n2(22), n2(2), n2(3), n2(15), n2(8), n2(148), n2(25)], (i2 = typeof (o2 = function(t4, e3, o3, r3, i3, a2, s2, c2, l2, u2, f3) {
            "use strict";
            var d2, p2 = n2(9), h2 = n2(1);
            Object.defineProperty(t4, "__esModule", { value: true }), t4.default = t4.BlockToolAPI = void 0, e3 = h2(e3), o3 = h2(o3), r3 = h2(r3), i3 = h2(i3), a2 = h2(a2), s2 = h2(s2), c2 = h2(c2), l2 = p2(l2), u2 = h2(u2), f3 = h2(f3), t4.BlockToolAPI = d2, function(t5) {
              t5.APPEND_CALLBACK = "appendCallback", t5.RENDERED = "rendered", t5.MOVED = "moved", t5.UPDATED = "updated", t5.REMOVED = "removed", t5.ON_PASTE = "onPaste";
            }(d2 || (t4.BlockToolAPI = d2 = {}));
            var v2 = function() {
              function t5(e4) {
                var n4 = this, o4 = e4.data, r4 = e4.tool, i4 = e4.api, s3 = e4.readOnly, c3 = e4.tunes, f4 = e4.tunesData;
                (0, a2.default)(this, t5), this.cachedInputs = [], this.tunesInstances = /* @__PURE__ */ new Map(), this.defaultTunesInstances = /* @__PURE__ */ new Map(), this.unavailableTunesData = {}, this.inputIndex = 0, this.modificationDebounceTimer = 450, this.didMutated = l2.debounce(function() {
                  n4.cachedInputs = [], n4.updateCurrentInput(), n4.call(d2.UPDATED);
                }, this.modificationDebounceTimer), this.handleFocus = function() {
                  n4.cachedInputs = [], n4.updateCurrentInput();
                }, this.name = r4.name, this.settings = r4.settings, this.config = r4.settings.config || {}, this.api = i4, this.blockAPI = new u2.default(this), this.mutationObserver = new MutationObserver(this.didMutated), this.tool = r4, this.toolInstance = r4.create(o4, this.blockAPI, s3), this.tunes = c3, this.composeTunes(f4), this.holder = this.compose();
              }
              var n3, p3, h3;
              return (0, s2.default)(t5, [{ key: "call", value: function(t6, e4) {
                if (this.toolInstance[t6] && this.toolInstance[t6] instanceof Function) {
                  t6 === d2.APPEND_CALLBACK && l2.log("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead", "warn");
                  try {
                    this.toolInstance[t6].call(this.toolInstance, e4);
                  } catch (e5) {
                    l2.log("Error during '".concat(t6, "' call: ").concat(e5.message), "error");
                  }
                }
              } }, { key: "mergeWith", value: (h3 = (0, i3.default)(r3.default.mark(function t6(e4) {
                return r3.default.wrap(function(t7) {
                  for (; ; )
                    switch (t7.prev = t7.next) {
                      case 0:
                        return t7.next = 2, this.toolInstance.merge(e4);
                      case 2:
                      case "end":
                        return t7.stop();
                    }
                }, t6, this);
              })), function(t6) {
                return h3.apply(this, arguments);
              }) }, { key: "save", value: (p3 = (0, i3.default)(r3.default.mark(function t6() {
                var n4, i4, a3, s3, c3 = this;
                return r3.default.wrap(function(t7) {
                  for (; ; )
                    switch (t7.prev = t7.next) {
                      case 0:
                        return t7.next = 2, this.toolInstance.save(this.pluginsContent);
                      case 2:
                        return n4 = t7.sent, i4 = this.unavailableTunesData, [].concat((0, o3.default)(this.tunesInstances.entries()), (0, o3.default)(this.defaultTunesInstances.entries())).forEach(function(t8) {
                          var n5 = (0, e3.default)(t8, 2), o4 = n5[0], r4 = n5[1];
                          if (l2.isFunction(r4.save))
                            try {
                              i4[o4] = r4.save();
                            } catch (t9) {
                              l2.log("Tune ".concat(r4.constructor.name, " save method throws an Error %o"), "warn", t9);
                            }
                        }), a3 = window.performance.now(), t7.abrupt("return", Promise.resolve(n4).then(function(t8) {
                          return s3 = window.performance.now(), { tool: c3.name, data: t8, tunes: i4, time: s3 - a3 };
                        }).catch(function(t8) {
                          l2.log("Saving proccess for ".concat(c3.name, " tool failed due to the ").concat(t8), "log", "red");
                        }));
                      case 7:
                      case "end":
                        return t7.stop();
                    }
                }, t6, this);
              })), function() {
                return p3.apply(this, arguments);
              }) }, { key: "validate", value: (n3 = (0, i3.default)(r3.default.mark(function t6(e4) {
                var n4;
                return r3.default.wrap(function(t7) {
                  for (; ; )
                    switch (t7.prev = t7.next) {
                      case 0:
                        if (n4 = true, !(this.toolInstance.validate instanceof Function)) {
                          t7.next = 5;
                          break;
                        }
                        return t7.next = 4, this.toolInstance.validate(e4);
                      case 4:
                        n4 = t7.sent;
                      case 5:
                        return t7.abrupt("return", n4);
                      case 6:
                      case "end":
                        return t7.stop();
                    }
                }, t6, this);
              })), function(t6) {
                return n3.apply(this, arguments);
              }) }, { key: "renderTunes", value: function() {
                var t6 = document.createDocumentFragment(), e4 = document.createDocumentFragment();
                return this.tunesInstances.forEach(function(e5) {
                  c2.default.append(t6, e5.render());
                }), this.defaultTunesInstances.forEach(function(t7) {
                  c2.default.append(e4, t7.render());
                }), [t6, e4];
              } }, { key: "updateCurrentInput", value: function() {
                this.currentInput = c2.default.isNativeInput(document.activeElement) || !f3.default.anchorNode ? document.activeElement : f3.default.anchorNode;
              } }, { key: "willSelect", value: function() {
                this.mutationObserver.observe(this.holder.firstElementChild, { childList: true, subtree: true, characterData: true, attributes: true }), this.addInputEvents();
              } }, { key: "willUnselect", value: function() {
                this.mutationObserver.disconnect(), this.removeInputEvents();
              } }, { key: "destroy", value: function() {
                l2.isFunction(this.toolInstance.destroy) && this.toolInstance.destroy();
              } }, { key: "renderSettings", value: function() {
                if (l2.isFunction(this.toolInstance.renderSettings))
                  return this.toolInstance.renderSettings();
              } }, { key: "compose", value: function() {
                var e4 = c2.default.make("div", t5.CSS.wrapper), n4 = c2.default.make("div", t5.CSS.content), r4 = this.toolInstance.render();
                n4.appendChild(r4);
                var i4 = n4;
                return [].concat((0, o3.default)(this.tunesInstances.values()), (0, o3.default)(this.defaultTunesInstances.values())).forEach(function(t6) {
                  if (l2.isFunction(t6.wrap))
                    try {
                      i4 = t6.wrap(i4);
                    } catch (e5) {
                      l2.log("Tune ".concat(t6.constructor.name, " wrap method throws an Error %o"), "warn", e5);
                    }
                }), e4.appendChild(i4), e4;
              } }, { key: "composeTunes", value: function(t6) {
                var n4 = this;
                Array.from(this.tunes.values()).forEach(function(e4) {
                  (e4.isInternal ? n4.defaultTunesInstances : n4.tunesInstances).set(e4.name, e4.create(t6[e4.name], n4.blockAPI));
                }), Object.entries(t6).forEach(function(t7) {
                  var o4 = (0, e3.default)(t7, 2), r4 = o4[0], i4 = o4[1];
                  n4.tunesInstances.has(r4) || (n4.unavailableTunesData[r4] = i4);
                });
              } }, { key: "addInputEvents", value: function() {
                var t6 = this;
                this.inputs.forEach(function(e4) {
                  e4.addEventListener("focus", t6.handleFocus);
                });
              } }, { key: "removeInputEvents", value: function() {
                var t6 = this;
                this.inputs.forEach(function(e4) {
                  e4.removeEventListener("focus", t6.handleFocus);
                });
              } }, { key: "inputs", get: function() {
                if (this.cachedInputs.length !== 0)
                  return this.cachedInputs;
                var t6 = c2.default.findAllInputs(this.holder);
                return this.inputIndex > t6.length - 1 && (this.inputIndex = t6.length - 1), this.cachedInputs = t6, t6;
              } }, { key: "currentInput", get: function() {
                return this.inputs[this.inputIndex];
              }, set: function(t6) {
                var e4 = this.inputs.findIndex(function(e5) {
                  return e5 === t6 || e5.contains(t6);
                });
                e4 !== -1 && (this.inputIndex = e4);
              } }, { key: "firstInput", get: function() {
                return this.inputs[0];
              } }, { key: "lastInput", get: function() {
                var t6 = this.inputs;
                return t6[t6.length - 1];
              } }, { key: "nextInput", get: function() {
                return this.inputs[this.inputIndex + 1];
              } }, { key: "previousInput", get: function() {
                return this.inputs[this.inputIndex - 1];
              } }, { key: "data", get: function() {
                return this.save().then(function(t6) {
                  return t6 && !l2.isEmpty(t6.data) ? t6.data : {};
                });
              } }, { key: "sanitize", get: function() {
                return this.tool.sanitizeConfig;
              } }, { key: "mergeable", get: function() {
                return l2.isFunction(this.toolInstance.merge);
              } }, { key: "isEmpty", get: function() {
                var t6 = c2.default.isEmpty(this.pluginsContent), e4 = !this.hasMedia;
                return t6 && e4;
              } }, { key: "hasMedia", get: function() {
                return !!this.holder.querySelector(["img", "iframe", "video", "audio", "source", "input", "textarea", "twitterwidget"].join(","));
              } }, { key: "focused", set: function(e4) {
                this.holder.classList.toggle(t5.CSS.focused, e4);
              }, get: function() {
                return this.holder.classList.contains(t5.CSS.focused);
              } }, { key: "selected", set: function(e4) {
                e4 ? this.holder.classList.add(t5.CSS.selected) : this.holder.classList.remove(t5.CSS.selected);
              }, get: function() {
                return this.holder.classList.contains(t5.CSS.selected);
              } }, { key: "stretched", set: function(e4) {
                this.holder.classList.toggle(t5.CSS.wrapperStretched, e4);
              }, get: function() {
                return this.holder.classList.contains(t5.CSS.wrapperStretched);
              } }, { key: "dropTarget", set: function(e4) {
                this.holder.classList.toggle(t5.CSS.dropTarget, e4);
              } }, { key: "pluginsContent", get: function() {
                var e4 = this.holder.querySelector(".".concat(t5.CSS.content));
                if (e4 && e4.childNodes.length)
                  for (var n4 = e4.childNodes.length - 1; n4 >= 0; n4--) {
                    var o4 = e4.childNodes[n4];
                    if (!c2.default.isExtensionNode(o4))
                      return o4;
                  }
                return null;
              } }], [{ key: "CSS", get: function() {
                return { wrapper: "ce-block", wrapperStretched: "ce-block--stretched", content: "ce-block__content", focused: "ce-block--focused", selected: "ce-block--selected", dropTarget: "ce-block--drop-target" };
              } }]), t5;
            }();
            t4.default = v2, v2.displayName = "Block";
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = n2(37);
          t3.exports = Object("z").propertyIsEnumerable(0) ? Object : function(t4) {
            return o2(t4) == "String" ? t4.split("") : Object(t4);
          };
        }, function(t3, e2) {
          e2.f = {}.propertyIsEnumerable;
        }, function(t3, e2, n2) {
          var o2 = n2(37), r2 = n2(14)("toStringTag"), i2 = o2(function() {
            return arguments;
          }()) == "Arguments";
          t3.exports = function(t4) {
            var e3, n3, a2;
            return t4 === void 0 ? "Undefined" : t4 === null ? "Null" : typeof (n3 = function(t5, e4) {
              try {
                return t5[e4];
              } catch (t6) {
              }
            }(e3 = Object(t4), r2)) == "string" ? n3 : i2 ? o2(e3) : (a2 = o2(e3)) == "Object" && typeof e3.callee == "function" ? "Arguments" : a2;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(12), r2 = n2(32), i2 = n2(14)("species");
          t3.exports = function(t4, e3) {
            var n3, a2 = o2(t4).constructor;
            return a2 === void 0 || (n3 = o2(a2)[i2]) == null ? e3 : r2(n3);
          };
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(8)], (i2 = typeof (o2 = function(t4, e3, o3, r3) {
            "use strict";
            var i3, a2, s2, c2, l2, u2, f3 = n2(9), d2 = n2(1);
            Object.defineProperty(t4, "__esModule", { value: true }), t4.default = t4.InternalTuneSettings = t4.InternalInlineToolSettings = t4.InternalBlockToolSettings = t4.CommonInternalSettings = t4.UserSettings = t4.ToolType = void 0, e3 = d2(e3), o3 = d2(o3), r3 = f3(r3), t4.ToolType = i3, function(t5) {
              t5[t5.Block = 0] = "Block", t5[t5.Inline = 1] = "Inline", t5[t5.Tune = 2] = "Tune";
            }(i3 || (t4.ToolType = i3 = {})), t4.UserSettings = a2, function(t5) {
              t5.Shortcut = "shortcut", t5.Toolbox = "toolbox", t5.EnabledInlineTools = "inlineToolbar", t5.EnabledBlockTunes = "tunes", t5.Config = "config";
            }(a2 || (t4.UserSettings = a2 = {})), t4.CommonInternalSettings = s2, function(t5) {
              t5.Shortcut = "shortcut", t5.SanitizeConfig = "sanitize";
            }(s2 || (t4.CommonInternalSettings = s2 = {})), t4.InternalBlockToolSettings = c2, function(t5) {
              t5.IsEnabledLineBreaks = "enableLineBreaks", t5.Toolbox = "toolbox", t5.ConversionConfig = "conversionConfig", t5.IsReadOnlySupported = "isReadOnlySupported", t5.PasteConfig = "pasteConfig";
            }(c2 || (t4.InternalBlockToolSettings = c2 = {})), t4.InternalInlineToolSettings = l2, function(t5) {
              t5.IsInline = "isInline", t5.Title = "title";
            }(l2 || (t4.InternalInlineToolSettings = l2 = {})), t4.InternalTuneSettings = u2, function(t5) {
              t5.IsTune = "isTune";
            }(u2 || (t4.InternalTuneSettings = u2 = {}));
            var p2 = function() {
              function t5(n3) {
                var o4 = n3.name, r4 = n3.constructable, i4 = n3.config, a3 = n3.api, s3 = n3.isDefault, c3 = n3.isInternal, l3 = c3 !== void 0 && c3, u3 = n3.defaultPlaceholder;
                (0, e3.default)(this, t5), this.api = a3, this.name = o4, this.constructable = r4, this.config = i4, this.isDefault = s3, this.isInternal = l3, this.defaultPlaceholder = u3;
              }
              return (0, o3.default)(t5, [{ key: "reset", value: function() {
                if (r3.isFunction(this.constructable.reset))
                  return this.constructable.reset();
              } }, { key: "prepare", value: function() {
                if (r3.isFunction(this.constructable.prepare))
                  return this.constructable.prepare({ toolName: this.name, config: this.settings });
              } }, { key: "isInline", value: function() {
                return this.type === i3.Inline;
              } }, { key: "isBlock", value: function() {
                return this.type === i3.Block;
              } }, { key: "isTune", value: function() {
                return this.type === i3.Tune;
              } }, { key: "settings", get: function() {
                var t6 = this.config[a2.Config] || {};
                return this.isDefault && !("placeholder" in t6) && this.defaultPlaceholder && (t6.placeholder = this.defaultPlaceholder), t6;
              } }, { key: "shortcut", get: function() {
                var t6 = this.constructable[s2.Shortcut];
                return this.config[a2.Shortcut] || t6;
              } }, { key: "sanitizeConfig", get: function() {
                return this.constructable[s2.SanitizeConfig];
              } }]), t5;
            }();
            t4.default = p2, p2.displayName = "BaseTool";
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = n2(17), r2 = n2(10), i2 = r2["__core-js_shared__"] || (r2["__core-js_shared__"] = {});
          (t3.exports = function(t4, e3) {
            return i2[t4] || (i2[t4] = e3 !== void 0 ? e3 : {});
          })("versions", []).push({ version: o2.version, mode: n2(45) ? "pure" : "global", copyright: "\xA9 2019 Denis Pushkarev (zloirock.ru)" });
        }, function(t3, e2, n2) {
          var o2 = n2(28), r2 = n2(16), i2 = n2(47);
          t3.exports = function(t4) {
            return function(e3, n3, a2) {
              var s2, c2 = o2(e3), l2 = r2(c2.length), u2 = i2(a2, l2);
              if (t4 && n3 != n3) {
                for (; l2 > u2; )
                  if ((s2 = c2[u2++]) != s2)
                    return true;
              } else
                for (; l2 > u2; u2++)
                  if ((t4 || u2 in c2) && c2[u2] === n3)
                    return t4 || u2 || 0;
              return !t4 && -1;
            };
          };
        }, function(t3, e2) {
          e2.f = Object.getOwnPropertySymbols;
        }, function(t3, e2, n2) {
          var o2 = n2(37);
          t3.exports = Array.isArray || function(t4) {
            return o2(t4) == "Array";
          };
        }, function(t3, e2, n2) {
          var o2 = n2(14)("iterator"), r2 = false;
          try {
            var i2 = [7][o2]();
            i2.return = function() {
              r2 = true;
            }, Array.from(i2, function() {
              throw 2;
            });
          } catch (t4) {
          }
          t3.exports = function(t4, e3) {
            if (!e3 && !r2)
              return false;
            var n3 = false;
            try {
              var i3 = [7], a2 = i3[o2]();
              a2.next = function() {
                return { done: n3 = true };
              }, i3[o2] = function() {
                return a2;
              }, t4(i3);
            } catch (t5) {
            }
            return n3;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(12);
          t3.exports = function() {
            var t4 = o2(this), e3 = "";
            return t4.global && (e3 += "g"), t4.ignoreCase && (e3 += "i"), t4.multiline && (e3 += "m"), t4.unicode && (e3 += "u"), t4.sticky && (e3 += "y"), e3;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(64), r2 = RegExp.prototype.exec;
          t3.exports = function(t4, e3) {
            var n3 = t4.exec;
            if (typeof n3 == "function") {
              var i2 = n3.call(t4, e3);
              if (typeof i2 != "object")
                throw new TypeError("RegExp exec method returned something other than an Object or null");
              return i2;
            }
            if (o2(t4) !== "RegExp")
              throw new TypeError("RegExp#exec called on incompatible receiver");
            return r2.call(t4, e3);
          };
        }, function(t3, e2, n2) {
          "use strict";
          n2(129);
          var o2 = n2(23), r2 = n2(27), i2 = n2(11), a2 = n2(38), s2 = n2(14), c2 = n2(103), l2 = s2("species"), u2 = !i2(function() {
            var t4 = /./;
            return t4.exec = function() {
              var t5 = [];
              return t5.groups = { a: "7" }, t5;
            }, "".replace(t4, "$<a>") !== "7";
          }), f3 = function() {
            var t4 = /(?:)/, e3 = t4.exec;
            t4.exec = function() {
              return e3.apply(this, arguments);
            };
            var n3 = "ab".split(t4);
            return n3.length === 2 && n3[0] === "a" && n3[1] === "b";
          }();
          t3.exports = function(t4, e3, n3) {
            var d2 = s2(t4), p2 = !i2(function() {
              var e4 = {};
              return e4[d2] = function() {
                return 7;
              }, ""[t4](e4) != 7;
            }), h2 = p2 ? !i2(function() {
              var e4 = false, n4 = /a/;
              return n4.exec = function() {
                return e4 = true, null;
              }, t4 === "split" && (n4.constructor = {}, n4.constructor[l2] = function() {
                return n4;
              }), n4[d2](""), !e4;
            }) : void 0;
            if (!p2 || !h2 || t4 === "replace" && !u2 || t4 === "split" && !f3) {
              var v2 = /./[d2], y2 = n3(a2, d2, ""[t4], function(t5, e4, n4, o3, r3) {
                return e4.exec === c2 ? p2 && !r3 ? { done: true, value: v2.call(e4, n4, o3) } : { done: true, value: t5.call(n4, e4, o3) } : { done: false };
              }), g2 = y2[0], b2 = y2[1];
              o2(String.prototype, t4, g2), r2(RegExp.prototype, d2, e3 == 2 ? function(t5, e4) {
                return b2.call(t5, this, e4);
              } : function(t5) {
                return b2.call(t5, this);
              });
            }
          };
        }, function(t3, e2, n2) {
          var o2 = n2(31), r2 = n2(124), i2 = n2(98), a2 = n2(12), s2 = n2(16), c2 = n2(100), l2 = {}, u2 = {};
          (e2 = t3.exports = function(t4, e3, n3, f3, d2) {
            var p2, h2, v2, y2, g2 = d2 ? function() {
              return t4;
            } : c2(t4), b2 = o2(n3, f3, e3 ? 2 : 1), m2 = 0;
            if (typeof g2 != "function")
              throw TypeError(t4 + " is not iterable!");
            if (i2(g2)) {
              for (p2 = s2(t4.length); p2 > m2; m2++)
                if ((y2 = e3 ? b2(a2(h2 = t4[m2])[0], h2[1]) : b2(t4[m2])) === l2 || y2 === u2)
                  return y2;
            } else
              for (v2 = g2.call(t4); !(h2 = v2.next()).done; )
                if ((y2 = r2(v2, b2, h2.value, e3)) === l2 || y2 === u2)
                  return y2;
          }).BREAK = l2, e2.RETURN = u2;
        }, function(t3, e2, n2) {
          var o2 = n2(10).navigator;
          t3.exports = o2 && o2.userAgent || "";
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(10), r2 = n2(0), i2 = n2(23), a2 = n2(58), s2 = n2(41), c2 = n2(75), l2 = n2(57), u2 = n2(13), f3 = n2(11), d2 = n2(71), p2 = n2(53), h2 = n2(89);
          t3.exports = function(t4, e3, n3, v2, y2, g2) {
            var b2 = o2[t4], m2 = b2, k2 = y2 ? "set" : "add", x2 = m2 && m2.prototype, w2 = {}, S2 = function(t5) {
              var e4 = x2[t5];
              i2(x2, t5, t5 == "delete" || t5 == "has" ? function(t6) {
                return !(g2 && !u2(t6)) && e4.call(this, t6 === 0 ? 0 : t6);
              } : t5 == "get" ? function(t6) {
                return g2 && !u2(t6) ? void 0 : e4.call(this, t6 === 0 ? 0 : t6);
              } : t5 == "add" ? function(t6) {
                return e4.call(this, t6 === 0 ? 0 : t6), this;
              } : function(t6, n4) {
                return e4.call(this, t6 === 0 ? 0 : t6, n4), this;
              });
            };
            if (typeof m2 == "function" && (g2 || x2.forEach && !f3(function() {
              new m2().entries().next();
            }))) {
              var T2 = new m2(), E2 = T2[k2](g2 ? {} : -0, 1) != T2, C2 = f3(function() {
                T2.has(1);
              }), B2 = d2(function(t5) {
                new m2(t5);
              }), _2 = !g2 && f3(function() {
                for (var t5 = new m2(), e4 = 5; e4--; )
                  t5[k2](e4, e4);
                return !t5.has(-0);
              });
              B2 || ((m2 = e3(function(e4, n4) {
                l2(e4, m2, t4);
                var o3 = h2(new b2(), e4, m2);
                return n4 != null && c2(n4, y2, o3[k2], o3), o3;
              })).prototype = x2, x2.constructor = m2), (C2 || _2) && (S2("delete"), S2("has"), y2 && S2("get")), (_2 || E2) && S2(k2), g2 && x2.clear && delete x2.clear;
            } else
              m2 = v2.getConstructor(e3, t4, y2, k2), a2(m2.prototype, n3), s2.NEED = true;
            return p2(m2, t4), w2[t4] = m2, r2(r2.G + r2.W + r2.F * (m2 != b2), w2), g2 || v2.setStrong(m2, t4, y2), m2;
          };
        }, function(t3, e2, n2) {
          for (var o2, r2 = n2(10), i2 = n2(27), a2 = n2(44), s2 = a2("typed_array"), c2 = a2("view"), l2 = !(!r2.ArrayBuffer || !r2.DataView), u2 = l2, f3 = 0, d2 = "Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(","); f3 < 9; )
            (o2 = r2[d2[f3++]]) ? (i2(o2.prototype, s2, true), i2(o2.prototype, c2, true)) : u2 = false;
          t3.exports = { ABV: l2, CONSTR: u2, TYPED: s2, VIEW: c2 };
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "getMethodsForTool", value: function(t5) {
                return Object.assign(this.methods, { i18n: this.Editor.I18nAPI.getMethodsForTool(t5) });
              } }, { key: "methods", get: function() {
                return { blocks: this.Editor.BlocksAPI.methods, caret: this.Editor.CaretAPI.methods, events: this.Editor.EventsAPI.methods, listeners: this.Editor.ListenersAPI.methods, notifier: this.Editor.NotifierAPI.methods, sanitizer: this.Editor.SanitizerAPI.methods, saver: this.Editor.SaverAPI.methods, selection: this.Editor.SelectionAPI.methods, styles: this.Editor.StylesAPI.classes, toolbar: this.Editor.ToolbarAPI.methods, inlineToolbar: this.Editor.InlineToolbarAPI.methods, tooltip: this.Editor.TooltipAPI.methods, i18n: this.Editor.I18nAPI.methods, readOnly: this.Editor.ReadOnlyAPI.methods };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "API", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(15), n2(8), n2(59), n2(81)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2) {
            "use strict";
            var h2 = n2(9), v2 = n2(1);
            function y2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = v2(r3), i3 = v2(i3), a2 = v2(a2), s2 = v2(s2), c2 = v2(c2), l2 = v2(l2), u2 = v2(u2), f3 = h2(f3), d2 = v2(d2);
            var g2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (y2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "toggleReadOnly", value: function(t5) {
                t5 ? (this.destroy(), this.Editor.Toolbox.destroy(), this.Editor.BlockSettings.destroy(), this.disableModuleBindings()) : (this.drawUI(), this.enableModuleBindings());
              } }, { key: "move", value: function() {
                var t5 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0];
                t5 && (this.Editor.Toolbox.close(), this.Editor.BlockSettings.close());
                var e4 = this.Editor.BlockManager.currentBlock.holder;
                if (e4) {
                  var n4 = this.Editor.UI.isMobile, o5 = e4.offsetHeight, r4 = e4.offsetTop;
                  if (n4)
                    r4 += o5;
                  else {
                    var i4 = Math.floor(o5 / 2);
                    this.nodes.plusButton.style.transform = "translate3d(0, calc(".concat(i4, "px - 50%), 0)"), this.Editor.Toolbox.nodes.toolbox.style.transform = "translate3d(0, calc(".concat(i4, "px - 50%), 0)");
                  }
                  this.nodes.wrapper.style.transform = "translate3D(0, ".concat(Math.floor(r4), "px, 0)");
                }
              } }, { key: "open", value: function() {
                var t5 = this, e4 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0], n4 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
                f3.delay(function() {
                  t5.move(n4), t5.nodes.wrapper.classList.add(t5.CSS.toolbarOpened), e4 ? t5.blockActions.show() : t5.blockActions.hide();
                }, 50)();
              } }, { key: "close", value: function() {
                this.nodes.wrapper.classList.remove(this.CSS.toolbarOpened), this.blockActions.hide(), this.Editor.Toolbox.close(), this.Editor.BlockSettings.close();
              } }, { key: "make", value: function() {
                var t5 = this;
                this.nodes.wrapper = u2.default.make("div", this.CSS.toolbar), ["content", "actions"].forEach(function(e5) {
                  t5.nodes[e5] = u2.default.make("div", t5.CSS[e5]);
                }), u2.default.append(this.nodes.wrapper, this.nodes.content), u2.default.append(this.nodes.content, this.nodes.actions), this.nodes.plusButton = u2.default.make("div", this.CSS.plusButton), u2.default.append(this.nodes.plusButton, u2.default.svg("plus", 14, 14)), u2.default.append(this.nodes.content, this.nodes.plusButton), this.readOnlyMutableListeners.on(this.nodes.plusButton, "click", function() {
                  t5.plusButtonClicked();
                }, false);
                var e4 = u2.default.make("div");
                e4.appendChild(document.createTextNode(d2.default.ui(p2.I18nInternalNS.ui.toolbar.toolbox, "Add"))), e4.appendChild(u2.default.make("div", this.CSS.plusButtonShortcut, { textContent: "\u21E5 Tab" })), this.Editor.Tooltip.onHover(this.nodes.plusButton, e4), this.nodes.blockActionsButtons = u2.default.make("div", this.CSS.blockActionsButtons), this.nodes.settingsToggler = u2.default.make("span", this.CSS.settingsToggler);
                var n4 = u2.default.svg("dots", 8, 8);
                u2.default.append(this.nodes.settingsToggler, n4), u2.default.append(this.nodes.blockActionsButtons, this.nodes.settingsToggler), u2.default.append(this.nodes.actions, this.nodes.blockActionsButtons), this.Editor.Tooltip.onHover(this.nodes.settingsToggler, d2.default.ui(p2.I18nInternalNS.ui.blockTunes.toggler, "Click to tune"), { placement: "top" }), u2.default.append(this.nodes.content, this.Editor.Toolbox.nodes.toolbox), u2.default.append(this.nodes.actions, this.Editor.BlockSettings.nodes.wrapper), u2.default.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper);
              } }, { key: "plusButtonClicked", value: function() {
                this.Editor.Toolbox.toggle();
              } }, { key: "enableModuleBindings", value: function() {
                var t5 = this;
                this.readOnlyMutableListeners.on(this.nodes.settingsToggler, "click", function() {
                  t5.settingsTogglerClicked();
                });
              } }, { key: "disableModuleBindings", value: function() {
                this.readOnlyMutableListeners.clearAll();
              } }, { key: "settingsTogglerClicked", value: function() {
                this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.BlockSettings.open();
              } }, { key: "drawUI", value: function() {
                this.Editor.BlockSettings.make(), this.Editor.Toolbox.make(), this.make();
              } }, { key: "destroy", value: function() {
                this.removeAllNodes();
              } }, { key: "CSS", get: function() {
                return { toolbar: "ce-toolbar", content: "ce-toolbar__content", actions: "ce-toolbar__actions", actionsOpened: "ce-toolbar__actions--opened", toolbarOpened: "ce-toolbar--opened", plusButton: "ce-toolbar__plus", plusButtonShortcut: "ce-toolbar__plus-shortcut", plusButtonHidden: "ce-toolbar__plus--hidden", blockActionsButtons: "ce-toolbar__actions-buttons", settingsToggler: "ce-toolbar__settings-btn" };
              } }, { key: "opened", get: function() {
                return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened);
              } }, { key: "plusButton", get: function() {
                var t5 = this;
                return { hide: function() {
                  return t5.nodes.plusButton.classList.add(t5.CSS.plusButtonHidden);
                }, show: function() {
                  t5.Editor.Toolbox.isEmpty || t5.nodes.plusButton.classList.remove(t5.CSS.plusButtonHidden);
                } };
              } }, { key: "blockActions", get: function() {
                var t5 = this;
                return { hide: function() {
                  t5.nodes.actions.classList.remove(t5.CSS.actionsOpened);
                }, show: function() {
                  t5.nodes.actions.classList.add(t5.CSS.actionsOpened);
                } };
              } }]), o4;
            }(l2.default);
            o3.default = g2, g2.displayName = "Toolbar", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(144), n2(8)], (i2 = typeof (o2 = function(t4, e3, o3, r3) {
            "use strict";
            var i3 = n2(1);
            Object.defineProperty(t4, "__esModule", { value: true }), t4.I18nInternalNS = void 0, e3 = i3(e3);
            var a2 = function t5(n3, o4) {
              var i4 = {};
              return Object.entries(n3).forEach(function(n4) {
                var a3 = (0, e3.default)(n4, 2), s2 = a3[0], c2 = a3[1];
                if ((0, r3.isObject)(c2)) {
                  var l2 = o4 ? "".concat(o4, ".").concat(s2) : s2, u2 = Object.values(c2).every(function(t6) {
                    return (0, r3.isString)(t6);
                  });
                  i4[s2] = u2 ? l2 : t5(c2, l2);
                } else
                  i4[s2] = c2;
              }), i4;
            }((o3 = i3(o3)).default);
            t4.I18nInternalNS = a2;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(10).document, i2 = o2(r2) && o2(r2.createElement);
          t3.exports = function(t4) {
            return i2 ? r2.createElement(t4) : {};
          };
        }, function(t3, e2, n2) {
          e2.f = n2(14);
        }, function(t3, e2, n2) {
          var o2 = n2(67)("keys"), r2 = n2(44);
          t3.exports = function(t4) {
            return o2[t4] || (o2[t4] = r2(t4));
          };
        }, function(t3, e2) {
          t3.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
        }, function(t3, e2, n2) {
          var o2 = n2(10).document;
          t3.exports = o2 && o2.documentElement;
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(12), i2 = function(t4, e3) {
            if (r2(t4), !o2(e3) && e3 !== null)
              throw TypeError(e3 + ": can't set as prototype!");
          };
          t3.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function(t4, e3, o3) {
            try {
              (o3 = n2(31)(Function.call, n2(34).f(Object.prototype, "__proto__").set, 2))(t4, []), e3 = !(t4 instanceof Array);
            } catch (t5) {
              e3 = true;
            }
            return function(t5, n3) {
              return i2(t5, n3), e3 ? t5.__proto__ = n3 : o3(t5, n3), t5;
            };
          }({}, false) : void 0), check: i2 };
        }, function(t3, e2) {
          t3.exports = "	\n\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(87).set;
          t3.exports = function(t4, e3, n3) {
            var i2, a2 = e3.constructor;
            return a2 !== n3 && typeof a2 == "function" && (i2 = a2.prototype) !== n3.prototype && o2(i2) && r2 && r2(t4, i2), t4;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(33), r2 = n2(38);
          t3.exports = function(t4) {
            var e3 = String(r2(this)), n3 = "", i2 = o2(t4);
            if (i2 < 0 || i2 == 1 / 0)
              throw RangeError("Count can't be negative");
            for (; i2 > 0; (i2 >>>= 1) && (e3 += e3))
              1 & i2 && (n3 += e3);
            return n3;
          };
        }, function(t3, e2) {
          t3.exports = Math.sign || function(t4) {
            return (t4 = +t4) == 0 || t4 != t4 ? t4 : t4 < 0 ? -1 : 1;
          };
        }, function(t3, e2) {
          var n2 = Math.expm1;
          t3.exports = !n2 || n2(10) > 22025.465794806718 || n2(10) < 22025.465794806718 || n2(-2e-17) != -2e-17 ? function(t4) {
            return (t4 = +t4) == 0 ? t4 : t4 > -1e-6 && t4 < 1e-6 ? t4 + t4 * t4 / 2 : Math.exp(t4) - 1;
          } : n2;
        }, function(t3, e2, n2) {
          var o2 = n2(33), r2 = n2(38);
          t3.exports = function(t4) {
            return function(e3, n3) {
              var i2, a2, s2 = String(r2(e3)), c2 = o2(n3), l2 = s2.length;
              return c2 < 0 || c2 >= l2 ? t4 ? "" : void 0 : (i2 = s2.charCodeAt(c2)) < 55296 || i2 > 56319 || c2 + 1 === l2 || (a2 = s2.charCodeAt(c2 + 1)) < 56320 || a2 > 57343 ? t4 ? s2.charAt(c2) : i2 : t4 ? s2.slice(c2, c2 + 2) : a2 - 56320 + (i2 - 55296 << 10) + 65536;
            };
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(45), r2 = n2(0), i2 = n2(23), a2 = n2(27), s2 = n2(55), c2 = n2(123), l2 = n2(53), u2 = n2(50), f3 = n2(14)("iterator"), d2 = !([].keys && "next" in [].keys()), p2 = function() {
            return this;
          };
          t3.exports = function(t4, e3, n3, h2, v2, y2, g2) {
            c2(n3, e3, h2);
            var b2, m2, k2, x2 = function(t5) {
              if (!d2 && t5 in E2)
                return E2[t5];
              switch (t5) {
                case "keys":
                case "values":
                  return function() {
                    return new n3(this, t5);
                  };
              }
              return function() {
                return new n3(this, t5);
              };
            }, w2 = e3 + " Iterator", S2 = v2 == "values", T2 = false, E2 = t4.prototype, C2 = E2[f3] || E2["@@iterator"] || v2 && E2[v2], B2 = C2 || x2(v2), _2 = v2 ? S2 ? x2("entries") : B2 : void 0, I2 = e3 == "Array" && E2.entries || C2;
            if (I2 && (k2 = u2(I2.call(new t4()))) !== Object.prototype && k2.next && (l2(k2, w2, true), o2 || typeof k2[f3] == "function" || a2(k2, f3, p2)), S2 && C2 && C2.name !== "values" && (T2 = true, B2 = function() {
              return C2.call(this);
            }), o2 && !g2 || !d2 && !T2 && E2[f3] || a2(E2, f3, B2), s2[e3] = B2, s2[w2] = p2, v2)
              if (b2 = { values: S2 ? B2 : x2("values"), keys: y2 ? B2 : x2("keys"), entries: _2 }, g2)
                for (m2 in b2)
                  m2 in E2 || i2(E2, m2, b2[m2]);
              else
                r2(r2.P + r2.F * (d2 || T2), e3, b2);
            return b2;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(96), r2 = n2(38);
          t3.exports = function(t4, e3, n3) {
            if (o2(e3))
              throw TypeError("String#" + n3 + " doesn't accept regex!");
            return String(r2(t4));
          };
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(37), i2 = n2(14)("match");
          t3.exports = function(t4) {
            var e3;
            return o2(t4) && ((e3 = t4[i2]) !== void 0 ? !!e3 : r2(t4) == "RegExp");
          };
        }, function(t3, e2, n2) {
          var o2 = n2(14)("match");
          t3.exports = function(t4) {
            var e3 = /./;
            try {
              "/./"[t4](e3);
            } catch (n3) {
              try {
                return e3[o2] = false, !"/./"[t4](e3);
              } catch (t5) {
              }
            }
            return true;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(55), r2 = n2(14)("iterator"), i2 = Array.prototype;
          t3.exports = function(t4) {
            return t4 !== void 0 && (o2.Array === t4 || i2[r2] === t4);
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(19), r2 = n2(43);
          t3.exports = function(t4, e3, n3) {
            e3 in t4 ? o2.f(t4, e3, r2(0, n3)) : t4[e3] = n3;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(64), r2 = n2(14)("iterator"), i2 = n2(55);
          t3.exports = n2(17).getIteratorMethod = function(t4) {
            if (t4 != null)
              return t4[r2] || t4["@@iterator"] || i2[o2(t4)];
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(20), r2 = n2(47), i2 = n2(16);
          t3.exports = function(t4) {
            for (var e3 = o2(this), n3 = i2(e3.length), a2 = arguments.length, s2 = r2(a2 > 1 ? arguments[1] : void 0, n3), c2 = a2 > 2 ? arguments[2] : void 0, l2 = c2 === void 0 ? n3 : r2(c2, n3); l2 > s2; )
              e3[s2++] = t4;
            return e3;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(51), r2 = n2(128), i2 = n2(55), a2 = n2(28);
          t3.exports = n2(94)(Array, "Array", function(t4, e3) {
            this._t = a2(t4), this._i = 0, this._k = e3;
          }, function() {
            var t4 = this._t, e3 = this._k, n3 = this._i++;
            return !t4 || n3 >= t4.length ? (this._t = void 0, r2(1)) : r2(0, e3 == "keys" ? n3 : e3 == "values" ? t4[n3] : [n3, t4[n3]]);
          }, "values"), i2.Arguments = i2.Array, o2("keys"), o2("values"), o2("entries");
        }, function(t3, e2, n2) {
          "use strict";
          var o2, r2, i2 = n2(72), a2 = RegExp.prototype.exec, s2 = String.prototype.replace, c2 = a2, l2 = (o2 = /a/, r2 = /b*/g, a2.call(o2, "a"), a2.call(r2, "a"), o2.lastIndex !== 0 || r2.lastIndex !== 0), u2 = /()??/.exec("")[1] !== void 0;
          (l2 || u2) && (c2 = function(t4) {
            var e3, n3, o3, r3, c3 = this;
            return u2 && (n3 = new RegExp("^" + c3.source + "$(?!\\s)", i2.call(c3))), l2 && (e3 = c3.lastIndex), o3 = a2.call(c3, t4), l2 && o3 && (c3.lastIndex = c3.global ? o3.index + o3[0].length : e3), u2 && o3 && o3.length > 1 && s2.call(o3[0], n3, function() {
              for (r3 = 1; r3 < arguments.length - 2; r3++)
                arguments[r3] === void 0 && (o3[r3] = void 0);
            }), o3;
          }), t3.exports = c2;
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(93)(true);
          t3.exports = function(t4, e3, n3) {
            return e3 + (n3 ? o2(t4, e3).length : 1);
          };
        }, function(t3, e2, n2) {
          var o2, r2, i2, a2 = n2(31), s2 = n2(117), c2 = n2(86), l2 = n2(82), u2 = n2(10), f3 = u2.process, d2 = u2.setImmediate, p2 = u2.clearImmediate, h2 = u2.MessageChannel, v2 = u2.Dispatch, y2 = 0, g2 = {}, b2 = function() {
            var t4 = +this;
            if (g2.hasOwnProperty(t4)) {
              var e3 = g2[t4];
              delete g2[t4], e3();
            }
          }, m2 = function(t4) {
            b2.call(t4.data);
          };
          d2 && p2 || (d2 = function(t4) {
            for (var e3 = [], n3 = 1; arguments.length > n3; )
              e3.push(arguments[n3++]);
            return g2[++y2] = function() {
              s2(typeof t4 == "function" ? t4 : Function(t4), e3);
            }, o2(y2), y2;
          }, p2 = function(t4) {
            delete g2[t4];
          }, n2(37)(f3) == "process" ? o2 = function(t4) {
            f3.nextTick(a2(b2, t4, 1));
          } : v2 && v2.now ? o2 = function(t4) {
            v2.now(a2(b2, t4, 1));
          } : h2 ? (i2 = (r2 = new h2()).port2, r2.port1.onmessage = m2, o2 = a2(i2.postMessage, i2, 1)) : u2.addEventListener && typeof postMessage == "function" && !u2.importScripts ? (o2 = function(t4) {
            u2.postMessage(t4 + "", "*");
          }, u2.addEventListener("message", m2, false)) : o2 = "onreadystatechange" in l2("script") ? function(t4) {
            c2.appendChild(l2("script")).onreadystatechange = function() {
              c2.removeChild(this), b2.call(t4);
            };
          } : function(t4) {
            setTimeout(a2(b2, t4, 1), 0);
          }), t3.exports = { set: d2, clear: p2 };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(10), r2 = n2(18), i2 = n2(45), a2 = n2(78), s2 = n2(27), c2 = n2(58), l2 = n2(11), u2 = n2(57), f3 = n2(33), d2 = n2(16), p2 = n2(136), h2 = n2(49).f, v2 = n2(19).f, y2 = n2(101), g2 = n2(53), b2 = o2.ArrayBuffer, m2 = o2.DataView, k2 = o2.Math, x2 = o2.RangeError, w2 = o2.Infinity, S2 = b2, T2 = k2.abs, E2 = k2.pow, C2 = k2.floor, B2 = k2.log, _2 = k2.LN2, I2 = r2 ? "_b" : "buffer", O2 = r2 ? "_l" : "byteLength", M2 = r2 ? "_o" : "byteOffset";
          function R2(t4, e3, n3) {
            var o3, r3, i3, a3 = new Array(n3), s3 = 8 * n3 - e3 - 1, c3 = (1 << s3) - 1, l3 = c3 >> 1, u3 = e3 === 23 ? E2(2, -24) - E2(2, -77) : 0, f4 = 0, d3 = t4 < 0 || t4 === 0 && 1 / t4 < 0 ? 1 : 0;
            for ((t4 = T2(t4)) != t4 || t4 === w2 ? (r3 = t4 != t4 ? 1 : 0, o3 = c3) : (o3 = C2(B2(t4) / _2), t4 * (i3 = E2(2, -o3)) < 1 && (o3--, i3 *= 2), (t4 += o3 + l3 >= 1 ? u3 / i3 : u3 * E2(2, 1 - l3)) * i3 >= 2 && (o3++, i3 /= 2), o3 + l3 >= c3 ? (r3 = 0, o3 = c3) : o3 + l3 >= 1 ? (r3 = (t4 * i3 - 1) * E2(2, e3), o3 += l3) : (r3 = t4 * E2(2, l3 - 1) * E2(2, e3), o3 = 0)); e3 >= 8; a3[f4++] = 255 & r3, r3 /= 256, e3 -= 8)
              ;
            for (o3 = o3 << e3 | r3, s3 += e3; s3 > 0; a3[f4++] = 255 & o3, o3 /= 256, s3 -= 8)
              ;
            return a3[--f4] |= 128 * d3, a3;
          }
          function A2(t4, e3, n3) {
            var o3, r3 = 8 * n3 - e3 - 1, i3 = (1 << r3) - 1, a3 = i3 >> 1, s3 = r3 - 7, c3 = n3 - 1, l3 = t4[c3--], u3 = 127 & l3;
            for (l3 >>= 7; s3 > 0; u3 = 256 * u3 + t4[c3], c3--, s3 -= 8)
              ;
            for (o3 = u3 & (1 << -s3) - 1, u3 >>= -s3, s3 += e3; s3 > 0; o3 = 256 * o3 + t4[c3], c3--, s3 -= 8)
              ;
            if (u3 === 0)
              u3 = 1 - a3;
            else {
              if (u3 === i3)
                return o3 ? NaN : l3 ? -w2 : w2;
              o3 += E2(2, e3), u3 -= a3;
            }
            return (l3 ? -1 : 1) * o3 * E2(2, u3 - e3);
          }
          function N2(t4) {
            return t4[3] << 24 | t4[2] << 16 | t4[1] << 8 | t4[0];
          }
          function P2(t4) {
            return [255 & t4];
          }
          function L2(t4) {
            return [255 & t4, t4 >> 8 & 255];
          }
          function D2(t4) {
            return [255 & t4, t4 >> 8 & 255, t4 >> 16 & 255, t4 >> 24 & 255];
          }
          function j2(t4) {
            return R2(t4, 52, 8);
          }
          function F2(t4) {
            return R2(t4, 23, 4);
          }
          function U2(t4, e3, n3) {
            v2(t4.prototype, e3, { get: function() {
              return this[n3];
            } });
          }
          function H2(t4, e3, n3, o3) {
            var r3 = p2(+n3);
            if (r3 + e3 > t4[O2])
              throw x2("Wrong index!");
            var i3 = t4[I2]._b, a3 = r3 + t4[M2], s3 = i3.slice(a3, a3 + e3);
            return o3 ? s3 : s3.reverse();
          }
          function z2(t4, e3, n3, o3, r3, i3) {
            var a3 = p2(+n3);
            if (a3 + e3 > t4[O2])
              throw x2("Wrong index!");
            for (var s3 = t4[I2]._b, c3 = a3 + t4[M2], l3 = o3(+r3), u3 = 0; u3 < e3; u3++)
              s3[c3 + u3] = l3[i3 ? u3 : e3 - u3 - 1];
          }
          if (a2.ABV) {
            if (!l2(function() {
              b2(1);
            }) || !l2(function() {
              new b2(-1);
            }) || l2(function() {
              return new b2(), new b2(1.5), new b2(NaN), b2.name != "ArrayBuffer";
            })) {
              for (var W2, Y2 = (b2 = function(t4) {
                return u2(this, b2), new S2(p2(t4));
              }).prototype = S2.prototype, V2 = h2(S2), X2 = 0; V2.length > X2; )
                (W2 = V2[X2++]) in b2 || s2(b2, W2, S2[W2]);
              i2 || (Y2.constructor = b2);
            }
            var G2 = new m2(new b2(2)), K2 = m2.prototype.setInt8;
            G2.setInt8(0, 2147483648), G2.setInt8(1, 2147483649), !G2.getInt8(0) && G2.getInt8(1) || c2(m2.prototype, { setInt8: function(t4, e3) {
              K2.call(this, t4, e3 << 24 >> 24);
            }, setUint8: function(t4, e3) {
              K2.call(this, t4, e3 << 24 >> 24);
            } }, true);
          } else
            b2 = function(t4) {
              u2(this, b2, "ArrayBuffer");
              var e3 = p2(t4);
              this._b = y2.call(new Array(e3), 0), this[O2] = e3;
            }, m2 = function(t4, e3, n3) {
              u2(this, m2, "DataView"), u2(t4, b2, "DataView");
              var o3 = t4[O2], r3 = f3(e3);
              if (r3 < 0 || r3 > o3)
                throw x2("Wrong offset!");
              if (r3 + (n3 = n3 === void 0 ? o3 - r3 : d2(n3)) > o3)
                throw x2("Wrong length!");
              this[I2] = t4, this[M2] = r3, this[O2] = n3;
            }, r2 && (U2(b2, "byteLength", "_l"), U2(m2, "buffer", "_b"), U2(m2, "byteLength", "_l"), U2(m2, "byteOffset", "_o")), c2(m2.prototype, { getInt8: function(t4) {
              return H2(this, 1, t4)[0] << 24 >> 24;
            }, getUint8: function(t4) {
              return H2(this, 1, t4)[0];
            }, getInt16: function(t4) {
              var e3 = H2(this, 2, t4, arguments[1]);
              return (e3[1] << 8 | e3[0]) << 16 >> 16;
            }, getUint16: function(t4) {
              var e3 = H2(this, 2, t4, arguments[1]);
              return e3[1] << 8 | e3[0];
            }, getInt32: function(t4) {
              return N2(H2(this, 4, t4, arguments[1]));
            }, getUint32: function(t4) {
              return N2(H2(this, 4, t4, arguments[1])) >>> 0;
            }, getFloat32: function(t4) {
              return A2(H2(this, 4, t4, arguments[1]), 23, 4);
            }, getFloat64: function(t4) {
              return A2(H2(this, 8, t4, arguments[1]), 52, 8);
            }, setInt8: function(t4, e3) {
              z2(this, 1, t4, P2, e3);
            }, setUint8: function(t4, e3) {
              z2(this, 1, t4, P2, e3);
            }, setInt16: function(t4, e3) {
              z2(this, 2, t4, L2, e3, arguments[2]);
            }, setUint16: function(t4, e3) {
              z2(this, 2, t4, L2, e3, arguments[2]);
            }, setInt32: function(t4, e3) {
              z2(this, 4, t4, D2, e3, arguments[2]);
            }, setUint32: function(t4, e3) {
              z2(this, 4, t4, D2, e3, arguments[2]);
            }, setFloat32: function(t4, e3) {
              z2(this, 4, t4, F2, e3, arguments[2]);
            }, setFloat64: function(t4, e3) {
              z2(this, 8, t4, j2, e3, arguments[2]);
            } });
          g2(b2, "ArrayBuffer"), g2(m2, "DataView"), s2(m2.prototype, a2.VIEW, true), e2.ArrayBuffer = b2, e2.DataView = m2;
        }, function(t3, e2) {
          function n2(e3, o2) {
            return t3.exports = n2 = Object.setPrototypeOf || function(t4, e4) {
              return t4.__proto__ = e4, t4;
            }, n2(e3, o2);
          }
          t3.exports = n2;
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(42), n2(2), n2(3), n2(377)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2) {
            "use strict";
            var c2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = c2(r3), i3 = c2(i3), a2 = c2(a2), s2 = c2(s2);
            var l2 = function() {
              function t4() {
                (0, i3.default)(this, t4), this.registeredShortcuts = /* @__PURE__ */ new Map();
              }
              return (0, a2.default)(t4, [{ key: "add", value: function(t5) {
                if (this.findShortcut(t5.on, t5.name))
                  throw Error("Shortcut ".concat(t5.name, " is already registered for ").concat(t5.on, ". Please remove it before add a new handler."));
                var e3 = new s2.default({ name: t5.name, on: t5.on, callback: t5.handler }), n3 = this.registeredShortcuts.get(t5.on) || [];
                this.registeredShortcuts.set(t5.on, [].concat((0, r3.default)(n3), [e3]));
              } }, { key: "remove", value: function(t5, e3) {
                var n3 = this.findShortcut(t5, e3);
                if (n3) {
                  n3.remove();
                  var o4 = this.registeredShortcuts.get(t5);
                  this.registeredShortcuts.set(t5, o4.filter(function(t6) {
                    return t6 !== n3;
                  }));
                }
              } }, { key: "findShortcut", value: function(t5, e3) {
                return (this.registeredShortcuts.get(t5) || []).find(function(t6) {
                  return t6.name === e3;
                });
              } }]), t4;
            }();
            l2.displayName = "Shortcuts";
            var u2 = new l2();
            o3.default = u2, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          t3.exports = !n2(18) && !n2(11)(function() {
            return Object.defineProperty(n2(82)("div"), "a", { get: function() {
              return 7;
            } }).a != 7;
          });
        }, function(t3, e2, n2) {
          var o2 = n2(10), r2 = n2(17), i2 = n2(45), a2 = n2(83), s2 = n2(19).f;
          t3.exports = function(t4) {
            var e3 = r2.Symbol || (r2.Symbol = i2 ? {} : o2.Symbol || {});
            t4.charAt(0) == "_" || t4 in e3 || s2(e3, t4, { value: a2.f(t4) });
          };
        }, function(t3, e2, n2) {
          var o2 = n2(26), r2 = n2(28), i2 = n2(68)(false), a2 = n2(84)("IE_PROTO");
          t3.exports = function(t4, e3) {
            var n3, s2 = r2(t4), c2 = 0, l2 = [];
            for (n3 in s2)
              n3 != a2 && o2(s2, n3) && l2.push(n3);
            for (; e3.length > c2; )
              o2(s2, n3 = e3[c2++]) && (~i2(l2, n3) || l2.push(n3));
            return l2;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(19), r2 = n2(12), i2 = n2(46);
          t3.exports = n2(18) ? Object.defineProperties : function(t4, e3) {
            r2(t4);
            for (var n3, a2 = i2(e3), s2 = a2.length, c2 = 0; s2 > c2; )
              o2.f(t4, n3 = a2[c2++], e3[n3]);
            return t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(28), r2 = n2(49).f, i2 = {}.toString, a2 = typeof window == "object" && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
          t3.exports.f = function(t4) {
            return a2 && i2.call(t4) == "[object Window]" ? function(t5) {
              try {
                return r2(t5);
              } catch (t6) {
                return a2.slice();
              }
            }(t4) : r2(o2(t4));
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(18), r2 = n2(46), i2 = n2(69), a2 = n2(63), s2 = n2(20), c2 = n2(62), l2 = Object.assign;
          t3.exports = !l2 || n2(11)(function() {
            var t4 = {}, e3 = {}, n3 = Symbol(), o3 = "abcdefghijklmnopqrst";
            return t4[n3] = 7, o3.split("").forEach(function(t5) {
              e3[t5] = t5;
            }), l2({}, t4)[n3] != 7 || Object.keys(l2({}, e3)).join("") != o3;
          }) ? function(t4, e3) {
            for (var n3 = s2(t4), l3 = arguments.length, u2 = 1, f3 = i2.f, d2 = a2.f; l3 > u2; )
              for (var p2, h2 = c2(arguments[u2++]), v2 = f3 ? r2(h2).concat(f3(h2)) : r2(h2), y2 = v2.length, g2 = 0; y2 > g2; )
                p2 = v2[g2++], o2 && !d2.call(h2, p2) || (n3[p2] = h2[p2]);
            return n3;
          } : l2;
        }, function(t3, e2) {
          t3.exports = Object.is || function(t4, e3) {
            return t4 === e3 ? t4 !== 0 || 1 / t4 == 1 / e3 : t4 != t4 && e3 != e3;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(32), r2 = n2(13), i2 = n2(117), a2 = [].slice, s2 = {}, c2 = function(t4, e3, n3) {
            if (!(e3 in s2)) {
              for (var o3 = [], r3 = 0; r3 < e3; r3++)
                o3[r3] = "a[" + r3 + "]";
              s2[e3] = Function("F,a", "return new F(" + o3.join(",") + ")");
            }
            return s2[e3](t4, n3);
          };
          t3.exports = Function.bind || function(t4) {
            var e3 = o2(this), n3 = a2.call(arguments, 1), s3 = function() {
              var o3 = n3.concat(a2.call(arguments));
              return this instanceof s3 ? c2(e3, o3.length, o3) : i2(e3, o3, t4);
            };
            return r2(e3.prototype) && (s3.prototype = e3.prototype), s3;
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3, n2) {
            var o2 = n2 === void 0;
            switch (e3.length) {
              case 0:
                return o2 ? t4() : t4.call(n2);
              case 1:
                return o2 ? t4(e3[0]) : t4.call(n2, e3[0]);
              case 2:
                return o2 ? t4(e3[0], e3[1]) : t4.call(n2, e3[0], e3[1]);
              case 3:
                return o2 ? t4(e3[0], e3[1], e3[2]) : t4.call(n2, e3[0], e3[1], e3[2]);
              case 4:
                return o2 ? t4(e3[0], e3[1], e3[2], e3[3]) : t4.call(n2, e3[0], e3[1], e3[2], e3[3]);
            }
            return t4.apply(n2, e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(10).parseInt, r2 = n2(54).trim, i2 = n2(88), a2 = /^[-+]?0[xX]/;
          t3.exports = o2(i2 + "08") !== 8 || o2(i2 + "0x16") !== 22 ? function(t4, e3) {
            var n3 = r2(String(t4), 3);
            return o2(n3, e3 >>> 0 || (a2.test(n3) ? 16 : 10));
          } : o2;
        }, function(t3, e2, n2) {
          var o2 = n2(10).parseFloat, r2 = n2(54).trim;
          t3.exports = 1 / o2(n2(88) + "-0") != -1 / 0 ? function(t4) {
            var e3 = r2(String(t4), 3), n3 = o2(e3);
            return n3 === 0 && e3.charAt(0) == "-" ? -0 : n3;
          } : o2;
        }, function(t3, e2, n2) {
          var o2 = n2(37);
          t3.exports = function(t4, e3) {
            if (typeof t4 != "number" && o2(t4) != "Number")
              throw TypeError(e3);
            return +t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = Math.floor;
          t3.exports = function(t4) {
            return !o2(t4) && isFinite(t4) && r2(t4) === t4;
          };
        }, function(t3, e2) {
          t3.exports = Math.log1p || function(t4) {
            return (t4 = +t4) > -1e-8 && t4 < 1e-8 ? t4 - t4 * t4 / 2 : Math.log(1 + t4);
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(48), r2 = n2(43), i2 = n2(53), a2 = {};
          n2(27)(a2, n2(14)("iterator"), function() {
            return this;
          }), t3.exports = function(t4, e3, n3) {
            t4.prototype = o2(a2, { next: r2(1, n3) }), i2(t4, e3 + " Iterator");
          };
        }, function(t3, e2, n2) {
          var o2 = n2(12);
          t3.exports = function(t4, e3, n3, r2) {
            try {
              return r2 ? e3(o2(n3)[0], n3[1]) : e3(n3);
            } catch (e4) {
              var i2 = t4.return;
              throw i2 !== void 0 && o2(i2.call(t4)), e4;
            }
          };
        }, function(t3, e2, n2) {
          var o2 = n2(278);
          t3.exports = function(t4, e3) {
            return new (o2(t4))(e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(32), r2 = n2(20), i2 = n2(62), a2 = n2(16);
          t3.exports = function(t4, e3, n3, s2, c2) {
            o2(e3);
            var l2 = r2(t4), u2 = i2(l2), f3 = a2(l2.length), d2 = c2 ? f3 - 1 : 0, p2 = c2 ? -1 : 1;
            if (n3 < 2)
              for (; ; ) {
                if (d2 in u2) {
                  s2 = u2[d2], d2 += p2;
                  break;
                }
                if (d2 += p2, c2 ? d2 < 0 : f3 <= d2)
                  throw TypeError("Reduce of empty array with no initial value");
              }
            for (; c2 ? d2 >= 0 : f3 > d2; d2 += p2)
              d2 in u2 && (s2 = e3(s2, u2[d2], d2, l2));
            return s2;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(20), r2 = n2(47), i2 = n2(16);
          t3.exports = [].copyWithin || function(t4, e3) {
            var n3 = o2(this), a2 = i2(n3.length), s2 = r2(t4, a2), c2 = r2(e3, a2), l2 = arguments.length > 2 ? arguments[2] : void 0, u2 = Math.min((l2 === void 0 ? a2 : r2(l2, a2)) - c2, a2 - s2), f3 = 1;
            for (c2 < s2 && s2 < c2 + u2 && (f3 = -1, c2 += u2 - 1, s2 += u2 - 1); u2-- > 0; )
              c2 in n3 ? n3[s2] = n3[c2] : delete n3[s2], s2 += f3, c2 += f3;
            return n3;
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3) {
            return { value: e3, done: !!t4 };
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(103);
          n2(0)({ target: "RegExp", proto: true, forced: o2 !== /./.exec }, { exec: o2 });
        }, function(t3, e2, n2) {
          n2(18) && /./g.flags != "g" && n2(19).f(RegExp.prototype, "flags", { configurable: true, get: n2(72) });
        }, function(t3, e2, n2) {
          "use strict";
          var o2, r2, i2, a2, s2 = n2(45), c2 = n2(10), l2 = n2(31), u2 = n2(64), f3 = n2(0), d2 = n2(13), p2 = n2(32), h2 = n2(57), v2 = n2(75), y2 = n2(65), g2 = n2(105).set, b2 = n2(298)(), m2 = n2(132), k2 = n2(299), x2 = n2(76), w2 = n2(133), S2 = c2.TypeError, T2 = c2.process, E2 = T2 && T2.versions, C2 = E2 && E2.v8 || "", B2 = c2.Promise, _2 = u2(T2) == "process", I2 = function() {
          }, O2 = r2 = m2.f, M2 = !!function() {
            try {
              var t4 = B2.resolve(1), e3 = (t4.constructor = {})[n2(14)("species")] = function(t5) {
                t5(I2, I2);
              };
              return (_2 || typeof PromiseRejectionEvent == "function") && t4.then(I2) instanceof e3 && C2.indexOf("6.6") !== 0 && x2.indexOf("Chrome/66") === -1;
            } catch (t5) {
            }
          }(), R2 = function(t4) {
            var e3;
            return !(!d2(t4) || typeof (e3 = t4.then) != "function") && e3;
          }, A2 = function(t4, e3) {
            if (!t4._n) {
              t4._n = true;
              var n3 = t4._c;
              b2(function() {
                for (var o3 = t4._v, r3 = t4._s == 1, i3 = 0, a3 = function(e4) {
                  var n4, i4, a4, s3 = r3 ? e4.ok : e4.fail, c3 = e4.resolve, l3 = e4.reject, u3 = e4.domain;
                  try {
                    s3 ? (r3 || (t4._h == 2 && L2(t4), t4._h = 1), s3 === true ? n4 = o3 : (u3 && u3.enter(), n4 = s3(o3), u3 && (u3.exit(), a4 = true)), n4 === e4.promise ? l3(S2("Promise-chain cycle")) : (i4 = R2(n4)) ? i4.call(n4, c3, l3) : c3(n4)) : l3(o3);
                  } catch (t5) {
                    u3 && !a4 && u3.exit(), l3(t5);
                  }
                }; n3.length > i3; )
                  a3(n3[i3++]);
                t4._c = [], t4._n = false, e3 && !t4._h && N2(t4);
              });
            }
          }, N2 = function(t4) {
            g2.call(c2, function() {
              var e3, n3, o3, r3 = t4._v, i3 = P2(t4);
              if (i3 && (e3 = k2(function() {
                _2 ? T2.emit("unhandledRejection", r3, t4) : (n3 = c2.onunhandledrejection) ? n3({ promise: t4, reason: r3 }) : (o3 = c2.console) && o3.error && o3.error("Unhandled promise rejection", r3);
              }), t4._h = _2 || P2(t4) ? 2 : 1), t4._a = void 0, i3 && e3.e)
                throw e3.v;
            });
          }, P2 = function(t4) {
            return t4._h !== 1 && (t4._a || t4._c).length === 0;
          }, L2 = function(t4) {
            g2.call(c2, function() {
              var e3;
              _2 ? T2.emit("rejectionHandled", t4) : (e3 = c2.onrejectionhandled) && e3({ promise: t4, reason: t4._v });
            });
          }, D2 = function(t4) {
            var e3 = this;
            e3._d || (e3._d = true, (e3 = e3._w || e3)._v = t4, e3._s = 2, e3._a || (e3._a = e3._c.slice()), A2(e3, true));
          }, j2 = function(t4) {
            var e3, n3 = this;
            if (!n3._d) {
              n3._d = true, n3 = n3._w || n3;
              try {
                if (n3 === t4)
                  throw S2("Promise can't be resolved itself");
                (e3 = R2(t4)) ? b2(function() {
                  var o3 = { _w: n3, _d: false };
                  try {
                    e3.call(t4, l2(j2, o3, 1), l2(D2, o3, 1));
                  } catch (t5) {
                    D2.call(o3, t5);
                  }
                }) : (n3._v = t4, n3._s = 1, A2(n3, false));
              } catch (t5) {
                D2.call({ _w: n3, _d: false }, t5);
              }
            }
          };
          M2 || (B2 = function(t4) {
            h2(this, B2, "Promise", "_h"), p2(t4), o2.call(this);
            try {
              t4(l2(j2, this, 1), l2(D2, this, 1));
            } catch (t5) {
              D2.call(this, t5);
            }
          }, (o2 = function(t4) {
            this._c = [], this._a = void 0, this._s = 0, this._d = false, this._v = void 0, this._h = 0, this._n = false;
          }).prototype = n2(58)(B2.prototype, { then: function(t4, e3) {
            var n3 = O2(y2(this, B2));
            return n3.ok = typeof t4 != "function" || t4, n3.fail = typeof e3 == "function" && e3, n3.domain = _2 ? T2.domain : void 0, this._c.push(n3), this._a && this._a.push(n3), this._s && A2(this, false), n3.promise;
          }, catch: function(t4) {
            return this.then(void 0, t4);
          } }), i2 = function() {
            var t4 = new o2();
            this.promise = t4, this.resolve = l2(j2, t4, 1), this.reject = l2(D2, t4, 1);
          }, m2.f = O2 = function(t4) {
            return t4 === B2 || t4 === a2 ? new i2(t4) : r2(t4);
          }), f3(f3.G + f3.W + f3.F * !M2, { Promise: B2 }), n2(53)(B2, "Promise"), n2(56)("Promise"), a2 = n2(17).Promise, f3(f3.S + f3.F * !M2, "Promise", { reject: function(t4) {
            var e3 = O2(this);
            return (0, e3.reject)(t4), e3.promise;
          } }), f3(f3.S + f3.F * (s2 || !M2), "Promise", { resolve: function(t4) {
            return w2(s2 && this === a2 ? B2 : this, t4);
          } }), f3(f3.S + f3.F * !(M2 && n2(71)(function(t4) {
            B2.all(t4).catch(I2);
          })), "Promise", { all: function(t4) {
            var e3 = this, n3 = O2(e3), o3 = n3.resolve, r3 = n3.reject, i3 = k2(function() {
              var n4 = [], i4 = 0, a3 = 1;
              v2(t4, false, function(t5) {
                var s3 = i4++, c3 = false;
                n4.push(void 0), a3++, e3.resolve(t5).then(function(t6) {
                  c3 || (c3 = true, n4[s3] = t6, --a3 || o3(n4));
                }, r3);
              }), --a3 || o3(n4);
            });
            return i3.e && r3(i3.v), n3.promise;
          }, race: function(t4) {
            var e3 = this, n3 = O2(e3), o3 = n3.reject, r3 = k2(function() {
              v2(t4, false, function(t5) {
                e3.resolve(t5).then(n3.resolve, o3);
              });
            });
            return r3.e && o3(r3.v), n3.promise;
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(32);
          function r2(t4) {
            var e3, n3;
            this.promise = new t4(function(t5, o3) {
              if (e3 !== void 0 || n3 !== void 0)
                throw TypeError("Bad Promise constructor");
              e3 = t5, n3 = o3;
            }), this.resolve = o2(e3), this.reject = o2(n3);
          }
          t3.exports.f = function(t4) {
            return new r2(t4);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(12), r2 = n2(13), i2 = n2(132);
          t3.exports = function(t4, e3) {
            if (o2(t4), r2(e3) && e3.constructor === t4)
              return e3;
            var n3 = i2.f(t4);
            return (0, n3.resolve)(e3), n3.promise;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(19).f, r2 = n2(48), i2 = n2(58), a2 = n2(31), s2 = n2(57), c2 = n2(75), l2 = n2(94), u2 = n2(128), f3 = n2(56), d2 = n2(18), p2 = n2(41).fastKey, h2 = n2(52), v2 = d2 ? "_s" : "size", y2 = function(t4, e3) {
            var n3, o3 = p2(e3);
            if (o3 !== "F")
              return t4._i[o3];
            for (n3 = t4._f; n3; n3 = n3.n)
              if (n3.k == e3)
                return n3;
          };
          t3.exports = { getConstructor: function(t4, e3, n3, l3) {
            var u3 = t4(function(t5, o3) {
              s2(t5, u3, e3, "_i"), t5._t = e3, t5._i = r2(null), t5._f = void 0, t5._l = void 0, t5[v2] = 0, o3 != null && c2(o3, n3, t5[l3], t5);
            });
            return i2(u3.prototype, { clear: function() {
              for (var t5 = h2(this, e3), n4 = t5._i, o3 = t5._f; o3; o3 = o3.n)
                o3.r = true, o3.p && (o3.p = o3.p.n = void 0), delete n4[o3.i];
              t5._f = t5._l = void 0, t5[v2] = 0;
            }, delete: function(t5) {
              var n4 = h2(this, e3), o3 = y2(n4, t5);
              if (o3) {
                var r3 = o3.n, i3 = o3.p;
                delete n4._i[o3.i], o3.r = true, i3 && (i3.n = r3), r3 && (r3.p = i3), n4._f == o3 && (n4._f = r3), n4._l == o3 && (n4._l = i3), n4[v2]--;
              }
              return !!o3;
            }, forEach: function(t5) {
              h2(this, e3);
              for (var n4, o3 = a2(t5, arguments.length > 1 ? arguments[1] : void 0, 3); n4 = n4 ? n4.n : this._f; )
                for (o3(n4.v, n4.k, this); n4 && n4.r; )
                  n4 = n4.p;
            }, has: function(t5) {
              return !!y2(h2(this, e3), t5);
            } }), d2 && o2(u3.prototype, "size", { get: function() {
              return h2(this, e3)[v2];
            } }), u3;
          }, def: function(t4, e3, n3) {
            var o3, r3, i3 = y2(t4, e3);
            return i3 ? i3.v = n3 : (t4._l = i3 = { i: r3 = p2(e3, true), k: e3, v: n3, p: o3 = t4._l, n: void 0, r: false }, t4._f || (t4._f = i3), o3 && (o3.n = i3), t4[v2]++, r3 !== "F" && (t4._i[r3] = i3)), t4;
          }, getEntry: y2, setStrong: function(t4, e3, n3) {
            l2(t4, e3, function(t5, n4) {
              this._t = h2(t5, e3), this._k = n4, this._l = void 0;
            }, function() {
              for (var t5 = this._k, e4 = this._l; e4 && e4.r; )
                e4 = e4.p;
              return this._t && (this._l = e4 = e4 ? e4.n : this._t._f) ? u2(0, t5 == "keys" ? e4.k : t5 == "values" ? e4.v : [e4.k, e4.v]) : (this._t = void 0, u2(1));
            }, n3 ? "entries" : "values", !n3, true), f3(e3);
          } };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(58), r2 = n2(41).getWeak, i2 = n2(12), a2 = n2(13), s2 = n2(57), c2 = n2(75), l2 = n2(36), u2 = n2(26), f3 = n2(52), d2 = l2(5), p2 = l2(6), h2 = 0, v2 = function(t4) {
            return t4._l || (t4._l = new y2());
          }, y2 = function() {
            this.a = [];
          }, g2 = function(t4, e3) {
            return d2(t4.a, function(t5) {
              return t5[0] === e3;
            });
          };
          y2.prototype = { get: function(t4) {
            var e3 = g2(this, t4);
            if (e3)
              return e3[1];
          }, has: function(t4) {
            return !!g2(this, t4);
          }, set: function(t4, e3) {
            var n3 = g2(this, t4);
            n3 ? n3[1] = e3 : this.a.push([t4, e3]);
          }, delete: function(t4) {
            var e3 = p2(this.a, function(e4) {
              return e4[0] === t4;
            });
            return ~e3 && this.a.splice(e3, 1), !!~e3;
          } }, t3.exports = { getConstructor: function(t4, e3, n3, i3) {
            var l3 = t4(function(t5, o3) {
              s2(t5, l3, e3, "_i"), t5._t = e3, t5._i = h2++, t5._l = void 0, o3 != null && c2(o3, n3, t5[i3], t5);
            });
            return o2(l3.prototype, { delete: function(t5) {
              if (!a2(t5))
                return false;
              var n4 = r2(t5);
              return n4 === true ? v2(f3(this, e3)).delete(t5) : n4 && u2(n4, this._i) && delete n4[this._i];
            }, has: function(t5) {
              if (!a2(t5))
                return false;
              var n4 = r2(t5);
              return n4 === true ? v2(f3(this, e3)).has(t5) : n4 && u2(n4, this._i);
            } }), l3;
          }, def: function(t4, e3, n3) {
            var o3 = r2(i2(e3), true);
            return o3 === true ? v2(t4).set(e3, n3) : o3[t4._i] = n3, t4;
          }, ufstore: v2 };
        }, function(t3, e2, n2) {
          var o2 = n2(33), r2 = n2(16);
          t3.exports = function(t4) {
            if (t4 === void 0)
              return 0;
            var e3 = o2(t4), n3 = r2(e3);
            if (e3 !== n3)
              throw RangeError("Wrong length!");
            return n3;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(49), r2 = n2(69), i2 = n2(12), a2 = n2(10).Reflect;
          t3.exports = a2 && a2.ownKeys || function(t4) {
            var e3 = o2.f(i2(t4)), n3 = r2.f;
            return n3 ? e3.concat(n3(t4)) : e3;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(16), r2 = n2(90), i2 = n2(38);
          t3.exports = function(t4, e3, n3, a2) {
            var s2 = String(i2(t4)), c2 = s2.length, l2 = n3 === void 0 ? " " : String(n3), u2 = o2(e3);
            if (u2 <= c2 || l2 == "")
              return s2;
            var f3 = u2 - c2, d2 = r2.call(l2, Math.ceil(f3 / l2.length));
            return d2.length > f3 && (d2 = d2.slice(0, f3)), a2 ? d2 + s2 : s2 + d2;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(18), r2 = n2(46), i2 = n2(28), a2 = n2(63).f;
          t3.exports = function(t4) {
            return function(e3) {
              for (var n3, s2 = i2(e3), c2 = r2(s2), l2 = c2.length, u2 = 0, f3 = []; l2 > u2; )
                n3 = c2[u2++], o2 && !a2.call(s2, n3) || f3.push(t4 ? [n3, s2[n3]] : s2[n3]);
              return f3;
            };
          };
        }, function(t3, e2, n2) {
          var o2 = function(t4) {
            "use strict";
            var e3 = Object.prototype, n3 = e3.hasOwnProperty, o3 = typeof Symbol == "function" ? Symbol : {}, r2 = o3.iterator || "@@iterator", i2 = o3.asyncIterator || "@@asyncIterator", a2 = o3.toStringTag || "@@toStringTag";
            function s2(t5, e4, n4, o4) {
              var r3 = e4 && e4.prototype instanceof u2 ? e4 : u2, i3 = Object.create(r3.prototype), a3 = new w2(o4 || []);
              return i3._invoke = function(t6, e5, n5) {
                var o5 = "suspendedStart";
                return function(r4, i4) {
                  if (o5 === "executing")
                    throw new Error("Generator is already running");
                  if (o5 === "completed") {
                    if (r4 === "throw")
                      throw i4;
                    return T2();
                  }
                  for (n5.method = r4, n5.arg = i4; ; ) {
                    var a4 = n5.delegate;
                    if (a4) {
                      var s3 = m2(a4, n5);
                      if (s3) {
                        if (s3 === l2)
                          continue;
                        return s3;
                      }
                    }
                    if (n5.method === "next")
                      n5.sent = n5._sent = n5.arg;
                    else if (n5.method === "throw") {
                      if (o5 === "suspendedStart")
                        throw o5 = "completed", n5.arg;
                      n5.dispatchException(n5.arg);
                    } else
                      n5.method === "return" && n5.abrupt("return", n5.arg);
                    o5 = "executing";
                    var u3 = c2(t6, e5, n5);
                    if (u3.type === "normal") {
                      if (o5 = n5.done ? "completed" : "suspendedYield", u3.arg === l2)
                        continue;
                      return { value: u3.arg, done: n5.done };
                    }
                    u3.type === "throw" && (o5 = "completed", n5.method = "throw", n5.arg = u3.arg);
                  }
                };
              }(t5, n4, a3), i3;
            }
            function c2(t5, e4, n4) {
              try {
                return { type: "normal", arg: t5.call(e4, n4) };
              } catch (t6) {
                return { type: "throw", arg: t6 };
              }
            }
            t4.wrap = s2;
            var l2 = {};
            function u2() {
            }
            function f3() {
            }
            function d2() {
            }
            var p2 = {};
            p2[r2] = function() {
              return this;
            };
            var h2 = Object.getPrototypeOf, v2 = h2 && h2(h2(S2([])));
            v2 && v2 !== e3 && n3.call(v2, r2) && (p2 = v2);
            var y2 = d2.prototype = u2.prototype = Object.create(p2);
            function g2(t5) {
              ["next", "throw", "return"].forEach(function(e4) {
                t5[e4] = function(t6) {
                  return this._invoke(e4, t6);
                };
              });
            }
            function b2(t5, e4) {
              var o4;
              this._invoke = function(r3, i3) {
                function a3() {
                  return new e4(function(o5, a4) {
                    !function o6(r4, i4, a5, s3) {
                      var l3 = c2(t5[r4], t5, i4);
                      if (l3.type !== "throw") {
                        var u3 = l3.arg, f4 = u3.value;
                        return f4 && typeof f4 == "object" && n3.call(f4, "__await") ? e4.resolve(f4.__await).then(function(t6) {
                          o6("next", t6, a5, s3);
                        }, function(t6) {
                          o6("throw", t6, a5, s3);
                        }) : e4.resolve(f4).then(function(t6) {
                          u3.value = t6, a5(u3);
                        }, function(t6) {
                          return o6("throw", t6, a5, s3);
                        });
                      }
                      s3(l3.arg);
                    }(r3, i3, o5, a4);
                  });
                }
                return o4 = o4 ? o4.then(a3, a3) : a3();
              };
            }
            function m2(t5, e4) {
              var n4 = t5.iterator[e4.method];
              if (n4 === void 0) {
                if (e4.delegate = null, e4.method === "throw") {
                  if (t5.iterator.return && (e4.method = "return", e4.arg = void 0, m2(t5, e4), e4.method === "throw"))
                    return l2;
                  e4.method = "throw", e4.arg = new TypeError("The iterator does not provide a 'throw' method");
                }
                return l2;
              }
              var o4 = c2(n4, t5.iterator, e4.arg);
              if (o4.type === "throw")
                return e4.method = "throw", e4.arg = o4.arg, e4.delegate = null, l2;
              var r3 = o4.arg;
              return r3 ? r3.done ? (e4[t5.resultName] = r3.value, e4.next = t5.nextLoc, e4.method !== "return" && (e4.method = "next", e4.arg = void 0), e4.delegate = null, l2) : r3 : (e4.method = "throw", e4.arg = new TypeError("iterator result is not an object"), e4.delegate = null, l2);
            }
            function k2(t5) {
              var e4 = { tryLoc: t5[0] };
              1 in t5 && (e4.catchLoc = t5[1]), 2 in t5 && (e4.finallyLoc = t5[2], e4.afterLoc = t5[3]), this.tryEntries.push(e4);
            }
            function x2(t5) {
              var e4 = t5.completion || {};
              e4.type = "normal", delete e4.arg, t5.completion = e4;
            }
            function w2(t5) {
              this.tryEntries = [{ tryLoc: "root" }], t5.forEach(k2, this), this.reset(true);
            }
            function S2(t5) {
              if (t5) {
                var e4 = t5[r2];
                if (e4)
                  return e4.call(t5);
                if (typeof t5.next == "function")
                  return t5;
                if (!isNaN(t5.length)) {
                  var o4 = -1, i3 = function e5() {
                    for (; ++o4 < t5.length; )
                      if (n3.call(t5, o4))
                        return e5.value = t5[o4], e5.done = false, e5;
                    return e5.value = void 0, e5.done = true, e5;
                  };
                  return i3.next = i3;
                }
              }
              return { next: T2 };
            }
            function T2() {
              return { value: void 0, done: true };
            }
            return f3.prototype = y2.constructor = d2, d2.constructor = f3, d2[a2] = f3.displayName = "GeneratorFunction", t4.isGeneratorFunction = function(t5) {
              var e4 = typeof t5 == "function" && t5.constructor;
              return !!e4 && (e4 === f3 || (e4.displayName || e4.name) === "GeneratorFunction");
            }, t4.mark = function(t5) {
              return Object.setPrototypeOf ? Object.setPrototypeOf(t5, d2) : (t5.__proto__ = d2, a2 in t5 || (t5[a2] = "GeneratorFunction")), t5.prototype = Object.create(y2), t5;
            }, t4.awrap = function(t5) {
              return { __await: t5 };
            }, g2(b2.prototype), b2.prototype[i2] = function() {
              return this;
            }, t4.AsyncIterator = b2, t4.async = function(e4, n4, o4, r3, i3) {
              i3 === void 0 && (i3 = Promise);
              var a3 = new b2(s2(e4, n4, o4, r3), i3);
              return t4.isGeneratorFunction(n4) ? a3 : a3.next().then(function(t5) {
                return t5.done ? t5.value : a3.next();
              });
            }, g2(y2), y2[a2] = "Generator", y2[r2] = function() {
              return this;
            }, y2.toString = function() {
              return "[object Generator]";
            }, t4.keys = function(t5) {
              var e4 = [];
              for (var n4 in t5)
                e4.push(n4);
              return e4.reverse(), function n5() {
                for (; e4.length; ) {
                  var o4 = e4.pop();
                  if (o4 in t5)
                    return n5.value = o4, n5.done = false, n5;
                }
                return n5.done = true, n5;
              };
            }, t4.values = S2, w2.prototype = { constructor: w2, reset: function(t5) {
              if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(x2), !t5)
                for (var e4 in this)
                  e4.charAt(0) === "t" && n3.call(this, e4) && !isNaN(+e4.slice(1)) && (this[e4] = void 0);
            }, stop: function() {
              this.done = true;
              var t5 = this.tryEntries[0].completion;
              if (t5.type === "throw")
                throw t5.arg;
              return this.rval;
            }, dispatchException: function(t5) {
              if (this.done)
                throw t5;
              var e4 = this;
              function o4(n4, o5) {
                return a3.type = "throw", a3.arg = t5, e4.next = n4, o5 && (e4.method = "next", e4.arg = void 0), !!o5;
              }
              for (var r3 = this.tryEntries.length - 1; r3 >= 0; --r3) {
                var i3 = this.tryEntries[r3], a3 = i3.completion;
                if (i3.tryLoc === "root")
                  return o4("end");
                if (i3.tryLoc <= this.prev) {
                  var s3 = n3.call(i3, "catchLoc"), c3 = n3.call(i3, "finallyLoc");
                  if (s3 && c3) {
                    if (this.prev < i3.catchLoc)
                      return o4(i3.catchLoc, true);
                    if (this.prev < i3.finallyLoc)
                      return o4(i3.finallyLoc);
                  } else if (s3) {
                    if (this.prev < i3.catchLoc)
                      return o4(i3.catchLoc, true);
                  } else {
                    if (!c3)
                      throw new Error("try statement without catch or finally");
                    if (this.prev < i3.finallyLoc)
                      return o4(i3.finallyLoc);
                  }
                }
              }
            }, abrupt: function(t5, e4) {
              for (var o4 = this.tryEntries.length - 1; o4 >= 0; --o4) {
                var r3 = this.tryEntries[o4];
                if (r3.tryLoc <= this.prev && n3.call(r3, "finallyLoc") && this.prev < r3.finallyLoc) {
                  var i3 = r3;
                  break;
                }
              }
              i3 && (t5 === "break" || t5 === "continue") && i3.tryLoc <= e4 && e4 <= i3.finallyLoc && (i3 = null);
              var a3 = i3 ? i3.completion : {};
              return a3.type = t5, a3.arg = e4, i3 ? (this.method = "next", this.next = i3.finallyLoc, l2) : this.complete(a3);
            }, complete: function(t5, e4) {
              if (t5.type === "throw")
                throw t5.arg;
              return t5.type === "break" || t5.type === "continue" ? this.next = t5.arg : t5.type === "return" ? (this.rval = this.arg = t5.arg, this.method = "return", this.next = "end") : t5.type === "normal" && e4 && (this.next = e4), l2;
            }, finish: function(t5) {
              for (var e4 = this.tryEntries.length - 1; e4 >= 0; --e4) {
                var n4 = this.tryEntries[e4];
                if (n4.finallyLoc === t5)
                  return this.complete(n4.completion, n4.afterLoc), x2(n4), l2;
              }
            }, catch: function(t5) {
              for (var e4 = this.tryEntries.length - 1; e4 >= 0; --e4) {
                var n4 = this.tryEntries[e4];
                if (n4.tryLoc === t5) {
                  var o4 = n4.completion;
                  if (o4.type === "throw") {
                    var r3 = o4.arg;
                    x2(n4);
                  }
                  return r3;
                }
              }
              throw new Error("illegal catch attempt");
            }, delegateYield: function(t5, e4, n4) {
              return this.delegate = { iterator: S2(t5), resultName: e4, nextLoc: n4 }, this.method === "next" && (this.arg = void 0), l2;
            } }, t4;
          }(t3.exports);
          try {
            regeneratorRuntime = o2;
          } catch (t4) {
            Function("r", "regeneratorRuntime = r")(o2);
          }
        }, function(t3, e2, n2) {
          var o2 = n2(142);
          t3.exports = function(t4, e3) {
            if (t4) {
              if (typeof t4 == "string")
                return o2(t4, e3);
              var n3 = Object.prototype.toString.call(t4).slice(8, -1);
              return n3 === "Object" && t4.constructor && (n3 = t4.constructor.name), n3 === "Map" || n3 === "Set" ? Array.from(n3) : n3 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n3) ? o2(t4, e3) : void 0;
            }
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3) {
            (e3 == null || e3 > t4.length) && (e3 = t4.length);
            for (var n2 = 0, o2 = new Array(e3); n2 < e3; n2++)
              o2[n2] = t4[n2];
            return o2;
          };
        }, function(t3, e2) {
          function n2(e3) {
            return typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? t3.exports = n2 = function(t4) {
              return typeof t4;
            } : t3.exports = n2 = function(t4) {
              return t4 && typeof Symbol == "function" && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            }, n2(e3);
          }
          t3.exports = n2;
        }, function(t3) {
          t3.exports = JSON.parse('{"ui":{"blockTunes":{"toggler":{"Click to tune":"","or drag to move":""}},"inlineToolbar":{"converter":{"Convert to":""}},"toolbar":{"toolbox":{"Add":""}}},"toolNames":{"Text":"","Link":"","Bold":"","Italic":""},"tools":{"link":{"Add a link":""},"stub":{"The block can not be displayed correctly.":""}},"blockTunes":{"delete":{"Delete":""},"moveUp":{"Move up":""},"moveDown":{"Move down":""}}}');
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(5), n2(6), n2(4), n2(146)], (i2 = typeof (o2 = function(t4, e3, o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            function c2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t5) {
                return false;
              }
            }
            Object.defineProperty(t4, "__esModule", { value: true }), t4.CriticalError = void 0, e3 = s2(e3), o3 = s2(o3), r3 = s2(r3), i3 = s2(i3);
            var l2 = function(t5) {
              (0, o3.default)(s3, t5);
              var n3, a3 = (n3 = s3, function() {
                var t6, e4 = (0, i3.default)(n3);
                if (c2()) {
                  var o4 = (0, i3.default)(this).constructor;
                  t6 = Reflect.construct(e4, arguments, o4);
                } else
                  t6 = e4.apply(this, arguments);
                return (0, r3.default)(this, t6);
              });
              function s3() {
                return (0, e3.default)(this, s3), a3.apply(this, arguments);
              }
              return s3;
            }((0, (a2 = s2(a2)).default)(Error));
            t4.CriticalError = l2, l2.displayName = "CriticalError";
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = n2(4), r2 = n2(107), i2 = n2(369), a2 = n2(370);
          function s2(e3) {
            var n3 = typeof Map == "function" ? /* @__PURE__ */ new Map() : void 0;
            return t3.exports = s2 = function(t4) {
              if (t4 === null || !i2(t4))
                return t4;
              if (typeof t4 != "function")
                throw new TypeError("Super expression must either be null or a function");
              if (n3 !== void 0) {
                if (n3.has(t4))
                  return n3.get(t4);
                n3.set(t4, e4);
              }
              function e4() {
                return a2(t4, arguments, o2(this).constructor);
              }
              return e4.prototype = Object.create(t4.prototype, { constructor: { value: e4, enumerable: false, writable: true, configurable: true } }), r2(e4, t4);
            }, s2(e3);
          }
          t3.exports = s2;
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(8), n2(148), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3) {
            "use strict";
            var d2 = n2(9), p2 = n2(1);
            function h2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = p2(r3), i3 = p2(i3), a2 = p2(a2), s2 = p2(s2), c2 = p2(c2), l2 = d2(l2), u2 = p2(u2);
            var v2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (h2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).insert = function() {
                  var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t5.config.defaultBlock, n4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, o5 = (arguments.length > 2 && arguments[2] !== void 0 && arguments[2], arguments.length > 3 ? arguments[3] : void 0), r4 = arguments.length > 4 ? arguments[4] : void 0;
                  t5.Editor.BlockManager.insert({ tool: e4, data: n4, index: o5, needToFocus: r4 });
                }, t5;
              }
              return (0, i3.default)(o4, [{ key: "getBlocksCount", value: function() {
                return this.Editor.BlockManager.blocks.length;
              } }, { key: "getCurrentBlockIndex", value: function() {
                return this.Editor.BlockManager.currentBlockIndex;
              } }, { key: "getBlockByIndex", value: function(t5) {
                var e4 = this.Editor.BlockManager.getBlockByIndex(t5);
                if (e4 !== void 0)
                  return new u2.default(e4);
                l2.logLabeled("There is no block at index `" + t5 + "`", "warn");
              } }, { key: "swap", value: function(t5, e4) {
                l2.log("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead", "info"), this.Editor.BlockManager.swap(t5, e4), this.Editor.Toolbar.move(false);
              } }, { key: "move", value: function(t5, e4) {
                this.Editor.BlockManager.move(t5, e4), this.Editor.Toolbar.move(false);
              } }, { key: "delete", value: function(t5) {
                try {
                  this.Editor.BlockManager.removeBlock(t5);
                } catch (t6) {
                  return void l2.logLabeled(t6, "warn");
                }
                this.Editor.BlockManager.blocks.length === 0 && this.Editor.BlockManager.insert(), this.Editor.BlockManager.currentBlock && this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock, this.Editor.Caret.positions.END), this.Editor.Toolbar.close();
              } }, { key: "clear", value: function() {
                this.Editor.BlockManager.clear(true), this.Editor.InlineToolbar.close();
              } }, { key: "render", value: function(t5) {
                return this.Editor.BlockManager.clear(), this.Editor.Renderer.render(t5.blocks);
              } }, { key: "renderFromHTML", value: function(t5) {
                return this.Editor.BlockManager.clear(), this.Editor.Paste.processText(t5, true);
              } }, { key: "stretchBlock", value: function(t5) {
                var e4 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
                l2.deprecationAssert(true, "blocks.stretchBlock()", "BlockAPI");
                var n4 = this.Editor.BlockManager.getBlockByIndex(t5);
                n4 && (n4.stretched = e4);
              } }, { key: "insertNewBlock", value: function() {
                l2.log("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.", "warn"), this.insert();
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { clear: function() {
                  return t5.clear();
                }, render: function(e4) {
                  return t5.render(e4);
                }, renderFromHTML: function(e4) {
                  return t5.renderFromHTML(e4);
                }, delete: function(e4) {
                  return t5.delete(e4);
                }, swap: function(e4, n4) {
                  return t5.swap(e4, n4);
                }, move: function(e4, n4) {
                  return t5.move(e4, n4);
                }, getBlockByIndex: function(e4) {
                  return t5.getBlockByIndex(e4);
                }, getCurrentBlockIndex: function() {
                  return t5.getCurrentBlockIndex();
                }, getBlocksCount: function() {
                  return t5.getBlocksCount();
                }, stretchBlock: function(e4) {
                  var n4 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
                  return t5.stretchBlock(e4, n4);
                }, insertNewBlock: function() {
                  return t5.insertNewBlock();
                }, insert: this.insert };
              } }]), o4;
            }((f3 = p2(f3)).default);
            o3.default = v2, v2.displayName = "BlocksAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2], (i2 = typeof (o2 = function(n3) {
            "use strict";
            Object.defineProperty(n3, "__esModule", { value: true }), n3.default = void 0;
            var o3 = function(t4) {
              var e3 = { get name() {
                return t4.name;
              }, get config() {
                return t4.config;
              }, get holder() {
                return t4.holder;
              }, get isEmpty() {
                return t4.isEmpty;
              }, get selected() {
                return t4.selected;
              }, set stretched(e4) {
                t4.stretched = e4;
              }, get stretched() {
                return t4.stretched;
              }, call: function(e4, n4) {
                return t4.call(e4, n4);
              }, save: function() {
                return t4.save();
              }, validate: function(e4) {
                return t4.validate(e4);
              } };
              Object.setPrototypeOf(this, e3);
            };
            n3.default = o3, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).setToFirstBlock = function() {
                  var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t5.Editor.Caret.positions.DEFAULT, n4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
                  return !!t5.Editor.BlockManager.firstBlock && (t5.Editor.Caret.setToBlock(t5.Editor.BlockManager.firstBlock, e4, n4), true);
                }, t5.setToLastBlock = function() {
                  var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t5.Editor.Caret.positions.DEFAULT, n4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
                  return !!t5.Editor.BlockManager.lastBlock && (t5.Editor.Caret.setToBlock(t5.Editor.BlockManager.lastBlock, e4, n4), true);
                }, t5.setToPreviousBlock = function() {
                  var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t5.Editor.Caret.positions.DEFAULT, n4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
                  return !!t5.Editor.BlockManager.previousBlock && (t5.Editor.Caret.setToBlock(t5.Editor.BlockManager.previousBlock, e4, n4), true);
                }, t5.setToNextBlock = function() {
                  var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : t5.Editor.Caret.positions.DEFAULT, n4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
                  return !!t5.Editor.BlockManager.nextBlock && (t5.Editor.Caret.setToBlock(t5.Editor.BlockManager.nextBlock, e4, n4), true);
                }, t5.setToBlock = function(e4) {
                  var n4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : t5.Editor.Caret.positions.DEFAULT, o5 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0;
                  return !!t5.Editor.BlockManager.blocks[e4] && (t5.Editor.Caret.setToBlock(t5.Editor.BlockManager.blocks[e4], n4, o5), true);
                }, t5.focus = function() {
                  var e4 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
                  return e4 ? t5.setToLastBlock(t5.Editor.Caret.positions.END) : t5.setToFirstBlock(t5.Editor.Caret.positions.START);
                }, t5;
              }
              return (0, i3.default)(o4, [{ key: "methods", get: function() {
                return { setToFirstBlock: this.setToFirstBlock, setToLastBlock: this.setToLastBlock, setToPreviousBlock: this.setToPreviousBlock, setToNextBlock: this.setToNextBlock, setToBlock: this.setToBlock, focus: this.focus };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "CaretAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "on", value: function(t5, e4) {
                this.eventsDispatcher.on(t5, e4);
              } }, { key: "emit", value: function(t5, e4) {
                this.eventsDispatcher.emit(t5, e4);
              } }, { key: "off", value: function(t5, e4) {
                this.eventsDispatcher.off(t5, e4);
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { emit: function(e4, n4) {
                  return t5.emit(e4, n4);
                }, off: function(e4, n4) {
                  return t5.off(e4, n4);
                }, on: function(e4, n4) {
                  return t5.on(e4, n4);
                } };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "EventsAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(59), n2(8), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3) {
            "use strict";
            var d2 = n2(1);
            function p2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = d2(r3), i3 = d2(i3), a2 = d2(a2), s2 = d2(s2), c2 = d2(c2), l2 = d2(l2);
            var h2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (p2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "getMethodsForTool", value: function(t5) {
                return Object.assign(this.methods, { t: function(e4) {
                  return l2.default.t(o4.getNamespace(t5), e4);
                } });
              } }, { key: "methods", get: function() {
                return { t: function() {
                  (0, u2.logLabeled)("I18n.t() method can be accessed only from Tools", "warn");
                } };
              } }], [{ key: "getNamespace", value: function(t5) {
                return t5.isTune ? "blockTunes.".concat(t5.name) : "tools.".concat(t5.name);
              } }]), o4;
            }((f3 = d2(f3)).default);
            o3.default = h2, h2.displayName = "I18nAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "open", value: function() {
                this.Editor.InlineToolbar.tryToShow();
              } }, { key: "close", value: function() {
                this.Editor.InlineToolbar.close();
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { close: function() {
                  return t5.close();
                }, open: function() {
                  return t5.open();
                } };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "InlineToolbarAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "on", value: function(t5, e4, n4, o5) {
                this.listeners.on(t5, e4, n4, o5);
              } }, { key: "off", value: function(t5, e4, n4, o5) {
                this.listeners.off(t5, e4, n4, o5);
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { on: function(e4, n4, o5, r4) {
                  return t5.on(e4, n4, o5, r4);
                }, off: function(e4, n4, o5, r4) {
                  return t5.off(e4, n4, o5, r4);
                } };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "ListenersAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "show", value: function(t5) {
                return this.Editor.Notifier.show(t5);
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { show: function(e4) {
                  return t5.show(e4);
                } };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "NotifierAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "toggle", value: function(t5) {
                return this.Editor.ReadOnly.toggle(t5);
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { toggle: function(e4) {
                  return t5.toggle(e4);
                } };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "ReadOnlyAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "clean", value: function(t5, e4) {
                return this.Editor.Sanitizer.clean(t5, e4);
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { clean: function(e4, n4) {
                  return t5.clean(e4, n4);
                } };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "SanitizerAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(8), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(9), d2 = n2(1);
            function p2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = d2(r3), i3 = d2(i3), a2 = d2(a2), s2 = d2(s2), c2 = d2(c2), l2 = f3(l2);
            var h2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (p2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "save", value: function() {
                var t5 = "Editor's content can not be saved in read-only mode";
                return this.Editor.ReadOnly.isEnabled ? (l2.logLabeled(t5, "warn"), Promise.reject(new Error(t5))) : this.Editor.Saver.save();
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { save: function() {
                  return t5.save();
                } };
              } }]), o4;
            }((u2 = d2(u2)).default);
            o3.default = h2, h2.displayName = "SaverAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(25), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(1);
            function d2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = f3(r3), i3 = f3(i3), a2 = f3(a2), s2 = f3(s2), c2 = f3(c2), l2 = f3(l2);
            var p2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (d2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "findParentTag", value: function(t5, e4) {
                return new l2.default().findParentTag(t5, e4);
              } }, { key: "expandToTag", value: function(t5) {
                new l2.default().expandToTag(t5);
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { findParentTag: function(e4, n4) {
                  return t5.findParentTag(e4, n4);
                }, expandToTag: function(e4) {
                  return t5.expandToTag(e4);
                } };
              } }]), o4;
            }((u2 = f3(u2)).default);
            o3.default = p2, p2.displayName = "SelectionAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "classes", get: function() {
                return { block: "cdx-block", inlineToolButton: "ce-inline-tool", inlineToolButtonActive: "ce-inline-tool--active", input: "cdx-input", loader: "cdx-loader", button: "cdx-button", settingsButton: "cdx-settings-button", settingsButtonActive: "cdx-settings-button--active" };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "StylesAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(9), d2 = n2(1);
            function p2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = d2(r3), i3 = d2(i3), a2 = d2(a2), s2 = d2(s2), c2 = d2(c2), l2 = d2(l2), u2 = f3(u2);
            var h2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (p2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "open", value: function() {
                this.Editor.Toolbar.open();
              } }, { key: "close", value: function() {
                this.Editor.Toolbar.close();
              } }, { key: "toggleBlockSettings", value: function(t5) {
                if (this.Editor.BlockManager.currentBlockIndex !== -1) {
                  var e4 = t5 != null ? t5 : !this.Editor.BlockSettings.opened;
                  t5 !== this.Editor.BlockSettings.opened && (e4 ? (this.Editor.Toolbar.opened || (this.Editor.Toolbar.open(true, false), this.Editor.Toolbar.plusButton.hide()), this.Editor.BlockSettings.open()) : this.Editor.BlockSettings.close());
                } else
                  u2.logLabeled("Could't toggle the Toolbar because there is no block selected ", "warn");
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { close: function() {
                  return t5.close();
                }, open: function() {
                  return t5.open();
                }, toggleBlockSettings: function(e4) {
                  return t5.toggleBlockSettings(e4);
                } };
              } }]), o4;
            }(l2.default);
            o3.default = h2, h2.displayName = "ToolbarAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            function f3() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = u2(c2);
            var d2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (f3()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "show", value: function(t5, e4, n4) {
                this.Editor.Tooltip.show(t5, e4, n4);
              } }, { key: "hide", value: function() {
                this.Editor.Tooltip.hide();
              } }, { key: "onHover", value: function(t5, e4, n4) {
                this.Editor.Tooltip.onHover(t5, e4, n4);
              } }, { key: "methods", get: function() {
                var t5 = this;
                return { show: function(e4, n4, o5) {
                  return t5.show(e4, n4, o5);
                }, hide: function() {
                  return t5.hide();
                }, onHover: function(e4, n4, o5) {
                  return t5.onHover(e4, n4, o5);
                } };
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = d2, d2.displayName = "TooltipAPI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(8), n2(25), n2(60)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2) {
            "use strict";
            var v2 = n2(9), y2 = n2(1);
            function g2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = y2(r3), i3 = y2(i3), a2 = y2(a2), s2 = y2(s2), c2 = y2(c2), l2 = y2(l2), u2 = y2(u2), f3 = y2(f3), d2 = v2(d2), p2 = y2(p2), h2 = y2(h2);
            var b2 = function(t4) {
              (0, c2.default)(f4, t4);
              var e3, n3, o4 = (e3 = f4, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (g2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function f4() {
                return (0, a2.default)(this, f4), o4.apply(this, arguments);
              }
              return (0, s2.default)(f4, [{ key: "keydown", value: function(t5) {
                switch (this.beforeKeydownProcessing(t5), t5.keyCode) {
                  case d2.keyCodes.BACKSPACE:
                    this.backspace(t5);
                    break;
                  case d2.keyCodes.ENTER:
                    this.enter(t5);
                    break;
                  case d2.keyCodes.DOWN:
                  case d2.keyCodes.RIGHT:
                    this.arrowRightAndDown(t5);
                    break;
                  case d2.keyCodes.UP:
                  case d2.keyCodes.LEFT:
                    this.arrowLeftAndUp(t5);
                    break;
                  case d2.keyCodes.TAB:
                    this.tabPressed(t5);
                }
              } }, { key: "beforeKeydownProcessing", value: function(t5) {
                this.needToolbarClosing(t5) && d2.isPrintableKey(t5.keyCode) && (this.Editor.Toolbar.close(), this.Editor.ConversionToolbar.close(), t5.ctrlKey || t5.metaKey || t5.altKey || t5.shiftKey || (this.Editor.BlockManager.clearFocused(), this.Editor.BlockSelection.clearSelection(t5)));
              } }, { key: "keyup", value: function(t5) {
                t5.shiftKey || this.Editor.UI.checkEmptiness();
              } }, { key: "tabPressed", value: function(t5) {
                this.Editor.BlockSelection.clearSelection(t5);
                var e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.InlineToolbar, r4 = e4.ConversionToolbar, i4 = n4.currentBlock;
                if (i4) {
                  var a3 = i4.tool.isDefault && i4.isEmpty, s3 = !i4.isEmpty && r4.opened, c3 = !i4.isEmpty && !p2.default.isCollapsed && o5.opened;
                  a3 ? this.activateToolbox() : s3 || c3 || this.activateBlockSettings();
                }
              } }, { key: "dragOver", value: function(t5) {
                this.Editor.BlockManager.getBlockByChildNode(t5.target).dropTarget = true;
              } }, { key: "dragLeave", value: function(t5) {
                this.Editor.BlockManager.getBlockByChildNode(t5.target).dropTarget = false;
              } }, { key: "handleCommandC", value: function(t5) {
                var e4 = this.Editor.BlockSelection;
                if (e4.anyBlockSelected)
                  return e4.copySelectedBlocks(t5);
              } }, { key: "handleCommandX", value: (n3 = (0, i3.default)(r3.default.mark(function t5(e4) {
                var n4, o5, i4, a3, s3;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = this.Editor, o5 = n4.BlockSelection, i4 = n4.BlockManager, a3 = n4.Caret, o5.anyBlockSelected) {
                          t6.next = 3;
                          break;
                        }
                        return t6.abrupt("return");
                      case 3:
                        return t6.next = 5, o5.copySelectedBlocks(e4);
                      case 5:
                        s3 = i4.removeSelectedBlocks(), a3.setToBlock(i4.insertDefaultBlockAtIndex(s3, true), a3.positions.START), o5.clearSelection(e4);
                      case 8:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return n3.apply(this, arguments);
              }) }, { key: "enter", value: function(t5) {
                var e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.UI;
                if (!n4.currentBlock.tool.isLineBreaksEnabled && !(o5.someToolbarOpened && o5.someFlipperButtonFocused || t5.shiftKey)) {
                  var r4 = this.Editor.BlockManager.currentBlock;
                  this.Editor.Caret.isAtStart && !this.Editor.BlockManager.currentBlock.hasMedia ? this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex) : r4 = this.Editor.BlockManager.split(), this.Editor.Caret.setToBlock(r4), r4.tool.isDefault && r4.isEmpty && (this.Editor.Toolbar.open(false), this.Editor.Toolbar.plusButton.show()), t5.preventDefault();
                }
              } }, { key: "backspace", value: function(t5) {
                var e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.BlockSelection, r4 = e4.Caret, i4 = n4.currentBlock, a3 = i4.tool;
                if (i4.selected || i4.isEmpty && i4.currentInput === i4.firstInput) {
                  t5.preventDefault();
                  var s3 = n4.currentBlockIndex;
                  return n4.previousBlock && n4.previousBlock.inputs.length === 0 ? n4.removeBlock(s3 - 1) : n4.removeBlock(), r4.setToBlock(n4.currentBlock, s3 ? r4.positions.END : r4.positions.START), this.Editor.Toolbar.close(), void o5.clearSelection(t5);
                }
                if (!a3.isLineBreaksEnabled || r4.isAtStart) {
                  var c3 = n4.currentBlockIndex === 0;
                  r4.isAtStart && p2.default.isCollapsed && i4.currentInput === i4.firstInput && !c3 && (t5.preventDefault(), this.mergeBlocks());
                }
              } }, { key: "mergeBlocks", value: function() {
                var t5 = this.Editor, e4 = t5.BlockManager, n4 = t5.Caret, o5 = t5.Toolbar, r4 = e4.previousBlock, i4 = e4.currentBlock;
                if (i4.name !== r4.name || !r4.mergeable)
                  return r4.inputs.length === 0 || r4.isEmpty ? (e4.removeBlock(e4.currentBlockIndex - 1), n4.setToBlock(e4.currentBlock), void o5.close()) : void (n4.navigatePrevious() && o5.close());
                n4.createShadow(r4.pluginsContent), e4.mergeBlocks(r4, i4).then(function() {
                  n4.restoreCaret(r4.pluginsContent), r4.pluginsContent.normalize(), o5.close();
                });
              } }, { key: "arrowRightAndDown", value: function(t5) {
                var e4 = this, n4 = h2.default.usedKeys.includes(t5.keyCode) && (!t5.shiftKey || t5.keyCode === d2.keyCodes.TAB);
                if (!this.Editor.UI.someToolbarOpened || !n4) {
                  this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();
                  var o5 = this.Editor.Caret.isAtEnd || this.Editor.BlockSelection.anyBlockSelected;
                  t5.shiftKey && t5.keyCode === d2.keyCodes.DOWN && o5 ? this.Editor.CrossBlockSelection.toggleBlockSelectedState() : ((t5.keyCode === d2.keyCodes.DOWN || t5.keyCode === d2.keyCodes.RIGHT && !this.isRtl ? this.Editor.Caret.navigateNext() : this.Editor.Caret.navigatePrevious()) ? t5.preventDefault() : d2.delay(function() {
                    e4.Editor.BlockManager.currentBlock && e4.Editor.BlockManager.currentBlock.updateCurrentInput();
                  }, 20)(), this.Editor.BlockSelection.clearSelection(t5));
                }
              } }, { key: "arrowLeftAndUp", value: function(t5) {
                var e4 = this;
                if (this.Editor.UI.someToolbarOpened) {
                  if (h2.default.usedKeys.includes(t5.keyCode) && (!t5.shiftKey || t5.keyCode === d2.keyCodes.TAB))
                    return;
                  this.Editor.UI.closeAllToolbars();
                }
                this.Editor.BlockManager.clearFocused(), this.Editor.Toolbar.close();
                var n4 = this.Editor.Caret.isAtStart || this.Editor.BlockSelection.anyBlockSelected;
                t5.shiftKey && t5.keyCode === d2.keyCodes.UP && n4 ? this.Editor.CrossBlockSelection.toggleBlockSelectedState(false) : ((t5.keyCode === d2.keyCodes.UP || t5.keyCode === d2.keyCodes.LEFT && !this.isRtl ? this.Editor.Caret.navigatePrevious() : this.Editor.Caret.navigateNext()) ? t5.preventDefault() : d2.delay(function() {
                  e4.Editor.BlockManager.currentBlock && e4.Editor.BlockManager.currentBlock.updateCurrentInput();
                }, 20)(), this.Editor.BlockSelection.clearSelection(t5));
              } }, { key: "needToolbarClosing", value: function(t5) {
                var e4 = t5.keyCode === d2.keyCodes.ENTER && this.Editor.Toolbox.opened, n4 = t5.keyCode === d2.keyCodes.ENTER && this.Editor.BlockSettings.opened, o5 = t5.keyCode === d2.keyCodes.ENTER && this.Editor.InlineToolbar.opened, r4 = t5.keyCode === d2.keyCodes.ENTER && this.Editor.ConversionToolbar.opened, i4 = t5.keyCode === d2.keyCodes.TAB;
                return !(t5.shiftKey || i4 || e4 || n4 || o5 || r4);
              } }, { key: "activateToolbox", value: function() {
                this.Editor.Toolbar.opened || (this.Editor.Toolbar.open(false, false), this.Editor.Toolbar.plusButton.show()), this.Editor.Toolbox.open();
              } }, { key: "activateBlockSettings", value: function() {
                this.Editor.Toolbar.opened || (this.Editor.BlockManager.currentBlock.focused = true, this.Editor.Toolbar.open(true, false), this.Editor.Toolbar.plusButton.hide()), this.Editor.BlockSettings.opened || this.Editor.BlockSettings.open();
              } }]), f4;
            }(f3.default);
            o3.default = b2, b2.displayName = "BlockEvents", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(61), n2(7), n2(15), n2(8), n2(376)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2) {
            "use strict";
            var y2 = n2(9), g2 = n2(1);
            function b2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = g2(r3), i3 = g2(i3), a2 = g2(a2), s2 = g2(s2), c2 = g2(c2), l2 = g2(l2), u2 = g2(u2), f3 = y2(f3), d2 = g2(d2), p2 = g2(p2), h2 = y2(h2), v2 = g2(v2);
            var m2 = function(t4) {
              (0, c2.default)(y3, t4);
              var e3, n3, o4, d3 = (e3 = y3, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (b2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function y3() {
                var t5;
                return (0, a2.default)(this, y3), (t5 = d3.apply(this, arguments))._currentBlockIndex = -1, t5._blocks = null, t5;
              }
              return (0, s2.default)(y3, [{ key: "prepare", value: function() {
                var t5 = this, e4 = new v2.default(this.Editor.UI.nodes.redactor);
                this._blocks = new Proxy(e4, { set: v2.default.set, get: v2.default.get }), this.listeners.on(document, "copy", function(e5) {
                  return t5.Editor.BlockEvents.handleCommandC(e5);
                });
              } }, { key: "toggleReadOnly", value: function(t5) {
                t5 ? this.disableModuleBindings() : this.enableModuleBindings();
              } }, { key: "composeBlock", value: function(t5) {
                var e4 = t5.tool, n4 = t5.data, o5 = n4 === void 0 ? {} : n4, r4 = t5.tunes, i4 = r4 === void 0 ? {} : r4, a3 = this.Editor.ReadOnly.isEnabled, s3 = this.Editor.Tools.blockTools.get(e4), c3 = this.Editor.Tools.getTunesForTool(s3), l3 = new f3.default({ data: o5, tool: s3, api: this.Editor.API, readOnly: a3, tunes: c3, tunesData: i4 });
                return a3 || this.bindBlockEvents(l3), l3;
              } }, { key: "insert", value: function() {
                var t5 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, e4 = t5.tool, n4 = e4 === void 0 ? this.config.defaultBlock : e4, o5 = t5.data, r4 = o5 === void 0 ? {} : o5, i4 = t5.index, a3 = t5.needToFocus, s3 = a3 === void 0 || a3, c3 = t5.replace, l3 = c3 !== void 0 && c3, u3 = t5.tunes, f4 = u3 === void 0 ? {} : u3, d4 = i4;
                d4 === void 0 && (d4 = this.currentBlockIndex + (l3 ? 0 : 1));
                var p3 = this.composeBlock({ tool: n4, data: r4, tunes: f4 });
                return this._blocks.insert(d4, p3, l3), s3 ? this.currentBlockIndex = d4 : d4 <= this.currentBlockIndex && this.currentBlockIndex++, p3;
              } }, { key: "replace", value: function(t5) {
                var e4 = t5.tool, n4 = e4 === void 0 ? this.config.defaultBlock : e4, o5 = t5.data, r4 = o5 === void 0 ? {} : o5;
                return this.insert({ tool: n4, data: r4, index: this.currentBlockIndex, replace: true });
              } }, { key: "paste", value: function(t5, e4) {
                var n4 = arguments.length > 2 && arguments[2] !== void 0 && arguments[2], o5 = this.insert({ tool: t5, replace: n4 });
                try {
                  o5.call(f3.BlockToolAPI.ON_PASTE, e4);
                } catch (e5) {
                  h2.log("".concat(t5, ": onPaste callback call is failed"), "error", e5);
                }
                return o5;
              } }, { key: "insertDefaultBlockAtIndex", value: function(t5) {
                var e4 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], n4 = this.composeBlock({ tool: this.config.defaultBlock });
                return this._blocks[t5] = n4, e4 ? this.currentBlockIndex = t5 : t5 <= this.currentBlockIndex && this.currentBlockIndex++, n4;
              } }, { key: "insertAtEnd", value: function() {
                return this.currentBlockIndex = this.blocks.length - 1, this.insert();
              } }, { key: "mergeBlocks", value: (o4 = (0, i3.default)(r3.default.mark(function t5(e4, n4) {
                var o5, i4;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (o5 = this._blocks.indexOf(n4), !n4.isEmpty) {
                          t6.next = 3;
                          break;
                        }
                        return t6.abrupt("return");
                      case 3:
                        return t6.next = 5, n4.data;
                      case 5:
                        if (i4 = t6.sent, h2.isEmpty(i4)) {
                          t6.next = 9;
                          break;
                        }
                        return t6.next = 9, e4.mergeWith(i4);
                      case 9:
                        this.removeBlock(o5), this.currentBlockIndex = this._blocks.indexOf(e4);
                      case 11:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5, e4) {
                return o4.apply(this, arguments);
              }) }, { key: "removeBlock", value: function() {
                var t5 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.currentBlockIndex;
                if (!this.validateIndex(t5))
                  throw new Error("Can't find a Block to remove");
                this._blocks.remove(t5), this.currentBlockIndex >= t5 && this.currentBlockIndex--, this.blocks.length ? t5 === 0 && (this.currentBlockIndex = 0) : (this.currentBlockIndex = -1, this.insert());
              } }, { key: "removeSelectedBlocks", value: function() {
                for (var t5, e4 = this.blocks.length - 1; e4 >= 0; e4--)
                  this.blocks[e4].selected && (this.removeBlock(e4), t5 = e4);
                return t5;
              } }, { key: "removeAllBlocks", value: function() {
                for (var t5 = this.blocks.length - 1; t5 >= 0; t5--)
                  this._blocks.remove(t5);
                this.currentBlockIndex = -1, this.insert(), this.currentBlock.firstInput.focus();
              } }, { key: "split", value: function() {
                var t5 = this.Editor.Caret.extractFragmentFromCaretPosition(), e4 = p2.default.make("div");
                e4.appendChild(t5);
                var n4 = { text: p2.default.isEmpty(e4) ? "" : e4.innerHTML };
                return this.insert({ data: n4 });
              } }, { key: "getBlockByIndex", value: function(t5) {
                return this._blocks[t5];
              } }, { key: "getBlock", value: function(t5) {
                p2.default.isElement(t5) || (t5 = t5.parentNode);
                var e4 = this._blocks.nodes, n4 = t5.closest(".".concat(f3.default.CSS.wrapper)), o5 = e4.indexOf(n4);
                if (o5 >= 0)
                  return this._blocks[o5];
              } }, { key: "highlightCurrentNode", value: function() {
                this.clearFocused(), this.currentBlock.focused = true;
              } }, { key: "clearFocused", value: function() {
                this.blocks.forEach(function(t5) {
                  t5.focused = false;
                });
              } }, { key: "setCurrentBlockByChildNode", value: function(t5) {
                p2.default.isElement(t5) || (t5 = t5.parentNode);
                var e4 = t5.closest(".".concat(f3.default.CSS.wrapper));
                if (e4) {
                  var n4 = e4.closest(".".concat(this.Editor.UI.CSS.editorWrapper));
                  if (n4 == null ? void 0 : n4.isEqualNode(this.Editor.UI.nodes.wrapper))
                    return this.currentBlockIndex = this._blocks.nodes.indexOf(e4), this.currentBlock.updateCurrentInput(), this.currentBlock;
                }
              } }, { key: "getBlockByChildNode", value: function(t5) {
                p2.default.isElement(t5) || (t5 = t5.parentNode);
                var e4 = t5.closest(".".concat(f3.default.CSS.wrapper));
                return this.blocks.find(function(t6) {
                  return t6.holder === e4;
                });
              } }, { key: "swap", value: function(t5, e4) {
                this._blocks.swap(t5, e4), this.currentBlockIndex = e4;
              } }, { key: "move", value: function(t5) {
                var e4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.currentBlockIndex;
                isNaN(t5) || isNaN(e4) ? h2.log("Warning during 'move' call: incorrect indices provided.", "warn") : this.validateIndex(t5) && this.validateIndex(e4) ? (this._blocks.move(t5, e4), this.currentBlockIndex = t5) : h2.log("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.", "warn");
              } }, { key: "dropPointer", value: function() {
                this.currentBlockIndex = -1, this.clearFocused();
              } }, { key: "clear", value: function() {
                var t5 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
                this._blocks.removeAll(), this.dropPointer(), t5 && this.insert(), this.Editor.UI.checkEmptiness();
              } }, { key: "destroy", value: (n3 = (0, i3.default)(r3.default.mark(function t5() {
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return t6.next = 2, Promise.all(this.blocks.map(function(t7) {
                          return t7.destroy();
                        }));
                      case 2:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function() {
                return n3.apply(this, arguments);
              }) }, { key: "bindBlockEvents", value: function(t5) {
                var e4 = this.Editor.BlockEvents;
                this.readOnlyMutableListeners.on(t5.holder, "keydown", function(t6) {
                  e4.keydown(t6);
                }), this.readOnlyMutableListeners.on(t5.holder, "keyup", function(t6) {
                  e4.keyup(t6);
                }), this.readOnlyMutableListeners.on(t5.holder, "dragover", function(t6) {
                  e4.dragOver(t6);
                }), this.readOnlyMutableListeners.on(t5.holder, "dragleave", function(t6) {
                  e4.dragLeave(t6);
                });
              } }, { key: "disableModuleBindings", value: function() {
                this.readOnlyMutableListeners.clearAll();
              } }, { key: "enableModuleBindings", value: function() {
                var t5 = this;
                this.readOnlyMutableListeners.on(document, "cut", function(e4) {
                  return t5.Editor.BlockEvents.handleCommandX(e4);
                }), this.blocks.forEach(function(e4) {
                  t5.bindBlockEvents(e4);
                });
              } }, { key: "validateIndex", value: function(t5) {
                return !(t5 < 0 || t5 >= this._blocks.length);
              } }, { key: "currentBlockIndex", get: function() {
                return this._currentBlockIndex;
              }, set: function(t5) {
                this._blocks[this._currentBlockIndex] && this._blocks[this._currentBlockIndex].willUnselect(), this._blocks[t5] && this._blocks[t5].willSelect(), this._currentBlockIndex = t5;
              } }, { key: "firstBlock", get: function() {
                return this._blocks[0];
              } }, { key: "lastBlock", get: function() {
                return this._blocks[this._blocks.length - 1];
              } }, { key: "currentBlock", get: function() {
                return this._blocks[this.currentBlockIndex];
              } }, { key: "nextBlock", get: function() {
                return this.currentBlockIndex === this._blocks.length - 1 ? null : this._blocks[this.currentBlockIndex + 1];
              } }, { key: "nextContentfulBlock", get: function() {
                return this.blocks.slice(this.currentBlockIndex + 1).find(function(t5) {
                  return !!t5.inputs.length;
                });
              } }, { key: "previousContentfulBlock", get: function() {
                return this.blocks.slice(0, this.currentBlockIndex).reverse().find(function(t5) {
                  return !!t5.inputs.length;
                });
              } }, { key: "previousBlock", get: function() {
                return this.currentBlockIndex === 0 ? null : this._blocks[this.currentBlockIndex - 1];
              } }, { key: "blocks", get: function() {
                return this._blocks.array;
              } }, { key: "isEditorEmpty", get: function() {
                return this.blocks.every(function(t5) {
                  return t5.isEmpty;
                });
              } }]), y3;
            }(d2.default);
            o3.default = m2, m2.displayName = "BlockManager", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(8), n2(15), n2(108), n2(25)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2) {
            "use strict";
            var y2 = n2(9), g2 = n2(1);
            function b2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = g2(r3), i3 = g2(i3), a2 = g2(a2), s2 = g2(s2), c2 = g2(c2), l2 = g2(l2), u2 = g2(u2), f3 = g2(f3), d2 = y2(d2), p2 = g2(p2), h2 = g2(h2), v2 = g2(v2);
            var m2 = function(t4) {
              (0, c2.default)(f4, t4);
              var e3, n3, o4 = (e3 = f4, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (b2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function f4() {
                var t5;
                return (0, a2.default)(this, f4), (t5 = o4.apply(this, arguments)).anyBlockSelectedCache = null, t5.needToSelectAll = false, t5.nativeInputSelected = false, t5.readyToBlockSelection = false, t5;
              }
              return (0, s2.default)(f4, [{ key: "prepare", value: function() {
                var t5 = this;
                this.selection = new v2.default(), h2.default.add({ name: "CMD+A", handler: function(e4) {
                  var n4 = t5.Editor, o5 = n4.BlockManager;
                  if (n4.ReadOnly.isEnabled)
                    return e4.preventDefault(), void t5.selectAllBlocks();
                  o5.currentBlock && t5.handleCommandA(e4);
                }, on: this.Editor.UI.nodes.redactor });
              } }, { key: "toggleReadOnly", value: function(t5) {
                v2.default.get().removeAllRanges(), this.allBlocksSelected = false;
              } }, { key: "unSelectBlockByIndex", value: function(t5) {
                var e4 = this.Editor.BlockManager;
                (isNaN(t5) ? e4.currentBlock : e4.getBlockByIndex(t5)).selected = false, this.clearCache();
              } }, { key: "clearSelection", value: function(t5) {
                var e4 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], n4 = this.Editor, o5 = n4.BlockManager, r4 = n4.Caret, i4 = n4.RectangleSelection;
                this.needToSelectAll = false, this.nativeInputSelected = false, this.readyToBlockSelection = false;
                var a3 = t5 && t5 instanceof KeyboardEvent, s3 = a3 && d2.isPrintableKey(t5.keyCode);
                if (this.anyBlockSelected && a3 && s3 && !v2.default.isSelectionExists) {
                  var c3 = o5.removeSelectedBlocks();
                  o5.insertDefaultBlockAtIndex(c3, true), r4.setToBlock(o5.currentBlock), d2.delay(function() {
                    var e5 = t5.key;
                    r4.insertContentAtCaretPosition(e5.length > 1 ? "" : e5);
                  }, 20)();
                }
                this.Editor.CrossBlockSelection.clear(t5), this.anyBlockSelected && !i4.isRectActivated() ? (e4 && this.selection.restore(), this.allBlocksSelected = false) : this.Editor.RectangleSelection.clearSelection();
              } }, { key: "copySelectedBlocks", value: (n3 = (0, i3.default)(r3.default.mark(function t5(e4) {
                var n4, o5, i4, a3, s3 = this;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return e4.preventDefault(), n4 = p2.default.make("div"), this.selectedBlocks.forEach(function(t7) {
                          var e5 = s3.Editor.Sanitizer.clean(t7.holder.innerHTML, s3.sanitizerConfig), o6 = p2.default.make("p");
                          o6.innerHTML = e5, n4.appendChild(o6);
                        }), t6.next = 5, Promise.all(this.selectedBlocks.map(function(t7) {
                          return t7.save();
                        }));
                      case 5:
                        o5 = t6.sent, i4 = Array.from(n4.childNodes).map(function(t7) {
                          return t7.textContent;
                        }).join("\n\n"), a3 = n4.innerHTML, e4.clipboardData.setData("text/plain", i4), e4.clipboardData.setData("text/html", a3), e4.clipboardData.setData(this.Editor.Paste.MIME_TYPE, JSON.stringify(o5));
                      case 11:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return n3.apply(this, arguments);
              }) }, { key: "selectBlockByIndex", value: function(t5) {
                var e4, n4 = this.Editor.BlockManager;
                n4.clearFocused(), e4 = isNaN(t5) ? n4.currentBlock : n4.getBlockByIndex(t5), this.selection.save(), v2.default.get().removeAllRanges(), e4.selected = true, this.clearCache(), this.Editor.InlineToolbar.close();
              } }, { key: "clearCache", value: function() {
                this.anyBlockSelectedCache = null;
              } }, { key: "destroy", value: function() {
                h2.default.remove(this.Editor.UI.nodes.redactor, "CMD+A");
              } }, { key: "handleCommandA", value: function(t5) {
                if (this.Editor.RectangleSelection.clearSelection(), !p2.default.isNativeInput(t5.target) || this.readyToBlockSelection) {
                  var e4 = this.Editor.BlockManager.getBlock(t5.target).inputs;
                  e4.length > 1 && !this.readyToBlockSelection ? this.readyToBlockSelection = true : e4.length !== 1 || this.needToSelectAll ? this.needToSelectAll ? (t5.preventDefault(), this.selectAllBlocks(), this.needToSelectAll = false, this.readyToBlockSelection = false, this.Editor.ConversionToolbar.close()) : this.readyToBlockSelection && (t5.preventDefault(), this.selectBlockByIndex(), this.needToSelectAll = true) : this.needToSelectAll = true;
                } else
                  this.readyToBlockSelection = true;
              } }, { key: "selectAllBlocks", value: function() {
                this.selection.save(), v2.default.get().removeAllRanges(), this.allBlocksSelected = true, this.Editor.InlineToolbar.close();
              } }, { key: "sanitizerConfig", get: function() {
                return { p: {}, h1: {}, h2: {}, h3: {}, h4: {}, h5: {}, h6: {}, ol: {}, ul: {}, li: {}, br: true, img: { src: true, width: true, height: true }, a: { href: true }, b: {}, i: {}, u: {} };
              } }, { key: "allBlocksSelected", get: function() {
                return this.Editor.BlockManager.blocks.every(function(t5) {
                  return t5.selected === true;
                });
              }, set: function(t5) {
                this.Editor.BlockManager.blocks.forEach(function(e4) {
                  e4.selected = t5;
                }), this.clearCache();
              } }, { key: "anyBlockSelected", get: function() {
                var t5 = this.Editor.BlockManager;
                return this.anyBlockSelectedCache === null && (this.anyBlockSelectedCache = t5.blocks.some(function(t6) {
                  return t6.selected === true;
                })), this.anyBlockSelectedCache;
              } }, { key: "selectedBlocks", get: function() {
                return this.Editor.BlockManager.blocks.filter(function(t5) {
                  return t5.selected;
                });
              } }]), f4;
            }(f3.default);
            o3.default = m2, m2.displayName = "BlockSelection", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(25), n2(7), n2(15), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2) {
            "use strict";
            var p2 = n2(9), h2 = n2(1);
            function v2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = h2(r3), i3 = h2(i3), a2 = h2(a2), s2 = h2(s2), c2 = h2(c2), l2 = h2(l2), u2 = h2(u2), f3 = h2(f3), d2 = p2(d2);
            var y2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (v2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "setToBlock", value: function(t5) {
                var e4, n4 = this, o5 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.positions.DEFAULT, r4 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, i4 = this.Editor.BlockManager;
                switch (o5) {
                  case this.positions.START:
                    e4 = t5.firstInput;
                    break;
                  case this.positions.END:
                    e4 = t5.lastInput;
                    break;
                  default:
                    e4 = t5.currentInput;
                }
                if (e4) {
                  var a3 = f3.default.getDeepestNode(e4, o5 === this.positions.END), s3 = f3.default.getContentLength(a3);
                  switch (true) {
                    case o5 === this.positions.START:
                      r4 = 0;
                      break;
                    case o5 === this.positions.END:
                    case r4 > s3:
                      r4 = s3;
                  }
                  d2.delay(function() {
                    n4.set(a3, r4);
                  }, 20)(), i4.setCurrentBlockByChildNode(t5.holder), i4.currentBlock.currentInput = e4;
                }
              } }, { key: "setToInput", value: function(t5) {
                var e4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : this.positions.DEFAULT, n4 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, o5 = this.Editor.BlockManager.currentBlock, r4 = f3.default.getDeepestNode(t5);
                switch (e4) {
                  case this.positions.START:
                    this.set(r4, 0);
                    break;
                  case this.positions.END:
                    this.set(r4, f3.default.getContentLength(r4));
                    break;
                  default:
                    n4 && this.set(r4, n4);
                }
                o5.currentInput = t5;
              } }, { key: "set", value: function(t5) {
                var e4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n4 = l2.default.setCursor(t5, e4), o5 = n4.top, r4 = n4.bottom, i4 = window, a3 = i4.innerHeight;
                o5 < 0 && window.scrollBy(0, o5), r4 > a3 && window.scrollBy(0, r4 - a3);
              } }, { key: "setToTheLastBlock", value: function() {
                var t5 = this.Editor.BlockManager.lastBlock;
                if (t5)
                  if (t5.tool.isDefault && t5.isEmpty)
                    this.setToBlock(t5);
                  else {
                    var e4 = this.Editor.BlockManager.insertAtEnd();
                    this.setToBlock(e4);
                  }
              } }, { key: "extractFragmentFromCaretPosition", value: function() {
                var t5 = l2.default.get();
                if (t5.rangeCount) {
                  var e4 = t5.getRangeAt(0), n4 = this.Editor.BlockManager.currentBlock.currentInput;
                  if (e4.deleteContents(), n4) {
                    if (f3.default.isNativeInput(n4)) {
                      var o5 = n4, r4 = document.createDocumentFragment(), i4 = o5.value.substring(0, o5.selectionStart), a3 = o5.value.substring(o5.selectionStart);
                      return r4.textContent = a3, o5.value = i4, r4;
                    }
                    var s3 = e4.cloneRange();
                    return s3.selectNodeContents(n4), s3.setStart(e4.endContainer, e4.endOffset), s3.extractContents();
                  }
                }
              } }, { key: "navigateNext", value: function() {
                var t5 = this.Editor, e4 = t5.BlockManager, n4 = (t5.Tools, e4.currentBlock), o5 = e4.nextContentfulBlock, r4 = n4.nextInput, i4 = this.isAtEnd, a3 = o5;
                if (!a3 && !r4) {
                  if (n4.tool.isDefault || !i4)
                    return false;
                  a3 = e4.insertAtEnd();
                }
                return !!i4 && (r4 ? this.setToInput(r4, this.positions.START) : this.setToBlock(a3, this.positions.START), true);
              } }, { key: "navigatePrevious", value: function() {
                var t5 = this.Editor.BlockManager, e4 = t5.currentBlock, n4 = t5.previousContentfulBlock;
                if (!e4)
                  return false;
                var o5 = e4.previousInput;
                return !(!n4 && !o5 || !this.isAtStart || (o5 ? this.setToInput(o5, this.positions.END) : this.setToBlock(n4, this.positions.END), 0));
              } }, { key: "createShadow", value: function(t5) {
                var e4 = document.createElement("span");
                e4.classList.add(o4.CSS.shadowCaret), t5.insertAdjacentElement("beforeend", e4);
              } }, { key: "restoreCaret", value: function(t5) {
                var e4 = t5.querySelector(".".concat(o4.CSS.shadowCaret));
                e4 && (new l2.default().expandToTag(e4), setTimeout(function() {
                  var t6 = document.createRange();
                  t6.selectNode(e4), t6.extractContents();
                }, 50));
              } }, { key: "insertContentAtCaretPosition", value: function(t5) {
                var e4 = document.createDocumentFragment(), n4 = document.createElement("div"), o5 = l2.default.get(), r4 = l2.default.range;
                n4.innerHTML = t5, Array.from(n4.childNodes).forEach(function(t6) {
                  return e4.appendChild(t6);
                }), e4.childNodes.length === 0 && e4.appendChild(new Text(""));
                var i4 = e4.lastChild;
                r4.deleteContents(), r4.insertNode(e4);
                var a3 = document.createRange();
                a3.setStart(i4, i4.textContent.length), o5.removeAllRanges(), o5.addRange(a3);
              } }, { key: "getHigherLevelSiblings", value: function(t5, e4) {
                for (var n4 = t5, o5 = []; n4.parentNode && n4.parentNode.contentEditable !== "true"; )
                  n4 = n4.parentNode;
                for (var r4 = e4 === "left" ? "previousSibling" : "nextSibling"; n4[r4]; )
                  n4 = n4[r4], o5.push(n4);
                return o5;
              } }, { key: "positions", get: function() {
                return { START: "start", END: "end", DEFAULT: "default" };
              } }, { key: "isAtStart", get: function() {
                var t5 = l2.default.get(), e4 = f3.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput), n4 = t5.focusNode;
                if (f3.default.isNativeInput(e4))
                  return e4.selectionEnd === 0;
                if (!t5.anchorNode)
                  return false;
                var o5 = n4.textContent.search(/\S/);
                o5 === -1 && (o5 = 0);
                var r4 = t5.focusOffset;
                return n4.nodeType !== Node.TEXT_NODE && n4.childNodes.length && (n4.childNodes[r4] ? (n4 = n4.childNodes[r4], r4 = 0) : r4 = (n4 = n4.childNodes[r4 - 1]).textContent.length), !(!f3.default.isLineBreakTag(e4) && !f3.default.isEmpty(e4) || !this.getHigherLevelSiblings(n4, "left").every(function(t6) {
                  var e5 = f3.default.isLineBreakTag(t6), n5 = t6.children.length === 1 && f3.default.isLineBreakTag(t6.children[0]), o6 = e5 || n5;
                  return f3.default.isEmpty(t6) && !o6;
                }) || r4 !== o5) || (e4 === null || n4 === e4 && r4 <= o5);
              } }, { key: "isAtEnd", get: function() {
                var t5 = l2.default.get(), e4 = t5.focusNode, n4 = f3.default.getDeepestNode(this.Editor.BlockManager.currentBlock.currentInput, true);
                if (f3.default.isNativeInput(n4))
                  return n4.selectionEnd === n4.value.length;
                if (!t5.focusNode)
                  return false;
                var o5 = t5.focusOffset;
                if (e4.nodeType !== Node.TEXT_NODE && e4.childNodes.length && (e4.childNodes[o5 - 1] ? o5 = (e4 = e4.childNodes[o5 - 1]).textContent.length : (e4 = e4.childNodes[0], o5 = 0)), f3.default.isLineBreakTag(n4) || f3.default.isEmpty(n4)) {
                  var r4 = this.getHigherLevelSiblings(e4, "right");
                  if (r4.every(function(t6, e5) {
                    return e5 === r4.length - 1 && f3.default.isLineBreakTag(t6) || f3.default.isEmpty(t6) && !f3.default.isLineBreakTag(t6);
                  }) && o5 === e4.textContent.length)
                    return true;
                }
                var i4 = n4.textContent.replace(/\s+$/, "");
                return e4 === n4 && o5 >= i4.length;
              } }], [{ key: "CSS", get: function() {
                return { shadowCaret: "cdx-shadow-caret" };
              } }]), o4;
            }(u2.default);
            o3.default = y2, y2.displayName = "Caret", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(25), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2) {
            "use strict";
            var h2 = n2(9), v2 = n2(1);
            function y2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = v2(r3), i3 = v2(i3), a2 = v2(a2), s2 = v2(s2), c2 = v2(c2), l2 = v2(l2), u2 = v2(u2), f3 = v2(f3), d2 = v2(d2), p2 = h2(p2);
            var g2 = function(t4) {
              (0, c2.default)(f4, t4);
              var e3, n3, o4 = (e3 = f4, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (y2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function f4() {
                var t5;
                return (0, a2.default)(this, f4), (t5 = o4.apply(this, arguments)).onMouseUp = function() {
                  t5.listeners.off(document, "mouseover", t5.onMouseOver), t5.listeners.off(document, "mouseup", t5.onMouseUp);
                }, t5.onMouseOver = function(e4) {
                  var n4 = t5.Editor, o5 = n4.BlockManager, r4 = n4.BlockSelection, i4 = o5.getBlockByChildNode(e4.relatedTarget) || t5.lastSelectedBlock, a3 = o5.getBlockByChildNode(e4.target);
                  if (i4 && a3 && a3 !== i4) {
                    if (i4 === t5.firstSelectedBlock)
                      return d2.default.get().removeAllRanges(), i4.selected = true, a3.selected = true, void r4.clearCache();
                    if (a3 === t5.firstSelectedBlock)
                      return i4.selected = false, a3.selected = false, void r4.clearCache();
                    t5.Editor.InlineToolbar.close(), t5.toggleBlocksSelectedState(i4, a3), t5.lastSelectedBlock = a3;
                  }
                }, t5;
              }
              return (0, s2.default)(f4, [{ key: "prepare", value: (n3 = (0, i3.default)(r3.default.mark(function t5() {
                var e4 = this;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        this.listeners.on(document, "mousedown", function(t7) {
                          e4.enableCrossBlockSelection(t7);
                        });
                      case 1:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function() {
                return n3.apply(this, arguments);
              }) }, { key: "watchSelection", value: function(t5) {
                if (t5.button === p2.mouseButtons.LEFT) {
                  var e4 = this.Editor.BlockManager;
                  this.firstSelectedBlock = e4.getBlock(t5.target), this.lastSelectedBlock = this.firstSelectedBlock, this.listeners.on(document, "mouseover", this.onMouseOver), this.listeners.on(document, "mouseup", this.onMouseUp);
                }
              } }, { key: "toggleBlockSelectedState", value: function() {
                var t5 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0], e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.BlockSelection;
                this.lastSelectedBlock || (this.lastSelectedBlock = this.firstSelectedBlock = n4.currentBlock), this.firstSelectedBlock === this.lastSelectedBlock && (this.firstSelectedBlock.selected = true, o5.clearCache(), d2.default.get().removeAllRanges());
                var r4 = n4.blocks.indexOf(this.lastSelectedBlock) + (t5 ? 1 : -1), i4 = n4.blocks[r4];
                i4 && (this.lastSelectedBlock.selected !== i4.selected ? (i4.selected = true, o5.clearCache()) : (this.lastSelectedBlock.selected = false, o5.clearCache()), this.lastSelectedBlock = i4, this.Editor.InlineToolbar.close(), i4.holder.scrollIntoView({ block: "nearest" }));
              } }, { key: "clear", value: function(t5) {
                var e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.BlockSelection, r4 = e4.Caret, i4 = n4.blocks.indexOf(this.firstSelectedBlock), a3 = n4.blocks.indexOf(this.lastSelectedBlock);
                if (o5.anyBlockSelected && i4 > -1 && a3 > -1)
                  if (t5 && t5 instanceof KeyboardEvent)
                    switch (t5.keyCode) {
                      case p2.keyCodes.DOWN:
                      case p2.keyCodes.RIGHT:
                        r4.setToBlock(n4.blocks[Math.max(i4, a3)], r4.positions.END);
                        break;
                      case p2.keyCodes.UP:
                      case p2.keyCodes.LEFT:
                        r4.setToBlock(n4.blocks[Math.min(i4, a3)], r4.positions.START);
                        break;
                      default:
                        r4.setToBlock(n4.blocks[Math.max(i4, a3)], r4.positions.END);
                    }
                  else
                    r4.setToBlock(n4.blocks[Math.max(i4, a3)], r4.positions.END);
                this.firstSelectedBlock = this.lastSelectedBlock = null;
              } }, { key: "enableCrossBlockSelection", value: function(t5) {
                var e4 = this.Editor.UI;
                d2.default.isCollapsed || this.Editor.BlockSelection.clearSelection(t5), e4.nodes.redactor.contains(t5.target) ? this.watchSelection(t5) : this.Editor.BlockSelection.clearSelection(t5);
              } }, { key: "toggleBlocksSelectedState", value: function(t5, e4) {
                for (var n4 = this.Editor, o5 = n4.BlockManager, r4 = n4.BlockSelection, i4 = o5.blocks.indexOf(t5), a3 = o5.blocks.indexOf(e4), s3 = t5.selected !== e4.selected, c3 = Math.min(i4, a3); c3 <= Math.max(i4, a3); c3++) {
                  var l3 = o5.blocks[c3];
                  l3 !== this.firstSelectedBlock && l3 !== (s3 ? t5 : e4) && (o5.blocks[c3].selected = !o5.blocks[c3].selected, r4.clearCache());
                }
              } }, { key: "isCrossBlockSelectionStarted", get: function() {
                return !!this.firstSelectedBlock && !!this.lastSelectedBlock;
              } }]), f4;
            }(f3.default);
            o3.default = g2, g2.displayName = "CrossBlockSelection", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(25), n2(7)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2) {
            "use strict";
            var p2 = n2(1);
            function h2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = p2(r3), i3 = p2(i3), a2 = p2(a2), s2 = p2(s2), c2 = p2(c2), l2 = p2(l2), u2 = p2(u2), f3 = p2(f3);
            var v2 = function(t4) {
              (0, c2.default)(d3, t4);
              var e3, n3, o4 = (e3 = d3, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (h2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function d3() {
                var t5;
                return (0, a2.default)(this, d3), (t5 = o4.apply(this, arguments)).isStartedAtEditor = false, t5;
              }
              return (0, s2.default)(d3, [{ key: "toggleReadOnly", value: function(t5) {
                t5 ? this.disableModuleBindings() : this.enableModuleBindings();
              } }, { key: "enableModuleBindings", value: function() {
                var t5 = this, e4 = this.Editor.UI;
                this.readOnlyMutableListeners.on(e4.nodes.holder, "drop", function() {
                  var e5 = (0, i3.default)(r3.default.mark(function e6(n4) {
                    return r3.default.wrap(function(e7) {
                      for (; ; )
                        switch (e7.prev = e7.next) {
                          case 0:
                            return e7.next = 2, t5.processDrop(n4);
                          case 2:
                          case "end":
                            return e7.stop();
                        }
                    }, e6);
                  }));
                  return function(t6) {
                    return e5.apply(this, arguments);
                  };
                }(), true), this.readOnlyMutableListeners.on(e4.nodes.holder, "dragstart", function() {
                  t5.processDragStart();
                }), this.readOnlyMutableListeners.on(e4.nodes.holder, "dragover", function(e5) {
                  t5.processDragOver(e5);
                }, true);
              } }, { key: "disableModuleBindings", value: function() {
                this.readOnlyMutableListeners.clearAll();
              } }, { key: "processDrop", value: (n3 = (0, i3.default)(r3.default.mark(function t5(e4) {
                var n4, o5, i4, a3, s3, c3;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return n4 = this.Editor, o5 = n4.BlockManager, i4 = n4.Caret, a3 = n4.Paste, e4.preventDefault(), o5.blocks.forEach(function(t7) {
                          t7.dropTarget = false;
                        }), f3.default.isAtEditor && !f3.default.isCollapsed && this.isStartedAtEditor && document.execCommand("delete"), this.isStartedAtEditor = false, (s3 = o5.setCurrentBlockByChildNode(e4.target)) ? this.Editor.Caret.setToBlock(s3, i4.positions.END) : (c3 = o5.setCurrentBlockByChildNode(o5.lastBlock.holder), this.Editor.Caret.setToBlock(c3, i4.positions.END)), t6.next = 9, a3.processDataTransfer(e4.dataTransfer, true);
                      case 9:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return n3.apply(this, arguments);
              }) }, { key: "processDragStart", value: function() {
                f3.default.isAtEditor && !f3.default.isCollapsed && (this.isStartedAtEditor = true), this.Editor.InlineToolbar.close();
              } }, { key: "processDragOver", value: function(t5) {
                t5.preventDefault();
              } }]), d3;
            }((d2 = p2(d2)).default);
            o3.default = v2, v2.displayName = "DragNDrop", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(8), n2(61)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3) {
            "use strict";
            var d2 = n2(9), p2 = n2(1);
            function h2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = p2(r3), i3 = p2(i3), a2 = p2(a2), s2 = p2(s2), c2 = p2(c2), l2 = p2(l2), u2 = d2(u2), f3 = p2(f3);
            var v2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (h2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).disabled = false, t5.mutationDebouncer = u2.debounce(function() {
                  t5.updateNativeInputs(), u2.isFunction(t5.config.onChange) && t5.config.onChange(t5.Editor.API.methods);
                }, o4.DebounceTimer), t5.nativeInputs = [], t5;
              }
              return (0, i3.default)(o4, [{ key: "destroy", value: function() {
                var t5 = this;
                this.mutationDebouncer = null, this.observer && this.observer.disconnect(), this.observer = null, this.nativeInputs.forEach(function(e4) {
                  return t5.listeners.off(e4, "input", t5.mutationDebouncer);
                }), this.mutationDebouncer = null;
              } }, { key: "toggleReadOnly", value: function(t5) {
                t5 ? this.disableModule() : this.enableModule();
              } }, { key: "disable", value: function() {
                this.disabled = true;
              } }, { key: "enable", value: function() {
                this.disabled = false;
              } }, { key: "setObserver", value: function() {
                var t5 = this, e4 = this.Editor.UI;
                this.observer = new MutationObserver(function(e5, n4) {
                  t5.mutationHandler(e5, n4);
                }), this.observer.observe(e4.nodes.redactor, { childList: true, attributes: true, subtree: true, characterData: true, characterDataOldValue: true });
              } }, { key: "mutationHandler", value: function(t5, e4) {
                if (!this.disabled) {
                  var n4 = false;
                  t5.forEach(function(t6) {
                    switch (t6.type) {
                      case "childList":
                      case "characterData":
                        n4 = true;
                        break;
                      case "attributes":
                        t6.target.classList.contains(f3.default.CSS.wrapper) || (n4 = true);
                    }
                  }), n4 && this.mutationDebouncer();
                }
              } }, { key: "updateNativeInputs", value: function() {
                var t5 = this;
                this.nativeInputs && this.nativeInputs.forEach(function(e4) {
                  t5.listeners.off(e4, "input");
                }), this.nativeInputs = Array.from(this.Editor.UI.nodes.redactor.querySelectorAll("textarea, input, select")), this.nativeInputs.forEach(function(e4) {
                  return t5.listeners.on(e4, "input", t5.mutationDebouncer);
                });
              } }, { key: "enableModule", value: function() {
                var t5 = this;
                window.setTimeout(function() {
                  t5.setObserver(), t5.updateNativeInputs(), t5.enable();
                }, 1e3);
              } }, { key: "disableModule", value: function() {
                this.disable();
              } }]), o4;
            }(l2.default);
            o3.default = v2, v2.displayName = "ModificationsObserver", v2.DebounceTimer = 450, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(378)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(1);
            function d2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = f3(r3), i3 = f3(i3), a2 = f3(a2), s2 = f3(s2), c2 = f3(c2), l2 = f3(l2), u2 = f3(u2);
            var p2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (d2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                return (0, r3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, i3.default)(o4, [{ key: "show", value: function(t5) {
                u2.default.show(t5);
              } }]), o4;
            }(l2.default);
            o3.default = p2, p2.displayName = "Notifier", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(42), n2(29), n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(15), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2) {
            "use strict";
            var y2 = n2(9), g2 = n2(1);
            function b2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = g2(r3), i3 = g2(i3), a2 = g2(a2), s2 = g2(s2), c2 = g2(c2), l2 = g2(l2), u2 = g2(u2), f3 = g2(f3), d2 = g2(d2), p2 = g2(p2), h2 = g2(h2), v2 = y2(v2);
            var m2 = function(t4) {
              (0, u2.default)(S2, t4);
              var e3, n3, o4, p3, y3, g3, m3, k2, x2, w2 = (e3 = S2, function() {
                var t5, n4 = (0, d2.default)(e3);
                if (b2()) {
                  var o5 = (0, d2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, f3.default)(this, t5);
              });
              function S2() {
                var t5;
                return (0, c2.default)(this, S2), (t5 = w2.apply(this, arguments)).MIME_TYPE = "application/x-editor-js", t5.toolsTags = {}, t5.tagsByTool = {}, t5.toolsPatterns = [], t5.toolsFiles = {}, t5.exceptionList = [], t5.processTool = function(e4) {
                  try {
                    var n4 = e4.create({}, {}, false);
                    if (e4.pasteConfig === false)
                      return void t5.exceptionList.push(e4.name);
                    if (!v2.isFunction(n4.onPaste))
                      return;
                    t5.getTagsConfig(e4), t5.getFilesConfig(e4), t5.getPatternsConfig(e4);
                  } catch (t6) {
                    v2.log("Paste handling for \xAB".concat(e4.name, "\xBB Tool hasn't been set up because of the error"), "warn", t6);
                  }
                }, t5.handlePasteEvent = function() {
                  var e4 = (0, s2.default)(a2.default.mark(function e5(n4) {
                    var o5, r4, i4;
                    return a2.default.wrap(function(e6) {
                      for (; ; )
                        switch (e6.prev = e6.next) {
                          case 0:
                            if (o5 = t5.Editor, r4 = o5.BlockManager, i4 = o5.Toolbar, r4.currentBlock && (!t5.isNativeBehaviour(n4.target) || n4.clipboardData.types.includes("Files"))) {
                              e6.next = 3;
                              break;
                            }
                            return e6.abrupt("return");
                          case 3:
                            if (!r4.currentBlock || !t5.exceptionList.includes(r4.currentBlock.name)) {
                              e6.next = 5;
                              break;
                            }
                            return e6.abrupt("return");
                          case 5:
                            n4.preventDefault(), t5.processDataTransfer(n4.clipboardData), r4.clearFocused(), i4.close();
                          case 9:
                          case "end":
                            return e6.stop();
                        }
                    }, e5);
                  }));
                  return function(t6) {
                    return e4.apply(this, arguments);
                  };
                }(), t5;
              }
              return (0, l2.default)(S2, [{ key: "prepare", value: (x2 = (0, s2.default)(a2.default.mark(function t5() {
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        this.processTools();
                      case 1:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function() {
                return x2.apply(this, arguments);
              }) }, { key: "toggleReadOnly", value: function(t5) {
                t5 ? this.unsetCallback() : this.setCallback();
              } }, { key: "processDataTransfer", value: (k2 = (0, s2.default)(a2.default.mark(function t5(e4) {
                var n4, o5, r4, i4, s3, c3, l3, u3, f4, d3 = arguments;
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = d3.length > 1 && d3[1] !== void 0 && d3[1], o5 = this.Editor.Sanitizer, !((r4 = e4.types).includes ? r4.includes("Files") : r4.contains("Files"))) {
                          t6.next = 8;
                          break;
                        }
                        return t6.next = 7, this.processFiles(e4.files);
                      case 7:
                        return t6.abrupt("return");
                      case 8:
                        if (i4 = e4.getData(this.MIME_TYPE), s3 = e4.getData("text/plain"), c3 = e4.getData("text/html"), !i4) {
                          t6.next = 19;
                          break;
                        }
                        return t6.prev = 12, this.insertEditorJSData(JSON.parse(i4)), t6.abrupt("return");
                      case 17:
                        t6.prev = 17, t6.t0 = t6.catch(12);
                      case 19:
                        if (n4 && s3.trim() && c3.trim() && (c3 = "<p>" + (c3.trim() ? c3 : s3) + "</p>"), l3 = Object.keys(this.toolsTags).reduce(function(t7, e5) {
                          return t7[e5.toLowerCase()] = true, t7;
                        }, {}), u3 = Object.assign({}, l3, o5.getAllInlineToolsConfig(), { br: {} }), (f4 = o5.clean(c3, u3)).trim() && f4.trim() !== s3 && h2.default.isHTMLString(f4)) {
                          t6.next = 28;
                          break;
                        }
                        return t6.next = 26, this.processText(s3);
                      case 26:
                        t6.next = 30;
                        break;
                      case 28:
                        return t6.next = 30, this.processText(f4, true);
                      case 30:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this, [[12, 17]]);
              })), function(t5) {
                return k2.apply(this, arguments);
              }) }, { key: "processText", value: (m3 = (0, s2.default)(a2.default.mark(function t5(e4) {
                var n4, o5, r4, i4, c3, l3, u3, f4 = this, d3 = arguments;
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = d3.length > 1 && d3[1] !== void 0 && d3[1], o5 = this.Editor, r4 = o5.Caret, i4 = o5.BlockManager, (c3 = n4 ? this.processHTML(e4) : this.processPlain(e4)).length) {
                          t6.next = 5;
                          break;
                        }
                        return t6.abrupt("return");
                      case 5:
                        if (c3.length !== 1) {
                          t6.next = 8;
                          break;
                        }
                        return c3[0].isBlock ? this.processSingleBlock(c3.pop()) : this.processInlinePaste(c3.pop()), t6.abrupt("return");
                      case 8:
                        l3 = i4.currentBlock && i4.currentBlock.tool.isDefault, u3 = l3 && i4.currentBlock.isEmpty, c3.map(function() {
                          var t7 = (0, s2.default)(a2.default.mark(function t8(e5, n5) {
                            return a2.default.wrap(function(t9) {
                              for (; ; )
                                switch (t9.prev = t9.next) {
                                  case 0:
                                    return t9.abrupt("return", f4.insertBlock(e5, n5 === 0 && u3));
                                  case 1:
                                  case "end":
                                    return t9.stop();
                                }
                            }, t8);
                          }));
                          return function(e5, n5) {
                            return t7.apply(this, arguments);
                          };
                        }()), i4.currentBlock && r4.setToBlock(i4.currentBlock, r4.positions.END);
                      case 12:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return m3.apply(this, arguments);
              }) }, { key: "setCallback", value: function() {
                this.listeners.on(this.Editor.UI.nodes.holder, "paste", this.handlePasteEvent);
              } }, { key: "unsetCallback", value: function() {
                this.listeners.off(this.Editor.UI.nodes.holder, "paste", this.handlePasteEvent);
              } }, { key: "processTools", value: function() {
                var t5 = this.Editor.Tools.blockTools;
                Array.from(t5.values()).forEach(this.processTool);
              } }, { key: "getTagsConfig", value: function(t5) {
                var e4 = this, n4 = t5.pasteConfig.tags || [];
                n4.forEach(function(n5) {
                  Object.prototype.hasOwnProperty.call(e4.toolsTags, n5) ? v2.log("Paste handler for \xAB".concat(t5.name, "\xBB Tool on \xAB").concat(n5, "\xBB tag is skipped ") + "because it is already used by \xAB".concat(e4.toolsTags[n5].tool.name, "\xBB Tool."), "warn") : e4.toolsTags[n5.toUpperCase()] = { tool: t5 };
                }), this.tagsByTool[t5.name] = n4.map(function(t6) {
                  return t6.toUpperCase();
                });
              } }, { key: "getFilesConfig", value: function(t5) {
                var e4 = t5.pasteConfig.files, n4 = e4 === void 0 ? {} : e4, o5 = n4.extensions, r4 = n4.mimeTypes;
                (o5 || r4) && (o5 && !Array.isArray(o5) && (v2.log("\xABextensions\xBB property of the onDrop config for \xAB".concat(t5.name, "\xBB Tool should be an array")), o5 = []), r4 && !Array.isArray(r4) && (v2.log("\xABmimeTypes\xBB property of the onDrop config for \xAB".concat(t5.name, "\xBB Tool should be an array")), r4 = []), r4 && (r4 = r4.filter(function(e5) {
                  return !!v2.isValidMimeType(e5) || (v2.log("MIME type value \xAB".concat(e5, "\xBB for the \xAB").concat(t5.name, "\xBB Tool is not a valid MIME type"), "warn"), false);
                })), this.toolsFiles[t5.name] = { extensions: o5 || [], mimeTypes: r4 || [] });
              } }, { key: "getPatternsConfig", value: function(t5) {
                var e4 = this;
                t5.pasteConfig.patterns && !v2.isEmpty(t5.pasteConfig.patterns) && Object.entries(t5.pasteConfig.patterns).forEach(function(n4) {
                  var o5 = (0, i3.default)(n4, 2), r4 = o5[0], a3 = o5[1];
                  a3 instanceof RegExp || v2.log("Pattern ".concat(a3, " for \xAB").concat(t5.name, "\xBB Tool is skipped because it should be a Regexp instance."), "warn"), e4.toolsPatterns.push({ key: r4, pattern: a3, tool: t5 });
                });
              } }, { key: "isNativeBehaviour", value: function(t5) {
                return h2.default.isNativeInput(t5);
              } }, { key: "processFiles", value: (g3 = (0, s2.default)(a2.default.mark(function t5(e4) {
                var n4, o5, r4, i4, s3 = this;
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return n4 = this.Editor.BlockManager, t6.next = 3, Promise.all(Array.from(e4).map(function(t7) {
                          return s3.processFile(t7);
                        }));
                      case 3:
                        o5 = (o5 = t6.sent).filter(function(t7) {
                          return !!t7;
                        }), r4 = n4.currentBlock.tool.isDefault, i4 = r4 && n4.currentBlock.isEmpty, o5.forEach(function(t7, e5) {
                          n4.paste(t7.type, t7.event, e5 === 0 && i4);
                        });
                      case 8:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return g3.apply(this, arguments);
              }) }, { key: "processFile", value: (y3 = (0, s2.default)(a2.default.mark(function t5(e4) {
                var n4, o5, r4, s3, c3;
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = v2.getFileExtension(e4), o5 = Object.entries(this.toolsFiles).find(function(t7) {
                          var o6 = (0, i3.default)(t7, 2), r5 = (o6[0], o6[1]), a3 = r5.mimeTypes, s4 = r5.extensions, c4 = e4.type.split("/"), l3 = (0, i3.default)(c4, 2), u3 = l3[0], f4 = l3[1], d3 = s4.find(function(t8) {
                            return t8.toLowerCase() === n4.toLowerCase();
                          }), p4 = a3.find(function(t8) {
                            var e5 = t8.split("/"), n5 = (0, i3.default)(e5, 2), o7 = n5[0], r6 = n5[1];
                            return o7 === u3 && (r6 === f4 || r6 === "*");
                          });
                          return !!d3 || !!p4;
                        })) {
                          t6.next = 4;
                          break;
                        }
                        return t6.abrupt("return");
                      case 4:
                        return r4 = (0, i3.default)(o5, 1), s3 = r4[0], c3 = this.composePasteEvent("file", { file: e4 }), t6.abrupt("return", { event: c3, type: s3 });
                      case 7:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return y3.apply(this, arguments);
              }) }, { key: "processHTML", value: function(t5) {
                var e4 = this, n4 = this.Editor, o5 = n4.Tools, r4 = n4.Sanitizer, i4 = h2.default.make("DIV");
                return i4.innerHTML = t5, this.getNodes(i4).map(function(t6) {
                  var n5, i5 = o5.defaultTool, a3 = false;
                  switch (t6.nodeType) {
                    case Node.DOCUMENT_FRAGMENT_NODE:
                      (n5 = h2.default.make("div")).appendChild(t6);
                      break;
                    case Node.ELEMENT_NODE:
                      n5 = t6, a3 = true, e4.toolsTags[n5.tagName] && (i5 = e4.toolsTags[n5.tagName].tool);
                  }
                  var s3 = i5.pasteConfig.tags.reduce(function(t7, e5) {
                    return t7[e5.toLowerCase()] = {}, t7;
                  }, {}), c3 = Object.assign({}, s3, r4.getInlineToolsConfig(i5));
                  n5.innerHTML = r4.clean(n5.innerHTML, c3);
                  var l3 = e4.composePasteEvent("tag", { data: n5 });
                  return { content: n5, isBlock: a3, tool: i5.name, event: l3 };
                }).filter(function(t6) {
                  return !h2.default.isNodeEmpty(t6.content) || h2.default.isSingleTag(t6.content);
                });
              } }, { key: "processPlain", value: function(t5) {
                var e4 = this, n4 = this.config.defaultBlock;
                if (!t5)
                  return [];
                var o5 = n4;
                return t5.split(/\r?\n/).filter(function(t6) {
                  return t6.trim();
                }).map(function(t6) {
                  var n5 = h2.default.make("div");
                  n5.textContent = t6;
                  var r4 = e4.composePasteEvent("tag", { data: n5 });
                  return { content: n5, tool: o5, isBlock: false, event: r4 };
                });
              } }, { key: "processSingleBlock", value: (p3 = (0, s2.default)(a2.default.mark(function t5(e4) {
                var n4, o5, r4, i4;
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = this.Editor, o5 = n4.Caret, r4 = n4.BlockManager, (i4 = r4.currentBlock) && e4.tool === i4.name && h2.default.containsOnlyInlineElements(e4.content.innerHTML)) {
                          t6.next = 5;
                          break;
                        }
                        return this.insertBlock(e4, (i4 == null ? void 0 : i4.tool.isDefault) && i4.isEmpty), t6.abrupt("return");
                      case 5:
                        o5.insertContentAtCaretPosition(e4.content.innerHTML);
                      case 6:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return p3.apply(this, arguments);
              }) }, { key: "processInlinePaste", value: (o4 = (0, s2.default)(a2.default.mark(function t5(e4) {
                var n4, o5, r4, i4, s3, c3, l3, u3, f4;
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = this.Editor, o5 = n4.BlockManager, r4 = n4.Caret, i4 = n4.Sanitizer, s3 = e4.content, !(o5.currentBlock && o5.currentBlock.tool.isDefault && s3.textContent.length < S2.PATTERN_PROCESSING_MAX_LENGTH)) {
                          t6.next = 12;
                          break;
                        }
                        return t6.next = 6, this.processPattern(s3.textContent);
                      case 6:
                        if (!(c3 = t6.sent)) {
                          t6.next = 12;
                          break;
                        }
                        return l3 = o5.currentBlock && o5.currentBlock.tool.isDefault && o5.currentBlock.isEmpty, u3 = o5.paste(c3.tool, c3.event, l3), r4.setToBlock(u3, r4.positions.END), t6.abrupt("return");
                      case 12:
                        o5.currentBlock && o5.currentBlock.currentInput ? (f4 = i4.getInlineToolsConfig(o5.currentBlock.tool), document.execCommand("insertHTML", false, i4.clean(s3.innerHTML, f4))) : this.insertBlock(e4);
                      case 13:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return o4.apply(this, arguments);
              }) }, { key: "processPattern", value: (n3 = (0, s2.default)(a2.default.mark(function t5(e4) {
                var n4, o5;
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = this.toolsPatterns.find(function(t7) {
                          var n5 = t7.pattern.exec(e4);
                          return !!n5 && e4 === n5.shift();
                        })) {
                          t6.next = 3;
                          break;
                        }
                        return t6.abrupt("return");
                      case 3:
                        return o5 = this.composePasteEvent("pattern", { key: n4.key, data: e4 }), t6.abrupt("return", { event: o5, tool: n4.tool.name });
                      case 5:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return n3.apply(this, arguments);
              }) }, { key: "insertBlock", value: function(t5) {
                var e4, n4 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], o5 = this.Editor, r4 = o5.BlockManager, i4 = o5.Caret, a3 = r4.currentBlock;
                if (n4 && a3 && a3.isEmpty)
                  return e4 = r4.paste(t5.tool, t5.event, true), void i4.setToBlock(e4, i4.positions.END);
                e4 = r4.paste(t5.tool, t5.event), i4.setToBlock(e4, i4.positions.END);
              } }, { key: "insertEditorJSData", value: function(t5) {
                var e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.Caret;
                e4.Sanitizer.sanitizeBlocks(t5).forEach(function(t6, e5) {
                  var r4 = t6.tool, i4 = t6.data, a3 = false;
                  e5 === 0 && (a3 = n4.currentBlock && n4.currentBlock.tool.isDefault && n4.currentBlock.isEmpty);
                  var s3 = n4.insert({ tool: r4, data: i4, replace: a3 });
                  o5.setToBlock(s3, o5.positions.END);
                });
              } }, { key: "processElementNode", value: function(t5, e4, n4) {
                var o5 = Object.keys(this.toolsTags), i4 = t5, a3 = (this.toolsTags[i4.tagName] || {}).tool, s3 = this.tagsByTool[a3 == null ? void 0 : a3.name] || [], c3 = o5.includes(i4.tagName), l3 = h2.default.blockElements.includes(i4.tagName.toLowerCase()), u3 = Array.from(i4.children).some(function(t6) {
                  var e5 = t6.tagName;
                  return o5.includes(e5) && !s3.includes(e5);
                }), f4 = Array.from(i4.children).some(function(t6) {
                  var e5 = t6.tagName;
                  return h2.default.blockElements.includes(e5.toLowerCase());
                });
                return l3 || c3 || u3 ? c3 && !u3 || l3 && !f4 && !u3 ? [].concat((0, r3.default)(e4), [n4, i4]) : void 0 : (n4.appendChild(i4), [].concat((0, r3.default)(e4), [n4]));
              } }, { key: "getNodes", value: function(t5) {
                var e4, n4 = this;
                return Array.from(t5.childNodes).reduce(function t6(o5, i4) {
                  if (h2.default.isEmpty(i4) && !h2.default.isSingleTag(i4))
                    return o5;
                  var a3 = o5[o5.length - 1], s3 = new DocumentFragment();
                  switch (a3 && h2.default.isFragment(a3) && (s3 = o5.pop()), i4.nodeType) {
                    case Node.ELEMENT_NODE:
                      if (e4 = n4.processElementNode(i4, o5, s3))
                        return e4;
                      break;
                    case Node.TEXT_NODE:
                      return s3.appendChild(i4), [].concat((0, r3.default)(o5), [s3]);
                    default:
                      return [].concat((0, r3.default)(o5), [s3]);
                  }
                  return [].concat((0, r3.default)(o5), (0, r3.default)(Array.from(i4.childNodes).reduce(t6, [])));
                }, []);
              } }, { key: "composePasteEvent", value: function(t5, e4) {
                return new CustomEvent(t5, { detail: e4 });
              } }]), S2;
            }(p2.default);
            o3.default = m2, m2.displayName = "Paste", m2.PATTERN_PROCESSING_MAX_LENGTH = 450, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(29), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(145)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2) {
            "use strict";
            var h2 = n2(1);
            function v2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = h2(r3), i3 = h2(i3), a2 = h2(a2), s2 = h2(s2), c2 = h2(c2), l2 = h2(l2), u2 = h2(u2), f3 = h2(f3);
            var y2 = function(t4) {
              (0, l2.default)(h3, t4);
              var e3, n3, o4, d3 = (e3 = h3, function() {
                var t5, n4 = (0, f3.default)(e3);
                if (v2()) {
                  var o5 = (0, f3.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, u2.default)(this, t5);
              });
              function h3() {
                var t5;
                return (0, s2.default)(this, h3), (t5 = d3.apply(this, arguments)).toolsDontSupportReadOnly = [], t5.readOnlyEnabled = false, t5;
              }
              return (0, c2.default)(h3, [{ key: "prepare", value: (o4 = (0, a2.default)(r3.default.mark(function t5() {
                var e4, n4, o5;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        e4 = this.Editor.Tools, n4 = e4.blockTools, o5 = [], Array.from(n4.entries()).forEach(function(t7) {
                          var e5 = (0, i3.default)(t7, 2), n5 = e5[0];
                          e5[1].isReadOnlySupported || o5.push(n5);
                        }), this.toolsDontSupportReadOnly = o5, this.config.readOnly && o5.length > 0 && this.throwCriticalError(), this.toggle(this.config.readOnly);
                      case 7:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function() {
                return o4.apply(this, arguments);
              }) }, { key: "toggle", value: (n3 = (0, a2.default)(r3.default.mark(function t5() {
                var e4, n4, o5, i4, a3 = arguments;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        (e4 = a3.length > 0 && a3[0] !== void 0 ? a3[0] : !this.readOnlyEnabled) && this.toolsDontSupportReadOnly.length > 0 && this.throwCriticalError(), n4 = this.readOnlyEnabled, this.readOnlyEnabled = e4, t6.t0 = r3.default.keys(this.Editor);
                      case 5:
                        if ((t6.t1 = t6.t0()).done) {
                          t6.next = 12;
                          break;
                        }
                        if (o5 = t6.t1.value, this.Editor[o5].toggleReadOnly) {
                          t6.next = 9;
                          break;
                        }
                        return t6.abrupt("continue", 5);
                      case 9:
                        this.Editor[o5].toggleReadOnly(e4), t6.next = 5;
                        break;
                      case 12:
                        if (n4 !== e4) {
                          t6.next = 14;
                          break;
                        }
                        return t6.abrupt("return", this.readOnlyEnabled);
                      case 14:
                        return t6.next = 16, this.Editor.Saver.save();
                      case 16:
                        return i4 = t6.sent, t6.next = 19, this.Editor.BlockManager.clear();
                      case 19:
                        return t6.next = 21, this.Editor.Renderer.render(i4.blocks);
                      case 21:
                        return t6.abrupt("return", this.readOnlyEnabled);
                      case 22:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function() {
                return n3.apply(this, arguments);
              }) }, { key: "throwCriticalError", value: function() {
                throw new p2.CriticalError("To enable read-only mode all connected tools should support it. Tools ".concat(this.toolsDontSupportReadOnly.join(", "), " don't support read-only mode."));
              } }, { key: "isEnabled", get: function() {
                return this.readOnlyEnabled;
              } }]), h3;
            }((d2 = h2(d2)).default);
            o3.default = y2, y2.displayName = "ReadOnly", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(15), n2(25), n2(61)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2) {
            "use strict";
            var p2 = n2(1);
            function h2(t4) {
              if (typeof Symbol == "undefined" || t4[Symbol.iterator] == null) {
                if (Array.isArray(t4) || (t4 = function(t5, e4) {
                  if (t5) {
                    if (typeof t5 == "string")
                      return v2(t5, e4);
                    var n4 = Object.prototype.toString.call(t5).slice(8, -1);
                    return n4 === "Object" && t5.constructor && (n4 = t5.constructor.name), n4 === "Map" || n4 === "Set" ? Array.from(n4) : n4 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n4) ? v2(t5, e4) : void 0;
                  }
                }(t4))) {
                  var e3 = 0, n3 = function() {
                  };
                  return { s: n3, n: function() {
                    return e3 >= t4.length ? { done: true } : { done: false, value: t4[e3++] };
                  }, e: function(t5) {
                    throw t5;
                  }, f: n3 };
                }
                throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
              }
              var o4, r4, i4 = true, a3 = false;
              return { s: function() {
                o4 = t4[Symbol.iterator]();
              }, n: function() {
                var t5 = o4.next();
                return i4 = t5.done, t5;
              }, e: function(t5) {
                a3 = true, r4 = t5;
              }, f: function() {
                try {
                  i4 || o4.return == null || o4.return();
                } finally {
                  if (a3)
                    throw r4;
                }
              } };
            }
            function v2(t4, e3) {
              (e3 == null || e3 > t4.length) && (e3 = t4.length);
              for (var n3 = 0, o4 = new Array(e3); n3 < e3; n3++)
                o4[n3] = t4[n3];
              return o4;
            }
            function y2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = p2(r3), i3 = p2(i3), a2 = p2(a2), s2 = p2(s2), c2 = p2(c2), l2 = p2(l2), u2 = p2(u2), f3 = p2(f3), d2 = p2(d2);
            var g2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (y2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).isRectSelectionActivated = false, t5.SCROLL_SPEED = 3, t5.HEIGHT_OF_SCROLL_ZONE = 40, t5.BOTTOM_SCROLL_ZONE = 1, t5.TOP_SCROLL_ZONE = 2, t5.MAIN_MOUSE_BUTTON = 0, t5.mousedown = false, t5.isScrolling = false, t5.inScrollZone = null, t5.startX = 0, t5.startY = 0, t5.mouseX = 0, t5.mouseY = 0, t5.stackOfSelected = [], t5.listenerIds = [], t5;
              }
              return (0, i3.default)(o4, [{ key: "prepare", value: function() {
                this.enableModuleBindings();
              } }, { key: "startSelection", value: function(t5, e4) {
                var n4 = document.elementFromPoint(t5 - window.pageXOffset, e4 - window.pageYOffset);
                n4.closest(".".concat(this.Editor.Toolbar.CSS.toolbar)) || (this.Editor.BlockSelection.allBlocksSelected = false, this.clearSelection(), this.stackOfSelected = []);
                var o5 = [".".concat(d2.default.CSS.content), ".".concat(this.Editor.Toolbar.CSS.toolbar), ".".concat(this.Editor.InlineToolbar.CSS.inlineToolbar)], r4 = n4.closest("." + this.Editor.UI.CSS.editorWrapper), i4 = o5.some(function(t6) {
                  return !!n4.closest(t6);
                });
                r4 && !i4 && (this.mousedown = true, this.startX = t5, this.startY = e4);
              } }, { key: "endSelection", value: function() {
                this.mousedown = false, this.startX = 0, this.startY = 0, this.overlayRectangle.style.display = "none";
              } }, { key: "isRectActivated", value: function() {
                return this.isRectSelectionActivated;
              } }, { key: "clearSelection", value: function() {
                this.isRectSelectionActivated = false;
              } }, { key: "enableModuleBindings", value: function() {
                var t5 = this, e4 = this.genHTML().container;
                this.listeners.on(e4, "mousedown", function(e5) {
                  t5.processMouseDown(e5);
                }, false), this.listeners.on(document.body, "mousemove", function(e5) {
                  t5.processMouseMove(e5);
                }, false), this.listeners.on(document.body, "mouseleave", function() {
                  t5.processMouseLeave();
                }), this.listeners.on(window, "scroll", function(e5) {
                  t5.processScroll(e5);
                }, false), this.listeners.on(document.body, "mouseup", function() {
                  t5.processMouseUp();
                }, false);
              } }, { key: "processMouseDown", value: function(t5) {
                t5.button === this.MAIN_MOUSE_BUTTON && this.startSelection(t5.pageX, t5.pageY);
              } }, { key: "processMouseMove", value: function(t5) {
                this.changingRectangle(t5), this.scrollByZones(t5.clientY);
              } }, { key: "processMouseLeave", value: function() {
                this.clearSelection(), this.endSelection();
              } }, { key: "processScroll", value: function(t5) {
                this.changingRectangle(t5);
              } }, { key: "processMouseUp", value: function() {
                this.endSelection();
              } }, { key: "scrollByZones", value: function(t5) {
                this.inScrollZone = null, t5 <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.TOP_SCROLL_ZONE), document.documentElement.clientHeight - t5 <= this.HEIGHT_OF_SCROLL_ZONE && (this.inScrollZone = this.BOTTOM_SCROLL_ZONE), this.inScrollZone ? this.isScrolling || (this.scrollVertical(this.inScrollZone === this.TOP_SCROLL_ZONE ? -this.SCROLL_SPEED : this.SCROLL_SPEED), this.isScrolling = true) : this.isScrolling = false;
              } }, { key: "genHTML", value: function() {
                var t5 = this.Editor.UI, e4 = t5.nodes.holder.querySelector("." + t5.CSS.editorWrapper), n4 = u2.default.make("div", o4.CSS.overlay, {}), r4 = u2.default.make("div", o4.CSS.overlayContainer, {}), i4 = u2.default.make("div", o4.CSS.rect, {});
                return r4.appendChild(i4), n4.appendChild(r4), e4.appendChild(n4), this.overlayRectangle = i4, { container: e4, overlay: n4 };
              } }, { key: "scrollVertical", value: function(t5) {
                var e4 = this;
                if (this.inScrollZone && this.mousedown) {
                  var n4 = window.pageYOffset;
                  window.scrollBy(0, t5), this.mouseY += window.pageYOffset - n4, setTimeout(function() {
                    e4.scrollVertical(t5);
                  }, 0);
                }
              } }, { key: "changingRectangle", value: function(t5) {
                if (this.mousedown) {
                  t5.pageY !== void 0 && (this.mouseX = t5.pageX, this.mouseY = t5.pageY);
                  var e4 = this.genInfoForMouseSelection(), n4 = e4.rightPos, o5 = e4.leftPos, r4 = e4.index, i4 = this.startX > n4 && this.mouseX > n4, a3 = this.startX < o5 && this.mouseX < o5;
                  this.rectCrossesBlocks = !(i4 || a3), this.isRectSelectionActivated || (this.rectCrossesBlocks = false, this.isRectSelectionActivated = true, this.shrinkRectangleToPoint(), this.overlayRectangle.style.display = "block"), this.updateRectangleSize(), r4 !== void 0 && (this.trySelectNextBlock(r4), this.inverseSelection(), f3.default.get().removeAllRanges(), t5.preventDefault());
                }
              } }, { key: "shrinkRectangleToPoint", value: function() {
                this.overlayRectangle.style.left = "".concat(this.startX - window.pageXOffset, "px"), this.overlayRectangle.style.top = "".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.bottom = "calc(100% - ".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.right = "calc(100% - ".concat(this.startX - window.pageXOffset, "px");
              } }, { key: "inverseSelection", value: function() {
                var t5 = this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;
                if (this.rectCrossesBlocks && !t5) {
                  var e4, n4 = h2(this.stackOfSelected);
                  try {
                    for (n4.s(); !(e4 = n4.n()).done; ) {
                      var o5 = e4.value;
                      this.Editor.BlockSelection.selectBlockByIndex(o5);
                    }
                  } catch (t6) {
                    n4.e(t6);
                  } finally {
                    n4.f();
                  }
                }
                if (!this.rectCrossesBlocks && t5) {
                  var r4, i4 = h2(this.stackOfSelected);
                  try {
                    for (i4.s(); !(r4 = i4.n()).done; ) {
                      var a3 = r4.value;
                      this.Editor.BlockSelection.unSelectBlockByIndex(a3);
                    }
                  } catch (t6) {
                    i4.e(t6);
                  } finally {
                    i4.f();
                  }
                }
              } }, { key: "updateRectangleSize", value: function() {
                this.mouseY >= this.startY ? (this.overlayRectangle.style.top = "".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.bottom = "calc(100% - ".concat(this.mouseY - window.pageYOffset, "px")) : (this.overlayRectangle.style.bottom = "calc(100% - ".concat(this.startY - window.pageYOffset, "px"), this.overlayRectangle.style.top = "".concat(this.mouseY - window.pageYOffset, "px")), this.mouseX >= this.startX ? (this.overlayRectangle.style.left = "".concat(this.startX - window.pageXOffset, "px"), this.overlayRectangle.style.right = "calc(100% - ".concat(this.mouseX - window.pageXOffset, "px")) : (this.overlayRectangle.style.right = "calc(100% - ".concat(this.startX - window.pageXOffset, "px"), this.overlayRectangle.style.left = "".concat(this.mouseX - window.pageXOffset, "px"));
              } }, { key: "genInfoForMouseSelection", value: function() {
                var t5, e4 = document.body.offsetWidth / 2, n4 = this.mouseY - window.pageYOffset, o5 = document.elementFromPoint(e4, n4), r4 = this.Editor.BlockManager.getBlockByChildNode(o5);
                r4 !== void 0 && (t5 = this.Editor.BlockManager.blocks.findIndex(function(t6) {
                  return t6.holder === r4.holder;
                }));
                var i4 = this.Editor.BlockManager.lastBlock.holder.querySelector("." + d2.default.CSS.content), a3 = Number.parseInt(window.getComputedStyle(i4).width, 10) / 2;
                return { index: t5, leftPos: e4 - a3, rightPos: e4 + a3 };
              } }, { key: "addBlockInSelection", value: function(t5) {
                this.rectCrossesBlocks && this.Editor.BlockSelection.selectBlockByIndex(t5), this.stackOfSelected.push(t5);
              } }, { key: "trySelectNextBlock", value: function(t5) {
                var e4 = this, n4 = this.stackOfSelected[this.stackOfSelected.length - 1] === t5, o5 = this.stackOfSelected.length;
                if (!n4) {
                  var r4 = this.stackOfSelected[o5 - 1] - this.stackOfSelected[o5 - 2] > 0, i4 = 0;
                  o5 > 1 && (i4 = r4 ? 1 : -1);
                  var a3 = t5 > this.stackOfSelected[o5 - 1] && i4 === 1, s3 = t5 < this.stackOfSelected[o5 - 1] && i4 === -1, c3 = !(a3 || s3 || i4 === 0);
                  if (c3 || !(t5 > this.stackOfSelected[o5 - 1] || this.stackOfSelected[o5 - 1] === void 0)) {
                    if (!c3 && t5 < this.stackOfSelected[o5 - 1])
                      for (var l3 = this.stackOfSelected[o5 - 1] - 1; l3 >= t5; l3--)
                        this.addBlockInSelection(l3);
                    else if (c3) {
                      var u3, f4 = o5 - 1;
                      for (u3 = t5 > this.stackOfSelected[o5 - 1] ? function() {
                        return t5 > e4.stackOfSelected[f4];
                      } : function() {
                        return t5 < e4.stackOfSelected[f4];
                      }; u3(); )
                        this.rectCrossesBlocks && this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[f4]), this.stackOfSelected.pop(), f4--;
                    }
                  } else
                    for (var d3 = this.stackOfSelected[o5 - 1] + 1 || t5; d3 <= t5; d3++)
                      this.addBlockInSelection(d3);
                }
              } }], [{ key: "CSS", get: function() {
                return { overlay: "codex-editor-overlay", overlayContainer: "codex-editor-overlay__container", rect: "codex-editor-overlay__rectangle", topScrollZone: "codex-editor-overlay__scroll-zone--top", bottomScrollZone: "codex-editor-overlay__scroll-zone--bottom" };
              } }]), o4;
            }(l2.default);
            o3.default = g2, g2.displayName = "RectangleSelection", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2) {
            "use strict";
            var p2 = n2(9), h2 = n2(1);
            function v2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = h2(r3), i3 = h2(i3), a2 = h2(a2), s2 = h2(s2), c2 = h2(c2), l2 = h2(l2), u2 = h2(u2), f3 = h2(f3), d2 = p2(d2);
            var y2 = function(t4) {
              (0, c2.default)(p3, t4);
              var e3, n3, o4, f4 = (e3 = p3, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (v2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function p3() {
                return (0, a2.default)(this, p3), f4.apply(this, arguments);
              }
              return (0, s2.default)(p3, [{ key: "render", value: (o4 = (0, i3.default)(r3.default.mark(function t5(e4) {
                var n4, o5, i4 = this;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return n4 = e4.map(function(t7) {
                          return { function: function() {
                            return i4.insertBlock(t7);
                          } };
                        }), t6.next = 3, d2.sequence(n4);
                      case 3:
                        return o5 = t6.sent, this.Editor.UI.checkEmptiness(), t6.abrupt("return", o5);
                      case 6:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return o4.apply(this, arguments);
              }) }, { key: "insertBlock", value: (n3 = (0, i3.default)(r3.default.mark(function t5(e4) {
                var n4, o5, i4, a3, s3, c3, l3, u3;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (n4 = this.Editor, o5 = n4.Tools, i4 = n4.BlockManager, a3 = e4.type, s3 = e4.data, c3 = e4.tunes, !o5.available.has(a3)) {
                          t6.next = 13;
                          break;
                        }
                        t6.prev = 3, i4.insert({ tool: a3, data: s3, tunes: c3 }), t6.next = 11;
                        break;
                      case 7:
                        throw t6.prev = 7, t6.t0 = t6.catch(3), d2.log("Block \xAB".concat(a3, "\xBB skipped because of plugins error"), "warn", s3), Error(t6.t0);
                      case 11:
                        t6.next = 18;
                        break;
                      case 13:
                        l3 = { savedData: { type: a3, data: s3 }, title: a3 }, o5.unavailable.has(a3) && (u3 = o5.unavailable.get(a3).toolbox, l3.title = (u3 == null ? void 0 : u3.title) || l3.title), i4.insert({ tool: o5.stubTool, data: l3 }).stretched = true, d2.log("Tool \xAB".concat(a3, "\xBB is not found. Check 'tools' property at your initial Editor.js config."), "warn");
                      case 18:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this, [[3, 7]]);
              })), function(t5) {
                return n3.apply(this, arguments);
              }) }]), p3;
            }(f3.default);
            o3.default = y2, y2.displayName = "Renderer", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(8), n2(379)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2) {
            "use strict";
            var p2 = n2(9), h2 = n2(1);
            function v2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = h2(r3), i3 = h2(i3), a2 = h2(a2), s2 = h2(s2), c2 = h2(c2), l2 = h2(l2), u2 = h2(u2), f3 = p2(f3), d2 = h2(d2);
            var y2 = function(t4) {
              (0, s2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, l2.default)(e3);
                if (v2()) {
                  var o5 = (0, l2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, c2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, i3.default)(this, o4), (t5 = n3.apply(this, arguments)).configCache = {}, t5.inlineToolsConfigCache = null, t5;
              }
              return (0, a2.default)(o4, [{ key: "sanitizeBlocks", value: function(t5) {
                var e4 = this;
                return t5.map(function(t6) {
                  var n4 = e4.composeToolConfig(t6.tool);
                  return f3.isEmpty(n4) || (t6.data = e4.deepSanitize(t6.data, n4)), t6;
                });
              } }, { key: "deepSanitize", value: function(t5, e4) {
                return Array.isArray(t5) ? this.cleanArray(t5, e4) : f3.isObject(t5) ? this.cleanObject(t5, e4) : f3.isString(t5) ? this.cleanOneItem(t5, e4) : t5;
              } }, { key: "clean", value: function(t5) {
                var e4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, n4 = { tags: e4 }, o5 = this.createHTMLJanitorInstance(n4);
                return o5.clean(t5);
              } }, { key: "composeToolConfig", value: function(t5) {
                if (this.configCache[t5])
                  return this.configCache[t5];
                var e4 = this.Editor.Tools.available.get(t5), n4 = this.getInlineToolsConfig(e4);
                if (!e4.sanitizeConfig || e4.sanitizeConfig && f3.isEmpty(e4.sanitizeConfig))
                  return n4;
                var o5 = e4.sanitizeConfig, r4 = {};
                for (var i4 in o5)
                  if (Object.prototype.hasOwnProperty.call(o5, i4)) {
                    var a3 = o5[i4];
                    f3.isObject(a3) ? r4[i4] = Object.assign({}, n4, a3) : r4[i4] = a3;
                  }
                return this.configCache[t5] = r4, r4;
              } }, { key: "getInlineToolsConfig", value: function(t5) {
                var e4 = this.Editor.Tools, n4 = t5.enabledInlineTools || [], o5 = {};
                return f3.isBoolean(n4) && n4 ? o5 = this.getAllInlineToolsConfig() : n4.map(function(t6) {
                  o5 = Object.assign(o5, e4.inlineTools.get(t6).sanitizeConfig);
                }), o5.br = true, o5.wbr = true, o5;
              } }, { key: "getAllInlineToolsConfig", value: function() {
                var t5 = this.Editor.Tools;
                if (this.inlineToolsConfigCache)
                  return this.inlineToolsConfigCache;
                var e4 = {};
                return Object.entries(t5.inlineTools).forEach(function(t6) {
                  var n4 = (0, r3.default)(t6, 2)[1];
                  Object.assign(e4, n4.sanitizeConfig);
                }), this.inlineToolsConfigCache = e4, this.inlineToolsConfigCache;
              } }, { key: "cleanArray", value: function(t5, e4) {
                var n4 = this;
                return t5.map(function(t6) {
                  return n4.deepSanitize(t6, e4);
                });
              } }, { key: "cleanObject", value: function(t5, e4) {
                var n4 = {};
                for (var o5 in t5)
                  if (Object.prototype.hasOwnProperty.call(t5, o5)) {
                    var r4 = t5[o5], i4 = this.isRule(e4[o5]) ? e4[o5] : e4;
                    n4[o5] = this.deepSanitize(r4, i4);
                  }
                return n4;
              } }, { key: "cleanOneItem", value: function(t5, e4) {
                return f3.isObject(e4) ? this.clean(t5, e4) : e4 === false ? this.clean(t5, {}) : t5;
              } }, { key: "isRule", value: function(t5) {
                return f3.isObject(t5) || f3.isBoolean(t5) || f3.isFunction(t5);
              } }, { key: "createHTMLJanitorInstance", value: function(t5) {
                return t5 ? new d2.default(t5) : null;
              } }]), o4;
            }(u2.default);
            o3.default = y2, y2.displayName = "Sanitizer", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2) {
            "use strict";
            var p2 = n2(9), h2 = n2(1);
            function v2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = h2(r3), i3 = h2(i3), a2 = h2(a2), s2 = h2(s2), c2 = h2(c2), l2 = h2(l2), u2 = h2(u2), f3 = h2(f3), d2 = p2(d2);
            var y2 = function(t4) {
              (0, c2.default)(p3, t4);
              var e3, n3, o4, f4 = (e3 = p3, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (v2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function p3() {
                return (0, a2.default)(this, p3), f4.apply(this, arguments);
              }
              return (0, s2.default)(p3, [{ key: "save", value: (o4 = (0, i3.default)(r3.default.mark(function t5() {
                var e4, n4, o5, i4, a3, s3, c3, l3, u3 = this;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.Sanitizer, i4 = e4.ModificationsObserver, a3 = n4.blocks, s3 = [], i4.disable(), t6.prev = 3, a3.forEach(function(t7) {
                          s3.push(u3.getSavedData(t7));
                        }), t6.next = 7, Promise.all(s3);
                      case 7:
                        return c3 = t6.sent, t6.next = 10, o5.sanitizeBlocks(c3);
                      case 10:
                        return l3 = t6.sent, t6.abrupt("return", this.makeOutput(l3));
                      case 12:
                        return t6.prev = 12, i4.enable(), t6.finish(12);
                      case 15:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this, [[3, , 12, 15]]);
              })), function() {
                return o4.apply(this, arguments);
              }) }, { key: "getSavedData", value: (n3 = (0, i3.default)(r3.default.mark(function t5(e4) {
                var n4, o5;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return t6.next = 2, e4.save();
                      case 2:
                        if (n4 = t6.sent, t6.t0 = n4, !t6.t0) {
                          t6.next = 8;
                          break;
                        }
                        return t6.next = 7, e4.validate(n4.data);
                      case 7:
                        t6.t0 = t6.sent;
                      case 8:
                        return o5 = t6.t0, t6.abrupt("return", Object.assign(Object.assign({}, n4), { isValid: o5 }));
                      case 10:
                      case "end":
                        return t6.stop();
                    }
                }, t5);
              })), function(t5) {
                return n3.apply(this, arguments);
              }) }, { key: "makeOutput", value: function(t5) {
                var e4 = this, n4 = 0, o5 = [];
                return d2.log("[Editor.js saving]:", "groupCollapsed"), t5.forEach(function(t6) {
                  var r4 = t6.tool, i4 = t6.data, a3 = t6.tunes, s3 = t6.time, c3 = t6.isValid;
                  if (n4 += s3, d2.log("".concat(r4.charAt(0).toUpperCase() + r4.slice(1)), "group"), !c3)
                    return d2.log("Block \xAB".concat(r4, "\xBB skipped because saved data is invalid")), void d2.log(void 0, "groupEnd");
                  if (d2.log(i4), d2.log(void 0, "groupEnd"), r4 !== e4.Editor.Tools.stubTool) {
                    var l3 = { type: r4, data: i4 };
                    d2.isEmpty(a3) || (l3.tunes = a3), o5.push(l3);
                  } else
                    o5.push(i4);
                }), d2.log("Total", "log", n4), d2.log(void 0, "groupEnd"), { time: +new Date(), blocks: o5, version: "2.20.0" };
              } }]), p3;
            }(f3.default);
            o3.default = y2, y2.displayName = "Saver", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(15), n2(60), n2(8), n2(25)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2) {
            "use strict";
            var v2 = n2(9), y2 = n2(1);
            function g2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = y2(r3), i3 = y2(i3), a2 = y2(a2), s2 = y2(s2), c2 = y2(c2), l2 = y2(l2), u2 = y2(u2), f3 = y2(f3), d2 = y2(d2), p2 = v2(p2), h2 = y2(h2);
            var b2 = function(t4) {
              (0, s2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, l2.default)(e3);
                if (g2()) {
                  var o5 = (0, l2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, c2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, i3.default)(this, o4), (t5 = n3.apply(this, arguments)).buttons = [], t5.flipper = null, t5.selection = new h2.default(), t5;
              }
              return (0, a2.default)(o4, [{ key: "make", value: function() {
                this.nodes.wrapper = f3.default.make("div", this.CSS.wrapper), this.nodes.toolSettings = f3.default.make("div", this.CSS.toolSettings), this.nodes.defaultSettings = f3.default.make("div", this.CSS.defaultSettings), f3.default.append(this.nodes.wrapper, [this.nodes.toolSettings, this.nodes.defaultSettings]), this.enableFlipper();
              } }, { key: "destroy", value: function() {
                this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes();
              } }, { key: "open", value: function() {
                this.nodes.wrapper.classList.add(this.CSS.wrapperOpened), this.selection.save(), this.Editor.BlockManager.currentBlock.selected = true, this.Editor.BlockSelection.clearCache(), this.addToolSettings(), this.addTunes(), this.eventsDispatcher.emit(this.events.opened), this.flipper.activate(this.blockTunesButtons);
              } }, { key: "close", value: function() {
                this.nodes.wrapper.classList.remove(this.CSS.wrapperOpened), h2.default.isAtEditor || this.selection.restore(), this.selection.clearSaved(), !this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted && this.Editor.BlockManager.currentBlock && (this.Editor.BlockManager.currentBlock.selected = false), this.nodes.toolSettings.innerHTML = "", this.nodes.defaultSettings.innerHTML = "", this.eventsDispatcher.emit(this.events.closed), this.buttons = [], this.flipper.deactivate();
              } }, { key: "addToolSettings", value: function() {
                var t5 = this.Editor.BlockManager.currentBlock.renderSettings();
                t5 && f3.default.append(this.nodes.toolSettings, t5);
              } }, { key: "addTunes", value: function() {
                var t5 = this.Editor.BlockManager.currentBlock.renderTunes(), e4 = (0, r3.default)(t5, 2), n4 = e4[0], o5 = e4[1];
                f3.default.append(this.nodes.toolSettings, n4), f3.default.append(this.nodes.defaultSettings, o5);
              } }, { key: "enableFlipper", value: function() {
                var t5 = this;
                this.flipper = new d2.default({ focusedItemClass: this.CSS.focusedButton, activateCallback: function(e4) {
                  e4 && f3.default.canSetCaret(e4) ? t5.close() : p2.delay(function() {
                    t5.Editor.Caret.setToBlock(t5.Editor.BlockManager.currentBlock);
                  }, 50)();
                } });
              } }, { key: "events", get: function() {
                return { opened: "block-settings-opened", closed: "block-settings-closed" };
              } }, { key: "CSS", get: function() {
                return { wrapper: "ce-settings", wrapperOpened: "ce-settings--opened", toolSettings: "ce-settings__plugin-zone", defaultSettings: "ce-settings__default-zone", button: "ce-settings__button", focusedButton: "ce-settings__button--focused", focusedButtonAnimated: "ce-settings__button--focused-animated" };
              } }, { key: "opened", get: function() {
                return this.nodes.wrapper.classList.contains(this.CSS.wrapperOpened);
              } }, { key: "blockTunesButtons", get: function() {
                var t5 = this, e4 = this.Editor.StylesAPI;
                if (this.buttons.length !== 0)
                  return this.buttons;
                var n4 = this.nodes.toolSettings.querySelectorAll(".".concat(e4.classes.settingsButton, ", ").concat(f3.default.allInputsSelector)), o5 = this.nodes.defaultSettings.querySelectorAll(".".concat(this.CSS.button));
                return n4.forEach(function(e5) {
                  t5.buttons.push(e5);
                }), o5.forEach(function(e5) {
                  t5.buttons.push(e5);
                }), this.buttons;
              } }]), o4;
            }(u2.default);
            o3.default = b2, b2.displayName = "BlockSettings", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(21), n2(22), n2(42), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(15), n2(8), n2(60), n2(59), n2(81)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2, y2, g2, b2) {
            "use strict";
            var m2 = n2(9), k2 = n2(1);
            function x2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = k2(r3), i3 = k2(i3), a2 = k2(a2), s2 = k2(s2), c2 = k2(c2), l2 = k2(l2), u2 = k2(u2), f3 = k2(f3), d2 = k2(d2), p2 = k2(p2), h2 = k2(h2), v2 = m2(v2), y2 = k2(y2), g2 = k2(g2);
            var w2 = function(t4) {
              (0, u2.default)(p3, t4);
              var e3, n3, o4 = (e3 = p3, function() {
                var t5, n4 = (0, d2.default)(e3);
                if (x2()) {
                  var o5 = (0, d2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, f3.default)(this, t5);
              });
              function p3() {
                var t5;
                return (0, c2.default)(this, p3), (t5 = o4.apply(this, arguments)).opened = false, t5.tools = {}, t5.flipper = null, t5.togglingCallback = null, t5;
              }
              return (0, l2.default)(p3, [{ key: "make", value: function() {
                this.nodes.wrapper = h2.default.make("div", [p3.CSS.conversionToolbarWrapper].concat((0, s2.default)(this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : []))), this.nodes.tools = h2.default.make("div", p3.CSS.conversionToolbarTools);
                var t5 = h2.default.make("div", p3.CSS.conversionToolbarLabel, { textContent: g2.default.ui(b2.I18nInternalNS.ui.inlineToolbar.converter, "Convert to") });
                return this.addTools(), this.enableFlipper(), h2.default.append(this.nodes.wrapper, t5), h2.default.append(this.nodes.wrapper, this.nodes.tools), this.nodes.wrapper;
              } }, { key: "destroy", value: function() {
                this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes();
              } }, { key: "toggle", value: function(t5) {
                this.opened ? this.close() : this.open(), v2.isFunction(t5) && (this.togglingCallback = t5);
              } }, { key: "open", value: function() {
                var t5 = this;
                this.filterTools(), this.opened = true, this.nodes.wrapper.classList.add(p3.CSS.conversionToolbarShowed), setTimeout(function() {
                  t5.flipper.activate(Object.values(t5.tools).filter(function(t6) {
                    return !t6.classList.contains(p3.CSS.conversionToolHidden);
                  })), t5.flipper.focusFirst(), v2.isFunction(t5.togglingCallback) && t5.togglingCallback(true);
                }, 50);
              } }, { key: "close", value: function() {
                this.opened = false, this.flipper.deactivate(), this.nodes.wrapper.classList.remove(p3.CSS.conversionToolbarShowed), v2.isFunction(this.togglingCallback) && this.togglingCallback(false);
              } }, { key: "hasTools", value: function() {
                var t5 = Object.keys(this.tools);
                return !(t5.length === 1 && t5.shift() === this.config.defaultBlock);
              } }, { key: "replaceWithBlock", value: (n3 = (0, a2.default)(i3.default.mark(function t5(e4) {
                var n4, o5, r4, a3, s3, c3, l3, u3, f4, d3, p4 = this;
                return i3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return n4 = this.Editor.BlockManager.currentBlock.tool, o5 = this.Editor.BlockManager.currentBlock.name, t6.next = 4, this.Editor.BlockManager.currentBlock.save();
                      case 4:
                        if (r4 = t6.sent, a3 = r4.data, o5 === e4 && (e4 = this.config.defaultBlock), s3 = this.Editor.Tools.blockTools.get(e4), c3 = "", l3 = n4.conversionConfig.export, !v2.isFunction(l3)) {
                          t6.next = 14;
                          break;
                        }
                        c3 = l3(a3), t6.next = 20;
                        break;
                      case 14:
                        if (!v2.isString(l3)) {
                          t6.next = 18;
                          break;
                        }
                        c3 = a3[l3], t6.next = 20;
                        break;
                      case 18:
                        return v2.log("Conversion \xABexport\xBB property must be a string or function. String means key of saved data object to export. Function should export processed string to export."), t6.abrupt("return");
                      case 20:
                        if (u3 = this.Editor.Sanitizer.clean(c3, s3.sanitizeConfig), f4 = {}, d3 = s3.conversionConfig.import, !v2.isFunction(d3)) {
                          t6.next = 27;
                          break;
                        }
                        f4 = d3(u3), t6.next = 33;
                        break;
                      case 27:
                        if (!v2.isString(d3)) {
                          t6.next = 31;
                          break;
                        }
                        f4[d3] = u3, t6.next = 33;
                        break;
                      case 31:
                        return v2.log("Conversion \xABimport\xBB property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."), t6.abrupt("return");
                      case 33:
                        this.Editor.BlockManager.replace({ tool: e4, data: f4 }), this.Editor.BlockSelection.clearSelection(), this.close(), this.Editor.InlineToolbar.close(), v2.delay(function() {
                          p4.Editor.Caret.setToBlock(p4.Editor.BlockManager.currentBlock);
                        }, 10)();
                      case 38:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function(t5) {
                return n3.apply(this, arguments);
              }) }, { key: "addTools", value: function() {
                var t5 = this, e4 = this.Editor.Tools.blockTools;
                Array.from(e4.entries()).forEach(function(e5) {
                  var n4 = (0, r3.default)(e5, 2), o5 = n4[0], i4 = n4[1], a3 = i4.toolbox, s3 = i4.conversionConfig;
                  !v2.isEmpty(a3) && a3.icon && s3 && s3.import && t5.addTool(o5, a3.icon, a3.title);
                });
              } }, { key: "addTool", value: function(t5, e4, n4) {
                var o5 = this, r4 = h2.default.make("div", [p3.CSS.conversionTool]), s3 = h2.default.make("div", [p3.CSS.conversionToolIcon]);
                r4.dataset.tool = t5, s3.innerHTML = e4, h2.default.append(r4, s3), h2.default.append(r4, h2.default.text(g2.default.t(b2.I18nInternalNS.toolNames, n4 || v2.capitalize(t5)))), h2.default.append(this.nodes.tools, r4), this.tools[t5] = r4, this.listeners.on(r4, "click", (0, a2.default)(i3.default.mark(function e5() {
                  return i3.default.wrap(function(e6) {
                    for (; ; )
                      switch (e6.prev = e6.next) {
                        case 0:
                          return e6.next = 2, o5.replaceWithBlock(t5);
                        case 2:
                        case "end":
                          return e6.stop();
                      }
                  }, e5);
                })));
              } }, { key: "filterTools", value: function() {
                var t5 = this.Editor.BlockManager.currentBlock;
                Object.entries(this.tools).forEach(function(e4) {
                  var n4 = (0, r3.default)(e4, 2), o5 = n4[0], i4 = n4[1];
                  i4.hidden = false, i4.classList.toggle(p3.CSS.conversionToolHidden, o5 === t5.name);
                });
              } }, { key: "enableFlipper", value: function() {
                this.flipper = new y2.default({ focusedItemClass: p3.CSS.conversionToolFocused });
              } }], [{ key: "CSS", get: function() {
                return { conversionToolbarWrapper: "ce-conversion-toolbar", conversionToolbarShowed: "ce-conversion-toolbar--showed", conversionToolbarTools: "ce-conversion-toolbar__tools", conversionToolbarLabel: "ce-conversion-toolbar__label", conversionTool: "ce-conversion-tool", conversionToolHidden: "ce-conversion-tool--hidden", conversionToolIcon: "ce-conversion-tool__icon", conversionToolFocused: "ce-conversion-tool--focused", conversionToolActive: "ce-conversion-tool--active" };
              } }]), p3;
            }(p2.default);
            o3.default = w2, w2.displayName = "ConversionToolbar", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(42), n2(29), n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(15), n2(25), n2(8), n2(60), n2(59), n2(81), n2(108), n2(66)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2, y2, g2, b2, m2) {
            "use strict";
            var k2 = n2(9), x2 = n2(1);
            function w2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = x2(r3), i3 = x2(i3), a2 = x2(a2), s2 = x2(s2), c2 = x2(c2), l2 = x2(l2), u2 = x2(u2), f3 = x2(f3), d2 = x2(d2), p2 = x2(p2), h2 = k2(h2), v2 = x2(v2), y2 = x2(y2), b2 = x2(b2);
            var S2 = function(t4) {
              (0, c2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, u2.default)(e3);
                if (w2()) {
                  var o5 = (0, u2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, l2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, a2.default)(this, o4), (t5 = n3.apply(this, arguments)).CSS = { inlineToolbar: "ce-inline-toolbar", inlineToolbarShowed: "ce-inline-toolbar--showed", inlineToolbarLeftOriented: "ce-inline-toolbar--left-oriented", inlineToolbarRightOriented: "ce-inline-toolbar--right-oriented", inlineToolbarShortcut: "ce-inline-toolbar__shortcut", buttonsWrapper: "ce-inline-toolbar__buttons", actionsWrapper: "ce-inline-toolbar__actions", inlineToolButton: "ce-inline-tool", inputField: "cdx-input", focusedButton: "ce-inline-tool--focused", conversionToggler: "ce-inline-toolbar__dropdown", conversionTogglerHidden: "ce-inline-toolbar__dropdown--hidden", conversionTogglerContent: "ce-inline-toolbar__dropdown-content", togglerAndButtonsWrapper: "ce-inline-toolbar__toggler-and-button-wrapper" }, t5.opened = false, t5.toolbarVerticalMargin = 5, t5.buttonsList = null, t5.width = 0, t5.flipper = null, t5;
              }
              return (0, s2.default)(o4, [{ key: "toggleReadOnly", value: function(t5) {
                t5 ? (this.destroy(), this.Editor.ConversionToolbar.destroy()) : this.make();
              } }, { key: "tryToShow", value: function() {
                var t5 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
                this.allowedToShow() ? (this.move(), this.open(), this.Editor.Toolbar.close()) : t5 && this.close();
              } }, { key: "move", value: function() {
                var t5 = p2.default.rect, e4 = this.Editor.UI.nodes.wrapper.getBoundingClientRect(), n4 = { x: t5.x - e4.left, y: t5.y + t5.height - e4.top + this.toolbarVerticalMargin };
                t5.width && (n4.x += Math.floor(t5.width / 2));
                var o5 = n4.x - this.width / 2, r4 = n4.x + this.width / 2;
                this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarLeftOriented, o5 < this.Editor.UI.contentRect.left), this.nodes.wrapper.classList.toggle(this.CSS.inlineToolbarRightOriented, r4 > this.Editor.UI.contentRect.right), this.nodes.wrapper.style.left = Math.floor(n4.x) + "px", this.nodes.wrapper.style.top = Math.floor(n4.y) + "px";
              } }, { key: "close", value: function() {
                var t5 = this;
                this.opened && (this.Editor.ReadOnly.isEnabled || (this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed), Array.from(this.toolsInstances.entries()).forEach(function(e4) {
                  var n4 = (0, i3.default)(e4, 2), o5 = n4[0], r4 = n4[1], a3 = t5.getToolShortcut(o5);
                  a3 && b2.default.remove(t5.Editor.UI.nodes.redactor, a3), h2.isFunction(r4.clear) && r4.clear();
                }), this.opened = false, this.flipper.deactivate(), this.Editor.ConversionToolbar.close()));
              } }, { key: "open", value: function() {
                if (!this.opened) {
                  this.addToolsFiltered(), this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed), this.buttonsList = this.nodes.buttons.querySelectorAll(".".concat(this.CSS.inlineToolButton)), this.opened = true, this.Editor.ConversionToolbar.hasTools() ? this.setConversionTogglerContent() : this.nodes.conversionToggler.hidden = true;
                  var t5 = Array.from(this.buttonsList);
                  t5.unshift(this.nodes.conversionToggler), t5 = t5.filter(function(t6) {
                    return !t6.hidden;
                  }), this.flipper.activate(t5);
                }
              } }, { key: "containsNode", value: function(t5) {
                return this.nodes.wrapper.contains(t5);
              } }, { key: "destroy", value: function() {
                this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes();
              } }, { key: "getInlineToolbarSettings", value: function(t5) {
                var e4 = t5.enabledInlineTools;
                if (e4 !== true && !Array.isArray(e4))
                  return false;
                if (Array.isArray(e4))
                  return e4;
                var n4 = this.config.inlineToolbar;
                return Array.isArray(n4) ? n4 : n4 === true && Array.from(this.Editor.Tools.inlineTools.keys());
              } }, { key: "make", value: function() {
                var t5 = this;
                this.nodes.wrapper = d2.default.make("div", [this.CSS.inlineToolbar].concat((0, r3.default)(this.isRtl ? [this.Editor.UI.CSS.editorRtlFix] : []))), this.nodes.togglerAndButtonsWrapper = d2.default.make("div", this.CSS.togglerAndButtonsWrapper), this.nodes.buttons = d2.default.make("div", this.CSS.buttonsWrapper), this.nodes.actions = d2.default.make("div", this.CSS.actionsWrapper), this.listeners.on(this.nodes.wrapper, "mousedown", function(e4) {
                  e4.target.closest(".".concat(t5.CSS.actionsWrapper)) || e4.preventDefault();
                }), d2.default.append(this.nodes.wrapper, [this.nodes.togglerAndButtonsWrapper, this.nodes.actions]), d2.default.append(this.Editor.UI.nodes.wrapper, this.nodes.wrapper), this.addConversionToggler(), d2.default.append(this.nodes.togglerAndButtonsWrapper, this.nodes.buttons), this.prepareConversionToolbar(), this.recalculateWidth(), this.enableFlipper();
              } }, { key: "allowedToShow", value: function() {
                var t5 = p2.default.get(), e4 = p2.default.text;
                if (!t5 || !t5.anchorNode)
                  return false;
                if (t5.isCollapsed || e4.length < 1)
                  return false;
                var n4 = d2.default.isElement(t5.anchorNode) ? t5.anchorNode : t5.anchorNode.parentElement;
                if (t5 && ["IMG", "INPUT"].includes(n4.tagName))
                  return false;
                if (n4.closest('[contenteditable="true"]') === null)
                  return false;
                var o5 = this.Editor.BlockManager.getBlock(t5.anchorNode);
                return !!o5 && this.getInlineToolbarSettings(o5.tool) !== false;
              } }, { key: "recalculateWidth", value: function() {
                this.width = this.nodes.wrapper.offsetWidth;
              } }, { key: "addConversionToggler", value: function() {
                var t5 = this;
                this.nodes.conversionToggler = d2.default.make("div", this.CSS.conversionToggler), this.nodes.conversionTogglerContent = d2.default.make("div", this.CSS.conversionTogglerContent);
                var e4 = d2.default.svg("toggler-down", 13, 13);
                this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent), this.nodes.conversionToggler.appendChild(e4), this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler), this.listeners.on(this.nodes.conversionToggler, "click", function() {
                  t5.Editor.ConversionToolbar.toggle(function(e5) {
                    !e5 && t5.opened ? t5.flipper.activate() : t5.opened && t5.flipper.deactivate();
                  });
                }), this.Editor.Tooltip.onHover(this.nodes.conversionToggler, y2.default.ui(g2.I18nInternalNS.ui.inlineToolbar.converter, "Convert to"), { placement: "top", hidingDelay: 100 });
              } }, { key: "setConversionTogglerContent", value: function() {
                var t5 = this.Editor.BlockManager.currentBlock, e4 = t5.name, n4 = t5.tool.conversionConfig, o5 = n4 && n4.export;
                this.nodes.conversionToggler.hidden = !o5, this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden, !o5);
                var r4 = t5.tool.toolbox || {};
                this.nodes.conversionTogglerContent.innerHTML = r4.icon || r4.title || h2.capitalize(e4);
              } }, { key: "prepareConversionToolbar", value: function() {
                var t5 = this.Editor.ConversionToolbar.make();
                d2.default.append(this.nodes.wrapper, t5);
              } }, { key: "addToolsFiltered", value: function() {
                var t5 = this, e4 = p2.default.get(), n4 = this.Editor.BlockManager.getBlock(e4.anchorNode);
                this.nodes.buttons.innerHTML = "", this.nodes.actions.innerHTML = "", this.toolsInstances = /* @__PURE__ */ new Map(), this.getInlineToolbarSettings(n4.tool).forEach(function(e5) {
                  var n5 = t5.Editor.Tools.inlineTools.get(e5);
                  t5.addTool(n5);
                }), this.recalculateWidth();
              } }, { key: "addTool", value: function(t5) {
                var e4 = this, n4 = this.Editor.Tooltip, o5 = t5.create(), r4 = o5.render();
                if (r4) {
                  if (r4.dataset.tool = t5.name, this.nodes.buttons.appendChild(r4), this.toolsInstances.set(t5.name, o5), h2.isFunction(o5.renderActions)) {
                    var i4 = o5.renderActions();
                    this.nodes.actions.appendChild(i4);
                  }
                  this.listeners.on(r4, "click", function(t6) {
                    e4.toolClicked(o5), t6.preventDefault();
                  });
                  var a3 = this.getToolShortcut(t5.name);
                  if (a3)
                    try {
                      this.enableShortcuts(o5, a3);
                    } catch (t6) {
                    }
                  var s3 = d2.default.make("div"), c3 = y2.default.t(g2.I18nInternalNS.toolNames, t5.title || h2.capitalize(t5.name));
                  s3.appendChild(d2.default.text(c3)), a3 && s3.appendChild(d2.default.make("div", this.CSS.inlineToolbarShortcut, { textContent: h2.beautifyShortcut(a3) })), n4.onHover(r4, s3, { placement: "top", hidingDelay: 100 }), o5.checkState(p2.default.get());
                } else
                  h2.log("Render method must return an instance of Node", "warn", t5.name);
              } }, { key: "getToolShortcut", value: function(t5) {
                var e4 = this.Editor.Tools, n4 = e4.inlineTools.get(t5), o5 = e4.internal.inlineTools;
                return Array.from(o5.keys()).includes(t5) ? this.inlineTools[t5][m2.CommonInternalSettings.Shortcut] : n4.shortcut;
              } }, { key: "enableShortcuts", value: function(t5, e4) {
                var n4 = this;
                b2.default.add({ name: e4, handler: function(e5) {
                  var o5 = n4.Editor.BlockManager.currentBlock;
                  o5 && o5.tool.enabledInlineTools && (e5.preventDefault(), n4.toolClicked(t5));
                }, on: this.Editor.UI.nodes.redactor });
              } }, { key: "toolClicked", value: function(t5) {
                var e4 = p2.default.range;
                t5.surround(e4), this.checkToolsState();
              } }, { key: "checkToolsState", value: function() {
                this.toolsInstances.forEach(function(t5) {
                  t5.checkState(p2.default.get());
                });
              } }, { key: "enableFlipper", value: function() {
                this.flipper = new v2.default({ focusedItemClass: this.CSS.focusedButton, allowArrows: false });
              } }, { key: "inlineTools", get: function() {
                var t5 = {};
                return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(function(e4) {
                  var n4 = (0, i3.default)(e4, 2), o5 = n4[0], r4 = n4[1];
                  t5[o5] = r4.create();
                }), t5;
              } }]), o4;
            }(f3.default);
            o3.default = S2, S2.displayName = "InlineToolbar", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(15), n2(8), n2(60), n2(61), n2(59), n2(81), n2(108)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2, y2) {
            "use strict";
            var g2 = n2(9), b2 = n2(1);
            function m2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = b2(r3), i3 = b2(i3), a2 = b2(a2), s2 = b2(s2), c2 = b2(c2), l2 = b2(l2), u2 = b2(u2), f3 = g2(f3), d2 = b2(d2), h2 = b2(h2), y2 = b2(y2);
            var k2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (m2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).nodes = { toolbox: null, buttons: [] }, t5.opened = false, t5.displayedToolsCount = 0, t5.flipper = null, t5;
              }
              return (0, i3.default)(o4, [{ key: "make", value: function() {
                this.nodes.toolbox = u2.default.make("div", this.CSS.toolbox), this.addTools(), this.enableFlipper();
              } }, { key: "destroy", value: function() {
                this.flipper && (this.flipper.deactivate(), this.flipper = null), this.removeAllNodes(), this.removeAllShortcuts();
              } }, { key: "toolButtonActivate", value: function(t5, e4) {
                this.insertNewBlock(e4);
              } }, { key: "open", value: function() {
                this.isEmpty || (this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolbarHolderModifier), this.nodes.toolbox.classList.add(this.CSS.toolboxOpened), this.opened = true, this.flipper.activate());
              } }, { key: "close", value: function() {
                this.nodes.toolbox.classList.remove(this.CSS.toolboxOpened), this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolbarHolderModifier), this.opened = false, this.flipper.deactivate();
              } }, { key: "toggle", value: function() {
                this.opened ? this.close() : this.open();
              } }, { key: "addTools", value: function() {
                var t5 = this, e4 = this.Editor.Tools.blockTools;
                Array.from(e4.values()).forEach(function(e5) {
                  return t5.addTool(e5);
                });
              } }, { key: "addTool", value: function(t5) {
                var e4 = this, n4 = t5.toolbox;
                if (n4)
                  if (!n4 || n4.icon) {
                    var o5 = u2.default.make("li", [this.CSS.toolboxButton]);
                    o5.dataset.tool = t5.name, o5.innerHTML = n4.icon, u2.default.append(this.nodes.toolbox, o5), this.nodes.toolbox.appendChild(o5), this.nodes.buttons.push(o5), this.listeners.on(o5, "click", function(n5) {
                      e4.toolButtonActivate(n5, t5.name);
                    });
                    var r4 = this.drawTooltip(t5);
                    this.Editor.Tooltip.onHover(o5, r4, { placement: "bottom", hidingDelay: 200 });
                    var i4 = t5.shortcut;
                    i4 && this.enableShortcut(t5.name, i4), this.displayedToolsCount++;
                  } else
                    f3.log("Toolbar icon is missed. Tool %o skipped", "warn", t5.name);
              } }, { key: "drawTooltip", value: function(t5) {
                var e4 = t5.toolbox || {}, n4 = h2.default.t(v2.I18nInternalNS.toolNames, e4.title || t5.name), o5 = t5.shortcut, r4 = u2.default.make("div", this.CSS.buttonTooltip), i4 = document.createTextNode(f3.capitalize(n4));
                return r4.appendChild(i4), o5 && (o5 = f3.beautifyShortcut(o5), r4.appendChild(u2.default.make("div", this.CSS.buttonShortcut, { textContent: o5 }))), r4;
              } }, { key: "enableShortcut", value: function(t5, e4) {
                var n4 = this;
                y2.default.add({ name: e4, handler: function(e5) {
                  e5.preventDefault(), n4.insertNewBlock(t5);
                }, on: this.Editor.UI.nodes.redactor });
              } }, { key: "removeAllShortcuts", value: function() {
                var t5 = this, e4 = this.Editor.Tools.blockTools;
                Array.from(e4.values()).forEach(function(e5) {
                  var n4 = e5.shortcut;
                  n4 && y2.default.remove(t5.Editor.UI.nodes.redactor, n4);
                });
              } }, { key: "enableFlipper", value: function() {
                var t5 = Array.from(this.nodes.toolbox.childNodes);
                this.flipper = new d2.default({ items: t5, focusedItemClass: this.CSS.toolboxButtonActive });
              } }, { key: "insertNewBlock", value: function(t5) {
                var e4 = this.Editor, n4 = e4.BlockManager, o5 = e4.Caret, r4 = n4.currentBlock, i4 = n4.insert({ tool: t5, replace: r4.isEmpty });
                i4.call(p2.BlockToolAPI.APPEND_CALLBACK), this.Editor.Caret.setToBlock(i4), i4.inputs.length === 0 && (i4 === n4.lastBlock ? (n4.insertAtEnd(), o5.setToBlock(n4.lastBlock)) : o5.setToBlock(n4.nextBlock)), this.Editor.Toolbar.close();
              } }, { key: "CSS", get: function() {
                return { toolbox: "ce-toolbox", toolboxButton: "ce-toolbox__button", toolboxButtonActive: "ce-toolbox__button--active", toolboxOpened: "ce-toolbox--opened", openedToolbarHolderModifier: "codex-editor--toolbox-opened", buttonTooltip: "ce-toolbox-button-tooltip", buttonShortcut: "ce-toolbox-button-tooltip__shortcut" };
              } }, { key: "isEmpty", get: function() {
                return this.displayedToolsCount === 0;
              } }]), o4;
            }(l2.default);
            o3.default = k2, k2.displayName = "Toolbox", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(42), n2(29), n2(2), n2(3), n2(5), n2(6), n2(4), n2(380), n2(7), n2(8), n2(381), n2(382), n2(383), n2(384), n2(385), n2(389), n2(390), n2(391), n2(392)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2, y2, g2, b2, m2, k2, x2, w2, S2, T2) {
            "use strict";
            var E2 = n2(9), C2 = n2(1);
            function B2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = C2(r3), i3 = C2(i3), a2 = C2(a2), s2 = C2(s2), c2 = C2(c2), l2 = C2(l2), u2 = C2(u2), f3 = C2(f3), d2 = C2(d2), p2 = C2(p2), h2 = C2(h2), v2 = E2(v2), y2 = C2(y2), g2 = C2(g2), b2 = C2(b2), m2 = C2(m2), k2 = C2(k2), x2 = C2(x2), w2 = C2(w2), S2 = C2(S2), T2 = C2(T2);
            var _2 = function(t4) {
              (0, u2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, d2.default)(e3);
                if (B2()) {
                  var o5 = (0, d2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, f3.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, c2.default)(this, o4), (t5 = n3.apply(this, arguments)).stubTool = "stub", t5.toolsAvailable = new T2.default(), t5.toolsUnavailable = new T2.default(), t5;
              }
              return (0, l2.default)(o4, [{ key: "prepare", value: function() {
                var t5 = this;
                if (this.validateTools(), this.config.tools = v2.deepMerge({}, this.internalTools, this.config.tools), !Object.prototype.hasOwnProperty.call(this.config, "tools") || Object.keys(this.config.tools).length === 0)
                  throw Error("Can't start without tools");
                var e4 = this.prepareConfig();
                this.factory = new k2.default(e4, this.config, this.Editor.API);
                var n4 = this.getListOfPrepareFunctions(e4);
                return n4.length === 0 ? Promise.resolve() : v2.sequence(n4, function(e5) {
                  t5.toolPrepareMethodSuccess(e5);
                }, function(e5) {
                  t5.toolPrepareMethodFallback(e5);
                });
              } }, { key: "getTunesForTool", value: function(t5) {
                var e4 = t5.enabledBlockTunes;
                if (e4 === false)
                  return new T2.default();
                if (Array.isArray(e4))
                  return new T2.default(Array.from(this.blockTunes.entries()).filter(function(t6) {
                    var n5 = (0, s2.default)(t6, 2)[1];
                    return e4.includes(n5.name);
                  }).concat((0, a2.default)(this.blockTunes.internalTools.entries())));
                var n4 = this.config.tunes;
                return Array.isArray(n4) ? new T2.default(Array.from(this.blockTunes.entries()).filter(function(t6) {
                  var e5 = (0, s2.default)(t6, 2)[1];
                  return n4.includes(e5.name);
                }).concat((0, a2.default)(this.blockTunes.internalTools.entries()))) : this.blockTunes.internalTools;
              } }, { key: "destroy", value: function() {
                Object.values(this.available).forEach(function() {
                  var t5 = (0, i3.default)(r3.default.mark(function t6(e4) {
                    return r3.default.wrap(function(t7) {
                      for (; ; )
                        switch (t7.prev = t7.next) {
                          case 0:
                            if (!v2.isFunction(e4.reset)) {
                              t7.next = 3;
                              break;
                            }
                            return t7.next = 3, e4.reset();
                          case 3:
                          case "end":
                            return t7.stop();
                        }
                    }, t6);
                  }));
                  return function(e4) {
                    return t5.apply(this, arguments);
                  };
                }());
              } }, { key: "toolPrepareMethodSuccess", value: function(t5) {
                var e4 = this.factory.get(t5.toolName);
                if (e4.isInline()) {
                  var n4 = ["render", "surround", "checkState"].filter(function(t6) {
                    return !e4.create()[t6];
                  });
                  if (n4.length)
                    return v2.log("Incorrect Inline Tool: ".concat(e4.name, ". Some of required methods is not implemented %o"), "warn", n4), void this.toolsUnavailable.set(e4.name, e4);
                }
                this.toolsAvailable.set(e4.name, e4);
              } }, { key: "toolPrepareMethodFallback", value: function(t5) {
                this.toolsUnavailable.set(t5.toolName, this.factory.get(t5.toolName));
              } }, { key: "getListOfPrepareFunctions", value: function(t5) {
                var e4 = [];
                return Object.entries(t5).forEach(function(t6) {
                  var n4 = (0, s2.default)(t6, 2), o5 = n4[0], r4 = n4[1];
                  e4.push({ function: v2.isFunction(r4.class.prepare) ? r4.class.prepare : function() {
                  }, data: { toolName: o5 } });
                }), e4;
              } }, { key: "validateTools", value: function() {
                for (var t5 in this.config.tools)
                  if (Object.prototype.hasOwnProperty.call(this.config.tools, t5)) {
                    if (t5 in this.internalTools)
                      return;
                    var e4 = this.config.tools[t5];
                    if (!v2.isFunction(e4) && !v2.isFunction(e4.class))
                      throw Error("Tool \xAB".concat(t5, "\xBB must be a constructor function or an object with function in the \xABclass\xBB property"));
                  }
              } }, { key: "prepareConfig", value: function() {
                var t5 = {};
                for (var e4 in this.config.tools)
                  v2.isObject(this.config.tools[e4]) ? t5[e4] = this.config.tools[e4] : t5[e4] = { class: this.config.tools[e4] };
                return t5;
              } }, { key: "available", get: function() {
                return this.toolsAvailable;
              } }, { key: "unavailable", get: function() {
                return this.toolsUnavailable;
              } }, { key: "inlineTools", get: function() {
                return this.available.inlineTools;
              } }, { key: "blockTools", get: function() {
                return this.available.blockTools;
              } }, { key: "blockTunes", get: function() {
                return this.available.blockTunes;
              } }, { key: "defaultTool", get: function() {
                return this.blockTools.get(this.config.defaultBlock);
              } }, { key: "internal", get: function() {
                return this.available.internalTools;
              } }, { key: "internalTools", get: function() {
                return { bold: { class: y2.default, isInternal: true }, italic: { class: g2.default, isInternal: true }, link: { class: b2.default, isInternal: true }, paragraph: { class: p2.default, inlineToolbar: true, isInternal: true }, stub: { class: m2.default, isInternal: true }, moveUpTune: { class: S2.default, isInternal: true }, deleteTune: { class: w2.default, isInternal: true }, moveDownTune: { class: x2.default, isInternal: true } };
              } }]), o4;
            }(h2.default);
            o3.default = _2, _2.displayName = "Tools", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(7), n2(393)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(1);
            function d2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = f3(r3), i3 = f3(i3), a2 = f3(a2), s2 = f3(s2), c2 = f3(c2), l2 = f3(l2), u2 = f3(u2);
            var p2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (d2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).lib = new u2.default(), t5;
              }
              return (0, i3.default)(o4, [{ key: "show", value: function(t5, e4, n4) {
                this.lib.show(t5, e4, n4);
              } }, { key: "hide", value: function() {
                this.lib.hide();
              } }, { key: "onHover", value: function(t5, e4, n4) {
                this.lib.onHover(t5, e4, n4);
              } }]), o4;
            }(l2.default);
            o3.default = p2, p2.displayName = "Tooltip", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(42), n2(21), n2(22), n2(2), n2(3), n2(5), n2(6), n2(4), n2(394), n2(7), n2(15), n2(8), n2(25), n2(61), n2(60)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2, p2, h2, v2, y2, g2, b2, m2) {
            "use strict";
            var k2 = n2(9), x2 = n2(1);
            function w2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = x2(r3), i3 = x2(i3), a2 = x2(a2), s2 = x2(s2), c2 = x2(c2), l2 = x2(l2), u2 = x2(u2), f3 = x2(f3), d2 = x2(d2), p2 = x2(p2), h2 = x2(h2), v2 = x2(v2), y2 = k2(y2), g2 = x2(g2), b2 = x2(b2), m2 = x2(m2);
            var S2 = function(t4) {
              (0, u2.default)(k3, t4);
              var e3, o4, h3 = (e3 = k3, function() {
                var t5, n3 = (0, d2.default)(e3);
                if (w2()) {
                  var o5 = (0, d2.default)(this).constructor;
                  t5 = Reflect.construct(n3, arguments, o5);
                } else
                  t5 = n3.apply(this, arguments);
                return (0, f3.default)(this, t5);
              });
              function k3() {
                var t5;
                return (0, c2.default)(this, k3), (t5 = h3.apply(this, arguments)).isMobile = false, t5.contentRectCache = void 0, t5.resizeDebouncer = y2.debounce(function() {
                  t5.windowResize();
                }, 200), t5;
              }
              return (0, l2.default)(k3, [{ key: "addLoader", value: function() {
                this.nodes.loader = v2.default.make("div", this.CSS.editorLoader), this.nodes.wrapper.prepend(this.nodes.loader), this.nodes.redactor.classList.add(this.CSS.editorZoneHidden);
              } }, { key: "removeLoader", value: function() {
                this.nodes.loader.remove(), this.nodes.redactor.classList.remove(this.CSS.editorZoneHidden);
              } }, { key: "prepare", value: (o4 = (0, s2.default)(a2.default.mark(function t5() {
                return a2.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        this.checkIsMobile(), this.make(), this.addLoader(), this.appendSVGSprite(), this.loadStyles();
                      case 5:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function() {
                return o4.apply(this, arguments);
              }) }, { key: "toggleReadOnly", value: function(t5) {
                t5 ? this.disableModuleBindings() : this.enableModuleBindings();
              } }, { key: "checkEmptiness", value: function() {
                var t5 = this.Editor.BlockManager;
                this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty, t5.isEditorEmpty);
              } }, { key: "destroy", value: function() {
                this.nodes.holder.innerHTML = "";
              } }, { key: "closeAllToolbars", value: function() {
                var t5 = this.Editor, e4 = t5.Toolbox, n3 = t5.BlockSettings, o5 = t5.InlineToolbar, r4 = t5.ConversionToolbar;
                n3.close(), o5.close(), r4.close(), e4.close();
              } }, { key: "checkIsMobile", value: function() {
                this.isMobile = window.innerWidth < 650;
              } }, { key: "make", value: function() {
                this.nodes.holder = v2.default.getHolder(this.config.holder), this.nodes.wrapper = v2.default.make("div", [this.CSS.editorWrapper].concat((0, i3.default)(this.isRtl ? [this.CSS.editorRtlFix] : []))), this.nodes.redactor = v2.default.make("div", this.CSS.editorZone), this.nodes.holder.offsetWidth < this.contentRect.width && this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow), this.nodes.redactor.style.paddingBottom = this.config.minHeight + "px", this.nodes.wrapper.appendChild(this.nodes.redactor), this.nodes.holder.appendChild(this.nodes.wrapper);
              } }, { key: "loadStyles", value: function() {
                var t5 = n2(395);
                if (!v2.default.get("editor-js-styles")) {
                  var e4 = v2.default.make("style", null, { id: "editor-js-styles", textContent: t5.toString() });
                  v2.default.prepend(document.head, e4);
                }
              } }, { key: "enableModuleBindings", value: function() {
                var t5 = this;
                this.readOnlyMutableListeners.on(this.nodes.redactor, "click", function(e4) {
                  t5.redactorClicked(e4);
                }, false), this.readOnlyMutableListeners.on(this.nodes.redactor, "mousedown", function(e4) {
                  t5.documentTouched(e4);
                }, true), this.readOnlyMutableListeners.on(this.nodes.redactor, "touchstart", function(e4) {
                  t5.documentTouched(e4);
                }, true), this.readOnlyMutableListeners.on(document, "keydown", function(e4) {
                  t5.documentKeydown(e4);
                }, true), this.readOnlyMutableListeners.on(document, "click", function(e4) {
                  t5.documentClicked(e4);
                }, true), this.readOnlyMutableListeners.on(document, "selectionchange", function(e4) {
                  t5.selectionChanged(e4);
                }, true), this.readOnlyMutableListeners.on(window, "resize", function() {
                  t5.resizeDebouncer();
                }, { passive: true });
              } }, { key: "disableModuleBindings", value: function() {
                this.readOnlyMutableListeners.clearAll();
              } }, { key: "windowResize", value: function() {
                this.contentRectCache = null, this.checkIsMobile();
              } }, { key: "documentKeydown", value: function(t5) {
                switch (t5.keyCode) {
                  case y2.keyCodes.ENTER:
                    this.enterPressed(t5);
                    break;
                  case y2.keyCodes.BACKSPACE:
                    this.backspacePressed(t5);
                    break;
                  case y2.keyCodes.ESC:
                    this.escapePressed(t5);
                    break;
                  default:
                    this.defaultBehaviour(t5);
                }
              } }, { key: "defaultBehaviour", value: function(t5) {
                var e4 = this.Editor.BlockManager.currentBlock, n3 = t5.target.closest(".".concat(this.CSS.editorWrapper)), o5 = t5.altKey || t5.ctrlKey || t5.metaKey || t5.shiftKey;
                e4 === void 0 || n3 !== null ? n3 || e4 && o5 || (this.Editor.BlockManager.dropPointer(), this.Editor.Toolbar.close()) : this.Editor.BlockEvents.keydown(t5);
              } }, { key: "backspacePressed", value: function(t5) {
                var e4 = this.Editor, n3 = e4.BlockManager, o5 = e4.BlockSelection, r4 = e4.Caret;
                if (o5.anyBlockSelected && !g2.default.isSelectionExists) {
                  var i4 = n3.removeSelectedBlocks();
                  r4.setToBlock(n3.insertDefaultBlockAtIndex(i4, true), r4.positions.START), o5.clearSelection(t5), t5.preventDefault(), t5.stopPropagation(), t5.stopImmediatePropagation();
                }
              } }, { key: "escapePressed", value: function(t5) {
                this.Editor.BlockSelection.clearSelection(t5), this.Editor.Toolbox.opened ? this.Editor.Toolbox.close() : this.Editor.BlockSettings.opened ? this.Editor.BlockSettings.close() : this.Editor.ConversionToolbar.opened ? this.Editor.ConversionToolbar.close() : this.Editor.InlineToolbar.opened ? this.Editor.InlineToolbar.close() : this.Editor.Toolbar.close();
              } }, { key: "enterPressed", value: function(t5) {
                var e4 = this.Editor, n3 = e4.BlockManager, o5 = e4.BlockSelection, r4 = n3.currentBlockIndex >= 0;
                if (o5.anyBlockSelected && !g2.default.isSelectionExists)
                  return o5.clearSelection(t5), t5.preventDefault(), t5.stopImmediatePropagation(), void t5.stopPropagation();
                if (!this.someToolbarOpened && r4 && t5.target.tagName === "BODY") {
                  var i4 = this.Editor.BlockManager.insert();
                  this.Editor.Caret.setToBlock(i4), this.Editor.BlockManager.highlightCurrentNode(), this.Editor.Toolbar.move(), this.Editor.Toolbar.plusButton.show();
                }
                this.Editor.BlockSelection.clearSelection(t5);
              } }, { key: "documentClicked", value: function(t5) {
                if (t5.isTrusted) {
                  var e4 = t5.target;
                  this.nodes.holder.contains(e4) || g2.default.isAtEditor || (this.Editor.BlockManager.dropPointer(), this.Editor.InlineToolbar.close(), this.Editor.Toolbar.close(), this.Editor.ConversionToolbar.close()), this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted || this.Editor.BlockSelection.clearSelection(t5);
                }
              } }, { key: "documentTouched", value: function(t5) {
                var e4 = t5.target;
                if (e4 === this.nodes.redactor) {
                  var n3 = t5 instanceof MouseEvent ? t5.clientX : t5.touches[0].clientX, o5 = t5 instanceof MouseEvent ? t5.clientY : t5.touches[0].clientY;
                  e4 = document.elementFromPoint(n3, o5);
                }
                try {
                  this.Editor.BlockManager.setCurrentBlockByChildNode(e4), this.Editor.BlockManager.highlightCurrentNode();
                } catch (t6) {
                  this.Editor.RectangleSelection.isRectActivated() || this.Editor.Caret.setToTheLastBlock();
                }
                this.Editor.Toolbar.open(), this.Editor.Toolbar.plusButton.hide();
              } }, { key: "redactorClicked", value: function(t5) {
                if (g2.default.isCollapsed) {
                  var e4 = function() {
                    t5.stopImmediatePropagation(), t5.stopPropagation();
                  }, n3 = t5.target, o5 = t5.metaKey || t5.ctrlKey;
                  if (v2.default.isAnchor(n3) && o5) {
                    e4();
                    var r4 = n3.getAttribute("href"), i4 = y2.getValidUrl(r4);
                    y2.openTab(i4);
                  } else
                    this.Editor.BlockManager.currentBlock || (e4(), this.Editor.BlockManager.insert()), this.Editor.BlockManager.currentBlock.tool.isDefault && (e4(), this.Editor.BlockManager.currentBlock.isEmpty && this.Editor.Toolbar.plusButton.show());
                }
              } }, { key: "selectionChanged", value: function(t5) {
                var e4 = this.Editor, n3 = e4.CrossBlockSelection, o5 = e4.BlockSelection, r4 = g2.default.anchorElement;
                n3.isCrossBlockSelectionStarted && o5.anyBlockSelected && g2.default.get().removeAllRanges(), r4 && r4.closest(".".concat(b2.default.CSS.content)) ? (this.Editor.BlockManager.currentBlock || this.Editor.BlockManager.setCurrentBlockByChildNode(r4), this.Editor.InlineToolbar.tryToShow(true)) : this.Editor.InlineToolbar.containsNode(r4) || this.Editor.InlineToolbar.close();
              } }, { key: "appendSVGSprite", value: function() {
                var t5 = v2.default.make("div");
                t5.hidden = true, t5.style.display = "none", t5.innerHTML = p2.default, v2.default.append(this.nodes.wrapper, t5);
              } }, { key: "CSS", get: function() {
                return { editorWrapper: "codex-editor", editorWrapperNarrow: "codex-editor--narrow", editorZone: "codex-editor__redactor", editorZoneHidden: "codex-editor__redactor--hidden", editorLoader: "codex-editor__loader", editorEmpty: "codex-editor--empty", editorRtlFix: "codex-editor--rtl" };
              } }, { key: "contentRect", get: function() {
                if (this.contentRectCache)
                  return this.contentRectCache;
                var t5 = this.nodes.wrapper.querySelector(".".concat(b2.default.CSS.content));
                return t5 ? (this.contentRectCache = t5.getBoundingClientRect(), this.contentRectCache) : { width: 650, left: 0, right: 0 };
              } }, { key: "someToolbarOpened", get: function() {
                var t5 = this.Editor, e4 = t5.Toolbox, n3 = t5.BlockSettings, o5 = t5.InlineToolbar, r4 = t5.ConversionToolbar;
                return n3.opened || o5.opened || r4.opened || e4.opened;
              } }, { key: "someFlipperButtonFocused", get: function() {
                return Object.entries(this.Editor).filter(function(t5) {
                  var e4 = (0, r3.default)(t5, 2);
                  return e4[0], e4[1].flipper instanceof m2.default;
                }).some(function(t5) {
                  var e4 = (0, r3.default)(t5, 2);
                  return e4[0], e4[1].flipper.currentItem;
                });
              } }]), k3;
            }(h2.default);
            o3.default = S2, S2.displayName = "UI", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          n2(184), t3.exports = n2(356);
        }, function(t3, e2, n2) {
          n2(185);
        }, function(t3, e2, n2) {
          "use strict";
          n2(186), n2(329), n2(331), n2(334), n2(336), n2(338), n2(340), n2(342), n2(344), n2(346), n2(348), n2(350), n2(352), n2(140);
        }, function(t3, e2, n2) {
          n2(187), n2(190), n2(191), n2(192), n2(193), n2(194), n2(195), n2(196), n2(197), n2(198), n2(199), n2(200), n2(201), n2(202), n2(203), n2(204), n2(205), n2(206), n2(207), n2(208), n2(209), n2(210), n2(211), n2(212), n2(213), n2(214), n2(215), n2(216), n2(217), n2(218), n2(219), n2(220), n2(221), n2(222), n2(223), n2(224), n2(225), n2(226), n2(227), n2(228), n2(229), n2(230), n2(231), n2(233), n2(234), n2(235), n2(236), n2(237), n2(238), n2(239), n2(240), n2(241), n2(242), n2(243), n2(244), n2(245), n2(246), n2(247), n2(248), n2(249), n2(250), n2(251), n2(252), n2(253), n2(254), n2(255), n2(256), n2(257), n2(258), n2(259), n2(260), n2(261), n2(262), n2(263), n2(264), n2(265), n2(266), n2(268), n2(269), n2(271), n2(272), n2(273), n2(274), n2(275), n2(276), n2(277), n2(279), n2(280), n2(281), n2(282), n2(283), n2(284), n2(285), n2(286), n2(287), n2(288), n2(289), n2(290), n2(291), n2(102), n2(292), n2(129), n2(293), n2(130), n2(294), n2(295), n2(296), n2(297), n2(131), n2(300), n2(301), n2(302), n2(303), n2(304), n2(305), n2(306), n2(307), n2(308), n2(309), n2(310), n2(311), n2(312), n2(313), n2(314), n2(315), n2(316), n2(317), n2(318), n2(319), n2(320), n2(321), n2(322), n2(323), n2(324), n2(325), n2(326), n2(327), n2(328), t3.exports = n2(17);
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(10), r2 = n2(26), i2 = n2(18), a2 = n2(0), s2 = n2(23), c2 = n2(41).KEY, l2 = n2(11), u2 = n2(67), f3 = n2(53), d2 = n2(44), p2 = n2(14), h2 = n2(83), v2 = n2(110), y2 = n2(189), g2 = n2(70), b2 = n2(12), m2 = n2(13), k2 = n2(20), x2 = n2(28), w2 = n2(40), S2 = n2(43), T2 = n2(48), E2 = n2(113), C2 = n2(34), B2 = n2(69), _2 = n2(19), I2 = n2(46), O2 = C2.f, M2 = _2.f, R2 = E2.f, A2 = o2.Symbol, N2 = o2.JSON, P2 = N2 && N2.stringify, L2 = p2("_hidden"), D2 = p2("toPrimitive"), j2 = {}.propertyIsEnumerable, F2 = u2("symbol-registry"), U2 = u2("symbols"), H2 = u2("op-symbols"), z2 = Object.prototype, W2 = typeof A2 == "function" && !!B2.f, Y2 = o2.QObject, V2 = !Y2 || !Y2.prototype || !Y2.prototype.findChild, X2 = i2 && l2(function() {
            return T2(M2({}, "a", { get: function() {
              return M2(this, "a", { value: 7 }).a;
            } })).a != 7;
          }) ? function(t4, e3, n3) {
            var o3 = O2(z2, e3);
            o3 && delete z2[e3], M2(t4, e3, n3), o3 && t4 !== z2 && M2(z2, e3, o3);
          } : M2, G2 = function(t4) {
            var e3 = U2[t4] = T2(A2.prototype);
            return e3._k = t4, e3;
          }, K2 = W2 && typeof A2.iterator == "symbol" ? function(t4) {
            return typeof t4 == "symbol";
          } : function(t4) {
            return t4 instanceof A2;
          }, Z2 = function(t4, e3, n3) {
            return t4 === z2 && Z2(H2, e3, n3), b2(t4), e3 = w2(e3, true), b2(n3), r2(U2, e3) ? (n3.enumerable ? (r2(t4, L2) && t4[L2][e3] && (t4[L2][e3] = false), n3 = T2(n3, { enumerable: S2(0, false) })) : (r2(t4, L2) || M2(t4, L2, S2(1, {})), t4[L2][e3] = true), X2(t4, e3, n3)) : M2(t4, e3, n3);
          }, q2 = function(t4, e3) {
            b2(t4);
            for (var n3, o3 = y2(e3 = x2(e3)), r3 = 0, i3 = o3.length; i3 > r3; )
              Z2(t4, n3 = o3[r3++], e3[n3]);
            return t4;
          }, J2 = function(t4) {
            var e3 = j2.call(this, t4 = w2(t4, true));
            return !(this === z2 && r2(U2, t4) && !r2(H2, t4)) && (!(e3 || !r2(this, t4) || !r2(U2, t4) || r2(this, L2) && this[L2][t4]) || e3);
          }, $3 = function(t4, e3) {
            if (t4 = x2(t4), e3 = w2(e3, true), t4 !== z2 || !r2(U2, e3) || r2(H2, e3)) {
              var n3 = O2(t4, e3);
              return !n3 || !r2(U2, e3) || r2(t4, L2) && t4[L2][e3] || (n3.enumerable = true), n3;
            }
          }, Q2 = function(t4) {
            for (var e3, n3 = R2(x2(t4)), o3 = [], i3 = 0; n3.length > i3; )
              r2(U2, e3 = n3[i3++]) || e3 == L2 || e3 == c2 || o3.push(e3);
            return o3;
          }, tt2 = function(t4) {
            for (var e3, n3 = t4 === z2, o3 = R2(n3 ? H2 : x2(t4)), i3 = [], a3 = 0; o3.length > a3; )
              !r2(U2, e3 = o3[a3++]) || n3 && !r2(z2, e3) || i3.push(U2[e3]);
            return i3;
          };
          W2 || (s2((A2 = function() {
            if (this instanceof A2)
              throw TypeError("Symbol is not a constructor!");
            var t4 = d2(arguments.length > 0 ? arguments[0] : void 0), e3 = function(n3) {
              this === z2 && e3.call(H2, n3), r2(this, L2) && r2(this[L2], t4) && (this[L2][t4] = false), X2(this, t4, S2(1, n3));
            };
            return i2 && V2 && X2(z2, t4, { configurable: true, set: e3 }), G2(t4);
          }).prototype, "toString", function() {
            return this._k;
          }), C2.f = $3, _2.f = Z2, n2(49).f = E2.f = Q2, n2(63).f = J2, B2.f = tt2, i2 && !n2(45) && s2(z2, "propertyIsEnumerable", J2, true), h2.f = function(t4) {
            return G2(p2(t4));
          }), a2(a2.G + a2.W + a2.F * !W2, { Symbol: A2 });
          for (var et2 = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), nt2 = 0; et2.length > nt2; )
            p2(et2[nt2++]);
          for (var ot2 = I2(p2.store), rt2 = 0; ot2.length > rt2; )
            v2(ot2[rt2++]);
          a2(a2.S + a2.F * !W2, "Symbol", { for: function(t4) {
            return r2(F2, t4 += "") ? F2[t4] : F2[t4] = A2(t4);
          }, keyFor: function(t4) {
            if (!K2(t4))
              throw TypeError(t4 + " is not a symbol!");
            for (var e3 in F2)
              if (F2[e3] === t4)
                return e3;
          }, useSetter: function() {
            V2 = true;
          }, useSimple: function() {
            V2 = false;
          } }), a2(a2.S + a2.F * !W2, "Object", { create: function(t4, e3) {
            return e3 === void 0 ? T2(t4) : q2(T2(t4), e3);
          }, defineProperty: Z2, defineProperties: q2, getOwnPropertyDescriptor: $3, getOwnPropertyNames: Q2, getOwnPropertySymbols: tt2 });
          var it2 = l2(function() {
            B2.f(1);
          });
          a2(a2.S + a2.F * it2, "Object", { getOwnPropertySymbols: function(t4) {
            return B2.f(k2(t4));
          } }), N2 && a2(a2.S + a2.F * (!W2 || l2(function() {
            var t4 = A2();
            return P2([t4]) != "[null]" || P2({ a: t4 }) != "{}" || P2(Object(t4)) != "{}";
          })), "JSON", { stringify: function(t4) {
            for (var e3, n3, o3 = [t4], r3 = 1; arguments.length > r3; )
              o3.push(arguments[r3++]);
            if (n3 = e3 = o3[1], (m2(e3) || t4 !== void 0) && !K2(t4))
              return g2(e3) || (e3 = function(t5, e4) {
                if (typeof n3 == "function" && (e4 = n3.call(this, t5, e4)), !K2(e4))
                  return e4;
              }), o3[1] = e3, P2.apply(N2, o3);
          } }), A2.prototype[D2] || n2(27)(A2.prototype, D2, A2.prototype.valueOf), f3(A2, "Symbol"), f3(Math, "Math", true), f3(o2.JSON, "JSON", true);
        }, function(t3, e2, n2) {
          t3.exports = n2(67)("native-function-to-string", Function.toString);
        }, function(t3, e2, n2) {
          var o2 = n2(46), r2 = n2(69), i2 = n2(63);
          t3.exports = function(t4) {
            var e3 = o2(t4), n3 = r2.f;
            if (n3)
              for (var a2, s2 = n3(t4), c2 = i2.f, l2 = 0; s2.length > l2; )
                c2.call(t4, a2 = s2[l2++]) && e3.push(a2);
            return e3;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Object", { create: n2(48) });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S + o2.F * !n2(18), "Object", { defineProperty: n2(19).f });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S + o2.F * !n2(18), "Object", { defineProperties: n2(112) });
        }, function(t3, e2, n2) {
          var o2 = n2(28), r2 = n2(34).f;
          n2(35)("getOwnPropertyDescriptor", function() {
            return function(t4, e3) {
              return r2(o2(t4), e3);
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(20), r2 = n2(50);
          n2(35)("getPrototypeOf", function() {
            return function(t4) {
              return r2(o2(t4));
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(20), r2 = n2(46);
          n2(35)("keys", function() {
            return function(t4) {
              return r2(o2(t4));
            };
          });
        }, function(t3, e2, n2) {
          n2(35)("getOwnPropertyNames", function() {
            return n2(113).f;
          });
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(41).onFreeze;
          n2(35)("freeze", function(t4) {
            return function(e3) {
              return t4 && o2(e3) ? t4(r2(e3)) : e3;
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(41).onFreeze;
          n2(35)("seal", function(t4) {
            return function(e3) {
              return t4 && o2(e3) ? t4(r2(e3)) : e3;
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(41).onFreeze;
          n2(35)("preventExtensions", function(t4) {
            return function(e3) {
              return t4 && o2(e3) ? t4(r2(e3)) : e3;
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(13);
          n2(35)("isFrozen", function(t4) {
            return function(e3) {
              return !o2(e3) || !!t4 && t4(e3);
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(13);
          n2(35)("isSealed", function(t4) {
            return function(e3) {
              return !o2(e3) || !!t4 && t4(e3);
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(13);
          n2(35)("isExtensible", function(t4) {
            return function(e3) {
              return !!o2(e3) && (!t4 || t4(e3));
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S + o2.F, "Object", { assign: n2(114) });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Object", { is: n2(115) });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Object", { setPrototypeOf: n2(87).set });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(64), r2 = {};
          r2[n2(14)("toStringTag")] = "z", r2 + "" != "[object z]" && n2(23)(Object.prototype, "toString", function() {
            return "[object " + o2(this) + "]";
          }, true);
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.P, "Function", { bind: n2(116) });
        }, function(t3, e2, n2) {
          var o2 = n2(19).f, r2 = Function.prototype, i2 = /^\s*function ([^ (]*)/;
          "name" in r2 || n2(18) && o2(r2, "name", { configurable: true, get: function() {
            try {
              return ("" + this).match(i2)[1];
            } catch (t4) {
              return "";
            }
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(13), r2 = n2(50), i2 = n2(14)("hasInstance"), a2 = Function.prototype;
          i2 in a2 || n2(19).f(a2, i2, { value: function(t4) {
            if (typeof this != "function" || !o2(t4))
              return false;
            if (!o2(this.prototype))
              return t4 instanceof this;
            for (; t4 = r2(t4); )
              if (this.prototype === t4)
                return true;
            return false;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(118);
          o2(o2.G + o2.F * (parseInt != r2), { parseInt: r2 });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(119);
          o2(o2.G + o2.F * (parseFloat != r2), { parseFloat: r2 });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(10), r2 = n2(26), i2 = n2(37), a2 = n2(89), s2 = n2(40), c2 = n2(11), l2 = n2(49).f, u2 = n2(34).f, f3 = n2(19).f, d2 = n2(54).trim, p2 = o2.Number, h2 = p2, v2 = p2.prototype, y2 = i2(n2(48)(v2)) == "Number", g2 = "trim" in String.prototype, b2 = function(t4) {
            var e3 = s2(t4, false);
            if (typeof e3 == "string" && e3.length > 2) {
              var n3, o3, r3, i3 = (e3 = g2 ? e3.trim() : d2(e3, 3)).charCodeAt(0);
              if (i3 === 43 || i3 === 45) {
                if ((n3 = e3.charCodeAt(2)) === 88 || n3 === 120)
                  return NaN;
              } else if (i3 === 48) {
                switch (e3.charCodeAt(1)) {
                  case 66:
                  case 98:
                    o3 = 2, r3 = 49;
                    break;
                  case 79:
                  case 111:
                    o3 = 8, r3 = 55;
                    break;
                  default:
                    return +e3;
                }
                for (var a3, c3 = e3.slice(2), l3 = 0, u3 = c3.length; l3 < u3; l3++)
                  if ((a3 = c3.charCodeAt(l3)) < 48 || a3 > r3)
                    return NaN;
                return parseInt(c3, o3);
              }
            }
            return +e3;
          };
          if (!p2(" 0o1") || !p2("0b1") || p2("+0x1")) {
            p2 = function(t4) {
              var e3 = arguments.length < 1 ? 0 : t4, n3 = this;
              return n3 instanceof p2 && (y2 ? c2(function() {
                v2.valueOf.call(n3);
              }) : i2(n3) != "Number") ? a2(new h2(b2(e3)), n3, p2) : b2(e3);
            };
            for (var m2, k2 = n2(18) ? l2(h2) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), x2 = 0; k2.length > x2; x2++)
              r2(h2, m2 = k2[x2]) && !r2(p2, m2) && f3(p2, m2, u2(h2, m2));
            p2.prototype = v2, v2.constructor = p2, n2(23)(o2, "Number", p2);
          }
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(33), i2 = n2(120), a2 = n2(90), s2 = 1 .toFixed, c2 = Math.floor, l2 = [0, 0, 0, 0, 0, 0], u2 = "Number.toFixed: incorrect invocation!", f3 = function(t4, e3) {
            for (var n3 = -1, o3 = e3; ++n3 < 6; )
              o3 += t4 * l2[n3], l2[n3] = o3 % 1e7, o3 = c2(o3 / 1e7);
          }, d2 = function(t4) {
            for (var e3 = 6, n3 = 0; --e3 >= 0; )
              n3 += l2[e3], l2[e3] = c2(n3 / t4), n3 = n3 % t4 * 1e7;
          }, p2 = function() {
            for (var t4 = 6, e3 = ""; --t4 >= 0; )
              if (e3 !== "" || t4 === 0 || l2[t4] !== 0) {
                var n3 = String(l2[t4]);
                e3 = e3 === "" ? n3 : e3 + a2.call("0", 7 - n3.length) + n3;
              }
            return e3;
          }, h2 = function(t4, e3, n3) {
            return e3 === 0 ? n3 : e3 % 2 == 1 ? h2(t4, e3 - 1, n3 * t4) : h2(t4 * t4, e3 / 2, n3);
          };
          o2(o2.P + o2.F * (!!s2 && (8e-5 .toFixed(3) !== "0.000" || 0.9 .toFixed(0) !== "1" || 1.255 .toFixed(2) !== "1.25" || 1000000000000000100 .toFixed(0) !== "1000000000000000128") || !n2(11)(function() {
            s2.call({});
          })), "Number", { toFixed: function(t4) {
            var e3, n3, o3, s3, c3 = i2(this, u2), l3 = r2(t4), v2 = "", y2 = "0";
            if (l3 < 0 || l3 > 20)
              throw RangeError(u2);
            if (c3 != c3)
              return "NaN";
            if (c3 <= -1e21 || c3 >= 1e21)
              return String(c3);
            if (c3 < 0 && (v2 = "-", c3 = -c3), c3 > 1e-21)
              if (n3 = (e3 = function(t5) {
                for (var e4 = 0, n4 = t5; n4 >= 4096; )
                  e4 += 12, n4 /= 4096;
                for (; n4 >= 2; )
                  e4 += 1, n4 /= 2;
                return e4;
              }(c3 * h2(2, 69, 1)) - 69) < 0 ? c3 * h2(2, -e3, 1) : c3 / h2(2, e3, 1), n3 *= 4503599627370496, (e3 = 52 - e3) > 0) {
                for (f3(0, n3), o3 = l3; o3 >= 7; )
                  f3(1e7, 0), o3 -= 7;
                for (f3(h2(10, o3, 1), 0), o3 = e3 - 1; o3 >= 23; )
                  d2(1 << 23), o3 -= 23;
                d2(1 << o3), f3(1, 1), d2(2), y2 = p2();
              } else
                f3(0, n3), f3(1 << -e3, 0), y2 = p2() + a2.call("0", l3);
            return y2 = l3 > 0 ? v2 + ((s3 = y2.length) <= l3 ? "0." + a2.call("0", l3 - s3) + y2 : y2.slice(0, s3 - l3) + "." + y2.slice(s3 - l3)) : v2 + y2;
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(11), i2 = n2(120), a2 = 1 .toPrecision;
          o2(o2.P + o2.F * (r2(function() {
            return a2.call(1, void 0) !== "1";
          }) || !r2(function() {
            a2.call({});
          })), "Number", { toPrecision: function(t4) {
            var e3 = i2(this, "Number#toPrecision: incorrect invocation!");
            return t4 === void 0 ? a2.call(e3) : a2.call(e3, t4);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Number", { EPSILON: Math.pow(2, -52) });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(10).isFinite;
          o2(o2.S, "Number", { isFinite: function(t4) {
            return typeof t4 == "number" && r2(t4);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Number", { isInteger: n2(121) });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Number", { isNaN: function(t4) {
            return t4 != t4;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(121), i2 = Math.abs;
          o2(o2.S, "Number", { isSafeInteger: function(t4) {
            return r2(t4) && i2(t4) <= 9007199254740991;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Number", { MAX_SAFE_INTEGER: 9007199254740991 });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Number", { MIN_SAFE_INTEGER: -9007199254740991 });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(119);
          o2(o2.S + o2.F * (Number.parseFloat != r2), "Number", { parseFloat: r2 });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(118);
          o2(o2.S + o2.F * (Number.parseInt != r2), "Number", { parseInt: r2 });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(122), i2 = Math.sqrt, a2 = Math.acosh;
          o2(o2.S + o2.F * !(a2 && Math.floor(a2(Number.MAX_VALUE)) == 710 && a2(1 / 0) == 1 / 0), "Math", { acosh: function(t4) {
            return (t4 = +t4) < 1 ? NaN : t4 > 9490626562425156e-8 ? Math.log(t4) + Math.LN2 : r2(t4 - 1 + i2(t4 - 1) * i2(t4 + 1));
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = Math.asinh;
          o2(o2.S + o2.F * !(r2 && 1 / r2(0) > 0), "Math", { asinh: function t4(e3) {
            return isFinite(e3 = +e3) && e3 != 0 ? e3 < 0 ? -t4(-e3) : Math.log(e3 + Math.sqrt(e3 * e3 + 1)) : e3;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = Math.atanh;
          o2(o2.S + o2.F * !(r2 && 1 / r2(-0) < 0), "Math", { atanh: function(t4) {
            return (t4 = +t4) == 0 ? t4 : Math.log((1 + t4) / (1 - t4)) / 2;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(91);
          o2(o2.S, "Math", { cbrt: function(t4) {
            return r2(t4 = +t4) * Math.pow(Math.abs(t4), 1 / 3);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Math", { clz32: function(t4) {
            return (t4 >>>= 0) ? 31 - Math.floor(Math.log(t4 + 0.5) * Math.LOG2E) : 32;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = Math.exp;
          o2(o2.S, "Math", { cosh: function(t4) {
            return (r2(t4 = +t4) + r2(-t4)) / 2;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(92);
          o2(o2.S + o2.F * (r2 != Math.expm1), "Math", { expm1: r2 });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Math", { fround: n2(232) });
        }, function(t3, e2, n2) {
          var o2 = n2(91), r2 = Math.pow, i2 = r2(2, -52), a2 = r2(2, -23), s2 = r2(2, 127) * (2 - a2), c2 = r2(2, -126);
          t3.exports = Math.fround || function(t4) {
            var e3, n3, r3 = Math.abs(t4), l2 = o2(t4);
            return r3 < c2 ? l2 * (r3 / c2 / a2 + 1 / i2 - 1 / i2) * c2 * a2 : (n3 = (e3 = (1 + a2 / i2) * r3) - (e3 - r3)) > s2 || n3 != n3 ? l2 * (1 / 0) : l2 * n3;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = Math.abs;
          o2(o2.S, "Math", { hypot: function(t4, e3) {
            for (var n3, o3, i2 = 0, a2 = 0, s2 = arguments.length, c2 = 0; a2 < s2; )
              c2 < (n3 = r2(arguments[a2++])) ? (i2 = i2 * (o3 = c2 / n3) * o3 + 1, c2 = n3) : i2 += n3 > 0 ? (o3 = n3 / c2) * o3 : n3;
            return c2 === 1 / 0 ? 1 / 0 : c2 * Math.sqrt(i2);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = Math.imul;
          o2(o2.S + o2.F * n2(11)(function() {
            return r2(4294967295, 5) != -5 || r2.length != 2;
          }), "Math", { imul: function(t4, e3) {
            var n3 = +t4, o3 = +e3, r3 = 65535 & n3, i2 = 65535 & o3;
            return 0 | r3 * i2 + ((65535 & n3 >>> 16) * i2 + r3 * (65535 & o3 >>> 16) << 16 >>> 0);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Math", { log10: function(t4) {
            return Math.log(t4) * Math.LOG10E;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Math", { log1p: n2(122) });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Math", { log2: function(t4) {
            return Math.log(t4) / Math.LN2;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Math", { sign: n2(91) });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(92), i2 = Math.exp;
          o2(o2.S + o2.F * n2(11)(function() {
            return !Math.sinh(-2e-17) != -2e-17;
          }), "Math", { sinh: function(t4) {
            return Math.abs(t4 = +t4) < 1 ? (r2(t4) - r2(-t4)) / 2 : (i2(t4 - 1) - i2(-t4 - 1)) * (Math.E / 2);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(92), i2 = Math.exp;
          o2(o2.S, "Math", { tanh: function(t4) {
            var e3 = r2(t4 = +t4), n3 = r2(-t4);
            return e3 == 1 / 0 ? 1 : n3 == 1 / 0 ? -1 : (e3 - n3) / (i2(t4) + i2(-t4));
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Math", { trunc: function(t4) {
            return (t4 > 0 ? Math.floor : Math.ceil)(t4);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(47), i2 = String.fromCharCode, a2 = String.fromCodePoint;
          o2(o2.S + o2.F * (!!a2 && a2.length != 1), "String", { fromCodePoint: function(t4) {
            for (var e3, n3 = [], o3 = arguments.length, a3 = 0; o3 > a3; ) {
              if (e3 = +arguments[a3++], r2(e3, 1114111) !== e3)
                throw RangeError(e3 + " is not a valid code point");
              n3.push(e3 < 65536 ? i2(e3) : i2(55296 + ((e3 -= 65536) >> 10), e3 % 1024 + 56320));
            }
            return n3.join("");
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(28), i2 = n2(16);
          o2(o2.S, "String", { raw: function(t4) {
            for (var e3 = r2(t4.raw), n3 = i2(e3.length), o3 = arguments.length, a2 = [], s2 = 0; n3 > s2; )
              a2.push(String(e3[s2++])), s2 < o3 && a2.push(String(arguments[s2]));
            return a2.join("");
          } });
        }, function(t3, e2, n2) {
          "use strict";
          n2(54)("trim", function(t4) {
            return function() {
              return t4(this, 3);
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(93)(true);
          n2(94)(String, "String", function(t4) {
            this._t = String(t4), this._i = 0;
          }, function() {
            var t4, e3 = this._t, n3 = this._i;
            return n3 >= e3.length ? { value: void 0, done: true } : (t4 = o2(e3, n3), this._i += t4.length, { value: t4, done: false });
          });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(93)(false);
          o2(o2.P, "String", { codePointAt: function(t4) {
            return r2(this, t4);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(16), i2 = n2(95), a2 = "".endsWith;
          o2(o2.P + o2.F * n2(97)("endsWith"), "String", { endsWith: function(t4) {
            var e3 = i2(this, t4, "endsWith"), n3 = arguments.length > 1 ? arguments[1] : void 0, o3 = r2(e3.length), s2 = n3 === void 0 ? o3 : Math.min(r2(n3), o3), c2 = String(t4);
            return a2 ? a2.call(e3, c2, s2) : e3.slice(s2 - c2.length, s2) === c2;
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(95);
          o2(o2.P + o2.F * n2(97)("includes"), "String", { includes: function(t4) {
            return !!~r2(this, t4, "includes").indexOf(t4, arguments.length > 1 ? arguments[1] : void 0);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.P, "String", { repeat: n2(90) });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(16), i2 = n2(95), a2 = "".startsWith;
          o2(o2.P + o2.F * n2(97)("startsWith"), "String", { startsWith: function(t4) {
            var e3 = i2(this, t4, "startsWith"), n3 = r2(Math.min(arguments.length > 1 ? arguments[1] : void 0, e3.length)), o3 = String(t4);
            return a2 ? a2.call(e3, o3, n3) : e3.slice(n3, n3 + o3.length) === o3;
          } });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("anchor", function(t4) {
            return function(e3) {
              return t4(this, "a", "name", e3);
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("big", function(t4) {
            return function() {
              return t4(this, "big", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("blink", function(t4) {
            return function() {
              return t4(this, "blink", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("bold", function(t4) {
            return function() {
              return t4(this, "b", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("fixed", function(t4) {
            return function() {
              return t4(this, "tt", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("fontcolor", function(t4) {
            return function(e3) {
              return t4(this, "font", "color", e3);
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("fontsize", function(t4) {
            return function(e3) {
              return t4(this, "font", "size", e3);
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("italics", function(t4) {
            return function() {
              return t4(this, "i", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("link", function(t4) {
            return function(e3) {
              return t4(this, "a", "href", e3);
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("small", function(t4) {
            return function() {
              return t4(this, "small", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("strike", function(t4) {
            return function() {
              return t4(this, "strike", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("sub", function(t4) {
            return function() {
              return t4(this, "sub", "", "");
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          n2(24)("sup", function(t4) {
            return function() {
              return t4(this, "sup", "", "");
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Date", { now: function() {
            return new Date().getTime();
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(20), i2 = n2(40);
          o2(o2.P + o2.F * n2(11)(function() {
            return new Date(NaN).toJSON() !== null || Date.prototype.toJSON.call({ toISOString: function() {
              return 1;
            } }) !== 1;
          }), "Date", { toJSON: function(t4) {
            var e3 = r2(this), n3 = i2(e3);
            return typeof n3 != "number" || isFinite(n3) ? e3.toISOString() : null;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(267);
          o2(o2.P + o2.F * (Date.prototype.toISOString !== r2), "Date", { toISOString: r2 });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(11), r2 = Date.prototype.getTime, i2 = Date.prototype.toISOString, a2 = function(t4) {
            return t4 > 9 ? t4 : "0" + t4;
          };
          t3.exports = o2(function() {
            return i2.call(new Date(-50000000000001)) != "0385-07-25T07:06:39.999Z";
          }) || !o2(function() {
            i2.call(new Date(NaN));
          }) ? function() {
            if (!isFinite(r2.call(this)))
              throw RangeError("Invalid time value");
            var t4 = this, e3 = t4.getUTCFullYear(), n3 = t4.getUTCMilliseconds(), o3 = e3 < 0 ? "-" : e3 > 9999 ? "+" : "";
            return o3 + ("00000" + Math.abs(e3)).slice(o3 ? -6 : -4) + "-" + a2(t4.getUTCMonth() + 1) + "-" + a2(t4.getUTCDate()) + "T" + a2(t4.getUTCHours()) + ":" + a2(t4.getUTCMinutes()) + ":" + a2(t4.getUTCSeconds()) + "." + (n3 > 99 ? n3 : "0" + a2(n3)) + "Z";
          } : i2;
        }, function(t3, e2, n2) {
          var o2 = Date.prototype, r2 = o2.toString, i2 = o2.getTime;
          new Date(NaN) + "" != "Invalid Date" && n2(23)(o2, "toString", function() {
            var t4 = i2.call(this);
            return t4 == t4 ? r2.call(this) : "Invalid Date";
          });
        }, function(t3, e2, n2) {
          var o2 = n2(14)("toPrimitive"), r2 = Date.prototype;
          o2 in r2 || n2(27)(r2, o2, n2(270));
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(12), r2 = n2(40);
          t3.exports = function(t4) {
            if (t4 !== "string" && t4 !== "number" && t4 !== "default")
              throw TypeError("Incorrect hint");
            return r2(o2(this), t4 != "number");
          };
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Array", { isArray: n2(70) });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(31), r2 = n2(0), i2 = n2(20), a2 = n2(124), s2 = n2(98), c2 = n2(16), l2 = n2(99), u2 = n2(100);
          r2(r2.S + r2.F * !n2(71)(function(t4) {
            Array.from(t4);
          }), "Array", { from: function(t4) {
            var e3, n3, r3, f3, d2 = i2(t4), p2 = typeof this == "function" ? this : Array, h2 = arguments.length, v2 = h2 > 1 ? arguments[1] : void 0, y2 = v2 !== void 0, g2 = 0, b2 = u2(d2);
            if (y2 && (v2 = o2(v2, h2 > 2 ? arguments[2] : void 0, 2)), b2 == null || p2 == Array && s2(b2))
              for (n3 = new p2(e3 = c2(d2.length)); e3 > g2; g2++)
                l2(n3, g2, y2 ? v2(d2[g2], g2) : d2[g2]);
            else
              for (f3 = b2.call(d2), n3 = new p2(); !(r3 = f3.next()).done; g2++)
                l2(n3, g2, y2 ? a2(f3, v2, [r3.value, g2], true) : r3.value);
            return n3.length = g2, n3;
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(99);
          o2(o2.S + o2.F * n2(11)(function() {
            function t4() {
            }
            return !(Array.of.call(t4) instanceof t4);
          }), "Array", { of: function() {
            for (var t4 = 0, e3 = arguments.length, n3 = new (typeof this == "function" ? this : Array)(e3); e3 > t4; )
              r2(n3, t4, arguments[t4++]);
            return n3.length = e3, n3;
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(28), i2 = [].join;
          o2(o2.P + o2.F * (n2(62) != Object || !n2(30)(i2)), "Array", { join: function(t4) {
            return i2.call(r2(this), t4 === void 0 ? "," : t4);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(86), i2 = n2(37), a2 = n2(47), s2 = n2(16), c2 = [].slice;
          o2(o2.P + o2.F * n2(11)(function() {
            r2 && c2.call(r2);
          }), "Array", { slice: function(t4, e3) {
            var n3 = s2(this.length), o3 = i2(this);
            if (e3 = e3 === void 0 ? n3 : e3, o3 == "Array")
              return c2.call(this, t4, e3);
            for (var r3 = a2(t4, n3), l2 = a2(e3, n3), u2 = s2(l2 - r3), f3 = new Array(u2), d2 = 0; d2 < u2; d2++)
              f3[d2] = o3 == "String" ? this.charAt(r3 + d2) : this[r3 + d2];
            return f3;
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(32), i2 = n2(20), a2 = n2(11), s2 = [].sort, c2 = [1, 2, 3];
          o2(o2.P + o2.F * (a2(function() {
            c2.sort(void 0);
          }) || !a2(function() {
            c2.sort(null);
          }) || !n2(30)(s2)), "Array", { sort: function(t4) {
            return t4 === void 0 ? s2.call(i2(this)) : s2.call(i2(this), r2(t4));
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(36)(0), i2 = n2(30)([].forEach, true);
          o2(o2.P + o2.F * !i2, "Array", { forEach: function(t4) {
            return r2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(13), r2 = n2(70), i2 = n2(14)("species");
          t3.exports = function(t4) {
            var e3;
            return r2(t4) && (typeof (e3 = t4.constructor) != "function" || e3 !== Array && !r2(e3.prototype) || (e3 = void 0), o2(e3) && (e3 = e3[i2]) === null && (e3 = void 0)), e3 === void 0 ? Array : e3;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(36)(1);
          o2(o2.P + o2.F * !n2(30)([].map, true), "Array", { map: function(t4) {
            return r2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(36)(2);
          o2(o2.P + o2.F * !n2(30)([].filter, true), "Array", { filter: function(t4) {
            return r2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(36)(3);
          o2(o2.P + o2.F * !n2(30)([].some, true), "Array", { some: function(t4) {
            return r2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(36)(4);
          o2(o2.P + o2.F * !n2(30)([].every, true), "Array", { every: function(t4) {
            return r2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(126);
          o2(o2.P + o2.F * !n2(30)([].reduce, true), "Array", { reduce: function(t4) {
            return r2(this, t4, arguments.length, arguments[1], false);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(126);
          o2(o2.P + o2.F * !n2(30)([].reduceRight, true), "Array", { reduceRight: function(t4) {
            return r2(this, t4, arguments.length, arguments[1], true);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(68)(false), i2 = [].indexOf, a2 = !!i2 && 1 / [1].indexOf(1, -0) < 0;
          o2(o2.P + o2.F * (a2 || !n2(30)(i2)), "Array", { indexOf: function(t4) {
            return a2 ? i2.apply(this, arguments) || 0 : r2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(28), i2 = n2(33), a2 = n2(16), s2 = [].lastIndexOf, c2 = !!s2 && 1 / [1].lastIndexOf(1, -0) < 0;
          o2(o2.P + o2.F * (c2 || !n2(30)(s2)), "Array", { lastIndexOf: function(t4) {
            if (c2)
              return s2.apply(this, arguments) || 0;
            var e3 = r2(this), n3 = a2(e3.length), o3 = n3 - 1;
            for (arguments.length > 1 && (o3 = Math.min(o3, i2(arguments[1]))), o3 < 0 && (o3 = n3 + o3); o3 >= 0; o3--)
              if (o3 in e3 && e3[o3] === t4)
                return o3 || 0;
            return -1;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.P, "Array", { copyWithin: n2(127) }), n2(51)("copyWithin");
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.P, "Array", { fill: n2(101) }), n2(51)("fill");
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(36)(5), i2 = true;
          "find" in [] && Array(1).find(function() {
            i2 = false;
          }), o2(o2.P + o2.F * i2, "Array", { find: function(t4) {
            return r2(this, t4, arguments.length > 1 ? arguments[1] : void 0);
          } }), n2(51)("find");
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(36)(6), i2 = "findIndex", a2 = true;
          i2 in [] && Array(1)[i2](function() {
            a2 = false;
          }), o2(o2.P + o2.F * a2, "Array", { findIndex: function(t4) {
            return r2(this, t4, arguments.length > 1 ? arguments[1] : void 0);
          } }), n2(51)(i2);
        }, function(t3, e2, n2) {
          n2(56)("Array");
        }, function(t3, e2, n2) {
          var o2 = n2(10), r2 = n2(89), i2 = n2(19).f, a2 = n2(49).f, s2 = n2(96), c2 = n2(72), l2 = o2.RegExp, u2 = l2, f3 = l2.prototype, d2 = /a/g, p2 = /a/g, h2 = new l2(d2) !== d2;
          if (n2(18) && (!h2 || n2(11)(function() {
            return p2[n2(14)("match")] = false, l2(d2) != d2 || l2(p2) == p2 || l2(d2, "i") != "/a/i";
          }))) {
            l2 = function(t4, e3) {
              var n3 = this instanceof l2, o3 = s2(t4), i3 = e3 === void 0;
              return !n3 && o3 && t4.constructor === l2 && i3 ? t4 : r2(h2 ? new u2(o3 && !i3 ? t4.source : t4, e3) : u2((o3 = t4 instanceof l2) ? t4.source : t4, o3 && i3 ? c2.call(t4) : e3), n3 ? this : f3, l2);
            };
            for (var v2 = function(t4) {
              t4 in l2 || i2(l2, t4, { configurable: true, get: function() {
                return u2[t4];
              }, set: function(e3) {
                u2[t4] = e3;
              } });
            }, y2 = a2(u2), g2 = 0; y2.length > g2; )
              v2(y2[g2++]);
            f3.constructor = l2, l2.prototype = f3, n2(23)(o2, "RegExp", l2);
          }
          n2(56)("RegExp");
        }, function(t3, e2, n2) {
          "use strict";
          n2(130);
          var o2 = n2(12), r2 = n2(72), i2 = n2(18), a2 = /./.toString, s2 = function(t4) {
            n2(23)(RegExp.prototype, "toString", t4, true);
          };
          n2(11)(function() {
            return a2.call({ source: "a", flags: "b" }) != "/a/b";
          }) ? s2(function() {
            var t4 = o2(this);
            return "/".concat(t4.source, "/", "flags" in t4 ? t4.flags : !i2 && t4 instanceof RegExp ? r2.call(t4) : void 0);
          }) : a2.name != "toString" && s2(function() {
            return a2.call(this);
          });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(12), r2 = n2(16), i2 = n2(104), a2 = n2(73);
          n2(74)("match", 1, function(t4, e3, n3, s2) {
            return [function(n4) {
              var o3 = t4(this), r3 = n4 == null ? void 0 : n4[e3];
              return r3 !== void 0 ? r3.call(n4, o3) : new RegExp(n4)[e3](String(o3));
            }, function(t5) {
              var e4 = s2(n3, t5, this);
              if (e4.done)
                return e4.value;
              var c2 = o2(t5), l2 = String(this);
              if (!c2.global)
                return a2(c2, l2);
              var u2 = c2.unicode;
              c2.lastIndex = 0;
              for (var f3, d2 = [], p2 = 0; (f3 = a2(c2, l2)) !== null; ) {
                var h2 = String(f3[0]);
                d2[p2] = h2, h2 === "" && (c2.lastIndex = i2(l2, r2(c2.lastIndex), u2)), p2++;
              }
              return p2 === 0 ? null : d2;
            }];
          });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(12), r2 = n2(20), i2 = n2(16), a2 = n2(33), s2 = n2(104), c2 = n2(73), l2 = Math.max, u2 = Math.min, f3 = Math.floor, d2 = /\$([$&`']|\d\d?|<[^>]*>)/g, p2 = /\$([$&`']|\d\d?)/g;
          n2(74)("replace", 2, function(t4, e3, n3, h2) {
            return [function(o3, r3) {
              var i3 = t4(this), a3 = o3 == null ? void 0 : o3[e3];
              return a3 !== void 0 ? a3.call(o3, i3, r3) : n3.call(String(i3), o3, r3);
            }, function(t5, e4) {
              var r3 = h2(n3, t5, this, e4);
              if (r3.done)
                return r3.value;
              var f4 = o2(t5), d3 = String(this), p3 = typeof e4 == "function";
              p3 || (e4 = String(e4));
              var y2 = f4.global;
              if (y2) {
                var g2 = f4.unicode;
                f4.lastIndex = 0;
              }
              for (var b2 = []; ; ) {
                var m2 = c2(f4, d3);
                if (m2 === null)
                  break;
                if (b2.push(m2), !y2)
                  break;
                String(m2[0]) === "" && (f4.lastIndex = s2(d3, i2(f4.lastIndex), g2));
              }
              for (var k2, x2 = "", w2 = 0, S2 = 0; S2 < b2.length; S2++) {
                m2 = b2[S2];
                for (var T2 = String(m2[0]), E2 = l2(u2(a2(m2.index), d3.length), 0), C2 = [], B2 = 1; B2 < m2.length; B2++)
                  C2.push((k2 = m2[B2]) === void 0 ? k2 : String(k2));
                var _2 = m2.groups;
                if (p3) {
                  var I2 = [T2].concat(C2, E2, d3);
                  _2 !== void 0 && I2.push(_2);
                  var O2 = String(e4.apply(void 0, I2));
                } else
                  O2 = v2(T2, d3, E2, C2, _2, e4);
                E2 >= w2 && (x2 += d3.slice(w2, E2) + O2, w2 = E2 + T2.length);
              }
              return x2 + d3.slice(w2);
            }];
            function v2(t5, e4, o3, i3, a3, s3) {
              var c3 = o3 + t5.length, l3 = i3.length, u3 = p2;
              return a3 !== void 0 && (a3 = r2(a3), u3 = d2), n3.call(s3, u3, function(n4, r3) {
                var s4;
                switch (r3.charAt(0)) {
                  case "$":
                    return "$";
                  case "&":
                    return t5;
                  case "`":
                    return e4.slice(0, o3);
                  case "'":
                    return e4.slice(c3);
                  case "<":
                    s4 = a3[r3.slice(1, -1)];
                    break;
                  default:
                    var u4 = +r3;
                    if (u4 === 0)
                      return n4;
                    if (u4 > l3) {
                      var d3 = f3(u4 / 10);
                      return d3 === 0 ? n4 : d3 <= l3 ? i3[d3 - 1] === void 0 ? r3.charAt(1) : i3[d3 - 1] + r3.charAt(1) : n4;
                    }
                    s4 = i3[u4 - 1];
                }
                return s4 === void 0 ? "" : s4;
              });
            }
          });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(12), r2 = n2(115), i2 = n2(73);
          n2(74)("search", 1, function(t4, e3, n3, a2) {
            return [function(n4) {
              var o3 = t4(this), r3 = n4 == null ? void 0 : n4[e3];
              return r3 !== void 0 ? r3.call(n4, o3) : new RegExp(n4)[e3](String(o3));
            }, function(t5) {
              var e4 = a2(n3, t5, this);
              if (e4.done)
                return e4.value;
              var s2 = o2(t5), c2 = String(this), l2 = s2.lastIndex;
              r2(l2, 0) || (s2.lastIndex = 0);
              var u2 = i2(s2, c2);
              return r2(s2.lastIndex, l2) || (s2.lastIndex = l2), u2 === null ? -1 : u2.index;
            }];
          });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(96), r2 = n2(12), i2 = n2(65), a2 = n2(104), s2 = n2(16), c2 = n2(73), l2 = n2(103), u2 = n2(11), f3 = Math.min, d2 = [].push, p2 = "length", h2 = !u2(function() {
            RegExp(4294967295, "y");
          });
          n2(74)("split", 2, function(t4, e3, n3, u3) {
            var v2;
            return v2 = "abbc".split(/(b)*/)[1] == "c" || "test".split(/(?:)/, -1)[p2] != 4 || "ab".split(/(?:ab)*/)[p2] != 2 || ".".split(/(.?)(.?)/)[p2] != 4 || ".".split(/()()/)[p2] > 1 || "".split(/.?/)[p2] ? function(t5, e4) {
              var r3 = String(this);
              if (t5 === void 0 && e4 === 0)
                return [];
              if (!o2(t5))
                return n3.call(r3, t5, e4);
              for (var i3, a3, s3, c3 = [], u4 = (t5.ignoreCase ? "i" : "") + (t5.multiline ? "m" : "") + (t5.unicode ? "u" : "") + (t5.sticky ? "y" : ""), f4 = 0, h3 = e4 === void 0 ? 4294967295 : e4 >>> 0, v3 = new RegExp(t5.source, u4 + "g"); (i3 = l2.call(v3, r3)) && !((a3 = v3.lastIndex) > f4 && (c3.push(r3.slice(f4, i3.index)), i3[p2] > 1 && i3.index < r3[p2] && d2.apply(c3, i3.slice(1)), s3 = i3[0][p2], f4 = a3, c3[p2] >= h3)); )
                v3.lastIndex === i3.index && v3.lastIndex++;
              return f4 === r3[p2] ? !s3 && v3.test("") || c3.push("") : c3.push(r3.slice(f4)), c3[p2] > h3 ? c3.slice(0, h3) : c3;
            } : "0".split(void 0, 0)[p2] ? function(t5, e4) {
              return t5 === void 0 && e4 === 0 ? [] : n3.call(this, t5, e4);
            } : n3, [function(n4, o3) {
              var r3 = t4(this), i3 = n4 == null ? void 0 : n4[e3];
              return i3 !== void 0 ? i3.call(n4, r3, o3) : v2.call(String(r3), n4, o3);
            }, function(t5, e4) {
              var o3 = u3(v2, t5, this, e4, v2 !== n3);
              if (o3.done)
                return o3.value;
              var l3 = r2(t5), d3 = String(this), p3 = i2(l3, RegExp), y2 = l3.unicode, g2 = (l3.ignoreCase ? "i" : "") + (l3.multiline ? "m" : "") + (l3.unicode ? "u" : "") + (h2 ? "y" : "g"), b2 = new p3(h2 ? l3 : "^(?:" + l3.source + ")", g2), m2 = e4 === void 0 ? 4294967295 : e4 >>> 0;
              if (m2 === 0)
                return [];
              if (d3.length === 0)
                return c2(b2, d3) === null ? [d3] : [];
              for (var k2 = 0, x2 = 0, w2 = []; x2 < d3.length; ) {
                b2.lastIndex = h2 ? x2 : 0;
                var S2, T2 = c2(b2, h2 ? d3 : d3.slice(x2));
                if (T2 === null || (S2 = f3(s2(b2.lastIndex + (h2 ? 0 : x2)), d3.length)) === k2)
                  x2 = a2(d3, x2, y2);
                else {
                  if (w2.push(d3.slice(k2, x2)), w2.length === m2)
                    return w2;
                  for (var E2 = 1; E2 <= T2.length - 1; E2++)
                    if (w2.push(T2[E2]), w2.length === m2)
                      return w2;
                  x2 = k2 = S2;
                }
              }
              return w2.push(d3.slice(k2)), w2;
            }];
          });
        }, function(t3, e2, n2) {
          var o2 = n2(10), r2 = n2(105).set, i2 = o2.MutationObserver || o2.WebKitMutationObserver, a2 = o2.process, s2 = o2.Promise, c2 = n2(37)(a2) == "process";
          t3.exports = function() {
            var t4, e3, n3, l2 = function() {
              var o3, r3;
              for (c2 && (o3 = a2.domain) && o3.exit(); t4; ) {
                r3 = t4.fn, t4 = t4.next;
                try {
                  r3();
                } catch (o4) {
                  throw t4 ? n3() : e3 = void 0, o4;
                }
              }
              e3 = void 0, o3 && o3.enter();
            };
            if (c2)
              n3 = function() {
                a2.nextTick(l2);
              };
            else if (!i2 || o2.navigator && o2.navigator.standalone)
              if (s2 && s2.resolve) {
                var u2 = s2.resolve(void 0);
                n3 = function() {
                  u2.then(l2);
                };
              } else
                n3 = function() {
                  r2.call(o2, l2);
                };
            else {
              var f3 = true, d2 = document.createTextNode("");
              new i2(l2).observe(d2, { characterData: true }), n3 = function() {
                d2.data = f3 = !f3;
              };
            }
            return function(o3) {
              var r3 = { fn: o3, next: void 0 };
              e3 && (e3.next = r3), t4 || (t4 = r3, n3()), e3 = r3;
            };
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            try {
              return { e: false, v: t4() };
            } catch (t5) {
              return { e: true, v: t5 };
            }
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(134), r2 = n2(52);
          t3.exports = n2(77)("Map", function(t4) {
            return function() {
              return t4(this, arguments.length > 0 ? arguments[0] : void 0);
            };
          }, { get: function(t4) {
            var e3 = o2.getEntry(r2(this, "Map"), t4);
            return e3 && e3.v;
          }, set: function(t4, e3) {
            return o2.def(r2(this, "Map"), t4 === 0 ? 0 : t4, e3);
          } }, o2, true);
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(134), r2 = n2(52);
          t3.exports = n2(77)("Set", function(t4) {
            return function() {
              return t4(this, arguments.length > 0 ? arguments[0] : void 0);
            };
          }, { add: function(t4) {
            return o2.def(r2(this, "Set"), t4 = t4 === 0 ? 0 : t4, t4);
          } }, o2);
        }, function(t3, e2, n2) {
          "use strict";
          var o2, r2 = n2(10), i2 = n2(36)(0), a2 = n2(23), s2 = n2(41), c2 = n2(114), l2 = n2(135), u2 = n2(13), f3 = n2(52), d2 = n2(52), p2 = !r2.ActiveXObject && "ActiveXObject" in r2, h2 = s2.getWeak, v2 = Object.isExtensible, y2 = l2.ufstore, g2 = function(t4) {
            return function() {
              return t4(this, arguments.length > 0 ? arguments[0] : void 0);
            };
          }, b2 = { get: function(t4) {
            if (u2(t4)) {
              var e3 = h2(t4);
              return e3 === true ? y2(f3(this, "WeakMap")).get(t4) : e3 ? e3[this._i] : void 0;
            }
          }, set: function(t4, e3) {
            return l2.def(f3(this, "WeakMap"), t4, e3);
          } }, m2 = t3.exports = n2(77)("WeakMap", g2, b2, l2, true, true);
          d2 && p2 && (c2((o2 = l2.getConstructor(g2, "WeakMap")).prototype, b2), s2.NEED = true, i2(["delete", "has", "get", "set"], function(t4) {
            var e3 = m2.prototype, n3 = e3[t4];
            a2(e3, t4, function(e4, r3) {
              if (u2(e4) && !v2(e4)) {
                this._f || (this._f = new o2());
                var i3 = this._f[t4](e4, r3);
                return t4 == "set" ? this : i3;
              }
              return n3.call(this, e4, r3);
            });
          }));
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(135), r2 = n2(52);
          n2(77)("WeakSet", function(t4) {
            return function() {
              return t4(this, arguments.length > 0 ? arguments[0] : void 0);
            };
          }, { add: function(t4) {
            return o2.def(r2(this, "WeakSet"), t4, true);
          } }, o2, false, true);
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(78), i2 = n2(106), a2 = n2(12), s2 = n2(47), c2 = n2(16), l2 = n2(13), u2 = n2(10).ArrayBuffer, f3 = n2(65), d2 = i2.ArrayBuffer, p2 = i2.DataView, h2 = r2.ABV && u2.isView, v2 = d2.prototype.slice, y2 = r2.VIEW;
          o2(o2.G + o2.W + o2.F * (u2 !== d2), { ArrayBuffer: d2 }), o2(o2.S + o2.F * !r2.CONSTR, "ArrayBuffer", { isView: function(t4) {
            return h2 && h2(t4) || l2(t4) && y2 in t4;
          } }), o2(o2.P + o2.U + o2.F * n2(11)(function() {
            return !new d2(2).slice(1, void 0).byteLength;
          }), "ArrayBuffer", { slice: function(t4, e3) {
            if (v2 !== void 0 && e3 === void 0)
              return v2.call(a2(this), t4);
            for (var n3 = a2(this).byteLength, o3 = s2(t4, n3), r3 = s2(e3 === void 0 ? n3 : e3, n3), i3 = new (f3(this, d2))(c2(r3 - o3)), l3 = new p2(this), u3 = new p2(i3), h3 = 0; o3 < r3; )
              u3.setUint8(h3++, l3.getUint8(o3++));
            return i3;
          } }), n2(56)("ArrayBuffer");
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.G + o2.W + o2.F * !n2(78).ABV, { DataView: n2(106).DataView });
        }, function(t3, e2, n2) {
          n2(39)("Int8", 1, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          n2(39)("Uint8", 1, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          n2(39)("Uint8", 1, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          }, true);
        }, function(t3, e2, n2) {
          n2(39)("Int16", 2, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          n2(39)("Uint16", 2, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          n2(39)("Int32", 4, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          n2(39)("Uint32", 4, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          n2(39)("Float32", 4, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          n2(39)("Float64", 8, function(t4) {
            return function(e3, n3, o2) {
              return t4(this, e3, n3, o2);
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(32), i2 = n2(12), a2 = (n2(10).Reflect || {}).apply, s2 = Function.apply;
          o2(o2.S + o2.F * !n2(11)(function() {
            a2(function() {
            });
          }), "Reflect", { apply: function(t4, e3, n3) {
            var o3 = r2(t4), c2 = i2(n3);
            return a2 ? a2(o3, e3, c2) : s2.call(o3, e3, c2);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(48), i2 = n2(32), a2 = n2(12), s2 = n2(13), c2 = n2(11), l2 = n2(116), u2 = (n2(10).Reflect || {}).construct, f3 = c2(function() {
            function t4() {
            }
            return !(u2(function() {
            }, [], t4) instanceof t4);
          }), d2 = !c2(function() {
            u2(function() {
            });
          });
          o2(o2.S + o2.F * (f3 || d2), "Reflect", { construct: function(t4, e3) {
            i2(t4), a2(e3);
            var n3 = arguments.length < 3 ? t4 : i2(arguments[2]);
            if (d2 && !f3)
              return u2(t4, e3, n3);
            if (t4 == n3) {
              switch (e3.length) {
                case 0:
                  return new t4();
                case 1:
                  return new t4(e3[0]);
                case 2:
                  return new t4(e3[0], e3[1]);
                case 3:
                  return new t4(e3[0], e3[1], e3[2]);
                case 4:
                  return new t4(e3[0], e3[1], e3[2], e3[3]);
              }
              var o3 = [null];
              return o3.push.apply(o3, e3), new (l2.apply(t4, o3))();
            }
            var c3 = n3.prototype, p2 = r2(s2(c3) ? c3 : Object.prototype), h2 = Function.apply.call(t4, p2, e3);
            return s2(h2) ? h2 : p2;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(19), r2 = n2(0), i2 = n2(12), a2 = n2(40);
          r2(r2.S + r2.F * n2(11)(function() {
            Reflect.defineProperty(o2.f({}, 1, { value: 1 }), 1, { value: 2 });
          }), "Reflect", { defineProperty: function(t4, e3, n3) {
            i2(t4), e3 = a2(e3, true), i2(n3);
            try {
              return o2.f(t4, e3, n3), true;
            } catch (t5) {
              return false;
            }
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(34).f, i2 = n2(12);
          o2(o2.S, "Reflect", { deleteProperty: function(t4, e3) {
            var n3 = r2(i2(t4), e3);
            return !(n3 && !n3.configurable) && delete t4[e3];
          } });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(12), i2 = function(t4) {
            this._t = r2(t4), this._i = 0;
            var e3, n3 = this._k = [];
            for (e3 in t4)
              n3.push(e3);
          };
          n2(123)(i2, "Object", function() {
            var t4, e3 = this._k;
            do {
              if (this._i >= e3.length)
                return { value: void 0, done: true };
            } while (!((t4 = e3[this._i++]) in this._t));
            return { value: t4, done: false };
          }), o2(o2.S, "Reflect", { enumerate: function(t4) {
            return new i2(t4);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(34), r2 = n2(50), i2 = n2(26), a2 = n2(0), s2 = n2(13), c2 = n2(12);
          a2(a2.S, "Reflect", { get: function t4(e3, n3) {
            var a3, l2, u2 = arguments.length < 3 ? e3 : arguments[2];
            return c2(e3) === u2 ? e3[n3] : (a3 = o2.f(e3, n3)) ? i2(a3, "value") ? a3.value : a3.get !== void 0 ? a3.get.call(u2) : void 0 : s2(l2 = r2(e3)) ? t4(l2, n3, u2) : void 0;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(34), r2 = n2(0), i2 = n2(12);
          r2(r2.S, "Reflect", { getOwnPropertyDescriptor: function(t4, e3) {
            return o2.f(i2(t4), e3);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(50), i2 = n2(12);
          o2(o2.S, "Reflect", { getPrototypeOf: function(t4) {
            return r2(i2(t4));
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Reflect", { has: function(t4, e3) {
            return e3 in t4;
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(12), i2 = Object.isExtensible;
          o2(o2.S, "Reflect", { isExtensible: function(t4) {
            return r2(t4), !i2 || i2(t4);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Reflect", { ownKeys: n2(137) });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(12), i2 = Object.preventExtensions;
          o2(o2.S, "Reflect", { preventExtensions: function(t4) {
            r2(t4);
            try {
              return i2 && i2(t4), true;
            } catch (t5) {
              return false;
            }
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(19), r2 = n2(34), i2 = n2(50), a2 = n2(26), s2 = n2(0), c2 = n2(43), l2 = n2(12), u2 = n2(13);
          s2(s2.S, "Reflect", { set: function t4(e3, n3, s3) {
            var f3, d2, p2 = arguments.length < 4 ? e3 : arguments[3], h2 = r2.f(l2(e3), n3);
            if (!h2) {
              if (u2(d2 = i2(e3)))
                return t4(d2, n3, s3, p2);
              h2 = c2(0);
            }
            if (a2(h2, "value")) {
              if (h2.writable === false || !u2(p2))
                return false;
              if (f3 = r2.f(p2, n3)) {
                if (f3.get || f3.set || f3.writable === false)
                  return false;
                f3.value = s3, o2.f(p2, n3, f3);
              } else
                o2.f(p2, n3, c2(0, s3));
              return true;
            }
            return h2.set !== void 0 && (h2.set.call(p2, s3), true);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(87);
          r2 && o2(o2.S, "Reflect", { setPrototypeOf: function(t4, e3) {
            r2.check(t4, e3);
            try {
              return r2.set(t4, e3), true;
            } catch (t5) {
              return false;
            }
          } });
        }, function(t3, e2, n2) {
          n2(330), t3.exports = n2(17).Array.includes;
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(68)(true);
          o2(o2.P, "Array", { includes: function(t4) {
            return r2(this, t4, arguments.length > 1 ? arguments[1] : void 0);
          } }), n2(51)("includes");
        }, function(t3, e2, n2) {
          n2(332), t3.exports = n2(17).Array.flatMap;
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(333), i2 = n2(20), a2 = n2(16), s2 = n2(32), c2 = n2(125);
          o2(o2.P, "Array", { flatMap: function(t4) {
            var e3, n3, o3 = i2(this);
            return s2(t4), e3 = a2(o3.length), n3 = c2(o3, 0), r2(n3, o3, o3, e3, 0, 1, t4, arguments[1]), n3;
          } }), n2(51)("flatMap");
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(70), r2 = n2(13), i2 = n2(16), a2 = n2(31), s2 = n2(14)("isConcatSpreadable");
          t3.exports = function t4(e3, n3, c2, l2, u2, f3, d2, p2) {
            for (var h2, v2, y2 = u2, g2 = 0, b2 = !!d2 && a2(d2, p2, 3); g2 < l2; ) {
              if (g2 in c2) {
                if (h2 = b2 ? b2(c2[g2], g2, n3) : c2[g2], v2 = false, r2(h2) && (v2 = (v2 = h2[s2]) !== void 0 ? !!v2 : o2(h2)), v2 && f3 > 0)
                  y2 = t4(e3, n3, h2, i2(h2.length), y2, f3 - 1) - 1;
                else {
                  if (y2 >= 9007199254740991)
                    throw TypeError();
                  e3[y2] = h2;
                }
                y2++;
              }
              g2++;
            }
            return y2;
          };
        }, function(t3, e2, n2) {
          n2(335), t3.exports = n2(17).String.padStart;
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(138), i2 = n2(76), a2 = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i2);
          o2(o2.P + o2.F * a2, "String", { padStart: function(t4) {
            return r2(this, t4, arguments.length > 1 ? arguments[1] : void 0, true);
          } });
        }, function(t3, e2, n2) {
          n2(337), t3.exports = n2(17).String.padEnd;
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(138), i2 = n2(76), a2 = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i2);
          o2(o2.P + o2.F * a2, "String", { padEnd: function(t4) {
            return r2(this, t4, arguments.length > 1 ? arguments[1] : void 0, false);
          } });
        }, function(t3, e2, n2) {
          n2(339), t3.exports = n2(17).String.trimLeft;
        }, function(t3, e2, n2) {
          "use strict";
          n2(54)("trimLeft", function(t4) {
            return function() {
              return t4(this, 1);
            };
          }, "trimStart");
        }, function(t3, e2, n2) {
          n2(341), t3.exports = n2(17).String.trimRight;
        }, function(t3, e2, n2) {
          "use strict";
          n2(54)("trimRight", function(t4) {
            return function() {
              return t4(this, 2);
            };
          }, "trimEnd");
        }, function(t3, e2, n2) {
          n2(343), t3.exports = n2(83).f("asyncIterator");
        }, function(t3, e2, n2) {
          n2(110)("asyncIterator");
        }, function(t3, e2, n2) {
          n2(345), t3.exports = n2(17).Object.getOwnPropertyDescriptors;
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(137), i2 = n2(28), a2 = n2(34), s2 = n2(99);
          o2(o2.S, "Object", { getOwnPropertyDescriptors: function(t4) {
            for (var e3, n3, o3 = i2(t4), c2 = a2.f, l2 = r2(o3), u2 = {}, f3 = 0; l2.length > f3; )
              (n3 = c2(o3, e3 = l2[f3++])) !== void 0 && s2(u2, e3, n3);
            return u2;
          } });
        }, function(t3, e2, n2) {
          n2(347), t3.exports = n2(17).Object.values;
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(139)(false);
          o2(o2.S, "Object", { values: function(t4) {
            return r2(t4);
          } });
        }, function(t3, e2, n2) {
          n2(349), t3.exports = n2(17).Object.entries;
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(139)(true);
          o2(o2.S, "Object", { entries: function(t4) {
            return r2(t4);
          } });
        }, function(t3, e2, n2) {
          "use strict";
          n2(131), n2(351), t3.exports = n2(17).Promise.finally;
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), r2 = n2(17), i2 = n2(10), a2 = n2(65), s2 = n2(133);
          o2(o2.P + o2.R, "Promise", { finally: function(t4) {
            var e3 = a2(this, r2.Promise || i2.Promise), n3 = typeof t4 == "function";
            return this.then(n3 ? function(n4) {
              return s2(e3, t4()).then(function() {
                return n4;
              });
            } : t4, n3 ? function(n4) {
              return s2(e3, t4()).then(function() {
                throw n4;
              });
            } : t4);
          } });
        }, function(t3, e2, n2) {
          n2(353), n2(354), n2(355), t3.exports = n2(17);
        }, function(t3, e2, n2) {
          var o2 = n2(10), r2 = n2(0), i2 = n2(76), a2 = [].slice, s2 = /MSIE .\./.test(i2), c2 = function(t4) {
            return function(e3, n3) {
              var o3 = arguments.length > 2, r3 = !!o3 && a2.call(arguments, 2);
              return t4(o3 ? function() {
                (typeof e3 == "function" ? e3 : Function(e3)).apply(this, r3);
              } : e3, n3);
            };
          };
          r2(r2.G + r2.B + r2.F * s2, { setTimeout: c2(o2.setTimeout), setInterval: c2(o2.setInterval) });
        }, function(t3, e2, n2) {
          var o2 = n2(0), r2 = n2(105);
          o2(o2.G + o2.B, { setImmediate: r2.set, clearImmediate: r2.clear });
        }, function(t3, e2, n2) {
          for (var o2 = n2(102), r2 = n2(46), i2 = n2(23), a2 = n2(10), s2 = n2(27), c2 = n2(55), l2 = n2(14), u2 = l2("iterator"), f3 = l2("toStringTag"), d2 = c2.Array, p2 = { CSSRuleList: true, CSSStyleDeclaration: false, CSSValueList: false, ClientRectList: false, DOMRectList: false, DOMStringList: false, DOMTokenList: true, DataTransferItemList: false, FileList: false, HTMLAllCollection: false, HTMLCollection: false, HTMLFormElement: false, HTMLSelectElement: false, MediaList: true, MimeTypeArray: false, NamedNodeMap: false, NodeList: true, PaintRequestList: false, Plugin: false, PluginArray: false, SVGLengthList: false, SVGNumberList: false, SVGPathSegList: false, SVGPointList: false, SVGStringList: false, SVGTransformList: false, SourceBufferList: false, StyleSheetList: true, TextTrackCueList: false, TextTrackList: false, TouchList: false }, h2 = r2(p2), v2 = 0; v2 < h2.length; v2++) {
            var y2, g2 = h2[v2], b2 = p2[g2], m2 = a2[g2], k2 = m2 && m2.prototype;
            if (k2 && (k2[u2] || s2(k2, u2, d2), k2[f3] || s2(k2, f3, g2), c2[g2] = d2, b2))
              for (y2 in o2)
                k2[y2] || i2(k2, y2, o2[y2], true);
          }
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(2), n2(3), n2(360), n2(362), n2(363), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(9), d2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = d2(r3), i3 = d2(i3), a2 = d2(a2), l2 = d2(l2), u2 = f3(u2);
            var p2 = function() {
              function t4(e3) {
                var n3 = this;
                (0, i3.default)(this, t4);
                var o4 = function() {
                };
                u2.isObject(e3) && u2.isFunction(e3.onReady) && (o4 = e3.onReady);
                var r4 = new l2.default(e3);
                this.isReady = r4.isReady.then(function() {
                  n3.exportAPI(r4), o4();
                });
              }
              return (0, a2.default)(t4, [{ key: "exportAPI", value: function(t5) {
                var e3 = this;
                ["configuration"].forEach(function(n3) {
                  e3[n3] = t5[n3];
                }), this.destroy = function() {
                  for (var n3 in Object.values(t5.moduleInstances).forEach(function(t6) {
                    u2.isFunction(t6.destroy) && t6.destroy(), t6.listeners.removeAll();
                  }), t5 = null, e3)
                    Object.prototype.hasOwnProperty.call(e3, n3) && delete e3[n3];
                  Object.setPrototypeOf(e3, null);
                }, Object.setPrototypeOf(this, t5.moduleInstances.API.methods), delete this.exportAPI, Object.entries({ blocks: { clear: "clear", render: "render" }, caret: { focus: "focus" }, events: { on: "on", off: "off", emit: "emit" }, saver: { save: "save" } }).forEach(function(n3) {
                  var o4 = (0, r3.default)(n3, 2), i4 = o4[0], a3 = o4[1];
                  Object.entries(a3).forEach(function(n4) {
                    var o5 = (0, r3.default)(n4, 2), a4 = o5[0], s3 = o5[1];
                    e3[s3] = t5.moduleInstances.API.methods[i4][a4];
                  });
                });
              } }], [{ key: "version", get: function() {
                return "2.20.0";
              } }]), t4;
            }();
            o3.default = p2, p2.displayName = "EditorJS", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2) {
          t3.exports = function(t4) {
            if (Array.isArray(t4))
              return t4;
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3) {
            if (typeof Symbol != "undefined" && Symbol.iterator in Object(t4)) {
              var n2 = [], o2 = true, r2 = false, i2 = void 0;
              try {
                for (var a2, s2 = t4[Symbol.iterator](); !(o2 = (a2 = s2.next()).done) && (n2.push(a2.value), !e3 || n2.length !== e3); o2 = true)
                  ;
              } catch (t5) {
                r2 = true, i2 = t5;
              } finally {
                try {
                  o2 || s2.return == null || s2.return();
                } finally {
                  if (r2)
                    throw i2;
                }
              }
              return n2;
            }
          };
        }, function(t3, e2) {
          t3.exports = function() {
            throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          };
        }, function(t3, e2, n2) {
          (e2 = t3.exports = function(...t4) {
            return r2(...t4);
          }).__esModule = true;
          const o2 = n2(361), r2 = o2.default;
          Object.assign(e2, o2);
        }, function(t3, e2, n2) {
          "use strict";
          Object.defineProperty(e2, "__esModule", { value: true }), e2.default = function() {
          }, e2.revert = function() {
          };
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [], (i2 = typeof (o2 = function() {
            "use strict";
            Element.prototype.matches || (Element.prototype.matches = Element.prototype.matchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || Element.prototype.webkitMatchesSelector || function(t4) {
              for (var e3 = (this.document || this.ownerDocument).querySelectorAll(t4), n3 = e3.length; --n3 >= 0 && e3.item(n3) !== this; )
                ;
              return n3 > -1;
            }), Element.prototype.closest || (Element.prototype.closest = function(t4) {
              var e3 = this;
              if (!document.documentElement.contains(e3))
                return null;
              do {
                if (e3.matches(t4))
                  return e3;
                e3 = e3.parentElement || e3.parentNode;
              } while (e3 !== null);
              return null;
            }), Element.prototype.prepend || (Element.prototype.prepend = function(t4) {
              var e3 = document.createDocumentFragment();
              Array.isArray(t4) || (t4 = [t4]), t4.forEach(function(t5) {
                var n3 = t5 instanceof Node;
                e3.appendChild(n3 ? t5 : document.createTextNode(t5));
              }), this.insertBefore(e3, this.firstChild);
            });
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(21), n2(22), n2(2), n2(3), n2(15), n2(8), n2(59), n2(145), n2(372)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2, f3, d2) {
            "use strict";
            var p2 = n2(9), h2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = h2(r3), i3 = h2(i3), a2 = h2(a2), s2 = h2(s2), c2 = h2(c2), l2 = p2(l2), u2 = h2(u2), d2 = h2(d2);
            var v2 = n2(373), y2 = [];
            v2.keys().forEach(function(t4) {
              t4.match(/^\.\/[^_][\w/]*\.([tj])s$/) && y2.push(v2(t4));
            });
            var g2 = function() {
              function t4(e4) {
                var n4, o4, s3 = this;
                (0, a2.default)(this, t4), this.moduleInstances = {}, this.eventsDispatcher = new d2.default(), this.isReady = new Promise(function(t5, e5) {
                  n4 = t5, o4 = e5;
                }), Promise.resolve().then((0, i3.default)(r3.default.mark(function t5() {
                  return r3.default.wrap(function(t6) {
                    for (; ; )
                      switch (t6.prev = t6.next) {
                        case 0:
                          return s3.configuration = e4, t6.next = 3, s3.validate();
                        case 3:
                          return t6.next = 5, s3.init();
                        case 5:
                          return t6.next = 7, s3.start();
                        case 7:
                          l2.logLabeled("I'm ready! (\uFF89\u25D5\u30EE\u25D5)\uFF89*:\uFF65\uFF9F\u2727", "log", "", "color: #E24A75"), setTimeout((0, i3.default)(r3.default.mark(function t7() {
                            var e5, o5, i4;
                            return r3.default.wrap(function(t8) {
                              for (; ; )
                                switch (t8.prev = t8.next) {
                                  case 0:
                                    return t8.next = 2, s3.render();
                                  case 2:
                                    s3.configuration.autofocus && (e5 = s3.moduleInstances, o5 = e5.BlockManager, (i4 = e5.Caret).setToBlock(o5.blocks[0], i4.positions.START), o5.highlightCurrentNode()), s3.moduleInstances.UI.removeLoader(), n4();
                                  case 5:
                                  case "end":
                                    return t8.stop();
                                }
                            }, t7);
                          })), 500);
                        case 9:
                        case "end":
                          return t6.stop();
                      }
                  }, t5);
                }))).catch(function(t5) {
                  l2.log("Editor.js is not ready because of ".concat(t5), "error"), o4(t5);
                });
              }
              var e3, n3;
              return (0, s2.default)(t4, [{ key: "validate", value: (n3 = (0, i3.default)(r3.default.mark(function t5() {
                var e4, n4, o4;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        if (e4 = this.config, n4 = e4.holderId, o4 = e4.holder, !n4 || !o4) {
                          t6.next = 3;
                          break;
                        }
                        throw Error("\xABholderId\xBB and \xABholder\xBB param can't assign at the same time.");
                      case 3:
                        if (!l2.isString(o4) || c2.default.get(o4)) {
                          t6.next = 5;
                          break;
                        }
                        throw Error("element with ID \xAB".concat(o4, "\xBB is missing. Pass correct holder's ID."));
                      case 5:
                        if (!o4 || !l2.isObject(o4) || c2.default.isElement(o4)) {
                          t6.next = 7;
                          break;
                        }
                        throw Error("\xABholder\xBB value must be an Element node");
                      case 7:
                      case "end":
                        return t6.stop();
                    }
                }, t5, this);
              })), function() {
                return n3.apply(this, arguments);
              }) }, { key: "init", value: function() {
                this.constructModules(), this.configureModules();
              } }, { key: "start", value: (e3 = (0, i3.default)(r3.default.mark(function t5() {
                var e4, n4 = this;
                return r3.default.wrap(function(t6) {
                  for (; ; )
                    switch (t6.prev = t6.next) {
                      case 0:
                        return e4 = ["Tools", "UI", "BlockManager", "Paste", "BlockSelection", "RectangleSelection", "CrossBlockSelection", "ReadOnly"], t6.next = 3, e4.reduce(function(t7, e5) {
                          return t7.then((0, i3.default)(r3.default.mark(function t8() {
                            return r3.default.wrap(function(t9) {
                              for (; ; )
                                switch (t9.prev = t9.next) {
                                  case 0:
                                    return t9.prev = 0, t9.next = 3, n4.moduleInstances[e5].prepare();
                                  case 3:
                                    t9.next = 10;
                                    break;
                                  case 5:
                                    if (t9.prev = 5, t9.t0 = t9.catch(0), !(t9.t0 instanceof f3.CriticalError)) {
                                      t9.next = 9;
                                      break;
                                    }
                                    throw new Error(t9.t0.message);
                                  case 9:
                                    l2.log("Module ".concat(e5, " was skipped because of %o"), "warn", t9.t0);
                                  case 10:
                                  case "end":
                                    return t9.stop();
                                }
                            }, t8, null, [[0, 5]]);
                          })));
                        }, Promise.resolve());
                      case 3:
                      case "end":
                        return t6.stop();
                    }
                }, t5);
              })), function() {
                return e3.apply(this, arguments);
              }) }, { key: "render", value: function() {
                return this.moduleInstances.Renderer.render(this.config.data.blocks);
              } }, { key: "constructModules", value: function() {
                var t5 = this;
                y2.forEach(function(e4) {
                  var n4 = l2.isFunction(e4) ? e4 : e4.default;
                  try {
                    t5.moduleInstances[n4.displayName] = new n4({ config: t5.configuration, eventsDispatcher: t5.eventsDispatcher });
                  } catch (t6) {
                    l2.log("Module ".concat(n4.displayName, " skipped because"), "warn", t6);
                  }
                });
              } }, { key: "configureModules", value: function() {
                for (var t5 in this.moduleInstances)
                  Object.prototype.hasOwnProperty.call(this.moduleInstances, t5) && (this.moduleInstances[t5].state = this.getModulesDiff(t5));
              } }, { key: "getModulesDiff", value: function(t5) {
                var e4 = {};
                for (var n4 in this.moduleInstances)
                  n4 !== t5 && (e4[n4] = this.moduleInstances[n4]);
                return e4;
              } }, { key: "configuration", set: function(t5) {
                var e4, n4;
                l2.isObject(t5) ? this.config = Object.assign({}, t5) : this.config = { holder: t5 }, l2.deprecationAssert(!!this.config.holderId, "config.holderId", "config.holder"), this.config.holderId && !this.config.holder && (this.config.holder = this.config.holderId, this.config.holderId = null), this.config.holder == null && (this.config.holder = "editorjs"), this.config.logLevel || (this.config.logLevel = l2.LogLevels.VERBOSE), l2.setLogLevel(this.config.logLevel), l2.deprecationAssert(Boolean(this.config.initialBlock), "config.initialBlock", "config.defaultBlock"), this.config.defaultBlock = this.config.defaultBlock || this.config.initialBlock || "paragraph", this.config.minHeight = this.config.minHeight !== void 0 ? this.config.minHeight : 300;
                var o4 = { type: this.config.defaultBlock, data: {} };
                this.config.placeholder = this.config.placeholder || false, this.config.sanitizer = this.config.sanitizer || { p: true, b: true, a: true }, this.config.hideToolbar = !!this.config.hideToolbar && this.config.hideToolbar, this.config.tools = this.config.tools || {}, this.config.i18n = this.config.i18n || {}, this.config.data = this.config.data || { blocks: [] }, this.config.onReady = this.config.onReady || function() {
                }, this.config.onChange = this.config.onChange || function() {
                }, this.config.inlineToolbar = this.config.inlineToolbar === void 0 || this.config.inlineToolbar, !l2.isEmpty(this.config.data) && this.config.data.blocks && this.config.data.blocks.length !== 0 || (this.config.data = { blocks: [o4] }), this.config.readOnly = this.config.readOnly || false, ((e4 = this.config.i18n) === null || e4 === void 0 ? void 0 : e4.messages) && u2.default.setDictionary(this.config.i18n.messages), this.config.i18n.direction = ((n4 = this.config.i18n) === null || n4 === void 0 ? void 0 : n4.direction) || "ltr";
              }, get: function() {
                return this.config;
              } }]), t4;
            }();
            o3.default = g2, g2.displayName = "Core", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = n2(142);
          t3.exports = function(t4) {
            if (Array.isArray(t4))
              return o2(t4);
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            if (typeof Symbol != "undefined" && Symbol.iterator in Object(t4))
              return Array.from(t4);
          };
        }, function(t3, e2) {
          t3.exports = function() {
            throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3, n2) {
            return e3 in t4 ? Object.defineProperty(t4, e3, { value: n2, enumerable: true, configurable: true, writable: true }) : t4[e3] = n2, t4;
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            if (t4 === void 0)
              throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return t4;
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            return Function.toString.call(t4).indexOf("[native code]") !== -1;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(107), r2 = n2(371);
          function i2(e3, n3, a2) {
            return r2() ? t3.exports = i2 = Reflect.construct : t3.exports = i2 = function(t4, e4, n4) {
              var r3 = [null];
              r3.push.apply(r3, e4);
              var i3 = new (Function.bind.apply(t4, r3))();
              return n4 && o2(i3, n4.prototype), i3;
            }, i2.apply(null, arguments);
          }
          t3.exports = i2;
        }, function(t3, e2) {
          t3.exports = function() {
            if (typeof Reflect == "undefined" || !Reflect.construct)
              return false;
            if (Reflect.construct.sham)
              return false;
            if (typeof Proxy == "function")
              return true;
            try {
              return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
              })), true;
            } catch (t4) {
              return false;
            }
          };
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3)], (i2 = typeof (o2 = function(o3, r3, i3) {
            "use strict";
            var a2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = a2(r3), i3 = a2(i3);
            var s2 = function() {
              function t4() {
                (0, r3.default)(this, t4), this.subscribers = {};
              }
              return (0, i3.default)(t4, [{ key: "on", value: function(t5, e3) {
                t5 in this.subscribers || (this.subscribers[t5] = []), this.subscribers[t5].push(e3);
              } }, { key: "once", value: function(t5, e3) {
                var n3 = this;
                t5 in this.subscribers || (this.subscribers[t5] = []), this.subscribers[t5].push(function o4(r4) {
                  var i4 = e3(r4), a3 = n3.subscribers[t5].indexOf(o4);
                  return a3 !== -1 && n3.subscribers[t5].splice(a3, 1), i4;
                });
              } }, { key: "emit", value: function(t5, e3) {
                this.subscribers[t5] && this.subscribers[t5].reduce(function(t6, e4) {
                  return e4(t6) || t6;
                }, e3);
              } }, { key: "off", value: function(t5, e3) {
                for (var n3 = 0; n3 < this.subscribers[t5].length; n3++)
                  if (this.subscribers[t5][n3] === e3) {
                    delete this.subscribers[t5][n3];
                    break;
                  }
              } }, { key: "destroy", value: function() {
                this.subscribers = null;
              } }]), t4;
            }();
            o3.default = s2, s2.displayName = "EventsDispatcher", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2 = { "./api": 79, "./api/": 79, "./api/blocks": 147, "./api/blocks.ts": 147, "./api/caret": 149, "./api/caret.ts": 149, "./api/events": 150, "./api/events.ts": 150, "./api/i18n": 151, "./api/i18n.ts": 151, "./api/index": 79, "./api/index.ts": 79, "./api/inlineToolbar": 152, "./api/inlineToolbar.ts": 152, "./api/listeners": 153, "./api/listeners.ts": 153, "./api/notifier": 154, "./api/notifier.ts": 154, "./api/readonly": 155, "./api/readonly.ts": 155, "./api/sanitizer": 156, "./api/sanitizer.ts": 156, "./api/saver": 157, "./api/saver.ts": 157, "./api/selection": 158, "./api/selection.ts": 158, "./api/styles": 159, "./api/styles.ts": 159, "./api/toolbar": 160, "./api/toolbar.ts": 160, "./api/tooltip": 161, "./api/tooltip.ts": 161, "./blockEvents": 162, "./blockEvents.ts": 162, "./blockManager": 163, "./blockManager.ts": 163, "./blockSelection": 164, "./blockSelection.ts": 164, "./caret": 165, "./caret.ts": 165, "./crossBlockSelection": 166, "./crossBlockSelection.ts": 166, "./dragNDrop": 167, "./dragNDrop.ts": 167, "./modificationsObserver": 168, "./modificationsObserver.ts": 168, "./notifier": 169, "./notifier.ts": 169, "./paste": 170, "./paste.ts": 170, "./readonly": 171, "./readonly.ts": 171, "./rectangleSelection": 172, "./rectangleSelection.ts": 172, "./renderer": 173, "./renderer.ts": 173, "./sanitizer": 174, "./sanitizer.ts": 174, "./saver": 175, "./saver.ts": 175, "./toolbar": 80, "./toolbar/": 80, "./toolbar/blockSettings": 176, "./toolbar/blockSettings.ts": 176, "./toolbar/conversion": 177, "./toolbar/conversion.ts": 177, "./toolbar/index": 80, "./toolbar/index.ts": 80, "./toolbar/inline": 178, "./toolbar/inline.ts": 178, "./toolbar/toolbox": 179, "./toolbar/toolbox.ts": 179, "./tools": 180, "./tools.ts": 180, "./tooltip": 181, "./tooltip.ts": 181, "./ui": 182, "./ui.ts": 182 };
          function r2(t4) {
            var e3 = i2(t4);
            return n2(e3);
          }
          function i2(t4) {
            if (!n2.o(o2, t4)) {
              var e3 = new Error("Cannot find module '" + t4 + "'");
              throw e3.code = "MODULE_NOT_FOUND", e3;
            }
            return o2[t4];
          }
          r2.keys = function() {
            return Object.keys(o2);
          }, r2.resolve = i2, t3.exports = r2, r2.id = 373;
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(9), c2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = c2(r3), i3 = c2(i3), a2 = s2(a2);
            var l2 = function() {
              function t4() {
                (0, r3.default)(this, t4), this.allListeners = [];
              }
              return (0, i3.default)(t4, [{ key: "on", value: function(t5, e3, n3) {
                var o4 = arguments.length > 3 && arguments[3] !== void 0 && arguments[3], r4 = a2.generateId("l"), i4 = { id: r4, element: t5, eventType: e3, handler: n3, options: o4 }, s3 = this.findOne(t5, e3, n3);
                if (!s3)
                  return this.allListeners.push(i4), t5.addEventListener(e3, n3, o4), r4;
              } }, { key: "off", value: function(t5, e3, n3, o4) {
                var r4 = this, i4 = this.findAll(t5, e3, n3);
                i4.forEach(function(t6, e4) {
                  var n4 = r4.allListeners.indexOf(i4[e4]);
                  n4 > -1 && (r4.allListeners.splice(n4, 1), t6.element.removeEventListener(t6.eventType, t6.handler, t6.options));
                });
              } }, { key: "offById", value: function(t5) {
                var e3 = this.findById(t5);
                e3 && e3.element.removeEventListener(e3.eventType, e3.handler, e3.options);
              } }, { key: "findOne", value: function(t5, e3, n3) {
                var o4 = this.findAll(t5, e3, n3);
                return o4.length > 0 ? o4[0] : null;
              } }, { key: "findAll", value: function(t5, e3, n3) {
                var o4 = t5 ? this.findByEventTarget(t5) : [];
                return t5 && e3 && n3 ? o4.filter(function(t6) {
                  return t6.eventType === e3 && t6.handler === n3;
                }) : t5 && e3 ? o4.filter(function(t6) {
                  return t6.eventType === e3;
                }) : o4;
              } }, { key: "removeAll", value: function() {
                this.allListeners.map(function(t5) {
                  t5.element.removeEventListener(t5.eventType, t5.handler, t5.options);
                }), this.allListeners = [];
              } }, { key: "destroy", value: function() {
                this.removeAll();
              } }, { key: "findByEventTarget", value: function(t5) {
                return this.allListeners.filter(function(e3) {
                  if (e3.element === t5)
                    return e3;
                });
              } }, { key: "findByType", value: function(t5) {
                return this.allListeners.filter(function(e3) {
                  if (e3.eventType === t5)
                    return e3;
                });
              } }, { key: "findByHandler", value: function(t5) {
                return this.allListeners.filter(function(e3) {
                  if (e3.handler === t5)
                    return e3;
                });
              } }, { key: "findById", value: function(t5) {
                return this.allListeners.find(function(e3) {
                  return e3.id === t5;
                });
              } }]), t4;
            }();
            o3.default = l2, l2.displayName = "Listeners", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(15), n2(8), n2(25)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2) {
            "use strict";
            var l2 = n2(9), u2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = l2(s2), c2 = u2(c2);
            var f3 = function() {
              function t4(e3, n3) {
                (0, r3.default)(this, t4), this.cursor = -1, this.items = [], this.items = e3 || [], this.focusedCssClass = n3;
              }
              return (0, i3.default)(t4, [{ key: "setItems", value: function(t5) {
                this.items = t5;
              } }, { key: "next", value: function() {
                this.cursor = this.leafNodesAndReturnIndex(t4.directions.RIGHT);
              } }, { key: "previous", value: function() {
                this.cursor = this.leafNodesAndReturnIndex(t4.directions.LEFT);
              } }, { key: "dropCursor", value: function() {
                this.cursor !== -1 && (this.items[this.cursor].classList.remove(this.focusedCssClass), this.cursor = -1);
              } }, { key: "leafNodesAndReturnIndex", value: function(e3) {
                var n3 = this;
                if (this.items.length === 0)
                  return this.cursor;
                var o4 = this.cursor;
                return o4 === -1 ? o4 = e3 === t4.directions.RIGHT ? -1 : 0 : this.items[o4].classList.remove(this.focusedCssClass), o4 = e3 === t4.directions.RIGHT ? (o4 + 1) % this.items.length : (this.items.length + o4 - 1) % this.items.length, a2.default.canSetCaret(this.items[o4]) && s2.delay(function() {
                  return c2.default.setCursor(n3.items[o4]);
                }, 50)(), this.items[o4].classList.add(this.focusedCssClass), o4;
              } }, { key: "currentItem", get: function() {
                return this.cursor === -1 ? null : this.items[this.cursor];
              } }]), t4;
            }();
            o3.default = f3, f3.displayName = "DomIterator", f3.directions = { RIGHT: "right", LEFT: "left" }, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(8), n2(15), n2(61)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2) {
            "use strict";
            var l2 = n2(9), u2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = l2(a2), s2 = u2(s2);
            var f3 = function() {
              function t4(e3) {
                (0, r3.default)(this, t4), this.blocks = [], this.workingArea = e3;
              }
              return (0, i3.default)(t4, [{ key: "push", value: function(t5) {
                this.blocks.push(t5), this.insertToDOM(t5);
              } }, { key: "swap", value: function(t5, e3) {
                var n3 = this.blocks[e3];
                s2.default.swap(this.blocks[t5].holder, n3.holder), this.blocks[e3] = this.blocks[t5], this.blocks[t5] = n3;
              } }, { key: "move", value: function(t5, e3) {
                var n3 = this.blocks.splice(e3, 1)[0], o4 = t5 - 1, r4 = Math.max(0, o4), i4 = this.blocks[r4];
                t5 > 0 ? this.insertToDOM(n3, "afterend", i4) : this.insertToDOM(n3, "beforebegin", i4), this.blocks.splice(t5, 0, n3);
                var a3 = this.composeBlockEvent("move", { fromIndex: e3, toIndex: t5 });
                n3.call(c2.BlockToolAPI.MOVED, a3);
              } }, { key: "insert", value: function(t5, e3) {
                var n3 = arguments.length > 2 && arguments[2] !== void 0 && arguments[2];
                if (this.length) {
                  t5 > this.length && (t5 = this.length), n3 && (this.blocks[t5].holder.remove(), this.blocks[t5].call(c2.BlockToolAPI.REMOVED));
                  var o4 = n3 ? 1 : 0;
                  if (this.blocks.splice(t5, o4, e3), t5 > 0) {
                    var r4 = this.blocks[t5 - 1];
                    this.insertToDOM(e3, "afterend", r4);
                  } else {
                    var i4 = this.blocks[t5 + 1];
                    i4 ? this.insertToDOM(e3, "beforebegin", i4) : this.insertToDOM(e3);
                  }
                } else
                  this.push(e3);
              } }, { key: "remove", value: function(t5) {
                isNaN(t5) && (t5 = this.length - 1), this.blocks[t5].holder.remove(), this.blocks[t5].call(c2.BlockToolAPI.REMOVED), this.blocks.splice(t5, 1);
              } }, { key: "removeAll", value: function() {
                this.workingArea.innerHTML = "", this.blocks.forEach(function(t5) {
                  return t5.call(c2.BlockToolAPI.REMOVED);
                }), this.blocks.length = 0;
              } }, { key: "insertAfter", value: function(t5, e3) {
                var n3 = this.blocks.indexOf(t5);
                this.insert(n3 + 1, e3);
              } }, { key: "get", value: function(t5) {
                return this.blocks[t5];
              } }, { key: "indexOf", value: function(t5) {
                return this.blocks.indexOf(t5);
              } }, { key: "insertToDOM", value: function(t5, e3, n3) {
                e3 ? n3.holder.insertAdjacentElement(e3, t5.holder) : this.workingArea.appendChild(t5.holder), t5.call(c2.BlockToolAPI.RENDERED);
              } }, { key: "composeBlockEvent", value: function(t5, e3) {
                return new CustomEvent(t5, { detail: e3 });
              } }, { key: "length", get: function() {
                return this.blocks.length;
              } }, { key: "array", get: function() {
                return this.blocks;
              } }, { key: "nodes", get: function() {
                return a2.array(this.workingArea.children);
              } }], [{ key: "set", value: function(t5, e3, n3) {
                return isNaN(Number(e3)) ? (Reflect.set(t5, e3, n3), true) : (t5.insert(+e3, n3), true);
              } }, { key: "get", value: function(t5, e3) {
                return isNaN(Number(e3)) ? Reflect.get(t5, e3) : t5.get(+e3);
              } }]), t4;
            }();
            o3.default = f3, f3.displayName = "Blocks", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          window, t3.exports = function(t4) {
            var e3 = {};
            function n3(o2) {
              if (e3[o2])
                return e3[o2].exports;
              var r2 = e3[o2] = { i: o2, l: false, exports: {} };
              return t4[o2].call(r2.exports, r2, r2.exports, n3), r2.l = true, r2.exports;
            }
            return n3.m = t4, n3.c = e3, n3.d = function(t5, e4, o2) {
              n3.o(t5, e4) || Object.defineProperty(t5, e4, { enumerable: true, get: o2 });
            }, n3.r = function(t5) {
              typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t5, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t5, "__esModule", { value: true });
            }, n3.t = function(t5, e4) {
              if (1 & e4 && (t5 = n3(t5)), 8 & e4)
                return t5;
              if (4 & e4 && typeof t5 == "object" && t5 && t5.__esModule)
                return t5;
              var o2 = /* @__PURE__ */ Object.create(null);
              if (n3.r(o2), Object.defineProperty(o2, "default", { enumerable: true, value: t5 }), 2 & e4 && typeof t5 != "string")
                for (var r2 in t5)
                  n3.d(o2, r2, function(e5) {
                    return t5[e5];
                  }.bind(null, r2));
              return o2;
            }, n3.n = function(t5) {
              var e4 = t5 && t5.__esModule ? function() {
                return t5.default;
              } : function() {
                return t5;
              };
              return n3.d(e4, "a", e4), e4;
            }, n3.o = function(t5, e4) {
              return Object.prototype.hasOwnProperty.call(t5, e4);
            }, n3.p = "", n3(n3.s = 0);
          }([function(t4, e3, n3) {
            "use strict";
            function o2(t5, e4) {
              for (var n4 = 0; n4 < e4.length; n4++) {
                var o3 = e4[n4];
                o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t5, o3.key, o3);
              }
            }
            function r2(t5, e4, n4) {
              return e4 && o2(t5.prototype, e4), n4 && o2(t5, n4), t5;
            }
            n3.r(e3);
            var i2 = function() {
              function t5(e4) {
                var n4 = this;
                !function(t6, e5) {
                  if (!(t6 instanceof e5))
                    throw new TypeError("Cannot call a class as a function");
                }(this, t5), this.commands = {}, this.keys = {}, this.name = e4.name, this.parseShortcutName(e4.name), this.element = e4.on, this.callback = e4.callback, this.executeShortcut = function(t6) {
                  n4.execute(t6);
                }, this.element.addEventListener("keydown", this.executeShortcut, false);
              }
              return r2(t5, null, [{ key: "supportedCommands", get: function() {
                return { SHIFT: ["SHIFT"], CMD: ["CMD", "CONTROL", "COMMAND", "WINDOWS", "CTRL"], ALT: ["ALT", "OPTION"] };
              } }, { key: "keyCodes", get: function() {
                return { 0: 48, 1: 49, 2: 50, 3: 51, 4: 52, 5: 53, 6: 54, 7: 55, 8: 56, 9: 57, A: 65, B: 66, C: 67, D: 68, E: 69, F: 70, G: 71, H: 72, I: 73, J: 74, K: 75, L: 76, M: 77, N: 78, O: 79, P: 80, Q: 81, R: 82, S: 83, T: 84, U: 85, V: 86, W: 87, X: 88, Y: 89, Z: 90, BACKSPACE: 8, ENTER: 13, ESCAPE: 27, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, INSERT: 45, DELETE: 46 };
              } }]), r2(t5, [{ key: "parseShortcutName", value: function(e4) {
                e4 = e4.split("+");
                for (var n4 = 0; n4 < e4.length; n4++) {
                  e4[n4] = e4[n4].toUpperCase();
                  var o3 = false;
                  for (var r3 in t5.supportedCommands)
                    if (t5.supportedCommands[r3].includes(e4[n4])) {
                      o3 = this.commands[r3] = true;
                      break;
                    }
                  o3 || (this.keys[e4[n4]] = true);
                }
                for (var i3 in t5.supportedCommands)
                  this.commands[i3] || (this.commands[i3] = false);
              } }, { key: "execute", value: function(e4) {
                var n4, o3 = { CMD: e4.ctrlKey || e4.metaKey, SHIFT: e4.shiftKey, ALT: e4.altKey }, r3 = true;
                for (n4 in this.commands)
                  this.commands[n4] !== o3[n4] && (r3 = false);
                var i3, a2 = true;
                for (i3 in this.keys)
                  a2 = a2 && e4.keyCode === t5.keyCodes[i3];
                r3 && a2 && this.callback(e4);
              } }, { key: "remove", value: function() {
                this.element.removeEventListener("keydown", this.executeShortcut);
              } }]), t5;
            }();
            e3.default = i2;
          }]).default;
        }, function(t3, e2, n2) {
          window, t3.exports = function(t4) {
            var e3 = {};
            function n3(o2) {
              if (e3[o2])
                return e3[o2].exports;
              var r2 = e3[o2] = { i: o2, l: false, exports: {} };
              return t4[o2].call(r2.exports, r2, r2.exports, n3), r2.l = true, r2.exports;
            }
            return n3.m = t4, n3.c = e3, n3.d = function(t5, e4, o2) {
              n3.o(t5, e4) || Object.defineProperty(t5, e4, { enumerable: true, get: o2 });
            }, n3.r = function(t5) {
              typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t5, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t5, "__esModule", { value: true });
            }, n3.t = function(t5, e4) {
              if (1 & e4 && (t5 = n3(t5)), 8 & e4)
                return t5;
              if (4 & e4 && typeof t5 == "object" && t5 && t5.__esModule)
                return t5;
              var o2 = /* @__PURE__ */ Object.create(null);
              if (n3.r(o2), Object.defineProperty(o2, "default", { enumerable: true, value: t5 }), 2 & e4 && typeof t5 != "string")
                for (var r2 in t5)
                  n3.d(o2, r2, function(e5) {
                    return t5[e5];
                  }.bind(null, r2));
              return o2;
            }, n3.n = function(t5) {
              var e4 = t5 && t5.__esModule ? function() {
                return t5.default;
              } : function() {
                return t5;
              };
              return n3.d(e4, "a", e4), e4;
            }, n3.o = function(t5, e4) {
              return Object.prototype.hasOwnProperty.call(t5, e4);
            }, n3.p = "/", n3(n3.s = 0);
          }([function(t4, e3, n3) {
            "use strict";
            n3(1), t4.exports = function() {
              var t5 = n3(6), e4 = null;
              return { show: function(n4) {
                if (n4.message) {
                  !function() {
                    if (e4)
                      return true;
                    e4 = t5.getWrapper(), document.body.appendChild(e4);
                  }();
                  var o2 = null, r2 = n4.time || 8e3;
                  switch (n4.type) {
                    case "confirm":
                      o2 = t5.confirm(n4);
                      break;
                    case "prompt":
                      o2 = t5.prompt(n4);
                      break;
                    default:
                      o2 = t5.alert(n4), window.setTimeout(function() {
                        o2.remove();
                      }, r2);
                  }
                  e4.appendChild(o2), o2.classList.add("cdx-notify--bounce-in");
                }
              } };
            }();
          }, function(t4, e3, n3) {
            var o2 = n3(2);
            typeof o2 == "string" && (o2 = [[t4.i, o2, ""]]), n3(4)(o2, { hmr: true, transform: void 0, insertInto: void 0 }), o2.locals && (t4.exports = o2.locals);
          }, function(t4, e3, n3) {
            (t4.exports = n3(3)(false)).push([t4.i, `.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`, ""]);
          }, function(t4, e3) {
            t4.exports = function(t5) {
              var e4 = [];
              return e4.toString = function() {
                return this.map(function(e5) {
                  var n3 = function(t6, e6) {
                    var n4, o2 = t6[1] || "", r2 = t6[3];
                    if (!r2)
                      return o2;
                    if (e6 && typeof btoa == "function") {
                      var i2 = (n4 = r2, "/*# sourceMappingURL=data:application/json;charset=utf-8;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(n4)))) + " */"), a2 = r2.sources.map(function(t7) {
                        return "/*# sourceURL=" + r2.sourceRoot + t7 + " */";
                      });
                      return [o2].concat(a2).concat([i2]).join("\n");
                    }
                    return [o2].join("\n");
                  }(e5, t5);
                  return e5[2] ? "@media " + e5[2] + "{" + n3 + "}" : n3;
                }).join("");
              }, e4.i = function(t6, n3) {
                typeof t6 == "string" && (t6 = [[null, t6, ""]]);
                for (var o2 = {}, r2 = 0; r2 < this.length; r2++) {
                  var i2 = this[r2][0];
                  typeof i2 == "number" && (o2[i2] = true);
                }
                for (r2 = 0; r2 < t6.length; r2++) {
                  var a2 = t6[r2];
                  typeof a2[0] == "number" && o2[a2[0]] || (n3 && !a2[2] ? a2[2] = n3 : n3 && (a2[2] = "(" + a2[2] + ") and (" + n3 + ")"), e4.push(a2));
                }
              }, e4;
            };
          }, function(t4, e3, n3) {
            var o2, r2, i2 = {}, a2 = (o2 = function() {
              return window && document && document.all && !window.atob;
            }, function() {
              return r2 === void 0 && (r2 = o2.apply(this, arguments)), r2;
            }), s2 = function(t5) {
              var e4 = {};
              return function(t6) {
                if (typeof t6 == "function")
                  return t6();
                if (e4[t6] === void 0) {
                  var n4 = function(t7) {
                    return document.querySelector(t7);
                  }.call(this, t6);
                  if (window.HTMLIFrameElement && n4 instanceof window.HTMLIFrameElement)
                    try {
                      n4 = n4.contentDocument.head;
                    } catch (t7) {
                      n4 = null;
                    }
                  e4[t6] = n4;
                }
                return e4[t6];
              };
            }(), c2 = null, l2 = 0, u2 = [], f3 = n3(5);
            function d2(t5, e4) {
              for (var n4 = 0; n4 < t5.length; n4++) {
                var o3 = t5[n4], r3 = i2[o3.id];
                if (r3) {
                  r3.refs++;
                  for (var a3 = 0; a3 < r3.parts.length; a3++)
                    r3.parts[a3](o3.parts[a3]);
                  for (; a3 < o3.parts.length; a3++)
                    r3.parts.push(b2(o3.parts[a3], e4));
                } else {
                  var s3 = [];
                  for (a3 = 0; a3 < o3.parts.length; a3++)
                    s3.push(b2(o3.parts[a3], e4));
                  i2[o3.id] = { id: o3.id, refs: 1, parts: s3 };
                }
              }
            }
            function p2(t5, e4) {
              for (var n4 = [], o3 = {}, r3 = 0; r3 < t5.length; r3++) {
                var i3 = t5[r3], a3 = e4.base ? i3[0] + e4.base : i3[0], s3 = { css: i3[1], media: i3[2], sourceMap: i3[3] };
                o3[a3] ? o3[a3].parts.push(s3) : n4.push(o3[a3] = { id: a3, parts: [s3] });
              }
              return n4;
            }
            function h2(t5, e4) {
              var n4 = s2(t5.insertInto);
              if (!n4)
                throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
              var o3 = u2[u2.length - 1];
              if (t5.insertAt === "top")
                o3 ? o3.nextSibling ? n4.insertBefore(e4, o3.nextSibling) : n4.appendChild(e4) : n4.insertBefore(e4, n4.firstChild), u2.push(e4);
              else if (t5.insertAt === "bottom")
                n4.appendChild(e4);
              else {
                if (typeof t5.insertAt != "object" || !t5.insertAt.before)
                  throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
                var r3 = s2(t5.insertInto + " " + t5.insertAt.before);
                n4.insertBefore(e4, r3);
              }
            }
            function v2(t5) {
              if (t5.parentNode === null)
                return false;
              t5.parentNode.removeChild(t5);
              var e4 = u2.indexOf(t5);
              e4 >= 0 && u2.splice(e4, 1);
            }
            function y2(t5) {
              var e4 = document.createElement("style");
              return t5.attrs.type === void 0 && (t5.attrs.type = "text/css"), g2(e4, t5.attrs), h2(t5, e4), e4;
            }
            function g2(t5, e4) {
              Object.keys(e4).forEach(function(n4) {
                t5.setAttribute(n4, e4[n4]);
              });
            }
            function b2(t5, e4) {
              var n4, o3, r3, i3;
              if (e4.transform && t5.css) {
                if (!(i3 = e4.transform(t5.css)))
                  return function() {
                  };
                t5.css = i3;
              }
              if (e4.singleton) {
                var a3 = l2++;
                n4 = c2 || (c2 = y2(e4)), o3 = x2.bind(null, n4, a3, false), r3 = x2.bind(null, n4, a3, true);
              } else
                t5.sourceMap && typeof URL == "function" && typeof URL.createObjectURL == "function" && typeof URL.revokeObjectURL == "function" && typeof Blob == "function" && typeof btoa == "function" ? (n4 = function(t6) {
                  var e5 = document.createElement("link");
                  return t6.attrs.type === void 0 && (t6.attrs.type = "text/css"), t6.attrs.rel = "stylesheet", g2(e5, t6.attrs), h2(t6, e5), e5;
                }(e4), o3 = function(t6, e5, n5) {
                  var o4 = n5.css, r4 = n5.sourceMap, i4 = e5.convertToAbsoluteUrls === void 0 && r4;
                  (e5.convertToAbsoluteUrls || i4) && (o4 = f3(o4)), r4 && (o4 += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(r4)))) + " */");
                  var a4 = new Blob([o4], { type: "text/css" }), s3 = t6.href;
                  t6.href = URL.createObjectURL(a4), s3 && URL.revokeObjectURL(s3);
                }.bind(null, n4, e4), r3 = function() {
                  v2(n4), n4.href && URL.revokeObjectURL(n4.href);
                }) : (n4 = y2(e4), o3 = function(t6, e5) {
                  var n5 = e5.css, o4 = e5.media;
                  if (o4 && t6.setAttribute("media", o4), t6.styleSheet)
                    t6.styleSheet.cssText = n5;
                  else {
                    for (; t6.firstChild; )
                      t6.removeChild(t6.firstChild);
                    t6.appendChild(document.createTextNode(n5));
                  }
                }.bind(null, n4), r3 = function() {
                  v2(n4);
                });
              return o3(t5), function(e5) {
                if (e5) {
                  if (e5.css === t5.css && e5.media === t5.media && e5.sourceMap === t5.sourceMap)
                    return;
                  o3(t5 = e5);
                } else
                  r3();
              };
            }
            t4.exports = function(t5, e4) {
              if (typeof DEBUG != "undefined" && DEBUG && typeof document != "object")
                throw new Error("The style-loader cannot be used in a non-browser environment");
              (e4 = e4 || {}).attrs = typeof e4.attrs == "object" ? e4.attrs : {}, e4.singleton || typeof e4.singleton == "boolean" || (e4.singleton = a2()), e4.insertInto || (e4.insertInto = "head"), e4.insertAt || (e4.insertAt = "bottom");
              var n4 = p2(t5, e4);
              return d2(n4, e4), function(t6) {
                for (var o3 = [], r3 = 0; r3 < n4.length; r3++) {
                  var a3 = n4[r3];
                  (s3 = i2[a3.id]).refs--, o3.push(s3);
                }
                for (t6 && d2(p2(t6, e4), e4), r3 = 0; r3 < o3.length; r3++) {
                  var s3;
                  if ((s3 = o3[r3]).refs === 0) {
                    for (var c3 = 0; c3 < s3.parts.length; c3++)
                      s3.parts[c3]();
                    delete i2[s3.id];
                  }
                }
              };
            };
            var m2, k2 = (m2 = [], function(t5, e4) {
              return m2[t5] = e4, m2.filter(Boolean).join("\n");
            });
            function x2(t5, e4, n4, o3) {
              var r3 = n4 ? "" : o3.css;
              if (t5.styleSheet)
                t5.styleSheet.cssText = k2(e4, r3);
              else {
                var i3 = document.createTextNode(r3), a3 = t5.childNodes;
                a3[e4] && t5.removeChild(a3[e4]), a3.length ? t5.insertBefore(i3, a3[e4]) : t5.appendChild(i3);
              }
            }
          }, function(t4, e3) {
            t4.exports = function(t5) {
              var e4 = typeof window != "undefined" && window.location;
              if (!e4)
                throw new Error("fixUrls requires window.location");
              if (!t5 || typeof t5 != "string")
                return t5;
              var n3 = e4.protocol + "//" + e4.host, o2 = n3 + e4.pathname.replace(/\/[^\/]*$/, "/");
              return t5.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(t6, e5) {
                var r2, i2 = e5.trim().replace(/^"(.*)"$/, function(t7, e6) {
                  return e6;
                }).replace(/^'(.*)'$/, function(t7, e6) {
                  return e6;
                });
                return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i2) ? t6 : (r2 = i2.indexOf("//") === 0 ? i2 : i2.indexOf("/") === 0 ? n3 + i2 : o2 + i2.replace(/^\.\//, ""), "url(" + JSON.stringify(r2) + ")");
              });
            };
          }, function(t4, e3, n3) {
            "use strict";
            var o2, r2, i2, a2, s2, c2;
            t4.exports = (o2 = "cdx-notify", r2 = "cdx-notify__cross", i2 = "cdx-notify__button--confirm", a2 = "cdx-notify__button", s2 = "cdx-notify__btns-wrapper", { alert: c2 = function(t5) {
              var e4 = document.createElement("DIV"), n4 = document.createElement("DIV"), i3 = t5.message, a3 = t5.style;
              return e4.classList.add(o2), a3 && e4.classList.add(o2 + "--" + a3), e4.innerHTML = i3, n4.classList.add(r2), n4.addEventListener("click", e4.remove.bind(e4)), e4.appendChild(n4), e4;
            }, confirm: function(t5) {
              var e4 = c2(t5), n4 = document.createElement("div"), o3 = document.createElement("button"), l2 = document.createElement("button"), u2 = e4.querySelector("." + r2), f3 = t5.cancelHandler, d2 = t5.okHandler;
              return n4.classList.add(s2), o3.innerHTML = t5.okText || "Confirm", l2.innerHTML = t5.cancelText || "Cancel", o3.classList.add(a2), l2.classList.add(a2), o3.classList.add(i2), l2.classList.add("cdx-notify__button--cancel"), f3 && typeof f3 == "function" && (l2.addEventListener("click", f3), u2.addEventListener("click", f3)), d2 && typeof d2 == "function" && o3.addEventListener("click", d2), o3.addEventListener("click", e4.remove.bind(e4)), l2.addEventListener("click", e4.remove.bind(e4)), n4.appendChild(o3), n4.appendChild(l2), e4.appendChild(n4), e4;
            }, prompt: function(t5) {
              var e4 = c2(t5), n4 = document.createElement("div"), o3 = document.createElement("button"), l2 = document.createElement("input"), u2 = e4.querySelector("." + r2), f3 = t5.cancelHandler, d2 = t5.okHandler;
              return n4.classList.add(s2), o3.innerHTML = t5.okText || "Ok", o3.classList.add(a2), o3.classList.add(i2), l2.classList.add("cdx-notify__input"), t5.placeholder && l2.setAttribute("placeholder", t5.placeholder), t5.default && (l2.value = t5.default), t5.inputType && (l2.type = t5.inputType), f3 && typeof f3 == "function" && u2.addEventListener("click", f3), d2 && typeof d2 == "function" && o3.addEventListener("click", function() {
                d2(l2.value);
              }), o3.addEventListener("click", e4.remove.bind(e4)), n4.appendChild(l2), n4.appendChild(o3), e4.appendChild(n4), e4;
            }, getWrapper: function() {
              var t5 = document.createElement("DIV");
              return t5.classList.add("cdx-notifies"), t5;
            } });
          }]);
        }, function(t3, e2, n2) {
          var o2, r2;
          (r2 = typeof (o2 = function() {
            function t4(t5) {
              var e4 = t5.tags;
              if (!Object.keys(e4).map(function(t6) {
                return typeof e4[t6];
              }).every(function(t6) {
                return t6 === "object" || t6 === "boolean" || t6 === "function";
              }))
                throw new Error("The configuration was invalid");
              this.config = t5;
            }
            var e3 = ["P", "LI", "TD", "TH", "DIV", "H1", "H2", "H3", "H4", "H5", "H6", "PRE"];
            function n3(t5) {
              return e3.indexOf(t5.nodeName) !== -1;
            }
            var o3 = ["A", "B", "STRONG", "I", "EM", "SUB", "SUP", "U", "STRIKE"];
            function r3(t5) {
              return o3.indexOf(t5.nodeName) !== -1;
            }
            function i2(t5, e4, n4) {
              return typeof t5.tags[e4] == "function" ? t5.tags[e4](n4) : t5.tags[e4];
            }
            function a2(t5, e4) {
              return e4 === void 0 || typeof e4 == "boolean" && !e4;
            }
            function s2(t5, e4, n4) {
              var o4 = t5.name.toLowerCase();
              return e4 !== true && (typeof e4[o4] == "function" ? !e4[o4](t5.value, n4) : e4[o4] === void 0 || e4[o4] === false || typeof e4[o4] == "string" && e4[o4] !== t5.value);
            }
            return t4.prototype.clean = function(t5) {
              const e4 = document.implementation.createHTMLDocument(), n4 = e4.createElement("div");
              return n4.innerHTML = t5, this._sanitize(e4, n4), n4.innerHTML;
            }, t4.prototype._sanitize = function(t5, e4) {
              var o4 = function(t6, e5) {
                return t6.createTreeWalker(e5, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT, null, false);
              }(t5, e4), c2 = o4.firstChild();
              if (c2)
                do {
                  if (c2.nodeType !== Node.TEXT_NODE) {
                    if (c2.nodeType === Node.COMMENT_NODE) {
                      e4.removeChild(c2), this._sanitize(t5, e4);
                      break;
                    }
                    var l2, u2 = r3(c2);
                    u2 && (l2 = Array.prototype.some.call(c2.childNodes, n3));
                    var f3 = !!e4.parentNode, d2 = n3(e4) && n3(c2) && f3, p2 = c2.nodeName.toLowerCase(), h2 = i2(this.config, p2, c2);
                    if (u2 && l2 || a2(0, h2) || !this.config.keepNestedBlockElements && d2) {
                      if (c2.nodeName !== "SCRIPT" && c2.nodeName !== "STYLE")
                        for (; c2.childNodes.length > 0; )
                          e4.insertBefore(c2.childNodes[0], c2);
                      e4.removeChild(c2), this._sanitize(t5, e4);
                      break;
                    }
                    for (var v2 = 0; v2 < c2.attributes.length; v2 += 1) {
                      var y2 = c2.attributes[v2];
                      s2(y2, h2, c2) && (c2.removeAttribute(y2.name), v2 -= 1);
                    }
                    this._sanitize(t5, c2);
                  } else if (c2.data.trim() === "" && (c2.previousElementSibling && n3(c2.previousElementSibling) || c2.nextElementSibling && n3(c2.nextElementSibling))) {
                    e4.removeChild(c2), this._sanitize(t5, e4);
                    break;
                  }
                } while (c2 = o4.nextSibling());
            }, t4;
          }) == "function" ? o2.call(e2, n2, e2, t3) : o2) === void 0 || (t3.exports = r2);
        }, function(t3, e2, n2) {
          window, t3.exports = function(t4) {
            var e3 = {};
            function n3(o2) {
              if (e3[o2])
                return e3[o2].exports;
              var r2 = e3[o2] = { i: o2, l: false, exports: {} };
              return t4[o2].call(r2.exports, r2, r2.exports, n3), r2.l = true, r2.exports;
            }
            return n3.m = t4, n3.c = e3, n3.d = function(t5, e4, o2) {
              n3.o(t5, e4) || Object.defineProperty(t5, e4, { enumerable: true, get: o2 });
            }, n3.r = function(t5) {
              typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t5, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t5, "__esModule", { value: true });
            }, n3.t = function(t5, e4) {
              if (1 & e4 && (t5 = n3(t5)), 8 & e4)
                return t5;
              if (4 & e4 && typeof t5 == "object" && t5 && t5.__esModule)
                return t5;
              var o2 = /* @__PURE__ */ Object.create(null);
              if (n3.r(o2), Object.defineProperty(o2, "default", { enumerable: true, value: t5 }), 2 & e4 && typeof t5 != "string")
                for (var r2 in t5)
                  n3.d(o2, r2, function(e5) {
                    return t5[e5];
                  }.bind(null, r2));
              return o2;
            }, n3.n = function(t5) {
              var e4 = t5 && t5.__esModule ? function() {
                return t5.default;
              } : function() {
                return t5;
              };
              return n3.d(e4, "a", e4), e4;
            }, n3.o = function(t5, e4) {
              return Object.prototype.hasOwnProperty.call(t5, e4);
            }, n3.p = "/", n3(n3.s = 0);
          }([function(t4, e3, n3) {
            function o2(t5, e4) {
              for (var n4 = 0; n4 < e4.length; n4++) {
                var o3 = e4[n4];
                o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t5, o3.key, o3);
              }
            }
            function r2(t5, e4, n4) {
              return e4 && o2(t5.prototype, e4), n4 && o2(t5, n4), t5;
            }
            n3(1).toString();
            var i2 = function() {
              function t5(e4) {
                var n4 = e4.data, o3 = e4.config, r3 = e4.api, i3 = e4.readOnly;
                !function(t6, e5) {
                  if (!(t6 instanceof e5))
                    throw new TypeError("Cannot call a class as a function");
                }(this, t5), this.api = r3, this.readOnly = i3, this._CSS = { block: this.api.styles.block, wrapper: "ce-paragraph" }, this.readOnly || (this.onKeyUp = this.onKeyUp.bind(this)), this._placeholder = o3.placeholder ? o3.placeholder : t5.DEFAULT_PLACEHOLDER, this._data = {}, this._element = this.drawView(), this._preserveBlank = o3.preserveBlank !== void 0 && o3.preserveBlank, this.data = n4;
              }
              return r2(t5, null, [{ key: "DEFAULT_PLACEHOLDER", get: function() {
                return "";
              } }]), r2(t5, [{ key: "onKeyUp", value: function(t6) {
                t6.code !== "Backspace" && t6.code !== "Delete" || this._element.textContent === "" && (this._element.innerHTML = "");
              } }, { key: "drawView", value: function() {
                var t6 = document.createElement("DIV");
                return t6.classList.add(this._CSS.wrapper, this._CSS.block), t6.contentEditable = false, t6.dataset.placeholder = this.api.i18n.t(this._placeholder), this.readOnly || (t6.contentEditable = true, t6.addEventListener("keyup", this.onKeyUp)), t6;
              } }, { key: "render", value: function() {
                return this._element;
              } }, { key: "merge", value: function(t6) {
                var e4 = { text: this.data.text + t6.text };
                this.data = e4;
              } }, { key: "validate", value: function(t6) {
                return !(t6.text.trim() === "" && !this._preserveBlank);
              } }, { key: "save", value: function(t6) {
                return { text: t6.innerHTML };
              } }, { key: "onPaste", value: function(t6) {
                var e4 = { text: t6.detail.data.innerHTML };
                this.data = e4;
              } }, { key: "data", get: function() {
                var t6 = this._element.innerHTML;
                return this._data.text = t6, this._data;
              }, set: function(t6) {
                this._data = t6 || {}, this._element.innerHTML = this._data.text || "";
              } }], [{ key: "conversionConfig", get: function() {
                return { export: "text", import: "text" };
              } }, { key: "sanitize", get: function() {
                return { text: { br: true } };
              } }, { key: "isReadOnlySupported", get: function() {
                return true;
              } }, { key: "pasteConfig", get: function() {
                return { tags: ["P"] };
              } }, { key: "toolbox", get: function() {
                return { icon: n3(5).default, title: "Text" };
              } }]), t5;
            }();
            t4.exports = i2;
          }, function(t4, e3, n3) {
            var o2 = n3(2), r2 = n3(3);
            typeof (r2 = r2.__esModule ? r2.default : r2) == "string" && (r2 = [[t4.i, r2, ""]]), o2(r2, { insert: "head", singleton: false }), t4.exports = r2.locals || {};
          }, function(t4, e3, n3) {
            "use strict";
            var o2, r2 = function() {
              var t5 = {};
              return function(e4) {
                if (t5[e4] === void 0) {
                  var n4 = document.querySelector(e4);
                  if (window.HTMLIFrameElement && n4 instanceof window.HTMLIFrameElement)
                    try {
                      n4 = n4.contentDocument.head;
                    } catch (t6) {
                      n4 = null;
                    }
                  t5[e4] = n4;
                }
                return t5[e4];
              };
            }(), i2 = [];
            function a2(t5) {
              for (var e4 = -1, n4 = 0; n4 < i2.length; n4++)
                if (i2[n4].identifier === t5) {
                  e4 = n4;
                  break;
                }
              return e4;
            }
            function s2(t5, e4) {
              for (var n4 = {}, o3 = [], r3 = 0; r3 < t5.length; r3++) {
                var s3 = t5[r3], c3 = e4.base ? s3[0] + e4.base : s3[0], l3 = n4[c3] || 0, u3 = "".concat(c3, " ").concat(l3);
                n4[c3] = l3 + 1;
                var f4 = a2(u3), d3 = { css: s3[1], media: s3[2], sourceMap: s3[3] };
                f4 !== -1 ? (i2[f4].references++, i2[f4].updater(d3)) : i2.push({ identifier: u3, updater: v2(d3, e4), references: 1 }), o3.push(u3);
              }
              return o3;
            }
            function c2(t5) {
              var e4 = document.createElement("style"), o3 = t5.attributes || {};
              if (o3.nonce === void 0) {
                var i3 = n3.nc;
                i3 && (o3.nonce = i3);
              }
              if (Object.keys(o3).forEach(function(t6) {
                e4.setAttribute(t6, o3[t6]);
              }), typeof t5.insert == "function")
                t5.insert(e4);
              else {
                var a3 = r2(t5.insert || "head");
                if (!a3)
                  throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");
                a3.appendChild(e4);
              }
              return e4;
            }
            var l2, u2 = (l2 = [], function(t5, e4) {
              return l2[t5] = e4, l2.filter(Boolean).join("\n");
            });
            function f3(t5, e4, n4, o3) {
              var r3 = n4 ? "" : o3.media ? "@media ".concat(o3.media, " {").concat(o3.css, "}") : o3.css;
              if (t5.styleSheet)
                t5.styleSheet.cssText = u2(e4, r3);
              else {
                var i3 = document.createTextNode(r3), a3 = t5.childNodes;
                a3[e4] && t5.removeChild(a3[e4]), a3.length ? t5.insertBefore(i3, a3[e4]) : t5.appendChild(i3);
              }
            }
            function d2(t5, e4, n4) {
              var o3 = n4.css, r3 = n4.media, i3 = n4.sourceMap;
              if (r3 ? t5.setAttribute("media", r3) : t5.removeAttribute("media"), i3 && btoa && (o3 += "\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i3)))), " */")), t5.styleSheet)
                t5.styleSheet.cssText = o3;
              else {
                for (; t5.firstChild; )
                  t5.removeChild(t5.firstChild);
                t5.appendChild(document.createTextNode(o3));
              }
            }
            var p2 = null, h2 = 0;
            function v2(t5, e4) {
              var n4, o3, r3;
              if (e4.singleton) {
                var i3 = h2++;
                n4 = p2 || (p2 = c2(e4)), o3 = f3.bind(null, n4, i3, false), r3 = f3.bind(null, n4, i3, true);
              } else
                n4 = c2(e4), o3 = d2.bind(null, n4, e4), r3 = function() {
                  !function(t6) {
                    if (t6.parentNode === null)
                      return false;
                    t6.parentNode.removeChild(t6);
                  }(n4);
                };
              return o3(t5), function(e5) {
                if (e5) {
                  if (e5.css === t5.css && e5.media === t5.media && e5.sourceMap === t5.sourceMap)
                    return;
                  o3(t5 = e5);
                } else
                  r3();
              };
            }
            t4.exports = function(t5, e4) {
              (e4 = e4 || {}).singleton || typeof e4.singleton == "boolean" || (e4.singleton = (o2 === void 0 && (o2 = Boolean(window && document && document.all && !window.atob)), o2));
              var n4 = s2(t5 = t5 || [], e4);
              return function(t6) {
                if (t6 = t6 || [], Object.prototype.toString.call(t6) === "[object Array]") {
                  for (var o3 = 0; o3 < n4.length; o3++) {
                    var r3 = a2(n4[o3]);
                    i2[r3].references--;
                  }
                  for (var c3 = s2(t6, e4), l3 = 0; l3 < n4.length; l3++) {
                    var u3 = a2(n4[l3]);
                    i2[u3].references === 0 && (i2[u3].updater(), i2.splice(u3, 1));
                  }
                  n4 = c3;
                }
              };
            };
          }, function(t4, e3, n3) {
            (e3 = n3(4)(false)).push([t4.i, ".ce-paragraph {\n    line-height: 1.6em;\n    outline: none;\n}\n\n.ce-paragraph[data-placeholder]:empty::before{\n  content: attr(data-placeholder);\n  color: #707684;\n  font-weight: normal;\n  opacity: 0;\n}\n\n/** Show placeholder at the first paragraph if Editor is empty */\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before {\n  opacity: 1;\n}\n\n.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty::before,\n.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus::before {\n  opacity: 0;\n}\n\n.ce-paragraph p:first-of-type{\n    margin-top: 0;\n}\n\n.ce-paragraph p:last-of-type{\n    margin-bottom: 0;\n}\n", ""]), t4.exports = e3;
          }, function(t4, e3, n3) {
            "use strict";
            t4.exports = function(t5) {
              var e4 = [];
              return e4.toString = function() {
                return this.map(function(e5) {
                  var n4 = function(t6, e6) {
                    var n5, o2, r2, i2 = t6[1] || "", a2 = t6[3];
                    if (!a2)
                      return i2;
                    if (e6 && typeof btoa == "function") {
                      var s2 = (n5 = a2, o2 = btoa(unescape(encodeURIComponent(JSON.stringify(n5)))), r2 = "sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o2), "/*# ".concat(r2, " */")), c2 = a2.sources.map(function(t7) {
                        return "/*# sourceURL=".concat(a2.sourceRoot || "").concat(t7, " */");
                      });
                      return [i2].concat(c2).concat([s2]).join("\n");
                    }
                    return [i2].join("\n");
                  }(e5, t5);
                  return e5[2] ? "@media ".concat(e5[2], " {").concat(n4, "}") : n4;
                }).join("");
              }, e4.i = function(t6, n4, o2) {
                typeof t6 == "string" && (t6 = [[null, t6, ""]]);
                var r2 = {};
                if (o2)
                  for (var i2 = 0; i2 < this.length; i2++) {
                    var a2 = this[i2][0];
                    a2 != null && (r2[a2] = true);
                  }
                for (var s2 = 0; s2 < t6.length; s2++) {
                  var c2 = [].concat(t6[s2]);
                  o2 && r2[c2[0]] || (n4 && (c2[2] ? c2[2] = "".concat(n4, " and ").concat(c2[2]) : c2[2] = n4), e4.push(c2));
                }
              }, e4;
            };
          }, function(t4, e3, n3) {
            "use strict";
            n3.r(e3), e3.default = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0.2 -0.3 9 11.4" width="12" height="14">\n  <path d="M0 2.77V.92A1 1 0 01.2.28C.35.1.56 0 .83 0h7.66c.28.01.48.1.63.28.14.17.21.38.21.64v1.85c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26a1 1 0 01-.21-.66V1.69H5.6v7.58h.5c.25 0 .45.08.6.23.17.16.25.35.25.6s-.08.45-.24.6a.87.87 0 01-.62.22H3.21a.87.87 0 01-.61-.22.78.78 0 01-.24-.6c0-.25.08-.44.24-.6a.85.85 0 01.61-.23h.5V1.7H1.73v1.08c0 .26-.08.48-.23.66-.15.17-.37.26-.66.26-.28 0-.5-.09-.64-.26A1 1 0 010 2.77z"/>\n</svg>\n';
          }]);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(15)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var c2 = function() {
              function t4() {
                (0, r3.default)(this, t4), this.commandName = "bold", this.CSS = { button: "ce-inline-tool", buttonActive: "ce-inline-tool--active", buttonModifier: "ce-inline-tool--bold" }, this.nodes = { button: void 0 };
              }
              return (0, i3.default)(t4, [{ key: "render", value: function() {
                return this.nodes.button = document.createElement("button"), this.nodes.button.type = "button", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.appendChild(a2.default.svg("bold", 12, 14)), this.nodes.button;
              } }, { key: "surround", value: function(t5) {
                document.execCommand(this.commandName);
              } }, { key: "checkState", value: function(t5) {
                var e3 = document.queryCommandState(this.commandName);
                return this.nodes.button.classList.toggle(this.CSS.buttonActive, e3), e3;
              } }, { key: "shortcut", get: function() {
                return "CMD+B";
              } }], [{ key: "sanitize", get: function() {
                return { b: {} };
              } }]), t4;
            }();
            o3.default = c2, c2.displayName = "BoldInlineTool", c2.isInline = true, c2.title = "Bold", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(15)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var c2 = function() {
              function t4() {
                (0, r3.default)(this, t4), this.commandName = "italic", this.CSS = { button: "ce-inline-tool", buttonActive: "ce-inline-tool--active", buttonModifier: "ce-inline-tool--italic" }, this.nodes = { button: null };
              }
              return (0, i3.default)(t4, [{ key: "render", value: function() {
                return this.nodes.button = document.createElement("button"), this.nodes.button.type = "button", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.appendChild(a2.default.svg("italic", 4, 11)), this.nodes.button;
              } }, { key: "surround", value: function(t5) {
                document.execCommand(this.commandName);
              } }, { key: "checkState", value: function(t5) {
                var e3 = document.queryCommandState(this.commandName);
                return this.nodes.button.classList.toggle(this.CSS.buttonActive, e3), e3;
              } }, { key: "shortcut", get: function() {
                return "CMD+I";
              } }], [{ key: "sanitize", get: function() {
                return { i: {} };
              } }]), t4;
            }();
            o3.default = c2, c2.displayName = "ItalicInlineTool", c2.isInline = true, c2.title = "Italic", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(25), n2(15), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2) {
            "use strict";
            var l2 = n2(9), u2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), a2 = u2(a2), s2 = u2(s2), c2 = l2(c2);
            var f3 = function() {
              function t4(e3) {
                var n3 = e3.api;
                (0, r3.default)(this, t4), this.commandLink = "createLink", this.commandUnlink = "unlink", this.ENTER_KEY = 13, this.CSS = { button: "ce-inline-tool", buttonActive: "ce-inline-tool--active", buttonModifier: "ce-inline-tool--link", buttonUnlink: "ce-inline-tool--unlink", input: "ce-inline-tool-input", inputShowed: "ce-inline-tool-input--showed" }, this.nodes = { button: null, input: null }, this.inputOpened = false, this.toolbar = n3.toolbar, this.inlineToolbar = n3.inlineToolbar, this.notifier = n3.notifier, this.i18n = n3.i18n, this.selection = new a2.default();
              }
              return (0, i3.default)(t4, [{ key: "render", value: function() {
                return this.nodes.button = document.createElement("button"), this.nodes.button.type = "button", this.nodes.button.classList.add(this.CSS.button, this.CSS.buttonModifier), this.nodes.button.appendChild(s2.default.svg("link", 14, 10)), this.nodes.button.appendChild(s2.default.svg("unlink", 15, 11)), this.nodes.button;
              } }, { key: "renderActions", value: function() {
                var t5 = this;
                return this.nodes.input = document.createElement("input"), this.nodes.input.placeholder = this.i18n.t("Add a link"), this.nodes.input.classList.add(this.CSS.input), this.nodes.input.addEventListener("keydown", function(e3) {
                  e3.keyCode === t5.ENTER_KEY && t5.enterPressed(e3);
                }), this.nodes.input;
              } }, { key: "surround", value: function(t5) {
                if (t5) {
                  this.inputOpened ? (this.selection.restore(), this.selection.removeFakeBackground()) : (this.selection.setFakeBackground(), this.selection.save());
                  var e3 = this.selection.findParentTag("A");
                  if (e3)
                    return this.selection.expandToTag(e3), this.unlink(), this.closeActions(), this.checkState(), void this.toolbar.close();
                }
                this.toggleActions();
              } }, { key: "checkState", value: function(t5) {
                var e3 = this.selection.findParentTag("A");
                if (e3) {
                  this.nodes.button.classList.add(this.CSS.buttonUnlink), this.nodes.button.classList.add(this.CSS.buttonActive), this.openActions();
                  var n3 = e3.getAttribute("href");
                  this.nodes.input.value = n3 !== "null" ? n3 : "", this.selection.save();
                } else
                  this.nodes.button.classList.remove(this.CSS.buttonUnlink), this.nodes.button.classList.remove(this.CSS.buttonActive);
                return !!e3;
              } }, { key: "clear", value: function() {
                this.closeActions();
              } }, { key: "toggleActions", value: function() {
                this.inputOpened ? this.closeActions(false) : this.openActions(true);
              } }, { key: "openActions", value: function() {
                var t5 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
                this.nodes.input.classList.add(this.CSS.inputShowed), t5 && this.nodes.input.focus(), this.inputOpened = true;
              } }, { key: "closeActions", value: function() {
                var t5 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0];
                if (this.selection.isFakeBackgroundEnabled) {
                  var e3 = new a2.default();
                  e3.save(), this.selection.restore(), this.selection.removeFakeBackground(), e3.restore();
                }
                this.nodes.input.classList.remove(this.CSS.inputShowed), this.nodes.input.value = "", t5 && this.selection.clearSaved(), this.inputOpened = false;
              } }, { key: "enterPressed", value: function(t5) {
                var e3 = this.nodes.input.value || "";
                return e3.trim() ? this.validateURL(e3) ? (e3 = this.prepareLink(e3), this.selection.restore(), this.selection.removeFakeBackground(), this.insertLink(e3), t5.preventDefault(), t5.stopPropagation(), t5.stopImmediatePropagation(), this.selection.collapseToEnd(), void this.inlineToolbar.close()) : (this.notifier.show({ message: "Pasted link is not valid.", style: "error" }), void c2.log("Incorrect Link pasted", "warn", e3)) : (this.selection.restore(), this.unlink(), t5.preventDefault(), void this.closeActions());
              } }, { key: "validateURL", value: function(t5) {
                return !/\s/.test(t5);
              } }, { key: "prepareLink", value: function(t5) {
                return t5 = t5.trim(), t5 = this.addProtocol(t5);
              } }, { key: "addProtocol", value: function(t5) {
                if (/^(\w+):(\/\/)?/.test(t5))
                  return t5;
                var e3 = /^\/[^/\s]/.test(t5), n3 = t5.substring(0, 1) === "#", o4 = /^\/\/[^/\s]/.test(t5);
                return e3 || n3 || o4 || (t5 = "http://" + t5), t5;
              } }, { key: "insertLink", value: function(t5) {
                var e3 = this.selection.findParentTag("A");
                e3 && this.selection.expandToTag(e3), document.execCommand(this.commandLink, false, t5);
              } }, { key: "unlink", value: function() {
                document.execCommand(this.commandUnlink);
              } }, { key: "shortcut", get: function() {
                return "CMD+K";
              } }], [{ key: "sanitize", get: function() {
                return { a: { href: true, target: "_blank", rel: "nofollow" } };
              } }]), t4;
            }();
            o3.default = f3, f3.displayName = "LinkInlineTool", f3.isInline = true, f3.title = "Link", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(15)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var c2 = function() {
              function t4(e3) {
                var n3 = e3.data, o4 = e3.api;
                (0, r3.default)(this, t4), this.CSS = { wrapper: "ce-stub", info: "ce-stub__info", title: "ce-stub__title", subtitle: "ce-stub__subtitle" }, this.api = o4, this.title = n3.title || this.api.i18n.t("Error"), this.subtitle = this.api.i18n.t("The block can not be displayed correctly."), this.savedData = n3.savedData, this.wrapper = this.make();
              }
              return (0, i3.default)(t4, [{ key: "render", value: function() {
                return this.wrapper;
              } }, { key: "save", value: function() {
                return this.savedData;
              } }, { key: "make", value: function() {
                var t5 = a2.default.make("div", this.CSS.wrapper), e3 = a2.default.svg("sad-face", 52, 52), n3 = a2.default.make("div", this.CSS.info), o4 = a2.default.make("div", this.CSS.title, { textContent: this.title }), r4 = a2.default.make("div", this.CSS.subtitle, { textContent: this.subtitle });
                return t5.appendChild(e3), n3.appendChild(o4), n3.appendChild(r4), t5.appendChild(n3), t5;
              } }]), t4;
            }();
            o3.default = c2, c2.displayName = "Stub", c2.isReadOnlySupported = true, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(66), n2(386), n2(387), n2(388)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = u2(r3), i3 = u2(i3), s2 = u2(s2), c2 = u2(c2), l2 = u2(l2);
            var f3 = function(t4, e3) {
              var n3 = {};
              for (var o4 in t4)
                Object.prototype.hasOwnProperty.call(t4, o4) && e3.indexOf(o4) < 0 && (n3[o4] = t4[o4]);
              if (t4 != null && typeof Object.getOwnPropertySymbols == "function") {
                var r4 = 0;
                for (o4 = Object.getOwnPropertySymbols(t4); r4 < o4.length; r4++)
                  e3.indexOf(o4[r4]) < 0 && Object.prototype.propertyIsEnumerable.call(t4, o4[r4]) && (n3[o4[r4]] = t4[o4[r4]]);
              }
              return n3;
            }, d2 = function() {
              function t4(e3, n3, o4) {
                (0, r3.default)(this, t4), this.api = o4, this.config = e3, this.editorConfig = n3;
              }
              return (0, i3.default)(t4, [{ key: "get", value: function(t5) {
                var e3 = this.config[t5], n3 = e3.class, o4 = e3.isInternal, r4 = o4 !== void 0 && o4, i4 = f3(e3, ["class", "isInternal"]);
                return new (this.getConstructor(n3))({ name: t5, constructable: n3, config: i4, api: this.api, isDefault: t5 === this.editorConfig.defaultBlock, defaultPlaceholder: this.editorConfig.placeholder, isInternal: r4 });
              } }, { key: "getConstructor", value: function(t5) {
                switch (true) {
                  case t5[a2.InternalInlineToolSettings.IsInline]:
                    return s2.default;
                  case t5[a2.InternalTuneSettings.IsTune]:
                    return c2.default;
                  default:
                    return l2.default;
                }
              } }]), t4;
            }();
            o3.default = d2, d2.displayName = "ToolsFactory", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(66)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(9), f3 = n2(1);
            function d2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = f3(r3), i3 = f3(i3), a2 = f3(a2), s2 = f3(s2), c2 = f3(c2);
            var p2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (d2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).type = l2.ToolType.Inline, t5;
              }
              return (0, i3.default)(o4, [{ key: "create", value: function() {
                return new this.constructable({ api: this.api.getMethodsForTool(this), config: this.settings });
              } }, { key: "title", get: function() {
                return this.constructable[l2.InternalInlineToolSettings.Title];
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = p2, p2.displayName = "InlineTool", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(66)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2) {
            "use strict";
            var u2 = n2(9), f3 = n2(1);
            function d2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = f3(r3), i3 = f3(i3), a2 = f3(a2), s2 = f3(s2), c2 = f3(c2);
            var p2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (d2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).type = l2.ToolType.Tune, t5;
              }
              return (0, i3.default)(o4, [{ key: "create", value: function(t5, e4) {
                return new this.constructable({ api: this.api.getMethodsForTool(this), settings: this.settings, block: e4, data: t5 });
              } }]), o4;
            }((l2 = u2(l2)).default);
            o3.default = p2, p2.displayName = "BlockTune", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(5), n2(6), n2(4), n2(66), n2(8)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(9), d2 = n2(1);
            function p2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = d2(r3), i3 = d2(i3), a2 = d2(a2), s2 = d2(s2), c2 = d2(c2), l2 = f3(l2), u2 = f3(u2);
            var h2 = function(t4) {
              (0, a2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, c2.default)(e3);
                if (p2()) {
                  var o5 = (0, c2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, s2.default)(this, t5);
              });
              function o4() {
                var t5;
                return (0, r3.default)(this, o4), (t5 = n3.apply(this, arguments)).type = l2.ToolType.Block, t5;
              }
              return (0, i3.default)(o4, [{ key: "create", value: function(t5, e4, n4) {
                return new this.constructable({ data: t5, block: e4, readOnly: n4, api: this.api.getMethodsForTool(this), config: this.settings });
              } }, { key: "isReadOnlySupported", get: function() {
                return this.constructable[l2.InternalBlockToolSettings.IsReadOnlySupported] === true;
              } }, { key: "isLineBreaksEnabled", get: function() {
                return this.constructable[l2.InternalBlockToolSettings.IsEnabledLineBreaks];
              } }, { key: "toolbox", get: function() {
                var t5 = this.constructable[l2.InternalBlockToolSettings.Toolbox], e4 = this.config[l2.UserSettings.Toolbox];
                if (!u2.isEmpty(t5) && (e4 != null ? e4 : t5) !== false)
                  return Object.assign({}, t5, e4);
              } }, { key: "conversionConfig", get: function() {
                return this.constructable[l2.InternalBlockToolSettings.ConversionConfig];
              } }, { key: "enabledInlineTools", get: function() {
                return this.config[l2.UserSettings.EnabledInlineTools];
              } }, { key: "enabledBlockTunes", get: function() {
                return this.config[l2.UserSettings.EnabledBlockTunes];
              } }, { key: "pasteConfig", get: function() {
                return this.constructable[l2.InternalBlockToolSettings.PasteConfig] || {};
              } }]), o4;
            }(l2.default);
            o3.default = h2, h2.displayName = "BlockTool", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(15)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var c2 = function() {
              function t4(e3) {
                var n3 = e3.api;
                (0, r3.default)(this, t4), this.CSS = { button: "ce-settings__button", wrapper: "ce-tune-move-down", animation: "wobble" }, this.api = n3;
              }
              return (0, i3.default)(t4, [{ key: "render", value: function() {
                var t5 = this, e3 = a2.default.make("div", [this.CSS.button, this.CSS.wrapper], {});
                return e3.appendChild(a2.default.svg("arrow-down", 14, 14)), this.api.listeners.on(e3, "click", function(n3) {
                  return t5.handleClick(n3, e3);
                }, false), this.api.tooltip.onHover(e3, this.api.i18n.t("Move down")), e3;
              } }, { key: "handleClick", value: function(t5, e3) {
                var n3 = this, o4 = this.api.blocks.getCurrentBlockIndex(), r4 = this.api.blocks.getBlockByIndex(o4 + 1);
                if (!r4)
                  return e3.classList.add(this.CSS.animation), void window.setTimeout(function() {
                    e3.classList.remove(n3.CSS.animation);
                  }, 500);
                var i4 = r4.holder, a3 = i4.getBoundingClientRect(), s3 = Math.abs(window.innerHeight - i4.offsetHeight);
                a3.top < window.innerHeight && (s3 = window.scrollY + i4.offsetHeight), window.scrollTo(0, s3), this.api.blocks.move(o4 + 1), this.api.tooltip.hide();
              } }]), t4;
            }();
            o3.default = c2, c2.displayName = "MoveDownTune", c2.isTune = true, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(15)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var c2 = function() {
              function t4(e3) {
                var n3 = this, o4 = e3.api;
                (0, r3.default)(this, t4), this.CSS = { button: "ce-settings__button", buttonDelete: "ce-settings__button--delete", buttonConfirm: "ce-settings__button--confirm" }, this.nodes = { button: null }, this.api = o4, this.resetConfirmation = function() {
                  n3.setConfirmation(false);
                };
              }
              return (0, i3.default)(t4, [{ key: "render", value: function() {
                var t5 = this;
                return this.nodes.button = a2.default.make("div", [this.CSS.button, this.CSS.buttonDelete], {}), this.nodes.button.appendChild(a2.default.svg("cross", 12, 12)), this.api.listeners.on(this.nodes.button, "click", function(e3) {
                  return t5.handleClick(e3);
                }, false), this.api.tooltip.onHover(this.nodes.button, this.api.i18n.t("Delete")), this.nodes.button;
              } }, { key: "handleClick", value: function(t5) {
                this.needConfirmation ? (this.api.events.off("block-settings-closed", this.resetConfirmation), this.api.blocks.delete(), this.api.toolbar.close(), this.api.tooltip.hide(), t5.stopPropagation()) : (this.setConfirmation(true), this.api.events.on("block-settings-closed", this.resetConfirmation));
              } }, { key: "setConfirmation", value: function(t5) {
                this.needConfirmation = t5, this.nodes.button.classList.add(this.CSS.buttonConfirm);
              } }]), t4;
            }();
            o3.default = c2, c2.displayName = "DeleteTune", c2.isTune = true, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(2), n2(3), n2(15)], (i2 = typeof (o2 = function(o3, r3, i3, a2) {
            "use strict";
            var s2 = n2(1);
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = s2(r3), i3 = s2(i3), a2 = s2(a2);
            var c2 = function() {
              function t4(e3) {
                var n3 = e3.api;
                (0, r3.default)(this, t4), this.CSS = { button: "ce-settings__button", wrapper: "ce-tune-move-up", animation: "wobble" }, this.api = n3;
              }
              return (0, i3.default)(t4, [{ key: "render", value: function() {
                var t5 = this, e3 = a2.default.make("div", [this.CSS.button, this.CSS.wrapper], {});
                return e3.appendChild(a2.default.svg("arrow-up", 14, 14)), this.api.listeners.on(e3, "click", function(n3) {
                  return t5.handleClick(n3, e3);
                }, false), this.api.tooltip.onHover(e3, this.api.i18n.t("Move up")), e3;
              } }, { key: "handleClick", value: function(t5, e3) {
                var n3 = this, o4 = this.api.blocks.getCurrentBlockIndex(), r4 = this.api.blocks.getBlockByIndex(o4), i4 = this.api.blocks.getBlockByIndex(o4 - 1);
                if (o4 === 0 || !r4 || !i4)
                  return e3.classList.add(this.CSS.animation), void window.setTimeout(function() {
                    e3.classList.remove(n3.CSS.animation);
                  }, 500);
                var a3, s3 = r4.holder, c3 = i4.holder, l2 = s3.getBoundingClientRect(), u2 = c3.getBoundingClientRect();
                a3 = u2.top > 0 ? Math.abs(l2.top) - Math.abs(u2.top) : window.innerHeight - Math.abs(l2.top) + Math.abs(u2.top), window.scrollBy(0, -1 * a3), this.api.blocks.move(o4 - 1), this.api.tooltip.hide();
              } }]), t4;
            }();
            o3.default = c2, c2.displayName = "MoveUpTune", c2.isTune = true, t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          var o2, r2, i2;
          typeof globalThis != "undefined" ? globalThis : typeof self != "undefined" && self, r2 = [e2, n2(29), n2(2), n2(3), n2(5), n2(6), n2(4), n2(146)], (i2 = typeof (o2 = function(o3, r3, i3, a2, s2, c2, l2, u2) {
            "use strict";
            var f3 = n2(1);
            function d2() {
              if (typeof Reflect == "undefined" || !Reflect.construct)
                return false;
              if (Reflect.construct.sham)
                return false;
              if (typeof Proxy == "function")
                return true;
              try {
                return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
                })), true;
              } catch (t4) {
                return false;
              }
            }
            Object.defineProperty(o3, "__esModule", { value: true }), o3.default = void 0, r3 = f3(r3), i3 = f3(i3), a2 = f3(a2), s2 = f3(s2), c2 = f3(c2), l2 = f3(l2);
            var p2 = function(t4) {
              (0, s2.default)(o4, t4);
              var e3, n3 = (e3 = o4, function() {
                var t5, n4 = (0, l2.default)(e3);
                if (d2()) {
                  var o5 = (0, l2.default)(this).constructor;
                  t5 = Reflect.construct(n4, arguments, o5);
                } else
                  t5 = n4.apply(this, arguments);
                return (0, c2.default)(this, t5);
              });
              function o4() {
                return (0, i3.default)(this, o4), n3.apply(this, arguments);
              }
              return (0, a2.default)(o4, [{ key: "blockTools", get: function() {
                return new o4(Array.from(this.entries()).filter(function(t5) {
                  return (0, r3.default)(t5, 2)[1].isBlock();
                }));
              } }, { key: "inlineTools", get: function() {
                return new o4(Array.from(this.entries()).filter(function(t5) {
                  return (0, r3.default)(t5, 2)[1].isInline();
                }));
              } }, { key: "blockTunes", get: function() {
                return new o4(Array.from(this.entries()).filter(function(t5) {
                  return (0, r3.default)(t5, 2)[1].isTune();
                }));
              } }, { key: "internalTools", get: function() {
                return new o4(Array.from(this.entries()).filter(function(t5) {
                  return (0, r3.default)(t5, 2)[1].isInternal;
                }));
              } }, { key: "externalTools", get: function() {
                return new o4(Array.from(this.entries()).filter(function(t5) {
                  return !(0, r3.default)(t5, 2)[1].isInternal;
                }));
              } }]), o4;
            }((0, (u2 = f3(u2)).default)(Map));
            o3.default = p2, p2.displayName = "ToolsCollection", t3.exports = e2.default;
          }) == "function" ? o2.apply(e2, r2) : o2) === void 0 || (t3.exports = i2);
        }, function(t3, e2, n2) {
          window, t3.exports = function(t4) {
            var e3 = {};
            function n3(o2) {
              if (e3[o2])
                return e3[o2].exports;
              var r2 = e3[o2] = { i: o2, l: false, exports: {} };
              return t4[o2].call(r2.exports, r2, r2.exports, n3), r2.l = true, r2.exports;
            }
            return n3.m = t4, n3.c = e3, n3.d = function(t5, e4, o2) {
              n3.o(t5, e4) || Object.defineProperty(t5, e4, { enumerable: true, get: o2 });
            }, n3.r = function(t5) {
              typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t5, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t5, "__esModule", { value: true });
            }, n3.t = function(t5, e4) {
              if (1 & e4 && (t5 = n3(t5)), 8 & e4)
                return t5;
              if (4 & e4 && typeof t5 == "object" && t5 && t5.__esModule)
                return t5;
              var o2 = /* @__PURE__ */ Object.create(null);
              if (n3.r(o2), Object.defineProperty(o2, "default", { enumerable: true, value: t5 }), 2 & e4 && typeof t5 != "string")
                for (var r2 in t5)
                  n3.d(o2, r2, function(e5) {
                    return t5[e5];
                  }.bind(null, r2));
              return o2;
            }, n3.n = function(t5) {
              var e4 = t5 && t5.__esModule ? function() {
                return t5.default;
              } : function() {
                return t5;
              };
              return n3.d(e4, "a", e4), e4;
            }, n3.o = function(t5, e4) {
              return Object.prototype.hasOwnProperty.call(t5, e4);
            }, n3.p = "", n3(n3.s = 0);
          }([function(t4, e3, n3) {
            t4.exports = n3(1);
          }, function(t4, e3, n3) {
            "use strict";
            n3.r(e3), n3.d(e3, "default", function() {
              return o2;
            });
            class o2 {
              constructor() {
                this.nodes = { wrapper: null, content: null }, this.showed = false, this.offsetTop = 10, this.offsetLeft = 10, this.offsetRight = 10, this.hidingDelay = 0, this.loadStyles(), this.prepare(), window.addEventListener("scroll", () => {
                  this.showed && this.hide(true);
                }, { passive: true });
              }
              get CSS() {
                return { tooltip: "ct", tooltipContent: "ct__content", tooltipShown: "ct--shown", placement: { left: "ct--left", bottom: "ct--bottom", right: "ct--right", top: "ct--top" } };
              }
              show(t5, e4, n4) {
                this.nodes.wrapper || this.prepare(), this.hidingTimeout && clearTimeout(this.hidingTimeout);
                const o3 = Object.assign({ placement: "bottom", marginTop: 0, marginLeft: 0, marginRight: 0, marginBottom: 0, delay: 70, hidingDelay: 0 }, n4);
                if (o3.hidingDelay && (this.hidingDelay = o3.hidingDelay), this.nodes.content.innerHTML = "", typeof e4 == "string")
                  this.nodes.content.appendChild(document.createTextNode(e4));
                else {
                  if (!(e4 instanceof Node))
                    throw Error("[CodeX Tooltip] Wrong type of \xABcontent\xBB passed. It should be an instance of Node or String. But " + typeof e4 + " given.");
                  this.nodes.content.appendChild(e4);
                }
                switch (this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)), o3.placement) {
                  case "top":
                    this.placeTop(t5, o3);
                    break;
                  case "left":
                    this.placeLeft(t5, o3);
                    break;
                  case "right":
                    this.placeRight(t5, o3);
                    break;
                  case "bottom":
                  default:
                    this.placeBottom(t5, o3);
                }
                o3 && o3.delay ? this.showingTimeout = setTimeout(() => {
                  this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = true;
                }, o3.delay) : (this.nodes.wrapper.classList.add(this.CSS.tooltipShown), this.showed = true);
              }
              hide(t5 = false) {
                if (this.hidingDelay && !t5)
                  return this.hidingTimeout && clearTimeout(this.hidingTimeout), void (this.hidingTimeout = setTimeout(() => {
                    this.hide(true);
                  }, this.hidingDelay));
                this.nodes.wrapper.classList.remove(this.CSS.tooltipShown), this.showed = false, this.showingTimeout && clearTimeout(this.showingTimeout);
              }
              onHover(t5, e4, n4) {
                t5.addEventListener("mouseenter", () => {
                  this.show(t5, e4, n4);
                }), t5.addEventListener("mouseleave", () => {
                  this.hide();
                });
              }
              prepare() {
                this.nodes.wrapper = this.make("div", this.CSS.tooltip), this.nodes.content = this.make("div", this.CSS.tooltipContent), this.append(this.nodes.wrapper, this.nodes.content), this.append(document.body, this.nodes.wrapper);
              }
              loadStyles() {
                const t5 = "codex-tooltips-style";
                if (document.getElementById(t5))
                  return;
                const e4 = n3(2), o3 = this.make("style", null, { textContent: e4.toString(), id: t5 });
                this.prepend(document.head, o3);
              }
              placeBottom(t5, e4) {
                const n4 = t5.getBoundingClientRect(), o3 = n4.left + t5.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2, r2 = n4.bottom + window.pageYOffset + this.offsetTop + e4.marginTop;
                this.applyPlacement("bottom", o3, r2);
              }
              placeTop(t5, e4) {
                const n4 = t5.getBoundingClientRect(), o3 = n4.left + t5.clientWidth / 2 - this.nodes.wrapper.offsetWidth / 2, r2 = n4.top + window.pageYOffset - this.nodes.wrapper.clientHeight - this.offsetTop;
                this.applyPlacement("top", o3, r2);
              }
              placeLeft(t5, e4) {
                const n4 = t5.getBoundingClientRect(), o3 = n4.left - this.nodes.wrapper.offsetWidth - this.offsetLeft - e4.marginLeft, r2 = n4.top + window.pageYOffset + t5.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;
                this.applyPlacement("left", o3, r2);
              }
              placeRight(t5, e4) {
                const n4 = t5.getBoundingClientRect(), o3 = n4.right + this.offsetRight + e4.marginRight, r2 = n4.top + window.pageYOffset + t5.clientHeight / 2 - this.nodes.wrapper.offsetHeight / 2;
                this.applyPlacement("right", o3, r2);
              }
              applyPlacement(t5, e4, n4) {
                this.nodes.wrapper.classList.add(this.CSS.placement[t5]), this.nodes.wrapper.style.left = e4 + "px", this.nodes.wrapper.style.top = n4 + "px";
              }
              make(t5, e4 = null, n4 = {}) {
                const o3 = document.createElement(t5);
                Array.isArray(e4) ? o3.classList.add(...e4) : e4 && o3.classList.add(e4);
                for (const t6 in n4)
                  n4.hasOwnProperty(t6) && (o3[t6] = n4[t6]);
                return o3;
              }
              append(t5, e4) {
                Array.isArray(e4) ? e4.forEach((e5) => t5.appendChild(e5)) : t5.appendChild(e4);
              }
              prepend(t5, e4) {
                Array.isArray(e4) ? (e4 = e4.reverse()).forEach((e5) => t5.prepend(e5)) : t5.prepend(e4);
              }
            }
          }, function(t4, e3) {
            t4.exports = `.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`;
          }]).default;
        }, function(t3, e2, n2) {
          "use strict";
          n2.r(e2), e2.default = '<?xml version="1.0" encoding="utf-8"?>\n<svg xmlns="http://www.w3.org/2000/svg">\n<symbol id="arrow-down" viewBox="0 0 14 14">\n  <path transform="matrix(1 0 0 -1 0 14)" d="M8.024 4.1v8.6a1.125 1.125 0 0 1-2.25 0V4.1L2.18 7.695A1.125 1.125 0 1 1 .59 6.104L6.103.588c.44-.439 1.151-.439 1.59 0l5.516 5.516a1.125 1.125 0 0 1-1.59 1.59L8.023 4.1z"/>\n\n</symbol>\n<symbol id="arrow-up" viewBox="0 0 14 14">\n    <path d="M8.024 4.1v8.6a1.125 1.125 0 0 1-2.25 0V4.1L2.18 7.695A1.125 1.125 0 1 1 .59 6.104L6.103.588c.44-.439 1.151-.439 1.59 0l5.516 5.516a1.125 1.125 0 0 1-1.59 1.59L8.023 4.1z"/>\n\n</symbol>\n<symbol id="bold" viewBox="0 0 12 14"><path d="M5.997 14H1.72c-.618 0-1.058-.138-1.323-.415C.132 13.308 0 12.867 0 12.262V1.738C0 1.121.135.676.406.406.676.136 1.114 0 1.719 0h4.536c.669 0 1.248.041 1.738.124.49.083.93.242 1.318.478a3.458 3.458 0 0 1 1.461 1.752c.134.366.2.753.2 1.16 0 1.401-.7 2.426-2.1 3.075 1.84.586 2.76 1.726 2.76 3.42 0 .782-.2 1.487-.602 2.114a3.61 3.61 0 0 1-1.623 1.39 5.772 5.772 0 0 1-1.471.377c-.554.073-1.2.11-1.939.11zm-.21-6.217h-2.95v4.087h3.046c1.916 0 2.874-.69 2.874-2.072 0-.707-.248-1.22-.745-1.537-.496-.319-1.238-.478-2.225-.478zM2.837 2.13v3.619h2.597c.707 0 1.252-.067 1.638-.2.385-.134.68-.389.883-.765.16-.267.239-.566.239-.897 0-.707-.252-1.176-.755-1.409-.503-.232-1.27-.348-2.301-.348H2.836z"/>\n</symbol>\n<symbol id="cross" viewBox="0 0 237 237">\n  <path transform="rotate(45 280.675 51.325)" d="M191 191V73c0-5.523 4.477-10 10-10h25c5.523 0 10 4.477 10 10v118h118c5.523 0 10 4.477 10 10v25c0 5.523-4.477 10-10 10H236v118c0 5.523-4.477 10-10 10h-25c-5.523 0-10-4.477-10-10V236H73c-5.523 0-10-4.477-10-10v-25c0-5.523 4.477-10 10-10h118z"/>\n\n</symbol>\n<symbol id="dots" viewBox="0 0 8 8">\n  <circle cx="6.5" cy="1.5" r="1.5"/>\n  <circle cx="6.5" cy="6.5" r="1.5"/>\n  <circle cx="1.5" cy="1.5" r="1.5"/>\n  <circle cx="1.5" cy="6.5" r="1.5"/>\n\n</symbol>\n<symbol id="italic" viewBox="0 0 4 11">\n    <path d="M3.289 4.17L2.164 9.713c-.078.384-.238.674-.48.87-.243.198-.52.296-.831.296-.312 0-.545-.1-.699-.302-.153-.202-.192-.49-.116-.864L1.15 4.225c.077-.38.232-.665.466-.857a1.25 1.25 0 01.818-.288c.312 0 .55.096.713.288.163.192.21.46.141.801zm-.667-2.09c-.295 0-.53-.09-.706-.273-.176-.181-.233-.439-.173-.77.055-.302.207-.55.457-.745C2.45.097 2.716 0 3 0c.273 0 .5.088.68.265.179.176.238.434.177.771-.06.327-.21.583-.45.767-.24.185-.502.277-.785.277z"/>\n\n</symbol>\n<symbol id="link" viewBox="0 0 14 10">\n  <path d="M6 0v2H5a3 3 0 000 6h1v2H5A5 5 0 115 0h1zm2 0h1a5 5 0 110 10H8V8h1a3 3 0 000-6H8V0zM5 4h4a1 1 0 110 2H5a1 1 0 110-2z"/>\n\n</symbol>\n<symbol id="plus" viewBox="0 0 14 14">\n    <path d="M8.05 5.8h4.625a1.125 1.125 0 0 1 0 2.25H8.05v4.625a1.125 1.125 0 0 1-2.25 0V8.05H1.125a1.125 1.125 0 0 1 0-2.25H5.8V1.125a1.125 1.125 0 0 1 2.25 0V5.8z"/>\n\n</symbol>\n<symbol id="sad-face" viewBox="0 0 52 52">\n    <path fill="#D76B6B" fill-rule="nonzero" d="M26 52C11.64 52 0 40.36 0 26S11.64 0 26 0s26 11.64 26 26-11.64 26-26 26zm0-3.25c12.564 0 22.75-10.186 22.75-22.75S38.564 3.25 26 3.25 3.25 13.436 3.25 26 13.436 48.75 26 48.75zM15.708 33.042a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm23.834 0a2.167 2.167 0 1 1 0-4.334 2.167 2.167 0 0 1 0 4.334zm-15.875 5.452a1.083 1.083 0 1 1-1.834-1.155c1.331-2.114 3.49-3.179 6.334-3.179 2.844 0 5.002 1.065 6.333 3.18a1.083 1.083 0 1 1-1.833 1.154c-.913-1.45-2.366-2.167-4.5-2.167s-3.587.717-4.5 2.167z"/>\n\n</symbol>\n<symbol id="toggler-down">\n  <path d="M6.5 9.294a.792.792 0 01-.562-.232L2.233 5.356a.794.794 0 011.123-1.123L6.5 7.377l3.144-3.144a.794.794 0 011.123 1.123L7.062 9.062a.792.792 0 01-.562.232z"/>\n\n</symbol>\n<symbol id="unlink" viewBox="0 0 15 11">\n  <path d="M13.073 2.099l-1.448 1.448A3 3 0 009 2H8V0h1c1.68 0 3.166.828 4.073 2.099zM6.929 4l-.879.879L7.172 6H5a1 1 0 110-2h1.929zM6 0v2H5a3 3 0 100 6h1v2H5A5 5 0 115 0h1zm6.414 7l2.122 2.121-1.415 1.415L11 8.414l-2.121 2.122L7.464 9.12 9.586 7 7.464 4.879 8.88 3.464 11 5.586l2.121-2.122 1.415 1.415L12.414 7z"/>\n\n</symbol></svg>';
        }, function(t3, e2) {
          t3.exports = '.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide,.codex-editor__redactor--hidden{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff "}@media (min-width:651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor__loader{position:relative;height:30vh}.codex-editor__loader:before{content:"";position:absolute;left:50%;top:50%;width:30px;height:30px;margin-top:-15px;margin-left:-15px;border-radius:50%;border:2px solid rgba(201,201,204,.48);border-top-color:transparent;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-animation:editor-loader-spin .8s linear infinite;animation:editor-loader-spin .8s linear infinite;will-change:transform}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:rgba(46,170,220,.2);border:1px solid transparent}.codex-editor svg{fill:currentColor;vertical-align:middle;max-height:100%}::-moz-selection{background-color:#d4ecff}::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}@-webkit-keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes editor-loader-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,transform;display:none}@media (max-width:650px){.ce-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}}@media (max-width:650px) and (max-width:650px){.ce-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}@media (max-width:650px){.ce-toolbar{padding:3px;margin-top:5px}.ce-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar--opened{display:block}@media (max-width:650px){.ce-toolbar--opened{display:-webkit-box;display:-ms-flexbox;display:flex}}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}@media (max-width:650px){.ce-toolbar__content{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;margin:0;max-width:calc(100% - 35px)}}.ce-toolbar__plus{color:#707684;cursor:pointer;width:34px;height:34px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;left:-34px;-ms-flex-negative:0;flex-shrink:0}.ce-toolbar__plus--active,.ce-toolbar__plus:hover{color:#388ae5}.ce-toolbar__plus--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}.ce-toolbar__plus--hidden{display:none}@media (max-width:650px){.ce-toolbar__plus{display:-webkit-inline-box!important;display:-ms-inline-flexbox!important;display:inline-flex!important;position:static;-webkit-transform:none!important;transform:none!important}}.ce-toolbar .ce-toolbox,.ce-toolbar__plus{top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.ce-toolbar__actions{position:absolute;right:-30px;top:5px;opacity:0}@media (max-width:650px){.ce-toolbar__actions{position:absolute;right:-28px;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}}.ce-toolbar__actions--opened{opacity:1}.ce-toolbar__actions-buttons{text-align:right}.ce-toolbar__settings-btn{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:18px;height:18px;color:#707684;cursor:pointer;background:#eff2f5;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-toolbar__settings-btn:hover{color:#1d202b}@media (max-width:650px){.ce-toolbar__settings-btn{background:transparent}}@media (min-width:651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}.ce-toolbox{position:absolute;visibility:hidden;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row}@media (max-width:650px){.ce-toolbox{position:static;-webkit-transform:none!important;transform:none!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow-x:auto}}.ce-toolbox--opened{opacity:1;visibility:visible}.ce-toolbox__button{color:#707684;cursor:pointer;width:34px;height:34px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-ms-flex-negative:0;flex-shrink:0}.ce-toolbox__button--active,.ce-toolbox__button:hover{color:#388ae5}.ce-toolbox__button--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbox-button-tooltip__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}@media (min-width:651px){.codex-editor--narrow .ce-toolbox{background:#fff;z-index:2}}.ce-inline-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-inline-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-inline-toolbar{-webkit-transform:translateX(-50%) translateY(8px) scale(.9);transform:translateX(-50%) translateY(8px) scale(.9);opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease,-webkit-transform .15s ease;transition:opacity .25s ease,-webkit-transform .15s ease;transition:transform .15s ease,opacity .25s ease;transition:transform .15s ease,opacity .25s ease,-webkit-transform .15s ease;will-change:transform,opacity;top:0;left:0}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.ce-inline-toolbar--left-oriented{-webkit-transform:translateX(-23px) translateY(8px) scale(.9);transform:translateX(-23px) translateY(8px) scale(.9)}.ce-inline-toolbar--left-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-23px);transform:translateX(-23px)}.ce-inline-toolbar--right-oriented{-webkit-transform:translateX(-100%) translateY(8px) scale(.9);transform:translateX(-100%) translateY(8px) scale(.9);margin-left:23px}.ce-inline-toolbar--right-oriented.ce-inline-toolbar--showed{-webkit-transform:translateX(-100%);transform:translateX(-100%)}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{width:100%;padding:0 6px}.ce-inline-toolbar__buttons,.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;height:34px;padding:0 9px 0 10px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48)}.ce-inline-toolbar__dropdown:hover{background:#eff2f5}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content{display:-webkit-box;display:-ms-flexbox;display:flex;font-weight:500;font-size:14px}.ce-inline-toolbar__dropdown-content svg{height:12px}.ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:4px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.ce-inline-tool:hover{background-color:#eff2f5}.ce-inline-tool{border-radius:0;line-height:normal;width:auto;padding:0 5px!important;min-width:24px}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool:not(:last-of-type){margin-right:2px}.ce-inline-tool .icon{height:12px}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48)}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-conversion-toolbar{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-conversion-toolbar{opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:150px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:20px;height:20px;border:1px solid rgba(201,201,204,.48);border-radius:3px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px;background:#fff}.ce-conversion-tool__icon svg{width:11px;height:11px}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-settings{position:absolute;background-color:#fff;border:1px solid #eaeaea;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px rgba(13,20,33,.13);border-radius:4px;z-index:2}@media (max-width:650px){.ce-settings{-webkit-box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);box-shadow:0 13px 7px -5px rgba(26,38,49,.09),6px 15px 34px -6px rgba(33,48,73,.29);border-bottom-color:#d5d7db}}.ce-settings{right:-1px;top:30px;min-width:114px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-settings--left-oriented:before{left:15px;margin-left:0}.ce-settings--right-oriented:before{left:auto;right:15px;margin-left:0}@media (max-width:650px){.ce-settings{bottom:40px;right:-11px;top:auto}}.ce-settings:before{left:auto;right:12px}@media (max-width:650px){.ce-settings:before{bottom:-5px;top:auto}}.ce-settings{display:none}.ce-settings--opened{display:block;-webkit-animation-duration:.1s;animation-duration:.1s;-webkit-animation-name:panelShowing;animation-name:panelShowing}.ce-settings__plugin-zone:not(:empty){padding:3px 3px 0}.ce-settings__default-zone:not(:empty){padding:3px}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.ce-settings__button:hover{background-color:#eff2f5}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button{line-height:32px}.ce-settings__button--disabled{cursor:not-allowed!important;opacity:.3}.ce-settings__button--selected{color:#388ae5}.ce-settings__button--delete{-webkit-transition:background-color .3s ease;transition:background-color .3s ease;will-change:background-color}.ce-settings__button--delete .icon{-webkit-transition:-webkit-transform .2s ease-out;transition:-webkit-transform .2s ease-out;transition:transform .2s ease-out;transition:transform .2s ease-out,-webkit-transform .2s ease-out;will-change:transform}.ce-settings__button--confirm{background-color:#e24a4a!important;color:#fff}.ce-settings__button--confirm:hover{background-color:#d54a4a!important}.ce-settings__button--confirm .icon{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content .ce-stub,.ce-block--selected .ce-block__content img{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388ae5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388ae5,#388ae5 1px,#fff 0,#fff 6px)}.ce-block a{cursor:pointer;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@media (min-width:651px){.codex-editor--narrow .ce-block--focused{margin-right:-50px;padding-right:50px}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translateZ(0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-5%,0,0) rotate(-5deg);transform:translate3d(-5%,0,0) rotate(-5deg)}30%{-webkit-transform:translate3d(2%,0,0) rotate(3deg);transform:translate3d(2%,0,0) rotate(3deg)}45%{-webkit-transform:translate3d(-3%,0,0) rotate(-3deg);transform:translate3d(-3%,0,0) rotate(-3deg)}60%{-webkit-transform:translate3d(2%,0,0) rotate(2deg);transform:translate3d(2%,0,0) rotate(2deg)}75%{-webkit-transform:translate3d(-1%,0,0) rotate(-1deg);transform:translate3d(-1%,0,0) rotate(-1deg)}to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scaleX(1);transform:scaleX(1)}}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.cdx-block{padding:.4em 0}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important;display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:34px;height:34px;line-height:34px;padding:0!important;text-align:center;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:#000;margin:0}.cdx-settings-button:hover{background-color:#eff2f5}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px rgba(7,161,227,.08);background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button:not(:nth-child(3n+3)){margin-right:3px}.cdx-settings-button:nth-child(n+4){margin-top:3px}.cdx-settings-button--active{color:#388ae5}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s linear infinite;animation:cdxRotation 1.2s linear infinite}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px 0 rgba(18,30,57,.04);color:#707684;text-align:center;cursor:pointer}.cdx-button:hover{background:#fbfcfe;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px 0 rgba(18,30,57,.08)}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;padding:3.5em 0;margin:17px 0;border-radius:3px;background:#fcf7f7;color:#b46262}.ce-stub__info{margin-left:20px}.ce-stub__title{margin-bottom:3px;font-weight:600;font-size:18px;text-transform:capitalize}.ce-stub__subtitle{font-size:16px}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-34px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-34px}@media (max-width:650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0 solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0;right:5px}}@media (min-width:651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}';
        }]);
      });
    }
  });

  // node_modules/editorjs-undo/dist/bundle.js
  var require_bundle = __commonJS({
    "node_modules/editorjs-undo/dist/bundle.js"(exports2, module2) {
      !function(t3, e2) {
        typeof exports2 == "object" && typeof module2 == "object" ? module2.exports = e2() : typeof define == "function" && define.amd ? define([], e2) : typeof exports2 == "object" ? exports2.Undo = e2() : t3.Undo = e2();
      }(window, function() {
        return function(t3) {
          var e2 = {};
          function n2(i2) {
            if (e2[i2])
              return e2[i2].exports;
            var o2 = e2[i2] = { i: i2, l: false, exports: {} };
            return t3[i2].call(o2.exports, o2, o2.exports, n2), o2.l = true, o2.exports;
          }
          return n2.m = t3, n2.c = e2, n2.d = function(t4, e3, i2) {
            n2.o(t4, e3) || Object.defineProperty(t4, e3, { enumerable: true, get: i2 });
          }, n2.r = function(t4) {
            typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t4, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t4, "__esModule", { value: true });
          }, n2.t = function(t4, e3) {
            if (1 & e3 && (t4 = n2(t4)), 8 & e3)
              return t4;
            if (4 & e3 && typeof t4 == "object" && t4 && t4.__esModule)
              return t4;
            var i2 = /* @__PURE__ */ Object.create(null);
            if (n2.r(i2), Object.defineProperty(i2, "default", { enumerable: true, value: t4 }), 2 & e3 && typeof t4 != "string")
              for (var o2 in t4)
                n2.d(i2, o2, function(e4) {
                  return t4[e4];
                }.bind(null, o2));
            return i2;
          }, n2.n = function(t4) {
            var e3 = t4 && t4.__esModule ? function() {
              return t4.default;
            } : function() {
              return t4;
            };
            return n2.d(e3, "a", e3), e3;
          }, n2.o = function(t4, e3) {
            return Object.prototype.hasOwnProperty.call(t4, e3);
          }, n2.p = "/", n2(n2.s = 0);
        }([function(t3, e2, n2) {
          "use strict";
          function i2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var i3 = e3[n3];
              i3.enumerable = i3.enumerable || false, i3.configurable = true, "value" in i3 && (i3.writable = true), Object.defineProperty(t4, i3.key, i3);
            }
          }
          n2.r(e2), n2.d(e2, "default", function() {
            return s2;
          });
          var o2 = function() {
            function t4(e4, n4) {
              !function(t5, e5) {
                if (!(t5 instanceof e5))
                  throw new TypeError("Cannot call a class as a function");
              }(this, t4), this.holder = typeof n4 == "string" ? document.getElementById(n4) : n4, this.observer = null, this.debounceTimer = 200, this.mutationDebouncer = this.debounce(function() {
                e4();
              }, this.debounceTimer);
            }
            var e3, n3, o3;
            return e3 = t4, (n3 = [{ key: "setMutationObserver", value: function() {
              var t5 = this, e4 = this.holder;
              this.observer = new MutationObserver(function(e5) {
                t5.mutationHandler(e5);
              }), this.observer.observe(e4, { childList: true, attributes: true, subtree: true, characterData: true, characterDataOldValue: true });
            } }, { key: "mutationHandler", value: function(t5) {
              var e4 = this, n4 = false;
              t5.forEach(function(t6) {
                switch (t6.type) {
                  case "childList":
                    t6.target === e4.holder ? e4.onDestroy() : n4 = true;
                    break;
                  case "characterData":
                    n4 = true;
                    break;
                  case "attributes":
                    t6.target.classList.contains("ce-block") || (n4 = true);
                }
              }), n4 && this.mutationDebouncer();
            } }, { key: "debounce", value: function(t5, e4) {
              var n4, i3 = this;
              return function() {
                for (var o4 = arguments.length, r3 = new Array(o4), s3 = 0; s3 < o4; s3++)
                  r3[s3] = arguments[s3];
                var a2 = i3;
                clearTimeout(n4), n4 = setTimeout(function() {
                  return t5.apply(a2, r3);
                }, e4);
              };
            } }, { key: "onDestroy", value: function() {
              var t5 = new CustomEvent("destroy");
              document.dispatchEvent(t5), this.observer.disconnect();
            } }]) && i2(e3.prototype, n3), o3 && i2(e3, o3), t4;
          }();
          function r2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var i3 = e3[n3];
              i3.enumerable = i3.enumerable || false, i3.configurable = true, "value" in i3 && (i3.writable = true), Object.defineProperty(t4, i3.key, i3);
            }
          }
          var s2 = function() {
            function t4(e4) {
              var n4 = this, i4 = e4.editor, r3 = e4.onUpdate, s3 = e4.maxLength;
              !function(t5, e5) {
                if (!(t5 instanceof e5))
                  throw new TypeError("Cannot call a class as a function");
              }(this, t4);
              var a2 = { maxLength: 30, onUpdate: function() {
              } }, u2 = i4.configuration;
              this.editor = i4, this.shouldSaveHistory = true, this.readOnly = u2.readOnly, this.maxLength = s3 || a2.maxLength, this.onUpdate = r3 || a2.onUpdate, new o2(function() {
                return n4.registerChange();
              }, u2.holder).setMutationObserver(), this.setEventListeners(), this.initialItem = null, this.clear();
            }
            var e3, n3, i3;
            return e3 = t4, i3 = [{ key: "isReadOnlySupported", get: function() {
              return true;
            } }], (n3 = [{ key: "truncate", value: function(t5, e4) {
              for (; t5.length > e4; )
                t5.shift();
            } }, { key: "initialize", value: function(t5) {
              var e4 = "blocks" in t5 ? t5.blocks : t5, n4 = { index: e4.length - 1, state: e4 };
              this.stack[0] = n4, this.initialItem = n4;
            } }, { key: "clear", value: function() {
              this.stack = this.initialItem ? [this.initialItem] : [{ index: 0, state: [] }], this.position = 0, this.onUpdate();
            } }, { key: "registerChange", value: function() {
              var t5 = this;
              this.readOnly || (this.editor && this.editor.save && this.shouldSaveHistory && this.editor.save().then(function(e4) {
                t5.editorDidUpdate(e4.blocks) && t5.save(e4.blocks);
              }), this.shouldSaveHistory = true);
            } }, { key: "editorDidUpdate", value: function(t5) {
              var e4 = this.stack[this.position].state;
              return t5.length !== e4.length || JSON.stringify(e4) !== JSON.stringify(t5);
            } }, { key: "save", value: function(t5) {
              this.position >= this.maxLength && this.truncate(this.stack, this.maxLength), this.position = Math.min(this.position, this.stack.length - 1), this.stack = this.stack.slice(0, this.position + 1);
              var e4 = this.editor.blocks.getCurrentBlockIndex();
              this.stack.push({ index: e4, state: t5 }), this.position += 1, this.onUpdate();
            } }, { key: "undo", value: function() {
              var t5 = this;
              if (this.canUndo()) {
                this.shouldSaveHistory = false;
                var e4 = this.stack[this.position -= 1], n4 = e4.index, i4 = e4.state;
                this.onUpdate(), this.editor.blocks.render({ blocks: i4 }).then(function() {
                  return t5.editor.caret.setToBlock(n4, "end");
                });
              }
            } }, { key: "redo", value: function() {
              var t5 = this;
              if (this.canRedo()) {
                this.shouldSaveHistory = false;
                var e4 = this.stack[this.position += 1], n4 = e4.index, i4 = e4.state;
                this.onUpdate(), this.editor.blocks.render({ blocks: i4 }).then(function() {
                  return t5.editor.caret.setToBlock(n4, "end");
                });
              }
            } }, { key: "canUndo", value: function() {
              return !this.readOnly && this.position > 0;
            } }, { key: "canRedo", value: function() {
              return !this.readOnly && this.position < this.count();
            } }, { key: "count", value: function() {
              return this.stack.length - 1;
            } }, { key: "setEventListeners", value: function() {
              var t5 = this, e4 = /(Mac)/i.test(navigator.platform) ? "metaKey" : "ctrlKey", n4 = function(n5) {
                n5[e4] && n5.key === "z" && (n5.preventDefault(), t5.undo());
              }, i4 = function(n5) {
                n5[e4] && n5.key === "y" && (n5.preventDefault(), t5.redo());
              };
              document.addEventListener("keydown", n4), document.addEventListener("keydown", i4), document.addEventListener("destroy", function() {
                document.removeEventListener("keydown", n4), document.removeEventListener("keydown", i4);
              });
            } }]) && r2(e3.prototype, n3), i3 && r2(e3, i3), t4;
          }();
        }]).default;
      });
    }
  });

  // frappe/public/js/frappe/utils/dashboard_utils.js
  var require_dashboard_utils = __commonJS({
    "frappe/public/js/frappe/utils/dashboard_utils.js"(exports, module) {
      frappe.dashboard_utils = {
        render_chart_filters: function(filters2, button_class, container, append) {
          filters2.forEach((filter) => {
            let icon_html = "", filter_class = "";
            if (filter.icon) {
              icon_html = frappe.utils.icon(filter.icon);
            }
            if (filter.class) {
              filter_class = filter.class;
            }
            let chart_filter_html = `<div class="${button_class} ${filter_class} btn-group dropdown pull-right">
					<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						<button class="btn btn-secondary btn-xs">
			 				${icon_html}
							<span class="filter-label">${filter.label}</span>
							${frappe.utils.icon("select", "xs")}
						</button>
				</a>`;
            let options_html;
            if (filter.fieldnames) {
              options_html = filter.options.map((option, i2) => `<li>
						<a class="dropdown-item" data-fieldname="${filter.fieldnames[i2]}">${option}</a>
					</li>`).join("");
            } else {
              options_html = filter.options.map((option) => `<li><a class="dropdown-item">${option}</a></li>`).join("");
            }
            let dropdown_html = chart_filter_html + `<ul class="dropdown-menu">${options_html}</ul></div>`;
            let $chart_filter = $(dropdown_html);
            if (append) {
              $chart_filter.prependTo(container);
            } else
              $chart_filter.appendTo(container);
            $chart_filter.find(".dropdown-menu").on("click", "li a", (e2) => {
              let $el = $(e2.currentTarget);
              let fieldname;
              if ($el.attr("data-fieldname")) {
                fieldname = $el.attr("data-fieldname");
              }
              let selected_item = $el.text();
              $el.parents(`.${button_class}`).find(".filter-label").text(selected_item);
              filter.action(selected_item, fieldname);
            });
          });
        },
        get_filters_for_chart_type: function(chart) {
          if (chart.chart_type === "Custom" && chart.source) {
            const method = "frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";
            return frappe.xcall(method, { name: chart.source }).then((config) => {
              frappe.dom.eval(config);
              return frappe.dashboards.chart_sources[chart.source].filters;
            });
          } else if (chart.chart_type === "Report" && chart.report_name) {
            return frappe.report_utils.get_report_filters(chart.report_name).then((filters2) => {
              return filters2;
            });
          } else {
            return Promise.resolve();
          }
        },
        get_dashboard_settings() {
          return frappe.db.get_list("Dashboard Settings", {
            filters: {
              name: frappe.session.user
            },
            fields: ["*"]
          }).then((settings) => {
            if (!settings.length) {
              return this.create_dashboard_settings().then((settings2) => {
                return settings2;
              });
            } else {
              return settings[0];
            }
          });
        },
        create_dashboard_settings() {
          return frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.create_dashboard_settings", {
            user: frappe.session.user
          }).then((settings) => {
            return settings;
          });
        },
        get_years_since_creation(creation) {
          let creation_year = this.get_year(creation);
          let current_year = this.get_year(frappe.datetime.now_date());
          let years_list = [];
          for (var year = current_year; year >= creation_year; year--) {
            years_list.push(year);
          }
          return years_list;
        },
        get_year(date_str) {
          return date_str.substring(0, date_str.indexOf("-"));
        },
        remove_common_static_filter_values(static_filters, dynamic_filters2) {
          if (dynamic_filters2) {
            if ($.isArray(static_filters)) {
              static_filters = static_filters.filter((static_filter) => {
                for (let dynamic_filter of dynamic_filters2) {
                  if (static_filter[0] == dynamic_filter[0] && static_filter[1] == dynamic_filter[1]) {
                    return false;
                  }
                }
                return true;
              });
            } else {
              for (let key2 of Object.keys(dynamic_filters2)) {
                delete static_filters[key2];
              }
            }
          }
          return static_filters;
        },
        get_fields_for_dynamic_filter_dialog(is_document_type, filters2, dynamic_filters2) {
          let fields = [
            {
              fieldtype: "HTML",
              fieldname: "description",
              options: `<div>
						<p>Set dynamic filter values in JavaScript for the required fields here.
						</p>
						<p>Ex:
							<code>frappe.defaults.get_user_default("Company")</code>
						</p>
					</div>`
            }
          ];
          if (is_document_type) {
            if (dynamic_filters2) {
              filters2 = [...filters2, ...dynamic_filters2];
            }
            filters2.forEach((f3) => {
              for (let field of fields) {
                if (field.fieldname == f3[0] + ":" + f3[1]) {
                  return;
                }
              }
              if (f3[2] == "=") {
                fields.push({
                  label: `${f3[1]} (${f3[0]})`,
                  fieldname: f3[0] + ":" + f3[1],
                  fieldtype: "Data"
                });
              }
            });
          } else {
            filters2 = __spreadValues(__spreadValues({}, dynamic_filters2), filters2);
            for (let key2 of Object.keys(filters2)) {
              fields.push({
                label: key2,
                fieldname: key2,
                fieldtype: "Data"
              });
            }
          }
          return fields;
        },
        get_all_filters(doc) {
          let filters = JSON.parse(doc.filters_json || "null");
          let dynamic_filters = JSON.parse(doc.dynamic_filters_json || "null");
          if (!dynamic_filters) {
            return filters;
          }
          if ($.isArray(dynamic_filters)) {
            dynamic_filters.forEach((f) => {
              try {
                f[3] = eval(f[3]);
              } catch (e2) {
                frappe.throw(__("Invalid expression set in filter {0} ({1})", [f[1], f[0]]));
              }
            });
            filters = [...filters, ...dynamic_filters];
          } else {
            for (let key of Object.keys(dynamic_filters)) {
              try {
                const val = eval(dynamic_filters[key]);
                dynamic_filters[key] = val;
              } catch (e2) {
                frappe.throw(__("Invalid expression set in filter {0}", [key]));
              }
            }
            Object.assign(filters, dynamic_filters);
          }
          return filters;
        },
        get_dashboard_link_field() {
          let field = {
            label: __("Select Dashboard"),
            fieldtype: "Link",
            fieldname: "dashboard",
            options: "Dashboard"
          };
          if (!frappe.boot.developer_mode) {
            field.get_query = () => {
              return {
                filters: {
                  is_standard: 0
                }
              };
            };
          }
          return field;
        },
        get_add_to_dashboard_dialog(docname, doctype2, method) {
          const field = this.get_dashboard_link_field();
          const dialog = new frappe.ui.Dialog({
            title: __("Add to Dashboard"),
            fields: [field],
            primary_action: (values) => {
              values.name = docname;
              values.set_standard = frappe.boot.developer_mode;
              frappe.xcall(method, { args: values }).then(() => {
                let dashboard_route_html = `<a href = "#dashboard/${values.dashboard}">${values.dashboard}</a>`;
                let message2 = __("{0} {1} added to Dashboard {2}", [doctype2, values.name, dashboard_route_html]);
                frappe.msgprint(message2);
              });
              dialog.hide();
            }
          });
          return dialog;
        }
      };
    }
  });

  // node_modules/frappe-datatable/node_modules/sortablejs/Sortable.js
  var require_Sortable = __commonJS({
    "node_modules/frappe-datatable/node_modules/sortablejs/Sortable.js"(exports2, module2) {
      (function sortableModule(factory) {
        "use strict";
        if (typeof define === "function" && define.amd) {
          define(factory);
        } else if (typeof module2 != "undefined" && typeof module2.exports != "undefined") {
          module2.exports = factory();
        } else {
          window["Sortable"] = factory();
        }
      })(function sortableFactory() {
        "use strict";
        if (typeof window === "undefined" || !window.document) {
          return function sortableError() {
            throw new Error("Sortable.js requires a window with a document");
          };
        }
        var dragEl, parentEl, ghostEl, cloneEl, rootEl, nextEl, lastDownEl, scrollEl, scrollParentEl, scrollCustomFn, oldIndex, newIndex, activeGroup, putSortable, autoScrolls = [], scrolling = false, awaitingDragStarted = false, ignoreNextClick = false, sortables = [], pointerElemChangedInterval, lastPointerElemX, lastPointerElemY, tapEvt, touchEvt, moved, lastTarget, lastDirection, pastFirstInvertThresh = false, isCircumstantialInvert = false, lastMode, targetMoveDistance, forRepaintDummy, realDragElRect, R_SPACE = /\s+/g, expando = "Sortable" + new Date().getTime(), win = window, document2 = win.document, parseInt2 = win.parseInt, setTimeout2 = win.setTimeout, $3 = win.jQuery || win.Zepto, Polymer = win.Polymer, captureMode = {
          capture: false,
          passive: false
        }, IE11OrLess = !!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i), Edge = !!navigator.userAgent.match(/Edge/i), CSSFloatProperty = Edge || IE11OrLess ? "cssFloat" : "float", supportDraggable = "draggable" in document2.createElement("div"), supportCssPointerEvents = function() {
          if (IE11OrLess) {
            return false;
          }
          var el = document2.createElement("x");
          el.style.cssText = "pointer-events:auto";
          return el.style.pointerEvents === "auto";
        }(), _silent = false, _alignedSilent = false, abs = Math.abs, min = Math.min, savedInputChecked = [], _detectDirection = function(el, options) {
          var elCSS = _css(el), elWidth = parseInt2(elCSS.width), child1 = _getChild(el, 0, options), child2 = _getChild(el, 1, options), firstChildCSS = child1 && _css(child1), secondChildCSS = child2 && _css(child2), firstChildWidth = firstChildCSS && parseInt2(firstChildCSS.marginLeft) + parseInt2(firstChildCSS.marginRight) + _getRect(child1).width, secondChildWidth = secondChildCSS && parseInt2(secondChildCSS.marginLeft) + parseInt2(secondChildCSS.marginRight) + _getRect(child2).width;
          if (elCSS.display === "flex") {
            return elCSS.flexDirection === "column" || elCSS.flexDirection === "column-reverse" ? "vertical" : "horizontal";
          }
          if (child1 && firstChildCSS.float !== "none") {
            var touchingSideChild2 = firstChildCSS.float === "left" ? "left" : "right";
            return child2 && (secondChildCSS.clear === "both" || secondChildCSS.clear === touchingSideChild2) ? "vertical" : "horizontal";
          }
          return child1 && (firstChildCSS.display === "block" || firstChildCSS.display === "flex" || firstChildCSS.display === "table" || firstChildCSS.display === "grid" || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === "none" || child2 && elCSS[CSSFloatProperty] === "none" && firstChildWidth + secondChildWidth > elWidth) ? "vertical" : "horizontal";
        }, _detectNearestEmptySortable = function(x2, y2) {
          for (var i2 = 0; i2 < sortables.length; i2++) {
            if (sortables[i2].children.length)
              continue;
            var rect = _getRect(sortables[i2]), threshold = sortables[i2][expando].options.emptyInsertThreshold, insideHorizontally = x2 >= rect.left - threshold && x2 <= rect.right + threshold, insideVertically = y2 >= rect.top - threshold && y2 <= rect.bottom + threshold;
            if (insideHorizontally && insideVertically) {
              return sortables[i2];
            }
          }
        }, _isClientInRowColumn = function(x2, y2, el, axis, options) {
          var targetRect = _getRect(el), targetS1Opp = axis === "vertical" ? targetRect.left : targetRect.top, targetS2Opp = axis === "vertical" ? targetRect.right : targetRect.bottom, mouseOnOppAxis = axis === "vertical" ? x2 : y2;
          return targetS1Opp < mouseOnOppAxis && mouseOnOppAxis < targetS2Opp;
        }, _isElInRowColumn = function(el1, el2, axis) {
          var el1Rect = el1 === dragEl && realDragElRect || _getRect(el1), el2Rect = el2 === dragEl && realDragElRect || _getRect(el2), el1S1Opp = axis === "vertical" ? el1Rect.left : el1Rect.top, el1S2Opp = axis === "vertical" ? el1Rect.right : el1Rect.bottom, el1OppLength = axis === "vertical" ? el1Rect.width : el1Rect.height, el2S1Opp = axis === "vertical" ? el2Rect.left : el2Rect.top, el2S2Opp = axis === "vertical" ? el2Rect.right : el2Rect.bottom, el2OppLength = axis === "vertical" ? el2Rect.width : el2Rect.height;
          return el1S1Opp === el2S1Opp || el1S2Opp === el2S2Opp || el1S1Opp + el1OppLength / 2 === el2S1Opp + el2OppLength / 2;
        }, _getParentAutoScrollElement = function(el, includeSelf) {
          if (!el || !el.getBoundingClientRect)
            return win;
          var elem = el;
          var gotSelf = false;
          do {
            if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {
              var elemCSS = _css(elem);
              if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == "auto" || elemCSS.overflowX == "scroll") || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == "auto" || elemCSS.overflowY == "scroll")) {
                if (!elem || !elem.getBoundingClientRect || elem === document2.body)
                  return win;
                if (gotSelf || includeSelf)
                  return elem;
                gotSelf = true;
              }
            }
          } while (elem = elem.parentNode);
          return win;
        }, _autoScroll = _throttle(function(evt, options, rootEl2, isFallback) {
          if (options.scroll) {
            var _this = rootEl2 ? rootEl2[expando] : window, sens = options.scrollSensitivity, speed = options.scrollSpeed, x2 = evt.clientX, y2 = evt.clientY, winWidth = window.innerWidth, winHeight = window.innerHeight, scrollThisInstance = false;
            if (scrollParentEl !== rootEl2) {
              _clearAutoScrolls();
              scrollEl = options.scroll;
              scrollCustomFn = options.scrollFn;
              if (scrollEl === true) {
                scrollEl = _getParentAutoScrollElement(rootEl2, true);
                scrollParentEl = scrollEl;
              }
            }
            var layersOut = 0;
            var currentParent = scrollEl;
            do {
              var el = currentParent, rect = _getRect(el), top = rect.top, bottom = rect.bottom, left = rect.left, right = rect.right, width = rect.width, height = rect.height, scrollWidth, scrollHeight, css, vx, vy, canScrollX, canScrollY, scrollPosX, scrollPosY;
              if (el !== win) {
                scrollWidth = el.scrollWidth;
                scrollHeight = el.scrollHeight;
                css = _css(el);
                canScrollX = width < scrollWidth && (css.overflowX === "auto" || css.overflowX === "scroll");
                canScrollY = height < scrollHeight && (css.overflowY === "auto" || css.overflowY === "scroll");
                scrollPosX = el.scrollLeft;
                scrollPosY = el.scrollTop;
              } else {
                scrollWidth = document2.documentElement.scrollWidth;
                scrollHeight = document2.documentElement.scrollHeight;
                css = _css(document2.documentElement);
                canScrollX = width < scrollWidth && (css.overflowX === "auto" || css.overflowX === "scroll" || css.overflowX === "visible");
                canScrollY = height < scrollHeight && (css.overflowY === "auto" || css.overflowY === "scroll" || css.overflowY === "visible");
                scrollPosX = document2.documentElement.scrollLeft;
                scrollPosY = document2.documentElement.scrollTop;
              }
              vx = canScrollX && (abs(right - x2) <= sens && scrollPosX + width < scrollWidth) - (abs(left - x2) <= sens && !!scrollPosX);
              vy = canScrollY && (abs(bottom - y2) <= sens && scrollPosY + height < scrollHeight) - (abs(top - y2) <= sens && !!scrollPosY);
              if (!autoScrolls[layersOut]) {
                for (var i2 = 0; i2 <= layersOut; i2++) {
                  if (!autoScrolls[i2]) {
                    autoScrolls[i2] = {};
                  }
                }
              }
              if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {
                autoScrolls[layersOut].el = el;
                autoScrolls[layersOut].vx = vx;
                autoScrolls[layersOut].vy = vy;
                clearInterval(autoScrolls[layersOut].pid);
                if (el && (vx != 0 || vy != 0)) {
                  scrollThisInstance = true;
                  autoScrolls[layersOut].pid = setInterval(function() {
                    if (isFallback && this.layer === 0) {
                      Sortable2.active._emulateDragOver(true);
                    }
                    var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;
                    var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;
                    if (typeof scrollCustomFn === "function") {
                      if (scrollCustomFn.call(_this, scrollOffsetX, scrollOffsetY, evt, touchEvt, autoScrolls[this.layer].el) !== "continue") {
                        return;
                      }
                    }
                    if (autoScrolls[this.layer].el === win) {
                      win.scrollTo(win.pageXOffset + scrollOffsetX, win.pageYOffset + scrollOffsetY);
                    } else {
                      autoScrolls[this.layer].el.scrollTop += scrollOffsetY;
                      autoScrolls[this.layer].el.scrollLeft += scrollOffsetX;
                    }
                  }.bind({ layer: layersOut }), 24);
                }
              }
              layersOut++;
            } while (options.bubbleScroll && currentParent !== win && (currentParent = _getParentAutoScrollElement(currentParent, false)));
            scrolling = scrollThisInstance;
          }
        }, 30), _clearAutoScrolls = function() {
          autoScrolls.forEach(function(autoScroll) {
            clearInterval(autoScroll.pid);
          });
          autoScrolls = [];
        }, _prepareGroup = function(options) {
          function toFn(value, pull) {
            return function(to, from, dragEl2, evt) {
              var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;
              if (value == null && (pull || sameGroup)) {
                return true;
              } else if (value == null || value === false) {
                return false;
              } else if (pull && value === "clone") {
                return value;
              } else if (typeof value === "function") {
                return toFn(value(to, from, dragEl2, evt), pull)(to, from, dragEl2, evt);
              } else {
                var otherGroup = (pull ? to : from).options.group.name;
                return value === true || typeof value === "string" && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;
              }
            };
          }
          var group = {};
          var originalGroup = options.group;
          if (!originalGroup || typeof originalGroup != "object") {
            originalGroup = { name: originalGroup };
          }
          group.name = originalGroup.name;
          group.checkPull = toFn(originalGroup.pull, true);
          group.checkPut = toFn(originalGroup.put);
          group.revertClone = originalGroup.revertClone;
          options.group = group;
        }, _checkAlignment = function(evt) {
          if (!dragEl || !dragEl.parentNode)
            return;
          dragEl.parentNode[expando] && dragEl.parentNode[expando]._computeIsAligned(evt);
        }, _isTrueParentSortable = function(el, target) {
          var trueParent = target;
          while (!trueParent[expando]) {
            trueParent = trueParent.parentNode;
          }
          return el === trueParent;
        }, _artificalBubble = function(sortable, originalEvt, method) {
          var nextParent = sortable.parentNode;
          while (nextParent && !nextParent[expando]) {
            nextParent = nextParent.parentNode;
          }
          if (nextParent) {
            nextParent[expando][method](_extend(originalEvt, {
              artificialBubble: true
            }));
          }
        }, _hideGhostForTarget = function() {
          if (!supportCssPointerEvents && ghostEl) {
            _css(ghostEl, "display", "none");
          }
        }, _unhideGhostForTarget = function() {
          if (!supportCssPointerEvents && ghostEl) {
            _css(ghostEl, "display", "");
          }
        };
        document2.addEventListener("click", function(evt) {
          if (ignoreNextClick) {
            evt.preventDefault();
            evt.stopPropagation && evt.stopPropagation();
            evt.stopImmediatePropagation && evt.stopImmediatePropagation();
            ignoreNextClick = false;
            return false;
          }
        }, true);
        var nearestEmptyInsertDetectEvent = function(evt) {
          evt = evt.touches ? evt.touches[0] : evt;
          if (dragEl) {
            var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);
            if (nearest) {
              nearest[expando]._onDragOver({
                clientX: evt.clientX,
                clientY: evt.clientY,
                target: nearest,
                rootEl: nearest
              });
            }
          }
        };
        _on(document2, "dragover", nearestEmptyInsertDetectEvent);
        _on(document2, "mousemove", nearestEmptyInsertDetectEvent);
        _on(document2, "touchmove", nearestEmptyInsertDetectEvent);
        function Sortable2(el, options) {
          if (!(el && el.nodeType && el.nodeType === 1)) {
            throw "Sortable: `el` must be HTMLElement, not " + {}.toString.call(el);
          }
          this.el = el;
          this.options = options = _extend({}, options);
          el[expando] = this;
          var defaults = {
            group: null,
            sort: true,
            disabled: false,
            store: null,
            handle: null,
            scroll: true,
            scrollSensitivity: 30,
            scrollSpeed: 10,
            bubbleScroll: true,
            draggable: /[uo]l/i.test(el.nodeName) ? ">li" : ">*",
            swapThreshold: 1,
            invertSwap: false,
            invertedSwapThreshold: null,
            removeCloneOnHide: true,
            direction: function() {
              return _detectDirection(el, this.options);
            },
            ghostClass: "sortable-ghost",
            chosenClass: "sortable-chosen",
            dragClass: "sortable-drag",
            ignore: "a, img",
            filter: null,
            preventOnFilter: true,
            animation: 0,
            easing: null,
            setData: function(dataTransfer, dragEl2) {
              dataTransfer.setData("Text", dragEl2.textContent);
            },
            dropBubble: false,
            dragoverBubble: false,
            dataIdAttr: "data-id",
            delay: 0,
            touchStartThreshold: parseInt2(window.devicePixelRatio, 10) || 1,
            forceFallback: false,
            fallbackClass: "sortable-fallback",
            fallbackOnBody: false,
            fallbackTolerance: 0,
            fallbackOffset: { x: 0, y: 0 },
            supportPointer: Sortable2.supportPointer !== false && ("PointerEvent" in window || window.navigator && "msPointerEnabled" in window.navigator),
            emptyInsertThreshold: 5
          };
          for (var name2 in defaults) {
            !(name2 in options) && (options[name2] = defaults[name2]);
          }
          _prepareGroup(options);
          for (var fn in this) {
            if (fn.charAt(0) === "_" && typeof this[fn] === "function") {
              this[fn] = this[fn].bind(this);
            }
          }
          this.nativeDraggable = options.forceFallback ? false : supportDraggable;
          if (options.supportPointer) {
            _on(el, "pointerdown", this._onTapStart);
          } else {
            _on(el, "mousedown", this._onTapStart);
            _on(el, "touchstart", this._onTapStart);
          }
          if (this.nativeDraggable) {
            _on(el, "dragover", this);
            _on(el, "dragenter", this);
          }
          sortables.push(this.el);
          options.store && options.store.get && this.sort(options.store.get(this) || []);
        }
        Sortable2.prototype = {
          constructor: Sortable2,
          _computeIsAligned: function(evt) {
            var target;
            if (ghostEl && !supportCssPointerEvents) {
              _hideGhostForTarget();
              target = document2.elementFromPoint(evt.clientX, evt.clientY);
              _unhideGhostForTarget();
            } else {
              target = evt.target;
            }
            target = _closest(target, this.options.draggable, this.el, false);
            if (_alignedSilent)
              return;
            if (!dragEl || dragEl.parentNode !== this.el)
              return;
            var children = this.el.children;
            for (var i2 = 0; i2 < children.length; i2++) {
              if (_closest(children[i2], this.options.draggable, this.el, false) && children[i2] !== target) {
                children[i2].sortableMouseAligned = _isClientInRowColumn(evt.clientX, evt.clientY, children[i2], this._getDirection(evt, null), this.options);
              }
            }
            if (!_closest(target, this.options.draggable, this.el, true)) {
              lastTarget = null;
            }
            _alignedSilent = true;
            setTimeout2(function() {
              _alignedSilent = false;
            }, 30);
          },
          _getDirection: function(evt, target) {
            return typeof this.options.direction === "function" ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;
          },
          _onTapStart: function(evt) {
            if (!evt.cancelable)
              return;
            var _this = this, el = this.el, options = this.options, preventOnFilter = options.preventOnFilter, type = evt.type, touch = evt.touches && evt.touches[0], target = (touch || evt).target, originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target, filter = options.filter, startIndex;
            _saveInputCheckedState(el);
            if (IE11OrLess && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {
              return;
            }
            if (dragEl) {
              return;
            }
            if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {
              return;
            }
            if (originalTarget.isContentEditable) {
              return;
            }
            target = _closest(target, options.draggable, el, false);
            if (!target) {
              if (IE11OrLess) {
                _artificalBubble(el, evt, "_onTapStart");
              }
              return;
            }
            if (lastDownEl === target) {
              return;
            }
            startIndex = _index(target, options.draggable);
            if (typeof filter === "function") {
              if (filter.call(this, evt, target, this)) {
                _dispatchEvent(_this, originalTarget, "filter", target, el, el, startIndex);
                preventOnFilter && evt.cancelable && evt.preventDefault();
                return;
              }
            } else if (filter) {
              filter = filter.split(",").some(function(criteria) {
                criteria = _closest(originalTarget, criteria.trim(), el, false);
                if (criteria) {
                  _dispatchEvent(_this, criteria, "filter", target, el, el, startIndex);
                  return true;
                }
              });
              if (filter) {
                preventOnFilter && evt.cancelable && evt.preventDefault();
                return;
              }
            }
            if (options.handle && !_closest(originalTarget, options.handle, el, false)) {
              return;
            }
            this._prepareDragStart(evt, touch, target, startIndex);
          },
          _handleAutoScroll: function(evt, fallback) {
            if (!dragEl || !this.options.scroll)
              return;
            var x2 = evt.clientX, y2 = evt.clientY, elem = document2.elementFromPoint(x2, y2), _this = this;
            if (fallback || Edge || IE11OrLess) {
              _autoScroll(evt, _this.options, elem, fallback);
              var ogElemScroller = _getParentAutoScrollElement(elem, true);
              if (scrolling && (!pointerElemChangedInterval || x2 !== lastPointerElemX || y2 !== lastPointerElemY)) {
                pointerElemChangedInterval && clearInterval(pointerElemChangedInterval);
                pointerElemChangedInterval = setInterval(function() {
                  if (!dragEl)
                    return;
                  var newElem = _getParentAutoScrollElement(document2.elementFromPoint(x2, y2), true);
                  if (newElem !== ogElemScroller) {
                    ogElemScroller = newElem;
                    _clearAutoScrolls();
                    _autoScroll(evt, _this.options, ogElemScroller, fallback);
                  }
                }, 10);
                lastPointerElemX = x2;
                lastPointerElemY = y2;
              }
            } else {
              if (!_this.options.bubbleScroll || _getParentAutoScrollElement(elem, true) === window) {
                _clearAutoScrolls();
                return;
              }
              _autoScroll(evt, _this.options, _getParentAutoScrollElement(elem, false), false);
            }
          },
          _prepareDragStart: function(evt, touch, target, startIndex) {
            var _this = this, el = _this.el, options = _this.options, ownerDocument = el.ownerDocument, dragStartFn;
            if (target && !dragEl && target.parentNode === el) {
              rootEl = el;
              dragEl = target;
              parentEl = dragEl.parentNode;
              nextEl = dragEl.nextSibling;
              lastDownEl = target;
              activeGroup = options.group;
              oldIndex = startIndex;
              tapEvt = {
                target: dragEl,
                clientX: (touch || evt).clientX,
                clientY: (touch || evt).clientY
              };
              this._lastX = (touch || evt).clientX;
              this._lastY = (touch || evt).clientY;
              dragEl.style["will-change"] = "all";
              dragEl.style.transition = "";
              dragEl.style.transform = "";
              dragStartFn = function() {
                _this._disableDelayedDrag();
                dragEl.draggable = _this.nativeDraggable;
                _this._triggerDragStart(evt, touch);
                _dispatchEvent(_this, rootEl, "choose", dragEl, rootEl, rootEl, oldIndex);
                _toggleClass(dragEl, options.chosenClass, true);
              };
              options.ignore.split(",").forEach(function(criteria) {
                _find(dragEl, criteria.trim(), _disableDraggable);
              });
              if (options.supportPointer) {
                _on(ownerDocument, "pointerup", _this._onDrop);
              } else {
                _on(ownerDocument, "mouseup", _this._onDrop);
                _on(ownerDocument, "touchend", _this._onDrop);
                _on(ownerDocument, "touchcancel", _this._onDrop);
              }
              if (options.delay) {
                _on(ownerDocument, "mouseup", _this._disableDelayedDrag);
                _on(ownerDocument, "touchend", _this._disableDelayedDrag);
                _on(ownerDocument, "touchcancel", _this._disableDelayedDrag);
                _on(ownerDocument, "mousemove", _this._delayedDragTouchMoveHandler);
                _on(ownerDocument, "touchmove", _this._delayedDragTouchMoveHandler);
                options.supportPointer && _on(ownerDocument, "pointermove", _this._delayedDragTouchMoveHandler);
                _this._dragStartTimer = setTimeout2(dragStartFn, options.delay);
              } else {
                dragStartFn();
              }
            }
          },
          _delayedDragTouchMoveHandler: function(e2) {
            var touch = e2.touches ? e2.touches[0] : e2;
            if (min(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) >= this.options.touchStartThreshold) {
              this._disableDelayedDrag();
            }
          },
          _disableDelayedDrag: function() {
            var ownerDocument = this.el.ownerDocument;
            clearTimeout(this._dragStartTimer);
            _off(ownerDocument, "mouseup", this._disableDelayedDrag);
            _off(ownerDocument, "touchend", this._disableDelayedDrag);
            _off(ownerDocument, "touchcancel", this._disableDelayedDrag);
            _off(ownerDocument, "mousemove", this._delayedDragTouchMoveHandler);
            _off(ownerDocument, "touchmove", this._delayedDragTouchMoveHandler);
            _off(ownerDocument, "pointermove", this._delayedDragTouchMoveHandler);
          },
          _triggerDragStart: function(evt, touch) {
            touch = touch || (evt.pointerType == "touch" ? evt : null);
            if (!this.nativeDraggable || touch) {
              if (this.options.supportPointer) {
                _on(document2, "pointermove", this._onTouchMove);
              } else if (touch) {
                _on(document2, "touchmove", this._onTouchMove);
              } else {
                _on(document2, "mousemove", this._onTouchMove);
              }
            } else {
              _on(dragEl, "dragend", this);
              _on(rootEl, "dragstart", this._onDragStart);
            }
            try {
              if (document2.selection) {
                _nextTick(function() {
                  document2.selection.empty();
                });
              } else {
                window.getSelection().removeAllRanges();
              }
            } catch (err) {
            }
          },
          _dragStarted: function(fallback) {
            awaitingDragStarted = false;
            if (rootEl && dragEl) {
              if (this.nativeDraggable) {
                _on(document2, "dragover", this._handleAutoScroll);
                _on(document2, "dragover", _checkAlignment);
              }
              var options = this.options;
              !fallback && _toggleClass(dragEl, options.dragClass, false);
              _toggleClass(dragEl, options.ghostClass, true);
              _css(dragEl, "transform", "");
              Sortable2.active = this;
              fallback && this._appendGhost();
              _dispatchEvent(this, rootEl, "start", dragEl, rootEl, rootEl, oldIndex);
            } else {
              this._nulling();
            }
          },
          _emulateDragOver: function(bypassLastTouchCheck) {
            if (touchEvt) {
              if (this._lastX === touchEvt.clientX && this._lastY === touchEvt.clientY && !bypassLastTouchCheck) {
                return;
              }
              this._lastX = touchEvt.clientX;
              this._lastY = touchEvt.clientY;
              _hideGhostForTarget();
              var target = document2.elementFromPoint(touchEvt.clientX, touchEvt.clientY);
              var parent = target;
              while (target && target.shadowRoot) {
                target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);
                parent = target;
              }
              if (parent) {
                do {
                  if (parent[expando]) {
                    var inserted;
                    inserted = parent[expando]._onDragOver({
                      clientX: touchEvt.clientX,
                      clientY: touchEvt.clientY,
                      target,
                      rootEl: parent
                    });
                    if (inserted && !this.options.dragoverBubble) {
                      break;
                    }
                  }
                  target = parent;
                } while (parent = parent.parentNode);
              }
              dragEl.parentNode[expando]._computeIsAligned(touchEvt);
              _unhideGhostForTarget();
            }
          },
          _onTouchMove: function(evt) {
            if (tapEvt) {
              var options = this.options, fallbackTolerance = options.fallbackTolerance, fallbackOffset = options.fallbackOffset, touch = evt.touches ? evt.touches[0] : evt, matrix = ghostEl && _matrix(ghostEl), scaleX = ghostEl && matrix && matrix.a, scaleY = ghostEl && matrix && matrix.d, dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX ? scaleX : 1), dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY ? scaleY : 1), translate3d = evt.touches ? "translate3d(" + dx + "px," + dy + "px,0)" : "translate(" + dx + "px," + dy + "px)";
              if (!Sortable2.active && !awaitingDragStarted) {
                if (fallbackTolerance && min(abs(touch.clientX - this._lastX), abs(touch.clientY - this._lastY)) < fallbackTolerance) {
                  return;
                }
                this._onDragStart(evt, true);
              }
              this._handleAutoScroll(touch, true);
              moved = true;
              touchEvt = touch;
              _css(ghostEl, "webkitTransform", translate3d);
              _css(ghostEl, "mozTransform", translate3d);
              _css(ghostEl, "msTransform", translate3d);
              _css(ghostEl, "transform", translate3d);
              evt.cancelable && evt.preventDefault();
            }
          },
          _appendGhost: function() {
            if (!ghostEl) {
              var rect = _getRect(dragEl, this.options.fallbackOnBody ? document2.body : rootEl, true), css = _css(dragEl), options = this.options;
              ghostEl = dragEl.cloneNode(true);
              _toggleClass(ghostEl, options.ghostClass, false);
              _toggleClass(ghostEl, options.fallbackClass, true);
              _toggleClass(ghostEl, options.dragClass, true);
              _css(ghostEl, "box-sizing", "border-box");
              _css(ghostEl, "margin", 0);
              _css(ghostEl, "top", rect.top);
              _css(ghostEl, "left", rect.left);
              _css(ghostEl, "width", rect.width);
              _css(ghostEl, "height", rect.height);
              _css(ghostEl, "opacity", "0.8");
              _css(ghostEl, "position", "fixed");
              _css(ghostEl, "zIndex", "100000");
              _css(ghostEl, "pointerEvents", "none");
              options.fallbackOnBody && document2.body.appendChild(ghostEl) || rootEl.appendChild(ghostEl);
            }
          },
          _onDragStart: function(evt, fallback) {
            var _this = this;
            var dataTransfer = evt.dataTransfer;
            var options = _this.options;
            cloneEl = _clone(dragEl);
            cloneEl.draggable = false;
            cloneEl.style["will-change"] = "";
            this._hideClone();
            _toggleClass(cloneEl, _this.options.chosenClass, false);
            _this._cloneId = _nextTick(function() {
              if (!_this.options.removeCloneOnHide) {
                rootEl.insertBefore(cloneEl, dragEl);
              }
              _dispatchEvent(_this, rootEl, "clone", dragEl);
            });
            !fallback && _toggleClass(dragEl, options.dragClass, true);
            if (fallback) {
              ignoreNextClick = true;
              _this._loopId = setInterval(_this._emulateDragOver, 50);
            } else {
              _off(document2, "mouseup", _this._onDrop);
              _off(document2, "touchend", _this._onDrop);
              _off(document2, "touchcancel", _this._onDrop);
              if (dataTransfer) {
                dataTransfer.effectAllowed = "move";
                options.setData && options.setData.call(_this, dataTransfer, dragEl);
              }
              _on(document2, "drop", _this);
              _css(dragEl, "transform", "translateZ(0)");
            }
            awaitingDragStarted = true;
            _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback));
            _on(document2, "selectstart", _this);
          },
          _onDragOver: function(evt) {
            var el = this.el, target = evt.target, dragRect, targetRect, revert, options = this.options, group = options.group, activeSortable = Sortable2.active, isOwner = activeGroup === group, canSort = options.sort, _this = this;
            if (_silent)
              return;
            if (IE11OrLess && !evt.rootEl && !evt.artificialBubble && !_isTrueParentSortable(el, target)) {
              return;
            }
            function completed() {
              if (activeSortable) {
                _toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);
                _toggleClass(dragEl, options.ghostClass, true);
              }
              if (putSortable !== _this && _this !== Sortable2.active) {
                putSortable = _this;
              } else if (_this === Sortable2.active) {
                putSortable = null;
              }
              if (target === dragEl && !dragEl.animated || target === el && !target.animated) {
                lastTarget = null;
              }
              if (!options.dragoverBubble && !evt.rootEl && target !== document2) {
                _this._handleAutoScroll(evt);
                dragEl.parentNode[expando]._computeIsAligned(evt);
              }
              !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();
              return true;
            }
            function changed() {
              _dispatchEvent(_this, rootEl, "change", target, el, rootEl, oldIndex, _index(dragEl, options.draggable), evt);
            }
            if (evt.preventDefault !== void 0) {
              evt.cancelable && evt.preventDefault();
            }
            moved = true;
            target = _closest(target, options.draggable, el, true);
            if (!!_closest(evt.target, null, dragEl, true) || target.animated) {
              return completed();
            }
            if (target !== dragEl) {
              ignoreNextClick = false;
            }
            if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = !rootEl.contains(dragEl)) : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {
              var axis = this._getDirection(evt, target);
              dragRect = _getRect(dragEl);
              if (revert) {
                this._hideClone();
                parentEl = rootEl;
                if (nextEl) {
                  rootEl.insertBefore(dragEl, nextEl);
                } else {
                  rootEl.appendChild(dragEl);
                }
                return completed();
              }
              if (el.children.length === 0 || el.children[0] === ghostEl || _ghostIsLast(evt, axis, el) && !dragEl.animated) {
                if (el.children.length !== 0 && el.children[0] !== ghostEl && el === evt.target) {
                  target = _lastChild(el);
                }
                if (target) {
                  targetRect = _getRect(target);
                }
                if (isOwner) {
                  activeSortable._hideClone();
                } else {
                  activeSortable._showClone(this);
                }
                if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {
                  el.appendChild(dragEl);
                  parentEl = el;
                  realDragElRect = null;
                  changed();
                  this._animate(dragRect, dragEl);
                  target && this._animate(targetRect, target);
                  return completed();
                }
              } else if (target && target !== dragEl && target.parentNode === el) {
                var direction = 0, targetBeforeFirstSwap, aligned = target.sortableMouseAligned, differentLevel = dragEl.parentNode !== el, scrolledPastTop = _isScrolledPast(target, axis === "vertical" ? "top" : "left");
                if (lastTarget !== target) {
                  lastMode = null;
                  targetBeforeFirstSwap = _getRect(target)[axis === "vertical" ? "top" : "left"];
                  pastFirstInvertThresh = false;
                }
                if (_isElInRowColumn(dragEl, target, axis) && aligned || differentLevel || scrolledPastTop || options.invertSwap || lastMode === "insert" || lastMode === "swap") {
                  if (lastMode !== "swap") {
                    isCircumstantialInvert = options.invertSwap || differentLevel || scrolling || scrolledPastTop;
                  }
                  direction = _getSwapDirection(evt, target, axis, options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);
                  lastMode = "swap";
                } else {
                  direction = _getInsertDirection(target, options);
                  lastMode = "insert";
                }
                if (direction === 0)
                  return completed();
                realDragElRect = null;
                lastTarget = target;
                lastDirection = direction;
                targetRect = _getRect(target);
                var nextSibling = target.nextElementSibling, after = false;
                after = direction === 1;
                var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);
                if (moveVector !== false) {
                  if (moveVector === 1 || moveVector === -1) {
                    after = moveVector === 1;
                  }
                  _silent = true;
                  setTimeout2(_unsilent, 30);
                  if (isOwner) {
                    activeSortable._hideClone();
                  } else {
                    activeSortable._showClone(this);
                  }
                  if (after && !nextSibling) {
                    el.appendChild(dragEl);
                  } else {
                    target.parentNode.insertBefore(dragEl, after ? nextSibling : target);
                  }
                  parentEl = dragEl.parentNode;
                  if (targetBeforeFirstSwap !== void 0 && !isCircumstantialInvert) {
                    targetMoveDistance = abs(targetBeforeFirstSwap - _getRect(target)[axis === "vertical" ? "top" : "left"]);
                  }
                  changed();
                  !differentLevel && this._animate(targetRect, target);
                  this._animate(dragRect, dragEl);
                  return completed();
                }
              }
              if (el.contains(dragEl)) {
                return completed();
              }
            }
            if (IE11OrLess && !evt.rootEl) {
              _artificalBubble(el, evt, "_onDragOver");
            }
            return false;
          },
          _animate: function(prevRect, target) {
            var ms = this.options.animation;
            if (ms) {
              var currentRect = _getRect(target);
              if (target === dragEl) {
                realDragElRect = currentRect;
              }
              if (prevRect.nodeType === 1) {
                prevRect = _getRect(prevRect);
              }
              if (prevRect.left + prevRect.width / 2 !== currentRect.left + currentRect.width / 2 || prevRect.top + prevRect.height / 2 !== currentRect.top + currentRect.height / 2) {
                var matrix = _matrix(this.el), scaleX = matrix && matrix.a, scaleY = matrix && matrix.d;
                _css(target, "transition", "none");
                _css(target, "transform", "translate3d(" + (prevRect.left - currentRect.left) / (scaleX ? scaleX : 1) + "px," + (prevRect.top - currentRect.top) / (scaleY ? scaleY : 1) + "px,0)");
                forRepaintDummy = target.offsetWidth;
                _css(target, "transition", "transform " + ms + "ms" + (this.options.easing ? " " + this.options.easing : ""));
                _css(target, "transform", "translate3d(0,0,0)");
              }
              typeof target.animated === "number" && clearTimeout(target.animated);
              target.animated = setTimeout2(function() {
                _css(target, "transition", "");
                _css(target, "transform", "");
                target.animated = false;
              }, ms);
            }
          },
          _offUpEvents: function() {
            var ownerDocument = this.el.ownerDocument;
            _off(document2, "touchmove", this._onTouchMove);
            _off(document2, "pointermove", this._onTouchMove);
            _off(ownerDocument, "mouseup", this._onDrop);
            _off(ownerDocument, "touchend", this._onDrop);
            _off(ownerDocument, "pointerup", this._onDrop);
            _off(ownerDocument, "touchcancel", this._onDrop);
            _off(document2, "selectstart", this);
          },
          _onDrop: function(evt) {
            var el = this.el, options = this.options;
            awaitingDragStarted = false;
            scrolling = false;
            isCircumstantialInvert = false;
            pastFirstInvertThresh = false;
            clearInterval(this._loopId);
            clearInterval(pointerElemChangedInterval);
            _clearAutoScrolls();
            _cancelThrottle();
            clearTimeout(this._dragStartTimer);
            _cancelNextTick(this._cloneId);
            _cancelNextTick(this._dragStartId);
            _off(document2, "mousemove", this._onTouchMove);
            if (this.nativeDraggable) {
              _off(document2, "drop", this);
              _off(el, "dragstart", this._onDragStart);
              _off(document2, "dragover", this._handleAutoScroll);
              _off(document2, "dragover", _checkAlignment);
            }
            this._offUpEvents();
            if (evt) {
              if (moved) {
                evt.cancelable && evt.preventDefault();
                !options.dropBubble && evt.stopPropagation();
              }
              ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);
              if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== "clone") {
                cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);
              }
              if (dragEl) {
                if (this.nativeDraggable) {
                  _off(dragEl, "dragend", this);
                }
                _disableDraggable(dragEl);
                dragEl.style["will-change"] = "";
                _toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);
                _toggleClass(dragEl, this.options.chosenClass, false);
                _dispatchEvent(this, rootEl, "unchoose", dragEl, parentEl, rootEl, oldIndex, null, evt);
                if (rootEl !== parentEl) {
                  newIndex = _index(dragEl, options.draggable);
                  if (newIndex >= 0) {
                    _dispatchEvent(null, parentEl, "add", dragEl, parentEl, rootEl, oldIndex, newIndex, evt);
                    _dispatchEvent(this, rootEl, "remove", dragEl, parentEl, rootEl, oldIndex, newIndex, evt);
                    _dispatchEvent(null, parentEl, "sort", dragEl, parentEl, rootEl, oldIndex, newIndex, evt);
                    _dispatchEvent(this, rootEl, "sort", dragEl, parentEl, rootEl, oldIndex, newIndex, evt);
                  }
                  putSortable && putSortable.save();
                } else {
                  if (dragEl.nextSibling !== nextEl) {
                    newIndex = _index(dragEl, options.draggable);
                    if (newIndex >= 0) {
                      _dispatchEvent(this, rootEl, "update", dragEl, parentEl, rootEl, oldIndex, newIndex, evt);
                      _dispatchEvent(this, rootEl, "sort", dragEl, parentEl, rootEl, oldIndex, newIndex, evt);
                    }
                  }
                }
                if (Sortable2.active) {
                  if (newIndex == null || newIndex === -1) {
                    newIndex = oldIndex;
                  }
                  _dispatchEvent(this, rootEl, "end", dragEl, parentEl, rootEl, oldIndex, newIndex, evt);
                  this.save();
                }
              }
            }
            this._nulling();
          },
          _nulling: function() {
            rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = scrollEl = scrollParentEl = autoScrolls.length = pointerElemChangedInterval = lastPointerElemX = lastPointerElemY = tapEvt = touchEvt = moved = newIndex = oldIndex = lastTarget = lastDirection = forRepaintDummy = realDragElRect = putSortable = activeGroup = Sortable2.active = null;
            savedInputChecked.forEach(function(el) {
              el.checked = true;
            });
            savedInputChecked.length = 0;
          },
          handleEvent: function(evt) {
            switch (evt.type) {
              case "drop":
              case "dragend":
                this._onDrop(evt);
                break;
              case "dragenter":
              case "dragover":
                if (dragEl) {
                  this._onDragOver(evt);
                  _globalDragOver(evt);
                }
                break;
              case "selectstart":
                evt.preventDefault();
                break;
            }
          },
          toArray: function() {
            var order = [], el, children = this.el.children, i2 = 0, n2 = children.length, options = this.options;
            for (; i2 < n2; i2++) {
              el = children[i2];
              if (_closest(el, options.draggable, this.el, false)) {
                order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));
              }
            }
            return order;
          },
          sort: function(order) {
            var items = {}, rootEl2 = this.el;
            this.toArray().forEach(function(id, i2) {
              var el = rootEl2.children[i2];
              if (_closest(el, this.options.draggable, rootEl2, false)) {
                items[id] = el;
              }
            }, this);
            order.forEach(function(id) {
              if (items[id]) {
                rootEl2.removeChild(items[id]);
                rootEl2.appendChild(items[id]);
              }
            });
          },
          save: function() {
            var store = this.options.store;
            store && store.set && store.set(this);
          },
          closest: function(el, selector) {
            return _closest(el, selector || this.options.draggable, this.el, false);
          },
          option: function(name2, value) {
            var options = this.options;
            if (value === void 0) {
              return options[name2];
            } else {
              options[name2] = value;
              if (name2 === "group") {
                _prepareGroup(options);
              }
            }
          },
          destroy: function() {
            var el = this.el;
            el[expando] = null;
            _off(el, "mousedown", this._onTapStart);
            _off(el, "touchstart", this._onTapStart);
            _off(el, "pointerdown", this._onTapStart);
            if (this.nativeDraggable) {
              _off(el, "dragover", this);
              _off(el, "dragenter", this);
            }
            Array.prototype.forEach.call(el.querySelectorAll("[draggable]"), function(el2) {
              el2.removeAttribute("draggable");
            });
            this._onDrop();
            sortables.splice(sortables.indexOf(this.el), 1);
            this.el = el = null;
          },
          _hideClone: function() {
            if (!cloneEl.cloneHidden) {
              _css(cloneEl, "display", "none");
              cloneEl.cloneHidden = true;
              if (cloneEl.parentNode && this.options.removeCloneOnHide) {
                cloneEl.parentNode.removeChild(cloneEl);
              }
            }
          },
          _showClone: function(putSortable2) {
            if (putSortable2.lastPutMode !== "clone") {
              this._hideClone();
              return;
            }
            if (cloneEl.cloneHidden) {
              if (rootEl.contains(dragEl) && !this.options.group.revertClone) {
                rootEl.insertBefore(cloneEl, dragEl);
              } else if (nextEl) {
                rootEl.insertBefore(cloneEl, nextEl);
              } else {
                rootEl.appendChild(cloneEl);
              }
              if (this.options.group.revertClone) {
                this._animate(dragEl, cloneEl);
              }
              _css(cloneEl, "display", "");
              cloneEl.cloneHidden = false;
            }
          }
        };
        function _closest(el, selector, ctx, includeCTX) {
          if (el) {
            ctx = ctx || document2;
            do {
              if (selector != null && (selector[0] === ">" && el.parentNode === ctx && _matches(el, selector.substring(1)) || _matches(el, selector)) || includeCTX && el === ctx) {
                return el;
              }
              if (el === ctx)
                break;
            } while (el = _getParentOrHost(el));
          }
          return null;
        }
        function _getParentOrHost(el) {
          return el.host && el !== document2 && el.host.nodeType ? el.host : el.parentNode;
        }
        function _globalDragOver(evt) {
          if (evt.dataTransfer) {
            evt.dataTransfer.dropEffect = "move";
          }
          evt.cancelable && evt.preventDefault();
        }
        function _on(el, event2, fn) {
          el.addEventListener(event2, fn, captureMode);
        }
        function _off(el, event2, fn) {
          el.removeEventListener(event2, fn, captureMode);
        }
        function _toggleClass(el, name2, state) {
          if (el && name2) {
            if (el.classList) {
              el.classList[state ? "add" : "remove"](name2);
            } else {
              var className = (" " + el.className + " ").replace(R_SPACE, " ").replace(" " + name2 + " ", " ");
              el.className = (className + (state ? " " + name2 : "")).replace(R_SPACE, " ");
            }
          }
        }
        function _css(el, prop, val2) {
          var style = el && el.style;
          if (style) {
            if (val2 === void 0) {
              if (document2.defaultView && document2.defaultView.getComputedStyle) {
                val2 = document2.defaultView.getComputedStyle(el, "");
              } else if (el.currentStyle) {
                val2 = el.currentStyle;
              }
              return prop === void 0 ? val2 : val2[prop];
            } else {
              if (!(prop in style) && prop.indexOf("webkit") === -1) {
                prop = "-webkit-" + prop;
              }
              style[prop] = val2 + (typeof val2 === "string" ? "" : "px");
            }
          }
        }
        function _matrix(el) {
          var appliedTransforms = "";
          do {
            var transform2 = _css(el, "transform");
            if (transform2 && transform2 !== "none") {
              appliedTransforms = transform2 + " " + appliedTransforms;
            }
          } while (el = el.parentNode);
          if (window.DOMMatrix) {
            return new DOMMatrix(appliedTransforms);
          } else if (window.WebKitCSSMatrix) {
            return new WebKitCSSMatrix(appliedTransforms);
          } else if (window.CSSMatrix) {
            return new CSSMatrix(appliedTransforms);
          }
        }
        function _find(ctx, tagName, iterator) {
          if (ctx) {
            var list = ctx.getElementsByTagName(tagName), i2 = 0, n2 = list.length;
            if (iterator) {
              for (; i2 < n2; i2++) {
                iterator(list[i2], i2);
              }
            }
            return list;
          }
          return [];
        }
        function _dispatchEvent(sortable, rootEl2, name2, targetEl, toEl, fromEl, startIndex, newIndex2, originalEvt) {
          sortable = sortable || rootEl2[expando];
          var evt, options = sortable.options, onName = "on" + name2.charAt(0).toUpperCase() + name2.substr(1);
          if (window.CustomEvent && !IE11OrLess && !Edge) {
            evt = new CustomEvent(name2, {
              bubbles: true,
              cancelable: true
            });
          } else {
            evt = document2.createEvent("Event");
            evt.initEvent(name2, true, true);
          }
          evt.to = toEl || rootEl2;
          evt.from = fromEl || rootEl2;
          evt.item = targetEl || rootEl2;
          evt.clone = cloneEl;
          evt.oldIndex = startIndex;
          evt.newIndex = newIndex2;
          evt.originalEvent = originalEvt;
          if (rootEl2) {
            rootEl2.dispatchEvent(evt);
          }
          if (options[onName]) {
            options[onName].call(sortable, evt);
          }
        }
        function _onMove(fromEl, toEl, dragEl2, dragRect, targetEl, targetRect, originalEvt, willInsertAfter) {
          var evt, sortable = fromEl[expando], onMoveFn = sortable.options.onMove, retVal;
          if (window.CustomEvent && !IE11OrLess && !Edge) {
            evt = new CustomEvent("move", {
              bubbles: true,
              cancelable: true
            });
          } else {
            evt = document2.createEvent("Event");
            evt.initEvent("move", true, true);
          }
          evt.to = toEl;
          evt.from = fromEl;
          evt.dragged = dragEl2;
          evt.draggedRect = dragRect;
          evt.related = targetEl || toEl;
          evt.relatedRect = targetRect || _getRect(toEl);
          evt.willInsertAfter = willInsertAfter;
          evt.originalEvent = originalEvt;
          fromEl.dispatchEvent(evt);
          if (onMoveFn) {
            retVal = onMoveFn.call(sortable, evt, originalEvt);
          }
          return retVal;
        }
        function _disableDraggable(el) {
          el.draggable = false;
        }
        function _unsilent() {
          _silent = false;
        }
        function _getChild(el, childNum, options) {
          var currentChild = 0, i2 = 0, children = el.children;
          while (i2 < children.length) {
            if (children[i2].style.display !== "none" && children[i2] !== ghostEl && children[i2] !== dragEl && _closest(children[i2], options.draggable, el, false)) {
              if (currentChild === childNum) {
                return children[i2];
              }
              currentChild++;
            }
            i2++;
          }
          return null;
        }
        function _lastChild(el) {
          var last = el.lastElementChild;
          while (last === ghostEl || last.style.display === "none") {
            last = last.previousElementSibling;
            if (!last)
              break;
          }
          return last || null;
        }
        function _ghostIsLast(evt, axis, el) {
          var elRect = _getRect(_lastChild(el)), mouseOnAxis = axis === "vertical" ? evt.clientY : evt.clientX, mouseOnOppAxis = axis === "vertical" ? evt.clientX : evt.clientY, targetS2 = axis === "vertical" ? elRect.bottom : elRect.right, targetS1Opp = axis === "vertical" ? elRect.left : elRect.top, targetS2Opp = axis === "vertical" ? elRect.right : elRect.bottom, spacer = 10;
          return axis === "vertical" ? mouseOnOppAxis > targetS2Opp + spacer || mouseOnOppAxis <= targetS2Opp && mouseOnAxis > targetS2 && mouseOnOppAxis >= targetS1Opp : mouseOnAxis > targetS2 && mouseOnOppAxis > targetS1Opp || mouseOnAxis <= targetS2 && mouseOnOppAxis > targetS2Opp + spacer;
        }
        function _getSwapDirection(evt, target, axis, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {
          var targetRect = _getRect(target), mouseOnAxis = axis === "vertical" ? evt.clientY : evt.clientX, targetLength = axis === "vertical" ? targetRect.height : targetRect.width, targetS1 = axis === "vertical" ? targetRect.top : targetRect.left, targetS2 = axis === "vertical" ? targetRect.bottom : targetRect.right, dragRect = _getRect(dragEl), invert = false;
          if (!invertSwap) {
            if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {
              if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {
                pastFirstInvertThresh = true;
              }
              if (!pastFirstInvertThresh) {
                var dragS1 = axis === "vertical" ? dragRect.top : dragRect.left, dragS2 = axis === "vertical" ? dragRect.bottom : dragRect.right;
                if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance : mouseOnAxis > targetS2 - targetMoveDistance) {
                  return lastDirection * -1;
                }
              } else {
                invert = true;
              }
            } else {
              if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {
                return mouseOnAxis > targetS1 + targetLength / 2 ? -1 : 1;
              }
            }
          }
          invert = invert || invertSwap;
          if (invert) {
            if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {
              return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;
            }
          }
          return 0;
        }
        function _getInsertDirection(target, options) {
          var dragElIndex = _index(dragEl, options.draggable), targetIndex = _index(target, options.draggable);
          if (dragElIndex < targetIndex) {
            return 1;
          } else {
            return -1;
          }
        }
        function _generateId(el) {
          var str = el.tagName + el.className + el.src + el.href + el.textContent, i2 = str.length, sum = 0;
          while (i2--) {
            sum += str.charCodeAt(i2);
          }
          return sum.toString(36);
        }
        function _index(el, selector) {
          var index = 0;
          if (!el || !el.parentNode) {
            return -1;
          }
          while (el && (el = el.previousElementSibling)) {
            if (el.nodeName.toUpperCase() !== "TEMPLATE" && el !== cloneEl) {
              index++;
            }
          }
          return index;
        }
        function _matches(el, selector) {
          if (el) {
            try {
              if (el.matches) {
                return el.matches(selector);
              } else if (el.msMatchesSelector) {
                return el.msMatchesSelector(selector);
              } else if (el.webkitMatchesSelector) {
                return el.webkitMatchesSelector(selector);
              }
            } catch (_2) {
              return false;
            }
          }
          return false;
        }
        var _throttleTimeout;
        function _throttle(callback, ms) {
          return function() {
            if (!_throttleTimeout) {
              var args = arguments, _this = this;
              _throttleTimeout = setTimeout2(function() {
                if (args.length === 1) {
                  callback.call(_this, args[0]);
                } else {
                  callback.apply(_this, args);
                }
                _throttleTimeout = void 0;
              }, ms);
            }
          };
        }
        function _cancelThrottle() {
          clearTimeout(_throttleTimeout);
          _throttleTimeout = void 0;
        }
        function _extend(dst, src) {
          if (dst && src) {
            for (var key2 in src) {
              if (src.hasOwnProperty(key2)) {
                dst[key2] = src[key2];
              }
            }
          }
          return dst;
        }
        function _clone(el) {
          if (Polymer && Polymer.dom) {
            return Polymer.dom(el).cloneNode(true);
          } else if ($3) {
            return $3(el).clone(true)[0];
          } else {
            return el.cloneNode(true);
          }
        }
        function _saveInputCheckedState(root) {
          savedInputChecked.length = 0;
          var inputs = root.getElementsByTagName("input");
          var idx = inputs.length;
          while (idx--) {
            var el = inputs[idx];
            el.checked && savedInputChecked.push(el);
          }
        }
        function _nextTick(fn) {
          return setTimeout2(fn, 0);
        }
        function _cancelNextTick(id) {
          return clearTimeout(id);
        }
        function _getRect(el, container, adjustForTransform) {
          if (!el.getBoundingClientRect && el !== win)
            return;
          var elRect, top, left, bottom, right, height, width;
          if (el !== win) {
            elRect = el.getBoundingClientRect();
            top = elRect.top;
            left = elRect.left;
            bottom = elRect.bottom;
            right = elRect.right;
            height = elRect.height;
            width = elRect.width;
          } else {
            top = 0;
            left = 0;
            bottom = window.innerHeight;
            right = window.innerWidth;
            height = window.innerHeight;
            width = window.innerWidth;
          }
          if (adjustForTransform && el !== win) {
            container = container || el.parentNode;
            if (!IE11OrLess) {
              do {
                if (container && container.getBoundingClientRect && _css(container, "transform") !== "none") {
                  var containerRect = container.getBoundingClientRect();
                  top -= containerRect.top + parseInt2(_css(container, "border-top-width"));
                  left -= containerRect.left + parseInt2(_css(container, "border-left-width"));
                  bottom = top + elRect.height;
                  right = left + elRect.width;
                  break;
                }
              } while (container = container.parentNode);
            }
            var matrix = _matrix(el), scaleX = matrix && matrix.a, scaleY = matrix && matrix.d;
            if (matrix) {
              top /= scaleY;
              left /= scaleX;
              width /= scaleX;
              height /= scaleY;
              bottom = top + height;
              right = left + width;
            }
          }
          return {
            top,
            left,
            bottom,
            right,
            width,
            height
          };
        }
        function _isScrolledPast(el, side) {
          var parent = _getParentAutoScrollElement(parent, true), elSide = _getRect(el)[side];
          while (parent) {
            var parentSide = _getRect(parent)[side], visible;
            if (side === "top" || side === "left") {
              visible = elSide >= parentSide;
            } else {
              visible = elSide <= parentSide;
            }
            if (!visible)
              return true;
            if (parent === win)
              break;
            parent = _getParentAutoScrollElement(parent, false);
          }
          return false;
        }
        _on(document2, "touchmove", function(evt) {
          if ((Sortable2.active || awaitingDragStarted) && evt.cancelable) {
            evt.preventDefault();
          }
        });
        Sortable2.utils = {
          on: _on,
          off: _off,
          css: _css,
          find: _find,
          is: function(el, selector) {
            return !!_closest(el, selector, el, false);
          },
          extend: _extend,
          throttle: _throttle,
          closest: _closest,
          toggleClass: _toggleClass,
          clone: _clone,
          index: _index,
          nextTick: _nextTick,
          cancelNextTick: _cancelNextTick,
          detectDirection: _detectDirection,
          getChild: _getChild
        };
        Sortable2.create = function(el, options) {
          return new Sortable2(el, options);
        };
        Sortable2.version = "1.8.3";
        return Sortable2;
      });
    }
  });

  // node_modules/frappe-datatable/dist/frappe-datatable.cjs.js
  var require_frappe_datatable_cjs = __commonJS({
    "node_modules/frappe-datatable/dist/frappe-datatable.cjs.js"(exports2, module2) {
      "use strict";
      function _interopDefault(ex) {
        return ex && typeof ex === "object" && "default" in ex ? ex["default"] : ex;
      }
      var Sortable2 = _interopDefault(require_Sortable());
      function $3(expr, con) {
        return typeof expr === "string" ? (con || document).querySelector(expr) : expr || null;
      }
      $3.each = (expr, con) => {
        return typeof expr === "string" ? Array.from((con || document).querySelectorAll(expr)) : expr || null;
      };
      $3.create = (tag, o2) => {
        let element = document.createElement(tag);
        for (let i2 in o2) {
          let val2 = o2[i2];
          if (i2 === "inside") {
            $3(val2).appendChild(element);
          } else if (i2 === "around") {
            let ref = $3(val2);
            ref.parentNode.insertBefore(element, ref);
            element.appendChild(ref);
          } else if (i2 === "styles") {
            if (typeof val2 === "object") {
              Object.keys(val2).map((prop) => {
                element.style[prop] = val2[prop];
              });
            }
          } else if (i2 in element) {
            element[i2] = val2;
          } else {
            element.setAttribute(i2, val2);
          }
        }
        return element;
      };
      $3.on = (element, event2, selector, callback) => {
        if (!callback) {
          callback = selector;
          $3.bind(element, event2, callback);
        } else {
          $3.delegate(element, event2, selector, callback);
        }
      };
      $3.off = (element, event2, handler) => {
        element.removeEventListener(event2, handler);
      };
      $3.bind = (element, event2, callback) => {
        event2.split(/\s+/).forEach(function(event3) {
          element.addEventListener(event3, callback);
        });
      };
      $3.delegate = (element, event2, selector, callback) => {
        element.addEventListener(event2, function(e2) {
          const delegatedTarget = e2.target.closest(selector);
          if (delegatedTarget) {
            e2.delegatedTarget = delegatedTarget;
            callback.call(this, e2, delegatedTarget);
          }
        });
      };
      $3.unbind = (element, o2) => {
        if (element) {
          for (let event2 in o2) {
            let callback = o2[event2];
            event2.split(/\s+/).forEach(function(event3) {
              element.removeEventListener(event3, callback);
            });
          }
        }
      };
      $3.fire = (target, type, properties) => {
        let evt = document.createEvent("HTMLEvents");
        evt.initEvent(type, true, true);
        for (let j2 in properties) {
          evt[j2] = properties[j2];
        }
        return target.dispatchEvent(evt);
      };
      $3.data = (element, attrs) => {
        if (!attrs) {
          return element.dataset;
        }
        for (const attr in attrs) {
          element.dataset[attr] = attrs[attr];
        }
      };
      $3.style = (elements, styleMap) => {
        if (typeof styleMap === "string") {
          return $3.getStyle(elements, styleMap);
        }
        if (!Array.isArray(elements)) {
          elements = [elements];
        }
        elements.map((element) => {
          for (const prop in styleMap) {
            element.style[prop] = styleMap[prop];
          }
        });
      };
      $3.removeStyle = (elements, styleProps) => {
        if (!Array.isArray(elements)) {
          elements = [elements];
        }
        if (!Array.isArray(styleProps)) {
          styleProps = [styleProps];
        }
        elements.map((element) => {
          for (const prop of styleProps) {
            element.style[prop] = "";
          }
        });
      };
      $3.getStyle = (element, prop) => {
        if (!prop) {
          return getComputedStyle(element);
        }
        let val2 = getComputedStyle(element)[prop];
        if (["width", "height"].includes(prop)) {
          val2 = parseFloat(val2);
        }
        return val2;
      };
      $3.closest = (selector, element) => {
        if (!element)
          return null;
        if (element.matches(selector)) {
          return element;
        }
        return $3.closest(selector, element.parentNode);
      };
      $3.inViewport = (el, parentEl) => {
        const {
          top,
          left,
          bottom,
          right
        } = el.getBoundingClientRect();
        const {
          top: pTop,
          left: pLeft,
          bottom: pBottom,
          right: pRight
        } = parentEl.getBoundingClientRect();
        return top >= pTop && left >= pLeft && bottom <= pBottom && right <= pRight;
      };
      $3.scrollTop = function scrollTop(element, pixels) {
        requestAnimationFrame(() => {
          element.scrollTop = pixels;
        });
      };
      $3.scrollbarSize = function scrollbarSize() {
        if (!$3.scrollBarSizeValue) {
          $3.scrollBarSizeValue = getScrollBarSize();
        }
        return $3.scrollBarSizeValue;
      };
      function getScrollBarSize() {
        const scrollDiv = document.createElement("div");
        $3.style(scrollDiv, {
          width: "100px",
          height: "100px",
          overflow: "scroll",
          position: "absolute",
          top: "-9999px"
        });
        document.body.appendChild(scrollDiv);
        const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;
        document.body.removeChild(scrollDiv);
        return scrollbarWidth;
      }
      $3.hasVerticalOverflow = function(element) {
        return element.scrollHeight > element.offsetHeight + 10;
      };
      $3.hasHorizontalOverflow = function(element) {
        return element.scrollWidth > element.offsetWidth + 10;
      };
      $3.measureTextWidth = function(text) {
        const div = document.createElement("div");
        div.style.position = "absolute";
        div.style.visibility = "hidden";
        div.style.height = "auto";
        div.style.width = "auto";
        div.style.whiteSpace = "nowrap";
        div.innerText = text;
        document.body.appendChild(div);
        return div.clientWidth + 1;
      };
      function isObject(value) {
        var type = typeof value;
        return value != null && (type == "object" || type == "function");
      }
      var isObject_1 = isObject;
      var commonjsGlobal = typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
      function commonjsRequire() {
        throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs");
      }
      function unwrapExports(x2) {
        return x2 && x2.__esModule && Object.prototype.hasOwnProperty.call(x2, "default") ? x2["default"] : x2;
      }
      function createCommonjsModule(fn, module3) {
        return module3 = { exports: {} }, fn(module3, module3.exports), module3.exports;
      }
      var freeGlobal = typeof commonjsGlobal == "object" && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;
      var _freeGlobal = freeGlobal;
      var freeSelf = typeof self == "object" && self && self.Object === Object && self;
      var root = _freeGlobal || freeSelf || Function("return this")();
      var _root = root;
      var now = function() {
        return _root.Date.now();
      };
      var now_1 = now;
      var Symbol2 = _root.Symbol;
      var _Symbol = Symbol2;
      var objectProto = Object.prototype;
      var hasOwnProperty = objectProto.hasOwnProperty;
      var nativeObjectToString = objectProto.toString;
      var symToStringTag = _Symbol ? _Symbol.toStringTag : void 0;
      function getRawTag(value) {
        var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];
        try {
          value[symToStringTag] = void 0;
        } catch (e2) {
        }
        var result = nativeObjectToString.call(value);
        {
          if (isOwn) {
            value[symToStringTag] = tag;
          } else {
            delete value[symToStringTag];
          }
        }
        return result;
      }
      var _getRawTag = getRawTag;
      var objectProto$1 = Object.prototype;
      var nativeObjectToString$1 = objectProto$1.toString;
      function objectToString(value) {
        return nativeObjectToString$1.call(value);
      }
      var _objectToString = objectToString;
      var nullTag = "[object Null]";
      var undefinedTag = "[object Undefined]";
      var symToStringTag$1 = _Symbol ? _Symbol.toStringTag : void 0;
      function baseGetTag(value) {
        if (value == null) {
          return value === void 0 ? undefinedTag : nullTag;
        }
        return symToStringTag$1 && symToStringTag$1 in Object(value) ? _getRawTag(value) : _objectToString(value);
      }
      var _baseGetTag = baseGetTag;
      function isObjectLike(value) {
        return value != null && typeof value == "object";
      }
      var isObjectLike_1 = isObjectLike;
      var symbolTag = "[object Symbol]";
      function isSymbol(value) {
        return typeof value == "symbol" || isObjectLike_1(value) && _baseGetTag(value) == symbolTag;
      }
      var isSymbol_1 = isSymbol;
      var NAN = 0 / 0;
      var reTrim = /^\s+|\s+$/g;
      var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;
      var reIsBinary = /^0b[01]+$/i;
      var reIsOctal = /^0o[0-7]+$/i;
      var freeParseInt = parseInt;
      function toNumber(value) {
        if (typeof value == "number") {
          return value;
        }
        if (isSymbol_1(value)) {
          return NAN;
        }
        if (isObject_1(value)) {
          var other = typeof value.valueOf == "function" ? value.valueOf() : value;
          value = isObject_1(other) ? other + "" : other;
        }
        if (typeof value != "string") {
          return value === 0 ? value : +value;
        }
        value = value.replace(reTrim, "");
        var isBinary = reIsBinary.test(value);
        return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;
      }
      var toNumber_1 = toNumber;
      var FUNC_ERROR_TEXT = "Expected a function";
      var nativeMax = Math.max;
      var nativeMin = Math.min;
      function debounce(func, wait, options) {
        var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;
        if (typeof func != "function") {
          throw new TypeError(FUNC_ERROR_TEXT);
        }
        wait = toNumber_1(wait) || 0;
        if (isObject_1(options)) {
          leading = !!options.leading;
          maxing = "maxWait" in options;
          maxWait = maxing ? nativeMax(toNumber_1(options.maxWait) || 0, wait) : maxWait;
          trailing = "trailing" in options ? !!options.trailing : trailing;
        }
        function invokeFunc(time) {
          var args = lastArgs, thisArg = lastThis;
          lastArgs = lastThis = void 0;
          lastInvokeTime = time;
          result = func.apply(thisArg, args);
          return result;
        }
        function leadingEdge(time) {
          lastInvokeTime = time;
          timerId = setTimeout(timerExpired, wait);
          return leading ? invokeFunc(time) : result;
        }
        function remainingWait(time) {
          var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;
          return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;
        }
        function shouldInvoke(time) {
          var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;
          return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;
        }
        function timerExpired() {
          var time = now_1();
          if (shouldInvoke(time)) {
            return trailingEdge(time);
          }
          timerId = setTimeout(timerExpired, remainingWait(time));
        }
        function trailingEdge(time) {
          timerId = void 0;
          if (trailing && lastArgs) {
            return invokeFunc(time);
          }
          lastArgs = lastThis = void 0;
          return result;
        }
        function cancel() {
          if (timerId !== void 0) {
            clearTimeout(timerId);
          }
          lastInvokeTime = 0;
          lastArgs = lastCallTime = lastThis = timerId = void 0;
        }
        function flush() {
          return timerId === void 0 ? result : trailingEdge(now_1());
        }
        function debounced() {
          var time = now_1(), isInvoking = shouldInvoke(time);
          lastArgs = arguments;
          lastThis = this;
          lastCallTime = time;
          if (isInvoking) {
            if (timerId === void 0) {
              return leadingEdge(lastCallTime);
            }
            if (maxing) {
              timerId = setTimeout(timerExpired, wait);
              return invokeFunc(lastCallTime);
            }
          }
          if (timerId === void 0) {
            timerId = setTimeout(timerExpired, wait);
          }
          return result;
        }
        debounced.cancel = cancel;
        debounced.flush = flush;
        return debounced;
      }
      var debounce_1 = debounce;
      var FUNC_ERROR_TEXT$1 = "Expected a function";
      function throttle(func, wait, options) {
        var leading = true, trailing = true;
        if (typeof func != "function") {
          throw new TypeError(FUNC_ERROR_TEXT$1);
        }
        if (isObject_1(options)) {
          leading = "leading" in options ? !!options.leading : leading;
          trailing = "trailing" in options ? !!options.trailing : trailing;
        }
        return debounce_1(func, wait, {
          "leading": leading,
          "maxWait": wait,
          "trailing": trailing
        });
      }
      var throttle_1 = throttle;
      var asyncTag = "[object AsyncFunction]";
      var funcTag = "[object Function]";
      var genTag = "[object GeneratorFunction]";
      var proxyTag = "[object Proxy]";
      function isFunction(value) {
        if (!isObject_1(value)) {
          return false;
        }
        var tag = _baseGetTag(value);
        return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
      }
      var isFunction_1 = isFunction;
      var coreJsData = _root["__core-js_shared__"];
      var _coreJsData = coreJsData;
      var maskSrcKey = function() {
        var uid = /[^.]+$/.exec(_coreJsData && _coreJsData.keys && _coreJsData.keys.IE_PROTO || "");
        return uid ? "Symbol(src)_1." + uid : "";
      }();
      function isMasked(func) {
        return !!maskSrcKey && maskSrcKey in func;
      }
      var _isMasked = isMasked;
      var funcProto = Function.prototype;
      var funcToString = funcProto.toString;
      function toSource(func) {
        if (func != null) {
          try {
            return funcToString.call(func);
          } catch (e2) {
          }
          try {
            return func + "";
          } catch (e2) {
          }
        }
        return "";
      }
      var _toSource = toSource;
      var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;
      var reIsHostCtor = /^\[object .+?Constructor\]$/;
      var funcProto$1 = Function.prototype;
      var objectProto$2 = Object.prototype;
      var funcToString$1 = funcProto$1.toString;
      var hasOwnProperty$1 = objectProto$2.hasOwnProperty;
      var reIsNative = RegExp("^" + funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
      function baseIsNative(value) {
        if (!isObject_1(value) || _isMasked(value)) {
          return false;
        }
        var pattern = isFunction_1(value) ? reIsNative : reIsHostCtor;
        return pattern.test(_toSource(value));
      }
      var _baseIsNative = baseIsNative;
      function getValue(object, key2) {
        return object == null ? void 0 : object[key2];
      }
      var _getValue = getValue;
      function getNative(object, key2) {
        var value = _getValue(object, key2);
        return _baseIsNative(value) ? value : void 0;
      }
      var _getNative = getNative;
      var nativeCreate = _getNative(Object, "create");
      var _nativeCreate = nativeCreate;
      function hashClear() {
        this.__data__ = _nativeCreate ? _nativeCreate(null) : {};
        this.size = 0;
      }
      var _hashClear = hashClear;
      function hashDelete(key2) {
        var result = this.has(key2) && delete this.__data__[key2];
        this.size -= result ? 1 : 0;
        return result;
      }
      var _hashDelete = hashDelete;
      var HASH_UNDEFINED = "__lodash_hash_undefined__";
      var objectProto$3 = Object.prototype;
      var hasOwnProperty$2 = objectProto$3.hasOwnProperty;
      function hashGet(key2) {
        var data = this.__data__;
        if (_nativeCreate) {
          var result = data[key2];
          return result === HASH_UNDEFINED ? void 0 : result;
        }
        return hasOwnProperty$2.call(data, key2) ? data[key2] : void 0;
      }
      var _hashGet = hashGet;
      var objectProto$4 = Object.prototype;
      var hasOwnProperty$3 = objectProto$4.hasOwnProperty;
      function hashHas(key2) {
        var data = this.__data__;
        return _nativeCreate ? data[key2] !== void 0 : hasOwnProperty$3.call(data, key2);
      }
      var _hashHas = hashHas;
      var HASH_UNDEFINED$1 = "__lodash_hash_undefined__";
      function hashSet(key2, value) {
        var data = this.__data__;
        this.size += this.has(key2) ? 0 : 1;
        data[key2] = _nativeCreate && value === void 0 ? HASH_UNDEFINED$1 : value;
        return this;
      }
      var _hashSet = hashSet;
      function Hash(entries) {
        var index = -1, length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }
      Hash.prototype.clear = _hashClear;
      Hash.prototype["delete"] = _hashDelete;
      Hash.prototype.get = _hashGet;
      Hash.prototype.has = _hashHas;
      Hash.prototype.set = _hashSet;
      var _Hash = Hash;
      function listCacheClear() {
        this.__data__ = [];
        this.size = 0;
      }
      var _listCacheClear = listCacheClear;
      function eq(value, other) {
        return value === other || value !== value && other !== other;
      }
      var eq_1 = eq;
      function assocIndexOf(array, key2) {
        var length = array.length;
        while (length--) {
          if (eq_1(array[length][0], key2)) {
            return length;
          }
        }
        return -1;
      }
      var _assocIndexOf = assocIndexOf;
      var arrayProto = Array.prototype;
      var splice = arrayProto.splice;
      function listCacheDelete(key2) {
        var data = this.__data__, index = _assocIndexOf(data, key2);
        if (index < 0) {
          return false;
        }
        var lastIndex = data.length - 1;
        if (index == lastIndex) {
          data.pop();
        } else {
          splice.call(data, index, 1);
        }
        --this.size;
        return true;
      }
      var _listCacheDelete = listCacheDelete;
      function listCacheGet(key2) {
        var data = this.__data__, index = _assocIndexOf(data, key2);
        return index < 0 ? void 0 : data[index][1];
      }
      var _listCacheGet = listCacheGet;
      function listCacheHas(key2) {
        return _assocIndexOf(this.__data__, key2) > -1;
      }
      var _listCacheHas = listCacheHas;
      function listCacheSet(key2, value) {
        var data = this.__data__, index = _assocIndexOf(data, key2);
        if (index < 0) {
          ++this.size;
          data.push([key2, value]);
        } else {
          data[index][1] = value;
        }
        return this;
      }
      var _listCacheSet = listCacheSet;
      function ListCache(entries) {
        var index = -1, length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }
      ListCache.prototype.clear = _listCacheClear;
      ListCache.prototype["delete"] = _listCacheDelete;
      ListCache.prototype.get = _listCacheGet;
      ListCache.prototype.has = _listCacheHas;
      ListCache.prototype.set = _listCacheSet;
      var _ListCache = ListCache;
      var Map2 = _getNative(_root, "Map");
      var _Map = Map2;
      function mapCacheClear() {
        this.size = 0;
        this.__data__ = {
          "hash": new _Hash(),
          "map": new (_Map || _ListCache)(),
          "string": new _Hash()
        };
      }
      var _mapCacheClear = mapCacheClear;
      function isKeyable(value) {
        var type = typeof value;
        return type == "string" || type == "number" || type == "symbol" || type == "boolean" ? value !== "__proto__" : value === null;
      }
      var _isKeyable = isKeyable;
      function getMapData(map, key2) {
        var data = map.__data__;
        return _isKeyable(key2) ? data[typeof key2 == "string" ? "string" : "hash"] : data.map;
      }
      var _getMapData = getMapData;
      function mapCacheDelete(key2) {
        var result = _getMapData(this, key2)["delete"](key2);
        this.size -= result ? 1 : 0;
        return result;
      }
      var _mapCacheDelete = mapCacheDelete;
      function mapCacheGet(key2) {
        return _getMapData(this, key2).get(key2);
      }
      var _mapCacheGet = mapCacheGet;
      function mapCacheHas(key2) {
        return _getMapData(this, key2).has(key2);
      }
      var _mapCacheHas = mapCacheHas;
      function mapCacheSet(key2, value) {
        var data = _getMapData(this, key2), size = data.size;
        data.set(key2, value);
        this.size += data.size == size ? 0 : 1;
        return this;
      }
      var _mapCacheSet = mapCacheSet;
      function MapCache(entries) {
        var index = -1, length = entries == null ? 0 : entries.length;
        this.clear();
        while (++index < length) {
          var entry = entries[index];
          this.set(entry[0], entry[1]);
        }
      }
      MapCache.prototype.clear = _mapCacheClear;
      MapCache.prototype["delete"] = _mapCacheDelete;
      MapCache.prototype.get = _mapCacheGet;
      MapCache.prototype.has = _mapCacheHas;
      MapCache.prototype.set = _mapCacheSet;
      var _MapCache = MapCache;
      var HASH_UNDEFINED$2 = "__lodash_hash_undefined__";
      function setCacheAdd(value) {
        this.__data__.set(value, HASH_UNDEFINED$2);
        return this;
      }
      var _setCacheAdd = setCacheAdd;
      function setCacheHas(value) {
        return this.__data__.has(value);
      }
      var _setCacheHas = setCacheHas;
      function SetCache(values) {
        var index = -1, length = values == null ? 0 : values.length;
        this.__data__ = new _MapCache();
        while (++index < length) {
          this.add(values[index]);
        }
      }
      SetCache.prototype.add = SetCache.prototype.push = _setCacheAdd;
      SetCache.prototype.has = _setCacheHas;
      var _SetCache = SetCache;
      function baseFindIndex(array, predicate, fromIndex, fromRight) {
        var length = array.length, index = fromIndex + (fromRight ? 1 : -1);
        while (fromRight ? index-- : ++index < length) {
          if (predicate(array[index], index, array)) {
            return index;
          }
        }
        return -1;
      }
      var _baseFindIndex = baseFindIndex;
      function baseIsNaN(value) {
        return value !== value;
      }
      var _baseIsNaN = baseIsNaN;
      function strictIndexOf(array, value, fromIndex) {
        var index = fromIndex - 1, length = array.length;
        while (++index < length) {
          if (array[index] === value) {
            return index;
          }
        }
        return -1;
      }
      var _strictIndexOf = strictIndexOf;
      function baseIndexOf(array, value, fromIndex) {
        return value === value ? _strictIndexOf(array, value, fromIndex) : _baseFindIndex(array, _baseIsNaN, fromIndex);
      }
      var _baseIndexOf = baseIndexOf;
      function arrayIncludes(array, value) {
        var length = array == null ? 0 : array.length;
        return !!length && _baseIndexOf(array, value, 0) > -1;
      }
      var _arrayIncludes = arrayIncludes;
      function arrayIncludesWith(array, value, comparator) {
        var index = -1, length = array == null ? 0 : array.length;
        while (++index < length) {
          if (comparator(value, array[index])) {
            return true;
          }
        }
        return false;
      }
      var _arrayIncludesWith = arrayIncludesWith;
      function cacheHas(cache, key2) {
        return cache.has(key2);
      }
      var _cacheHas = cacheHas;
      var Set = _getNative(_root, "Set");
      var _Set = Set;
      function noop() {
      }
      var noop_1 = noop;
      function setToArray(set) {
        var index = -1, result = Array(set.size);
        set.forEach(function(value) {
          result[++index] = value;
        });
        return result;
      }
      var _setToArray = setToArray;
      var INFINITY = 1 / 0;
      var createSet = !(_Set && 1 / _setToArray(new _Set([, -0]))[1] == INFINITY) ? noop_1 : function(values) {
        return new _Set(values);
      };
      var _createSet = createSet;
      var LARGE_ARRAY_SIZE = 200;
      function baseUniq(array, iteratee, comparator) {
        var index = -1, includes = _arrayIncludes, length = array.length, isCommon = true, result = [], seen = result;
        if (comparator) {
          isCommon = false;
          includes = _arrayIncludesWith;
        } else if (length >= LARGE_ARRAY_SIZE) {
          var set = iteratee ? null : _createSet(array);
          if (set) {
            return _setToArray(set);
          }
          isCommon = false;
          includes = _cacheHas;
          seen = new _SetCache();
        } else {
          seen = iteratee ? [] : result;
        }
        outer:
          while (++index < length) {
            var value = array[index], computed = iteratee ? iteratee(value) : value;
            value = comparator || value !== 0 ? value : 0;
            if (isCommon && computed === computed) {
              var seenIndex = seen.length;
              while (seenIndex--) {
                if (seen[seenIndex] === computed) {
                  continue outer;
                }
              }
              if (iteratee) {
                seen.push(computed);
              }
              result.push(value);
            } else if (!includes(seen, computed, comparator)) {
              if (seen !== result) {
                seen.push(computed);
              }
              result.push(value);
            }
          }
        return result;
      }
      var _baseUniq = baseUniq;
      function uniq(array) {
        return array && array.length ? _baseUniq(array) : [];
      }
      var uniq_1 = uniq;
      function camelCaseToDash(str) {
        return str.replace(/([A-Z])/g, (g2) => `-${g2[0].toLowerCase()}`);
      }
      function makeDataAttributeString(props) {
        const keys = Object.keys(props);
        return keys.map((key2) => {
          const _key = camelCaseToDash(key2);
          const val2 = props[key2];
          if (val2 === void 0)
            return "";
          return `data-${_key}="${val2}" `;
        }).join("").trim();
      }
      function copyTextToClipboard(text) {
        var textArea = document.createElement("textarea");
        textArea.style.position = "fixed";
        textArea.style.top = 0;
        textArea.style.left = 0;
        textArea.style.width = "2em";
        textArea.style.height = "2em";
        textArea.style.padding = 0;
        textArea.style.border = "none";
        textArea.style.outline = "none";
        textArea.style.boxShadow = "none";
        textArea.style.background = "transparent";
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        try {
          document.execCommand("copy");
        } catch (err) {
          console.log("Oops, unable to copy");
        }
        document.body.removeChild(textArea);
      }
      function isNumeric(val2) {
        return !isNaN(val2);
      }
      var throttle$1 = throttle_1;
      var debounce$1 = debounce_1;
      function nextTick(fn, context = null) {
        return (...args) => {
          return new Promise((resolve) => {
            const execute = () => {
              const out = fn.apply(context, args);
              resolve(out);
            };
            setTimeout(execute);
          });
        };
      }
      function linkProperties(target, source, properties) {
        const props = properties.reduce((acc, prop) => {
          acc[prop] = {
            get() {
              return source[prop];
            }
          };
          return acc;
        }, {});
        Object.defineProperties(target, props);
      }
      function isSet(val2) {
        return val2 !== void 0 || val2 !== null;
      }
      function notSet(val2) {
        return !isSet(val2);
      }
      function isNumber(val2) {
        return !isNaN(val2);
      }
      function ensureArray(val2) {
        if (!Array.isArray(val2)) {
          return [val2];
        }
        return val2;
      }
      function uniq$1(arr) {
        return uniq_1(arr);
      }
      function numberSortAsc(a2, b2) {
        return a2 - b2;
      }
      function stripHTML(html) {
        return html.replace(/<[^>]*>/g, "");
      }
      function format2(str, args) {
        if (!str)
          return str;
        Object.keys(args).forEach((arg) => {
          let regex = new RegExp(`{(${arg})}`, "g");
          str = str.replace(regex, args[arg]);
        });
        return str;
      }
      var DataManager = class {
        constructor(options) {
          this.options = options;
          this.sortRows = nextTick(this.sortRows, this);
          this.switchColumn = nextTick(this.switchColumn, this);
          this.removeColumn = nextTick(this.removeColumn, this);
          this.options.filterRows = nextTick(this.options.filterRows, this);
        }
        init(data, columns) {
          if (!data) {
            data = this.options.data;
          }
          if (columns) {
            this.options.columns = columns;
          }
          this.data = data;
          this.rowCount = 0;
          this.columns = [];
          this.rows = [];
          this.prepareColumns();
          this.prepareRows();
          this.prepareTreeRows();
          this.prepareRowView();
          this.prepareNumericColumns();
        }
        get currentSort() {
          const col = this.columns.find((col2) => col2.sortOrder !== "none");
          return col || {
            colIndex: -1,
            sortOrder: "none"
          };
        }
        prepareColumns() {
          this.columns = [];
          this.validateColumns();
          this.prepareDefaultColumns();
          this.prepareHeader();
        }
        prepareDefaultColumns() {
          if (this.options.checkboxColumn && !this.hasColumnById("_checkbox")) {
            const cell = {
              id: "_checkbox",
              content: this.getCheckboxHTML(),
              editable: false,
              resizable: false,
              sortable: false,
              focusable: false,
              dropdown: false,
              width: 32
            };
            this.columns.push(cell);
          }
          if (this.options.serialNoColumn && !this.hasColumnById("_rowIndex")) {
            let cell = {
              id: "_rowIndex",
              content: "",
              align: "center",
              editable: false,
              resizable: false,
              focusable: false,
              dropdown: false
            };
            this.columns.push(cell);
          }
        }
        prepareHeader() {
          let columns = this.columns.concat(this.options.columns);
          const baseCell = {
            isHeader: 1,
            editable: true,
            sortable: true,
            resizable: true,
            focusable: true,
            dropdown: true,
            width: null,
            format: (value) => {
              if (value === null || value === void 0) {
                return "";
              }
              return value + "";
            }
          };
          this.columns = columns.map((cell, i2) => this.prepareCell(cell, i2)).map((col) => Object.assign({}, baseCell, col)).map((col) => {
            col.content = col.content || col.name || "";
            col.id = col.id || col.content;
            return col;
          });
        }
        prepareCell(content, i2) {
          const cell = {
            content: "",
            sortOrder: "none",
            colIndex: i2,
            column: this.columns[i2]
          };
          if (content !== null && typeof content === "object") {
            Object.assign(cell, content);
          } else {
            cell.content = content;
          }
          return cell;
        }
        prepareNumericColumns() {
          const row0 = this.getRow(0);
          if (!row0)
            return;
          this.columns = this.columns.map((column, i2) => {
            const cellValue = row0[i2].content;
            if (!column.align && isNumeric(cellValue)) {
              column.align = "right";
            }
            return column;
          });
        }
        prepareRows() {
          this.validateData(this.data);
          this.rows = this.data.map((d2, i2) => {
            const index = this._getNextRowCount();
            let row = [];
            let meta2 = {
              rowIndex: index
            };
            if (Array.isArray(d2)) {
              if (this.options.checkboxColumn) {
                row.push(this.getCheckboxHTML());
              }
              if (this.options.serialNoColumn) {
                row.push(index + 1 + "");
              }
              row = row.concat(d2);
              while (row.length < this.columns.length) {
                row.push("");
              }
            } else {
              for (let col of this.columns) {
                if (col.id === "_checkbox") {
                  row.push(this.getCheckboxHTML());
                } else if (col.id === "_rowIndex") {
                  row.push(index + 1 + "");
                } else {
                  row.push(d2[col.id]);
                }
              }
              meta2.indent = d2.indent || 0;
            }
            return this.prepareRow(row, meta2);
          });
        }
        prepareTreeRows() {
          this.rows.forEach((row, i2) => {
            if (isNumber(row.meta.indent)) {
              const nextRow = this.getRow(i2 + 1);
              row.meta.isLeaf = !nextRow || notSet(nextRow.meta.indent) || nextRow.meta.indent <= row.meta.indent;
              row.meta.isTreeNodeClose = false;
            }
          });
        }
        prepareRowView() {
          this.rowViewOrder = this.rows.map((row) => row.meta.rowIndex);
        }
        prepareRow(row, meta2) {
          const baseRowCell = {
            rowIndex: meta2.rowIndex,
            indent: meta2.indent
          };
          row = row.map((cell, i2) => this.prepareCell(cell, i2)).map((cell) => Object.assign({}, baseRowCell, cell));
          row.meta = meta2;
          return row;
        }
        validateColumns() {
          const columns = this.options.columns;
          if (!Array.isArray(columns)) {
            throw new DataError("`columns` must be an array");
          }
          columns.forEach((column, i2) => {
            if (typeof column !== "string" && typeof column !== "object") {
              throw new DataError(`column "${i2}" must be a string or an object`);
            }
          });
        }
        validateData(data) {
          if (Array.isArray(data) && (data.length === 0 || Array.isArray(data[0]) || typeof data[0] === "object")) {
            return true;
          }
          throw new DataError("`data` must be an array of arrays or objects");
        }
        appendRows(rows) {
          this.validateData(rows);
          this.rows.push(...this.prepareRows(rows));
        }
        sortRows(colIndex, sortOrder = "none") {
          colIndex = +colIndex;
          this.getColumns().map((col) => {
            if (col.colIndex === colIndex) {
              col.sortOrder = sortOrder;
            } else {
              col.sortOrder = "none";
            }
          });
          this._sortRows(colIndex, sortOrder);
        }
        _sortRows(colIndex, sortOrder) {
          if (this.currentSort.colIndex === colIndex) {
            if (this.currentSort.sortOrder === "asc" && sortOrder === "desc" || this.currentSort.sortOrder === "desc" && sortOrder === "asc") {
              this.reverseArray(this.rowViewOrder);
              this.currentSort.sortOrder = sortOrder;
              return;
            }
          }
          this.rowViewOrder.sort((a2, b2) => {
            const aIndex = a2;
            const bIndex = b2;
            let aContent = this.getCell(colIndex, a2).content;
            let bContent = this.getCell(colIndex, b2).content;
            aContent = aContent == null ? "" : aContent;
            bContent = bContent == null ? "" : bContent;
            if (sortOrder === "none") {
              return aIndex - bIndex;
            } else if (sortOrder === "asc") {
              if (aContent < bContent)
                return -1;
              if (aContent > bContent)
                return 1;
              if (aContent === bContent)
                return 0;
            } else if (sortOrder === "desc") {
              if (aContent < bContent)
                return 1;
              if (aContent > bContent)
                return -1;
              if (aContent === bContent)
                return 0;
            }
            return 0;
          });
          if (this.hasColumnById("_rowIndex")) {
            const srNoColIndex = this.getColumnIndexById("_rowIndex");
            this.rows.forEach((row, index) => {
              const viewIndex = this.rowViewOrder.indexOf(index);
              const cell = row[srNoColIndex];
              cell.content = viewIndex + 1 + "";
            });
          }
        }
        reverseArray(array) {
          let left = null;
          let right = null;
          let length = array.length;
          for (left = 0, right = length - 1; left < right; left += 1, right -= 1) {
            const temporary = array[left];
            array[left] = array[right];
            array[right] = temporary;
          }
        }
        switchColumn(index1, index2) {
          const temp = this.columns[index1];
          this.columns[index1] = this.columns[index2];
          this.columns[index2] = temp;
          this.columns[index1].colIndex = index1;
          this.columns[index2].colIndex = index2;
          this.rows.forEach((row) => {
            const newCell1 = Object.assign({}, row[index1], {
              colIndex: index2
            });
            const newCell2 = Object.assign({}, row[index2], {
              colIndex: index1
            });
            row[index2] = newCell1;
            row[index1] = newCell2;
          });
        }
        removeColumn(index) {
          index = +index;
          const filter = (cell) => cell.colIndex !== index;
          const map = (cell, i2) => Object.assign({}, cell, {
            colIndex: i2
          });
          this.columns = this.columns.filter(filter).map(map);
          this.rows.forEach((row) => {
            row.splice(index, 1);
            row.forEach((cell, i2) => {
              cell.colIndex = i2;
            });
          });
        }
        updateRow(row, rowIndex) {
          if (row.length < this.columns.length) {
            if (this.hasColumnById("_rowIndex")) {
              const val2 = rowIndex + 1 + "";
              row = [val2].concat(row);
            }
            if (this.hasColumnById("_checkbox")) {
              const val2 = '<input type="checkbox" />';
              row = [val2].concat(row);
            }
          }
          const _row = this.prepareRow(row, { rowIndex });
          const index = this.rows.findIndex((row2) => row2[0].rowIndex === rowIndex);
          this.rows[index] = _row;
          return _row;
        }
        updateCell(colIndex, rowIndex, options) {
          let cell;
          if (typeof colIndex === "object") {
            cell = colIndex;
            colIndex = cell.colIndex;
            rowIndex = cell.rowIndex;
            options = cell;
          }
          cell = this.getCell(colIndex, rowIndex);
          for (let key2 in options) {
            const newVal = options[key2];
            if (newVal !== void 0) {
              cell[key2] = newVal;
            }
          }
          return cell;
        }
        updateColumn(colIndex, keyValPairs) {
          const column = this.getColumn(colIndex);
          for (let key2 in keyValPairs) {
            const newVal = keyValPairs[key2];
            if (newVal !== void 0) {
              column[key2] = newVal;
            }
          }
          return column;
        }
        filterRows(filters2) {
          return this.options.filterRows(this.rows, filters2).then((result) => {
            if (!result) {
              result = this.getAllRowIndices();
            }
            if (!result.then) {
              result = Promise.resolve(result);
            }
            return result.then((rowsToShow) => {
              this._filteredRows = rowsToShow;
              const rowsToHide = this.getAllRowIndices().filter((index) => !rowsToShow.includes(index));
              return {
                rowsToHide,
                rowsToShow
              };
            });
          });
        }
        getFilteredRowIndices() {
          return this._filteredRows || this.getAllRowIndices();
        }
        getAllRowIndices() {
          return this.rows.map((row) => row.meta.rowIndex);
        }
        getRowCount() {
          return this.rowCount;
        }
        _getNextRowCount() {
          const val2 = this.rowCount;
          this.rowCount++;
          return val2;
        }
        getRows(start, end) {
          return this.rows.slice(start, end);
        }
        getRowsForView(start, end) {
          const rows = this.rowViewOrder.map((i2) => this.rows[i2]);
          return rows.slice(start, end);
        }
        getColumns(skipStandardColumns) {
          let columns = this.columns;
          if (skipStandardColumns) {
            columns = columns.slice(this.getStandardColumnCount());
          }
          return columns;
        }
        getStandardColumnCount() {
          if (this.options.checkboxColumn && this.options.serialNoColumn) {
            return 2;
          }
          if (this.options.checkboxColumn || this.options.serialNoColumn) {
            return 1;
          }
          return 0;
        }
        getColumnCount(skipStandardColumns) {
          let val2 = this.columns.length;
          if (skipStandardColumns) {
            val2 = val2 - this.getStandardColumnCount();
          }
          return val2;
        }
        getColumn(colIndex) {
          colIndex = +colIndex;
          if (colIndex < 0) {
            colIndex = this.columns.length + colIndex;
          }
          return this.columns.find((col) => col.colIndex === colIndex);
        }
        getColumnById(id) {
          return this.columns.find((col) => col.id === id);
        }
        getRow(rowIndex) {
          rowIndex = +rowIndex;
          return this.rows[rowIndex];
        }
        getCell(colIndex, rowIndex) {
          rowIndex = +rowIndex;
          colIndex = +colIndex;
          return this.getRow(rowIndex)[colIndex];
        }
        getChildren(parentRowIndex) {
          parentRowIndex = +parentRowIndex;
          const parentIndent = this.getRow(parentRowIndex).meta.indent;
          const out = [];
          for (let i2 = parentRowIndex + 1; i2 < this.rowCount; i2++) {
            const row = this.getRow(i2);
            if (isNaN(row.meta.indent))
              continue;
            if (row.meta.indent > parentIndent) {
              out.push(i2);
            }
            if (row.meta.indent === parentIndent) {
              break;
            }
          }
          return out;
        }
        getImmediateChildren(parentRowIndex) {
          parentRowIndex = +parentRowIndex;
          const parentIndent = this.getRow(parentRowIndex).meta.indent;
          const out = [];
          const childIndent = parentIndent + 1;
          for (let i2 = parentRowIndex + 1; i2 < this.rowCount; i2++) {
            const row = this.getRow(i2);
            if (isNaN(row.meta.indent) || row.meta.indent > childIndent)
              continue;
            if (row.meta.indent === childIndent) {
              out.push(i2);
            }
            if (row.meta.indent === parentIndent) {
              break;
            }
          }
          return out;
        }
        get() {
          return {
            columns: this.columns,
            rows: this.rows
          };
        }
        getData(rowIndex) {
          return this.data[rowIndex];
        }
        hasColumn(name3) {
          return Boolean(this.columns.find((col) => col.content === name3));
        }
        hasColumnById(id) {
          return Boolean(this.columns.find((col) => col.id === id));
        }
        getColumnIndex(name3) {
          return this.columns.findIndex((col) => col.content === name3);
        }
        getColumnIndexById(id) {
          return this.columns.findIndex((col) => col.id === id);
        }
        getCheckboxHTML() {
          return '<input type="checkbox" />';
        }
      };
      var DataError = class extends TypeError {
      };
      var icons = {
        chevronDown: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>',
        chevronRight: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline></svg>'
      };
      var CellManager = class {
        constructor(instance) {
          this.instance = instance;
          linkProperties(this, this.instance, [
            "wrapper",
            "options",
            "style",
            "header",
            "bodyScrollable",
            "columnmanager",
            "rowmanager",
            "datamanager",
            "keyboard"
          ]);
          this.bindEvents();
        }
        bindEvents() {
          this.bindFocusCell();
          this.bindEditCell();
          this.bindKeyboardSelection();
          this.bindCopyCellContents();
          this.bindMouseEvents();
          this.bindTreeEvents();
        }
        bindFocusCell() {
          this.bindKeyboardNav();
        }
        bindEditCell() {
          this.$editingCell = null;
          $3.on(this.bodyScrollable, "dblclick", ".dt-cell", (e2, cell) => {
            this.activateEditing(cell);
          });
          this.keyboard.on("enter", () => {
            if (this.$focusedCell && !this.$editingCell) {
              this.activateEditing(this.$focusedCell);
            } else if (this.$editingCell) {
              this.deactivateEditing();
            }
          });
        }
        bindKeyboardNav() {
          const focusLastCell = (direction) => {
            if (!this.$focusedCell || this.$editingCell) {
              return false;
            }
            let $cell = this.$focusedCell;
            const {
              rowIndex,
              colIndex
            } = $3.data($cell);
            if (direction === "left") {
              $cell = this.getLeftMostCell$(rowIndex);
            } else if (direction === "right") {
              $cell = this.getRightMostCell$(rowIndex);
            } else if (direction === "up") {
              $cell = this.getTopMostCell$(colIndex);
            } else if (direction === "down") {
              $cell = this.getBottomMostCell$(colIndex);
            }
            this.focusCell($cell);
            return true;
          };
          ["left", "right", "up", "down", "tab", "shift+tab"].map((direction) => this.keyboard.on(direction, () => this.focusCellInDirection(direction)));
          ["left", "right", "up", "down"].map((direction) => this.keyboard.on(`ctrl+${direction}`, () => focusLastCell(direction)));
          this.keyboard.on("esc", () => {
            this.deactivateEditing(false);
            this.columnmanager.toggleFilter(false);
          });
          if (this.options.inlineFilters) {
            this.keyboard.on("ctrl+f", (e2) => {
              const $cell = $3.closest(".dt-cell", e2.target);
              const { colIndex } = $3.data($cell);
              this.activateFilter(colIndex);
              return true;
            });
            $3.on(this.header, "focusin", ".dt-filter", () => {
              this.unfocusCell(this.$focusedCell);
            });
          }
        }
        bindKeyboardSelection() {
          const getNextSelectionCursor = (direction) => {
            let $selectionCursor = this.getSelectionCursor();
            if (direction === "left") {
              $selectionCursor = this.getLeftCell$($selectionCursor);
            } else if (direction === "right") {
              $selectionCursor = this.getRightCell$($selectionCursor);
            } else if (direction === "up") {
              $selectionCursor = this.getAboveCell$($selectionCursor);
            } else if (direction === "down") {
              $selectionCursor = this.getBelowCell$($selectionCursor);
            }
            return $selectionCursor;
          };
          ["left", "right", "up", "down"].map((direction) => this.keyboard.on(`shift+${direction}`, () => this.selectArea(getNextSelectionCursor(direction))));
        }
        bindCopyCellContents() {
          this.keyboard.on("ctrl+c", () => {
            const noOfCellsCopied = this.copyCellContents(this.$focusedCell, this.$selectionCursor);
            const message2 = this.instance.translate("{count} cells copied", {
              count: noOfCellsCopied
            });
            if (noOfCellsCopied) {
              this.instance.showToastMessage(message2, 2);
            }
          });
          if (this.options.pasteFromClipboard) {
            this.keyboard.on("ctrl+v", (e2) => {
              this.instance.pasteTarget.focus();
              setTimeout(() => {
                const data = this.instance.pasteTarget.value;
                this.instance.pasteTarget.value = "";
                this.pasteContentInCell(data);
              }, 10);
              return false;
            });
          }
        }
        bindMouseEvents() {
          let mouseDown = null;
          $3.on(this.bodyScrollable, "mousedown", ".dt-cell", (e2) => {
            mouseDown = true;
            this.focusCell($3(e2.delegatedTarget));
          });
          $3.on(this.bodyScrollable, "mouseup", () => {
            mouseDown = false;
          });
          const selectArea = (e2) => {
            if (!mouseDown)
              return;
            this.selectArea($3(e2.delegatedTarget));
          };
          $3.on(this.bodyScrollable, "mousemove", ".dt-cell", throttle$1(selectArea, 50));
        }
        bindTreeEvents() {
          $3.on(this.bodyScrollable, "click", ".dt-tree-node__toggle", (e2, $toggle) => {
            const $cell = $3.closest(".dt-cell", $toggle);
            const { rowIndex } = $3.data($cell);
            if ($cell.classList.contains("dt-cell--tree-close")) {
              this.rowmanager.openSingleNode(rowIndex);
            } else {
              this.rowmanager.closeSingleNode(rowIndex);
            }
          });
        }
        focusCell($cell, {
          skipClearSelection = 0,
          skipDOMFocus = 0,
          skipScrollToCell = 0
        } = {}) {
          if (!$cell)
            return;
          if ($cell === this.$editingCell)
            return;
          const {
            colIndex,
            isHeader
          } = $3.data($cell);
          if (isHeader) {
            return;
          }
          const column = this.columnmanager.getColumn(colIndex);
          if (column.focusable === false) {
            return;
          }
          if (!skipScrollToCell) {
            this.scrollToCell($cell);
          }
          this.deactivateEditing();
          if (!skipClearSelection) {
            this.clearSelection();
          }
          if (this.$focusedCell) {
            this.$focusedCell.classList.remove("dt-cell--focus");
          }
          this.$focusedCell = $cell;
          $cell.classList.add("dt-cell--focus");
          if (!skipDOMFocus) {
            $cell.focus();
          }
          this.highlightRowColumnHeader($cell);
        }
        unfocusCell($cell) {
          if (!$cell)
            return;
          $cell.classList.remove("dt-cell--focus");
          this.$focusedCell = null;
          if (this.lastHeaders) {
            this.lastHeaders.forEach((header) => header && header.classList.remove("dt-cell--highlight"));
          }
        }
        highlightRowColumnHeader($cell) {
          const {
            colIndex,
            rowIndex
          } = $3.data($cell);
          const srNoColIndex = this.datamanager.getColumnIndexById("_rowIndex");
          const colHeaderSelector = `.dt-cell--header-${colIndex}`;
          const rowHeaderSelector = `.dt-cell--${srNoColIndex}-${rowIndex}`;
          if (this.lastHeaders) {
            this.lastHeaders.forEach((header) => header && header.classList.remove("dt-cell--highlight"));
          }
          const colHeader = $3(colHeaderSelector, this.wrapper);
          const rowHeader = $3(rowHeaderSelector, this.wrapper);
          this.lastHeaders = [colHeader, rowHeader];
          this.lastHeaders.forEach((header) => header && header.classList.add("dt-cell--highlight"));
        }
        selectAreaOnClusterChanged() {
          if (!(this.$focusedCell && this.$selectionCursor))
            return;
          const {
            colIndex,
            rowIndex
          } = $3.data(this.$selectionCursor);
          const $cell = this.getCell$(colIndex, rowIndex);
          if (!$cell || $cell === this.$selectionCursor)
            return;
          const fCell = $3.data(this.$focusedCell);
          this.$focusedCell = this.getCell$(fCell.colIndex, fCell.rowIndex);
          this.selectArea($cell);
        }
        focusCellOnClusterChanged() {
          if (!this.$focusedCell)
            return;
          const {
            colIndex,
            rowIndex
          } = $3.data(this.$focusedCell);
          const $cell = this.getCell$(colIndex, rowIndex);
          if (!$cell)
            return;
          this.focusCell($cell, {
            skipClearSelection: 1,
            skipDOMFocus: 1,
            skipScrollToCell: 1
          });
        }
        selectArea($selectionCursor) {
          if (!this.$focusedCell)
            return;
          if (this._selectArea(this.$focusedCell, $selectionCursor)) {
            this.$selectionCursor = $selectionCursor;
          }
        }
        _selectArea($cell1, $cell2) {
          if ($cell1 === $cell2)
            return false;
          const cells = this.getCellsInRange($cell1, $cell2);
          if (!cells)
            return false;
          this.clearSelection();
          this._selectedCells = cells.map((index) => this.getCell$(...index));
          requestAnimationFrame(() => {
            this._selectedCells.map(($cell) => $cell.classList.add("dt-cell--highlight"));
          });
          return true;
        }
        getCellsInRange($cell1, $cell2) {
          let colIndex1, rowIndex1, colIndex2, rowIndex2;
          if (typeof $cell1 === "number") {
            [colIndex1, rowIndex1, colIndex2, rowIndex2] = arguments;
          } else if (typeof $cell1 === "object") {
            if (!($cell1 && $cell2)) {
              return false;
            }
            const cell1 = $3.data($cell1);
            const cell2 = $3.data($cell2);
            colIndex1 = +cell1.colIndex;
            rowIndex1 = +cell1.rowIndex;
            colIndex2 = +cell2.colIndex;
            rowIndex2 = +cell2.rowIndex;
          }
          if (rowIndex1 > rowIndex2) {
            [rowIndex1, rowIndex2] = [rowIndex2, rowIndex1];
          }
          if (colIndex1 > colIndex2) {
            [colIndex1, colIndex2] = [colIndex2, colIndex1];
          }
          if (this.isStandardCell(colIndex1) || this.isStandardCell(colIndex2)) {
            return false;
          }
          const cells = [];
          let colIndex = colIndex1;
          let rowIndex = rowIndex1;
          const rowIndices = [];
          while (rowIndex <= rowIndex2) {
            rowIndices.push(rowIndex);
            rowIndex += 1;
          }
          rowIndices.map((rowIndex3) => {
            while (colIndex <= colIndex2) {
              cells.push([colIndex, rowIndex3]);
              colIndex++;
            }
            colIndex = colIndex1;
          });
          return cells;
        }
        clearSelection() {
          (this._selectedCells || []).forEach(($cell) => $cell.classList.remove("dt-cell--highlight"));
          this._selectedCells = [];
          this.$selectionCursor = null;
        }
        getSelectionCursor() {
          return this.$selectionCursor || this.$focusedCell;
        }
        activateEditing($cell) {
          this.focusCell($cell);
          const {
            rowIndex,
            colIndex
          } = $3.data($cell);
          const col = this.columnmanager.getColumn(colIndex);
          if (col && (col.editable === false || col.focusable === false)) {
            return;
          }
          const cell = this.getCell(colIndex, rowIndex);
          if (cell && cell.editable === false) {
            return;
          }
          if (this.$editingCell) {
            const {
              _rowIndex,
              _colIndex
            } = $3.data(this.$editingCell);
            if (rowIndex === _rowIndex && colIndex === _colIndex) {
              return;
            }
          }
          this.$editingCell = $cell;
          $cell.classList.add("dt-cell--editing");
          const $editCell = $3(".dt-cell__edit", $cell);
          $editCell.innerHTML = "";
          const editor = this.getEditor(colIndex, rowIndex, cell.content, $editCell);
          if (editor) {
            this.currentCellEditor = editor;
            editor.initValue(cell.content, rowIndex, col);
          }
        }
        deactivateEditing(submitValue = true) {
          if (submitValue) {
            this.submitEditing();
          }
          if (this.$focusedCell)
            this.$focusedCell.focus();
          if (!this.$editingCell)
            return;
          this.$editingCell.classList.remove("dt-cell--editing");
          this.$editingCell = null;
        }
        getEditor(colIndex, rowIndex, value, parent) {
          const column = this.datamanager.getColumn(colIndex);
          const row = this.datamanager.getRow(rowIndex);
          const data = this.datamanager.getData(rowIndex);
          let editor = this.options.getEditor ? this.options.getEditor(colIndex, rowIndex, value, parent, column, row, data) : this.getDefaultEditor(parent);
          if (editor === false) {
            return false;
          }
          if (editor === void 0) {
            editor = this.getDefaultEditor(parent);
          }
          return editor;
        }
        getDefaultEditor(parent) {
          const $input = $3.create("input", {
            class: "dt-input",
            type: "text",
            inside: parent
          });
          return {
            initValue(value) {
              $input.focus();
              $input.value = value;
            },
            getValue() {
              return $input.value;
            },
            setValue(value) {
              $input.value = value;
            }
          };
        }
        submitEditing() {
          let promise = Promise.resolve();
          if (!this.$editingCell)
            return promise;
          const $cell = this.$editingCell;
          const {
            rowIndex,
            colIndex
          } = $3.data($cell);
          const col = this.datamanager.getColumn(colIndex);
          if ($cell) {
            const editor = this.currentCellEditor;
            if (editor) {
              let valuePromise = editor.getValue();
              if (!valuePromise.then) {
                valuePromise = Promise.resolve(valuePromise);
              }
              promise = valuePromise.then((value) => {
                const done = editor.setValue(value, rowIndex, col);
                const oldValue = this.getCell(colIndex, rowIndex).content;
                this.updateCell(colIndex, rowIndex, value);
                $cell.focus();
                if (done && done.then) {
                  done.catch((e2) => {
                    console.log(e2);
                    this.updateCell(colIndex, rowIndex, oldValue);
                  });
                }
                return done;
              });
            }
          }
          this.currentCellEditor = null;
          return promise;
        }
        copyCellContents($cell1, $cell2) {
          if (!$cell2 && $cell1) {
            const {
              colIndex,
              rowIndex
            } = $3.data($cell1);
            const cell = this.getCell(colIndex, rowIndex);
            copyTextToClipboard(cell.content);
            return 1;
          }
          const cells = this.getCellsInRange($cell1, $cell2);
          if (!cells)
            return 0;
          const rows = cells.map((index) => this.getCell(...index)).reduce((acc, curr) => {
            const rowIndex = curr.rowIndex;
            acc[rowIndex] = acc[rowIndex] || [];
            acc[rowIndex].push(curr.content);
            return acc;
          }, []);
          const values = rows.map((row) => row.join("	")).join("\n");
          copyTextToClipboard(values);
          return rows.reduce((total, row) => total + row.length, 0);
        }
        pasteContentInCell(data) {
          if (!this.$focusedCell)
            return;
          const matrix = data.split("\n").map((row) => row.split("	")).filter((row) => row.length && row.every((it3) => it3));
          let { colIndex, rowIndex } = $3.data(this.$focusedCell);
          let focusedCell = {
            colIndex: +colIndex,
            rowIndex: +rowIndex
          };
          matrix.forEach((row, i2) => {
            let rowIndex2 = i2 + focusedCell.rowIndex;
            row.forEach((cell, j2) => {
              let colIndex2 = j2 + focusedCell.colIndex;
              this.updateCell(colIndex2, rowIndex2, cell);
            });
          });
        }
        activateFilter(colIndex) {
          this.columnmanager.toggleFilter();
          this.columnmanager.focusFilter(colIndex);
          if (!this.columnmanager.isFilterShown) {
            this.$focusedCell && this.$focusedCell.focus();
          }
        }
        updateCell(colIndex, rowIndex, value) {
          const cell = this.datamanager.updateCell(colIndex, rowIndex, {
            content: value
          });
          this.refreshCell(cell);
        }
        refreshCell(cell) {
          const $cell = $3(this.selector(cell.colIndex, cell.rowIndex), this.bodyScrollable);
          $cell.innerHTML = this.getCellContent(cell);
        }
        toggleTreeButton(rowIndex, flag) {
          const colIndex = this.columnmanager.getFirstColumnIndex();
          const $cell = this.getCell$(colIndex, rowIndex);
          if ($cell) {
            $cell.classList[flag ? "remove" : "add"]("dt-cell--tree-close");
          }
        }
        isStandardCell(colIndex) {
          return colIndex < this.columnmanager.getFirstColumnIndex();
        }
        focusCellInDirection(direction) {
          if (!this.$focusedCell) {
            return false;
          } else if (this.$editingCell && ["tab", "shift+tab"].includes(direction)) {
            this.deactivateEditing();
          }
          let $cell = this.$focusedCell;
          if (direction === "left" || direction === "shift+tab") {
            $cell = this.getLeftCell$($cell);
          } else if (direction === "right" || direction === "tab") {
            $cell = this.getRightCell$($cell);
          } else if (direction === "up") {
            $cell = this.getAboveCell$($cell);
          } else if (direction === "down") {
            $cell = this.getBelowCell$($cell);
          }
          if (!$cell) {
            return false;
          }
          const {
            colIndex
          } = $3.data($cell);
          const column = this.columnmanager.getColumn(colIndex);
          if (!column.focusable) {
            let $prevFocusedCell = this.$focusedCell;
            this.unfocusCell($prevFocusedCell);
            this.$focusedCell = $cell;
            let ret = this.focusCellInDirection(direction);
            if (!ret) {
              this.focusCell($prevFocusedCell);
            }
            return ret;
          }
          this.focusCell($cell);
          return true;
        }
        getCell$(colIndex, rowIndex) {
          return $3(this.selector(colIndex, rowIndex), this.bodyScrollable);
        }
        getAboveCell$($cell) {
          const {
            colIndex
          } = $3.data($cell);
          let $aboveRow = $cell.parentElement.previousElementSibling;
          while ($aboveRow && $aboveRow.classList.contains("dt-row--hide")) {
            $aboveRow = $aboveRow.previousElementSibling;
          }
          if (!$aboveRow)
            return $cell;
          return $3(`.dt-cell--col-${colIndex}`, $aboveRow);
        }
        getBelowCell$($cell) {
          const {
            colIndex
          } = $3.data($cell);
          let $belowRow = $cell.parentElement.nextElementSibling;
          while ($belowRow && $belowRow.classList.contains("dt-row--hide")) {
            $belowRow = $belowRow.nextElementSibling;
          }
          if (!$belowRow)
            return $cell;
          return $3(`.dt-cell--col-${colIndex}`, $belowRow);
        }
        getLeftCell$($cell) {
          return $cell.previousElementSibling;
        }
        getRightCell$($cell) {
          return $cell.nextElementSibling;
        }
        getLeftMostCell$(rowIndex) {
          return this.getCell$(this.columnmanager.getFirstColumnIndex(), rowIndex);
        }
        getRightMostCell$(rowIndex) {
          return this.getCell$(this.columnmanager.getLastColumnIndex(), rowIndex);
        }
        getTopMostCell$(colIndex) {
          return this.getCell$(colIndex, this.rowmanager.getFirstRowIndex());
        }
        getBottomMostCell$(colIndex) {
          return this.getCell$(colIndex, this.rowmanager.getLastRowIndex());
        }
        getCell(colIndex, rowIndex) {
          return this.instance.datamanager.getCell(colIndex, rowIndex);
        }
        getRowHeight() {
          return $3.style($3(".dt-row", this.bodyScrollable), "height");
        }
        scrollToCell($cell) {
          if ($3.inViewport($cell, this.bodyScrollable))
            return false;
          const {
            rowIndex
          } = $3.data($cell);
          this.rowmanager.scrollToRow(rowIndex);
          return false;
        }
        getRowCountPerPage() {
          return Math.ceil(this.instance.getViewportHeight() / this.getRowHeight());
        }
        getCellHTML(cell) {
          const {
            rowIndex,
            colIndex,
            isHeader,
            isFilter,
            isTotalRow
          } = cell;
          const dataAttr = makeDataAttributeString({
            rowIndex,
            colIndex,
            isHeader,
            isFilter,
            isTotalRow
          });
          const row = this.datamanager.getRow(rowIndex);
          const isBodyCell = !(isHeader || isFilter || isTotalRow);
          const className = [
            "dt-cell",
            "dt-cell--col-" + colIndex,
            isBodyCell ? `dt-cell--${colIndex}-${rowIndex}` : "",
            isBodyCell ? "dt-cell--row-" + rowIndex : "",
            isHeader ? "dt-cell--header" : "",
            isHeader ? `dt-cell--header-${colIndex}` : "",
            isFilter ? "dt-cell--filter" : "",
            isBodyCell && (row && row.meta.isTreeNodeClose) ? "dt-cell--tree-close" : ""
          ].join(" ");
          return `
            <div class="${className}" ${dataAttr} tabindex="0">
                ${this.getCellContent(cell)}
            </div>
        `;
        }
        getCellContent(cell) {
          const {
            isHeader,
            isFilter,
            colIndex
          } = cell;
          const editable = !isHeader && cell.editable !== false;
          const editCellHTML = editable ? this.getEditCellHTML(colIndex) : "";
          const sortable = isHeader && cell.sortable !== false;
          const sortIndicator = sortable ? `<span class="sort-indicator">
                ${this.options.sortIndicator[cell.sortOrder]}
            </span>` : "";
          const resizable = isHeader && cell.resizable !== false;
          const resizeColumn = resizable ? '<span class="dt-cell__resize-handle"></span>' : "";
          const hasDropdown = isHeader && cell.dropdown !== false;
          const dropdown = hasDropdown ? this.columnmanager.getDropdownHTML() : "";
          const customFormatter = cell.format || cell.column && cell.column.format || null;
          let contentHTML;
          if (isHeader || isFilter || !customFormatter) {
            contentHTML = cell.content;
          } else {
            const row = this.datamanager.getRow(cell.rowIndex);
            const data = this.datamanager.getData(cell.rowIndex);
            contentHTML = customFormatter(cell.content, row, cell.column, data);
          }
          cell.html = contentHTML;
          if (this.options.treeView && !(isHeader || isFilter) && cell.indent !== void 0) {
            const nextRow = this.datamanager.getRow(cell.rowIndex + 1);
            const addToggle = nextRow && nextRow.meta.indent > cell.indent;
            const leftPadding = 20;
            const unit = "px";
            const firstColumnIndex = this.datamanager.getColumnIndexById("_rowIndex") + 1;
            if (firstColumnIndex === cell.colIndex) {
              const padding = (cell.indent || 0) * leftPadding;
              const toggleHTML = addToggle ? `<span class="dt-tree-node__toggle" style="left: ${padding - leftPadding}${unit}">
                        <span class="icon-open">${icons.chevronDown}</span>
                        <span class="icon-close">${icons.chevronRight}</span>
                    </span>` : "";
              contentHTML = `<span class="dt-tree-node" style="padding-left: ${padding}${unit}">
                    ${toggleHTML}
                    <span>${contentHTML}</span>
                </span>`;
            }
          }
          const className = [
            "dt-cell__content",
            isHeader ? `dt-cell__content--header-${colIndex}` : `dt-cell__content--col-${colIndex}`
          ].join(" ");
          return `
            <div class="${className}">
                ${contentHTML}
                ${sortIndicator}
                ${resizeColumn}
                ${dropdown}
            </div>
            ${editCellHTML}
        `;
        }
        getEditCellHTML(colIndex) {
          return `<div class="dt-cell__edit dt-cell__edit--col-${colIndex}"></div>`;
        }
        selector(colIndex, rowIndex) {
          return `.dt-cell--${colIndex}-${rowIndex}`;
        }
      };
      var ColumnManager = class {
        constructor(instance) {
          this.instance = instance;
          linkProperties(this, this.instance, [
            "options",
            "fireEvent",
            "header",
            "datamanager",
            "cellmanager",
            "style",
            "wrapper",
            "rowmanager",
            "bodyScrollable",
            "bodyRenderer"
          ]);
          this.bindEvents();
        }
        renderHeader() {
          this.header.innerHTML = "<div></div>";
          this.refreshHeader();
        }
        refreshHeader() {
          const columns = this.datamanager.getColumns();
          $3("div", this.header).innerHTML = this.getHeaderHTML(columns);
          this.$filterRow = $3(".dt-row-filter", this.header);
          if (this.$filterRow) {
            $3.style(this.$filterRow, { display: "none" });
          }
          this.$columnMap = [];
          this.bindMoveColumn();
        }
        getHeaderHTML(columns) {
          let html = this.rowmanager.getRowHTML(columns, {
            isHeader: 1
          });
          if (this.options.inlineFilters) {
            html += this.rowmanager.getRowHTML(columns, {
              isFilter: 1
            });
          }
          return html;
        }
        bindEvents() {
          this.bindDropdown();
          this.bindResizeColumn();
          this.bindPerfectColumnWidth();
          this.bindFilter();
        }
        bindDropdown() {
          let toggleClass = ".dt-dropdown__toggle";
          let dropdownClass = ".dt-dropdown__list";
          this.instance.dropdownContainer.innerHTML = this.getDropdownListHTML();
          this.$dropdownList = this.instance.dropdownContainer.firstElementChild;
          $3.on(this.header, "click", toggleClass, (e2) => {
            this.openDropdown(e2);
          });
          const deactivateDropdownOnBodyClick = (e2) => {
            const selector = [
              toggleClass,
              toggleClass + " *",
              dropdownClass,
              dropdownClass + " *"
            ].join(",");
            if (e2.target.matches(selector))
              return;
            deactivateDropdown();
          };
          $3.on(document.body, "click", deactivateDropdownOnBodyClick);
          document.addEventListener("scroll", deactivateDropdown, true);
          this.instance.on("onDestroy", () => {
            $3.off(document.body, "click", deactivateDropdownOnBodyClick);
            $3.off(document, "scroll", deactivateDropdown);
          });
          $3.on(this.$dropdownList, "click", ".dt-dropdown__list-item", (e2, $item) => {
            if (!this._dropdownActiveColIndex)
              return;
            const dropdownItems = this.options.headerDropdown;
            const { index } = $3.data($item);
            const colIndex = this._dropdownActiveColIndex;
            let callback = dropdownItems[index].action;
            callback && callback.call(this.instance, this.getColumn(colIndex));
            this.hideDropdown();
          });
          const _this = this;
          function deactivateDropdown(e2) {
            _this.hideDropdown();
          }
          this.hideDropdown();
        }
        openDropdown(e2) {
          if (!this._dropdownWidth) {
            $3.style(this.$dropdownList, { display: "" });
            this._dropdownWidth = $3.style(this.$dropdownList, "width");
          }
          $3.style(this.$dropdownList, {
            display: "",
            left: e2.clientX - this._dropdownWidth + 4 + "px",
            top: e2.clientY + 4 + "px"
          });
          const $cell = $3.closest(".dt-cell", e2.target);
          const { colIndex } = $3.data($cell);
          this._dropdownActiveColIndex = colIndex;
        }
        hideDropdown() {
          $3.style(this.$dropdownList, {
            display: "none"
          });
          this._dropdownActiveColIndex = null;
        }
        bindResizeColumn() {
          let isDragging = false;
          let $resizingCell, startWidth, startX;
          $3.on(this.header, "mousedown", ".dt-cell .dt-cell__resize-handle", (e2, $handle) => {
            document.body.classList.add("dt-resize");
            const $cell = $handle.parentNode.parentNode;
            $resizingCell = $cell;
            const {
              colIndex
            } = $3.data($resizingCell);
            const col = this.getColumn(colIndex);
            if (col && col.resizable === false) {
              return;
            }
            isDragging = true;
            startWidth = $3.style($3(".dt-cell__content", $resizingCell), "width");
            startX = e2.pageX;
          });
          const onMouseup = (e2) => {
            document.body.classList.remove("dt-resize");
            if (!$resizingCell)
              return;
            isDragging = false;
            const {
              colIndex
            } = $3.data($resizingCell);
            this.setColumnWidth(colIndex);
            this.style.setBodyStyle();
            $resizingCell = null;
          };
          $3.on(document.body, "mouseup", onMouseup);
          this.instance.on("onDestroy", () => {
            $3.off(document.body, "mouseup", onMouseup);
          });
          const onMouseMove = (e2) => {
            if (!isDragging)
              return;
            let delta = e2.pageX - startX;
            if (this.options.direction === "rtl") {
              delta = -1 * delta;
            }
            const finalWidth = startWidth + delta;
            const {
              colIndex
            } = $3.data($resizingCell);
            let columnMinWidth = this.options.minimumColumnWidth;
            if (columnMinWidth > finalWidth) {
              return;
            }
            this.datamanager.updateColumn(colIndex, {
              width: finalWidth
            });
            this.setColumnHeaderWidth(colIndex);
          };
          $3.on(document.body, "mousemove", onMouseMove);
          this.instance.on("onDestroy", () => {
            $3.off(document.body, "mousemove", onMouseMove);
          });
        }
        bindPerfectColumnWidth() {
          $3.on(this.header, "dblclick", ".dt-cell .dt-cell__resize-handle", (e2, $handle) => {
            const $cell = $handle.parentNode.parentNode;
            const { colIndex } = $3.data($cell);
            let longestCell = this.bodyRenderer.visibleRows.map((d2) => d2[colIndex]).reduce((acc, curr) => acc.content.length > curr.content.length ? acc : curr);
            let $longestCellHTML = this.cellmanager.getCellHTML(longestCell);
            let $div = document.createElement("div");
            $div.innerHTML = $longestCellHTML;
            let cellText = $div.querySelector(".dt-cell__content").textContent;
            let {
              borderLeftWidth,
              borderRightWidth,
              paddingLeft,
              paddingRight
            } = $3.getStyle(this.bodyScrollable.querySelector(".dt-cell__content"));
            let padding = [borderLeftWidth, borderRightWidth, paddingLeft, paddingRight].map(parseFloat).reduce((sum, val2) => sum + val2);
            let width = $3.measureTextWidth(cellText) + padding;
            this.datamanager.updateColumn(colIndex, { width });
            this.setColumnHeaderWidth(colIndex);
            this.setColumnWidth(colIndex);
          });
        }
        bindMoveColumn() {
          if (this.options.disableReorderColumn)
            return;
          const $parent = $3(".dt-row", this.header);
          this.sortable = Sortable2.create($parent, {
            onEnd: (e2) => {
              const {
                oldIndex,
                newIndex
              } = e2;
              const $draggedCell = e2.item;
              const {
                colIndex
              } = $3.data($draggedCell);
              if (+colIndex === newIndex)
                return;
              this.switchColumn(oldIndex, newIndex);
            },
            preventOnFilter: false,
            filter: ".dt-cell__resize-handle, .dt-dropdown",
            chosenClass: "dt-cell--dragging",
            animation: 150
          });
        }
        sortColumn(colIndex, nextSortOrder) {
          this.instance.freeze();
          this.sortRows(colIndex, nextSortOrder).then(() => {
            this.refreshHeader();
            return this.rowmanager.refreshRows();
          }).then(() => this.instance.unfreeze()).then(() => {
            this.fireEvent("onSortColumn", this.getColumn(colIndex));
          });
        }
        removeColumn(colIndex) {
          const removedCol = this.getColumn(colIndex);
          this.instance.freeze();
          this.datamanager.removeColumn(colIndex).then(() => {
            this.refreshHeader();
            return this.rowmanager.refreshRows();
          }).then(() => this.instance.unfreeze()).then(() => {
            this.fireEvent("onRemoveColumn", removedCol);
          });
        }
        switchColumn(oldIndex, newIndex) {
          this.instance.freeze();
          this.datamanager.switchColumn(oldIndex, newIndex).then(() => {
            this.refreshHeader();
            return this.rowmanager.refreshRows();
          }).then(() => {
            this.setColumnWidth(oldIndex);
            this.setColumnWidth(newIndex);
            this.instance.unfreeze();
          }).then(() => {
            this.fireEvent("onSwitchColumn", this.getColumn(oldIndex), this.getColumn(newIndex));
          });
        }
        toggleFilter(flag) {
          if (!this.options.inlineFilters)
            return;
          let showFilter;
          if (flag === void 0) {
            showFilter = !this.isFilterShown;
          } else {
            showFilter = flag;
          }
          if (showFilter) {
            $3.style(this.$filterRow, { display: "" });
          } else {
            $3.style(this.$filterRow, { display: "none" });
          }
          this.isFilterShown = showFilter;
          this.style.setBodyStyle();
        }
        focusFilter(colIndex) {
          if (!this.isFilterShown)
            return;
          const $filterInput = $3(`.dt-cell--col-${colIndex} .dt-filter`, this.$filterRow);
          $filterInput.focus();
        }
        bindFilter() {
          if (!this.options.inlineFilters)
            return;
          const handler = (e2) => {
            this.applyFilter(this.getAppliedFilters());
          };
          $3.on(this.header, "keydown", ".dt-filter", debounce$1(handler, 300));
        }
        applyFilter(filters2) {
          this.datamanager.filterRows(filters2).then(({
            rowsToShow
          }) => {
            this.rowmanager.showRows(rowsToShow);
          });
        }
        getAppliedFilters() {
          const filters2 = {};
          $3.each(".dt-filter", this.header).map((input) => {
            const value = input.value;
            if (value) {
              filters2[input.dataset.colIndex] = value;
            }
          });
          return filters2;
        }
        applyDefaultSortOrder() {
          const columnsToSort = this.getColumns().filter((col) => col.sortOrder !== "none");
          if (columnsToSort.length === 1) {
            const column = columnsToSort[0];
            this.sortColumn(column.colIndex, column.sortOrder);
          }
        }
        sortRows(colIndex, sortOrder) {
          return this.datamanager.sortRows(colIndex, sortOrder);
        }
        getColumn(colIndex) {
          return this.datamanager.getColumn(colIndex);
        }
        getColumns() {
          return this.datamanager.getColumns();
        }
        setColumnWidth(colIndex, width) {
          colIndex = +colIndex;
          let columnWidth = width || this.getColumn(colIndex).width;
          const selector = [
            `.dt-cell__content--col-${colIndex}`,
            `.dt-cell__edit--col-${colIndex}`
          ].join(", ");
          const styles = {
            width: columnWidth + "px"
          };
          this.style.setStyle(selector, styles);
        }
        setColumnHeaderWidth(colIndex) {
          colIndex = +colIndex;
          this.$columnMap = this.$columnMap || [];
          const selector = `.dt-cell__content--header-${colIndex}`;
          const {
            width
          } = this.getColumn(colIndex);
          let $column = this.$columnMap[colIndex];
          if (!$column) {
            $column = this.header.querySelector(selector);
            this.$columnMap[colIndex] = $column;
          }
          $column.style.width = width + "px";
        }
        getColumnMinWidth(colIndex) {
          colIndex = +colIndex;
          return this.getColumn(colIndex).minWidth || 24;
        }
        getFirstColumnIndex() {
          return this.datamanager.getColumnIndexById("_rowIndex") + 1;
        }
        getHeaderCell$(colIndex) {
          return $3(`.dt-cell--header-${colIndex}`, this.header);
        }
        getLastColumnIndex() {
          return this.datamanager.getColumnCount() - 1;
        }
        getDropdownHTML() {
          const { dropdownButton } = this.options;
          return `
            <div class="dt-dropdown">
                <div class="dt-dropdown__toggle">${dropdownButton}</div>
            </div>
      `;
        }
        getDropdownListHTML() {
          const { headerDropdown: dropdownItems } = this.options;
          return `
            <div class="dt-dropdown__list">
            ${dropdownItems.map((d2, i2) => `
                <div class="dt-dropdown__list-item" data-index="${i2}">${d2.label}</div>
            `).join("")}
            </div>
        `;
        }
      };
      var RowManager = class {
        constructor(instance) {
          this.instance = instance;
          linkProperties(this, this.instance, [
            "options",
            "fireEvent",
            "wrapper",
            "bodyScrollable",
            "bodyRenderer",
            "style"
          ]);
          this.bindEvents();
          this.refreshRows = nextTick(this.refreshRows, this);
        }
        get datamanager() {
          return this.instance.datamanager;
        }
        get cellmanager() {
          return this.instance.cellmanager;
        }
        bindEvents() {
          this.bindCheckbox();
        }
        bindCheckbox() {
          if (!this.options.checkboxColumn)
            return;
          this.checkMap = [];
          $3.on(this.wrapper, "click", '.dt-cell--col-0 [type="checkbox"]', (e2, $checkbox) => {
            const $cell = $checkbox.closest(".dt-cell");
            const {
              rowIndex,
              isHeader
            } = $3.data($cell);
            const checked = $checkbox.checked;
            if (isHeader) {
              this.checkAll(checked);
            } else {
              this.checkRow(rowIndex, checked);
            }
          });
        }
        refreshRows() {
          this.instance.renderBody();
          this.instance.setDimensions();
        }
        refreshRow(row, rowIndex) {
          const _row = this.datamanager.updateRow(row, rowIndex);
          _row.forEach((cell) => {
            this.cellmanager.refreshCell(cell);
          });
        }
        getCheckedRows() {
          if (!this.checkMap) {
            return [];
          }
          let out = [];
          for (let rowIndex in this.checkMap) {
            const checked = this.checkMap[rowIndex];
            if (checked === 1) {
              out.push(rowIndex);
            }
          }
          return out;
        }
        highlightCheckedRows() {
          this.getCheckedRows().map((rowIndex) => this.checkRow(rowIndex, true));
        }
        checkRow(rowIndex, toggle) {
          const value = toggle ? 1 : 0;
          const selector = (rowIndex2) => `.dt-cell--0-${rowIndex2} [type="checkbox"]`;
          this.checkMap[rowIndex] = value;
          $3.each(selector(rowIndex), this.bodyScrollable).map((input) => {
            input.checked = toggle;
          });
          this.highlightRow(rowIndex, toggle);
          this.showCheckStatus();
          this.fireEvent("onCheckRow", this.datamanager.getRow(rowIndex));
        }
        checkAll(toggle) {
          const value = toggle ? 1 : 0;
          if (toggle) {
            this.checkMap = Array.from(Array(this.getTotalRows())).map((c2) => value);
          } else {
            this.checkMap = [];
          }
          $3.each('.dt-cell--col-0 [type="checkbox"]', this.bodyScrollable).map((input) => {
            input.checked = toggle;
          });
          this.highlightAll(toggle);
          this.showCheckStatus();
          this.fireEvent("onCheckRow");
        }
        showCheckStatus() {
          if (!this.options.checkedRowStatus)
            return;
          const checkedRows = this.getCheckedRows();
          const count = checkedRows.length;
          if (count > 0) {
            let message2 = this.instance.translate("{count} rows selected", {
              count
            });
            this.bodyRenderer.showToastMessage(message2);
          } else {
            this.bodyRenderer.clearToastMessage();
          }
        }
        highlightRow(rowIndex, toggle = true) {
          const $row = this.getRow$(rowIndex);
          if (!$row)
            return;
          if (!toggle && this.bodyScrollable.classList.contains("dt-scrollable--highlight-all")) {
            $row.classList.add("dt-row--unhighlight");
            return;
          }
          if (toggle && $row.classList.contains("dt-row--unhighlight")) {
            $row.classList.remove("dt-row--unhighlight");
          }
          this._highlightedRows = this._highlightedRows || {};
          if (toggle) {
            $row.classList.add("dt-row--highlight");
            this._highlightedRows[rowIndex] = $row;
          } else {
            $row.classList.remove("dt-row--highlight");
            delete this._highlightedRows[rowIndex];
          }
        }
        highlightAll(toggle = true) {
          if (toggle) {
            this.bodyScrollable.classList.add("dt-scrollable--highlight-all");
          } else {
            this.bodyScrollable.classList.remove("dt-scrollable--highlight-all");
            for (const rowIndex in this._highlightedRows) {
              const $row = this._highlightedRows[rowIndex];
              $row.classList.remove("dt-row--highlight");
            }
            this._highlightedRows = {};
          }
        }
        showRows(rowIndices) {
          rowIndices = ensureArray(rowIndices);
          const rows = rowIndices.map((rowIndex) => this.datamanager.getRow(rowIndex));
          this.bodyRenderer.renderRows(rows);
        }
        showAllRows() {
          const rowIndices = this.datamanager.getAllRowIndices();
          this.showRows(rowIndices);
        }
        getChildrenToShowForNode(rowIndex) {
          const row = this.datamanager.getRow(rowIndex);
          row.meta.isTreeNodeClose = false;
          return this.datamanager.getImmediateChildren(rowIndex);
        }
        openSingleNode(rowIndex) {
          const childrenToShow = this.getChildrenToShowForNode(rowIndex);
          const visibleRowIndices = this.bodyRenderer.visibleRowIndices;
          const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);
          this.showRows(rowsToShow);
        }
        getChildrenToHideForNode(rowIndex) {
          const row = this.datamanager.getRow(rowIndex);
          row.meta.isTreeNodeClose = true;
          const rowsToHide = this.datamanager.getChildren(rowIndex);
          rowsToHide.forEach((rowIndex2) => {
            const row2 = this.datamanager.getRow(rowIndex2);
            if (!row2.meta.isLeaf) {
              row2.meta.isTreeNodeClose = true;
            }
          });
          return rowsToHide;
        }
        closeSingleNode(rowIndex) {
          const rowsToHide = this.getChildrenToHideForNode(rowIndex);
          const visibleRows = this.bodyRenderer.visibleRowIndices;
          const rowsToShow = visibleRows.filter((rowIndex2) => !rowsToHide.includes(rowIndex2)).sort(numberSortAsc);
          this.showRows(rowsToShow);
        }
        expandAllNodes() {
          let rows = this.datamanager.getRows();
          let rootNodes = rows.filter((row) => !row.meta.isLeaf);
          const childrenToShow = rootNodes.map((row) => this.getChildrenToShowForNode(row.meta.rowIndex)).flat();
          const visibleRowIndices = this.bodyRenderer.visibleRowIndices;
          const rowsToShow = uniq$1([...childrenToShow, ...visibleRowIndices]).sort(numberSortAsc);
          this.showRows(rowsToShow);
        }
        collapseAllNodes() {
          let rows = this.datamanager.getRows();
          let rootNodes = rows.filter((row) => row.meta.indent === 0);
          const rowsToHide = rootNodes.map((row) => this.getChildrenToHideForNode(row.meta.rowIndex)).flat();
          const visibleRows = this.bodyRenderer.visibleRowIndices;
          const rowsToShow = visibleRows.filter((rowIndex) => !rowsToHide.includes(rowIndex)).sort(numberSortAsc);
          this.showRows(rowsToShow);
        }
        setTreeDepth(depth) {
          let rows = this.datamanager.getRows();
          const rowsToOpen = rows.filter((row) => row.meta.indent < depth);
          const rowsToClose = rows.filter((row) => row.meta.indent >= depth);
          const rowsToHide = rowsToClose.filter((row) => row.meta.indent > depth);
          rowsToClose.forEach((row) => {
            if (!row.meta.isLeaf) {
              row.meta.isTreeNodeClose = true;
            }
          });
          rowsToOpen.forEach((row) => {
            if (!row.meta.isLeaf) {
              row.meta.isTreeNodeClose = false;
            }
          });
          const rowsToShow = rows.filter((row) => !rowsToHide.includes(row)).map((row) => row.meta.rowIndex).sort(numberSortAsc);
          this.showRows(rowsToShow);
        }
        getRow$(rowIndex) {
          return $3(this.selector(rowIndex), this.bodyScrollable);
        }
        getTotalRows() {
          return this.datamanager.getRowCount();
        }
        getFirstRowIndex() {
          return 0;
        }
        getLastRowIndex() {
          return this.datamanager.getRowCount() - 1;
        }
        scrollToRow(rowIndex) {
          rowIndex = +rowIndex;
          this._lastScrollTo = this._lastScrollTo || 0;
          const $row = this.getRow$(rowIndex);
          if ($3.inViewport($row, this.bodyScrollable))
            return;
          const {
            height
          } = $row.getBoundingClientRect();
          const {
            top,
            bottom
          } = this.bodyScrollable.getBoundingClientRect();
          const rowsInView = Math.floor((bottom - top) / height);
          let offset = 0;
          if (rowIndex > this._lastScrollTo) {
            offset = height * (rowIndex + 1 - rowsInView);
          } else {
            offset = height * (rowIndex + 1 - 1);
          }
          this._lastScrollTo = rowIndex;
          $3.scrollTop(this.bodyScrollable, offset);
        }
        getRowHTML(row, props) {
          const dataAttr = makeDataAttributeString(props);
          let rowIdentifier = props.rowIndex;
          if (props.isFilter) {
            row = row.map((cell) => Object.assign({}, cell, {
              content: this.getFilterInput({
                colIndex: cell.colIndex
              }),
              isFilter: 1,
              isHeader: void 0,
              editable: false
            }));
            rowIdentifier = "filter";
          }
          if (props.isHeader) {
            rowIdentifier = "header";
          }
          return `
            <div class="dt-row dt-row-${rowIdentifier}" ${dataAttr}>
                ${row.map((cell) => this.cellmanager.getCellHTML(cell)).join("")}
            </div>
        `;
        }
        getFilterInput(props) {
          const dataAttr = makeDataAttributeString(props);
          return `<input class="dt-filter dt-input" type="text" ${dataAttr} tabindex="1" />`;
        }
        selector(rowIndex) {
          return `.dt-row-${rowIndex}`;
        }
      };
      var hyperlist = createCommonjsModule(function(module3, exports3) {
        (function(f3) {
          {
            module3.exports = f3();
          }
        })(function() {
          return function e2(t3, n2, r2) {
            function s2(o3, u2) {
              if (!n2[o3]) {
                if (!t3[o3]) {
                  var a2 = typeof commonjsRequire == "function" && commonjsRequire;
                  if (!u2 && a2)
                    return a2(o3, true);
                  if (i2)
                    return i2(o3, true);
                  var f3 = new Error("Cannot find module '" + o3 + "'");
                  throw f3.code = "MODULE_NOT_FOUND", f3;
                }
                var l2 = n2[o3] = { exports: {} };
                t3[o3][0].call(l2.exports, function(e3) {
                  var n3 = t3[o3][1][e3];
                  return s2(n3 ? n3 : e3);
                }, l2, l2.exports, e2, t3, n2, r2);
              }
              return n2[o3].exports;
            }
            var i2 = typeof commonjsRequire == "function" && commonjsRequire;
            for (var o2 = 0; o2 < r2.length; o2++)
              s2(r2[o2]);
            return s2;
          }({ 1: [function(_dereq_, module4, exports4) {
            Object.defineProperty(exports4, "__esModule", {
              value: true
            });
            var _createClass = function() {
              function defineProperties(target, props) {
                for (var i2 = 0; i2 < props.length; i2++) {
                  var descriptor = props[i2];
                  descriptor.enumerable = descriptor.enumerable || false;
                  descriptor.configurable = true;
                  if ("value" in descriptor)
                    descriptor.writable = true;
                  Object.defineProperty(target, descriptor.key, descriptor);
                }
              }
              return function(Constructor, protoProps, staticProps) {
                if (protoProps)
                  defineProperties(Constructor.prototype, protoProps);
                if (staticProps)
                  defineProperties(Constructor, staticProps);
                return Constructor;
              };
            }();
            function _classCallCheck(instance, Constructor) {
              if (!(instance instanceof Constructor)) {
                throw new TypeError("Cannot call a class as a function");
              }
            }
            var defaultConfig = {
              width: "100%",
              height: "100%"
            };
            var isNumber2 = function isNumber3(input) {
              return Number(input) === Number(input);
            };
            var HyperList2 = function() {
              _createClass(HyperList3, null, [{
                key: "create",
                value: function create(element, userProvidedConfig) {
                  return new HyperList3(element, userProvidedConfig);
                }
              }, {
                key: "mergeStyle",
                value: function mergeStyle(element, style) {
                  for (var i2 in style) {
                    if (element.style[i2] !== style[i2]) {
                      element.style[i2] = style[i2];
                    }
                  }
                }
              }, {
                key: "getMaxBrowserHeight",
                value: function getMaxBrowserHeight() {
                  var wrapper = document.createElement("div");
                  var fixture = document.createElement("div");
                  HyperList3.mergeStyle(wrapper, { position: "absolute", height: "1px", opacity: 0 });
                  HyperList3.mergeStyle(fixture, { height: "1e7px" });
                  wrapper.appendChild(fixture);
                  document.body.appendChild(wrapper);
                  var maxElementHeight = fixture.offsetHeight;
                  document.body.removeChild(wrapper);
                  return maxElementHeight;
                }
              }]);
              function HyperList3(element, userProvidedConfig) {
                var _this = this;
                _classCallCheck(this, HyperList3);
                this._config = {};
                this._lastRepaint = null;
                this._maxElementHeight = HyperList3.getMaxBrowserHeight();
                this.refresh(element, userProvidedConfig);
                var config2 = this._config;
                var render = function render2() {
                  var scrollTop = _this._getScrollPosition();
                  var lastRepaint = _this._lastRepaint;
                  _this._renderAnimationFrame = window.requestAnimationFrame(render2);
                  if (scrollTop === lastRepaint) {
                    return;
                  }
                  if (!lastRepaint || Math.abs(scrollTop - lastRepaint) > _this._averageHeight) {
                    var rendered = _this._renderChunk();
                    _this._lastRepaint = scrollTop;
                    if (rendered !== false && typeof config2.afterRender === "function") {
                      config2.afterRender();
                    }
                  }
                };
                render();
              }
              _createClass(HyperList3, [{
                key: "destroy",
                value: function destroy() {
                  window.cancelAnimationFrame(this._renderAnimationFrame);
                }
              }, {
                key: "refresh",
                value: function refresh(element, userProvidedConfig) {
                  var _this2 = this;
                  Object.assign(this._config, defaultConfig, userProvidedConfig);
                  if (!element || element.nodeType !== 1) {
                    throw new Error("HyperList requires a valid DOM Node container");
                  }
                  this._element = element;
                  var config2 = this._config;
                  var scroller = this._scroller || config2.scroller || document.createElement(config2.scrollerTagName || "tr");
                  if (typeof config2.useFragment !== "boolean") {
                    this._config.useFragment = true;
                  }
                  if (!config2.generate) {
                    throw new Error("Missing required `generate` function");
                  }
                  if (!isNumber2(config2.total)) {
                    throw new Error("Invalid required `total` value, expected number");
                  }
                  if (!Array.isArray(config2.itemHeight) && !isNumber2(config2.itemHeight)) {
                    throw new Error("\n        Invalid required `itemHeight` value, expected number or array\n      ".trim());
                  } else if (isNumber2(config2.itemHeight)) {
                    this._itemHeights = Array(config2.total).fill(config2.itemHeight);
                  } else {
                    this._itemHeights = config2.itemHeight;
                  }
                  Object.keys(defaultConfig).filter(function(prop) {
                    return prop in config2;
                  }).forEach(function(prop) {
                    var value = config2[prop];
                    var isValueNumber = isNumber2(value);
                    var isValuePercent = isValueNumber ? false : value.slice(-1) === "%";
                    if (value && typeof value !== "string" && typeof value !== "number") {
                      var msg = "Invalid optional `" + prop + "`, expected string or number";
                      throw new Error(msg);
                    } else if (isValueNumber) {
                      config2[prop] = value + "px";
                    }
                    if (prop !== "height") {
                      return;
                    }
                    var numberValue = isValueNumber ? value : parseInt(value.replace(/px|%/, ""), 10);
                    if (isValuePercent) {
                      _this2._containerHeight = window.innerHeight * numberValue / 100;
                    } else {
                      _this2._containerHeight = isNumber2(value) ? value : numberValue;
                    }
                  });
                  var elementStyle = {
                    width: "" + config2.width,
                    height: "" + config2.height,
                    overflow: "auto",
                    position: "relative"
                  };
                  HyperList3.mergeStyle(element, elementStyle);
                  var scrollerHeight = config2.itemHeight * config2.total;
                  var maxElementHeight = this._maxElementHeight;
                  if (scrollerHeight > maxElementHeight) {
                    console.warn(["HyperList: The maximum element height", maxElementHeight + "px has", "been exceeded; please reduce your item height."].join(" "));
                  }
                  var scrollerStyle = {
                    opacity: "0",
                    position: "absolute",
                    width: "1px",
                    height: scrollerHeight + "px"
                  };
                  HyperList3.mergeStyle(scroller, scrollerStyle);
                  if (!this._scroller) {
                    element.appendChild(scroller);
                  }
                  this._scroller = scroller;
                  this._scrollHeight = this._computeScrollHeight();
                  this._itemPositions = this._itemPositions || Array(config2.total).fill(0);
                  this._computePositions(0);
                  this._renderChunk(this._lastRepaint !== null);
                  if (typeof config2.afterRender === "function") {
                    config2.afterRender();
                  }
                }
              }, {
                key: "_getRow",
                value: function _getRow(i2) {
                  var config2 = this._config;
                  var item = config2.generate(i2);
                  var height = item.height;
                  if (height !== void 0 && isNumber2(height)) {
                    item = item.element;
                    if (height !== this._itemHeights) {
                      this._itemHeights[i2] = height;
                      this._computePositions(i2);
                      this._scrollHeight = this._computeScrollHeight(i2);
                    }
                  } else {
                    height = this._itemHeights[i2];
                  }
                  if (!item || item.nodeType !== 1) {
                    throw new Error("Generator did not return a DOM Node for index: " + i2);
                  }
                  var oldClass = item.getAttribute("class") || "";
                  item.setAttribute("class", oldClass + " " + (config2.rowClassName || "vrow"));
                  var top = this._itemPositions[i2];
                  HyperList3.mergeStyle(item, {
                    position: "absolute",
                    top: top + "px"
                  });
                  return item;
                }
              }, {
                key: "_getScrollPosition",
                value: function _getScrollPosition() {
                  var config2 = this._config;
                  if (typeof config2.overrideScrollPosition === "function") {
                    return config2.overrideScrollPosition();
                  }
                  return this._element.scrollTop;
                }
              }, {
                key: "_renderChunk",
                value: function _renderChunk(force) {
                  var config2 = this._config;
                  var element = this._element;
                  var scrollTop = this._getScrollPosition();
                  var total = config2.total;
                  var from = config2.reverse ? this._getReverseFrom(scrollTop) : this._getFrom(scrollTop) - 1;
                  if (from < 0 || from - this._screenItemsLen < 0) {
                    from = 0;
                  }
                  if (!force && this._lastFrom === from) {
                    return false;
                  }
                  this._lastFrom = from;
                  var to = from + this._cachedItemsLen;
                  if (to > total || to + this._cachedItemsLen > total) {
                    to = total;
                  }
                  var fragment = config2.useFragment ? document.createDocumentFragment() : [];
                  var scroller = this._scroller;
                  fragment[config2.useFragment ? "appendChild" : "push"](scroller);
                  for (var i2 = from; i2 < to; i2++) {
                    var row = this._getRow(i2);
                    fragment[config2.useFragment ? "appendChild" : "push"](row);
                  }
                  if (config2.applyPatch) {
                    return config2.applyPatch(element, fragment);
                  }
                  element.innerHTML = "";
                  element.appendChild(fragment);
                }
              }, {
                key: "_computePositions",
                value: function _computePositions() {
                  var from = arguments.length <= 0 || arguments[0] === void 0 ? 1 : arguments[0];
                  var config2 = this._config;
                  var total = config2.total;
                  var reverse = config2.reverse;
                  if (from < 1 && !reverse) {
                    from = 1;
                  }
                  for (var i2 = from; i2 < total; i2++) {
                    if (reverse) {
                      if (i2 === 0) {
                        this._itemPositions[0] = this._scrollHeight - this._itemHeights[0];
                      } else {
                        this._itemPositions[i2] = this._itemPositions[i2 - 1] - this._itemHeights[i2];
                      }
                    } else {
                      this._itemPositions[i2] = this._itemHeights[i2 - 1] + this._itemPositions[i2 - 1];
                    }
                  }
                }
              }, {
                key: "_computeScrollHeight",
                value: function _computeScrollHeight() {
                  var _this3 = this;
                  var config2 = this._config;
                  var total = config2.total;
                  var scrollHeight = this._itemHeights.reduce(function(a2, b2) {
                    return a2 + b2;
                  }, 0);
                  HyperList3.mergeStyle(this._scroller, {
                    opacity: 0,
                    position: "absolute",
                    width: "1px",
                    height: scrollHeight + "px"
                  });
                  var sortedItemHeights = this._itemHeights.slice(0).sort(function(a2, b2) {
                    return a2 - b2;
                  });
                  var middle = Math.floor(total / 2);
                  var averageHeight = total % 2 === 0 ? (sortedItemHeights[middle] + sortedItemHeights[middle - 1]) / 2 : sortedItemHeights[middle];
                  var containerHeight = this._element.clientHeight ? this._element.clientHeight : this._containerHeight;
                  this._screenItemsLen = Math.ceil(containerHeight / averageHeight);
                  this._containerHeight = containerHeight;
                  this._cachedItemsLen = Math.max(this._cachedItemsLen || 0, this._screenItemsLen * 3);
                  this._averageHeight = averageHeight;
                  if (config2.reverse) {
                    window.requestAnimationFrame(function() {
                      _this3._element.scrollTop = scrollHeight;
                    });
                  }
                  return scrollHeight;
                }
              }, {
                key: "_getFrom",
                value: function _getFrom(scrollTop) {
                  var i2 = 0;
                  while (this._itemPositions[i2] < scrollTop) {
                    i2++;
                  }
                  return i2;
                }
              }, {
                key: "_getReverseFrom",
                value: function _getReverseFrom(scrollTop) {
                  var i2 = this._config.total - 1;
                  while (i2 > 0 && this._itemPositions[i2] < scrollTop + this._containerHeight) {
                    i2--;
                  }
                  return i2;
                }
              }]);
              return HyperList3;
            }();
            exports4.default = HyperList2;
            module4.exports = exports4["default"];
          }, {}] }, {}, [1])(1);
        });
      });
      var HyperList = unwrapExports(hyperlist);
      var BodyRenderer = class {
        constructor(instance) {
          this.instance = instance;
          this.options = instance.options;
          this.datamanager = instance.datamanager;
          this.rowmanager = instance.rowmanager;
          this.cellmanager = instance.cellmanager;
          this.bodyScrollable = instance.bodyScrollable;
          this.footer = this.instance.footer;
          this.log = instance.log;
        }
        renderRows(rows) {
          this.visibleRows = rows;
          this.visibleRowIndices = rows.map((row) => row.meta.rowIndex);
          if (rows.length === 0) {
            this.bodyScrollable.innerHTML = this.getNoDataHTML();
            return;
          }
          const rowViewOrder = this.datamanager.rowViewOrder.map((index) => {
            if (this.visibleRowIndices.includes(index)) {
              return index;
            }
            return null;
          }).filter((index) => index !== null);
          const computedStyle = getComputedStyle(this.bodyScrollable);
          let config2 = {
            width: computedStyle.width,
            height: computedStyle.height,
            itemHeight: this.options.cellHeight,
            total: rows.length,
            generate: (index) => {
              const el = document.createElement("div");
              const rowIndex = rowViewOrder[index];
              const row = this.datamanager.getRow(rowIndex);
              const rowHTML = this.rowmanager.getRowHTML(row, row.meta);
              el.innerHTML = rowHTML;
              return el.children[0];
            },
            afterRender: () => {
              this.restoreState();
            }
          };
          if (!this.hyperlist) {
            this.hyperlist = new HyperList(this.bodyScrollable, config2);
          } else {
            this.hyperlist.refresh(this.bodyScrollable, config2);
          }
          this.renderFooter();
        }
        render() {
          const rows = this.datamanager.getRowsForView();
          this.renderRows(rows);
          this.instance.setDimensions();
        }
        renderFooter() {
          if (!this.options.showTotalRow)
            return;
          const totalRow = this.getTotalRow();
          let html = this.rowmanager.getRowHTML(totalRow, { isTotalRow: 1, rowIndex: "totalRow" });
          this.footer.innerHTML = html;
        }
        getTotalRow() {
          const columns = this.datamanager.getColumns();
          const totalRowTemplate = columns.map((col) => {
            let content = null;
            if (["_rowIndex", "_checkbox"].includes(col.id)) {
              content = "";
            }
            return {
              content,
              isTotalRow: 1,
              colIndex: col.colIndex,
              column: col
            };
          });
          const totalRow = totalRowTemplate.map((cell, i2) => {
            if (cell.content === "")
              return cell;
            if (this.options.hooks.columnTotal) {
              const columnValues = this.visibleRows.map((row) => row[i2].content);
              const result = this.options.hooks.columnTotal.call(this.instance, columnValues, cell);
              if (result != null) {
                cell.content = result;
                return cell;
              }
            }
            cell.content = this.visibleRows.reduce((acc, prevRow) => {
              const prevCell = prevRow[i2];
              if (typeof prevCell.content === "number") {
                if (acc == null)
                  acc = 0;
                return acc + prevCell.content;
              }
              return acc;
            }, cell.content);
            return cell;
          });
          return totalRow;
        }
        restoreState() {
          this.rowmanager.highlightCheckedRows();
          this.cellmanager.selectAreaOnClusterChanged();
          this.cellmanager.focusCellOnClusterChanged();
        }
        showToastMessage(message2, hideAfter) {
          this.instance.toastMessage.innerHTML = this.getToastMessageHTML(message2);
          if (hideAfter) {
            setTimeout(() => {
              this.clearToastMessage();
            }, hideAfter * 1e3);
          }
        }
        clearToastMessage() {
          this.instance.toastMessage.innerHTML = "";
        }
        getNoDataHTML() {
          return `<div class="dt-scrollable__no-data">${this.options.noDataMessage}</div>`;
        }
        getToastMessageHTML(message2) {
          return `<span class="dt-toast__message">${message2}</span>`;
        }
      };
      var Style = class {
        constructor(instance) {
          this.instance = instance;
          linkProperties(this, this.instance, [
            "options",
            "datamanager",
            "columnmanager",
            "header",
            "footer",
            "bodyScrollable",
            "datatableWrapper",
            "getColumn",
            "bodyRenderer"
          ]);
          this.scopeClass = "dt-instance-" + instance.constructor.instances;
          instance.datatableWrapper.classList.add(this.scopeClass);
          const styleEl = document.createElement("style");
          instance.wrapper.insertBefore(styleEl, instance.datatableWrapper);
          this.styleEl = styleEl;
          this.bindResizeWindow();
          this.bindScrollHeader();
        }
        get stylesheet() {
          return this.styleEl.sheet;
        }
        bindResizeWindow() {
          this.onWindowResize = this.onWindowResize.bind(this);
          this.onWindowResize = throttle$1(this.onWindowResize, 300);
          if (this.options.layout === "fluid") {
            $3.on(window, "resize", this.onWindowResize);
          }
        }
        bindScrollHeader() {
          this._settingHeaderPosition = false;
          $3.on(this.bodyScrollable, "scroll", (e2) => {
            if (this._settingHeaderPosition)
              return;
            this._settingHeaderPosition = true;
            requestAnimationFrame(() => {
              const left = -e2.target.scrollLeft;
              $3.style(this.header, {
                transform: `translateX(${left}px)`
              });
              $3.style(this.footer, {
                transform: `translateX(${left}px)`
              });
              this._settingHeaderPosition = false;
            });
          });
        }
        onWindowResize() {
          this.distributeRemainingWidth();
          this.refreshColumnWidth();
          this.setBodyStyle();
        }
        destroy() {
          this.styleEl.remove();
          $3.off(window, "resize", this.onWindowResize);
        }
        setStyle(selector, styleObject) {
          if (selector.includes(",")) {
            selector.split(",").map((s2) => s2.trim()).forEach((selector2) => {
              this.setStyle(selector2, styleObject);
            });
            return;
          }
          selector = selector.trim();
          if (!selector)
            return;
          this._styleRulesMap = this._styleRulesMap || {};
          const prefixedSelector = this._getPrefixedSelector(selector);
          if (this._styleRulesMap[prefixedSelector]) {
            this.removeStyle(selector);
            styleObject = Object.assign({}, this._styleRulesMap[prefixedSelector], styleObject);
          }
          const styleString = this._getRuleString(styleObject);
          const ruleString = `${prefixedSelector} { ${styleString} }`;
          this._styleRulesMap[prefixedSelector] = styleObject;
          this.stylesheet.insertRule(ruleString);
        }
        removeStyle(selector) {
          if (selector.includes(",")) {
            selector.split(",").map((s2) => s2.trim()).forEach((selector2) => {
              this.removeStyle(selector2);
            });
            return;
          }
          selector = selector.trim();
          if (!selector)
            return;
          const prefixedSelector = this._getPrefixedSelector(selector);
          const index = Array.from(this.stylesheet.cssRules).findIndex((rule) => rule.selectorText === prefixedSelector);
          if (index === -1)
            return;
          this.stylesheet.deleteRule(index);
        }
        _getPrefixedSelector(selector) {
          return `.${this.scopeClass} ${selector}`;
        }
        _getRuleString(styleObject) {
          return Object.keys(styleObject).map((prop) => {
            let dashed = prop;
            if (!prop.includes("-")) {
              dashed = camelCaseToDash(prop);
            }
            return `${dashed}:${styleObject[prop]};`;
          }).join("");
        }
        setDimensions() {
          this.setCellHeight();
          this.setupMinWidth();
          this.setupNaturalColumnWidth();
          this.setupColumnWidth();
          this.distributeRemainingWidth();
          this.setColumnStyle();
          this.setBodyStyle();
        }
        setCellHeight() {
          this.setStyle(".dt-cell", {
            height: this.options.cellHeight + "px"
          });
        }
        setupMinWidth() {
          $3.each(".dt-cell--header", this.header).map((col) => {
            const { colIndex } = $3.data(col);
            const column = this.getColumn(colIndex);
            if (!column.minWidth) {
              const width = $3.style($3(".dt-cell__content", col), "width");
              column.minWidth = width;
            }
          });
        }
        setupNaturalColumnWidth() {
          if (!$3(".dt-row"))
            return;
          $3.each(".dt-row-header .dt-cell", this.header).map(($headerCell) => {
            const { colIndex } = $3.data($headerCell);
            const column = this.datamanager.getColumn(colIndex);
            let width = $3.style($3(".dt-cell__content", $headerCell), "width");
            if (typeof width === "number" && width >= this.options.minimumColumnWidth) {
              column.naturalWidth = width;
            } else {
              column.naturalWidth = this.options.minimumColumnWidth;
            }
          });
          $3.each(".dt-row-0 .dt-cell", this.bodyScrollable).map(($cell) => {
            const {
              colIndex
            } = $3.data($cell);
            const column = this.datamanager.getColumn(colIndex);
            let naturalWidth = $3.style($3(".dt-cell__content", $cell), "width");
            if (typeof naturalWidth === "number" && naturalWidth >= column.naturalWidth) {
              column.naturalWidth = naturalWidth;
            } else {
              column.naturalWidth = column.naturalWidth;
            }
          });
        }
        setupColumnWidth() {
          if (this.options.layout === "ratio") {
            let totalWidth = $3.style(this.datatableWrapper, "width");
            if (this.options.serialNoColumn) {
              const rowIndexColumn = this.datamanager.getColumnById("_rowIndex");
              totalWidth = totalWidth - rowIndexColumn.width - 1;
            }
            if (this.options.checkboxColumn) {
              const rowIndexColumn = this.datamanager.getColumnById("_checkbox");
              totalWidth = totalWidth - rowIndexColumn.width - 1;
            }
            const totalParts = this.datamanager.getColumns().map((column) => {
              if (column.id === "_rowIndex" || column.id === "_checkbox") {
                return 0;
              }
              if (!column.width) {
                column.width = 1;
              }
              column.ratioWidth = parseInt(column.width, 10);
              return column.ratioWidth;
            }).reduce((a2, c2) => a2 + c2);
            const onePart = totalWidth / totalParts;
            this.datamanager.getColumns().map((column) => {
              if (column.id === "_rowIndex" || column.id === "_checkbox")
                return;
              column.width = Math.floor(onePart * column.ratioWidth) - 1;
            });
          } else {
            this.datamanager.getColumns().map((column) => {
              if (!column.width) {
                column.width = column.naturalWidth;
              }
              if (column.id === "_rowIndex") {
                column.width = this.getRowIndexColumnWidth();
              }
              if (column.width < this.options.minimumColumnWidth) {
                column.width = this.options.minimumColumnWidth;
              }
            });
          }
        }
        distributeRemainingWidth() {
          if (this.options.layout !== "fluid")
            return;
          const wrapperWidth = $3.style(this.instance.datatableWrapper, "width");
          let firstRow = $3(".dt-row", this.bodyScrollable);
          let firstRowWidth = wrapperWidth;
          if (!firstRow) {
            let headerRow = $3(".dt-row", this.instance.header);
            let cellWidths = Array.from(headerRow.children).map((cell) => cell.offsetWidth);
            firstRowWidth = cellWidths.reduce((sum, a2) => sum + a2, 0);
          } else {
            firstRowWidth = $3.style(firstRow, "width");
          }
          const resizableColumns = this.datamanager.getColumns().filter((col) => col.resizable);
          const deltaWidth = (wrapperWidth - firstRowWidth) / resizableColumns.length;
          resizableColumns.map((col) => {
            const width = $3.style(this.getColumnHeaderElement(col.colIndex), "width");
            let finalWidth = Math.floor(width + deltaWidth) - 2;
            this.datamanager.updateColumn(col.colIndex, {
              width: finalWidth
            });
          });
        }
        setColumnStyle() {
          this.datamanager.getColumns().map((column) => {
            if (!column.align) {
              column.align = "left";
            }
            if (!["left", "center", "right"].includes(column.align)) {
              column.align = "left";
            }
            this.setStyle(`.dt-cell--col-${column.colIndex}`, {
              "text-align": column.align
            });
            this.columnmanager.setColumnHeaderWidth(column.colIndex);
            this.columnmanager.setColumnWidth(column.colIndex);
          });
        }
        refreshColumnWidth() {
          this.datamanager.getColumns().map((column) => {
            this.columnmanager.setColumnHeaderWidth(column.colIndex);
            this.columnmanager.setColumnWidth(column.colIndex);
          });
        }
        setBodyStyle() {
          const bodyWidth = $3.style(this.datatableWrapper, "width");
          const firstRow = $3(".dt-row", this.bodyScrollable);
          if (!firstRow)
            return;
          const rowWidth = $3.style(firstRow, "width");
          let width = bodyWidth > rowWidth ? rowWidth : bodyWidth;
          $3.style(this.bodyScrollable, {
            width: width + "px"
          });
          $3.removeStyle(this.bodyScrollable, "height");
          let bodyHeight = $3.getStyle(this.bodyScrollable, "height");
          const scrollHeight = (this.bodyRenderer.hyperlist || {})._scrollHeight || Infinity;
          const hasHorizontalOverflow = $3.hasHorizontalOverflow(this.bodyScrollable);
          let height;
          if (scrollHeight < bodyHeight) {
            height = scrollHeight;
            if (hasHorizontalOverflow) {
              height += $3.scrollbarSize();
            }
            $3.style(this.bodyScrollable, {
              height: height + "px"
            });
          }
          const verticalOverflow = this.bodyScrollable.scrollHeight - this.bodyScrollable.offsetHeight;
          if (verticalOverflow < $3.scrollbarSize()) {
            $3.style(this.bodyScrollable, {
              overflowY: "hidden"
            });
          }
          if (this.options.layout === "fluid") {
            $3.style(this.bodyScrollable, {
              overflowX: "hidden"
            });
          }
        }
        getColumnHeaderElement(colIndex) {
          colIndex = +colIndex;
          if (colIndex < 0)
            return null;
          return $3(`.dt-cell--col-${colIndex}`, this.header);
        }
        getRowIndexColumnWidth() {
          const rowCount = this.datamanager.getRowCount();
          const padding = 22;
          return $3.measureTextWidth(rowCount + "") + padding;
        }
      };
      var KEYCODES = {
        13: "enter",
        91: "meta",
        16: "shift",
        17: "ctrl",
        18: "alt",
        37: "left",
        38: "up",
        39: "right",
        40: "down",
        9: "tab",
        27: "esc",
        67: "c",
        70: "f",
        86: "v"
      };
      var Keyboard = class {
        constructor(element) {
          this.listeners = {};
          $3.on(element, "keydown", this.handler.bind(this));
        }
        handler(e2) {
          let key2 = KEYCODES[e2.keyCode];
          if (e2.shiftKey && key2 !== "shift") {
            key2 = "shift+" + key2;
          }
          if (e2.ctrlKey && key2 !== "ctrl" || e2.metaKey && key2 !== "meta") {
            key2 = "ctrl+" + key2;
          }
          const listeners = this.listeners[key2];
          if (listeners && listeners.length > 0) {
            for (let listener of listeners) {
              const preventBubbling = listener(e2);
              if (preventBubbling === void 0 || preventBubbling === true) {
                e2.preventDefault();
              }
            }
          }
        }
        on(key2, listener) {
          const keys = key2.split(",").map((k2) => k2.trim());
          keys.map((key3) => {
            this.listeners[key3] = this.listeners[key3] || [];
            this.listeners[key3].push(listener);
          });
        }
      };
      var en = {
        "Sort Ascending": "Sort Ascending",
        "Sort Descending": "Sort Descending",
        "Reset sorting": "Reset sorting",
        "Remove column": "Remove column",
        "No Data": "No Data",
        "{count} cells copied": { "1": "{count} cell copied", "default": "{count} cells copied" },
        "{count} rows selected": { "1": "{count} row selected", "default": "{count} rows selected" }
      };
      var de = {
        "Sort Ascending": "Aufsteigend sortieren",
        "Sort Descending": "Absteigend sortieren",
        "Reset sorting": "Sortierung zur\xFCcksetzen",
        "Remove column": "Spalte entfernen",
        "No Data": "Keine Daten",
        "{count} cells copied": { "1": "{count} Zelle kopiert", "default": "{count} Zellen kopiert" },
        "{count} rows selected": { "1": "{count} Zeile ausgew\xE4hlt", "default": "{count} Zeilen ausgew\xE4hlt" }
      };
      var fr = {
        "Sort Ascending": "Trier par ordre croissant",
        "Sort Descending": "Trier par ordre d\xE9croissant",
        "Reset sorting": "R\xE9initialiser le tri",
        "Remove column": "Supprimer colonne",
        "No Data": "Pas de donn\xE9es",
        "{count} cells copied": { "1": "{count} cellule copi\xE9e", "default": "{count} cellules copi\xE9es" },
        "{count} rows selected": { "1": "{count} ligne s\xE9lectionn\xE9e", "default": "{count} lignes s\xE9lectionn\xE9es" }
      };
      var it2 = {
        "Sort Ascending": "Ordinamento ascendente",
        "Sort Descending": "Ordinamento decrescente",
        "Reset sorting": "Azzeramento ordinamento",
        "Remove column": "Rimuovi colonna",
        "No Data": "Nessun dato",
        "{count} cells copied": { "1": "Copiato {count} cella", "default": "{count} celle copiate" },
        "{count} rows selected": { "1": "{count} linea selezionata", "default": "{count} linee selezionate" }
      };
      function getTranslations() {
        return {
          en,
          de,
          fr,
          it: it2
        };
      }
      var TranslationManager2 = class {
        constructor(language) {
          this.language = language;
          this.translations = getTranslations();
        }
        addTranslations(translations) {
          this.translations = Object.assign(this.translations, translations);
        }
        translate(sourceText, args) {
          let translation = this.translations[this.language] && this.translations[this.language][sourceText] || sourceText;
          if (typeof translation === "object") {
            translation = args && args.count ? this.getPluralizedTranslation(translation, args.count) : sourceText;
          }
          return format2(translation, args || {});
        }
        getPluralizedTranslation(translations, count) {
          return translations[count] || translations["default"];
        }
      };
      function filterRows(rows, filters2) {
        let filteredRowIndices = [];
        if (Object.keys(filters2).length === 0) {
          return rows.map((row) => row.meta.rowIndex);
        }
        for (let colIndex in filters2) {
          const keyword = filters2[colIndex];
          const filteredRows = filteredRowIndices.length ? filteredRowIndices.map((i2) => rows[i2]) : rows;
          const cells = filteredRows.map((row) => row[colIndex]);
          let filter = guessFilter(keyword);
          let filterMethod = getFilterMethod(filter);
          if (filterMethod) {
            filteredRowIndices = filterMethod(filter.text, cells);
          } else {
            filteredRowIndices = cells.map((cell) => cell.rowIndex);
          }
        }
        return filteredRowIndices;
      }
      function getFilterMethod(filter) {
        const stringCompareValue = (cell) => String(stripHTML(cell.html || "") || cell.content || "").toLowerCase();
        const numberCompareValue = (cell) => parseFloat(cell.content);
        const getCompareValues = (cell, keyword) => {
          if (cell.column.compareValue) {
            const compareValues = cell.column.compareValue(cell, keyword);
            if (compareValues && Array.isArray(compareValues))
              return compareValues;
          }
          const float = numberCompareValue(cell);
          if (!isNaN(float)) {
            return [float, keyword];
          }
          return [stringCompareValue(cell), keyword];
        };
        let filterMethodMap = {
          contains(keyword, cells) {
            return cells.filter((cell) => {
              const hay = stringCompareValue(cell);
              const needle = (keyword || "").toLowerCase();
              return !needle || hay.includes(needle);
            }).map((cell) => cell.rowIndex);
          },
          greaterThan(keyword, cells) {
            return cells.filter((cell) => {
              const [compareValue, keywordValue] = getCompareValues(cell, keyword);
              return compareValue > keywordValue;
            }).map((cell) => cell.rowIndex);
          },
          lessThan(keyword, cells) {
            return cells.filter((cell) => {
              const [compareValue, keywordValue] = getCompareValues(cell, keyword);
              return compareValue < keywordValue;
            }).map((cell) => cell.rowIndex);
          },
          equals(keyword, cells) {
            return cells.filter((cell) => {
              const value = parseFloat(cell.content);
              return value === keyword;
            }).map((cell) => cell.rowIndex);
          },
          notEquals(keyword, cells) {
            return cells.filter((cell) => {
              const value = parseFloat(cell.content);
              return value !== keyword;
            }).map((cell) => cell.rowIndex);
          },
          range(rangeValues, cells) {
            return cells.filter((cell) => {
              const values1 = getCompareValues(cell, rangeValues[0]);
              const values2 = getCompareValues(cell, rangeValues[1]);
              const value = values1[0];
              return value >= values1[1] && value <= values2[1];
            }).map((cell) => cell.rowIndex);
          },
          containsNumber(keyword, cells) {
            return cells.filter((cell) => {
              let number = parseFloat(keyword, 10);
              let string = keyword;
              let hayNumber = numberCompareValue(cell);
              let hayString = stringCompareValue(cell);
              return number === hayNumber || hayString.includes(string);
            }).map((cell) => cell.rowIndex);
          }
        };
        return filterMethodMap[filter.type];
      }
      function guessFilter(keyword = "") {
        if (keyword.length === 0)
          return {};
        let compareString = keyword;
        if ([">", "<", "="].includes(compareString[0])) {
          compareString = keyword.slice(1);
        } else if (compareString.startsWith("!=")) {
          compareString = keyword.slice(2);
        }
        if (keyword.startsWith(">")) {
          if (compareString) {
            return {
              type: "greaterThan",
              text: compareString.trim()
            };
          }
        }
        if (keyword.startsWith("<")) {
          if (compareString) {
            return {
              type: "lessThan",
              text: compareString.trim()
            };
          }
        }
        if (keyword.startsWith("=")) {
          if (isNumber(compareString)) {
            return {
              type: "equals",
              text: Number(keyword.slice(1).trim())
            };
          }
        }
        if (isNumber(compareString)) {
          return {
            type: "containsNumber",
            text: compareString
          };
        }
        if (keyword.startsWith("!=")) {
          if (isNumber(compareString)) {
            return {
              type: "notEquals",
              text: Number(keyword.slice(2).trim())
            };
          }
        }
        if (keyword.split(":").length === 2) {
          compareString = keyword.split(":");
          return {
            type: "range",
            text: compareString.map((v2) => v2.trim())
          };
        }
        return {
          type: "contains",
          text: compareString.toLowerCase()
        };
      }
      function getDefaultOptions(instance) {
        return {
          columns: [],
          data: [],
          dropdownButton: icons.chevronDown,
          headerDropdown: [
            {
              label: instance.translate("Sort Ascending"),
              action: function(column) {
                this.sortColumn(column.colIndex, "asc");
              }
            },
            {
              label: instance.translate("Sort Descending"),
              action: function(column) {
                this.sortColumn(column.colIndex, "desc");
              }
            },
            {
              label: instance.translate("Reset sorting"),
              action: function(column) {
                this.sortColumn(column.colIndex, "none");
              }
            },
            {
              label: instance.translate("Remove column"),
              action: function(column) {
                this.removeColumn(column.colIndex);
              }
            }
          ],
          events: {
            onRemoveColumn(column) {
            },
            onSwitchColumn(column1, column2) {
            },
            onSortColumn(column) {
            },
            onCheckRow(row) {
            },
            onDestroy() {
            }
          },
          hooks: {
            columnTotal: null
          },
          sortIndicator: {
            asc: "\u2191",
            desc: "\u2193",
            none: ""
          },
          overrideComponents: {},
          filterRows,
          freezeMessage: "",
          getEditor: null,
          serialNoColumn: true,
          checkboxColumn: false,
          clusterize: true,
          logs: false,
          layout: "fixed",
          noDataMessage: instance.translate("No Data"),
          cellHeight: 40,
          minimumColumnWidth: 30,
          inlineFilters: false,
          treeView: false,
          checkedRowStatus: true,
          dynamicRowHeight: false,
          pasteFromClipboard: false,
          showTotalRow: false,
          direction: "ltr",
          disableReorderColumn: false
        };
      }
      var defaultComponents = {
        DataManager,
        CellManager,
        ColumnManager,
        RowManager,
        BodyRenderer,
        Style,
        Keyboard
      };
      var DataTable2 = class {
        constructor(wrapper, options) {
          DataTable2.instances++;
          if (typeof wrapper === "string") {
            wrapper = document.querySelector(wrapper);
          }
          this.wrapper = wrapper;
          if (!(this.wrapper instanceof HTMLElement)) {
            throw new Error("Invalid argument given for `wrapper`");
          }
          this.initializeTranslations(options);
          this.setDefaultOptions();
          this.buildOptions(options);
          this.prepare();
          this.initializeComponents();
          if (this.options.data) {
            this.refresh();
            this.columnmanager.applyDefaultSortOrder();
          }
        }
        initializeTranslations(options) {
          this.language = options.language || "en";
          this.translationManager = new TranslationManager2(this.language);
          if (options.translations) {
            this.translationManager.addTranslations(options.translations);
          }
        }
        setDefaultOptions() {
          this.DEFAULT_OPTIONS = getDefaultOptions(this);
        }
        buildOptions(options) {
          this.options = this.options || {};
          this.options = Object.assign({}, this.DEFAULT_OPTIONS, this.options || {}, options);
          options.headerDropdown = options.headerDropdown || [];
          this.options.headerDropdown = [
            ...this.DEFAULT_OPTIONS.headerDropdown,
            ...options.headerDropdown
          ];
          this.events = Object.assign({}, this.DEFAULT_OPTIONS.events, this.options.events || {}, options.events || {});
          this.fireEvent = this.fireEvent.bind(this);
        }
        prepare() {
          this.prepareDom();
          this.unfreeze();
        }
        initializeComponents() {
          let components = Object.assign({}, defaultComponents, this.options.overrideComponents);
          let {
            Style: Style$$1,
            Keyboard: Keyboard$$1,
            DataManager: DataManager$$1,
            RowManager: RowManager$$1,
            ColumnManager: ColumnManager$$1,
            CellManager: CellManager$$1,
            BodyRenderer: BodyRenderer$$1
          } = components;
          this.style = new Style$$1(this);
          this.keyboard = new Keyboard$$1(this.wrapper);
          this.datamanager = new DataManager$$1(this.options);
          this.rowmanager = new RowManager$$1(this);
          this.columnmanager = new ColumnManager$$1(this);
          this.cellmanager = new CellManager$$1(this);
          this.bodyRenderer = new BodyRenderer$$1(this);
        }
        prepareDom() {
          this.wrapper.innerHTML = `
            <div class="datatable" dir="${this.options.direction}">
                <div class="dt-header"></div>
                <div class="dt-scrollable"></div>
                <div class="dt-footer"></div>
                <div class="dt-freeze">
                    <span class="dt-freeze__message">
                        ${this.options.freezeMessage}
                    </span>
                </div>
                <div class="dt-toast"></div>
                <div class="dt-dropdown-container"></div>
                <textarea class="dt-paste-target"></textarea>
            </div>
        `;
          this.datatableWrapper = $3(".datatable", this.wrapper);
          this.header = $3(".dt-header", this.wrapper);
          this.footer = $3(".dt-footer", this.wrapper);
          this.bodyScrollable = $3(".dt-scrollable", this.wrapper);
          this.freezeContainer = $3(".dt-freeze", this.wrapper);
          this.toastMessage = $3(".dt-toast", this.wrapper);
          this.pasteTarget = $3(".dt-paste-target", this.wrapper);
          this.dropdownContainer = $3(".dt-dropdown-container", this.wrapper);
        }
        refresh(data, columns) {
          this.datamanager.init(data, columns);
          this.render();
          this.setDimensions();
        }
        destroy() {
          this.wrapper.innerHTML = "";
          this.style.destroy();
          this.fireEvent("onDestroy");
        }
        appendRows(rows) {
          this.datamanager.appendRows(rows);
          this.rowmanager.refreshRows();
        }
        refreshRow(row, rowIndex) {
          this.rowmanager.refreshRow(row, rowIndex);
        }
        render() {
          this.renderHeader();
          this.renderBody();
        }
        renderHeader() {
          this.columnmanager.renderHeader();
        }
        renderBody() {
          this.bodyRenderer.render();
        }
        setDimensions() {
          this.style.setDimensions();
        }
        showToastMessage(message2, hideAfter) {
          this.bodyRenderer.showToastMessage(message2, hideAfter);
        }
        clearToastMessage() {
          this.bodyRenderer.clearToastMessage();
        }
        getColumn(colIndex) {
          return this.datamanager.getColumn(colIndex);
        }
        getColumns() {
          return this.datamanager.getColumns();
        }
        getRows() {
          return this.datamanager.getRows();
        }
        getCell(colIndex, rowIndex) {
          return this.datamanager.getCell(colIndex, rowIndex);
        }
        getColumnHeaderElement(colIndex) {
          return this.columnmanager.getColumnHeaderElement(colIndex);
        }
        getViewportHeight() {
          if (!this.viewportHeight) {
            this.viewportHeight = $3.style(this.bodyScrollable, "height");
          }
          return this.viewportHeight;
        }
        sortColumn(colIndex, sortOrder) {
          this.columnmanager.sortColumn(colIndex, sortOrder);
        }
        removeColumn(colIndex) {
          this.columnmanager.removeColumn(colIndex);
        }
        scrollToLastColumn() {
          this.datatableWrapper.scrollLeft = 9999;
        }
        freeze() {
          $3.style(this.freezeContainer, {
            display: ""
          });
        }
        unfreeze() {
          $3.style(this.freezeContainer, {
            display: "none"
          });
        }
        updateOptions(options) {
          this.buildOptions(options);
        }
        fireEvent(eventName, ...args) {
          const handlers = [
            ...this._internalEventHandlers[eventName] || [],
            this.events[eventName]
          ].filter(Boolean);
          for (let handler of handlers) {
            handler.apply(this, args);
          }
        }
        on(event2, handler) {
          this._internalEventHandlers = this._internalEventHandlers || {};
          this._internalEventHandlers[event2] = this._internalEventHandlers[event2] || [];
          this._internalEventHandlers[event2].push(handler);
        }
        log() {
          if (this.options.logs) {
            console.log.apply(console, arguments);
          }
        }
        translate(str, args) {
          return this.translationManager.translate(str, args);
        }
      };
      DataTable2.instances = 0;
      var name2 = "frappe-datatable";
      var version = "0.0.0-development";
      var description = "A modern datatable library for the web";
      var main = "dist/frappe-datatable.cjs.js";
      var unpkg = "dist/frappe-datatable.min.js";
      var jsdelivr = "dist/frappe-datatable.min.js";
      var scripts = { "start": "yarn run dev", "build": "rollup -c && NODE_ENV=production rollup -c", "dev": "rollup -c -w", "cy:server": "http-server -p 8989", "cy:open": "cypress open", "cy:run": "cypress run", "test": "start-server-and-test cy:server http://localhost:8989 cy:run", "test-local": "start-server-and-test cy:server http://localhost:8989 cy:open", "travis-deploy-once": "travis-deploy-once", "semantic-release": "semantic-release", "lint": "eslint src", "lint-and-build": "yarn lint && yarn build", "commit": "npx git-cz" };
      var files = ["dist", "src"];
      var devDependencies = { "autoprefixer": "^9.0.0", "chai": "3.5.0", "cypress": "^9.2.0", "cz-conventional-changelog": "^2.1.0", "deepmerge": "^2.0.1", "eslint": "^5.0.1", "eslint-config-airbnb": "^16.1.0", "eslint-config-airbnb-base": "^12.1.0", "eslint-plugin-import": "^2.11.0", "http-server": "^0.11.1", "mocha": "3.3.0", "postcss-custom-properties": "^7.0.0", "postcss-nested": "^3.0.0", "rollup": "^0.59.4", "rollup-plugin-commonjs": "^8.3.0", "rollup-plugin-eslint": "^4.0.0", "rollup-plugin-json": "^2.3.0", "rollup-plugin-node-resolve": "^3.0.3", "rollup-plugin-postcss": "^1.2.8", "rollup-plugin-uglify-es": "^0.0.1", "semantic-release": "^17.1.1", "start-server-and-test": "^1.4.1", "travis-deploy-once": "^5.0.1" };
      var repository = { "type": "git", "url": "https://github.com/frappe/datatable.git" };
      var keywords = ["datatable", "data", "grid", "table"];
      var author = "Faris Ansari";
      var license = "MIT";
      var bugs = { "url": "https://github.com/frappe/datatable/issues" };
      var homepage = "https://frappe.github.io/datatable";
      var dependencies = { "hyperlist": "^1.0.0-beta", "lodash": "^4.17.5", "sortablejs": "^1.7.0" };
      var config = { "commitizen": { "path": "cz-conventional-changelog" } };
      var packageJson = {
        name: name2,
        version,
        description,
        main,
        unpkg,
        jsdelivr,
        scripts,
        files,
        devDependencies,
        repository,
        keywords,
        author,
        license,
        bugs,
        homepage,
        dependencies,
        config
      };
      DataTable2.__version__ = packageJson.version;
      module2.exports = DataTable2;
    }
  });

  // node_modules/driver.js/dist/driver.min.js
  var require_driver_min = __commonJS({
    "node_modules/driver.js/dist/driver.min.js"(exports2, module2) {
      !function(t3, e2) {
        typeof exports2 == "object" && typeof module2 == "object" ? module2.exports = e2() : typeof define == "function" && define.amd ? define([], e2) : typeof exports2 == "object" ? exports2.Driver = e2() : t3.Driver = e2();
      }(window, function() {
        return function(t3) {
          var e2 = {};
          function n2(o2) {
            if (e2[o2])
              return e2[o2].exports;
            var i2 = e2[o2] = { i: o2, l: false, exports: {} };
            return t3[o2].call(i2.exports, i2, i2.exports, n2), i2.l = true, i2.exports;
          }
          return n2.m = t3, n2.c = e2, n2.d = function(t4, e3, o2) {
            n2.o(t4, e3) || Object.defineProperty(t4, e3, { enumerable: true, get: o2 });
          }, n2.r = function(t4) {
            typeof Symbol != "undefined" && Symbol.toStringTag && Object.defineProperty(t4, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t4, "__esModule", { value: true });
          }, n2.t = function(t4, e3) {
            if (1 & e3 && (t4 = n2(t4)), 8 & e3)
              return t4;
            if (4 & e3 && typeof t4 == "object" && t4 && t4.__esModule)
              return t4;
            var o2 = /* @__PURE__ */ Object.create(null);
            if (n2.r(o2), Object.defineProperty(o2, "default", { enumerable: true, value: t4 }), 2 & e3 && typeof t4 != "string")
              for (var i2 in t4)
                n2.d(o2, i2, function(e4) {
                  return t4[e4];
                }.bind(null, i2));
            return o2;
          }, n2.n = function(t4) {
            var e3 = t4 && t4.__esModule ? function() {
              return t4.default;
            } : function() {
              return t4;
            };
            return n2.d(e3, "a", e3), e3;
          }, n2.o = function(t4, e3) {
            return Object.prototype.hasOwnProperty.call(t4, e3);
          }, n2.p = "/dist/", n2(n2.s = 57);
        }([function(t3, e2, n2) {
          var o2 = n2(2), i2 = n2(11), r2 = n2(4), s2 = n2(13), a2 = n2(22), c2 = function(t4, e3, n3) {
            var u2, l2, h2, f3, p2 = t4 & c2.F, d2 = t4 & c2.G, v2 = t4 & c2.S, y2 = t4 & c2.P, g2 = t4 & c2.B, m2 = d2 ? o2 : v2 ? o2[e3] || (o2[e3] = {}) : (o2[e3] || {}).prototype, b2 = d2 ? i2 : i2[e3] || (i2[e3] = {}), w2 = b2.prototype || (b2.prototype = {});
            for (u2 in d2 && (n3 = e3), n3)
              h2 = ((l2 = !p2 && m2 && m2[u2] !== void 0) ? m2 : n3)[u2], f3 = g2 && l2 ? a2(h2, o2) : y2 && typeof h2 == "function" ? a2(Function.call, h2) : h2, m2 && s2(m2, u2, h2, t4 & c2.U), b2[u2] != h2 && r2(b2, u2, f3), y2 && w2[u2] != h2 && (w2[u2] = h2);
          };
          o2.core = i2, c2.F = 1, c2.G = 2, c2.S = 4, c2.P = 8, c2.B = 16, c2.W = 32, c2.U = 64, c2.R = 128, t3.exports = c2;
        }, function(t3, e2, n2) {
          var o2 = n2(17)("wks"), i2 = n2(14), r2 = n2(2).Symbol, s2 = typeof r2 == "function";
          (t3.exports = function(t4) {
            return o2[t4] || (o2[t4] = s2 && r2[t4] || (s2 ? r2 : i2)("Symbol." + t4));
          }).store = o2;
        }, function(t3, e2) {
          var n2 = t3.exports = typeof window != "undefined" && window.Math == Math ? window : typeof self != "undefined" && self.Math == Math ? self : Function("return this")();
          typeof __g == "number" && (__g = n2);
        }, function(t3, e2) {
          t3.exports = function(t4) {
            return typeof t4 == "object" ? t4 !== null : typeof t4 == "function";
          };
        }, function(t3, e2, n2) {
          var o2 = n2(5), i2 = n2(16);
          t3.exports = n2(6) ? function(t4, e3, n3) {
            return o2.f(t4, e3, i2(1, n3));
          } : function(t4, e3, n3) {
            return t4[e3] = n3, t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(12), i2 = n2(35), r2 = n2(21), s2 = Object.defineProperty;
          e2.f = n2(6) ? Object.defineProperty : function(t4, e3, n3) {
            if (o2(t4), e3 = r2(e3, true), o2(n3), i2)
              try {
                return s2(t4, e3, n3);
              } catch (t5) {
              }
            if ("get" in n3 || "set" in n3)
              throw TypeError("Accessors not supported!");
            return "value" in n3 && (t4[e3] = n3.value), t4;
          };
        }, function(t3, e2, n2) {
          t3.exports = !n2(7)(function() {
            return Object.defineProperty({}, "a", { get: function() {
              return 7;
            } }).a != 7;
          });
        }, function(t3, e2) {
          t3.exports = function(t4) {
            try {
              return !!t4();
            } catch (t5) {
              return true;
            }
          };
        }, function(t3, e2) {
          var n2 = {}.hasOwnProperty;
          t3.exports = function(t4, e3) {
            return n2.call(t4, e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(39), i2 = n2(24);
          t3.exports = function(t4) {
            return o2(i2(t4));
          };
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S + o2.F * !n2(6), "Object", { defineProperty: n2(5).f });
        }, function(t3, e2) {
          var n2 = t3.exports = { version: "2.6.9" };
          typeof __e == "number" && (__e = n2);
        }, function(t3, e2, n2) {
          var o2 = n2(3);
          t3.exports = function(t4) {
            if (!o2(t4))
              throw TypeError(t4 + " is not an object!");
            return t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(2), i2 = n2(4), r2 = n2(8), s2 = n2(14)("src"), a2 = n2(59), c2 = ("" + a2).split("toString");
          n2(11).inspectSource = function(t4) {
            return a2.call(t4);
          }, (t3.exports = function(t4, e3, n3, a3) {
            var u2 = typeof n3 == "function";
            u2 && (r2(n3, "name") || i2(n3, "name", e3)), t4[e3] !== n3 && (u2 && (r2(n3, s2) || i2(n3, s2, t4[e3] ? "" + t4[e3] : c2.join(String(e3)))), t4 === o2 ? t4[e3] = n3 : a3 ? t4[e3] ? t4[e3] = n3 : i2(t4, e3, n3) : (delete t4[e3], i2(t4, e3, n3)));
          })(Function.prototype, "toString", function() {
            return typeof this == "function" && this[s2] || a2.call(this);
          });
        }, function(t3, e2) {
          var n2 = 0, o2 = Math.random();
          t3.exports = function(t4) {
            return "Symbol(".concat(t4 === void 0 ? "" : t4, ")_", (++n2 + o2).toString(36));
          };
        }, function(t3, e2, n2) {
          var o2 = n2(45), i2 = n2(28);
          t3.exports = Object.keys || function(t4) {
            return o2(t4, i2);
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3) {
            return { enumerable: !(1 & t4), configurable: !(2 & t4), writable: !(4 & t4), value: e3 };
          };
        }, function(t3, e2, n2) {
          var o2 = n2(11), i2 = n2(2), r2 = i2["__core-js_shared__"] || (i2["__core-js_shared__"] = {});
          (t3.exports = function(t4, e3) {
            return r2[t4] || (r2[t4] = e3 !== void 0 ? e3 : {});
          })("versions", []).push({ version: o2.version, mode: n2(18) ? "pure" : "global", copyright: "\xA9 2019 Denis Pushkarev (zloirock.ru)" });
        }, function(t3, e2) {
          t3.exports = false;
        }, function(t3, e2, n2) {
          var o2 = n2(24);
          t3.exports = function(t4) {
            return Object(o2(t4));
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(2), i2 = n2(8), r2 = n2(6), s2 = n2(0), a2 = n2(13), c2 = n2(62).KEY, u2 = n2(7), l2 = n2(17), h2 = n2(26), f3 = n2(14), p2 = n2(1), d2 = n2(43), v2 = n2(44), y2 = n2(63), g2 = n2(42), m2 = n2(12), b2 = n2(3), w2 = n2(19), x2 = n2(9), S2 = n2(21), O2 = n2(16), k2 = n2(30), P2 = n2(67), E2 = n2(49), N2 = n2(47), j2 = n2(5), L2 = n2(15), T2 = E2.f, C2 = j2.f, _2 = P2.f, M2 = o2.Symbol, H2 = o2.JSON, B2 = H2 && H2.stringify, F2 = p2("_hidden"), I2 = p2("toPrimitive"), R2 = {}.propertyIsEnumerable, A2 = l2("symbol-registry"), z2 = l2("symbols"), D2 = l2("op-symbols"), V2 = Object.prototype, W2 = typeof M2 == "function" && !!N2.f, q2 = o2.QObject, G2 = !q2 || !q2.prototype || !q2.prototype.findChild, K2 = r2 && u2(function() {
            return k2(C2({}, "a", { get: function() {
              return C2(this, "a", { value: 7 }).a;
            } })).a != 7;
          }) ? function(t4, e3, n3) {
            var o3 = T2(V2, e3);
            o3 && delete V2[e3], C2(t4, e3, n3), o3 && t4 !== V2 && C2(V2, e3, o3);
          } : C2, U2 = function(t4) {
            var e3 = z2[t4] = k2(M2.prototype);
            return e3._k = t4, e3;
          }, Y2 = W2 && typeof M2.iterator == "symbol" ? function(t4) {
            return typeof t4 == "symbol";
          } : function(t4) {
            return t4 instanceof M2;
          }, J2 = function(t4, e3, n3) {
            return t4 === V2 && J2(D2, e3, n3), m2(t4), e3 = S2(e3, true), m2(n3), i2(z2, e3) ? (n3.enumerable ? (i2(t4, F2) && t4[F2][e3] && (t4[F2][e3] = false), n3 = k2(n3, { enumerable: O2(0, false) })) : (i2(t4, F2) || C2(t4, F2, O2(1, {})), t4[F2][e3] = true), K2(t4, e3, n3)) : C2(t4, e3, n3);
          }, X2 = function(t4, e3) {
            m2(t4);
            for (var n3, o3 = y2(e3 = x2(e3)), i3 = 0, r3 = o3.length; r3 > i3; )
              J2(t4, n3 = o3[i3++], e3[n3]);
            return t4;
          }, Q2 = function(t4) {
            var e3 = R2.call(this, t4 = S2(t4, true));
            return !(this === V2 && i2(z2, t4) && !i2(D2, t4)) && (!(e3 || !i2(this, t4) || !i2(z2, t4) || i2(this, F2) && this[F2][t4]) || e3);
          }, $3 = function(t4, e3) {
            if (t4 = x2(t4), e3 = S2(e3, true), t4 !== V2 || !i2(z2, e3) || i2(D2, e3)) {
              var n3 = T2(t4, e3);
              return !n3 || !i2(z2, e3) || i2(t4, F2) && t4[F2][e3] || (n3.enumerable = true), n3;
            }
          }, Z2 = function(t4) {
            for (var e3, n3 = _2(x2(t4)), o3 = [], r3 = 0; n3.length > r3; )
              i2(z2, e3 = n3[r3++]) || e3 == F2 || e3 == c2 || o3.push(e3);
            return o3;
          }, tt2 = function(t4) {
            for (var e3, n3 = t4 === V2, o3 = _2(n3 ? D2 : x2(t4)), r3 = [], s3 = 0; o3.length > s3; )
              !i2(z2, e3 = o3[s3++]) || n3 && !i2(V2, e3) || r3.push(z2[e3]);
            return r3;
          };
          W2 || (a2((M2 = function() {
            if (this instanceof M2)
              throw TypeError("Symbol is not a constructor!");
            var t4 = f3(arguments.length > 0 ? arguments[0] : void 0), e3 = function(n3) {
              this === V2 && e3.call(D2, n3), i2(this, F2) && i2(this[F2], t4) && (this[F2][t4] = false), K2(this, t4, O2(1, n3));
            };
            return r2 && G2 && K2(V2, t4, { configurable: true, set: e3 }), U2(t4);
          }).prototype, "toString", function() {
            return this._k;
          }), E2.f = $3, j2.f = J2, n2(48).f = P2.f = Z2, n2(29).f = Q2, N2.f = tt2, r2 && !n2(18) && a2(V2, "propertyIsEnumerable", Q2, true), d2.f = function(t4) {
            return U2(p2(t4));
          }), s2(s2.G + s2.W + s2.F * !W2, { Symbol: M2 });
          for (var et2 = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), nt2 = 0; et2.length > nt2; )
            p2(et2[nt2++]);
          for (var ot2 = L2(p2.store), it2 = 0; ot2.length > it2; )
            v2(ot2[it2++]);
          s2(s2.S + s2.F * !W2, "Symbol", { for: function(t4) {
            return i2(A2, t4 += "") ? A2[t4] : A2[t4] = M2(t4);
          }, keyFor: function(t4) {
            if (!Y2(t4))
              throw TypeError(t4 + " is not a symbol!");
            for (var e3 in A2)
              if (A2[e3] === t4)
                return e3;
          }, useSetter: function() {
            G2 = true;
          }, useSimple: function() {
            G2 = false;
          } }), s2(s2.S + s2.F * !W2, "Object", { create: function(t4, e3) {
            return e3 === void 0 ? k2(t4) : X2(k2(t4), e3);
          }, defineProperty: J2, defineProperties: X2, getOwnPropertyDescriptor: $3, getOwnPropertyNames: Z2, getOwnPropertySymbols: tt2 });
          var rt2 = u2(function() {
            N2.f(1);
          });
          s2(s2.S + s2.F * rt2, "Object", { getOwnPropertySymbols: function(t4) {
            return N2.f(w2(t4));
          } }), H2 && s2(s2.S + s2.F * (!W2 || u2(function() {
            var t4 = M2();
            return B2([t4]) != "[null]" || B2({ a: t4 }) != "{}" || B2(Object(t4)) != "{}";
          })), "JSON", { stringify: function(t4) {
            for (var e3, n3, o3 = [t4], i3 = 1; arguments.length > i3; )
              o3.push(arguments[i3++]);
            if (n3 = e3 = o3[1], (b2(e3) || t4 !== void 0) && !Y2(t4))
              return g2(e3) || (e3 = function(t5, e4) {
                if (typeof n3 == "function" && (e4 = n3.call(this, t5, e4)), !Y2(e4))
                  return e4;
              }), o3[1] = e3, B2.apply(H2, o3);
          } }), M2.prototype[I2] || n2(4)(M2.prototype, I2, M2.prototype.valueOf), h2(M2, "Symbol"), h2(Math, "Math", true), h2(o2.JSON, "JSON", true);
        }, function(t3, e2, n2) {
          var o2 = n2(3);
          t3.exports = function(t4, e3) {
            if (!o2(t4))
              return t4;
            var n3, i2;
            if (e3 && typeof (n3 = t4.toString) == "function" && !o2(i2 = n3.call(t4)))
              return i2;
            if (typeof (n3 = t4.valueOf) == "function" && !o2(i2 = n3.call(t4)))
              return i2;
            if (!e3 && typeof (n3 = t4.toString) == "function" && !o2(i2 = n3.call(t4)))
              return i2;
            throw TypeError("Can't convert object to primitive value");
          };
        }, function(t3, e2, n2) {
          var o2 = n2(37);
          t3.exports = function(t4, e3, n3) {
            if (o2(t4), e3 === void 0)
              return t4;
            switch (n3) {
              case 1:
                return function(n4) {
                  return t4.call(e3, n4);
                };
              case 2:
                return function(n4, o3) {
                  return t4.call(e3, n4, o3);
                };
              case 3:
                return function(n4, o3, i2) {
                  return t4.call(e3, n4, o3, i2);
                };
            }
            return function() {
              return t4.apply(e3, arguments);
            };
          };
        }, function(t3, e2) {
          var n2 = {}.toString;
          t3.exports = function(t4) {
            return n2.call(t4).slice(8, -1);
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            if (t4 == null)
              throw TypeError("Can't call method on  " + t4);
            return t4;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(7);
          t3.exports = function(t4, e3) {
            return !!t4 && o2(function() {
              e3 ? t4.call(null, function() {
              }, 1) : t4.call(null);
            });
          };
        }, function(t3, e2, n2) {
          var o2 = n2(5).f, i2 = n2(8), r2 = n2(1)("toStringTag");
          t3.exports = function(t4, e3, n3) {
            t4 && !i2(t4 = n3 ? t4 : t4.prototype, r2) && o2(t4, r2, { configurable: true, value: e3 });
          };
        }, function(t3, e2, n2) {
          var o2 = n2(17)("keys"), i2 = n2(14);
          t3.exports = function(t4) {
            return o2[t4] || (o2[t4] = i2(t4));
          };
        }, function(t3, e2) {
          t3.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
        }, function(t3, e2) {
          e2.f = {}.propertyIsEnumerable;
        }, function(t3, e2, n2) {
          var o2 = n2(12), i2 = n2(65), r2 = n2(28), s2 = n2(27)("IE_PROTO"), a2 = function() {
          }, c2 = function() {
            var t4, e3 = n2(36)("iframe"), o3 = r2.length;
            for (e3.style.display = "none", n2(66).appendChild(e3), e3.src = "javascript:", (t4 = e3.contentWindow.document).open(), t4.write("<script>document.F=Object<\/script>"), t4.close(), c2 = t4.F; o3--; )
              delete c2.prototype[r2[o3]];
            return c2();
          };
          t3.exports = Object.create || function(t4, e3) {
            var n3;
            return t4 !== null ? (a2.prototype = o2(t4), n3 = new a2(), a2.prototype = null, n3[s2] = t4) : n3 = c2(), e3 === void 0 ? n3 : i2(n3, e3);
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(68), i2 = n2(69), r2 = n2(32), s2 = n2(9);
          t3.exports = n2(70)(Array, "Array", function(t4, e3) {
            this._t = s2(t4), this._i = 0, this._k = e3;
          }, function() {
            var t4 = this._t, e3 = this._k, n3 = this._i++;
            return !t4 || n3 >= t4.length ? (this._t = void 0, i2(1)) : i2(0, e3 == "keys" ? n3 : e3 == "values" ? t4[n3] : [n3, t4[n3]]);
          }, "values"), r2.Arguments = r2.Array, o2("keys"), o2("values"), o2("entries");
        }, function(t3, e2) {
          t3.exports = {};
        }, function(t3, e2, n2) {
          n2(44)("asyncIterator");
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), i2 = n2(38)(0), r2 = n2(25)([].forEach, true);
          o2(o2.P + o2.F * !r2, "Array", { forEach: function(t4) {
            return i2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          t3.exports = !n2(6) && !n2(7)(function() {
            return Object.defineProperty(n2(36)("div"), "a", { get: function() {
              return 7;
            } }).a != 7;
          });
        }, function(t3, e2, n2) {
          var o2 = n2(3), i2 = n2(2).document, r2 = o2(i2) && o2(i2.createElement);
          t3.exports = function(t4) {
            return r2 ? i2.createElement(t4) : {};
          };
        }, function(t3, e2) {
          t3.exports = function(t4) {
            if (typeof t4 != "function")
              throw TypeError(t4 + " is not a function!");
            return t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(22), i2 = n2(39), r2 = n2(19), s2 = n2(40), a2 = n2(60);
          t3.exports = function(t4, e3) {
            var n3 = t4 == 1, c2 = t4 == 2, u2 = t4 == 3, l2 = t4 == 4, h2 = t4 == 6, f3 = t4 == 5 || h2, p2 = e3 || a2;
            return function(e4, a3, d2) {
              for (var v2, y2, g2 = r2(e4), m2 = i2(g2), b2 = o2(a3, d2, 3), w2 = s2(m2.length), x2 = 0, S2 = n3 ? p2(e4, w2) : c2 ? p2(e4, 0) : void 0; w2 > x2; x2++)
                if ((f3 || x2 in m2) && (y2 = b2(v2 = m2[x2], x2, g2), t4)) {
                  if (n3)
                    S2[x2] = y2;
                  else if (y2)
                    switch (t4) {
                      case 3:
                        return true;
                      case 5:
                        return v2;
                      case 6:
                        return x2;
                      case 2:
                        S2.push(v2);
                    }
                  else if (l2)
                    return false;
                }
              return h2 ? -1 : u2 || l2 ? l2 : S2;
            };
          };
        }, function(t3, e2, n2) {
          var o2 = n2(23);
          t3.exports = Object("z").propertyIsEnumerable(0) ? Object : function(t4) {
            return o2(t4) == "String" ? t4.split("") : Object(t4);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(41), i2 = Math.min;
          t3.exports = function(t4) {
            return t4 > 0 ? i2(o2(t4), 9007199254740991) : 0;
          };
        }, function(t3, e2) {
          var n2 = Math.ceil, o2 = Math.floor;
          t3.exports = function(t4) {
            return isNaN(t4 = +t4) ? 0 : (t4 > 0 ? o2 : n2)(t4);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(23);
          t3.exports = Array.isArray || function(t4) {
            return o2(t4) == "Array";
          };
        }, function(t3, e2, n2) {
          e2.f = n2(1);
        }, function(t3, e2, n2) {
          var o2 = n2(2), i2 = n2(11), r2 = n2(18), s2 = n2(43), a2 = n2(5).f;
          t3.exports = function(t4) {
            var e3 = i2.Symbol || (i2.Symbol = r2 ? {} : o2.Symbol || {});
            t4.charAt(0) == "_" || t4 in e3 || a2(e3, t4, { value: s2.f(t4) });
          };
        }, function(t3, e2, n2) {
          var o2 = n2(8), i2 = n2(9), r2 = n2(46)(false), s2 = n2(27)("IE_PROTO");
          t3.exports = function(t4, e3) {
            var n3, a2 = i2(t4), c2 = 0, u2 = [];
            for (n3 in a2)
              n3 != s2 && o2(a2, n3) && u2.push(n3);
            for (; e3.length > c2; )
              o2(a2, n3 = e3[c2++]) && (~r2(u2, n3) || u2.push(n3));
            return u2;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(9), i2 = n2(40), r2 = n2(64);
          t3.exports = function(t4) {
            return function(e3, n3, s2) {
              var a2, c2 = o2(e3), u2 = i2(c2.length), l2 = r2(s2, u2);
              if (t4 && n3 != n3) {
                for (; u2 > l2; )
                  if ((a2 = c2[l2++]) != a2)
                    return true;
              } else
                for (; u2 > l2; l2++)
                  if ((t4 || l2 in c2) && c2[l2] === n3)
                    return t4 || l2 || 0;
              return !t4 && -1;
            };
          };
        }, function(t3, e2) {
          e2.f = Object.getOwnPropertySymbols;
        }, function(t3, e2, n2) {
          var o2 = n2(45), i2 = n2(28).concat("length", "prototype");
          e2.f = Object.getOwnPropertyNames || function(t4) {
            return o2(t4, i2);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(29), i2 = n2(16), r2 = n2(9), s2 = n2(21), a2 = n2(8), c2 = n2(35), u2 = Object.getOwnPropertyDescriptor;
          e2.f = n2(6) ? u2 : function(t4, e3) {
            if (t4 = r2(t4), e3 = s2(e3, true), c2)
              try {
                return u2(t4, e3);
              } catch (t5) {
              }
            if (a2(t4, e3))
              return i2(!o2.f.call(t4, e3), t4[e3]);
          };
        }, function(t3, e2, n2) {
          for (var o2 = n2(31), i2 = n2(15), r2 = n2(13), s2 = n2(2), a2 = n2(4), c2 = n2(32), u2 = n2(1), l2 = u2("iterator"), h2 = u2("toStringTag"), f3 = c2.Array, p2 = { CSSRuleList: true, CSSStyleDeclaration: false, CSSValueList: false, ClientRectList: false, DOMRectList: false, DOMStringList: false, DOMTokenList: true, DataTransferItemList: false, FileList: false, HTMLAllCollection: false, HTMLCollection: false, HTMLFormElement: false, HTMLSelectElement: false, MediaList: true, MimeTypeArray: false, NamedNodeMap: false, NodeList: true, PaintRequestList: false, Plugin: false, PluginArray: false, SVGLengthList: false, SVGNumberList: false, SVGPathSegList: false, SVGPointList: false, SVGStringList: false, SVGTransformList: false, SourceBufferList: false, StyleSheetList: true, TextTrackCueList: false, TextTrackList: false, TouchList: false }, d2 = i2(p2), v2 = 0; v2 < d2.length; v2++) {
            var y2, g2 = d2[v2], m2 = p2[g2], b2 = s2[g2], w2 = b2 && b2.prototype;
            if (w2 && (w2[l2] || a2(w2, l2, f3), w2[h2] || a2(w2, h2, g2), c2[g2] = f3, m2))
              for (y2 in o2)
                w2[y2] || r2(w2, y2, o2[y2], true);
          }
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(73), i2 = {};
          i2[n2(1)("toStringTag")] = "z", i2 + "" != "[object z]" && n2(13)(Object.prototype, "toString", function() {
            return "[object " + o2(this) + "]";
          }, true);
        }, function(t3, e2, n2) {
          var o2 = n2(19), i2 = n2(15);
          n2(74)("keys", function() {
            return function(t4) {
              return i2(o2(t4));
            };
          });
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), i2 = n2(38)(2);
          o2(o2.P + o2.F * !n2(25)([].filter, true), "Array", { filter: function(t4) {
            return i2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.P, "Function", { bind: n2(75) });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Object", { create: n2(30) });
        }, function(t3, e2, n2) {
          var o2 = n2(0);
          o2(o2.S, "Object", { setPrototypeOf: n2(81).set });
        }, function(t3, e2, n2) {
          n2(58), t3.exports = n2(82);
        }, function(t3, e2) {
        }, function(t3, e2, n2) {
          t3.exports = n2(17)("native-function-to-string", Function.toString);
        }, function(t3, e2, n2) {
          var o2 = n2(61);
          t3.exports = function(t4, e3) {
            return new (o2(t4))(e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(3), i2 = n2(42), r2 = n2(1)("species");
          t3.exports = function(t4) {
            var e3;
            return i2(t4) && (typeof (e3 = t4.constructor) != "function" || e3 !== Array && !i2(e3.prototype) || (e3 = void 0), o2(e3) && (e3 = e3[r2]) === null && (e3 = void 0)), e3 === void 0 ? Array : e3;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(14)("meta"), i2 = n2(3), r2 = n2(8), s2 = n2(5).f, a2 = 0, c2 = Object.isExtensible || function() {
            return true;
          }, u2 = !n2(7)(function() {
            return c2(Object.preventExtensions({}));
          }), l2 = function(t4) {
            s2(t4, o2, { value: { i: "O" + ++a2, w: {} } });
          }, h2 = t3.exports = { KEY: o2, NEED: false, fastKey: function(t4, e3) {
            if (!i2(t4))
              return typeof t4 == "symbol" ? t4 : (typeof t4 == "string" ? "S" : "P") + t4;
            if (!r2(t4, o2)) {
              if (!c2(t4))
                return "F";
              if (!e3)
                return "E";
              l2(t4);
            }
            return t4[o2].i;
          }, getWeak: function(t4, e3) {
            if (!r2(t4, o2)) {
              if (!c2(t4))
                return true;
              if (!e3)
                return false;
              l2(t4);
            }
            return t4[o2].w;
          }, onFreeze: function(t4) {
            return u2 && h2.NEED && c2(t4) && !r2(t4, o2) && l2(t4), t4;
          } };
        }, function(t3, e2, n2) {
          var o2 = n2(15), i2 = n2(47), r2 = n2(29);
          t3.exports = function(t4) {
            var e3 = o2(t4), n3 = i2.f;
            if (n3)
              for (var s2, a2 = n3(t4), c2 = r2.f, u2 = 0; a2.length > u2; )
                c2.call(t4, s2 = a2[u2++]) && e3.push(s2);
            return e3;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(41), i2 = Math.max, r2 = Math.min;
          t3.exports = function(t4, e3) {
            return (t4 = o2(t4)) < 0 ? i2(t4 + e3, 0) : r2(t4, e3);
          };
        }, function(t3, e2, n2) {
          var o2 = n2(5), i2 = n2(12), r2 = n2(15);
          t3.exports = n2(6) ? Object.defineProperties : function(t4, e3) {
            i2(t4);
            for (var n3, s2 = r2(e3), a2 = s2.length, c2 = 0; a2 > c2; )
              o2.f(t4, n3 = s2[c2++], e3[n3]);
            return t4;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(2).document;
          t3.exports = o2 && o2.documentElement;
        }, function(t3, e2, n2) {
          var o2 = n2(9), i2 = n2(48).f, r2 = {}.toString, s2 = typeof window == "object" && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
          t3.exports.f = function(t4) {
            return s2 && r2.call(t4) == "[object Window]" ? function(t5) {
              try {
                return i2(t5);
              } catch (t6) {
                return s2.slice();
              }
            }(t4) : i2(o2(t4));
          };
        }, function(t3, e2, n2) {
          var o2 = n2(1)("unscopables"), i2 = Array.prototype;
          i2[o2] == null && n2(4)(i2, o2, {}), t3.exports = function(t4) {
            i2[o2][t4] = true;
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3) {
            return { value: e3, done: !!t4 };
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(18), i2 = n2(0), r2 = n2(13), s2 = n2(4), a2 = n2(32), c2 = n2(71), u2 = n2(26), l2 = n2(72), h2 = n2(1)("iterator"), f3 = !([].keys && "next" in [].keys()), p2 = function() {
            return this;
          };
          t3.exports = function(t4, e3, n3, d2, v2, y2, g2) {
            c2(n3, e3, d2);
            var m2, b2, w2, x2 = function(t5) {
              if (!f3 && t5 in P2)
                return P2[t5];
              switch (t5) {
                case "keys":
                case "values":
                  return function() {
                    return new n3(this, t5);
                  };
              }
              return function() {
                return new n3(this, t5);
              };
            }, S2 = e3 + " Iterator", O2 = v2 == "values", k2 = false, P2 = t4.prototype, E2 = P2[h2] || P2["@@iterator"] || v2 && P2[v2], N2 = E2 || x2(v2), j2 = v2 ? O2 ? x2("entries") : N2 : void 0, L2 = e3 == "Array" && P2.entries || E2;
            if (L2 && (w2 = l2(L2.call(new t4()))) !== Object.prototype && w2.next && (u2(w2, S2, true), o2 || typeof w2[h2] == "function" || s2(w2, h2, p2)), O2 && E2 && E2.name !== "values" && (k2 = true, N2 = function() {
              return E2.call(this);
            }), o2 && !g2 || !f3 && !k2 && P2[h2] || s2(P2, h2, N2), a2[e3] = N2, a2[S2] = p2, v2)
              if (m2 = { values: O2 ? N2 : x2("values"), keys: y2 ? N2 : x2("keys"), entries: j2 }, g2)
                for (b2 in m2)
                  b2 in P2 || r2(P2, b2, m2[b2]);
              else
                i2(i2.P + i2.F * (f3 || k2), e3, m2);
            return m2;
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(30), i2 = n2(16), r2 = n2(26), s2 = {};
          n2(4)(s2, n2(1)("iterator"), function() {
            return this;
          }), t3.exports = function(t4, e3, n3) {
            t4.prototype = o2(s2, { next: i2(1, n3) }), r2(t4, e3 + " Iterator");
          };
        }, function(t3, e2, n2) {
          var o2 = n2(8), i2 = n2(19), r2 = n2(27)("IE_PROTO"), s2 = Object.prototype;
          t3.exports = Object.getPrototypeOf || function(t4) {
            return t4 = i2(t4), o2(t4, r2) ? t4[r2] : typeof t4.constructor == "function" && t4 instanceof t4.constructor ? t4.constructor.prototype : t4 instanceof Object ? s2 : null;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(23), i2 = n2(1)("toStringTag"), r2 = o2(function() {
            return arguments;
          }()) == "Arguments";
          t3.exports = function(t4) {
            var e3, n3, s2;
            return t4 === void 0 ? "Undefined" : t4 === null ? "Null" : typeof (n3 = function(t5, e4) {
              try {
                return t5[e4];
              } catch (t6) {
              }
            }(e3 = Object(t4), i2)) == "string" ? n3 : r2 ? o2(e3) : (s2 = o2(e3)) == "Object" && typeof e3.callee == "function" ? "Arguments" : s2;
          };
        }, function(t3, e2, n2) {
          var o2 = n2(0), i2 = n2(11), r2 = n2(7);
          t3.exports = function(t4, e3) {
            var n3 = (i2.Object || {})[t4] || Object[t4], s2 = {};
            s2[t4] = e3(n3), o2(o2.S + o2.F * r2(function() {
              n3(1);
            }), "Object", s2);
          };
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(37), i2 = n2(3), r2 = n2(76), s2 = [].slice, a2 = {};
          t3.exports = Function.bind || function(t4) {
            var e3 = o2(this), n3 = s2.call(arguments, 1), c2 = function() {
              var o3 = n3.concat(s2.call(arguments));
              return this instanceof c2 ? function(t5, e4, n4) {
                if (!(e4 in a2)) {
                  for (var o4 = [], i3 = 0; i3 < e4; i3++)
                    o4[i3] = "a[" + i3 + "]";
                  a2[e4] = Function("F,a", "return new F(" + o4.join(",") + ")");
                }
                return a2[e4](t5, n4);
              }(e3, o3.length, o3) : r2(e3, o3, t4);
            };
            return i2(e3.prototype) && (c2.prototype = e3.prototype), c2;
          };
        }, function(t3, e2) {
          t3.exports = function(t4, e3, n2) {
            var o2 = n2 === void 0;
            switch (e3.length) {
              case 0:
                return o2 ? t4() : t4.call(n2);
              case 1:
                return o2 ? t4(e3[0]) : t4.call(n2, e3[0]);
              case 2:
                return o2 ? t4(e3[0], e3[1]) : t4.call(n2, e3[0], e3[1]);
              case 3:
                return o2 ? t4(e3[0], e3[1], e3[2]) : t4.call(n2, e3[0], e3[1], e3[2]);
              case 4:
                return o2 ? t4(e3[0], e3[1], e3[2], e3[3]) : t4.call(n2, e3[0], e3[1], e3[2], e3[3]);
            }
            return t4.apply(n2, e3);
          };
        }, function(t3, e2, n2) {
          "use strict";
          n2(78)("trim", function(t4) {
            return function() {
              return t4(this, 3);
            };
          });
        }, function(t3, e2, n2) {
          var o2 = n2(0), i2 = n2(24), r2 = n2(7), s2 = n2(79), a2 = "[" + s2 + "]", c2 = RegExp("^" + a2 + a2 + "*"), u2 = RegExp(a2 + a2 + "*$"), l2 = function(t4, e3, n3) {
            var i3 = {}, a3 = r2(function() {
              return !!s2[t4]() || "\u200B\x85"[t4]() != "\u200B\x85";
            }), c3 = i3[t4] = a3 ? e3(h2) : s2[t4];
            n3 && (i3[n3] = c3), o2(o2.P + o2.F * a3, "String", i3);
          }, h2 = l2.trim = function(t4, e3) {
            return t4 = String(i2(t4)), 1 & e3 && (t4 = t4.replace(c2, "")), 2 & e3 && (t4 = t4.replace(u2, "")), t4;
          };
          t3.exports = l2;
        }, function(t3, e2) {
          t3.exports = "	\n\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";
        }, function(t3, e2, n2) {
          "use strict";
          var o2 = n2(0), i2 = n2(46)(false), r2 = [].indexOf, s2 = !!r2 && 1 / [1].indexOf(1, -0) < 0;
          o2(o2.P + o2.F * (s2 || !n2(25)(r2)), "Array", { indexOf: function(t4) {
            return s2 ? r2.apply(this, arguments) || 0 : i2(this, t4, arguments[1]);
          } });
        }, function(t3, e2, n2) {
          var o2 = n2(3), i2 = n2(12), r2 = function(t4, e3) {
            if (i2(t4), !o2(e3) && e3 !== null)
              throw TypeError(e3 + ": can't set as prototype!");
          };
          t3.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? function(t4, e3, o3) {
            try {
              (o3 = n2(22)(Function.call, n2(49).f(Object.prototype, "__proto__").set, 2))(t4, []), e3 = !(t4 instanceof Array);
            } catch (t5) {
              e3 = true;
            }
            return function(t5, n3) {
              return r2(t5, n3), e3 ? t5.__proto__ = n3 : o3(t5, n3), t5;
            };
          }({}, false) : void 0), check: r2 };
        }, function(t3, e2, n2) {
          "use strict";
          n2.r(e2);
          n2(34), n2(20), n2(50), n2(31), n2(51), n2(52), n2(10), n2(53), n2(54);
          var o2 = 0.75, i2 = 10, r2 = true, s2 = true, a2 = true, c2 = false, u2 = "driver-highlighted-element-stage", l2 = '<div id="'.concat("driver-page-overlay", '"></div>'), h2 = '<div id="'.concat(u2, '"></div>');
          n2(33), n2(77);
          function f3(t4) {
            return (f3 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t5) {
              return typeof t5;
            } : function(t5) {
              return t5 && typeof Symbol == "function" && t5.constructor === Symbol && t5 !== Symbol.prototype ? "symbol" : typeof t5;
            })(t4);
          }
          var p2 = function(t4) {
            var e3 = document.createElement("div");
            return e3.innerHTML = t4.trim(), e3.firstChild;
          }, d2 = function t4(e3, n3) {
            if (arguments.length > 2 && arguments[2] !== void 0 && arguments[2]) {
              for (var o3 = ["", "-webkit-", "-ms-", "moz-", "-o-"], i3 = 0; i3 < o3.length; i3++) {
                var r3 = t4(e3, o3[i3] + n3);
                if (r3)
                  return r3;
              }
              return "";
            }
            var s3 = "";
            return e3.currentStyle ? s3 = e3.currentStyle[n3] : document.defaultView && document.defaultView.getComputedStyle && (s3 = document.defaultView.getComputedStyle(e3, null).getPropertyValue(n3)), s3 && s3.toLowerCase ? s3.toLowerCase() : s3;
          }, v2 = function(t4) {
            return t4 && f3(t4) === "object" && "nodeType" in t4;
          };
          function y2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var o3 = e3[n3];
              o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t4, o3.key, o3);
            }
          }
          var g2 = function() {
            function t4(e4, n4, o4) {
              !function(t5, e5) {
                if (!(t5 instanceof e5))
                  throw new TypeError("Cannot call a class as a function");
              }(this, t4), this.options = e4, this.highlightedElement = null, this.lastHighlightedElement = null, this.hideTimer = null, this.window = n4, this.document = o4, this.removeNode = this.removeNode.bind(this);
            }
            var e3, n3, o3;
            return e3 = t4, (n3 = [{ key: "attachNode", value: function() {
              var t5 = this.document.getElementById("driver-page-overlay");
              t5 || (t5 = p2(l2), document.body.appendChild(t5)), this.node = t5, this.node.style.opacity = "0", this.options.animate || this.node.parentElement && this.node.parentElement.removeChild(this.node);
            } }, { key: "highlight", value: function(t5) {
              t5 && t5.node ? t5.isSame(this.highlightedElement) || (this.window.clearTimeout(this.hideTimer), t5.onHighlightStarted(), this.highlightedElement && !this.highlightedElement.isSame(this.lastHighlightedElement) && this.highlightedElement.onDeselected(), t5.getCalculatedPosition().canHighlight() && (this.lastHighlightedElement = this.highlightedElement, this.highlightedElement = t5, this.show(), this.highlightedElement.onHighlighted())) : console.warn("Invalid element to highlight. Must be an instance of `Element`");
            } }, { key: "show", value: function() {
              var t5 = this;
              this.node && this.node.parentElement || (this.attachNode(), window.setTimeout(function() {
                t5.node.style.opacity = "".concat(t5.options.opacity), t5.node.style.position = "fixed", t5.node.style.left = "0", t5.node.style.top = "0", t5.node.style.bottom = "0", t5.node.style.right = "0";
              }));
            } }, { key: "getHighlightedElement", value: function() {
              return this.highlightedElement;
            } }, { key: "getLastHighlightedElement", value: function() {
              return this.lastHighlightedElement;
            } }, { key: "clear", value: function() {
              var t5 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
              if (this.options.onReset && this.options.onReset(this.highlightedElement), this.highlightedElement) {
                this.highlightedElement.onDeselected(true);
              }
              this.highlightedElement = null, this.lastHighlightedElement = null, this.node && (this.window.clearTimeout(this.hideTimer), this.options.animate && !t5 ? (this.node.style.opacity = "0", this.hideTimer = this.window.setTimeout(this.removeNode, 300)) : this.removeNode());
            } }, { key: "removeNode", value: function() {
              this.node && this.node.parentElement && this.node.parentElement.removeChild(this.node);
            } }, { key: "refresh", value: function() {
              this.highlightedElement && (this.highlightedElement.showPopover(), this.highlightedElement.showStage());
            } }]) && y2(e3.prototype, n3), o3 && y2(e3, o3), t4;
          }();
          n2(80);
          function m2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var o3 = e3[n3];
              o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t4, o3.key, o3);
            }
          }
          var b2 = function() {
            function t4() {
              var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, n4 = e4.left, o4 = n4 === void 0 ? 0 : n4, i3 = e4.top, r3 = i3 === void 0 ? 0 : i3, s3 = e4.right, a3 = s3 === void 0 ? 0 : s3, c3 = e4.bottom, u3 = c3 === void 0 ? 0 : c3;
              !function(t5, e5) {
                if (!(t5 instanceof e5))
                  throw new TypeError("Cannot call a class as a function");
              }(this, t4), this.left = o4, this.right = a3, this.top = r3, this.bottom = u3;
            }
            var e3, n3, o3;
            return e3 = t4, (n3 = [{ key: "canHighlight", value: function() {
              return this.left < this.right && this.top < this.bottom;
            } }]) && m2(e3.prototype, n3), o3 && m2(e3, o3), t4;
          }();
          function w2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var o3 = e3[n3];
              o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t4, o3.key, o3);
            }
          }
          var x2 = function() {
            function t4() {
              var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, n4 = e4.node, o4 = e4.options, i3 = e4.popover, r3 = e4.stage, s3 = e4.overlay, a3 = e4.window, c3 = e4.document;
              !function(t5, e5) {
                if (!(t5 instanceof e5))
                  throw new TypeError("Cannot call a class as a function");
              }(this, t4), this.node = n4, this.document = c3, this.window = a3, this.options = o4, this.overlay = s3, this.popover = i3, this.stage = r3, this.animationTimeout = null;
            }
            var e3, n3, o3;
            return e3 = t4, (n3 = [{ key: "isInView", value: function() {
              for (var t5 = this.node.offsetTop, e4 = this.node.offsetLeft, n4 = this.node.offsetWidth, o4 = this.node.offsetHeight, i3 = this.node; i3.offsetParent; )
                t5 += (i3 = i3.offsetParent).offsetTop, e4 += i3.offsetLeft;
              return t5 >= this.window.pageYOffset && e4 >= this.window.pageXOffset && t5 + o4 <= this.window.pageYOffset + this.window.innerHeight && e4 + n4 <= this.window.pageXOffset + this.window.innerWidth;
            } }, { key: "scrollManually", value: function() {
              var t5 = this.node.getBoundingClientRect().top + this.window.pageYOffset - this.window.innerHeight / 2;
              this.window.scrollTo(0, t5);
            } }, { key: "bringInView", value: function() {
              if (this.node && !this.isInView())
                if (this.node.scrollIntoView)
                  try {
                    this.node.scrollIntoView(this.options.scrollIntoViewOptions || { behavior: "instant", block: "center" });
                  } catch (t5) {
                    this.scrollManually();
                  }
                else
                  this.scrollManually();
            } }, { key: "getCalculatedPosition", value: function() {
              var t5 = this.document.body, e4 = this.document.documentElement, n4 = this.window, o4 = this.window.pageYOffset || e4.scrollTop || t5.scrollTop, i3 = n4.pageXOffset || e4.scrollLeft || t5.scrollLeft, r3 = this.node.getBoundingClientRect();
              return new b2({ top: r3.top + o4, left: r3.left + i3, right: r3.left + i3 + r3.width, bottom: r3.top + o4 + r3.height });
            } }, { key: "getPopover", value: function() {
              return this.popover;
            } }, { key: "onDeselected", value: function() {
              var t5 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
              this.hidePopover(), t5 && this.hideStage(), this.removeHighlightClasses(), this.window.clearTimeout(this.animationTimeout), this.options.onDeselected && this.options.onDeselected(this);
            } }, { key: "isSame", value: function(t5) {
              return !(!t5 || !t5.node) && t5.node === this.node;
            } }, { key: "onHighlightStarted", value: function() {
              this.options.onHighlightStarted && this.options.onHighlightStarted(this);
            } }, { key: "onHighlighted", value: function() {
              this.isInView() || this.bringInView(), this.showPopover(), this.showStage(), this.addHighlightClasses(), this.options.onHighlighted && this.options.onHighlighted(this);
            } }, { key: "removeHighlightClasses", value: function() {
              this.node.classList.remove("driver-highlighted-element"), this.node.classList.remove("driver-position-relative");
              for (var t5 = this.document.querySelectorAll(".".concat("driver-fix-stacking")), e4 = 0; e4 < t5.length; e4++)
                t5[e4].classList.remove("driver-fix-stacking");
            } }, { key: "addHighlightClasses", value: function() {
              this.node.classList.add("driver-highlighted-element"), this.canMakeRelative() && this.node.classList.add("driver-position-relative"), this.fixStackingContext();
            } }, { key: "fixStackingContext", value: function() {
              for (var t5 = this.node.parentNode; t5 && t5.tagName && t5.tagName.toLowerCase() !== "body"; ) {
                var e4 = d2(t5, "z-index"), n4 = parseFloat(d2(t5, "opacity")), o4 = d2(t5, "transform", true), i3 = d2(t5, "transform-style", true), r3 = d2(t5, "transform-box", true), s3 = d2(t5, "filter", true), a3 = d2(t5, "perspective", true);
                (/[0-9]+/.test(e4) || n4 < 1 || o4 && o4 !== "none" || i3 && i3 !== "flat" || r3 && r3 !== "border-box" || s3 && s3 !== "none" || a3 && a3 !== "none") && t5.classList.add("driver-fix-stacking"), t5 = t5.parentNode;
              }
            } }, { key: "canMakeRelative", value: function() {
              var t5 = this.getStyleProperty("position");
              return ["absolute", "fixed", "relative"].indexOf(t5) === -1;
            } }, { key: "getStyleProperty", value: function(t5) {
              return d2(this.node, t5);
            } }, { key: "showStage", value: function() {
              this.stage.show(this.getCalculatedPosition());
            } }, { key: "getNode", value: function() {
              return this.node;
            } }, { key: "hideStage", value: function() {
              this.stage.hide();
            } }, { key: "hidePopover", value: function() {
              this.popover && this.popover.hide();
            } }, { key: "showPopover", value: function() {
              var t5 = this;
              if (this.popover) {
                var e4 = this.getCalculatedPosition(), n4 = 300;
                this.options.animate && this.overlay.lastHighlightedElement || (n4 = 0), this.animationTimeout = this.window.setTimeout(function() {
                  t5.popover.show(e4);
                }, n4);
              }
            } }, { key: "getFullPageSize", value: function() {
              var t5 = this.document.body, e4 = this.document.documentElement;
              return { height: Math.max(t5.scrollHeight, t5.offsetHeight, e4.scrollHeight, e4.offsetHeight), width: Math.max(t5.scrollWidth, t5.offsetWidth, e4.scrollWidth, e4.offsetWidth) };
            } }, { key: "getSize", value: function() {
              return { height: Math.max(this.node.scrollHeight, this.node.offsetHeight), width: Math.max(this.node.scrollWidth, this.node.offsetWidth) };
            } }]) && w2(e3.prototype, n3), o3 && w2(e3, o3), t4;
          }();
          n2(55), n2(56);
          function S2(t4) {
            return (S2 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t5) {
              return typeof t5;
            } : function(t5) {
              return t5 && typeof Symbol == "function" && t5.constructor === Symbol && t5 !== Symbol.prototype ? "symbol" : typeof t5;
            })(t4);
          }
          function O2(t4, e3, n3) {
            return e3 in t4 ? Object.defineProperty(t4, e3, { value: n3, enumerable: true, configurable: true, writable: true }) : t4[e3] = n3, t4;
          }
          function k2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var o3 = e3[n3];
              o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t4, o3.key, o3);
            }
          }
          function P2(t4, e3) {
            return !e3 || S2(e3) !== "object" && typeof e3 != "function" ? function(t5) {
              if (t5 === void 0)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
              return t5;
            }(t4) : e3;
          }
          function E2(t4) {
            return (E2 = Object.setPrototypeOf ? Object.getPrototypeOf : function(t5) {
              return t5.__proto__ || Object.getPrototypeOf(t5);
            })(t4);
          }
          function N2(t4, e3) {
            return (N2 = Object.setPrototypeOf || function(t5, e4) {
              return t5.__proto__ = e4, t5;
            })(t4, e3);
          }
          var j2 = function(t4) {
            function e3(t5, n4, o4) {
              var i4;
              return function(t6, e4) {
                if (!(t6 instanceof e4))
                  throw new TypeError("Cannot call a class as a function");
              }(this, e3), (i4 = P2(this, E2(e3).call(this))).options = function(t6) {
                for (var e4 = 1; e4 < arguments.length; e4++) {
                  var n5 = arguments[e4] != null ? arguments[e4] : {}, o5 = Object.keys(n5);
                  typeof Object.getOwnPropertySymbols == "function" && (o5 = o5.concat(Object.getOwnPropertySymbols(n5).filter(function(t7) {
                    return Object.getOwnPropertyDescriptor(n5, t7).enumerable;
                  }))), o5.forEach(function(e5) {
                    O2(t6, e5, n5[e5]);
                  });
                }
                return t6;
              }({ isFirst: true, isLast: true, totalCount: 1, currentIndex: 0, offset: 0, showButtons: true, closeBtnText: "Close", doneBtnText: "Done", startBtnText: "Next &rarr;", nextBtnText: "Next &rarr;", prevBtnText: "&larr; Previous" }, t5), i4.window = n4, i4.document = o4, i4;
            }
            var n3, o3, i3;
            return function(t5, e4) {
              if (typeof e4 != "function" && e4 !== null)
                throw new TypeError("Super expression must either be null or a function");
              t5.prototype = Object.create(e4 && e4.prototype, { constructor: { value: t5, writable: true, configurable: true } }), e4 && N2(t5, e4);
            }(e3, x2), n3 = e3, (o3 = [{ key: "attachNode", value: function() {
              var t5 = this.document.getElementById("driver-popover-item");
              t5 && t5.parentElement.removeChild(t5), t5 = p2(function() {
                var t6 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
                return '\n  <div id="'.concat("driver-popover-item", '" class="').concat(t6, '">\n    <div class="').concat("driver-popover-tip", '"></div>\n    <div class="').concat("driver-popover-title", '">Popover Title</div>\n    <div class="').concat("driver-popover-description", '">Popover Description</div>\n    <div class="driver-clearfix ').concat("driver-popover-footer", '">\n      <button class="').concat("driver-close-btn", '">Close</button>\n      <span class="driver-btn-group ').concat("driver-navigation-btns", '">\n        <button class="').concat("driver-prev-btn", '">&larr; Previous</button>\n        <button class="').concat("driver-next-btn", '">Next &rarr;</button>\n      </span>\n    </div>\n  </div>');
              }(this.options.className)), document.body.appendChild(t5), this.node = t5, this.tipNode = t5.querySelector(".".concat("driver-popover-tip")), this.titleNode = t5.querySelector(".".concat("driver-popover-title")), this.descriptionNode = t5.querySelector(".".concat("driver-popover-description")), this.footerNode = t5.querySelector(".".concat("driver-popover-footer")), this.nextBtnNode = t5.querySelector(".".concat("driver-next-btn")), this.prevBtnNode = t5.querySelector(".".concat("driver-prev-btn")), this.closeBtnNode = t5.querySelector(".".concat("driver-close-btn"));
            } }, { key: "getTitleNode", value: function() {
              return this.titleNode;
            } }, { key: "getDescriptionNode", value: function() {
              return this.descriptionNode;
            } }, { key: "hide", value: function() {
              this.node && (this.node.style.display = "none");
            } }, { key: "setInitialState", value: function() {
              this.node.style.display = "block", this.node.style.left = "0", this.node.style.top = "0", this.node.style.bottom = "", this.node.style.right = "", this.node.querySelector(".".concat("driver-popover-tip")).className = "driver-popover-tip";
            } }, { key: "show", value: function(t5) {
              switch (this.attachNode(), this.setInitialState(), this.titleNode.innerHTML = this.options.title, this.descriptionNode.innerHTML = this.options.description || "", this.renderFooter(), this.options.position) {
                case "left":
                case "left-top":
                  this.positionOnLeft(t5);
                  break;
                case "left-center":
                  this.positionOnLeftCenter(t5);
                  break;
                case "left-bottom":
                  this.positionOnLeftBottom(t5);
                  break;
                case "right":
                case "right-top":
                  this.positionOnRight(t5);
                  break;
                case "right-center":
                  this.positionOnRightCenter(t5);
                  break;
                case "right-bottom":
                  this.positionOnRightBottom(t5);
                  break;
                case "top":
                case "top-left":
                  this.positionOnTop(t5);
                  break;
                case "top-center":
                  this.positionOnTopCenter(t5);
                  break;
                case "top-right":
                  this.positionOnTopRight(t5);
                  break;
                case "bottom":
                case "bottom-left":
                  this.positionOnBottom(t5);
                  break;
                case "bottom-center":
                  this.positionOnBottomCenter(t5);
                  break;
                case "bottom-right":
                  this.positionOnBottomRight(t5);
                  break;
                case "mid-center":
                  this.positionOnMidCenter(t5);
                  break;
                case "auto":
                default:
                  this.autoPosition(t5);
              }
              this.bringInView();
            } }, { key: "renderFooter", value: function() {
              this.nextBtnNode.innerHTML = this.options.nextBtnText, this.prevBtnNode.innerHTML = this.options.prevBtnText, this.closeBtnNode.innerHTML = this.options.closeBtnText;
              var t5 = this.options.totalCount && this.options.totalCount !== 1;
              this.options.showButtons ? (t5 ? (this.nextBtnNode.style.display = "inline-block", this.prevBtnNode.style.display = "inline-block", this.closeBtnNode.classList.remove("driver-close-only-btn")) : (this.nextBtnNode.style.display = "none", this.prevBtnNode.style.display = "none", this.closeBtnNode.classList.add("driver-close-only-btn")), this.footerNode.style.display = "block", this.options.isFirst ? (this.prevBtnNode.classList.add("driver-disabled"), this.nextBtnNode.innerHTML = this.options.startBtnText) : this.prevBtnNode.classList.remove("driver-disabled"), this.options.isLast ? this.nextBtnNode.innerHTML = this.options.doneBtnText : this.nextBtnNode.innerHTML = this.options.nextBtnText) : this.footerNode.style.display = "none";
            } }, { key: "positionOnLeft", value: function(t5) {
              var e4 = this.getSize().width, n4 = this.options.padding + 10;
              this.node.style.left = "".concat(t5.left - e4 - n4, "px"), this.node.style.top = "".concat(t5.top + this.options.offset - this.options.padding, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("right");
            } }, { key: "positionOnLeftBottom", value: function(t5) {
              var e4 = this.getSize(), n4 = e4.width, o4 = this.options.padding + 10;
              this.node.style.left = "".concat(t5.left - n4 - o4, "px"), this.node.style.top = "".concat(t5.bottom + this.options.padding + this.options.offset - e4.height, "px"), this.node.style.bottom = "", this.node.style.right = "", this.tipNode.classList.add("right", "position-bottom");
            } }, { key: "positionOnLeftCenter", value: function(t5) {
              var e4 = this.getSize(), n4 = e4.width, o4 = e4.height / 2, i4 = this.options.padding + 10, r3 = (t5.bottom - t5.top) / 2, s3 = t5.top - o4 + r3 + this.options.offset;
              this.node.style.left = "".concat(t5.left - n4 - i4, "px"), this.node.style.top = "".concat(s3, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("right", "position-center");
            } }, { key: "positionOnRight", value: function(t5) {
              var e4 = this.options.padding + 10;
              this.node.style.left = "".concat(t5.right + e4, "px"), this.node.style.top = "".concat(t5.top + this.options.offset - this.options.padding, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("left");
            } }, { key: "positionOnRightCenter", value: function(t5) {
              var e4 = this.getSize(), n4 = this.options.padding + 10, o4 = e4.height / 2, i4 = (t5.bottom - t5.top) / 2, r3 = t5.top - o4 + i4 + this.options.offset;
              this.node.style.left = "".concat(t5.right + n4, "px"), this.node.style.top = "".concat(r3, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("left", "position-center");
            } }, { key: "positionOnRightBottom", value: function(t5) {
              var e4 = this.options.padding + 10, n4 = this.getSize();
              this.node.style.left = "".concat(t5.right + e4, "px"), this.node.style.top = "".concat(t5.bottom + this.options.padding + this.options.offset - n4.height, "px"), this.node.style.bottom = "", this.node.style.right = "", this.tipNode.classList.add("left", "position-bottom");
            } }, { key: "positionOnTop", value: function(t5) {
              var e4 = this.getSize().height, n4 = this.options.padding + 10;
              this.node.style.top = "".concat(t5.top - e4 - n4, "px"), this.node.style.left = "".concat(t5.left - this.options.padding + this.options.offset, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("bottom");
            } }, { key: "positionOnTopCenter", value: function(t5) {
              var e4 = this.getSize(), n4 = e4.height, o4 = e4.width / 2, i4 = this.options.padding + 10, r3 = this.options.offset + t5.left + (t5.right - t5.left) / 2;
              this.node.style.top = "".concat(t5.top - n4 - i4, "px"), this.node.style.left = "".concat(r3 - o4 - this.options.padding, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("bottom", "position-center");
            } }, { key: "positionOnTopRight", value: function(t5) {
              var e4 = this.getSize(), n4 = e4.height, o4 = this.options.padding + 10;
              this.node.style.top = "".concat(t5.top - n4 - o4, "px"), this.node.style.left = "".concat(t5.right + this.options.padding + this.options.offset - e4.width, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("bottom", "position-right");
            } }, { key: "positionOnBottom", value: function(t5) {
              var e4 = this.options.padding + 10;
              this.node.style.top = "".concat(t5.bottom + e4, "px"), this.node.style.left = "".concat(t5.left - this.options.padding + this.options.offset, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("top");
            } }, { key: "positionOnBottomCenter", value: function(t5) {
              var e4 = this.getSize().width / 2, n4 = this.options.padding + 10, o4 = this.options.offset + t5.left + (t5.right - t5.left) / 2;
              this.node.style.top = "".concat(t5.bottom + n4, "px"), this.node.style.left = "".concat(o4 - e4 - this.options.padding, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("top", "position-center");
            } }, { key: "positionOnBottomRight", value: function(t5) {
              var e4 = this.getSize(), n4 = this.options.padding + 10;
              this.node.style.top = "".concat(t5.bottom + n4, "px"), this.node.style.left = "".concat(t5.right + this.options.padding + this.options.offset - e4.width, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("top", "position-right");
            } }, { key: "positionOnMidCenter", value: function(t5) {
              var e4 = this.getSize(), n4 = e4.height, o4 = e4.width / 2, i4 = n4 / 2, r3 = (t5.bottom - t5.top) / 2, s3 = t5.top - i4 + r3 + this.options.offset, a3 = this.options.offset + t5.left + (t5.right - t5.left) / 2;
              this.node.style.top = "".concat(s3, "px"), this.node.style.left = "".concat(a3 - o4 - this.options.padding, "px"), this.node.style.right = "", this.node.style.bottom = "", this.tipNode.classList.add("mid-center");
            } }, { key: "autoPosition", value: function(t5) {
              var e4 = this.getFullPageSize(), n4 = this.getSize(), o4 = e4.height, i4 = n4.height, r3 = this.options.padding + 10;
              t5.bottom + i4 + r3 >= o4 ? this.positionOnTop(t5) : this.positionOnBottom(t5);
            } }]) && k2(n3.prototype, o3), i3 && k2(n3, i3), e3;
          }();
          function L2(t4) {
            return (L2 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t5) {
              return typeof t5;
            } : function(t5) {
              return t5 && typeof Symbol == "function" && t5.constructor === Symbol && t5 !== Symbol.prototype ? "symbol" : typeof t5;
            })(t4);
          }
          function T2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var o3 = e3[n3];
              o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t4, o3.key, o3);
            }
          }
          function C2(t4, e3) {
            return !e3 || L2(e3) !== "object" && typeof e3 != "function" ? function(t5) {
              if (t5 === void 0)
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
              return t5;
            }(t4) : e3;
          }
          function _2(t4) {
            return (_2 = Object.setPrototypeOf ? Object.getPrototypeOf : function(t5) {
              return t5.__proto__ || Object.getPrototypeOf(t5);
            })(t4);
          }
          function M2(t4, e3) {
            return (M2 = Object.setPrototypeOf || function(t5, e4) {
              return t5.__proto__ = e4, t5;
            })(t4, e3);
          }
          var H2 = function(t4) {
            function e3(t5, n4, o4) {
              var i4;
              return function(t6, e4) {
                if (!(t6 instanceof e4))
                  throw new TypeError("Cannot call a class as a function");
              }(this, e3), (i4 = C2(this, _2(e3).call(this))).options = t5, i4.window = n4, i4.document = o4, i4;
            }
            var n3, o3, i3;
            return function(t5, e4) {
              if (typeof e4 != "function" && e4 !== null)
                throw new TypeError("Super expression must either be null or a function");
              t5.prototype = Object.create(e4 && e4.prototype, { constructor: { value: t5, writable: true, configurable: true } }), e4 && M2(t5, e4);
            }(e3, x2), n3 = e3, (o3 = [{ key: "attachNode", value: function() {
              var t5 = this.document.getElementById(u2);
              t5 || (t5 = p2(h2), document.body.appendChild(t5)), this.node = t5, this.options.animate ? this.node.classList.remove("driver-stage-no-animation") : this.node.classList.add("driver-stage-no-animation");
            } }, { key: "hide", value: function() {
              this.node && this.node.parentElement && this.node.parentElement.removeChild(this.node);
            } }, { key: "setInitialStyle", value: function() {
              this.node.style.display = "block", this.node.style.left = "0", this.node.style.top = "0", this.node.style.bottom = "", this.node.style.right = "";
            } }, { key: "show", value: function(t5) {
              this.attachNode(), this.setInitialStyle();
              var e4 = 2 * this.options.padding, n4 = t5.right - t5.left + e4, o4 = t5.bottom - t5.top + e4;
              this.node.style.display = "block", this.node.style.position = "absolute", this.node.style.width = "".concat(n4, "px"), this.node.style.height = "".concat(o4, "px"), this.node.style.top = "".concat(t5.top - e4 / 2, "px"), this.node.style.left = "".concat(t5.left - e4 / 2, "px"), this.node.style.backgroundColor = this.options.stageBackground;
            } }]) && T2(n3.prototype, o3), i3 && T2(n3, i3), e3;
          }();
          function B2(t4) {
            for (var e3 = 1; e3 < arguments.length; e3++) {
              var n3 = arguments[e3] != null ? arguments[e3] : {}, o3 = Object.keys(n3);
              typeof Object.getOwnPropertySymbols == "function" && (o3 = o3.concat(Object.getOwnPropertySymbols(n3).filter(function(t5) {
                return Object.getOwnPropertyDescriptor(n3, t5).enumerable;
              }))), o3.forEach(function(e4) {
                F2(t4, e4, n3[e4]);
              });
            }
            return t4;
          }
          function F2(t4, e3, n3) {
            return e3 in t4 ? Object.defineProperty(t4, e3, { value: n3, enumerable: true, configurable: true, writable: true }) : t4[e3] = n3, t4;
          }
          function I2(t4, e3) {
            for (var n3 = 0; n3 < e3.length; n3++) {
              var o3 = e3[n3];
              o3.enumerable = o3.enumerable || false, o3.configurable = true, "value" in o3 && (o3.writable = true), Object.defineProperty(t4, o3.key, o3);
            }
          }
          n2.d(e2, "default", function() {
            return R2;
          });
          var R2 = function() {
            function t4() {
              var e4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
              !function(t5, e5) {
                if (!(t5 instanceof e5))
                  throw new TypeError("Cannot call a class as a function");
              }(this, t4), this.options = B2({ animate: r2, opacity: o2, padding: i2, scrollIntoViewOptions: null, allowClose: s2, keyboardControl: a2, overlayClickNext: c2, stageBackground: "#ffffff", onHighlightStarted: function() {
                return null;
              }, onHighlighted: function() {
                return null;
              }, onDeselected: function() {
                return null;
              }, onReset: function() {
                return null;
              }, onNext: function() {
                return null;
              }, onPrevious: function() {
                return null;
              } }, e4), this.document = document, this.window = window, this.isActivated = false, this.steps = [], this.currentStep = 0, this.currentMovePrevented = false, this.overlay = new g2(this.options, window, document), this.onResize = this.onResize.bind(this), this.onKeyUp = this.onKeyUp.bind(this), this.onClick = this.onClick.bind(this), this.moveNext = this.moveNext.bind(this), this.movePrevious = this.movePrevious.bind(this), this.preventMove = this.preventMove.bind(this), this.bind();
            }
            var e3, n3, u3;
            return e3 = t4, (n3 = [{ key: "getSteps", value: function() {
              return this.steps;
            } }, { key: "setSteps", value: function(t5) {
              this.steps = t5;
            } }, { key: "bind", value: function() {
              this.window.addEventListener("resize", this.onResize, false), this.window.addEventListener("keyup", this.onKeyUp, false), "ontouchstart" in document.documentElement ? this.window.addEventListener("touchstart", this.onClick, false) : this.window.addEventListener("click", this.onClick, false);
            } }, { key: "onClick", value: function(t5) {
              if (this.isActivated && this.hasHighlightedElement()) {
                t5.stopPropagation();
                var e4 = this.overlay.getHighlightedElement(), n4 = this.document.getElementById("driver-popover-item"), o3 = e4.node.contains(t5.target), i3 = n4 && n4.contains(t5.target);
                if (o3 || i3 || !this.options.overlayClickNext)
                  if (o3 || i3 || !this.options.allowClose) {
                    var r3 = t5.target.classList.contains("driver-next-btn"), s3 = t5.target.classList.contains("driver-prev-btn");
                    t5.target.classList.contains("driver-close-btn") ? this.reset() : r3 ? this.handleNext() : s3 && this.handlePrevious();
                  } else
                    this.reset();
                else
                  this.handleNext();
              }
            } }, { key: "onResize", value: function() {
              this.isActivated && this.refresh();
            } }, { key: "refresh", value: function() {
              this.overlay.refresh();
            } }, { key: "onKeyUp", value: function(t5) {
              if (this.isActivated && this.options.keyboardControl)
                if (t5.keyCode !== 27) {
                  var e4 = this.getHighlightedElement();
                  e4 && e4.popover && (t5.keyCode === 39 ? this.handleNext() : t5.keyCode === 37 && this.handlePrevious());
                } else
                  this.reset();
            } }, { key: "movePrevious", value: function() {
              var t5 = this.steps[this.currentStep - 1];
              t5 ? (this.overlay.highlight(t5), this.currentStep -= 1) : this.reset();
            } }, { key: "preventMove", value: function() {
              this.currentMovePrevented = true;
            } }, { key: "handleNext", value: function() {
              this.currentMovePrevented = false;
              var t5 = this.steps[this.currentStep];
              t5 && t5.options && t5.options.onNext && t5.options.onNext(this.overlay.highlightedElement), this.currentMovePrevented || this.moveNext();
            } }, { key: "handlePrevious", value: function() {
              this.currentMovePrevented = false;
              var t5 = this.steps[this.currentStep];
              t5 && t5.options && t5.options.onPrevious && t5.options.onPrevious(this.overlay.highlightedElement), this.currentMovePrevented || this.movePrevious();
            } }, { key: "moveNext", value: function() {
              var t5 = this.steps[this.currentStep + 1];
              t5 ? (this.overlay.highlight(t5), this.currentStep += 1) : this.reset();
            } }, { key: "hasNextStep", value: function() {
              return !!this.steps[this.currentStep + 1];
            } }, { key: "hasPreviousStep", value: function() {
              return !!this.steps[this.currentStep - 1];
            } }, { key: "reset", value: function() {
              var t5 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
              this.currentStep = 0, this.isActivated = false, this.overlay.clear(t5);
            } }, { key: "hasHighlightedElement", value: function() {
              var t5 = this.overlay.getHighlightedElement();
              return t5 && t5.node;
            } }, { key: "getHighlightedElement", value: function() {
              return this.overlay.getHighlightedElement();
            } }, { key: "getLastHighlightedElement", value: function() {
              return this.overlay.getLastHighlightedElement();
            } }, { key: "defineSteps", value: function(t5) {
              this.steps = [];
              for (var e4 = 0; e4 < t5.length; e4++) {
                var n4 = this.prepareElementFromStep(t5[e4], t5, e4);
                n4 && this.steps.push(n4);
              }
            } }, { key: "prepareElementFromStep", value: function(t5) {
              var e4 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [], n4 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, o3 = B2({}, this.options), i3 = t5, r3 = typeof t5 != "string" && !v2(t5);
              if (!t5 || r3 && !t5.element)
                throw new Error("Element is required in step ".concat(n4));
              r3 && (i3 = t5.element, o3 = B2({}, this.options, t5));
              var s3 = v2(i3) ? i3 : this.document.querySelector(i3);
              if (!s3)
                return console.warn("Element to highlight ".concat(i3, " not found")), null;
              var a3 = null;
              if (o3.popover && o3.popover.title) {
                var c3 = [this.options.className, o3.popover.className].filter(function(t6) {
                  return t6;
                }).join(" "), u4 = B2({}, o3, o3.popover, { className: c3, totalCount: e4.length, currentIndex: n4, isFirst: n4 === 0, isLast: e4.length === 0 || n4 === e4.length - 1 });
                a3 = new j2(u4, this.window, this.document);
              }
              var l3 = B2({}, o3), h3 = new H2(l3, this.window, this.document);
              return new x2({ node: s3, options: o3, popover: a3, stage: h3, overlay: this.overlay, window: this.window, document: this.document });
            } }, { key: "start", value: function() {
              var t5 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
              if (!this.steps || this.steps.length === 0)
                throw new Error("There are no steps defined to iterate");
              this.isActivated = true, this.currentStep = t5, this.overlay.highlight(this.steps[t5]);
            } }, { key: "highlight", value: function(t5) {
              this.isActivated = true;
              var e4 = this.prepareElementFromStep(t5);
              e4 && this.overlay.highlight(e4);
            } }]) && I2(e3.prototype, n3), u3 && I2(e3, u3), t4;
          }();
        }]).default;
      });
    }
  });

  // node_modules/plyr/dist/plyr.polyfilled.js
  var require_plyr_polyfilled = __commonJS({
    "node_modules/plyr/dist/plyr.polyfilled.js"(exports2, module2) {
      typeof navigator === "object" && function(global2, factory) {
        typeof exports2 === "object" && typeof module2 !== "undefined" ? module2.exports = factory() : typeof define === "function" && define.amd ? define("Plyr", factory) : (global2 = global2 || self, global2.Plyr = factory());
      }(exports2, function() {
        "use strict";
        (function() {
          if (typeof window === "undefined") {
            return;
          }
          try {
            var ce = new window.CustomEvent("test", {
              cancelable: true
            });
            ce.preventDefault();
            if (ce.defaultPrevented !== true) {
              throw new Error("Could not prevent default");
            }
          } catch (e2) {
            var CustomEvent2 = function CustomEvent3(event2, params) {
              var evt, origPrevent;
              params = params || {};
              params.bubbles = !!params.bubbles;
              params.cancelable = !!params.cancelable;
              evt = document.createEvent("CustomEvent");
              evt.initCustomEvent(event2, params.bubbles, params.cancelable, params.detail);
              origPrevent = evt.preventDefault;
              evt.preventDefault = function() {
                origPrevent.call(this);
                try {
                  Object.defineProperty(this, "defaultPrevented", {
                    get: function get2() {
                      return true;
                    }
                  });
                } catch (e3) {
                  this.defaultPrevented = true;
                }
              };
              return evt;
            };
            CustomEvent2.prototype = window.Event.prototype;
            window.CustomEvent = CustomEvent2;
          }
        })();
        var commonjsGlobal = typeof globalThis !== "undefined" ? globalThis : typeof window !== "undefined" ? window : typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : {};
        function createCommonjsModule(fn, module3) {
          return module3 = { exports: {} }, fn(module3, module3.exports), module3.exports;
        }
        var check = function(it2) {
          return it2 && it2.Math == Math && it2;
        };
        var global_1 = check(typeof globalThis == "object" && globalThis) || check(typeof window == "object" && window) || check(typeof self == "object" && self) || check(typeof commonjsGlobal == "object" && commonjsGlobal) || Function("return this")();
        var fails = function(exec) {
          try {
            return !!exec();
          } catch (error) {
            return true;
          }
        };
        var descriptors = !fails(function() {
          return Object.defineProperty({}, 1, { get: function() {
            return 7;
          } })[1] != 7;
        });
        var nativePropertyIsEnumerable = {}.propertyIsEnumerable;
        var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
        var NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);
        var f3 = NASHORN_BUG ? function propertyIsEnumerable2(V2) {
          var descriptor = getOwnPropertyDescriptor(this, V2);
          return !!descriptor && descriptor.enumerable;
        } : nativePropertyIsEnumerable;
        var objectPropertyIsEnumerable = {
          f: f3
        };
        var createPropertyDescriptor = function(bitmap, value) {
          return {
            enumerable: !(bitmap & 1),
            configurable: !(bitmap & 2),
            writable: !(bitmap & 4),
            value
          };
        };
        var toString = {}.toString;
        var classofRaw = function(it2) {
          return toString.call(it2).slice(8, -1);
        };
        var split = "".split;
        var indexedObject = fails(function() {
          return !Object("z").propertyIsEnumerable(0);
        }) ? function(it2) {
          return classofRaw(it2) == "String" ? split.call(it2, "") : Object(it2);
        } : Object;
        var requireObjectCoercible = function(it2) {
          if (it2 == void 0)
            throw TypeError("Can't call method on " + it2);
          return it2;
        };
        var toIndexedObject = function(it2) {
          return indexedObject(requireObjectCoercible(it2));
        };
        var isObject = function(it2) {
          return typeof it2 === "object" ? it2 !== null : typeof it2 === "function";
        };
        var toPrimitive = function(input, PREFERRED_STRING) {
          if (!isObject(input))
            return input;
          var fn, val2;
          if (PREFERRED_STRING && typeof (fn = input.toString) == "function" && !isObject(val2 = fn.call(input)))
            return val2;
          if (typeof (fn = input.valueOf) == "function" && !isObject(val2 = fn.call(input)))
            return val2;
          if (!PREFERRED_STRING && typeof (fn = input.toString) == "function" && !isObject(val2 = fn.call(input)))
            return val2;
          throw TypeError("Can't convert object to primitive value");
        };
        var hasOwnProperty = {}.hasOwnProperty;
        var has = function(it2, key3) {
          return hasOwnProperty.call(it2, key3);
        };
        var document$1 = global_1.document;
        var EXISTS = isObject(document$1) && isObject(document$1.createElement);
        var documentCreateElement = function(it2) {
          return EXISTS ? document$1.createElement(it2) : {};
        };
        var ie8DomDefine = !descriptors && !fails(function() {
          return Object.defineProperty(documentCreateElement("div"), "a", {
            get: function() {
              return 7;
            }
          }).a != 7;
        });
        var nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
        var f$1 = descriptors ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor2(O2, P2) {
          O2 = toIndexedObject(O2);
          P2 = toPrimitive(P2, true);
          if (ie8DomDefine)
            try {
              return nativeGetOwnPropertyDescriptor(O2, P2);
            } catch (error) {
            }
          if (has(O2, P2))
            return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(O2, P2), O2[P2]);
        };
        var objectGetOwnPropertyDescriptor = {
          f: f$1
        };
        var anObject = function(it2) {
          if (!isObject(it2)) {
            throw TypeError(String(it2) + " is not an object");
          }
          return it2;
        };
        var nativeDefineProperty = Object.defineProperty;
        var f$2 = descriptors ? nativeDefineProperty : function defineProperty2(O2, P2, Attributes) {
          anObject(O2);
          P2 = toPrimitive(P2, true);
          anObject(Attributes);
          if (ie8DomDefine)
            try {
              return nativeDefineProperty(O2, P2, Attributes);
            } catch (error) {
            }
          if ("get" in Attributes || "set" in Attributes)
            throw TypeError("Accessors not supported");
          if ("value" in Attributes)
            O2[P2] = Attributes.value;
          return O2;
        };
        var objectDefineProperty = {
          f: f$2
        };
        var createNonEnumerableProperty = descriptors ? function(object, key3, value) {
          return objectDefineProperty.f(object, key3, createPropertyDescriptor(1, value));
        } : function(object, key3, value) {
          object[key3] = value;
          return object;
        };
        var setGlobal = function(key3, value) {
          try {
            createNonEnumerableProperty(global_1, key3, value);
          } catch (error) {
            global_1[key3] = value;
          }
          return value;
        };
        var SHARED = "__core-js_shared__";
        var store = global_1[SHARED] || setGlobal(SHARED, {});
        var sharedStore = store;
        var functionToString = Function.toString;
        if (typeof sharedStore.inspectSource != "function") {
          sharedStore.inspectSource = function(it2) {
            return functionToString.call(it2);
          };
        }
        var inspectSource = sharedStore.inspectSource;
        var WeakMap$1 = global_1.WeakMap;
        var nativeWeakMap = typeof WeakMap$1 === "function" && /native code/.test(inspectSource(WeakMap$1));
        var isPure = false;
        var shared = createCommonjsModule(function(module3) {
          (module3.exports = function(key3, value) {
            return sharedStore[key3] || (sharedStore[key3] = value !== void 0 ? value : {});
          })("versions", []).push({
            version: "3.6.5",
            mode: "global",
            copyright: "\xA9 2020 Denis Pushkarev (zloirock.ru)"
          });
        });
        var id = 0;
        var postfix = Math.random();
        var uid = function(key3) {
          return "Symbol(" + String(key3 === void 0 ? "" : key3) + ")_" + (++id + postfix).toString(36);
        };
        var keys = shared("keys");
        var sharedKey = function(key3) {
          return keys[key3] || (keys[key3] = uid(key3));
        };
        var hiddenKeys = {};
        var WeakMap$2 = global_1.WeakMap;
        var set, get, has$1;
        var enforce = function(it2) {
          return has$1(it2) ? get(it2) : set(it2, {});
        };
        var getterFor = function(TYPE) {
          return function(it2) {
            var state;
            if (!isObject(it2) || (state = get(it2)).type !== TYPE) {
              throw TypeError("Incompatible receiver, " + TYPE + " required");
            }
            return state;
          };
        };
        if (nativeWeakMap) {
          var store$1 = new WeakMap$2();
          var wmget = store$1.get;
          var wmhas = store$1.has;
          var wmset = store$1.set;
          set = function(it2, metadata) {
            wmset.call(store$1, it2, metadata);
            return metadata;
          };
          get = function(it2) {
            return wmget.call(store$1, it2) || {};
          };
          has$1 = function(it2) {
            return wmhas.call(store$1, it2);
          };
        } else {
          var STATE = sharedKey("state");
          hiddenKeys[STATE] = true;
          set = function(it2, metadata) {
            createNonEnumerableProperty(it2, STATE, metadata);
            return metadata;
          };
          get = function(it2) {
            return has(it2, STATE) ? it2[STATE] : {};
          };
          has$1 = function(it2) {
            return has(it2, STATE);
          };
        }
        var internalState = {
          set,
          get,
          has: has$1,
          enforce,
          getterFor
        };
        var redefine = createCommonjsModule(function(module3) {
          var getInternalState2 = internalState.get;
          var enforceInternalState = internalState.enforce;
          var TEMPLATE = String(String).split("String");
          (module3.exports = function(O2, key3, value, options) {
            var unsafe = options ? !!options.unsafe : false;
            var simple = options ? !!options.enumerable : false;
            var noTargetGet = options ? !!options.noTargetGet : false;
            if (typeof value == "function") {
              if (typeof key3 == "string" && !has(value, "name"))
                createNonEnumerableProperty(value, "name", key3);
              enforceInternalState(value).source = TEMPLATE.join(typeof key3 == "string" ? key3 : "");
            }
            if (O2 === global_1) {
              if (simple)
                O2[key3] = value;
              else
                setGlobal(key3, value);
              return;
            } else if (!unsafe) {
              delete O2[key3];
            } else if (!noTargetGet && O2[key3]) {
              simple = true;
            }
            if (simple)
              O2[key3] = value;
            else
              createNonEnumerableProperty(O2, key3, value);
          })(Function.prototype, "toString", function toString2() {
            return typeof this == "function" && getInternalState2(this).source || inspectSource(this);
          });
        });
        var path = global_1;
        var aFunction = function(variable) {
          return typeof variable == "function" ? variable : void 0;
        };
        var getBuiltIn = function(namespace, method) {
          return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global_1[namespace]) : path[namespace] && path[namespace][method] || global_1[namespace] && global_1[namespace][method];
        };
        var ceil = Math.ceil;
        var floor = Math.floor;
        var toInteger = function(argument) {
          return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);
        };
        var min = Math.min;
        var toLength = function(argument) {
          return argument > 0 ? min(toInteger(argument), 9007199254740991) : 0;
        };
        var max = Math.max;
        var min$1 = Math.min;
        var toAbsoluteIndex = function(index2, length) {
          var integer = toInteger(index2);
          return integer < 0 ? max(integer + length, 0) : min$1(integer, length);
        };
        var createMethod = function(IS_INCLUDES) {
          return function($this, el, fromIndex) {
            var O2 = toIndexedObject($this);
            var length = toLength(O2.length);
            var index2 = toAbsoluteIndex(fromIndex, length);
            var value;
            if (IS_INCLUDES && el != el)
              while (length > index2) {
                value = O2[index2++];
                if (value != value)
                  return true;
              }
            else
              for (; length > index2; index2++) {
                if ((IS_INCLUDES || index2 in O2) && O2[index2] === el)
                  return IS_INCLUDES || index2 || 0;
              }
            return !IS_INCLUDES && -1;
          };
        };
        var arrayIncludes = {
          includes: createMethod(true),
          indexOf: createMethod(false)
        };
        var indexOf = arrayIncludes.indexOf;
        var objectKeysInternal = function(object, names) {
          var O2 = toIndexedObject(object);
          var i2 = 0;
          var result = [];
          var key3;
          for (key3 in O2)
            !has(hiddenKeys, key3) && has(O2, key3) && result.push(key3);
          while (names.length > i2)
            if (has(O2, key3 = names[i2++])) {
              ~indexOf(result, key3) || result.push(key3);
            }
          return result;
        };
        var enumBugKeys = [
          "constructor",
          "hasOwnProperty",
          "isPrototypeOf",
          "propertyIsEnumerable",
          "toLocaleString",
          "toString",
          "valueOf"
        ];
        var hiddenKeys$1 = enumBugKeys.concat("length", "prototype");
        var f$3 = Object.getOwnPropertyNames || function getOwnPropertyNames2(O2) {
          return objectKeysInternal(O2, hiddenKeys$1);
        };
        var objectGetOwnPropertyNames = {
          f: f$3
        };
        var f$4 = Object.getOwnPropertySymbols;
        var objectGetOwnPropertySymbols = {
          f: f$4
        };
        var ownKeys = getBuiltIn("Reflect", "ownKeys") || function ownKeys2(it2) {
          var keys2 = objectGetOwnPropertyNames.f(anObject(it2));
          var getOwnPropertySymbols = objectGetOwnPropertySymbols.f;
          return getOwnPropertySymbols ? keys2.concat(getOwnPropertySymbols(it2)) : keys2;
        };
        var copyConstructorProperties = function(target, source2) {
          var keys2 = ownKeys(source2);
          var defineProperty2 = objectDefineProperty.f;
          var getOwnPropertyDescriptor2 = objectGetOwnPropertyDescriptor.f;
          for (var i2 = 0; i2 < keys2.length; i2++) {
            var key3 = keys2[i2];
            if (!has(target, key3))
              defineProperty2(target, key3, getOwnPropertyDescriptor2(source2, key3));
          }
        };
        var replacement = /#|\.prototype\./;
        var isForced = function(feature, detection) {
          var value = data[normalize(feature)];
          return value == POLYFILL ? true : value == NATIVE ? false : typeof detection == "function" ? fails(detection) : !!detection;
        };
        var normalize = isForced.normalize = function(string) {
          return String(string).replace(replacement, ".").toLowerCase();
        };
        var data = isForced.data = {};
        var NATIVE = isForced.NATIVE = "N";
        var POLYFILL = isForced.POLYFILL = "P";
        var isForced_1 = isForced;
        var getOwnPropertyDescriptor$1 = objectGetOwnPropertyDescriptor.f;
        var _export = function(options, source2) {
          var TARGET = options.target;
          var GLOBAL = options.global;
          var STATIC = options.stat;
          var FORCED2, target, key3, targetProperty, sourceProperty, descriptor;
          if (GLOBAL) {
            target = global_1;
          } else if (STATIC) {
            target = global_1[TARGET] || setGlobal(TARGET, {});
          } else {
            target = (global_1[TARGET] || {}).prototype;
          }
          if (target)
            for (key3 in source2) {
              sourceProperty = source2[key3];
              if (options.noTargetGet) {
                descriptor = getOwnPropertyDescriptor$1(target, key3);
                targetProperty = descriptor && descriptor.value;
              } else
                targetProperty = target[key3];
              FORCED2 = isForced_1(GLOBAL ? key3 : TARGET + (STATIC ? "." : "#") + key3, options.forced);
              if (!FORCED2 && targetProperty !== void 0) {
                if (typeof sourceProperty === typeof targetProperty)
                  continue;
                copyConstructorProperties(sourceProperty, targetProperty);
              }
              if (options.sham || targetProperty && targetProperty.sham) {
                createNonEnumerableProperty(sourceProperty, "sham", true);
              }
              redefine(target, key3, sourceProperty, options);
            }
        };
        var nativeSymbol = !!Object.getOwnPropertySymbols && !fails(function() {
          return !String(Symbol());
        });
        var useSymbolAsUid = nativeSymbol && !Symbol.sham && typeof Symbol.iterator == "symbol";
        var isArray = Array.isArray || function isArray2(arg) {
          return classofRaw(arg) == "Array";
        };
        var toObject = function(argument) {
          return Object(requireObjectCoercible(argument));
        };
        var objectKeys = Object.keys || function keys2(O2) {
          return objectKeysInternal(O2, enumBugKeys);
        };
        var objectDefineProperties = descriptors ? Object.defineProperties : function defineProperties(O2, Properties) {
          anObject(O2);
          var keys2 = objectKeys(Properties);
          var length = keys2.length;
          var index2 = 0;
          var key3;
          while (length > index2)
            objectDefineProperty.f(O2, key3 = keys2[index2++], Properties[key3]);
          return O2;
        };
        var html = getBuiltIn("document", "documentElement");
        var GT = ">";
        var LT = "<";
        var PROTOTYPE = "prototype";
        var SCRIPT = "script";
        var IE_PROTO = sharedKey("IE_PROTO");
        var EmptyConstructor = function() {
        };
        var scriptTag = function(content) {
          return LT + SCRIPT + GT + content + LT + "/" + SCRIPT + GT;
        };
        var NullProtoObjectViaActiveX = function(activeXDocument2) {
          activeXDocument2.write(scriptTag(""));
          activeXDocument2.close();
          var temp = activeXDocument2.parentWindow.Object;
          activeXDocument2 = null;
          return temp;
        };
        var NullProtoObjectViaIFrame = function() {
          var iframe = documentCreateElement("iframe");
          var JS = "java" + SCRIPT + ":";
          var iframeDocument;
          iframe.style.display = "none";
          html.appendChild(iframe);
          iframe.src = String(JS);
          iframeDocument = iframe.contentWindow.document;
          iframeDocument.open();
          iframeDocument.write(scriptTag("document.F=Object"));
          iframeDocument.close();
          return iframeDocument.F;
        };
        var activeXDocument;
        var NullProtoObject = function() {
          try {
            activeXDocument = document.domain && new ActiveXObject("htmlfile");
          } catch (error) {
          }
          NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();
          var length = enumBugKeys.length;
          while (length--)
            delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
          return NullProtoObject();
        };
        hiddenKeys[IE_PROTO] = true;
        var objectCreate = Object.create || function create(O2, Properties) {
          var result;
          if (O2 !== null) {
            EmptyConstructor[PROTOTYPE] = anObject(O2);
            result = new EmptyConstructor();
            EmptyConstructor[PROTOTYPE] = null;
            result[IE_PROTO] = O2;
          } else
            result = NullProtoObject();
          return Properties === void 0 ? result : objectDefineProperties(result, Properties);
        };
        var nativeGetOwnPropertyNames = objectGetOwnPropertyNames.f;
        var toString$1 = {}.toString;
        var windowNames = typeof window == "object" && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
        var getWindowNames = function(it2) {
          try {
            return nativeGetOwnPropertyNames(it2);
          } catch (error) {
            return windowNames.slice();
          }
        };
        var f$5 = function getOwnPropertyNames2(it2) {
          return windowNames && toString$1.call(it2) == "[object Window]" ? getWindowNames(it2) : nativeGetOwnPropertyNames(toIndexedObject(it2));
        };
        var objectGetOwnPropertyNamesExternal = {
          f: f$5
        };
        var WellKnownSymbolsStore = shared("wks");
        var Symbol$1 = global_1.Symbol;
        var createWellKnownSymbol = useSymbolAsUid ? Symbol$1 : Symbol$1 && Symbol$1.withoutSetter || uid;
        var wellKnownSymbol = function(name2) {
          if (!has(WellKnownSymbolsStore, name2)) {
            if (nativeSymbol && has(Symbol$1, name2))
              WellKnownSymbolsStore[name2] = Symbol$1[name2];
            else
              WellKnownSymbolsStore[name2] = createWellKnownSymbol("Symbol." + name2);
          }
          return WellKnownSymbolsStore[name2];
        };
        var f$6 = wellKnownSymbol;
        var wellKnownSymbolWrapped = {
          f: f$6
        };
        var defineProperty = objectDefineProperty.f;
        var defineWellKnownSymbol = function(NAME) {
          var Symbol2 = path.Symbol || (path.Symbol = {});
          if (!has(Symbol2, NAME))
            defineProperty(Symbol2, NAME, {
              value: wellKnownSymbolWrapped.f(NAME)
            });
        };
        var defineProperty$1 = objectDefineProperty.f;
        var TO_STRING_TAG = wellKnownSymbol("toStringTag");
        var setToStringTag = function(it2, TAG, STATIC) {
          if (it2 && !has(it2 = STATIC ? it2 : it2.prototype, TO_STRING_TAG)) {
            defineProperty$1(it2, TO_STRING_TAG, { configurable: true, value: TAG });
          }
        };
        var aFunction$1 = function(it2) {
          if (typeof it2 != "function") {
            throw TypeError(String(it2) + " is not a function");
          }
          return it2;
        };
        var functionBindContext = function(fn, that, length) {
          aFunction$1(fn);
          if (that === void 0)
            return fn;
          switch (length) {
            case 0:
              return function() {
                return fn.call(that);
              };
            case 1:
              return function(a2) {
                return fn.call(that, a2);
              };
            case 2:
              return function(a2, b2) {
                return fn.call(that, a2, b2);
              };
            case 3:
              return function(a2, b2, c2) {
                return fn.call(that, a2, b2, c2);
              };
          }
          return function() {
            return fn.apply(that, arguments);
          };
        };
        var SPECIES = wellKnownSymbol("species");
        var arraySpeciesCreate = function(originalArray, length) {
          var C2;
          if (isArray(originalArray)) {
            C2 = originalArray.constructor;
            if (typeof C2 == "function" && (C2 === Array || isArray(C2.prototype)))
              C2 = void 0;
            else if (isObject(C2)) {
              C2 = C2[SPECIES];
              if (C2 === null)
                C2 = void 0;
            }
          }
          return new (C2 === void 0 ? Array : C2)(length === 0 ? 0 : length);
        };
        var push = [].push;
        var createMethod$1 = function(TYPE) {
          var IS_MAP = TYPE == 1;
          var IS_FILTER = TYPE == 2;
          var IS_SOME = TYPE == 3;
          var IS_EVERY = TYPE == 4;
          var IS_FIND_INDEX = TYPE == 6;
          var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;
          return function($this, callbackfn, that, specificCreate) {
            var O2 = toObject($this);
            var self2 = indexedObject(O2);
            var boundFunction = functionBindContext(callbackfn, that, 3);
            var length = toLength(self2.length);
            var index2 = 0;
            var create = specificCreate || arraySpeciesCreate;
            var target = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : void 0;
            var value, result;
            for (; length > index2; index2++)
              if (NO_HOLES || index2 in self2) {
                value = self2[index2];
                result = boundFunction(value, index2, O2);
                if (TYPE) {
                  if (IS_MAP)
                    target[index2] = result;
                  else if (result)
                    switch (TYPE) {
                      case 3:
                        return true;
                      case 5:
                        return value;
                      case 6:
                        return index2;
                      case 2:
                        push.call(target, value);
                    }
                  else if (IS_EVERY)
                    return false;
                }
              }
            return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
          };
        };
        var arrayIteration = {
          forEach: createMethod$1(0),
          map: createMethod$1(1),
          filter: createMethod$1(2),
          some: createMethod$1(3),
          every: createMethod$1(4),
          find: createMethod$1(5),
          findIndex: createMethod$1(6)
        };
        var $forEach = arrayIteration.forEach;
        var HIDDEN = sharedKey("hidden");
        var SYMBOL = "Symbol";
        var PROTOTYPE$1 = "prototype";
        var TO_PRIMITIVE = wellKnownSymbol("toPrimitive");
        var setInternalState = internalState.set;
        var getInternalState = internalState.getterFor(SYMBOL);
        var ObjectPrototype = Object[PROTOTYPE$1];
        var $Symbol = global_1.Symbol;
        var $stringify = getBuiltIn("JSON", "stringify");
        var nativeGetOwnPropertyDescriptor$1 = objectGetOwnPropertyDescriptor.f;
        var nativeDefineProperty$1 = objectDefineProperty.f;
        var nativeGetOwnPropertyNames$1 = objectGetOwnPropertyNamesExternal.f;
        var nativePropertyIsEnumerable$1 = objectPropertyIsEnumerable.f;
        var AllSymbols = shared("symbols");
        var ObjectPrototypeSymbols = shared("op-symbols");
        var StringToSymbolRegistry = shared("string-to-symbol-registry");
        var SymbolToStringRegistry = shared("symbol-to-string-registry");
        var WellKnownSymbolsStore$1 = shared("wks");
        var QObject = global_1.QObject;
        var USE_SETTER = !QObject || !QObject[PROTOTYPE$1] || !QObject[PROTOTYPE$1].findChild;
        var setSymbolDescriptor = descriptors && fails(function() {
          return objectCreate(nativeDefineProperty$1({}, "a", {
            get: function() {
              return nativeDefineProperty$1(this, "a", { value: 7 }).a;
            }
          })).a != 7;
        }) ? function(O2, P2, Attributes) {
          var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor$1(ObjectPrototype, P2);
          if (ObjectPrototypeDescriptor)
            delete ObjectPrototype[P2];
          nativeDefineProperty$1(O2, P2, Attributes);
          if (ObjectPrototypeDescriptor && O2 !== ObjectPrototype) {
            nativeDefineProperty$1(ObjectPrototype, P2, ObjectPrototypeDescriptor);
          }
        } : nativeDefineProperty$1;
        var wrap = function(tag, description) {
          var symbol = AllSymbols[tag] = objectCreate($Symbol[PROTOTYPE$1]);
          setInternalState(symbol, {
            type: SYMBOL,
            tag,
            description
          });
          if (!descriptors)
            symbol.description = description;
          return symbol;
        };
        var isSymbol = useSymbolAsUid ? function(it2) {
          return typeof it2 == "symbol";
        } : function(it2) {
          return Object(it2) instanceof $Symbol;
        };
        var $defineProperty = function defineProperty2(O2, P2, Attributes) {
          if (O2 === ObjectPrototype)
            $defineProperty(ObjectPrototypeSymbols, P2, Attributes);
          anObject(O2);
          var key3 = toPrimitive(P2, true);
          anObject(Attributes);
          if (has(AllSymbols, key3)) {
            if (!Attributes.enumerable) {
              if (!has(O2, HIDDEN))
                nativeDefineProperty$1(O2, HIDDEN, createPropertyDescriptor(1, {}));
              O2[HIDDEN][key3] = true;
            } else {
              if (has(O2, HIDDEN) && O2[HIDDEN][key3])
                O2[HIDDEN][key3] = false;
              Attributes = objectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });
            }
            return setSymbolDescriptor(O2, key3, Attributes);
          }
          return nativeDefineProperty$1(O2, key3, Attributes);
        };
        var $defineProperties = function defineProperties(O2, Properties) {
          anObject(O2);
          var properties = toIndexedObject(Properties);
          var keys2 = objectKeys(properties).concat($getOwnPropertySymbols(properties));
          $forEach(keys2, function(key3) {
            if (!descriptors || $propertyIsEnumerable.call(properties, key3))
              $defineProperty(O2, key3, properties[key3]);
          });
          return O2;
        };
        var $create = function create(O2, Properties) {
          return Properties === void 0 ? objectCreate(O2) : $defineProperties(objectCreate(O2), Properties);
        };
        var $propertyIsEnumerable = function propertyIsEnumerable2(V2) {
          var P2 = toPrimitive(V2, true);
          var enumerable = nativePropertyIsEnumerable$1.call(this, P2);
          if (this === ObjectPrototype && has(AllSymbols, P2) && !has(ObjectPrototypeSymbols, P2))
            return false;
          return enumerable || !has(this, P2) || !has(AllSymbols, P2) || has(this, HIDDEN) && this[HIDDEN][P2] ? enumerable : true;
        };
        var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor2(O2, P2) {
          var it2 = toIndexedObject(O2);
          var key3 = toPrimitive(P2, true);
          if (it2 === ObjectPrototype && has(AllSymbols, key3) && !has(ObjectPrototypeSymbols, key3))
            return;
          var descriptor = nativeGetOwnPropertyDescriptor$1(it2, key3);
          if (descriptor && has(AllSymbols, key3) && !(has(it2, HIDDEN) && it2[HIDDEN][key3])) {
            descriptor.enumerable = true;
          }
          return descriptor;
        };
        var $getOwnPropertyNames = function getOwnPropertyNames2(O2) {
          var names = nativeGetOwnPropertyNames$1(toIndexedObject(O2));
          var result = [];
          $forEach(names, function(key3) {
            if (!has(AllSymbols, key3) && !has(hiddenKeys, key3))
              result.push(key3);
          });
          return result;
        };
        var $getOwnPropertySymbols = function getOwnPropertySymbols(O2) {
          var IS_OBJECT_PROTOTYPE = O2 === ObjectPrototype;
          var names = nativeGetOwnPropertyNames$1(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O2));
          var result = [];
          $forEach(names, function(key3) {
            if (has(AllSymbols, key3) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key3))) {
              result.push(AllSymbols[key3]);
            }
          });
          return result;
        };
        if (!nativeSymbol) {
          $Symbol = function Symbol2() {
            if (this instanceof $Symbol)
              throw TypeError("Symbol is not a constructor");
            var description = !arguments.length || arguments[0] === void 0 ? void 0 : String(arguments[0]);
            var tag = uid(description);
            var setter = function(value) {
              if (this === ObjectPrototype)
                setter.call(ObjectPrototypeSymbols, value);
              if (has(this, HIDDEN) && has(this[HIDDEN], tag))
                this[HIDDEN][tag] = false;
              setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));
            };
            if (descriptors && USE_SETTER)
              setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });
            return wrap(tag, description);
          };
          redefine($Symbol[PROTOTYPE$1], "toString", function toString2() {
            return getInternalState(this).tag;
          });
          redefine($Symbol, "withoutSetter", function(description) {
            return wrap(uid(description), description);
          });
          objectPropertyIsEnumerable.f = $propertyIsEnumerable;
          objectDefineProperty.f = $defineProperty;
          objectGetOwnPropertyDescriptor.f = $getOwnPropertyDescriptor;
          objectGetOwnPropertyNames.f = objectGetOwnPropertyNamesExternal.f = $getOwnPropertyNames;
          objectGetOwnPropertySymbols.f = $getOwnPropertySymbols;
          wellKnownSymbolWrapped.f = function(name2) {
            return wrap(wellKnownSymbol(name2), name2);
          };
          if (descriptors) {
            nativeDefineProperty$1($Symbol[PROTOTYPE$1], "description", {
              configurable: true,
              get: function description() {
                return getInternalState(this).description;
              }
            });
            {
              redefine(ObjectPrototype, "propertyIsEnumerable", $propertyIsEnumerable, { unsafe: true });
            }
          }
        }
        _export({ global: true, wrap: true, forced: !nativeSymbol, sham: !nativeSymbol }, {
          Symbol: $Symbol
        });
        $forEach(objectKeys(WellKnownSymbolsStore$1), function(name2) {
          defineWellKnownSymbol(name2);
        });
        _export({ target: SYMBOL, stat: true, forced: !nativeSymbol }, {
          "for": function(key3) {
            var string = String(key3);
            if (has(StringToSymbolRegistry, string))
              return StringToSymbolRegistry[string];
            var symbol = $Symbol(string);
            StringToSymbolRegistry[string] = symbol;
            SymbolToStringRegistry[symbol] = string;
            return symbol;
          },
          keyFor: function keyFor(sym) {
            if (!isSymbol(sym))
              throw TypeError(sym + " is not a symbol");
            if (has(SymbolToStringRegistry, sym))
              return SymbolToStringRegistry[sym];
          },
          useSetter: function() {
            USE_SETTER = true;
          },
          useSimple: function() {
            USE_SETTER = false;
          }
        });
        _export({ target: "Object", stat: true, forced: !nativeSymbol, sham: !descriptors }, {
          create: $create,
          defineProperty: $defineProperty,
          defineProperties: $defineProperties,
          getOwnPropertyDescriptor: $getOwnPropertyDescriptor
        });
        _export({ target: "Object", stat: true, forced: !nativeSymbol }, {
          getOwnPropertyNames: $getOwnPropertyNames,
          getOwnPropertySymbols: $getOwnPropertySymbols
        });
        _export({ target: "Object", stat: true, forced: fails(function() {
          objectGetOwnPropertySymbols.f(1);
        }) }, {
          getOwnPropertySymbols: function getOwnPropertySymbols(it2) {
            return objectGetOwnPropertySymbols.f(toObject(it2));
          }
        });
        if ($stringify) {
          var FORCED_JSON_STRINGIFY = !nativeSymbol || fails(function() {
            var symbol = $Symbol();
            return $stringify([symbol]) != "[null]" || $stringify({ a: symbol }) != "{}" || $stringify(Object(symbol)) != "{}";
          });
          _export({ target: "JSON", stat: true, forced: FORCED_JSON_STRINGIFY }, {
            stringify: function stringify(it2, replacer2, space) {
              var args = [it2];
              var index2 = 1;
              var $replacer;
              while (arguments.length > index2)
                args.push(arguments[index2++]);
              $replacer = replacer2;
              if (!isObject(replacer2) && it2 === void 0 || isSymbol(it2))
                return;
              if (!isArray(replacer2))
                replacer2 = function(key3, value) {
                  if (typeof $replacer == "function")
                    value = $replacer.call(this, key3, value);
                  if (!isSymbol(value))
                    return value;
                };
              args[1] = replacer2;
              return $stringify.apply(null, args);
            }
          });
        }
        if (!$Symbol[PROTOTYPE$1][TO_PRIMITIVE]) {
          createNonEnumerableProperty($Symbol[PROTOTYPE$1], TO_PRIMITIVE, $Symbol[PROTOTYPE$1].valueOf);
        }
        setToStringTag($Symbol, SYMBOL);
        hiddenKeys[HIDDEN] = true;
        var defineProperty$2 = objectDefineProperty.f;
        var NativeSymbol = global_1.Symbol;
        if (descriptors && typeof NativeSymbol == "function" && (!("description" in NativeSymbol.prototype) || NativeSymbol().description !== void 0)) {
          var EmptyStringDescriptionStore = {};
          var SymbolWrapper = function Symbol2() {
            var description = arguments.length < 1 || arguments[0] === void 0 ? void 0 : String(arguments[0]);
            var result = this instanceof SymbolWrapper ? new NativeSymbol(description) : description === void 0 ? NativeSymbol() : NativeSymbol(description);
            if (description === "")
              EmptyStringDescriptionStore[result] = true;
            return result;
          };
          copyConstructorProperties(SymbolWrapper, NativeSymbol);
          var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;
          symbolPrototype.constructor = SymbolWrapper;
          var symbolToString = symbolPrototype.toString;
          var native = String(NativeSymbol("test")) == "Symbol(test)";
          var regexp = /^Symbol\((.*)\)[^)]+$/;
          defineProperty$2(symbolPrototype, "description", {
            configurable: true,
            get: function description() {
              var symbol = isObject(this) ? this.valueOf() : this;
              var string = symbolToString.call(symbol);
              if (has(EmptyStringDescriptionStore, symbol))
                return "";
              var desc = native ? string.slice(7, -1) : string.replace(regexp, "$1");
              return desc === "" ? void 0 : desc;
            }
          });
          _export({ global: true, forced: true }, {
            Symbol: SymbolWrapper
          });
        }
        defineWellKnownSymbol("iterator");
        var arrayMethodIsStrict = function(METHOD_NAME2, argument) {
          var method = [][METHOD_NAME2];
          return !!method && fails(function() {
            method.call(null, argument || function() {
              throw 1;
            }, 1);
          });
        };
        var defineProperty$3 = Object.defineProperty;
        var cache = {};
        var thrower = function(it2) {
          throw it2;
        };
        var arrayMethodUsesToLength = function(METHOD_NAME2, options) {
          if (has(cache, METHOD_NAME2))
            return cache[METHOD_NAME2];
          if (!options)
            options = {};
          var method = [][METHOD_NAME2];
          var ACCESSORS = has(options, "ACCESSORS") ? options.ACCESSORS : false;
          var argument0 = has(options, 0) ? options[0] : thrower;
          var argument1 = has(options, 1) ? options[1] : void 0;
          return cache[METHOD_NAME2] = !!method && !fails(function() {
            if (ACCESSORS && !descriptors)
              return true;
            var O2 = { length: -1 };
            if (ACCESSORS)
              defineProperty$3(O2, 1, { enumerable: true, get: thrower });
            else
              O2[1] = 1;
            method.call(O2, argument0, argument1);
          });
        };
        var $forEach$1 = arrayIteration.forEach;
        var STRICT_METHOD = arrayMethodIsStrict("forEach");
        var USES_TO_LENGTH = arrayMethodUsesToLength("forEach");
        var arrayForEach = !STRICT_METHOD || !USES_TO_LENGTH ? function forEach(callbackfn) {
          return $forEach$1(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
        } : [].forEach;
        _export({ target: "Array", proto: true, forced: [].forEach != arrayForEach }, {
          forEach: arrayForEach
        });
        var $indexOf = arrayIncludes.indexOf;
        var nativeIndexOf = [].indexOf;
        var NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;
        var STRICT_METHOD$1 = arrayMethodIsStrict("indexOf");
        var USES_TO_LENGTH$1 = arrayMethodUsesToLength("indexOf", { ACCESSORS: true, 1: 0 });
        _export({ target: "Array", proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD$1 || !USES_TO_LENGTH$1 }, {
          indexOf: function indexOf2(searchElement) {
            return NEGATIVE_ZERO ? nativeIndexOf.apply(this, arguments) || 0 : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        var UNSCOPABLES = wellKnownSymbol("unscopables");
        var ArrayPrototype = Array.prototype;
        if (ArrayPrototype[UNSCOPABLES] == void 0) {
          objectDefineProperty.f(ArrayPrototype, UNSCOPABLES, {
            configurable: true,
            value: objectCreate(null)
          });
        }
        var addToUnscopables = function(key3) {
          ArrayPrototype[UNSCOPABLES][key3] = true;
        };
        var iterators = {};
        var correctPrototypeGetter = !fails(function() {
          function F2() {
          }
          F2.prototype.constructor = null;
          return Object.getPrototypeOf(new F2()) !== F2.prototype;
        });
        var IE_PROTO$1 = sharedKey("IE_PROTO");
        var ObjectPrototype$1 = Object.prototype;
        var objectGetPrototypeOf = correctPrototypeGetter ? Object.getPrototypeOf : function(O2) {
          O2 = toObject(O2);
          if (has(O2, IE_PROTO$1))
            return O2[IE_PROTO$1];
          if (typeof O2.constructor == "function" && O2 instanceof O2.constructor) {
            return O2.constructor.prototype;
          }
          return O2 instanceof Object ? ObjectPrototype$1 : null;
        };
        var ITERATOR = wellKnownSymbol("iterator");
        var BUGGY_SAFARI_ITERATORS = false;
        var returnThis = function() {
          return this;
        };
        var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;
        if ([].keys) {
          arrayIterator = [].keys();
          if (!("next" in arrayIterator))
            BUGGY_SAFARI_ITERATORS = true;
          else {
            PrototypeOfArrayIteratorPrototype = objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator));
            if (PrototypeOfArrayIteratorPrototype !== Object.prototype)
              IteratorPrototype = PrototypeOfArrayIteratorPrototype;
          }
        }
        if (IteratorPrototype == void 0)
          IteratorPrototype = {};
        if (!has(IteratorPrototype, ITERATOR)) {
          createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);
        }
        var iteratorsCore = {
          IteratorPrototype,
          BUGGY_SAFARI_ITERATORS
        };
        var IteratorPrototype$1 = iteratorsCore.IteratorPrototype;
        var returnThis$1 = function() {
          return this;
        };
        var createIteratorConstructor = function(IteratorConstructor, NAME, next) {
          var TO_STRING_TAG2 = NAME + " Iterator";
          IteratorConstructor.prototype = objectCreate(IteratorPrototype$1, { next: createPropertyDescriptor(1, next) });
          setToStringTag(IteratorConstructor, TO_STRING_TAG2, false);
          iterators[TO_STRING_TAG2] = returnThis$1;
          return IteratorConstructor;
        };
        var aPossiblePrototype = function(it2) {
          if (!isObject(it2) && it2 !== null) {
            throw TypeError("Can't set " + String(it2) + " as a prototype");
          }
          return it2;
        };
        var objectSetPrototypeOf = Object.setPrototypeOf || ("__proto__" in {} ? function() {
          var CORRECT_SETTER = false;
          var test2 = {};
          var setter;
          try {
            setter = Object.getOwnPropertyDescriptor(Object.prototype, "__proto__").set;
            setter.call(test2, []);
            CORRECT_SETTER = test2 instanceof Array;
          } catch (error) {
          }
          return function setPrototypeOf(O2, proto) {
            anObject(O2);
            aPossiblePrototype(proto);
            if (CORRECT_SETTER)
              setter.call(O2, proto);
            else
              O2.__proto__ = proto;
            return O2;
          };
        }() : void 0);
        var IteratorPrototype$2 = iteratorsCore.IteratorPrototype;
        var BUGGY_SAFARI_ITERATORS$1 = iteratorsCore.BUGGY_SAFARI_ITERATORS;
        var ITERATOR$1 = wellKnownSymbol("iterator");
        var KEYS = "keys";
        var VALUES = "values";
        var ENTRIES = "entries";
        var returnThis$2 = function() {
          return this;
        };
        var defineIterator = function(Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED2) {
          createIteratorConstructor(IteratorConstructor, NAME, next);
          var getIterationMethod = function(KIND) {
            if (KIND === DEFAULT && defaultIterator)
              return defaultIterator;
            if (!BUGGY_SAFARI_ITERATORS$1 && KIND in IterablePrototype)
              return IterablePrototype[KIND];
            switch (KIND) {
              case KEYS:
                return function keys2() {
                  return new IteratorConstructor(this, KIND);
                };
              case VALUES:
                return function values() {
                  return new IteratorConstructor(this, KIND);
                };
              case ENTRIES:
                return function entries() {
                  return new IteratorConstructor(this, KIND);
                };
            }
            return function() {
              return new IteratorConstructor(this);
            };
          };
          var TO_STRING_TAG2 = NAME + " Iterator";
          var INCORRECT_VALUES_NAME = false;
          var IterablePrototype = Iterable.prototype;
          var nativeIterator = IterablePrototype[ITERATOR$1] || IterablePrototype["@@iterator"] || DEFAULT && IterablePrototype[DEFAULT];
          var defaultIterator = !BUGGY_SAFARI_ITERATORS$1 && nativeIterator || getIterationMethod(DEFAULT);
          var anyNativeIterator = NAME == "Array" ? IterablePrototype.entries || nativeIterator : nativeIterator;
          var CurrentIteratorPrototype, methods, KEY;
          if (anyNativeIterator) {
            CurrentIteratorPrototype = objectGetPrototypeOf(anyNativeIterator.call(new Iterable()));
            if (IteratorPrototype$2 !== Object.prototype && CurrentIteratorPrototype.next) {
              if (objectGetPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype$2) {
                if (objectSetPrototypeOf) {
                  objectSetPrototypeOf(CurrentIteratorPrototype, IteratorPrototype$2);
                } else if (typeof CurrentIteratorPrototype[ITERATOR$1] != "function") {
                  createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR$1, returnThis$2);
                }
              }
              setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG2, true);
            }
          }
          if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {
            INCORRECT_VALUES_NAME = true;
            defaultIterator = function values() {
              return nativeIterator.call(this);
            };
          }
          if (IterablePrototype[ITERATOR$1] !== defaultIterator) {
            createNonEnumerableProperty(IterablePrototype, ITERATOR$1, defaultIterator);
          }
          iterators[NAME] = defaultIterator;
          if (DEFAULT) {
            methods = {
              values: getIterationMethod(VALUES),
              keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
              entries: getIterationMethod(ENTRIES)
            };
            if (FORCED2)
              for (KEY in methods) {
                if (BUGGY_SAFARI_ITERATORS$1 || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
                  redefine(IterablePrototype, KEY, methods[KEY]);
                }
              }
            else
              _export({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS$1 || INCORRECT_VALUES_NAME }, methods);
          }
          return methods;
        };
        var ARRAY_ITERATOR = "Array Iterator";
        var setInternalState$1 = internalState.set;
        var getInternalState$1 = internalState.getterFor(ARRAY_ITERATOR);
        var es_array_iterator = defineIterator(Array, "Array", function(iterated, kind) {
          setInternalState$1(this, {
            type: ARRAY_ITERATOR,
            target: toIndexedObject(iterated),
            index: 0,
            kind
          });
        }, function() {
          var state = getInternalState$1(this);
          var target = state.target;
          var kind = state.kind;
          var index2 = state.index++;
          if (!target || index2 >= target.length) {
            state.target = void 0;
            return { value: void 0, done: true };
          }
          if (kind == "keys")
            return { value: index2, done: false };
          if (kind == "values")
            return { value: target[index2], done: false };
          return { value: [index2, target[index2]], done: false };
        }, "values");
        iterators.Arguments = iterators.Array;
        addToUnscopables("keys");
        addToUnscopables("values");
        addToUnscopables("entries");
        var nativeJoin = [].join;
        var ES3_STRINGS = indexedObject != Object;
        var STRICT_METHOD$2 = arrayMethodIsStrict("join", ",");
        _export({ target: "Array", proto: true, forced: ES3_STRINGS || !STRICT_METHOD$2 }, {
          join: function join(separator) {
            return nativeJoin.call(toIndexedObject(this), separator === void 0 ? "," : separator);
          }
        });
        var createProperty = function(object, key3, value) {
          var propertyKey = toPrimitive(key3);
          if (propertyKey in object)
            objectDefineProperty.f(object, propertyKey, createPropertyDescriptor(0, value));
          else
            object[propertyKey] = value;
        };
        var engineUserAgent = getBuiltIn("navigator", "userAgent") || "";
        var process = global_1.process;
        var versions = process && process.versions;
        var v8 = versions && versions.v8;
        var match, version;
        if (v8) {
          match = v8.split(".");
          version = match[0] + match[1];
        } else if (engineUserAgent) {
          match = engineUserAgent.match(/Edge\/(\d+)/);
          if (!match || match[1] >= 74) {
            match = engineUserAgent.match(/Chrome\/(\d+)/);
            if (match)
              version = match[1];
          }
        }
        var engineV8Version = version && +version;
        var SPECIES$1 = wellKnownSymbol("species");
        var arrayMethodHasSpeciesSupport = function(METHOD_NAME2) {
          return engineV8Version >= 51 || !fails(function() {
            var array = [];
            var constructor = array.constructor = {};
            constructor[SPECIES$1] = function() {
              return { foo: 1 };
            };
            return array[METHOD_NAME2](Boolean).foo !== 1;
          });
        };
        var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport("slice");
        var USES_TO_LENGTH$2 = arrayMethodUsesToLength("slice", { ACCESSORS: true, 0: 0, 1: 2 });
        var SPECIES$2 = wellKnownSymbol("species");
        var nativeSlice = [].slice;
        var max$1 = Math.max;
        _export({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH$2 }, {
          slice: function slice(start, end) {
            var O2 = toIndexedObject(this);
            var length = toLength(O2.length);
            var k2 = toAbsoluteIndex(start, length);
            var fin = toAbsoluteIndex(end === void 0 ? length : end, length);
            var Constructor, result, n2;
            if (isArray(O2)) {
              Constructor = O2.constructor;
              if (typeof Constructor == "function" && (Constructor === Array || isArray(Constructor.prototype))) {
                Constructor = void 0;
              } else if (isObject(Constructor)) {
                Constructor = Constructor[SPECIES$2];
                if (Constructor === null)
                  Constructor = void 0;
              }
              if (Constructor === Array || Constructor === void 0) {
                return nativeSlice.call(O2, k2, fin);
              }
            }
            result = new (Constructor === void 0 ? Array : Constructor)(max$1(fin - k2, 0));
            for (n2 = 0; k2 < fin; k2++, n2++)
              if (k2 in O2)
                createProperty(result, n2, O2[k2]);
            result.length = n2;
            return result;
          }
        });
        var TO_STRING_TAG$1 = wellKnownSymbol("toStringTag");
        var test = {};
        test[TO_STRING_TAG$1] = "z";
        var toStringTagSupport = String(test) === "[object z]";
        var TO_STRING_TAG$2 = wellKnownSymbol("toStringTag");
        var CORRECT_ARGUMENTS = classofRaw(function() {
          return arguments;
        }()) == "Arguments";
        var tryGet = function(it2, key3) {
          try {
            return it2[key3];
          } catch (error) {
          }
        };
        var classof = toStringTagSupport ? classofRaw : function(it2) {
          var O2, tag, result;
          return it2 === void 0 ? "Undefined" : it2 === null ? "Null" : typeof (tag = tryGet(O2 = Object(it2), TO_STRING_TAG$2)) == "string" ? tag : CORRECT_ARGUMENTS ? classofRaw(O2) : (result = classofRaw(O2)) == "Object" && typeof O2.callee == "function" ? "Arguments" : result;
        };
        var objectToString = toStringTagSupport ? {}.toString : function toString2() {
          return "[object " + classof(this) + "]";
        };
        if (!toStringTagSupport) {
          redefine(Object.prototype, "toString", objectToString, { unsafe: true });
        }
        var regexpFlags = function() {
          var that = anObject(this);
          var result = "";
          if (that.global)
            result += "g";
          if (that.ignoreCase)
            result += "i";
          if (that.multiline)
            result += "m";
          if (that.dotAll)
            result += "s";
          if (that.unicode)
            result += "u";
          if (that.sticky)
            result += "y";
          return result;
        };
        function RE(s2, f4) {
          return RegExp(s2, f4);
        }
        var UNSUPPORTED_Y = fails(function() {
          var re = RE("a", "y");
          re.lastIndex = 2;
          return re.exec("abcd") != null;
        });
        var BROKEN_CARET = fails(function() {
          var re = RE("^r", "gy");
          re.lastIndex = 2;
          return re.exec("str") != null;
        });
        var regexpStickyHelpers = {
          UNSUPPORTED_Y,
          BROKEN_CARET
        };
        var nativeExec = RegExp.prototype.exec;
        var nativeReplace = String.prototype.replace;
        var patchedExec = nativeExec;
        var UPDATES_LAST_INDEX_WRONG = function() {
          var re12 = /a/;
          var re22 = /b*/g;
          nativeExec.call(re12, "a");
          nativeExec.call(re22, "a");
          return re12.lastIndex !== 0 || re22.lastIndex !== 0;
        }();
        var UNSUPPORTED_Y$1 = regexpStickyHelpers.UNSUPPORTED_Y || regexpStickyHelpers.BROKEN_CARET;
        var NPCG_INCLUDED = /()??/.exec("")[1] !== void 0;
        var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y$1;
        if (PATCH) {
          patchedExec = function exec(str) {
            var re = this;
            var lastIndex, reCopy, match2, i2;
            var sticky = UNSUPPORTED_Y$1 && re.sticky;
            var flags = regexpFlags.call(re);
            var source2 = re.source;
            var charsAdded = 0;
            var strCopy = str;
            if (sticky) {
              flags = flags.replace("y", "");
              if (flags.indexOf("g") === -1) {
                flags += "g";
              }
              strCopy = String(str).slice(re.lastIndex);
              if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== "\n")) {
                source2 = "(?: " + source2 + ")";
                strCopy = " " + strCopy;
                charsAdded++;
              }
              reCopy = new RegExp("^(?:" + source2 + ")", flags);
            }
            if (NPCG_INCLUDED) {
              reCopy = new RegExp("^" + source2 + "$(?!\\s)", flags);
            }
            if (UPDATES_LAST_INDEX_WRONG)
              lastIndex = re.lastIndex;
            match2 = nativeExec.call(sticky ? reCopy : re, strCopy);
            if (sticky) {
              if (match2) {
                match2.input = match2.input.slice(charsAdded);
                match2[0] = match2[0].slice(charsAdded);
                match2.index = re.lastIndex;
                re.lastIndex += match2[0].length;
              } else
                re.lastIndex = 0;
            } else if (UPDATES_LAST_INDEX_WRONG && match2) {
              re.lastIndex = re.global ? match2.index + match2[0].length : lastIndex;
            }
            if (NPCG_INCLUDED && match2 && match2.length > 1) {
              nativeReplace.call(match2[0], reCopy, function() {
                for (i2 = 1; i2 < arguments.length - 2; i2++) {
                  if (arguments[i2] === void 0)
                    match2[i2] = void 0;
                }
              });
            }
            return match2;
          };
        }
        var regexpExec = patchedExec;
        _export({ target: "RegExp", proto: true, forced: /./.exec !== regexpExec }, {
          exec: regexpExec
        });
        var TO_STRING = "toString";
        var RegExpPrototype = RegExp.prototype;
        var nativeToString = RegExpPrototype[TO_STRING];
        var NOT_GENERIC = fails(function() {
          return nativeToString.call({ source: "a", flags: "b" }) != "/a/b";
        });
        var INCORRECT_NAME = nativeToString.name != TO_STRING;
        if (NOT_GENERIC || INCORRECT_NAME) {
          redefine(RegExp.prototype, TO_STRING, function toString2() {
            var R2 = anObject(this);
            var p2 = String(R2.source);
            var rf = R2.flags;
            var f4 = String(rf === void 0 && R2 instanceof RegExp && !("flags" in RegExpPrototype) ? regexpFlags.call(R2) : rf);
            return "/" + p2 + "/" + f4;
          }, { unsafe: true });
        }
        var createMethod$2 = function(CONVERT_TO_STRING) {
          return function($this, pos) {
            var S2 = String(requireObjectCoercible($this));
            var position = toInteger(pos);
            var size = S2.length;
            var first2, second;
            if (position < 0 || position >= size)
              return CONVERT_TO_STRING ? "" : void 0;
            first2 = S2.charCodeAt(position);
            return first2 < 55296 || first2 > 56319 || position + 1 === size || (second = S2.charCodeAt(position + 1)) < 56320 || second > 57343 ? CONVERT_TO_STRING ? S2.charAt(position) : first2 : CONVERT_TO_STRING ? S2.slice(position, position + 2) : (first2 - 55296 << 10) + (second - 56320) + 65536;
          };
        };
        var stringMultibyte = {
          codeAt: createMethod$2(false),
          charAt: createMethod$2(true)
        };
        var charAt = stringMultibyte.charAt;
        var STRING_ITERATOR = "String Iterator";
        var setInternalState$2 = internalState.set;
        var getInternalState$2 = internalState.getterFor(STRING_ITERATOR);
        defineIterator(String, "String", function(iterated) {
          setInternalState$2(this, {
            type: STRING_ITERATOR,
            string: String(iterated),
            index: 0
          });
        }, function next() {
          var state = getInternalState$2(this);
          var string = state.string;
          var index2 = state.index;
          var point;
          if (index2 >= string.length)
            return { value: void 0, done: true };
          point = charAt(string, index2);
          state.index += point.length;
          return { value: point, done: false };
        });
        var SPECIES$3 = wellKnownSymbol("species");
        var REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function() {
          var re = /./;
          re.exec = function() {
            var result = [];
            result.groups = { a: "7" };
            return result;
          };
          return "".replace(re, "$<a>") !== "7";
        });
        var REPLACE_KEEPS_$0 = function() {
          return "a".replace(/./, "$0") === "$0";
        }();
        var REPLACE = wellKnownSymbol("replace");
        var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = function() {
          if (/./[REPLACE]) {
            return /./[REPLACE]("a", "$0") === "";
          }
          return false;
        }();
        var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function() {
          var re = /(?:)/;
          var originalExec = re.exec;
          re.exec = function() {
            return originalExec.apply(this, arguments);
          };
          var result = "ab".split(re);
          return result.length !== 2 || result[0] !== "a" || result[1] !== "b";
        });
        var fixRegexpWellKnownSymbolLogic = function(KEY, length, exec, sham) {
          var SYMBOL2 = wellKnownSymbol(KEY);
          var DELEGATES_TO_SYMBOL = !fails(function() {
            var O2 = {};
            O2[SYMBOL2] = function() {
              return 7;
            };
            return ""[KEY](O2) != 7;
          });
          var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function() {
            var execCalled = false;
            var re = /a/;
            if (KEY === "split") {
              re = {};
              re.constructor = {};
              re.constructor[SPECIES$3] = function() {
                return re;
              };
              re.flags = "";
              re[SYMBOL2] = /./[SYMBOL2];
            }
            re.exec = function() {
              execCalled = true;
              return null;
            };
            re[SYMBOL2]("");
            return !execCalled;
          });
          if (!DELEGATES_TO_SYMBOL || !DELEGATES_TO_EXEC || KEY === "replace" && !(REPLACE_SUPPORTS_NAMED_GROUPS && REPLACE_KEEPS_$0 && !REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE) || KEY === "split" && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC) {
            var nativeRegExpMethod = /./[SYMBOL2];
            var methods = exec(SYMBOL2, ""[KEY], function(nativeMethod, regexp2, str, arg2, forceStringMethod) {
              if (regexp2.exec === regexpExec) {
                if (DELEGATES_TO_SYMBOL && !forceStringMethod) {
                  return { done: true, value: nativeRegExpMethod.call(regexp2, str, arg2) };
                }
                return { done: true, value: nativeMethod.call(str, regexp2, arg2) };
              }
              return { done: false };
            }, {
              REPLACE_KEEPS_$0,
              REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE
            });
            var stringMethod = methods[0];
            var regexMethod = methods[1];
            redefine(String.prototype, KEY, stringMethod);
            redefine(RegExp.prototype, SYMBOL2, length == 2 ? function(string, arg) {
              return regexMethod.call(string, this, arg);
            } : function(string) {
              return regexMethod.call(string, this);
            });
          }
          if (sham)
            createNonEnumerableProperty(RegExp.prototype[SYMBOL2], "sham", true);
        };
        var charAt$1 = stringMultibyte.charAt;
        var advanceStringIndex = function(S2, index2, unicode) {
          return index2 + (unicode ? charAt$1(S2, index2).length : 1);
        };
        var regexpExecAbstract = function(R2, S2) {
          var exec = R2.exec;
          if (typeof exec === "function") {
            var result = exec.call(R2, S2);
            if (typeof result !== "object") {
              throw TypeError("RegExp exec method returned something other than an Object or null");
            }
            return result;
          }
          if (classofRaw(R2) !== "RegExp") {
            throw TypeError("RegExp#exec called on incompatible receiver");
          }
          return regexpExec.call(R2, S2);
        };
        var max$2 = Math.max;
        var min$2 = Math.min;
        var floor$1 = Math.floor;
        var SUBSTITUTION_SYMBOLS = /\$([$&'`]|\d\d?|<[^>]*>)/g;
        var SUBSTITUTION_SYMBOLS_NO_NAMED = /\$([$&'`]|\d\d?)/g;
        var maybeToString = function(it2) {
          return it2 === void 0 ? it2 : String(it2);
        };
        fixRegexpWellKnownSymbolLogic("replace", 2, function(REPLACE2, nativeReplace2, maybeCallNative, reason) {
          var REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE2 = reason.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE;
          var REPLACE_KEEPS_$02 = reason.REPLACE_KEEPS_$0;
          var UNSAFE_SUBSTITUTE = REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE2 ? "$" : "$0";
          return [
            function replace2(searchValue, replaceValue) {
              var O2 = requireObjectCoercible(this);
              var replacer2 = searchValue == void 0 ? void 0 : searchValue[REPLACE2];
              return replacer2 !== void 0 ? replacer2.call(searchValue, O2, replaceValue) : nativeReplace2.call(String(O2), searchValue, replaceValue);
            },
            function(regexp2, replaceValue) {
              if (!REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE2 && REPLACE_KEEPS_$02 || typeof replaceValue === "string" && replaceValue.indexOf(UNSAFE_SUBSTITUTE) === -1) {
                var res = maybeCallNative(nativeReplace2, regexp2, this, replaceValue);
                if (res.done)
                  return res.value;
              }
              var rx = anObject(regexp2);
              var S2 = String(this);
              var functionalReplace = typeof replaceValue === "function";
              if (!functionalReplace)
                replaceValue = String(replaceValue);
              var global2 = rx.global;
              if (global2) {
                var fullUnicode = rx.unicode;
                rx.lastIndex = 0;
              }
              var results = [];
              while (true) {
                var result = regexpExecAbstract(rx, S2);
                if (result === null)
                  break;
                results.push(result);
                if (!global2)
                  break;
                var matchStr = String(result[0]);
                if (matchStr === "")
                  rx.lastIndex = advanceStringIndex(S2, toLength(rx.lastIndex), fullUnicode);
              }
              var accumulatedResult = "";
              var nextSourcePosition = 0;
              for (var i2 = 0; i2 < results.length; i2++) {
                result = results[i2];
                var matched = String(result[0]);
                var position = max$2(min$2(toInteger(result.index), S2.length), 0);
                var captures = [];
                for (var j3 = 1; j3 < result.length; j3++)
                  captures.push(maybeToString(result[j3]));
                var namedCaptures = result.groups;
                if (functionalReplace) {
                  var replacerArgs = [matched].concat(captures, position, S2);
                  if (namedCaptures !== void 0)
                    replacerArgs.push(namedCaptures);
                  var replacement2 = String(replaceValue.apply(void 0, replacerArgs));
                } else {
                  replacement2 = getSubstitution(matched, S2, position, captures, namedCaptures, replaceValue);
                }
                if (position >= nextSourcePosition) {
                  accumulatedResult += S2.slice(nextSourcePosition, position) + replacement2;
                  nextSourcePosition = position + matched.length;
                }
              }
              return accumulatedResult + S2.slice(nextSourcePosition);
            }
          ];
          function getSubstitution(matched, str, position, captures, namedCaptures, replacement2) {
            var tailPos = position + matched.length;
            var m2 = captures.length;
            var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;
            if (namedCaptures !== void 0) {
              namedCaptures = toObject(namedCaptures);
              symbols = SUBSTITUTION_SYMBOLS;
            }
            return nativeReplace2.call(replacement2, symbols, function(match2, ch) {
              var capture;
              switch (ch.charAt(0)) {
                case "$":
                  return "$";
                case "&":
                  return matched;
                case "`":
                  return str.slice(0, position);
                case "'":
                  return str.slice(tailPos);
                case "<":
                  capture = namedCaptures[ch.slice(1, -1)];
                  break;
                default:
                  var n2 = +ch;
                  if (n2 === 0)
                    return match2;
                  if (n2 > m2) {
                    var f4 = floor$1(n2 / 10);
                    if (f4 === 0)
                      return match2;
                    if (f4 <= m2)
                      return captures[f4 - 1] === void 0 ? ch.charAt(1) : captures[f4 - 1] + ch.charAt(1);
                    return match2;
                  }
                  capture = captures[n2 - 1];
              }
              return capture === void 0 ? "" : capture;
            });
          }
        });
        var sameValue = Object.is || function is2(x2, y2) {
          return x2 === y2 ? x2 !== 0 || 1 / x2 === 1 / y2 : x2 != x2 && y2 != y2;
        };
        fixRegexpWellKnownSymbolLogic("search", 1, function(SEARCH, nativeSearch, maybeCallNative) {
          return [
            function search(regexp2) {
              var O2 = requireObjectCoercible(this);
              var searcher = regexp2 == void 0 ? void 0 : regexp2[SEARCH];
              return searcher !== void 0 ? searcher.call(regexp2, O2) : new RegExp(regexp2)[SEARCH](String(O2));
            },
            function(regexp2) {
              var res = maybeCallNative(nativeSearch, regexp2, this);
              if (res.done)
                return res.value;
              var rx = anObject(regexp2);
              var S2 = String(this);
              var previousLastIndex = rx.lastIndex;
              if (!sameValue(previousLastIndex, 0))
                rx.lastIndex = 0;
              var result = regexpExecAbstract(rx, S2);
              if (!sameValue(rx.lastIndex, previousLastIndex))
                rx.lastIndex = previousLastIndex;
              return result === null ? -1 : result.index;
            }
          ];
        });
        var MATCH = wellKnownSymbol("match");
        var isRegexp = function(it2) {
          var isRegExp;
          return isObject(it2) && ((isRegExp = it2[MATCH]) !== void 0 ? !!isRegExp : classofRaw(it2) == "RegExp");
        };
        var SPECIES$4 = wellKnownSymbol("species");
        var speciesConstructor = function(O2, defaultConstructor) {
          var C2 = anObject(O2).constructor;
          var S2;
          return C2 === void 0 || (S2 = anObject(C2)[SPECIES$4]) == void 0 ? defaultConstructor : aFunction$1(S2);
        };
        var arrayPush = [].push;
        var min$3 = Math.min;
        var MAX_UINT32 = 4294967295;
        var SUPPORTS_Y = !fails(function() {
          return !RegExp(MAX_UINT32, "y");
        });
        fixRegexpWellKnownSymbolLogic("split", 2, function(SPLIT, nativeSplit, maybeCallNative) {
          var internalSplit;
          if ("abbc".split(/(b)*/)[1] == "c" || "test".split(/(?:)/, -1).length != 4 || "ab".split(/(?:ab)*/).length != 2 || ".".split(/(.?)(.?)/).length != 4 || ".".split(/()()/).length > 1 || "".split(/.?/).length) {
            internalSplit = function(separator, limit) {
              var string = String(requireObjectCoercible(this));
              var lim = limit === void 0 ? MAX_UINT32 : limit >>> 0;
              if (lim === 0)
                return [];
              if (separator === void 0)
                return [string];
              if (!isRegexp(separator)) {
                return nativeSplit.call(string, separator, lim);
              }
              var output = [];
              var flags = (separator.ignoreCase ? "i" : "") + (separator.multiline ? "m" : "") + (separator.unicode ? "u" : "") + (separator.sticky ? "y" : "");
              var lastLastIndex = 0;
              var separatorCopy = new RegExp(separator.source, flags + "g");
              var match2, lastIndex, lastLength;
              while (match2 = regexpExec.call(separatorCopy, string)) {
                lastIndex = separatorCopy.lastIndex;
                if (lastIndex > lastLastIndex) {
                  output.push(string.slice(lastLastIndex, match2.index));
                  if (match2.length > 1 && match2.index < string.length)
                    arrayPush.apply(output, match2.slice(1));
                  lastLength = match2[0].length;
                  lastLastIndex = lastIndex;
                  if (output.length >= lim)
                    break;
                }
                if (separatorCopy.lastIndex === match2.index)
                  separatorCopy.lastIndex++;
              }
              if (lastLastIndex === string.length) {
                if (lastLength || !separatorCopy.test(""))
                  output.push("");
              } else
                output.push(string.slice(lastLastIndex));
              return output.length > lim ? output.slice(0, lim) : output;
            };
          } else if ("0".split(void 0, 0).length) {
            internalSplit = function(separator, limit) {
              return separator === void 0 && limit === 0 ? [] : nativeSplit.call(this, separator, limit);
            };
          } else
            internalSplit = nativeSplit;
          return [
            function split2(separator, limit) {
              var O2 = requireObjectCoercible(this);
              var splitter = separator == void 0 ? void 0 : separator[SPLIT];
              return splitter !== void 0 ? splitter.call(separator, O2, limit) : internalSplit.call(String(O2), separator, limit);
            },
            function(regexp2, limit) {
              var res = maybeCallNative(internalSplit, regexp2, this, limit, internalSplit !== nativeSplit);
              if (res.done)
                return res.value;
              var rx = anObject(regexp2);
              var S2 = String(this);
              var C2 = speciesConstructor(rx, RegExp);
              var unicodeMatching = rx.unicode;
              var flags = (rx.ignoreCase ? "i" : "") + (rx.multiline ? "m" : "") + (rx.unicode ? "u" : "") + (SUPPORTS_Y ? "y" : "g");
              var splitter = new C2(SUPPORTS_Y ? rx : "^(?:" + rx.source + ")", flags);
              var lim = limit === void 0 ? MAX_UINT32 : limit >>> 0;
              if (lim === 0)
                return [];
              if (S2.length === 0)
                return regexpExecAbstract(splitter, S2) === null ? [S2] : [];
              var p2 = 0;
              var q2 = 0;
              var A2 = [];
              while (q2 < S2.length) {
                splitter.lastIndex = SUPPORTS_Y ? q2 : 0;
                var z2 = regexpExecAbstract(splitter, SUPPORTS_Y ? S2 : S2.slice(q2));
                var e2;
                if (z2 === null || (e2 = min$3(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q2)), S2.length)) === p2) {
                  q2 = advanceStringIndex(S2, q2, unicodeMatching);
                } else {
                  A2.push(S2.slice(p2, q2));
                  if (A2.length === lim)
                    return A2;
                  for (var i2 = 1; i2 <= z2.length - 1; i2++) {
                    A2.push(z2[i2]);
                    if (A2.length === lim)
                      return A2;
                  }
                  q2 = p2 = e2;
                }
              }
              A2.push(S2.slice(p2));
              return A2;
            }
          ];
        }, !SUPPORTS_Y);
        var domIterables = {
          CSSRuleList: 0,
          CSSStyleDeclaration: 0,
          CSSValueList: 0,
          ClientRectList: 0,
          DOMRectList: 0,
          DOMStringList: 0,
          DOMTokenList: 1,
          DataTransferItemList: 0,
          FileList: 0,
          HTMLAllCollection: 0,
          HTMLCollection: 0,
          HTMLFormElement: 0,
          HTMLSelectElement: 0,
          MediaList: 0,
          MimeTypeArray: 0,
          NamedNodeMap: 0,
          NodeList: 1,
          PaintRequestList: 0,
          Plugin: 0,
          PluginArray: 0,
          SVGLengthList: 0,
          SVGNumberList: 0,
          SVGPathSegList: 0,
          SVGPointList: 0,
          SVGStringList: 0,
          SVGTransformList: 0,
          SourceBufferList: 0,
          StyleSheetList: 0,
          TextTrackCueList: 0,
          TextTrackList: 0,
          TouchList: 0
        };
        for (var COLLECTION_NAME in domIterables) {
          var Collection = global_1[COLLECTION_NAME];
          var CollectionPrototype = Collection && Collection.prototype;
          if (CollectionPrototype && CollectionPrototype.forEach !== arrayForEach)
            try {
              createNonEnumerableProperty(CollectionPrototype, "forEach", arrayForEach);
            } catch (error) {
              CollectionPrototype.forEach = arrayForEach;
            }
        }
        var ITERATOR$2 = wellKnownSymbol("iterator");
        var TO_STRING_TAG$3 = wellKnownSymbol("toStringTag");
        var ArrayValues = es_array_iterator.values;
        for (var COLLECTION_NAME$1 in domIterables) {
          var Collection$1 = global_1[COLLECTION_NAME$1];
          var CollectionPrototype$1 = Collection$1 && Collection$1.prototype;
          if (CollectionPrototype$1) {
            if (CollectionPrototype$1[ITERATOR$2] !== ArrayValues)
              try {
                createNonEnumerableProperty(CollectionPrototype$1, ITERATOR$2, ArrayValues);
              } catch (error) {
                CollectionPrototype$1[ITERATOR$2] = ArrayValues;
              }
            if (!CollectionPrototype$1[TO_STRING_TAG$3]) {
              createNonEnumerableProperty(CollectionPrototype$1, TO_STRING_TAG$3, COLLECTION_NAME$1);
            }
            if (domIterables[COLLECTION_NAME$1])
              for (var METHOD_NAME in es_array_iterator) {
                if (CollectionPrototype$1[METHOD_NAME] !== es_array_iterator[METHOD_NAME])
                  try {
                    createNonEnumerableProperty(CollectionPrototype$1, METHOD_NAME, es_array_iterator[METHOD_NAME]);
                  } catch (error) {
                    CollectionPrototype$1[METHOD_NAME] = es_array_iterator[METHOD_NAME];
                  }
              }
          }
        }
        var ITERATOR$3 = wellKnownSymbol("iterator");
        var nativeUrl = !fails(function() {
          var url = new URL("b?a=1&b=2&c=3", "http://a");
          var searchParams = url.searchParams;
          var result = "";
          url.pathname = "c%20d";
          searchParams.forEach(function(value, key3) {
            searchParams["delete"]("b");
            result += key3 + value;
          });
          return isPure && !url.toJSON || !searchParams.sort || url.href !== "http://a/c%20d?a=1&c=3" || searchParams.get("c") !== "3" || String(new URLSearchParams("?a=1")) !== "a=1" || !searchParams[ITERATOR$3] || new URL("https://a@b").username !== "a" || new URLSearchParams(new URLSearchParams("a=b")).get("a") !== "b" || new URL("http://\u0442\u0435\u0441\u0442").host !== "xn--e1aybc" || new URL("http://a#\u0431").hash !== "#%D0%B1" || result !== "a1c3" || new URL("http://x", void 0).host !== "x";
        });
        var anInstance = function(it2, Constructor, name2) {
          if (!(it2 instanceof Constructor)) {
            throw TypeError("Incorrect " + (name2 ? name2 + " " : "") + "invocation");
          }
          return it2;
        };
        var nativeAssign = Object.assign;
        var defineProperty$4 = Object.defineProperty;
        var objectAssign = !nativeAssign || fails(function() {
          if (descriptors && nativeAssign({ b: 1 }, nativeAssign(defineProperty$4({}, "a", {
            enumerable: true,
            get: function() {
              defineProperty$4(this, "b", {
                value: 3,
                enumerable: false
              });
            }
          }), { b: 2 })).b !== 1)
            return true;
          var A2 = {};
          var B2 = {};
          var symbol = Symbol();
          var alphabet = "abcdefghijklmnopqrst";
          A2[symbol] = 7;
          alphabet.split("").forEach(function(chr) {
            B2[chr] = chr;
          });
          return nativeAssign({}, A2)[symbol] != 7 || objectKeys(nativeAssign({}, B2)).join("") != alphabet;
        }) ? function assign(target, source2) {
          var T2 = toObject(target);
          var argumentsLength = arguments.length;
          var index2 = 1;
          var getOwnPropertySymbols = objectGetOwnPropertySymbols.f;
          var propertyIsEnumerable2 = objectPropertyIsEnumerable.f;
          while (argumentsLength > index2) {
            var S2 = indexedObject(arguments[index2++]);
            var keys2 = getOwnPropertySymbols ? objectKeys(S2).concat(getOwnPropertySymbols(S2)) : objectKeys(S2);
            var length = keys2.length;
            var j3 = 0;
            var key3;
            while (length > j3) {
              key3 = keys2[j3++];
              if (!descriptors || propertyIsEnumerable2.call(S2, key3))
                T2[key3] = S2[key3];
            }
          }
          return T2;
        } : nativeAssign;
        var callWithSafeIterationClosing = function(iterator, fn, value, ENTRIES2) {
          try {
            return ENTRIES2 ? fn(anObject(value)[0], value[1]) : fn(value);
          } catch (error) {
            var returnMethod = iterator["return"];
            if (returnMethod !== void 0)
              anObject(returnMethod.call(iterator));
            throw error;
          }
        };
        var ITERATOR$4 = wellKnownSymbol("iterator");
        var ArrayPrototype$1 = Array.prototype;
        var isArrayIteratorMethod = function(it2) {
          return it2 !== void 0 && (iterators.Array === it2 || ArrayPrototype$1[ITERATOR$4] === it2);
        };
        var ITERATOR$5 = wellKnownSymbol("iterator");
        var getIteratorMethod = function(it2) {
          if (it2 != void 0)
            return it2[ITERATOR$5] || it2["@@iterator"] || iterators[classof(it2)];
        };
        var arrayFrom = function from(arrayLike) {
          var O2 = toObject(arrayLike);
          var C2 = typeof this == "function" ? this : Array;
          var argumentsLength = arguments.length;
          var mapfn = argumentsLength > 1 ? arguments[1] : void 0;
          var mapping = mapfn !== void 0;
          var iteratorMethod = getIteratorMethod(O2);
          var index2 = 0;
          var length, result, step, iterator, next, value;
          if (mapping)
            mapfn = functionBindContext(mapfn, argumentsLength > 2 ? arguments[2] : void 0, 2);
          if (iteratorMethod != void 0 && !(C2 == Array && isArrayIteratorMethod(iteratorMethod))) {
            iterator = iteratorMethod.call(O2);
            next = iterator.next;
            result = new C2();
            for (; !(step = next.call(iterator)).done; index2++) {
              value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index2], true) : step.value;
              createProperty(result, index2, value);
            }
          } else {
            length = toLength(O2.length);
            result = new C2(length);
            for (; length > index2; index2++) {
              value = mapping ? mapfn(O2[index2], index2) : O2[index2];
              createProperty(result, index2, value);
            }
          }
          result.length = index2;
          return result;
        };
        var maxInt = 2147483647;
        var base = 36;
        var tMin = 1;
        var tMax = 26;
        var skew = 38;
        var damp = 700;
        var initialBias = 72;
        var initialN = 128;
        var delimiter = "-";
        var regexNonASCII = /[^\0-\u007E]/;
        var regexSeparators = /[.\u3002\uFF0E\uFF61]/g;
        var OVERFLOW_ERROR = "Overflow: input needs wider integers to process";
        var baseMinusTMin = base - tMin;
        var floor$2 = Math.floor;
        var stringFromCharCode = String.fromCharCode;
        var ucs2decode = function(string) {
          var output = [];
          var counter2 = 0;
          var length = string.length;
          while (counter2 < length) {
            var value = string.charCodeAt(counter2++);
            if (value >= 55296 && value <= 56319 && counter2 < length) {
              var extra = string.charCodeAt(counter2++);
              if ((extra & 64512) == 56320) {
                output.push(((value & 1023) << 10) + (extra & 1023) + 65536);
              } else {
                output.push(value);
                counter2--;
              }
            } else {
              output.push(value);
            }
          }
          return output;
        };
        var digitToBasic = function(digit) {
          return digit + 22 + 75 * (digit < 26);
        };
        var adapt = function(delta, numPoints, firstTime) {
          var k2 = 0;
          delta = firstTime ? floor$2(delta / damp) : delta >> 1;
          delta += floor$2(delta / numPoints);
          for (; delta > baseMinusTMin * tMax >> 1; k2 += base) {
            delta = floor$2(delta / baseMinusTMin);
          }
          return floor$2(k2 + (baseMinusTMin + 1) * delta / (delta + skew));
        };
        var encode = function(input) {
          var output = [];
          input = ucs2decode(input);
          var inputLength = input.length;
          var n2 = initialN;
          var delta = 0;
          var bias = initialBias;
          var i2, currentValue;
          for (i2 = 0; i2 < input.length; i2++) {
            currentValue = input[i2];
            if (currentValue < 128) {
              output.push(stringFromCharCode(currentValue));
            }
          }
          var basicLength = output.length;
          var handledCPCount = basicLength;
          if (basicLength) {
            output.push(delimiter);
          }
          while (handledCPCount < inputLength) {
            var m2 = maxInt;
            for (i2 = 0; i2 < input.length; i2++) {
              currentValue = input[i2];
              if (currentValue >= n2 && currentValue < m2) {
                m2 = currentValue;
              }
            }
            var handledCPCountPlusOne = handledCPCount + 1;
            if (m2 - n2 > floor$2((maxInt - delta) / handledCPCountPlusOne)) {
              throw RangeError(OVERFLOW_ERROR);
            }
            delta += (m2 - n2) * handledCPCountPlusOne;
            n2 = m2;
            for (i2 = 0; i2 < input.length; i2++) {
              currentValue = input[i2];
              if (currentValue < n2 && ++delta > maxInt) {
                throw RangeError(OVERFLOW_ERROR);
              }
              if (currentValue == n2) {
                var q2 = delta;
                for (var k2 = base; ; k2 += base) {
                  var t3 = k2 <= bias ? tMin : k2 >= bias + tMax ? tMax : k2 - bias;
                  if (q2 < t3)
                    break;
                  var qMinusT = q2 - t3;
                  var baseMinusT = base - t3;
                  output.push(stringFromCharCode(digitToBasic(t3 + qMinusT % baseMinusT)));
                  q2 = floor$2(qMinusT / baseMinusT);
                }
                output.push(stringFromCharCode(digitToBasic(q2)));
                bias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);
                delta = 0;
                ++handledCPCount;
              }
            }
            ++delta;
            ++n2;
          }
          return output.join("");
        };
        var stringPunycodeToAscii = function(input) {
          var encoded = [];
          var labels = input.toLowerCase().replace(regexSeparators, ".").split(".");
          var i2, label;
          for (i2 = 0; i2 < labels.length; i2++) {
            label = labels[i2];
            encoded.push(regexNonASCII.test(label) ? "xn--" + encode(label) : label);
          }
          return encoded.join(".");
        };
        var redefineAll = function(target, src, options) {
          for (var key3 in src)
            redefine(target, key3, src[key3], options);
          return target;
        };
        var getIterator = function(it2) {
          var iteratorMethod = getIteratorMethod(it2);
          if (typeof iteratorMethod != "function") {
            throw TypeError(String(it2) + " is not iterable");
          }
          return anObject(iteratorMethod.call(it2));
        };
        var $fetch = getBuiltIn("fetch");
        var Headers = getBuiltIn("Headers");
        var ITERATOR$6 = wellKnownSymbol("iterator");
        var URL_SEARCH_PARAMS = "URLSearchParams";
        var URL_SEARCH_PARAMS_ITERATOR = URL_SEARCH_PARAMS + "Iterator";
        var setInternalState$3 = internalState.set;
        var getInternalParamsState = internalState.getterFor(URL_SEARCH_PARAMS);
        var getInternalIteratorState = internalState.getterFor(URL_SEARCH_PARAMS_ITERATOR);
        var plus = /\+/g;
        var sequences = Array(4);
        var percentSequence = function(bytes) {
          return sequences[bytes - 1] || (sequences[bytes - 1] = RegExp("((?:%[\\da-f]{2}){" + bytes + "})", "gi"));
        };
        var percentDecode = function(sequence) {
          try {
            return decodeURIComponent(sequence);
          } catch (error) {
            return sequence;
          }
        };
        var deserialize = function(it2) {
          var result = it2.replace(plus, " ");
          var bytes = 4;
          try {
            return decodeURIComponent(result);
          } catch (error) {
            while (bytes) {
              result = result.replace(percentSequence(bytes--), percentDecode);
            }
            return result;
          }
        };
        var find = /[!'()~]|%20/g;
        var replace = {
          "!": "%21",
          "'": "%27",
          "(": "%28",
          ")": "%29",
          "~": "%7E",
          "%20": "+"
        };
        var replacer = function(match2) {
          return replace[match2];
        };
        var serialize = function(it2) {
          return encodeURIComponent(it2).replace(find, replacer);
        };
        var parseSearchParams = function(result, query) {
          if (query) {
            var attributes = query.split("&");
            var index2 = 0;
            var attribute, entry;
            while (index2 < attributes.length) {
              attribute = attributes[index2++];
              if (attribute.length) {
                entry = attribute.split("=");
                result.push({
                  key: deserialize(entry.shift()),
                  value: deserialize(entry.join("="))
                });
              }
            }
          }
        };
        var updateSearchParams = function(query) {
          this.entries.length = 0;
          parseSearchParams(this.entries, query);
        };
        var validateArgumentsLength = function(passed, required) {
          if (passed < required)
            throw TypeError("Not enough arguments");
        };
        var URLSearchParamsIterator = createIteratorConstructor(function Iterator(params, kind) {
          setInternalState$3(this, {
            type: URL_SEARCH_PARAMS_ITERATOR,
            iterator: getIterator(getInternalParamsState(params).entries),
            kind
          });
        }, "Iterator", function next() {
          var state = getInternalIteratorState(this);
          var kind = state.kind;
          var step = state.iterator.next();
          var entry = step.value;
          if (!step.done) {
            step.value = kind === "keys" ? entry.key : kind === "values" ? entry.value : [entry.key, entry.value];
          }
          return step;
        });
        var URLSearchParamsConstructor = function URLSearchParams2() {
          anInstance(this, URLSearchParamsConstructor, URL_SEARCH_PARAMS);
          var init = arguments.length > 0 ? arguments[0] : void 0;
          var that = this;
          var entries = [];
          var iteratorMethod, iterator, next, step, entryIterator, entryNext, first2, second, key3;
          setInternalState$3(that, {
            type: URL_SEARCH_PARAMS,
            entries,
            updateURL: function() {
            },
            updateSearchParams
          });
          if (init !== void 0) {
            if (isObject(init)) {
              iteratorMethod = getIteratorMethod(init);
              if (typeof iteratorMethod === "function") {
                iterator = iteratorMethod.call(init);
                next = iterator.next;
                while (!(step = next.call(iterator)).done) {
                  entryIterator = getIterator(anObject(step.value));
                  entryNext = entryIterator.next;
                  if ((first2 = entryNext.call(entryIterator)).done || (second = entryNext.call(entryIterator)).done || !entryNext.call(entryIterator).done)
                    throw TypeError("Expected sequence with length 2");
                  entries.push({ key: first2.value + "", value: second.value + "" });
                }
              } else
                for (key3 in init)
                  if (has(init, key3))
                    entries.push({ key: key3, value: init[key3] + "" });
            } else {
              parseSearchParams(entries, typeof init === "string" ? init.charAt(0) === "?" ? init.slice(1) : init : init + "");
            }
          }
        };
        var URLSearchParamsPrototype = URLSearchParamsConstructor.prototype;
        redefineAll(URLSearchParamsPrototype, {
          append: function append(name2, value) {
            validateArgumentsLength(arguments.length, 2);
            var state = getInternalParamsState(this);
            state.entries.push({ key: name2 + "", value: value + "" });
            state.updateURL();
          },
          "delete": function(name2) {
            validateArgumentsLength(arguments.length, 1);
            var state = getInternalParamsState(this);
            var entries = state.entries;
            var key3 = name2 + "";
            var index2 = 0;
            while (index2 < entries.length) {
              if (entries[index2].key === key3)
                entries.splice(index2, 1);
              else
                index2++;
            }
            state.updateURL();
          },
          get: function get2(name2) {
            validateArgumentsLength(arguments.length, 1);
            var entries = getInternalParamsState(this).entries;
            var key3 = name2 + "";
            var index2 = 0;
            for (; index2 < entries.length; index2++) {
              if (entries[index2].key === key3)
                return entries[index2].value;
            }
            return null;
          },
          getAll: function getAll(name2) {
            validateArgumentsLength(arguments.length, 1);
            var entries = getInternalParamsState(this).entries;
            var key3 = name2 + "";
            var result = [];
            var index2 = 0;
            for (; index2 < entries.length; index2++) {
              if (entries[index2].key === key3)
                result.push(entries[index2].value);
            }
            return result;
          },
          has: function has2(name2) {
            validateArgumentsLength(arguments.length, 1);
            var entries = getInternalParamsState(this).entries;
            var key3 = name2 + "";
            var index2 = 0;
            while (index2 < entries.length) {
              if (entries[index2++].key === key3)
                return true;
            }
            return false;
          },
          set: function set2(name2, value) {
            validateArgumentsLength(arguments.length, 1);
            var state = getInternalParamsState(this);
            var entries = state.entries;
            var found = false;
            var key3 = name2 + "";
            var val2 = value + "";
            var index2 = 0;
            var entry;
            for (; index2 < entries.length; index2++) {
              entry = entries[index2];
              if (entry.key === key3) {
                if (found)
                  entries.splice(index2--, 1);
                else {
                  found = true;
                  entry.value = val2;
                }
              }
            }
            if (!found)
              entries.push({ key: key3, value: val2 });
            state.updateURL();
          },
          sort: function sort() {
            var state = getInternalParamsState(this);
            var entries = state.entries;
            var slice = entries.slice();
            var entry, entriesIndex, sliceIndex;
            entries.length = 0;
            for (sliceIndex = 0; sliceIndex < slice.length; sliceIndex++) {
              entry = slice[sliceIndex];
              for (entriesIndex = 0; entriesIndex < sliceIndex; entriesIndex++) {
                if (entries[entriesIndex].key > entry.key) {
                  entries.splice(entriesIndex, 0, entry);
                  break;
                }
              }
              if (entriesIndex === sliceIndex)
                entries.push(entry);
            }
            state.updateURL();
          },
          forEach: function forEach(callback) {
            var entries = getInternalParamsState(this).entries;
            var boundFunction = functionBindContext(callback, arguments.length > 1 ? arguments[1] : void 0, 3);
            var index2 = 0;
            var entry;
            while (index2 < entries.length) {
              entry = entries[index2++];
              boundFunction(entry.value, entry.key, this);
            }
          },
          keys: function keys2() {
            return new URLSearchParamsIterator(this, "keys");
          },
          values: function values() {
            return new URLSearchParamsIterator(this, "values");
          },
          entries: function entries() {
            return new URLSearchParamsIterator(this, "entries");
          }
        }, { enumerable: true });
        redefine(URLSearchParamsPrototype, ITERATOR$6, URLSearchParamsPrototype.entries);
        redefine(URLSearchParamsPrototype, "toString", function toString2() {
          var entries = getInternalParamsState(this).entries;
          var result = [];
          var index2 = 0;
          var entry;
          while (index2 < entries.length) {
            entry = entries[index2++];
            result.push(serialize(entry.key) + "=" + serialize(entry.value));
          }
          return result.join("&");
        }, { enumerable: true });
        setToStringTag(URLSearchParamsConstructor, URL_SEARCH_PARAMS);
        _export({ global: true, forced: !nativeUrl }, {
          URLSearchParams: URLSearchParamsConstructor
        });
        if (!nativeUrl && typeof $fetch == "function" && typeof Headers == "function") {
          _export({ global: true, enumerable: true, forced: true }, {
            fetch: function fetch3(input) {
              var args = [input];
              var init, body, headers;
              if (arguments.length > 1) {
                init = arguments[1];
                if (isObject(init)) {
                  body = init.body;
                  if (classof(body) === URL_SEARCH_PARAMS) {
                    headers = init.headers ? new Headers(init.headers) : new Headers();
                    if (!headers.has("content-type")) {
                      headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8");
                    }
                    init = objectCreate(init, {
                      body: createPropertyDescriptor(0, String(body)),
                      headers: createPropertyDescriptor(0, headers)
                    });
                  }
                }
                args.push(init);
              }
              return $fetch.apply(this, args);
            }
          });
        }
        var web_urlSearchParams = {
          URLSearchParams: URLSearchParamsConstructor,
          getState: getInternalParamsState
        };
        var codeAt = stringMultibyte.codeAt;
        var NativeURL = global_1.URL;
        var URLSearchParams$1 = web_urlSearchParams.URLSearchParams;
        var getInternalSearchParamsState = web_urlSearchParams.getState;
        var setInternalState$4 = internalState.set;
        var getInternalURLState = internalState.getterFor("URL");
        var floor$3 = Math.floor;
        var pow = Math.pow;
        var INVALID_AUTHORITY = "Invalid authority";
        var INVALID_SCHEME = "Invalid scheme";
        var INVALID_HOST = "Invalid host";
        var INVALID_PORT = "Invalid port";
        var ALPHA = /[A-Za-z]/;
        var ALPHANUMERIC = /[\d+-.A-Za-z]/;
        var DIGIT = /\d/;
        var HEX_START = /^(0x|0X)/;
        var OCT = /^[0-7]+$/;
        var DEC = /^\d+$/;
        var HEX = /^[\dA-Fa-f]+$/;
        var FORBIDDEN_HOST_CODE_POINT = /[\u0000\u0009\u000A\u000D #%/:?@[\\]]/;
        var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT = /[\u0000\u0009\u000A\u000D #/:?@[\\]]/;
        var LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE = /^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g;
        var TAB_AND_NEW_LINE = /[\u0009\u000A\u000D]/g;
        var EOF;
        var parseHost = function(url, input) {
          var result, codePoints, index2;
          if (input.charAt(0) == "[") {
            if (input.charAt(input.length - 1) != "]")
              return INVALID_HOST;
            result = parseIPv6(input.slice(1, -1));
            if (!result)
              return INVALID_HOST;
            url.host = result;
          } else if (!isSpecial(url)) {
            if (FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT.test(input))
              return INVALID_HOST;
            result = "";
            codePoints = arrayFrom(input);
            for (index2 = 0; index2 < codePoints.length; index2++) {
              result += percentEncode(codePoints[index2], C0ControlPercentEncodeSet);
            }
            url.host = result;
          } else {
            input = stringPunycodeToAscii(input);
            if (FORBIDDEN_HOST_CODE_POINT.test(input))
              return INVALID_HOST;
            result = parseIPv4(input);
            if (result === null)
              return INVALID_HOST;
            url.host = result;
          }
        };
        var parseIPv4 = function(input) {
          var parts = input.split(".");
          var partsLength, numbers, index2, part, radix, number, ipv4;
          if (parts.length && parts[parts.length - 1] == "") {
            parts.pop();
          }
          partsLength = parts.length;
          if (partsLength > 4)
            return input;
          numbers = [];
          for (index2 = 0; index2 < partsLength; index2++) {
            part = parts[index2];
            if (part == "")
              return input;
            radix = 10;
            if (part.length > 1 && part.charAt(0) == "0") {
              radix = HEX_START.test(part) ? 16 : 8;
              part = part.slice(radix == 8 ? 1 : 2);
            }
            if (part === "") {
              number = 0;
            } else {
              if (!(radix == 10 ? DEC : radix == 8 ? OCT : HEX).test(part))
                return input;
              number = parseInt(part, radix);
            }
            numbers.push(number);
          }
          for (index2 = 0; index2 < partsLength; index2++) {
            number = numbers[index2];
            if (index2 == partsLength - 1) {
              if (number >= pow(256, 5 - partsLength))
                return null;
            } else if (number > 255)
              return null;
          }
          ipv4 = numbers.pop();
          for (index2 = 0; index2 < numbers.length; index2++) {
            ipv4 += numbers[index2] * pow(256, 3 - index2);
          }
          return ipv4;
        };
        var parseIPv6 = function(input) {
          var address = [0, 0, 0, 0, 0, 0, 0, 0];
          var pieceIndex = 0;
          var compress = null;
          var pointer = 0;
          var value, length, numbersSeen, ipv4Piece, number, swaps, swap;
          var char = function() {
            return input.charAt(pointer);
          };
          if (char() == ":") {
            if (input.charAt(1) != ":")
              return;
            pointer += 2;
            pieceIndex++;
            compress = pieceIndex;
          }
          while (char()) {
            if (pieceIndex == 8)
              return;
            if (char() == ":") {
              if (compress !== null)
                return;
              pointer++;
              pieceIndex++;
              compress = pieceIndex;
              continue;
            }
            value = length = 0;
            while (length < 4 && HEX.test(char())) {
              value = value * 16 + parseInt(char(), 16);
              pointer++;
              length++;
            }
            if (char() == ".") {
              if (length == 0)
                return;
              pointer -= length;
              if (pieceIndex > 6)
                return;
              numbersSeen = 0;
              while (char()) {
                ipv4Piece = null;
                if (numbersSeen > 0) {
                  if (char() == "." && numbersSeen < 4)
                    pointer++;
                  else
                    return;
                }
                if (!DIGIT.test(char()))
                  return;
                while (DIGIT.test(char())) {
                  number = parseInt(char(), 10);
                  if (ipv4Piece === null)
                    ipv4Piece = number;
                  else if (ipv4Piece == 0)
                    return;
                  else
                    ipv4Piece = ipv4Piece * 10 + number;
                  if (ipv4Piece > 255)
                    return;
                  pointer++;
                }
                address[pieceIndex] = address[pieceIndex] * 256 + ipv4Piece;
                numbersSeen++;
                if (numbersSeen == 2 || numbersSeen == 4)
                  pieceIndex++;
              }
              if (numbersSeen != 4)
                return;
              break;
            } else if (char() == ":") {
              pointer++;
              if (!char())
                return;
            } else if (char())
              return;
            address[pieceIndex++] = value;
          }
          if (compress !== null) {
            swaps = pieceIndex - compress;
            pieceIndex = 7;
            while (pieceIndex != 0 && swaps > 0) {
              swap = address[pieceIndex];
              address[pieceIndex--] = address[compress + swaps - 1];
              address[compress + --swaps] = swap;
            }
          } else if (pieceIndex != 8)
            return;
          return address;
        };
        var findLongestZeroSequence = function(ipv6) {
          var maxIndex = null;
          var maxLength = 1;
          var currStart = null;
          var currLength = 0;
          var index2 = 0;
          for (; index2 < 8; index2++) {
            if (ipv6[index2] !== 0) {
              if (currLength > maxLength) {
                maxIndex = currStart;
                maxLength = currLength;
              }
              currStart = null;
              currLength = 0;
            } else {
              if (currStart === null)
                currStart = index2;
              ++currLength;
            }
          }
          if (currLength > maxLength) {
            maxIndex = currStart;
            maxLength = currLength;
          }
          return maxIndex;
        };
        var serializeHost = function(host) {
          var result, index2, compress, ignore0;
          if (typeof host == "number") {
            result = [];
            for (index2 = 0; index2 < 4; index2++) {
              result.unshift(host % 256);
              host = floor$3(host / 256);
            }
            return result.join(".");
          } else if (typeof host == "object") {
            result = "";
            compress = findLongestZeroSequence(host);
            for (index2 = 0; index2 < 8; index2++) {
              if (ignore0 && host[index2] === 0)
                continue;
              if (ignore0)
                ignore0 = false;
              if (compress === index2) {
                result += index2 ? ":" : "::";
                ignore0 = true;
              } else {
                result += host[index2].toString(16);
                if (index2 < 7)
                  result += ":";
              }
            }
            return "[" + result + "]";
          }
          return host;
        };
        var C0ControlPercentEncodeSet = {};
        var fragmentPercentEncodeSet = objectAssign({}, C0ControlPercentEncodeSet, {
          " ": 1,
          '"': 1,
          "<": 1,
          ">": 1,
          "`": 1
        });
        var pathPercentEncodeSet = objectAssign({}, fragmentPercentEncodeSet, {
          "#": 1,
          "?": 1,
          "{": 1,
          "}": 1
        });
        var userinfoPercentEncodeSet = objectAssign({}, pathPercentEncodeSet, {
          "/": 1,
          ":": 1,
          ";": 1,
          "=": 1,
          "@": 1,
          "[": 1,
          "\\": 1,
          "]": 1,
          "^": 1,
          "|": 1
        });
        var percentEncode = function(char, set2) {
          var code = codeAt(char, 0);
          return code > 32 && code < 127 && !has(set2, char) ? char : encodeURIComponent(char);
        };
        var specialSchemes = {
          ftp: 21,
          file: null,
          http: 80,
          https: 443,
          ws: 80,
          wss: 443
        };
        var isSpecial = function(url) {
          return has(specialSchemes, url.scheme);
        };
        var includesCredentials = function(url) {
          return url.username != "" || url.password != "";
        };
        var cannotHaveUsernamePasswordPort = function(url) {
          return !url.host || url.cannotBeABaseURL || url.scheme == "file";
        };
        var isWindowsDriveLetter = function(string, normalized) {
          var second;
          return string.length == 2 && ALPHA.test(string.charAt(0)) && ((second = string.charAt(1)) == ":" || !normalized && second == "|");
        };
        var startsWithWindowsDriveLetter = function(string) {
          var third;
          return string.length > 1 && isWindowsDriveLetter(string.slice(0, 2)) && (string.length == 2 || ((third = string.charAt(2)) === "/" || third === "\\" || third === "?" || third === "#"));
        };
        var shortenURLsPath = function(url) {
          var path2 = url.path;
          var pathSize = path2.length;
          if (pathSize && (url.scheme != "file" || pathSize != 1 || !isWindowsDriveLetter(path2[0], true))) {
            path2.pop();
          }
        };
        var isSingleDot = function(segment) {
          return segment === "." || segment.toLowerCase() === "%2e";
        };
        var isDoubleDot = function(segment) {
          segment = segment.toLowerCase();
          return segment === ".." || segment === "%2e." || segment === ".%2e" || segment === "%2e%2e";
        };
        var SCHEME_START = {};
        var SCHEME = {};
        var NO_SCHEME = {};
        var SPECIAL_RELATIVE_OR_AUTHORITY = {};
        var PATH_OR_AUTHORITY = {};
        var RELATIVE = {};
        var RELATIVE_SLASH = {};
        var SPECIAL_AUTHORITY_SLASHES = {};
        var SPECIAL_AUTHORITY_IGNORE_SLASHES = {};
        var AUTHORITY = {};
        var HOST = {};
        var HOSTNAME = {};
        var PORT = {};
        var FILE = {};
        var FILE_SLASH = {};
        var FILE_HOST = {};
        var PATH_START = {};
        var PATH = {};
        var CANNOT_BE_A_BASE_URL_PATH = {};
        var QUERY = {};
        var FRAGMENT = {};
        var parseURL = function(url, input, stateOverride, base2) {
          var state = stateOverride || SCHEME_START;
          var pointer = 0;
          var buffer = "";
          var seenAt = false;
          var seenBracket = false;
          var seenPasswordToken = false;
          var codePoints, char, bufferCodePoints, failure;
          if (!stateOverride) {
            url.scheme = "";
            url.username = "";
            url.password = "";
            url.host = null;
            url.port = null;
            url.path = [];
            url.query = null;
            url.fragment = null;
            url.cannotBeABaseURL = false;
            input = input.replace(LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE, "");
          }
          input = input.replace(TAB_AND_NEW_LINE, "");
          codePoints = arrayFrom(input);
          while (pointer <= codePoints.length) {
            char = codePoints[pointer];
            switch (state) {
              case SCHEME_START:
                if (char && ALPHA.test(char)) {
                  buffer += char.toLowerCase();
                  state = SCHEME;
                } else if (!stateOverride) {
                  state = NO_SCHEME;
                  continue;
                } else
                  return INVALID_SCHEME;
                break;
              case SCHEME:
                if (char && (ALPHANUMERIC.test(char) || char == "+" || char == "-" || char == ".")) {
                  buffer += char.toLowerCase();
                } else if (char == ":") {
                  if (stateOverride && (isSpecial(url) != has(specialSchemes, buffer) || buffer == "file" && (includesCredentials(url) || url.port !== null) || url.scheme == "file" && !url.host))
                    return;
                  url.scheme = buffer;
                  if (stateOverride) {
                    if (isSpecial(url) && specialSchemes[url.scheme] == url.port)
                      url.port = null;
                    return;
                  }
                  buffer = "";
                  if (url.scheme == "file") {
                    state = FILE;
                  } else if (isSpecial(url) && base2 && base2.scheme == url.scheme) {
                    state = SPECIAL_RELATIVE_OR_AUTHORITY;
                  } else if (isSpecial(url)) {
                    state = SPECIAL_AUTHORITY_SLASHES;
                  } else if (codePoints[pointer + 1] == "/") {
                    state = PATH_OR_AUTHORITY;
                    pointer++;
                  } else {
                    url.cannotBeABaseURL = true;
                    url.path.push("");
                    state = CANNOT_BE_A_BASE_URL_PATH;
                  }
                } else if (!stateOverride) {
                  buffer = "";
                  state = NO_SCHEME;
                  pointer = 0;
                  continue;
                } else
                  return INVALID_SCHEME;
                break;
              case NO_SCHEME:
                if (!base2 || base2.cannotBeABaseURL && char != "#")
                  return INVALID_SCHEME;
                if (base2.cannotBeABaseURL && char == "#") {
                  url.scheme = base2.scheme;
                  url.path = base2.path.slice();
                  url.query = base2.query;
                  url.fragment = "";
                  url.cannotBeABaseURL = true;
                  state = FRAGMENT;
                  break;
                }
                state = base2.scheme == "file" ? FILE : RELATIVE;
                continue;
              case SPECIAL_RELATIVE_OR_AUTHORITY:
                if (char == "/" && codePoints[pointer + 1] == "/") {
                  state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
                  pointer++;
                } else {
                  state = RELATIVE;
                  continue;
                }
                break;
              case PATH_OR_AUTHORITY:
                if (char == "/") {
                  state = AUTHORITY;
                  break;
                } else {
                  state = PATH;
                  continue;
                }
              case RELATIVE:
                url.scheme = base2.scheme;
                if (char == EOF) {
                  url.username = base2.username;
                  url.password = base2.password;
                  url.host = base2.host;
                  url.port = base2.port;
                  url.path = base2.path.slice();
                  url.query = base2.query;
                } else if (char == "/" || char == "\\" && isSpecial(url)) {
                  state = RELATIVE_SLASH;
                } else if (char == "?") {
                  url.username = base2.username;
                  url.password = base2.password;
                  url.host = base2.host;
                  url.port = base2.port;
                  url.path = base2.path.slice();
                  url.query = "";
                  state = QUERY;
                } else if (char == "#") {
                  url.username = base2.username;
                  url.password = base2.password;
                  url.host = base2.host;
                  url.port = base2.port;
                  url.path = base2.path.slice();
                  url.query = base2.query;
                  url.fragment = "";
                  state = FRAGMENT;
                } else {
                  url.username = base2.username;
                  url.password = base2.password;
                  url.host = base2.host;
                  url.port = base2.port;
                  url.path = base2.path.slice();
                  url.path.pop();
                  state = PATH;
                  continue;
                }
                break;
              case RELATIVE_SLASH:
                if (isSpecial(url) && (char == "/" || char == "\\")) {
                  state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
                } else if (char == "/") {
                  state = AUTHORITY;
                } else {
                  url.username = base2.username;
                  url.password = base2.password;
                  url.host = base2.host;
                  url.port = base2.port;
                  state = PATH;
                  continue;
                }
                break;
              case SPECIAL_AUTHORITY_SLASHES:
                state = SPECIAL_AUTHORITY_IGNORE_SLASHES;
                if (char != "/" || buffer.charAt(pointer + 1) != "/")
                  continue;
                pointer++;
                break;
              case SPECIAL_AUTHORITY_IGNORE_SLASHES:
                if (char != "/" && char != "\\") {
                  state = AUTHORITY;
                  continue;
                }
                break;
              case AUTHORITY:
                if (char == "@") {
                  if (seenAt)
                    buffer = "%40" + buffer;
                  seenAt = true;
                  bufferCodePoints = arrayFrom(buffer);
                  for (var i2 = 0; i2 < bufferCodePoints.length; i2++) {
                    var codePoint = bufferCodePoints[i2];
                    if (codePoint == ":" && !seenPasswordToken) {
                      seenPasswordToken = true;
                      continue;
                    }
                    var encodedCodePoints = percentEncode(codePoint, userinfoPercentEncodeSet);
                    if (seenPasswordToken)
                      url.password += encodedCodePoints;
                    else
                      url.username += encodedCodePoints;
                  }
                  buffer = "";
                } else if (char == EOF || char == "/" || char == "?" || char == "#" || char == "\\" && isSpecial(url)) {
                  if (seenAt && buffer == "")
                    return INVALID_AUTHORITY;
                  pointer -= arrayFrom(buffer).length + 1;
                  buffer = "";
                  state = HOST;
                } else
                  buffer += char;
                break;
              case HOST:
              case HOSTNAME:
                if (stateOverride && url.scheme == "file") {
                  state = FILE_HOST;
                  continue;
                } else if (char == ":" && !seenBracket) {
                  if (buffer == "")
                    return INVALID_HOST;
                  failure = parseHost(url, buffer);
                  if (failure)
                    return failure;
                  buffer = "";
                  state = PORT;
                  if (stateOverride == HOSTNAME)
                    return;
                } else if (char == EOF || char == "/" || char == "?" || char == "#" || char == "\\" && isSpecial(url)) {
                  if (isSpecial(url) && buffer == "")
                    return INVALID_HOST;
                  if (stateOverride && buffer == "" && (includesCredentials(url) || url.port !== null))
                    return;
                  failure = parseHost(url, buffer);
                  if (failure)
                    return failure;
                  buffer = "";
                  state = PATH_START;
                  if (stateOverride)
                    return;
                  continue;
                } else {
                  if (char == "[")
                    seenBracket = true;
                  else if (char == "]")
                    seenBracket = false;
                  buffer += char;
                }
                break;
              case PORT:
                if (DIGIT.test(char)) {
                  buffer += char;
                } else if (char == EOF || char == "/" || char == "?" || char == "#" || char == "\\" && isSpecial(url) || stateOverride) {
                  if (buffer != "") {
                    var port3 = parseInt(buffer, 10);
                    if (port3 > 65535)
                      return INVALID_PORT;
                    url.port = isSpecial(url) && port3 === specialSchemes[url.scheme] ? null : port3;
                    buffer = "";
                  }
                  if (stateOverride)
                    return;
                  state = PATH_START;
                  continue;
                } else
                  return INVALID_PORT;
                break;
              case FILE:
                url.scheme = "file";
                if (char == "/" || char == "\\")
                  state = FILE_SLASH;
                else if (base2 && base2.scheme == "file") {
                  if (char == EOF) {
                    url.host = base2.host;
                    url.path = base2.path.slice();
                    url.query = base2.query;
                  } else if (char == "?") {
                    url.host = base2.host;
                    url.path = base2.path.slice();
                    url.query = "";
                    state = QUERY;
                  } else if (char == "#") {
                    url.host = base2.host;
                    url.path = base2.path.slice();
                    url.query = base2.query;
                    url.fragment = "";
                    state = FRAGMENT;
                  } else {
                    if (!startsWithWindowsDriveLetter(codePoints.slice(pointer).join(""))) {
                      url.host = base2.host;
                      url.path = base2.path.slice();
                      shortenURLsPath(url);
                    }
                    state = PATH;
                    continue;
                  }
                } else {
                  state = PATH;
                  continue;
                }
                break;
              case FILE_SLASH:
                if (char == "/" || char == "\\") {
                  state = FILE_HOST;
                  break;
                }
                if (base2 && base2.scheme == "file" && !startsWithWindowsDriveLetter(codePoints.slice(pointer).join(""))) {
                  if (isWindowsDriveLetter(base2.path[0], true))
                    url.path.push(base2.path[0]);
                  else
                    url.host = base2.host;
                }
                state = PATH;
                continue;
              case FILE_HOST:
                if (char == EOF || char == "/" || char == "\\" || char == "?" || char == "#") {
                  if (!stateOverride && isWindowsDriveLetter(buffer)) {
                    state = PATH;
                  } else if (buffer == "") {
                    url.host = "";
                    if (stateOverride)
                      return;
                    state = PATH_START;
                  } else {
                    failure = parseHost(url, buffer);
                    if (failure)
                      return failure;
                    if (url.host == "localhost")
                      url.host = "";
                    if (stateOverride)
                      return;
                    buffer = "";
                    state = PATH_START;
                  }
                  continue;
                } else
                  buffer += char;
                break;
              case PATH_START:
                if (isSpecial(url)) {
                  state = PATH;
                  if (char != "/" && char != "\\")
                    continue;
                } else if (!stateOverride && char == "?") {
                  url.query = "";
                  state = QUERY;
                } else if (!stateOverride && char == "#") {
                  url.fragment = "";
                  state = FRAGMENT;
                } else if (char != EOF) {
                  state = PATH;
                  if (char != "/")
                    continue;
                }
                break;
              case PATH:
                if (char == EOF || char == "/" || char == "\\" && isSpecial(url) || !stateOverride && (char == "?" || char == "#")) {
                  if (isDoubleDot(buffer)) {
                    shortenURLsPath(url);
                    if (char != "/" && !(char == "\\" && isSpecial(url))) {
                      url.path.push("");
                    }
                  } else if (isSingleDot(buffer)) {
                    if (char != "/" && !(char == "\\" && isSpecial(url))) {
                      url.path.push("");
                    }
                  } else {
                    if (url.scheme == "file" && !url.path.length && isWindowsDriveLetter(buffer)) {
                      if (url.host)
                        url.host = "";
                      buffer = buffer.charAt(0) + ":";
                    }
                    url.path.push(buffer);
                  }
                  buffer = "";
                  if (url.scheme == "file" && (char == EOF || char == "?" || char == "#")) {
                    while (url.path.length > 1 && url.path[0] === "") {
                      url.path.shift();
                    }
                  }
                  if (char == "?") {
                    url.query = "";
                    state = QUERY;
                  } else if (char == "#") {
                    url.fragment = "";
                    state = FRAGMENT;
                  }
                } else {
                  buffer += percentEncode(char, pathPercentEncodeSet);
                }
                break;
              case CANNOT_BE_A_BASE_URL_PATH:
                if (char == "?") {
                  url.query = "";
                  state = QUERY;
                } else if (char == "#") {
                  url.fragment = "";
                  state = FRAGMENT;
                } else if (char != EOF) {
                  url.path[0] += percentEncode(char, C0ControlPercentEncodeSet);
                }
                break;
              case QUERY:
                if (!stateOverride && char == "#") {
                  url.fragment = "";
                  state = FRAGMENT;
                } else if (char != EOF) {
                  if (char == "'" && isSpecial(url))
                    url.query += "%27";
                  else if (char == "#")
                    url.query += "%23";
                  else
                    url.query += percentEncode(char, C0ControlPercentEncodeSet);
                }
                break;
              case FRAGMENT:
                if (char != EOF)
                  url.fragment += percentEncode(char, fragmentPercentEncodeSet);
                break;
            }
            pointer++;
          }
        };
        var URLConstructor = function URL2(url) {
          var that = anInstance(this, URLConstructor, "URL");
          var base2 = arguments.length > 1 ? arguments[1] : void 0;
          var urlString = String(url);
          var state = setInternalState$4(that, { type: "URL" });
          var baseState, failure;
          if (base2 !== void 0) {
            if (base2 instanceof URLConstructor)
              baseState = getInternalURLState(base2);
            else {
              failure = parseURL(baseState = {}, String(base2));
              if (failure)
                throw TypeError(failure);
            }
          }
          failure = parseURL(state, urlString, null, baseState);
          if (failure)
            throw TypeError(failure);
          var searchParams = state.searchParams = new URLSearchParams$1();
          var searchParamsState = getInternalSearchParamsState(searchParams);
          searchParamsState.updateSearchParams(state.query);
          searchParamsState.updateURL = function() {
            state.query = String(searchParams) || null;
          };
          if (!descriptors) {
            that.href = serializeURL.call(that);
            that.origin = getOrigin.call(that);
            that.protocol = getProtocol.call(that);
            that.username = getUsername.call(that);
            that.password = getPassword.call(that);
            that.host = getHost.call(that);
            that.hostname = getHostname.call(that);
            that.port = getPort.call(that);
            that.pathname = getPathname.call(that);
            that.search = getSearch.call(that);
            that.searchParams = getSearchParams.call(that);
            that.hash = getHash.call(that);
          }
        };
        var URLPrototype = URLConstructor.prototype;
        var serializeURL = function() {
          var url = getInternalURLState(this);
          var scheme = url.scheme;
          var username = url.username;
          var password = url.password;
          var host = url.host;
          var port3 = url.port;
          var path2 = url.path;
          var query = url.query;
          var fragment = url.fragment;
          var output = scheme + ":";
          if (host !== null) {
            output += "//";
            if (includesCredentials(url)) {
              output += username + (password ? ":" + password : "") + "@";
            }
            output += serializeHost(host);
            if (port3 !== null)
              output += ":" + port3;
          } else if (scheme == "file")
            output += "//";
          output += url.cannotBeABaseURL ? path2[0] : path2.length ? "/" + path2.join("/") : "";
          if (query !== null)
            output += "?" + query;
          if (fragment !== null)
            output += "#" + fragment;
          return output;
        };
        var getOrigin = function() {
          var url = getInternalURLState(this);
          var scheme = url.scheme;
          var port3 = url.port;
          if (scheme == "blob")
            try {
              return new URL(scheme.path[0]).origin;
            } catch (error) {
              return "null";
            }
          if (scheme == "file" || !isSpecial(url))
            return "null";
          return scheme + "://" + serializeHost(url.host) + (port3 !== null ? ":" + port3 : "");
        };
        var getProtocol = function() {
          return getInternalURLState(this).scheme + ":";
        };
        var getUsername = function() {
          return getInternalURLState(this).username;
        };
        var getPassword = function() {
          return getInternalURLState(this).password;
        };
        var getHost = function() {
          var url = getInternalURLState(this);
          var host = url.host;
          var port3 = url.port;
          return host === null ? "" : port3 === null ? serializeHost(host) : serializeHost(host) + ":" + port3;
        };
        var getHostname = function() {
          var host = getInternalURLState(this).host;
          return host === null ? "" : serializeHost(host);
        };
        var getPort = function() {
          var port3 = getInternalURLState(this).port;
          return port3 === null ? "" : String(port3);
        };
        var getPathname = function() {
          var url = getInternalURLState(this);
          var path2 = url.path;
          return url.cannotBeABaseURL ? path2[0] : path2.length ? "/" + path2.join("/") : "";
        };
        var getSearch = function() {
          var query = getInternalURLState(this).query;
          return query ? "?" + query : "";
        };
        var getSearchParams = function() {
          return getInternalURLState(this).searchParams;
        };
        var getHash = function() {
          var fragment = getInternalURLState(this).fragment;
          return fragment ? "#" + fragment : "";
        };
        var accessorDescriptor = function(getter, setter) {
          return { get: getter, set: setter, configurable: true, enumerable: true };
        };
        if (descriptors) {
          objectDefineProperties(URLPrototype, {
            href: accessorDescriptor(serializeURL, function(href) {
              var url = getInternalURLState(this);
              var urlString = String(href);
              var failure = parseURL(url, urlString);
              if (failure)
                throw TypeError(failure);
              getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);
            }),
            origin: accessorDescriptor(getOrigin),
            protocol: accessorDescriptor(getProtocol, function(protocol) {
              var url = getInternalURLState(this);
              parseURL(url, String(protocol) + ":", SCHEME_START);
            }),
            username: accessorDescriptor(getUsername, function(username) {
              var url = getInternalURLState(this);
              var codePoints = arrayFrom(String(username));
              if (cannotHaveUsernamePasswordPort(url))
                return;
              url.username = "";
              for (var i2 = 0; i2 < codePoints.length; i2++) {
                url.username += percentEncode(codePoints[i2], userinfoPercentEncodeSet);
              }
            }),
            password: accessorDescriptor(getPassword, function(password) {
              var url = getInternalURLState(this);
              var codePoints = arrayFrom(String(password));
              if (cannotHaveUsernamePasswordPort(url))
                return;
              url.password = "";
              for (var i2 = 0; i2 < codePoints.length; i2++) {
                url.password += percentEncode(codePoints[i2], userinfoPercentEncodeSet);
              }
            }),
            host: accessorDescriptor(getHost, function(host) {
              var url = getInternalURLState(this);
              if (url.cannotBeABaseURL)
                return;
              parseURL(url, String(host), HOST);
            }),
            hostname: accessorDescriptor(getHostname, function(hostname) {
              var url = getInternalURLState(this);
              if (url.cannotBeABaseURL)
                return;
              parseURL(url, String(hostname), HOSTNAME);
            }),
            port: accessorDescriptor(getPort, function(port3) {
              var url = getInternalURLState(this);
              if (cannotHaveUsernamePasswordPort(url))
                return;
              port3 = String(port3);
              if (port3 == "")
                url.port = null;
              else
                parseURL(url, port3, PORT);
            }),
            pathname: accessorDescriptor(getPathname, function(pathname) {
              var url = getInternalURLState(this);
              if (url.cannotBeABaseURL)
                return;
              url.path = [];
              parseURL(url, pathname + "", PATH_START);
            }),
            search: accessorDescriptor(getSearch, function(search) {
              var url = getInternalURLState(this);
              search = String(search);
              if (search == "") {
                url.query = null;
              } else {
                if (search.charAt(0) == "?")
                  search = search.slice(1);
                url.query = "";
                parseURL(url, search, QUERY);
              }
              getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);
            }),
            searchParams: accessorDescriptor(getSearchParams),
            hash: accessorDescriptor(getHash, function(hash) {
              var url = getInternalURLState(this);
              hash = String(hash);
              if (hash == "") {
                url.fragment = null;
                return;
              }
              if (hash.charAt(0) == "#")
                hash = hash.slice(1);
              url.fragment = "";
              parseURL(url, hash, FRAGMENT);
            })
          });
        }
        redefine(URLPrototype, "toJSON", function toJSON() {
          return serializeURL.call(this);
        }, { enumerable: true });
        redefine(URLPrototype, "toString", function toString2() {
          return serializeURL.call(this);
        }, { enumerable: true });
        if (NativeURL) {
          var nativeCreateObjectURL = NativeURL.createObjectURL;
          var nativeRevokeObjectURL = NativeURL.revokeObjectURL;
          if (nativeCreateObjectURL)
            redefine(URLConstructor, "createObjectURL", function createObjectURL(blob) {
              return nativeCreateObjectURL.apply(NativeURL, arguments);
            });
          if (nativeRevokeObjectURL)
            redefine(URLConstructor, "revokeObjectURL", function revokeObjectURL(url) {
              return nativeRevokeObjectURL.apply(NativeURL, arguments);
            });
        }
        setToStringTag(URLConstructor, "URL");
        _export({ global: true, forced: !nativeUrl, sham: !descriptors }, {
          URL: URLConstructor
        });
        function _typeof(obj) {
          "@babel/helpers - typeof";
          if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
            _typeof = function(obj2) {
              return typeof obj2;
            };
          } else {
            _typeof = function(obj2) {
              return obj2 && typeof Symbol === "function" && obj2.constructor === Symbol && obj2 !== Symbol.prototype ? "symbol" : typeof obj2;
            };
          }
          return _typeof(obj);
        }
        function _classCallCheck(instance, Constructor) {
          if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
          }
        }
        function _defineProperties(target, props) {
          for (var i2 = 0; i2 < props.length; i2++) {
            var descriptor = props[i2];
            descriptor.enumerable = descriptor.enumerable || false;
            descriptor.configurable = true;
            if ("value" in descriptor)
              descriptor.writable = true;
            Object.defineProperty(target, descriptor.key, descriptor);
          }
        }
        function _createClass(Constructor, protoProps, staticProps) {
          if (protoProps)
            _defineProperties(Constructor.prototype, protoProps);
          if (staticProps)
            _defineProperties(Constructor, staticProps);
          return Constructor;
        }
        function _defineProperty(obj, key3, value) {
          if (key3 in obj) {
            Object.defineProperty(obj, key3, {
              value,
              enumerable: true,
              configurable: true,
              writable: true
            });
          } else {
            obj[key3] = value;
          }
          return obj;
        }
        function ownKeys$1(object, enumerableOnly) {
          var keys2 = Object.keys(object);
          if (Object.getOwnPropertySymbols) {
            var symbols = Object.getOwnPropertySymbols(object);
            if (enumerableOnly)
              symbols = symbols.filter(function(sym) {
                return Object.getOwnPropertyDescriptor(object, sym).enumerable;
              });
            keys2.push.apply(keys2, symbols);
          }
          return keys2;
        }
        function _objectSpread2(target) {
          for (var i2 = 1; i2 < arguments.length; i2++) {
            var source2 = arguments[i2] != null ? arguments[i2] : {};
            if (i2 % 2) {
              ownKeys$1(Object(source2), true).forEach(function(key3) {
                _defineProperty(target, key3, source2[key3]);
              });
            } else if (Object.getOwnPropertyDescriptors) {
              Object.defineProperties(target, Object.getOwnPropertyDescriptors(source2));
            } else {
              ownKeys$1(Object(source2)).forEach(function(key3) {
                Object.defineProperty(target, key3, Object.getOwnPropertyDescriptor(source2, key3));
              });
            }
          }
          return target;
        }
        function _objectWithoutPropertiesLoose(source2, excluded) {
          if (source2 == null)
            return {};
          var target = {};
          var sourceKeys = Object.keys(source2);
          var key3, i2;
          for (i2 = 0; i2 < sourceKeys.length; i2++) {
            key3 = sourceKeys[i2];
            if (excluded.indexOf(key3) >= 0)
              continue;
            target[key3] = source2[key3];
          }
          return target;
        }
        function _objectWithoutProperties(source2, excluded) {
          if (source2 == null)
            return {};
          var target = _objectWithoutPropertiesLoose(source2, excluded);
          var key3, i2;
          if (Object.getOwnPropertySymbols) {
            var sourceSymbolKeys = Object.getOwnPropertySymbols(source2);
            for (i2 = 0; i2 < sourceSymbolKeys.length; i2++) {
              key3 = sourceSymbolKeys[i2];
              if (excluded.indexOf(key3) >= 0)
                continue;
              if (!Object.prototype.propertyIsEnumerable.call(source2, key3))
                continue;
              target[key3] = source2[key3];
            }
          }
          return target;
        }
        function _slicedToArray(arr, i2) {
          return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i2) || _unsupportedIterableToArray(arr, i2) || _nonIterableRest();
        }
        function _toConsumableArray(arr) {
          return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
        }
        function _arrayWithoutHoles(arr) {
          if (Array.isArray(arr))
            return _arrayLikeToArray(arr);
        }
        function _arrayWithHoles(arr) {
          if (Array.isArray(arr))
            return arr;
        }
        function _iterableToArray(iter) {
          if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter))
            return Array.from(iter);
        }
        function _iterableToArrayLimit(arr, i2) {
          if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr)))
            return;
          var _arr = [];
          var _n = true;
          var _d = false;
          var _e = void 0;
          try {
            for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
              _arr.push(_s.value);
              if (i2 && _arr.length === i2)
                break;
            }
          } catch (err) {
            _d = true;
            _e = err;
          } finally {
            try {
              if (!_n && _i["return"] != null)
                _i["return"]();
            } finally {
              if (_d)
                throw _e;
            }
          }
          return _arr;
        }
        function _unsupportedIterableToArray(o2, minLen) {
          if (!o2)
            return;
          if (typeof o2 === "string")
            return _arrayLikeToArray(o2, minLen);
          var n2 = Object.prototype.toString.call(o2).slice(8, -1);
          if (n2 === "Object" && o2.constructor)
            n2 = o2.constructor.name;
          if (n2 === "Map" || n2 === "Set")
            return Array.from(o2);
          if (n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2))
            return _arrayLikeToArray(o2, minLen);
        }
        function _arrayLikeToArray(arr, len) {
          if (len == null || len > arr.length)
            len = arr.length;
          for (var i2 = 0, arr2 = new Array(len); i2 < len; i2++)
            arr2[i2] = arr[i2];
          return arr2;
        }
        function _nonIterableSpread() {
          throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        function _nonIterableRest() {
          throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
        }
        (function(global2) {
          var checkIfIteratorIsSupported = function checkIfIteratorIsSupported2() {
            try {
              return !!Symbol.iterator;
            } catch (error) {
              return false;
            }
          };
          var iteratorSupported = checkIfIteratorIsSupported();
          var createIterator = function createIterator2(items) {
            var iterator = {
              next: function next() {
                var value = items.shift();
                return {
                  done: value === void 0,
                  value
                };
              }
            };
            if (iteratorSupported) {
              iterator[Symbol.iterator] = function() {
                return iterator;
              };
            }
            return iterator;
          };
          var serializeParam = function serializeParam2(value) {
            return encodeURIComponent(value).replace(/%20/g, "+");
          };
          var deserializeParam = function deserializeParam2(value) {
            return decodeURIComponent(String(value).replace(/\+/g, " "));
          };
          var polyfillURLSearchParams = function polyfillURLSearchParams2() {
            var URLSearchParams2 = function URLSearchParams3(searchString) {
              Object.defineProperty(this, "_entries", {
                writable: true,
                value: {}
              });
              var typeofSearchString = _typeof(searchString);
              if (typeofSearchString === "undefined")
                ;
              else if (typeofSearchString === "string") {
                if (searchString !== "") {
                  this._fromString(searchString);
                }
              } else if (searchString instanceof URLSearchParams3) {
                var _this = this;
                searchString.forEach(function(value, name2) {
                  _this.append(name2, value);
                });
              } else if (searchString !== null && typeofSearchString === "object") {
                if (Object.prototype.toString.call(searchString) === "[object Array]") {
                  for (var i2 = 0; i2 < searchString.length; i2++) {
                    var entry = searchString[i2];
                    if (Object.prototype.toString.call(entry) === "[object Array]" || entry.length !== 2) {
                      this.append(entry[0], entry[1]);
                    } else {
                      throw new TypeError("Expected [string, any] as entry at index " + i2 + " of URLSearchParams's input");
                    }
                  }
                } else {
                  for (var key3 in searchString) {
                    if (searchString.hasOwnProperty(key3)) {
                      this.append(key3, searchString[key3]);
                    }
                  }
                }
              } else {
                throw new TypeError("Unsupported input's type for URLSearchParams");
              }
            };
            var proto2 = URLSearchParams2.prototype;
            proto2.append = function(name2, value) {
              if (name2 in this._entries) {
                this._entries[name2].push(String(value));
              } else {
                this._entries[name2] = [String(value)];
              }
            };
            proto2.delete = function(name2) {
              delete this._entries[name2];
            };
            proto2.get = function(name2) {
              return name2 in this._entries ? this._entries[name2][0] : null;
            };
            proto2.getAll = function(name2) {
              return name2 in this._entries ? this._entries[name2].slice(0) : [];
            };
            proto2.has = function(name2) {
              return name2 in this._entries;
            };
            proto2.set = function(name2, value) {
              this._entries[name2] = [String(value)];
            };
            proto2.forEach = function(callback, thisArg) {
              var entries;
              for (var name2 in this._entries) {
                if (this._entries.hasOwnProperty(name2)) {
                  entries = this._entries[name2];
                  for (var i2 = 0; i2 < entries.length; i2++) {
                    callback.call(thisArg, entries[i2], name2, this);
                  }
                }
              }
            };
            proto2.keys = function() {
              var items = [];
              this.forEach(function(value, name2) {
                items.push(name2);
              });
              return createIterator(items);
            };
            proto2.values = function() {
              var items = [];
              this.forEach(function(value) {
                items.push(value);
              });
              return createIterator(items);
            };
            proto2.entries = function() {
              var items = [];
              this.forEach(function(value, name2) {
                items.push([name2, value]);
              });
              return createIterator(items);
            };
            if (iteratorSupported) {
              proto2[Symbol.iterator] = proto2.entries;
            }
            proto2.toString = function() {
              var searchArray = [];
              this.forEach(function(value, name2) {
                searchArray.push(serializeParam(name2) + "=" + serializeParam(value));
              });
              return searchArray.join("&");
            };
            global2.URLSearchParams = URLSearchParams2;
          };
          var checkIfURLSearchParamsSupported = function checkIfURLSearchParamsSupported2() {
            try {
              var URLSearchParams2 = global2.URLSearchParams;
              return new URLSearchParams2("?a=1").toString() === "a=1" && typeof URLSearchParams2.prototype.set === "function";
            } catch (e2) {
              return false;
            }
          };
          if (!checkIfURLSearchParamsSupported()) {
            polyfillURLSearchParams();
          }
          var proto = global2.URLSearchParams.prototype;
          if (typeof proto.sort !== "function") {
            proto.sort = function() {
              var _this = this;
              var items = [];
              this.forEach(function(value, name2) {
                items.push([name2, value]);
                if (!_this._entries) {
                  _this.delete(name2);
                }
              });
              items.sort(function(a2, b2) {
                if (a2[0] < b2[0]) {
                  return -1;
                } else if (a2[0] > b2[0]) {
                  return 1;
                } else {
                  return 0;
                }
              });
              if (_this._entries) {
                _this._entries = {};
              }
              for (var i2 = 0; i2 < items.length; i2++) {
                this.append(items[i2][0], items[i2][1]);
              }
            };
          }
          if (typeof proto._fromString !== "function") {
            Object.defineProperty(proto, "_fromString", {
              enumerable: false,
              configurable: false,
              writable: false,
              value: function value(searchString) {
                if (this._entries) {
                  this._entries = {};
                } else {
                  var keys2 = [];
                  this.forEach(function(value2, name2) {
                    keys2.push(name2);
                  });
                  for (var i2 = 0; i2 < keys2.length; i2++) {
                    this.delete(keys2[i2]);
                  }
                }
                searchString = searchString.replace(/^\?/, "");
                var attributes = searchString.split("&");
                var attribute;
                for (var i2 = 0; i2 < attributes.length; i2++) {
                  attribute = attributes[i2].split("=");
                  this.append(deserializeParam(attribute[0]), attribute.length > 1 ? deserializeParam(attribute[1]) : "");
                }
              }
            });
          }
        })(typeof commonjsGlobal !== "undefined" ? commonjsGlobal : typeof window !== "undefined" ? window : typeof self !== "undefined" ? self : commonjsGlobal);
        (function(global2) {
          var checkIfURLIsSupported = function checkIfURLIsSupported2() {
            try {
              var u2 = new global2.URL("b", "http://a");
              u2.pathname = "c d";
              return u2.href === "http://a/c%20d" && u2.searchParams;
            } catch (e2) {
              return false;
            }
          };
          var polyfillURL = function polyfillURL2() {
            var _URL = global2.URL;
            var URL2 = function URL3(url, base2) {
              if (typeof url !== "string")
                url = String(url);
              var doc2 = document, baseElement;
              if (base2 && (global2.location === void 0 || base2 !== global2.location.href)) {
                doc2 = document.implementation.createHTMLDocument("");
                baseElement = doc2.createElement("base");
                baseElement.href = base2;
                doc2.head.appendChild(baseElement);
                try {
                  if (baseElement.href.indexOf(base2) !== 0)
                    throw new Error(baseElement.href);
                } catch (err) {
                  throw new Error("URL unable to set base " + base2 + " due to " + err);
                }
              }
              var anchorElement = doc2.createElement("a");
              anchorElement.href = url;
              if (baseElement) {
                doc2.body.appendChild(anchorElement);
                anchorElement.href = anchorElement.href;
              }
              if (anchorElement.protocol === ":" || !/:/.test(anchorElement.href)) {
                throw new TypeError("Invalid URL");
              }
              Object.defineProperty(this, "_anchorElement", {
                value: anchorElement
              });
              var searchParams = new global2.URLSearchParams(this.search);
              var enableSearchUpdate = true;
              var enableSearchParamsUpdate = true;
              var _this = this;
              ["append", "delete", "set"].forEach(function(methodName) {
                var method = searchParams[methodName];
                searchParams[methodName] = function() {
                  method.apply(searchParams, arguments);
                  if (enableSearchUpdate) {
                    enableSearchParamsUpdate = false;
                    _this.search = searchParams.toString();
                    enableSearchParamsUpdate = true;
                  }
                };
              });
              Object.defineProperty(this, "searchParams", {
                value: searchParams,
                enumerable: true
              });
              var search = void 0;
              Object.defineProperty(this, "_updateSearchParams", {
                enumerable: false,
                configurable: false,
                writable: false,
                value: function value() {
                  if (this.search !== search) {
                    search = this.search;
                    if (enableSearchParamsUpdate) {
                      enableSearchUpdate = false;
                      this.searchParams._fromString(this.search);
                      enableSearchUpdate = true;
                    }
                  }
                }
              });
            };
            var proto = URL2.prototype;
            var linkURLWithAnchorAttribute = function linkURLWithAnchorAttribute2(attributeName) {
              Object.defineProperty(proto, attributeName, {
                get: function get2() {
                  return this._anchorElement[attributeName];
                },
                set: function set2(value) {
                  this._anchorElement[attributeName] = value;
                },
                enumerable: true
              });
            };
            ["hash", "host", "hostname", "port", "protocol"].forEach(function(attributeName) {
              linkURLWithAnchorAttribute(attributeName);
            });
            Object.defineProperty(proto, "search", {
              get: function get2() {
                return this._anchorElement["search"];
              },
              set: function set2(value) {
                this._anchorElement["search"] = value;
                this._updateSearchParams();
              },
              enumerable: true
            });
            Object.defineProperties(proto, {
              "toString": {
                get: function get2() {
                  var _this = this;
                  return function() {
                    return _this.href;
                  };
                }
              },
              "href": {
                get: function get2() {
                  return this._anchorElement.href.replace(/\?$/, "");
                },
                set: function set2(value) {
                  this._anchorElement.href = value;
                  this._updateSearchParams();
                },
                enumerable: true
              },
              "pathname": {
                get: function get2() {
                  return this._anchorElement.pathname.replace(/(^\/?)/, "/");
                },
                set: function set2(value) {
                  this._anchorElement.pathname = value;
                },
                enumerable: true
              },
              "origin": {
                get: function get2() {
                  var expectedPort = {
                    "http:": 80,
                    "https:": 443,
                    "ftp:": 21
                  }[this._anchorElement.protocol];
                  var addPortToOrigin = this._anchorElement.port != expectedPort && this._anchorElement.port !== "";
                  return this._anchorElement.protocol + "//" + this._anchorElement.hostname + (addPortToOrigin ? ":" + this._anchorElement.port : "");
                },
                enumerable: true
              },
              "password": {
                get: function get2() {
                  return "";
                },
                set: function set2(value) {
                },
                enumerable: true
              },
              "username": {
                get: function get2() {
                  return "";
                },
                set: function set2(value) {
                },
                enumerable: true
              }
            });
            URL2.createObjectURL = function(blob) {
              return _URL.createObjectURL.apply(_URL, arguments);
            };
            URL2.revokeObjectURL = function(url) {
              return _URL.revokeObjectURL.apply(_URL, arguments);
            };
            global2.URL = URL2;
          };
          if (!checkIfURLIsSupported()) {
            polyfillURL();
          }
          if (global2.location !== void 0 && !("origin" in global2.location)) {
            var getOrigin2 = function getOrigin3() {
              return global2.location.protocol + "//" + global2.location.hostname + (global2.location.port ? ":" + global2.location.port : "");
            };
            try {
              Object.defineProperty(global2.location, "origin", {
                get: getOrigin2,
                enumerable: true
              });
            } catch (e2) {
              setInterval(function() {
                global2.location.origin = getOrigin2();
              }, 100);
            }
          }
        })(typeof commonjsGlobal !== "undefined" ? commonjsGlobal : typeof window !== "undefined" ? window : typeof self !== "undefined" ? self : commonjsGlobal);
        var IS_CONCAT_SPREADABLE = wellKnownSymbol("isConcatSpreadable");
        var MAX_SAFE_INTEGER = 9007199254740991;
        var MAXIMUM_ALLOWED_INDEX_EXCEEDED = "Maximum allowed index exceeded";
        var IS_CONCAT_SPREADABLE_SUPPORT = engineV8Version >= 51 || !fails(function() {
          var array = [];
          array[IS_CONCAT_SPREADABLE] = false;
          return array.concat()[0] !== array;
        });
        var SPECIES_SUPPORT = arrayMethodHasSpeciesSupport("concat");
        var isConcatSpreadable = function(O2) {
          if (!isObject(O2))
            return false;
          var spreadable = O2[IS_CONCAT_SPREADABLE];
          return spreadable !== void 0 ? !!spreadable : isArray(O2);
        };
        var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;
        _export({ target: "Array", proto: true, forced: FORCED }, {
          concat: function concat(arg) {
            var O2 = toObject(this);
            var A2 = arraySpeciesCreate(O2, 0);
            var n2 = 0;
            var i2, k2, length, len, E2;
            for (i2 = -1, length = arguments.length; i2 < length; i2++) {
              E2 = i2 === -1 ? O2 : arguments[i2];
              if (isConcatSpreadable(E2)) {
                len = toLength(E2.length);
                if (n2 + len > MAX_SAFE_INTEGER)
                  throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);
                for (k2 = 0; k2 < len; k2++, n2++)
                  if (k2 in E2)
                    createProperty(A2, n2, E2[k2]);
              } else {
                if (n2 >= MAX_SAFE_INTEGER)
                  throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);
                createProperty(A2, n2++, E2);
              }
            }
            A2.length = n2;
            return A2;
          }
        });
        var $filter = arrayIteration.filter;
        var HAS_SPECIES_SUPPORT$1 = arrayMethodHasSpeciesSupport("filter");
        var USES_TO_LENGTH$3 = arrayMethodUsesToLength("filter");
        _export({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT$1 || !USES_TO_LENGTH$3 }, {
          filter: function filter(callbackfn) {
            return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        var $find = arrayIteration.find;
        var FIND = "find";
        var SKIPS_HOLES = true;
        var USES_TO_LENGTH$4 = arrayMethodUsesToLength(FIND);
        if (FIND in [])
          Array(1)[FIND](function() {
            SKIPS_HOLES = false;
          });
        _export({ target: "Array", proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH$4 }, {
          find: function find2(callbackfn) {
            return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        addToUnscopables(FIND);
        var ITERATOR$7 = wellKnownSymbol("iterator");
        var SAFE_CLOSING = false;
        try {
          var called = 0;
          var iteratorWithReturn = {
            next: function() {
              return { done: !!called++ };
            },
            "return": function() {
              SAFE_CLOSING = true;
            }
          };
          iteratorWithReturn[ITERATOR$7] = function() {
            return this;
          };
          Array.from(iteratorWithReturn, function() {
            throw 2;
          });
        } catch (error) {
        }
        var checkCorrectnessOfIteration = function(exec, SKIP_CLOSING) {
          if (!SKIP_CLOSING && !SAFE_CLOSING)
            return false;
          var ITERATION_SUPPORT = false;
          try {
            var object = {};
            object[ITERATOR$7] = function() {
              return {
                next: function() {
                  return { done: ITERATION_SUPPORT = true };
                }
              };
            };
            exec(object);
          } catch (error) {
          }
          return ITERATION_SUPPORT;
        };
        var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function(iterable) {
          Array.from(iterable);
        });
        _export({ target: "Array", stat: true, forced: INCORRECT_ITERATION }, {
          from: arrayFrom
        });
        var $includes = arrayIncludes.includes;
        var USES_TO_LENGTH$5 = arrayMethodUsesToLength("indexOf", { ACCESSORS: true, 1: 0 });
        _export({ target: "Array", proto: true, forced: !USES_TO_LENGTH$5 }, {
          includes: function includes(el) {
            return $includes(this, el, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        addToUnscopables("includes");
        var $map = arrayIteration.map;
        var HAS_SPECIES_SUPPORT$2 = arrayMethodHasSpeciesSupport("map");
        var USES_TO_LENGTH$6 = arrayMethodUsesToLength("map");
        _export({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT$2 || !USES_TO_LENGTH$6 }, {
          map: function map(callbackfn) {
            return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        var inheritIfRequired = function($this, dummy, Wrapper) {
          var NewTarget, NewTargetPrototype;
          if (objectSetPrototypeOf && typeof (NewTarget = dummy.constructor) == "function" && NewTarget !== Wrapper && isObject(NewTargetPrototype = NewTarget.prototype) && NewTargetPrototype !== Wrapper.prototype)
            objectSetPrototypeOf($this, NewTargetPrototype);
          return $this;
        };
        var whitespaces = "	\n\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF";
        var whitespace = "[" + whitespaces + "]";
        var ltrim = RegExp("^" + whitespace + whitespace + "*");
        var rtrim = RegExp(whitespace + whitespace + "*$");
        var createMethod$3 = function(TYPE) {
          return function($this) {
            var string = String(requireObjectCoercible($this));
            if (TYPE & 1)
              string = string.replace(ltrim, "");
            if (TYPE & 2)
              string = string.replace(rtrim, "");
            return string;
          };
        };
        var stringTrim = {
          start: createMethod$3(1),
          end: createMethod$3(2),
          trim: createMethod$3(3)
        };
        var getOwnPropertyNames = objectGetOwnPropertyNames.f;
        var getOwnPropertyDescriptor$2 = objectGetOwnPropertyDescriptor.f;
        var defineProperty$5 = objectDefineProperty.f;
        var trim = stringTrim.trim;
        var NUMBER = "Number";
        var NativeNumber = global_1[NUMBER];
        var NumberPrototype = NativeNumber.prototype;
        var BROKEN_CLASSOF = classofRaw(objectCreate(NumberPrototype)) == NUMBER;
        var toNumber = function(argument) {
          var it2 = toPrimitive(argument, false);
          var first2, third, radix, maxCode, digits, length, index2, code;
          if (typeof it2 == "string" && it2.length > 2) {
            it2 = trim(it2);
            first2 = it2.charCodeAt(0);
            if (first2 === 43 || first2 === 45) {
              third = it2.charCodeAt(2);
              if (third === 88 || third === 120)
                return NaN;
            } else if (first2 === 48) {
              switch (it2.charCodeAt(1)) {
                case 66:
                case 98:
                  radix = 2;
                  maxCode = 49;
                  break;
                case 79:
                case 111:
                  radix = 8;
                  maxCode = 55;
                  break;
                default:
                  return +it2;
              }
              digits = it2.slice(2);
              length = digits.length;
              for (index2 = 0; index2 < length; index2++) {
                code = digits.charCodeAt(index2);
                if (code < 48 || code > maxCode)
                  return NaN;
              }
              return parseInt(digits, radix);
            }
          }
          return +it2;
        };
        if (isForced_1(NUMBER, !NativeNumber(" 0o1") || !NativeNumber("0b1") || NativeNumber("+0x1"))) {
          var NumberWrapper = function Number2(value) {
            var it2 = arguments.length < 1 ? 0 : value;
            var dummy = this;
            return dummy instanceof NumberWrapper && (BROKEN_CLASSOF ? fails(function() {
              NumberPrototype.valueOf.call(dummy);
            }) : classofRaw(dummy) != NUMBER) ? inheritIfRequired(new NativeNumber(toNumber(it2)), dummy, NumberWrapper) : toNumber(it2);
          };
          for (var keys$1 = descriptors ? getOwnPropertyNames(NativeNumber) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), j2 = 0, key2; keys$1.length > j2; j2++) {
            if (has(NativeNumber, key2 = keys$1[j2]) && !has(NumberWrapper, key2)) {
              defineProperty$5(NumberWrapper, key2, getOwnPropertyDescriptor$2(NativeNumber, key2));
            }
          }
          NumberWrapper.prototype = NumberPrototype;
          NumberPrototype.constructor = NumberWrapper;
          redefine(global_1, NUMBER, NumberWrapper);
        }
        var FAILS_ON_PRIMITIVES = fails(function() {
          objectKeys(1);
        });
        _export({ target: "Object", stat: true, forced: FAILS_ON_PRIMITIVES }, {
          keys: function keys2(it2) {
            return objectKeys(toObject(it2));
          }
        });
        var notARegexp = function(it2) {
          if (isRegexp(it2)) {
            throw TypeError("The method doesn't accept regular expressions");
          }
          return it2;
        };
        var MATCH$1 = wellKnownSymbol("match");
        var correctIsRegexpLogic = function(METHOD_NAME2) {
          var regexp2 = /./;
          try {
            "/./"[METHOD_NAME2](regexp2);
          } catch (e2) {
            try {
              regexp2[MATCH$1] = false;
              return "/./"[METHOD_NAME2](regexp2);
            } catch (f4) {
            }
          }
          return false;
        };
        _export({ target: "String", proto: true, forced: !correctIsRegexpLogic("includes") }, {
          includes: function includes(searchString) {
            return !!~String(requireObjectCoercible(this)).indexOf(notARegexp(searchString), arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        var freezing = !fails(function() {
          return Object.isExtensible(Object.preventExtensions({}));
        });
        var internalMetadata = createCommonjsModule(function(module3) {
          var defineProperty2 = objectDefineProperty.f;
          var METADATA = uid("meta");
          var id2 = 0;
          var isExtensible = Object.isExtensible || function() {
            return true;
          };
          var setMetadata = function(it2) {
            defineProperty2(it2, METADATA, { value: {
              objectID: "O" + ++id2,
              weakData: {}
            } });
          };
          var fastKey = function(it2, create) {
            if (!isObject(it2))
              return typeof it2 == "symbol" ? it2 : (typeof it2 == "string" ? "S" : "P") + it2;
            if (!has(it2, METADATA)) {
              if (!isExtensible(it2))
                return "F";
              if (!create)
                return "E";
              setMetadata(it2);
            }
            return it2[METADATA].objectID;
          };
          var getWeakData2 = function(it2, create) {
            if (!has(it2, METADATA)) {
              if (!isExtensible(it2))
                return true;
              if (!create)
                return false;
              setMetadata(it2);
            }
            return it2[METADATA].weakData;
          };
          var onFreeze = function(it2) {
            if (freezing && meta2.REQUIRED && isExtensible(it2) && !has(it2, METADATA))
              setMetadata(it2);
            return it2;
          };
          var meta2 = module3.exports = {
            REQUIRED: false,
            fastKey,
            getWeakData: getWeakData2,
            onFreeze
          };
          hiddenKeys[METADATA] = true;
        });
        var internalMetadata_1 = internalMetadata.REQUIRED;
        var internalMetadata_2 = internalMetadata.fastKey;
        var internalMetadata_3 = internalMetadata.getWeakData;
        var internalMetadata_4 = internalMetadata.onFreeze;
        var iterate_1 = createCommonjsModule(function(module3) {
          var Result = function(stopped, result) {
            this.stopped = stopped;
            this.result = result;
          };
          var iterate = module3.exports = function(iterable, fn, that, AS_ENTRIES, IS_ITERATOR) {
            var boundFunction = functionBindContext(fn, that, AS_ENTRIES ? 2 : 1);
            var iterator, iterFn, index2, length, result, next, step;
            if (IS_ITERATOR) {
              iterator = iterable;
            } else {
              iterFn = getIteratorMethod(iterable);
              if (typeof iterFn != "function")
                throw TypeError("Target is not iterable");
              if (isArrayIteratorMethod(iterFn)) {
                for (index2 = 0, length = toLength(iterable.length); length > index2; index2++) {
                  result = AS_ENTRIES ? boundFunction(anObject(step = iterable[index2])[0], step[1]) : boundFunction(iterable[index2]);
                  if (result && result instanceof Result)
                    return result;
                }
                return new Result(false);
              }
              iterator = iterFn.call(iterable);
            }
            next = iterator.next;
            while (!(step = next.call(iterator)).done) {
              result = callWithSafeIterationClosing(iterator, boundFunction, step.value, AS_ENTRIES);
              if (typeof result == "object" && result && result instanceof Result)
                return result;
            }
            return new Result(false);
          };
          iterate.stop = function(result) {
            return new Result(true, result);
          };
        });
        var collection = function(CONSTRUCTOR_NAME, wrapper, common) {
          var IS_MAP = CONSTRUCTOR_NAME.indexOf("Map") !== -1;
          var IS_WEAK = CONSTRUCTOR_NAME.indexOf("Weak") !== -1;
          var ADDER = IS_MAP ? "set" : "add";
          var NativeConstructor = global_1[CONSTRUCTOR_NAME];
          var NativePrototype = NativeConstructor && NativeConstructor.prototype;
          var Constructor = NativeConstructor;
          var exported = {};
          var fixMethod = function(KEY) {
            var nativeMethod = NativePrototype[KEY];
            redefine(NativePrototype, KEY, KEY == "add" ? function add(value) {
              nativeMethod.call(this, value === 0 ? 0 : value);
              return this;
            } : KEY == "delete" ? function(key3) {
              return IS_WEAK && !isObject(key3) ? false : nativeMethod.call(this, key3 === 0 ? 0 : key3);
            } : KEY == "get" ? function get2(key3) {
              return IS_WEAK && !isObject(key3) ? void 0 : nativeMethod.call(this, key3 === 0 ? 0 : key3);
            } : KEY == "has" ? function has2(key3) {
              return IS_WEAK && !isObject(key3) ? false : nativeMethod.call(this, key3 === 0 ? 0 : key3);
            } : function set2(key3, value) {
              nativeMethod.call(this, key3 === 0 ? 0 : key3, value);
              return this;
            });
          };
          if (isForced_1(CONSTRUCTOR_NAME, typeof NativeConstructor != "function" || !(IS_WEAK || NativePrototype.forEach && !fails(function() {
            new NativeConstructor().entries().next();
          })))) {
            Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);
            internalMetadata.REQUIRED = true;
          } else if (isForced_1(CONSTRUCTOR_NAME, true)) {
            var instance = new Constructor();
            var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;
            var THROWS_ON_PRIMITIVES = fails(function() {
              instance.has(1);
            });
            var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function(iterable) {
              new NativeConstructor(iterable);
            });
            var BUGGY_ZERO = !IS_WEAK && fails(function() {
              var $instance = new NativeConstructor();
              var index2 = 5;
              while (index2--)
                $instance[ADDER](index2, index2);
              return !$instance.has(-0);
            });
            if (!ACCEPT_ITERABLES) {
              Constructor = wrapper(function(dummy, iterable) {
                anInstance(dummy, Constructor, CONSTRUCTOR_NAME);
                var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);
                if (iterable != void 0)
                  iterate_1(iterable, that[ADDER], that, IS_MAP);
                return that;
              });
              Constructor.prototype = NativePrototype;
              NativePrototype.constructor = Constructor;
            }
            if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {
              fixMethod("delete");
              fixMethod("has");
              IS_MAP && fixMethod("get");
            }
            if (BUGGY_ZERO || HASNT_CHAINING)
              fixMethod(ADDER);
            if (IS_WEAK && NativePrototype.clear)
              delete NativePrototype.clear;
          }
          exported[CONSTRUCTOR_NAME] = Constructor;
          _export({ global: true, forced: Constructor != NativeConstructor }, exported);
          setToStringTag(Constructor, CONSTRUCTOR_NAME);
          if (!IS_WEAK)
            common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);
          return Constructor;
        };
        var getWeakData = internalMetadata.getWeakData;
        var setInternalState$5 = internalState.set;
        var internalStateGetterFor = internalState.getterFor;
        var find$1 = arrayIteration.find;
        var findIndex = arrayIteration.findIndex;
        var id$1 = 0;
        var uncaughtFrozenStore = function(store2) {
          return store2.frozen || (store2.frozen = new UncaughtFrozenStore());
        };
        var UncaughtFrozenStore = function() {
          this.entries = [];
        };
        var findUncaughtFrozen = function(store2, key3) {
          return find$1(store2.entries, function(it2) {
            return it2[0] === key3;
          });
        };
        UncaughtFrozenStore.prototype = {
          get: function(key3) {
            var entry = findUncaughtFrozen(this, key3);
            if (entry)
              return entry[1];
          },
          has: function(key3) {
            return !!findUncaughtFrozen(this, key3);
          },
          set: function(key3, value) {
            var entry = findUncaughtFrozen(this, key3);
            if (entry)
              entry[1] = value;
            else
              this.entries.push([key3, value]);
          },
          "delete": function(key3) {
            var index2 = findIndex(this.entries, function(it2) {
              return it2[0] === key3;
            });
            if (~index2)
              this.entries.splice(index2, 1);
            return !!~index2;
          }
        };
        var collectionWeak = {
          getConstructor: function(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {
            var C2 = wrapper(function(that, iterable) {
              anInstance(that, C2, CONSTRUCTOR_NAME);
              setInternalState$5(that, {
                type: CONSTRUCTOR_NAME,
                id: id$1++,
                frozen: void 0
              });
              if (iterable != void 0)
                iterate_1(iterable, that[ADDER], that, IS_MAP);
            });
            var getInternalState2 = internalStateGetterFor(CONSTRUCTOR_NAME);
            var define2 = function(that, key3, value) {
              var state = getInternalState2(that);
              var data2 = getWeakData(anObject(key3), true);
              if (data2 === true)
                uncaughtFrozenStore(state).set(key3, value);
              else
                data2[state.id] = value;
              return that;
            };
            redefineAll(C2.prototype, {
              "delete": function(key3) {
                var state = getInternalState2(this);
                if (!isObject(key3))
                  return false;
                var data2 = getWeakData(key3);
                if (data2 === true)
                  return uncaughtFrozenStore(state)["delete"](key3);
                return data2 && has(data2, state.id) && delete data2[state.id];
              },
              has: function has$12(key3) {
                var state = getInternalState2(this);
                if (!isObject(key3))
                  return false;
                var data2 = getWeakData(key3);
                if (data2 === true)
                  return uncaughtFrozenStore(state).has(key3);
                return data2 && has(data2, state.id);
              }
            });
            redefineAll(C2.prototype, IS_MAP ? {
              get: function get2(key3) {
                var state = getInternalState2(this);
                if (isObject(key3)) {
                  var data2 = getWeakData(key3);
                  if (data2 === true)
                    return uncaughtFrozenStore(state).get(key3);
                  return data2 ? data2[state.id] : void 0;
                }
              },
              set: function set2(key3, value) {
                return define2(this, key3, value);
              }
            } : {
              add: function add(value) {
                return define2(this, value, true);
              }
            });
            return C2;
          }
        };
        var es_weakMap = createCommonjsModule(function(module3) {
          var enforceIternalState = internalState.enforce;
          var IS_IE11 = !global_1.ActiveXObject && "ActiveXObject" in global_1;
          var isExtensible = Object.isExtensible;
          var InternalWeakMap;
          var wrapper = function(init) {
            return function WeakMap2() {
              return init(this, arguments.length ? arguments[0] : void 0);
            };
          };
          var $WeakMap = module3.exports = collection("WeakMap", wrapper, collectionWeak);
          if (nativeWeakMap && IS_IE11) {
            InternalWeakMap = collectionWeak.getConstructor(wrapper, "WeakMap", true);
            internalMetadata.REQUIRED = true;
            var WeakMapPrototype = $WeakMap.prototype;
            var nativeDelete = WeakMapPrototype["delete"];
            var nativeHas = WeakMapPrototype.has;
            var nativeGet = WeakMapPrototype.get;
            var nativeSet = WeakMapPrototype.set;
            redefineAll(WeakMapPrototype, {
              "delete": function(key3) {
                if (isObject(key3) && !isExtensible(key3)) {
                  var state = enforceIternalState(this);
                  if (!state.frozen)
                    state.frozen = new InternalWeakMap();
                  return nativeDelete.call(this, key3) || state.frozen["delete"](key3);
                }
                return nativeDelete.call(this, key3);
              },
              has: function has2(key3) {
                if (isObject(key3) && !isExtensible(key3)) {
                  var state = enforceIternalState(this);
                  if (!state.frozen)
                    state.frozen = new InternalWeakMap();
                  return nativeHas.call(this, key3) || state.frozen.has(key3);
                }
                return nativeHas.call(this, key3);
              },
              get: function get2(key3) {
                if (isObject(key3) && !isExtensible(key3)) {
                  var state = enforceIternalState(this);
                  if (!state.frozen)
                    state.frozen = new InternalWeakMap();
                  return nativeHas.call(this, key3) ? nativeGet.call(this, key3) : state.frozen.get(key3);
                }
                return nativeGet.call(this, key3);
              },
              set: function set2(key3, value) {
                if (isObject(key3) && !isExtensible(key3)) {
                  var state = enforceIternalState(this);
                  if (!state.frozen)
                    state.frozen = new InternalWeakMap();
                  nativeHas.call(this, key3) ? nativeSet.call(this, key3, value) : state.frozen.set(key3, value);
                } else
                  nativeSet.call(this, key3, value);
                return this;
              }
            });
          }
        });
        var $every = arrayIteration.every;
        var STRICT_METHOD$3 = arrayMethodIsStrict("every");
        var USES_TO_LENGTH$7 = arrayMethodUsesToLength("every");
        _export({ target: "Array", proto: true, forced: !STRICT_METHOD$3 || !USES_TO_LENGTH$7 }, {
          every: function every(callbackfn) {
            return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        _export({ target: "Object", stat: true, forced: Object.assign !== objectAssign }, {
          assign: objectAssign
        });
        var non = "\u200B\x85\u180E";
        var stringTrimForced = function(METHOD_NAME2) {
          return fails(function() {
            return !!whitespaces[METHOD_NAME2]() || non[METHOD_NAME2]() != non || whitespaces[METHOD_NAME2].name !== METHOD_NAME2;
          });
        };
        var $trim = stringTrim.trim;
        _export({ target: "String", proto: true, forced: stringTrimForced("trim") }, {
          trim: function trim2() {
            return $trim(this);
          }
        });
        var $some = arrayIteration.some;
        var STRICT_METHOD$4 = arrayMethodIsStrict("some");
        var USES_TO_LENGTH$8 = arrayMethodUsesToLength("some");
        _export({ target: "Array", proto: true, forced: !STRICT_METHOD$4 || !USES_TO_LENGTH$8 }, {
          some: function some(callbackfn) {
            return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        var thisNumberValue = function(value) {
          if (typeof value != "number" && classofRaw(value) != "Number") {
            throw TypeError("Incorrect invocation");
          }
          return +value;
        };
        var stringRepeat = "".repeat || function repeat(count) {
          var str = String(requireObjectCoercible(this));
          var result = "";
          var n2 = toInteger(count);
          if (n2 < 0 || n2 == Infinity)
            throw RangeError("Wrong number of repetitions");
          for (; n2 > 0; (n2 >>>= 1) && (str += str))
            if (n2 & 1)
              result += str;
          return result;
        };
        var nativeToFixed = 1 .toFixed;
        var floor$4 = Math.floor;
        var pow$1 = function(x2, n2, acc) {
          return n2 === 0 ? acc : n2 % 2 === 1 ? pow$1(x2, n2 - 1, acc * x2) : pow$1(x2 * x2, n2 / 2, acc);
        };
        var log = function(x2) {
          var n2 = 0;
          var x22 = x2;
          while (x22 >= 4096) {
            n2 += 12;
            x22 /= 4096;
          }
          while (x22 >= 2) {
            n2 += 1;
            x22 /= 2;
          }
          return n2;
        };
        var FORCED$1 = nativeToFixed && (8e-5 .toFixed(3) !== "0.000" || 0.9 .toFixed(0) !== "1" || 1.255 .toFixed(2) !== "1.25" || 1000000000000000100 .toFixed(0) !== "1000000000000000128") || !fails(function() {
          nativeToFixed.call({});
        });
        _export({ target: "Number", proto: true, forced: FORCED$1 }, {
          toFixed: function toFixed(fractionDigits) {
            var number = thisNumberValue(this);
            var fractDigits = toInteger(fractionDigits);
            var data2 = [0, 0, 0, 0, 0, 0];
            var sign = "";
            var result = "0";
            var e2, z2, j3, k2;
            var multiply = function(n2, c2) {
              var index2 = -1;
              var c22 = c2;
              while (++index2 < 6) {
                c22 += n2 * data2[index2];
                data2[index2] = c22 % 1e7;
                c22 = floor$4(c22 / 1e7);
              }
            };
            var divide = function(n2) {
              var index2 = 6;
              var c2 = 0;
              while (--index2 >= 0) {
                c2 += data2[index2];
                data2[index2] = floor$4(c2 / n2);
                c2 = c2 % n2 * 1e7;
              }
            };
            var dataToString = function() {
              var index2 = 6;
              var s2 = "";
              while (--index2 >= 0) {
                if (s2 !== "" || index2 === 0 || data2[index2] !== 0) {
                  var t3 = String(data2[index2]);
                  s2 = s2 === "" ? t3 : s2 + stringRepeat.call("0", 7 - t3.length) + t3;
                }
              }
              return s2;
            };
            if (fractDigits < 0 || fractDigits > 20)
              throw RangeError("Incorrect fraction digits");
            if (number != number)
              return "NaN";
            if (number <= -1e21 || number >= 1e21)
              return String(number);
            if (number < 0) {
              sign = "-";
              number = -number;
            }
            if (number > 1e-21) {
              e2 = log(number * pow$1(2, 69, 1)) - 69;
              z2 = e2 < 0 ? number * pow$1(2, -e2, 1) : number / pow$1(2, e2, 1);
              z2 *= 4503599627370496;
              e2 = 52 - e2;
              if (e2 > 0) {
                multiply(0, z2);
                j3 = fractDigits;
                while (j3 >= 7) {
                  multiply(1e7, 0);
                  j3 -= 7;
                }
                multiply(pow$1(10, j3, 1), 0);
                j3 = e2 - 1;
                while (j3 >= 23) {
                  divide(1 << 23);
                  j3 -= 23;
                }
                divide(1 << j3);
                multiply(1, 1);
                divide(2);
                result = dataToString();
              } else {
                multiply(0, z2);
                multiply(1 << -e2, 0);
                result = dataToString() + stringRepeat.call("0", fractDigits);
              }
            }
            if (fractDigits > 0) {
              k2 = result.length;
              result = sign + (k2 <= fractDigits ? "0." + stringRepeat.call("0", fractDigits - k2) + result : result.slice(0, k2 - fractDigits) + "." + result.slice(k2 - fractDigits));
            } else {
              result = sign + result;
            }
            return result;
          }
        });
        var propertyIsEnumerable = objectPropertyIsEnumerable.f;
        var createMethod$4 = function(TO_ENTRIES) {
          return function(it2) {
            var O2 = toIndexedObject(it2);
            var keys2 = objectKeys(O2);
            var length = keys2.length;
            var i2 = 0;
            var result = [];
            var key3;
            while (length > i2) {
              key3 = keys2[i2++];
              if (!descriptors || propertyIsEnumerable.call(O2, key3)) {
                result.push(TO_ENTRIES ? [key3, O2[key3]] : O2[key3]);
              }
            }
            return result;
          };
        };
        var objectToArray = {
          entries: createMethod$4(true),
          values: createMethod$4(false)
        };
        var $entries = objectToArray.entries;
        _export({ target: "Object", stat: true }, {
          entries: function entries(O2) {
            return $entries(O2);
          }
        });
        var $values = objectToArray.values;
        _export({ target: "Object", stat: true }, {
          values: function values(O2) {
            return $values(O2);
          }
        });
        _export({ target: "Number", stat: true }, {
          isNaN: function isNaN2(number) {
            return number != number;
          }
        });
        var nativeGetOwnPropertyDescriptor$2 = objectGetOwnPropertyDescriptor.f;
        var FAILS_ON_PRIMITIVES$1 = fails(function() {
          nativeGetOwnPropertyDescriptor$2(1);
        });
        var FORCED$2 = !descriptors || FAILS_ON_PRIMITIVES$1;
        _export({ target: "Object", stat: true, forced: FORCED$2, sham: !descriptors }, {
          getOwnPropertyDescriptor: function getOwnPropertyDescriptor2(it2, key3) {
            return nativeGetOwnPropertyDescriptor$2(toIndexedObject(it2), key3);
          }
        });
        _export({ target: "Object", stat: true, sham: !descriptors }, {
          getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
            var O2 = toIndexedObject(object);
            var getOwnPropertyDescriptor2 = objectGetOwnPropertyDescriptor.f;
            var keys2 = ownKeys(O2);
            var result = {};
            var index2 = 0;
            var key3, descriptor;
            while (keys2.length > index2) {
              descriptor = getOwnPropertyDescriptor2(O2, key3 = keys2[index2++]);
              if (descriptor !== void 0)
                createProperty(result, key3, descriptor);
            }
            return result;
          }
        });
        fixRegexpWellKnownSymbolLogic("match", 1, function(MATCH2, nativeMatch, maybeCallNative) {
          return [
            function match2(regexp2) {
              var O2 = requireObjectCoercible(this);
              var matcher = regexp2 == void 0 ? void 0 : regexp2[MATCH2];
              return matcher !== void 0 ? matcher.call(regexp2, O2) : new RegExp(regexp2)[MATCH2](String(O2));
            },
            function(regexp2) {
              var res = maybeCallNative(nativeMatch, regexp2, this);
              if (res.done)
                return res.value;
              var rx = anObject(regexp2);
              var S2 = String(this);
              if (!rx.global)
                return regexpExecAbstract(rx, S2);
              var fullUnicode = rx.unicode;
              rx.lastIndex = 0;
              var A2 = [];
              var n2 = 0;
              var result;
              while ((result = regexpExecAbstract(rx, S2)) !== null) {
                var matchStr = String(result[0]);
                A2[n2] = matchStr;
                if (matchStr === "")
                  rx.lastIndex = advanceStringIndex(S2, toLength(rx.lastIndex), fullUnicode);
                n2++;
              }
              return n2 === 0 ? null : A2;
            }
          ];
        });
        function _classCallCheck$1(e2, t3) {
          if (!(e2 instanceof t3))
            throw new TypeError("Cannot call a class as a function");
        }
        function _defineProperties$1(e2, t3) {
          for (var n2 = 0; n2 < t3.length; n2++) {
            var r2 = t3[n2];
            r2.enumerable = r2.enumerable || false, r2.configurable = true, "value" in r2 && (r2.writable = true), Object.defineProperty(e2, r2.key, r2);
          }
        }
        function _createClass$1(e2, t3, n2) {
          return t3 && _defineProperties$1(e2.prototype, t3), n2 && _defineProperties$1(e2, n2), e2;
        }
        function _defineProperty$1(e2, t3, n2) {
          return t3 in e2 ? Object.defineProperty(e2, t3, {
            value: n2,
            enumerable: true,
            configurable: true,
            writable: true
          }) : e2[t3] = n2, e2;
        }
        function ownKeys$2(e2, t3) {
          var n2 = Object.keys(e2);
          if (Object.getOwnPropertySymbols) {
            var r2 = Object.getOwnPropertySymbols(e2);
            t3 && (r2 = r2.filter(function(t4) {
              return Object.getOwnPropertyDescriptor(e2, t4).enumerable;
            })), n2.push.apply(n2, r2);
          }
          return n2;
        }
        function _objectSpread2$1(e2) {
          for (var t3 = 1; t3 < arguments.length; t3++) {
            var n2 = arguments[t3] != null ? arguments[t3] : {};
            t3 % 2 ? ownKeys$2(Object(n2), true).forEach(function(t4) {
              _defineProperty$1(e2, t4, n2[t4]);
            }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(n2)) : ownKeys$2(Object(n2)).forEach(function(t4) {
              Object.defineProperty(e2, t4, Object.getOwnPropertyDescriptor(n2, t4));
            });
          }
          return e2;
        }
        var defaults = {
          addCSS: true,
          thumbWidth: 15,
          watch: true
        };
        function matches(e2, t3) {
          return function() {
            return Array.from(document.querySelectorAll(t3)).includes(this);
          }.call(e2, t3);
        }
        function trigger(e2, t3) {
          if (e2 && t3) {
            var n2 = new Event(t3, {
              bubbles: true
            });
            e2.dispatchEvent(n2);
          }
        }
        var getConstructor = function getConstructor2(e2) {
          return e2 != null ? e2.constructor : null;
        }, instanceOf = function instanceOf2(e2, t3) {
          return !!(e2 && t3 && e2 instanceof t3);
        }, isNullOrUndefined = function isNullOrUndefined2(e2) {
          return e2 == null;
        }, isObject$1 = function isObject2(e2) {
          return getConstructor(e2) === Object;
        }, isNumber = function isNumber2(e2) {
          return getConstructor(e2) === Number && !Number.isNaN(e2);
        }, isString = function isString2(e2) {
          return getConstructor(e2) === String;
        }, isBoolean = function isBoolean2(e2) {
          return getConstructor(e2) === Boolean;
        }, isFunction = function isFunction2(e2) {
          return getConstructor(e2) === Function;
        }, isArray$1 = function isArray2(e2) {
          return Array.isArray(e2);
        }, isNodeList = function isNodeList2(e2) {
          return instanceOf(e2, NodeList);
        }, isElement = function isElement2(e2) {
          return instanceOf(e2, Element);
        }, isEvent = function isEvent2(e2) {
          return instanceOf(e2, Event);
        }, isEmpty = function isEmpty2(e2) {
          return isNullOrUndefined(e2) || (isString(e2) || isArray$1(e2) || isNodeList(e2)) && !e2.length || isObject$1(e2) && !Object.keys(e2).length;
        }, is = {
          nullOrUndefined: isNullOrUndefined,
          object: isObject$1,
          number: isNumber,
          string: isString,
          boolean: isBoolean,
          function: isFunction,
          array: isArray$1,
          nodeList: isNodeList,
          element: isElement,
          event: isEvent,
          empty: isEmpty
        };
        function getDecimalPlaces(e2) {
          var t3 = "".concat(e2).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
          return t3 ? Math.max(0, (t3[1] ? t3[1].length : 0) - (t3[2] ? +t3[2] : 0)) : 0;
        }
        function round(e2, t3) {
          if (1 > t3) {
            var n2 = getDecimalPlaces(t3);
            return parseFloat(e2.toFixed(n2));
          }
          return Math.round(e2 / t3) * t3;
        }
        var RangeTouch = function() {
          function e2(t3, n2) {
            _classCallCheck$1(this, e2), is.element(t3) ? this.element = t3 : is.string(t3) && (this.element = document.querySelector(t3)), is.element(this.element) && is.empty(this.element.rangeTouch) && (this.config = _objectSpread2$1({}, defaults, {}, n2), this.init());
          }
          return _createClass$1(e2, [{
            key: "init",
            value: function value() {
              e2.enabled && (this.config.addCSS && (this.element.style.userSelect = "none", this.element.style.webKitUserSelect = "none", this.element.style.touchAction = "manipulation"), this.listeners(true), this.element.rangeTouch = this);
            }
          }, {
            key: "destroy",
            value: function value() {
              e2.enabled && (this.config.addCSS && (this.element.style.userSelect = "", this.element.style.webKitUserSelect = "", this.element.style.touchAction = ""), this.listeners(false), this.element.rangeTouch = null);
            }
          }, {
            key: "listeners",
            value: function value(e3) {
              var t3 = this, n2 = e3 ? "addEventListener" : "removeEventListener";
              ["touchstart", "touchmove", "touchend"].forEach(function(e4) {
                t3.element[n2](e4, function(e5) {
                  return t3.set(e5);
                }, false);
              });
            }
          }, {
            key: "get",
            value: function value(t3) {
              if (!e2.enabled || !is.event(t3))
                return null;
              var n2, r2 = t3.target, i2 = t3.changedTouches[0], o2 = parseFloat(r2.getAttribute("min")) || 0, s2 = parseFloat(r2.getAttribute("max")) || 100, u2 = parseFloat(r2.getAttribute("step")) || 1, c2 = r2.getBoundingClientRect(), a2 = 100 / c2.width * (this.config.thumbWidth / 2) / 100;
              return 0 > (n2 = 100 / c2.width * (i2.clientX - c2.left)) ? n2 = 0 : 100 < n2 && (n2 = 100), 50 > n2 ? n2 -= (100 - 2 * n2) * a2 : 50 < n2 && (n2 += 2 * (n2 - 50) * a2), o2 + round(n2 / 100 * (s2 - o2), u2);
            }
          }, {
            key: "set",
            value: function value(t3) {
              e2.enabled && is.event(t3) && !t3.target.disabled && (t3.preventDefault(), t3.target.value = this.get(t3), trigger(t3.target, t3.type === "touchend" ? "change" : "input"));
            }
          }], [{
            key: "setup",
            value: function value(t3) {
              var n2 = 1 < arguments.length && arguments[1] !== void 0 ? arguments[1] : {}, r2 = null;
              if (is.empty(t3) || is.string(t3) ? r2 = Array.from(document.querySelectorAll(is.string(t3) ? t3 : 'input[type="range"]')) : is.element(t3) ? r2 = [t3] : is.nodeList(t3) ? r2 = Array.from(t3) : is.array(t3) && (r2 = t3.filter(is.element)), is.empty(r2))
                return null;
              var i2 = _objectSpread2$1({}, defaults, {}, n2);
              if (is.string(t3) && i2.watch) {
                var o2 = new MutationObserver(function(n3) {
                  Array.from(n3).forEach(function(n4) {
                    Array.from(n4.addedNodes).forEach(function(n5) {
                      is.element(n5) && matches(n5, t3) && new e2(n5, i2);
                    });
                  });
                });
                o2.observe(document.body, {
                  childList: true,
                  subtree: true
                });
              }
              return r2.map(function(t4) {
                return new e2(t4, n2);
              });
            }
          }, {
            key: "enabled",
            get: function get2() {
              return "ontouchstart" in document.documentElement;
            }
          }]), e2;
        }();
        var nativePromiseConstructor = global_1.Promise;
        var SPECIES$5 = wellKnownSymbol("species");
        var setSpecies = function(CONSTRUCTOR_NAME) {
          var Constructor = getBuiltIn(CONSTRUCTOR_NAME);
          var defineProperty2 = objectDefineProperty.f;
          if (descriptors && Constructor && !Constructor[SPECIES$5]) {
            defineProperty2(Constructor, SPECIES$5, {
              configurable: true,
              get: function() {
                return this;
              }
            });
          }
        };
        var engineIsIos = /(iphone|ipod|ipad).*applewebkit/i.test(engineUserAgent);
        var location2 = global_1.location;
        var set$1 = global_1.setImmediate;
        var clear = global_1.clearImmediate;
        var process$1 = global_1.process;
        var MessageChannel = global_1.MessageChannel;
        var Dispatch = global_1.Dispatch;
        var counter = 0;
        var queue = {};
        var ONREADYSTATECHANGE = "onreadystatechange";
        var defer, channel, port2;
        var run = function(id2) {
          if (queue.hasOwnProperty(id2)) {
            var fn = queue[id2];
            delete queue[id2];
            fn();
          }
        };
        var runner = function(id2) {
          return function() {
            run(id2);
          };
        };
        var listener = function(event2) {
          run(event2.data);
        };
        var post = function(id2) {
          global_1.postMessage(id2 + "", location2.protocol + "//" + location2.host);
        };
        if (!set$1 || !clear) {
          set$1 = function setImmediate(fn) {
            var args = [];
            var i2 = 1;
            while (arguments.length > i2)
              args.push(arguments[i2++]);
            queue[++counter] = function() {
              (typeof fn == "function" ? fn : Function(fn)).apply(void 0, args);
            };
            defer(counter);
            return counter;
          };
          clear = function clearImmediate(id2) {
            delete queue[id2];
          };
          if (classofRaw(process$1) == "process") {
            defer = function(id2) {
              process$1.nextTick(runner(id2));
            };
          } else if (Dispatch && Dispatch.now) {
            defer = function(id2) {
              Dispatch.now(runner(id2));
            };
          } else if (MessageChannel && !engineIsIos) {
            channel = new MessageChannel();
            port2 = channel.port2;
            channel.port1.onmessage = listener;
            defer = functionBindContext(port2.postMessage, port2, 1);
          } else if (global_1.addEventListener && typeof postMessage == "function" && !global_1.importScripts && !fails(post) && location2.protocol !== "file:") {
            defer = post;
            global_1.addEventListener("message", listener, false);
          } else if (ONREADYSTATECHANGE in documentCreateElement("script")) {
            defer = function(id2) {
              html.appendChild(documentCreateElement("script"))[ONREADYSTATECHANGE] = function() {
                html.removeChild(this);
                run(id2);
              };
            };
          } else {
            defer = function(id2) {
              setTimeout(runner(id2), 0);
            };
          }
        }
        var task = {
          set: set$1,
          clear
        };
        var getOwnPropertyDescriptor$3 = objectGetOwnPropertyDescriptor.f;
        var macrotask = task.set;
        var MutationObserver$1 = global_1.MutationObserver || global_1.WebKitMutationObserver;
        var process$2 = global_1.process;
        var Promise$1 = global_1.Promise;
        var IS_NODE = classofRaw(process$2) == "process";
        var queueMicrotaskDescriptor = getOwnPropertyDescriptor$3(global_1, "queueMicrotask");
        var queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;
        var flush, head, last, notify, toggle, node, promise, then;
        if (!queueMicrotask) {
          flush = function() {
            var parent, fn;
            if (IS_NODE && (parent = process$2.domain))
              parent.exit();
            while (head) {
              fn = head.fn;
              head = head.next;
              try {
                fn();
              } catch (error) {
                if (head)
                  notify();
                else
                  last = void 0;
                throw error;
              }
            }
            last = void 0;
            if (parent)
              parent.enter();
          };
          if (IS_NODE) {
            notify = function() {
              process$2.nextTick(flush);
            };
          } else if (MutationObserver$1 && !engineIsIos) {
            toggle = true;
            node = document.createTextNode("");
            new MutationObserver$1(flush).observe(node, { characterData: true });
            notify = function() {
              node.data = toggle = !toggle;
            };
          } else if (Promise$1 && Promise$1.resolve) {
            promise = Promise$1.resolve(void 0);
            then = promise.then;
            notify = function() {
              then.call(promise, flush);
            };
          } else {
            notify = function() {
              macrotask.call(global_1, flush);
            };
          }
        }
        var microtask = queueMicrotask || function(fn) {
          var task2 = { fn, next: void 0 };
          if (last)
            last.next = task2;
          if (!head) {
            head = task2;
            notify();
          }
          last = task2;
        };
        var PromiseCapability = function(C2) {
          var resolve, reject;
          this.promise = new C2(function($$resolve, $$reject) {
            if (resolve !== void 0 || reject !== void 0)
              throw TypeError("Bad Promise constructor");
            resolve = $$resolve;
            reject = $$reject;
          });
          this.resolve = aFunction$1(resolve);
          this.reject = aFunction$1(reject);
        };
        var f$7 = function(C2) {
          return new PromiseCapability(C2);
        };
        var newPromiseCapability = {
          f: f$7
        };
        var promiseResolve = function(C2, x2) {
          anObject(C2);
          if (isObject(x2) && x2.constructor === C2)
            return x2;
          var promiseCapability = newPromiseCapability.f(C2);
          var resolve = promiseCapability.resolve;
          resolve(x2);
          return promiseCapability.promise;
        };
        var hostReportErrors = function(a2, b2) {
          var console2 = global_1.console;
          if (console2 && console2.error) {
            arguments.length === 1 ? console2.error(a2) : console2.error(a2, b2);
          }
        };
        var perform = function(exec) {
          try {
            return { error: false, value: exec() };
          } catch (error) {
            return { error: true, value: error };
          }
        };
        var task$1 = task.set;
        var SPECIES$6 = wellKnownSymbol("species");
        var PROMISE = "Promise";
        var getInternalState$3 = internalState.get;
        var setInternalState$6 = internalState.set;
        var getInternalPromiseState = internalState.getterFor(PROMISE);
        var PromiseConstructor = nativePromiseConstructor;
        var TypeError$1 = global_1.TypeError;
        var document$2 = global_1.document;
        var process$3 = global_1.process;
        var $fetch$1 = getBuiltIn("fetch");
        var newPromiseCapability$1 = newPromiseCapability.f;
        var newGenericPromiseCapability = newPromiseCapability$1;
        var IS_NODE$1 = classofRaw(process$3) == "process";
        var DISPATCH_EVENT = !!(document$2 && document$2.createEvent && global_1.dispatchEvent);
        var UNHANDLED_REJECTION = "unhandledrejection";
        var REJECTION_HANDLED = "rejectionhandled";
        var PENDING = 0;
        var FULFILLED = 1;
        var REJECTED = 2;
        var HANDLED = 1;
        var UNHANDLED = 2;
        var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;
        var FORCED$3 = isForced_1(PROMISE, function() {
          var GLOBAL_CORE_JS_PROMISE = inspectSource(PromiseConstructor) !== String(PromiseConstructor);
          if (!GLOBAL_CORE_JS_PROMISE) {
            if (engineV8Version === 66)
              return true;
            if (!IS_NODE$1 && typeof PromiseRejectionEvent != "function")
              return true;
          }
          if (engineV8Version >= 51 && /native code/.test(PromiseConstructor))
            return false;
          var promise2 = PromiseConstructor.resolve(1);
          var FakePromise = function(exec) {
            exec(function() {
            }, function() {
            });
          };
          var constructor = promise2.constructor = {};
          constructor[SPECIES$6] = FakePromise;
          return !(promise2.then(function() {
          }) instanceof FakePromise);
        });
        var INCORRECT_ITERATION$1 = FORCED$3 || !checkCorrectnessOfIteration(function(iterable) {
          PromiseConstructor.all(iterable)["catch"](function() {
          });
        });
        var isThenable = function(it2) {
          var then2;
          return isObject(it2) && typeof (then2 = it2.then) == "function" ? then2 : false;
        };
        var notify$1 = function(promise2, state, isReject) {
          if (state.notified)
            return;
          state.notified = true;
          var chain = state.reactions;
          microtask(function() {
            var value = state.value;
            var ok = state.state == FULFILLED;
            var index2 = 0;
            while (chain.length > index2) {
              var reaction = chain[index2++];
              var handler = ok ? reaction.ok : reaction.fail;
              var resolve = reaction.resolve;
              var reject = reaction.reject;
              var domain = reaction.domain;
              var result, then2, exited;
              try {
                if (handler) {
                  if (!ok) {
                    if (state.rejection === UNHANDLED)
                      onHandleUnhandled(promise2, state);
                    state.rejection = HANDLED;
                  }
                  if (handler === true)
                    result = value;
                  else {
                    if (domain)
                      domain.enter();
                    result = handler(value);
                    if (domain) {
                      domain.exit();
                      exited = true;
                    }
                  }
                  if (result === reaction.promise) {
                    reject(TypeError$1("Promise-chain cycle"));
                  } else if (then2 = isThenable(result)) {
                    then2.call(result, resolve, reject);
                  } else
                    resolve(result);
                } else
                  reject(value);
              } catch (error) {
                if (domain && !exited)
                  domain.exit();
                reject(error);
              }
            }
            state.reactions = [];
            state.notified = false;
            if (isReject && !state.rejection)
              onUnhandled(promise2, state);
          });
        };
        var dispatchEvent = function(name2, promise2, reason) {
          var event2, handler;
          if (DISPATCH_EVENT) {
            event2 = document$2.createEvent("Event");
            event2.promise = promise2;
            event2.reason = reason;
            event2.initEvent(name2, false, true);
            global_1.dispatchEvent(event2);
          } else
            event2 = { promise: promise2, reason };
          if (handler = global_1["on" + name2])
            handler(event2);
          else if (name2 === UNHANDLED_REJECTION)
            hostReportErrors("Unhandled promise rejection", reason);
        };
        var onUnhandled = function(promise2, state) {
          task$1.call(global_1, function() {
            var value = state.value;
            var IS_UNHANDLED = isUnhandled(state);
            var result;
            if (IS_UNHANDLED) {
              result = perform(function() {
                if (IS_NODE$1) {
                  process$3.emit("unhandledRejection", value, promise2);
                } else
                  dispatchEvent(UNHANDLED_REJECTION, promise2, value);
              });
              state.rejection = IS_NODE$1 || isUnhandled(state) ? UNHANDLED : HANDLED;
              if (result.error)
                throw result.value;
            }
          });
        };
        var isUnhandled = function(state) {
          return state.rejection !== HANDLED && !state.parent;
        };
        var onHandleUnhandled = function(promise2, state) {
          task$1.call(global_1, function() {
            if (IS_NODE$1) {
              process$3.emit("rejectionHandled", promise2);
            } else
              dispatchEvent(REJECTION_HANDLED, promise2, state.value);
          });
        };
        var bind = function(fn, promise2, state, unwrap) {
          return function(value) {
            fn(promise2, state, value, unwrap);
          };
        };
        var internalReject = function(promise2, state, value, unwrap) {
          if (state.done)
            return;
          state.done = true;
          if (unwrap)
            state = unwrap;
          state.value = value;
          state.state = REJECTED;
          notify$1(promise2, state, true);
        };
        var internalResolve = function(promise2, state, value, unwrap) {
          if (state.done)
            return;
          state.done = true;
          if (unwrap)
            state = unwrap;
          try {
            if (promise2 === value)
              throw TypeError$1("Promise can't be resolved itself");
            var then2 = isThenable(value);
            if (then2) {
              microtask(function() {
                var wrapper = { done: false };
                try {
                  then2.call(value, bind(internalResolve, promise2, wrapper, state), bind(internalReject, promise2, wrapper, state));
                } catch (error) {
                  internalReject(promise2, wrapper, error, state);
                }
              });
            } else {
              state.value = value;
              state.state = FULFILLED;
              notify$1(promise2, state, false);
            }
          } catch (error) {
            internalReject(promise2, { done: false }, error, state);
          }
        };
        if (FORCED$3) {
          PromiseConstructor = function Promise2(executor) {
            anInstance(this, PromiseConstructor, PROMISE);
            aFunction$1(executor);
            Internal.call(this);
            var state = getInternalState$3(this);
            try {
              executor(bind(internalResolve, this, state), bind(internalReject, this, state));
            } catch (error) {
              internalReject(this, state, error);
            }
          };
          Internal = function Promise2(executor) {
            setInternalState$6(this, {
              type: PROMISE,
              done: false,
              notified: false,
              parent: false,
              reactions: [],
              rejection: false,
              state: PENDING,
              value: void 0
            });
          };
          Internal.prototype = redefineAll(PromiseConstructor.prototype, {
            then: function then2(onFulfilled, onRejected) {
              var state = getInternalPromiseState(this);
              var reaction = newPromiseCapability$1(speciesConstructor(this, PromiseConstructor));
              reaction.ok = typeof onFulfilled == "function" ? onFulfilled : true;
              reaction.fail = typeof onRejected == "function" && onRejected;
              reaction.domain = IS_NODE$1 ? process$3.domain : void 0;
              state.parent = true;
              state.reactions.push(reaction);
              if (state.state != PENDING)
                notify$1(this, state, false);
              return reaction.promise;
            },
            "catch": function(onRejected) {
              return this.then(void 0, onRejected);
            }
          });
          OwnPromiseCapability = function() {
            var promise2 = new Internal();
            var state = getInternalState$3(promise2);
            this.promise = promise2;
            this.resolve = bind(internalResolve, promise2, state);
            this.reject = bind(internalReject, promise2, state);
          };
          newPromiseCapability.f = newPromiseCapability$1 = function(C2) {
            return C2 === PromiseConstructor || C2 === PromiseWrapper ? new OwnPromiseCapability(C2) : newGenericPromiseCapability(C2);
          };
          if (typeof nativePromiseConstructor == "function") {
            nativeThen = nativePromiseConstructor.prototype.then;
            redefine(nativePromiseConstructor.prototype, "then", function then2(onFulfilled, onRejected) {
              var that = this;
              return new PromiseConstructor(function(resolve, reject) {
                nativeThen.call(that, resolve, reject);
              }).then(onFulfilled, onRejected);
            }, { unsafe: true });
            if (typeof $fetch$1 == "function")
              _export({ global: true, enumerable: true, forced: true }, {
                fetch: function fetch3(input) {
                  return promiseResolve(PromiseConstructor, $fetch$1.apply(global_1, arguments));
                }
              });
          }
        }
        _export({ global: true, wrap: true, forced: FORCED$3 }, {
          Promise: PromiseConstructor
        });
        setToStringTag(PromiseConstructor, PROMISE, false);
        setSpecies(PROMISE);
        PromiseWrapper = getBuiltIn(PROMISE);
        _export({ target: PROMISE, stat: true, forced: FORCED$3 }, {
          reject: function reject(r2) {
            var capability = newPromiseCapability$1(this);
            capability.reject.call(void 0, r2);
            return capability.promise;
          }
        });
        _export({ target: PROMISE, stat: true, forced: FORCED$3 }, {
          resolve: function resolve(x2) {
            return promiseResolve(this, x2);
          }
        });
        _export({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION$1 }, {
          all: function all(iterable) {
            var C2 = this;
            var capability = newPromiseCapability$1(C2);
            var resolve = capability.resolve;
            var reject = capability.reject;
            var result = perform(function() {
              var $promiseResolve = aFunction$1(C2.resolve);
              var values = [];
              var counter2 = 0;
              var remaining = 1;
              iterate_1(iterable, function(promise2) {
                var index2 = counter2++;
                var alreadyCalled = false;
                values.push(void 0);
                remaining++;
                $promiseResolve.call(C2, promise2).then(function(value) {
                  if (alreadyCalled)
                    return;
                  alreadyCalled = true;
                  values[index2] = value;
                  --remaining || resolve(values);
                }, reject);
              });
              --remaining || resolve(values);
            });
            if (result.error)
              reject(result.value);
            return capability.promise;
          },
          race: function race(iterable) {
            var C2 = this;
            var capability = newPromiseCapability$1(C2);
            var reject = capability.reject;
            var result = perform(function() {
              var $promiseResolve = aFunction$1(C2.resolve);
              iterate_1(iterable, function(promise2) {
                $promiseResolve.call(C2, promise2).then(capability.resolve, reject);
              });
            });
            if (result.error)
              reject(result.value);
            return capability.promise;
          }
        });
        var getOwnPropertyDescriptor$4 = objectGetOwnPropertyDescriptor.f;
        var nativeStartsWith = "".startsWith;
        var min$4 = Math.min;
        var CORRECT_IS_REGEXP_LOGIC = correctIsRegexpLogic("startsWith");
        var MDN_POLYFILL_BUG = !CORRECT_IS_REGEXP_LOGIC && !!function() {
          var descriptor = getOwnPropertyDescriptor$4(String.prototype, "startsWith");
          return descriptor && !descriptor.writable;
        }();
        _export({ target: "String", proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {
          startsWith: function startsWith(searchString) {
            var that = String(requireObjectCoercible(this));
            notARegexp(searchString);
            var index2 = toLength(min$4(arguments.length > 1 ? arguments[1] : void 0, that.length));
            var search = String(searchString);
            return nativeStartsWith ? nativeStartsWith.call(that, search, index2) : that.slice(index2, index2 + search.length) === search;
          }
        });
        var getConstructor$1 = function getConstructor2(input) {
          return input !== null && typeof input !== "undefined" ? input.constructor : null;
        };
        var instanceOf$1 = function instanceOf2(input, constructor) {
          return Boolean(input && constructor && input instanceof constructor);
        };
        var isNullOrUndefined$1 = function isNullOrUndefined2(input) {
          return input === null || typeof input === "undefined";
        };
        var isObject$2 = function isObject2(input) {
          return getConstructor$1(input) === Object;
        };
        var isNumber$1 = function isNumber2(input) {
          return getConstructor$1(input) === Number && !Number.isNaN(input);
        };
        var isString$1 = function isString2(input) {
          return getConstructor$1(input) === String;
        };
        var isBoolean$1 = function isBoolean2(input) {
          return getConstructor$1(input) === Boolean;
        };
        var isFunction$1 = function isFunction2(input) {
          return getConstructor$1(input) === Function;
        };
        var isArray$2 = function isArray2(input) {
          return Array.isArray(input);
        };
        var isWeakMap = function isWeakMap2(input) {
          return instanceOf$1(input, WeakMap);
        };
        var isNodeList$1 = function isNodeList2(input) {
          return instanceOf$1(input, NodeList);
        };
        var isElement$1 = function isElement2(input) {
          return instanceOf$1(input, Element);
        };
        var isTextNode = function isTextNode2(input) {
          return getConstructor$1(input) === Text;
        };
        var isEvent$1 = function isEvent2(input) {
          return instanceOf$1(input, Event);
        };
        var isKeyboardEvent = function isKeyboardEvent2(input) {
          return instanceOf$1(input, KeyboardEvent);
        };
        var isCue = function isCue2(input) {
          return instanceOf$1(input, window.TextTrackCue) || instanceOf$1(input, window.VTTCue);
        };
        var isTrack = function isTrack2(input) {
          return instanceOf$1(input, TextTrack) || !isNullOrUndefined$1(input) && isString$1(input.kind);
        };
        var isPromise = function isPromise2(input) {
          return instanceOf$1(input, Promise) && isFunction$1(input.then);
        };
        var isEmpty$1 = function isEmpty2(input) {
          return isNullOrUndefined$1(input) || (isString$1(input) || isArray$2(input) || isNodeList$1(input)) && !input.length || isObject$2(input) && !Object.keys(input).length;
        };
        var isUrl = function isUrl2(input) {
          if (instanceOf$1(input, window.URL)) {
            return true;
          }
          if (!isString$1(input)) {
            return false;
          }
          var string = input;
          if (!input.startsWith("http://") || !input.startsWith("https://")) {
            string = "http://".concat(input);
          }
          try {
            return !isEmpty$1(new URL(string).hostname);
          } catch (e2) {
            return false;
          }
        };
        var is$1 = {
          nullOrUndefined: isNullOrUndefined$1,
          object: isObject$2,
          number: isNumber$1,
          string: isString$1,
          boolean: isBoolean$1,
          function: isFunction$1,
          array: isArray$2,
          weakMap: isWeakMap,
          nodeList: isNodeList$1,
          element: isElement$1,
          textNode: isTextNode,
          event: isEvent$1,
          keyboardEvent: isKeyboardEvent,
          cue: isCue,
          track: isTrack,
          promise: isPromise,
          url: isUrl,
          empty: isEmpty$1
        };
        var transitionEndEvent = function() {
          var element = document.createElement("span");
          var events = {
            WebkitTransition: "webkitTransitionEnd",
            MozTransition: "transitionend",
            OTransition: "oTransitionEnd otransitionend",
            transition: "transitionend"
          };
          var type = Object.keys(events).find(function(event2) {
            return element.style[event2] !== void 0;
          });
          return is$1.string(type) ? events[type] : false;
        }();
        function repaint(element, delay) {
          setTimeout(function() {
            try {
              element.hidden = true;
              element.offsetHeight;
              element.hidden = false;
            } catch (e2) {
            }
          }, delay);
        }
        var browser = {
          isIE: !!document.documentMode,
          isEdge: window.navigator.userAgent.includes("Edge"),
          isWebkit: "WebkitAppearance" in document.documentElement.style && !/Edge/.test(navigator.userAgent),
          isIPhone: /(iPhone|iPod)/gi.test(navigator.platform),
          isIos: /(iPad|iPhone|iPod)/gi.test(navigator.platform)
        };
        var createMethod$5 = function(IS_RIGHT) {
          return function(that, callbackfn, argumentsLength, memo) {
            aFunction$1(callbackfn);
            var O2 = toObject(that);
            var self2 = indexedObject(O2);
            var length = toLength(O2.length);
            var index2 = IS_RIGHT ? length - 1 : 0;
            var i2 = IS_RIGHT ? -1 : 1;
            if (argumentsLength < 2)
              while (true) {
                if (index2 in self2) {
                  memo = self2[index2];
                  index2 += i2;
                  break;
                }
                index2 += i2;
                if (IS_RIGHT ? index2 < 0 : length <= index2) {
                  throw TypeError("Reduce of empty array with no initial value");
                }
              }
            for (; IS_RIGHT ? index2 >= 0 : length > index2; index2 += i2)
              if (index2 in self2) {
                memo = callbackfn(memo, self2[index2], index2, O2);
              }
            return memo;
          };
        };
        var arrayReduce = {
          left: createMethod$5(false),
          right: createMethod$5(true)
        };
        var $reduce = arrayReduce.left;
        var STRICT_METHOD$5 = arrayMethodIsStrict("reduce");
        var USES_TO_LENGTH$9 = arrayMethodUsesToLength("reduce", { 1: 0 });
        _export({ target: "Array", proto: true, forced: !STRICT_METHOD$5 || !USES_TO_LENGTH$9 }, {
          reduce: function reduce(callbackfn) {
            return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        function cloneDeep(object) {
          return JSON.parse(JSON.stringify(object));
        }
        function getDeep(object, path2) {
          return path2.split(".").reduce(function(obj, key3) {
            return obj && obj[key3];
          }, object);
        }
        function extend() {
          var target = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {};
          for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            sources[_key - 1] = arguments[_key];
          }
          if (!sources.length) {
            return target;
          }
          var source2 = sources.shift();
          if (!is$1.object(source2)) {
            return target;
          }
          Object.keys(source2).forEach(function(key3) {
            if (is$1.object(source2[key3])) {
              if (!Object.keys(target).includes(key3)) {
                Object.assign(target, _defineProperty({}, key3, {}));
              }
              extend(target[key3], source2[key3]);
            } else {
              Object.assign(target, _defineProperty({}, key3, source2[key3]));
            }
          });
          return extend.apply(void 0, [target].concat(sources));
        }
        function wrap$1(elements, wrapper) {
          var targets = elements.length ? elements : [elements];
          Array.from(targets).reverse().forEach(function(element, index2) {
            var child = index2 > 0 ? wrapper.cloneNode(true) : wrapper;
            var parent = element.parentNode;
            var sibling = element.nextSibling;
            child.appendChild(element);
            if (sibling) {
              parent.insertBefore(child, sibling);
            } else {
              parent.appendChild(child);
            }
          });
        }
        function setAttributes(element, attributes) {
          if (!is$1.element(element) || is$1.empty(attributes)) {
            return;
          }
          Object.entries(attributes).filter(function(_ref) {
            var _ref2 = _slicedToArray(_ref, 2), value = _ref2[1];
            return !is$1.nullOrUndefined(value);
          }).forEach(function(_ref3) {
            var _ref4 = _slicedToArray(_ref3, 2), key3 = _ref4[0], value = _ref4[1];
            return element.setAttribute(key3, value);
          });
        }
        function createElement(type, attributes, text) {
          var element = document.createElement(type);
          if (is$1.object(attributes)) {
            setAttributes(element, attributes);
          }
          if (is$1.string(text)) {
            element.innerText = text;
          }
          return element;
        }
        function insertAfter(element, target) {
          if (!is$1.element(element) || !is$1.element(target)) {
            return;
          }
          target.parentNode.insertBefore(element, target.nextSibling);
        }
        function insertElement(type, parent, attributes, text) {
          if (!is$1.element(parent)) {
            return;
          }
          parent.appendChild(createElement(type, attributes, text));
        }
        function removeElement(element) {
          if (is$1.nodeList(element) || is$1.array(element)) {
            Array.from(element).forEach(removeElement);
            return;
          }
          if (!is$1.element(element) || !is$1.element(element.parentNode)) {
            return;
          }
          element.parentNode.removeChild(element);
        }
        function emptyElement(element) {
          if (!is$1.element(element)) {
            return;
          }
          var length = element.childNodes.length;
          while (length > 0) {
            element.removeChild(element.lastChild);
            length -= 1;
          }
        }
        function replaceElement(newChild, oldChild) {
          if (!is$1.element(oldChild) || !is$1.element(oldChild.parentNode) || !is$1.element(newChild)) {
            return null;
          }
          oldChild.parentNode.replaceChild(newChild, oldChild);
          return newChild;
        }
        function getAttributesFromSelector(sel, existingAttributes) {
          if (!is$1.string(sel) || is$1.empty(sel)) {
            return {};
          }
          var attributes = {};
          var existing = extend({}, existingAttributes);
          sel.split(",").forEach(function(s2) {
            var selector = s2.trim();
            var className = selector.replace(".", "");
            var stripped = selector.replace(/[[\]]/g, "");
            var parts = stripped.split("=");
            var _parts = _slicedToArray(parts, 1), key3 = _parts[0];
            var value = parts.length > 1 ? parts[1].replace(/["']/g, "") : "";
            var start = selector.charAt(0);
            switch (start) {
              case ".":
                if (is$1.string(existing.class)) {
                  attributes.class = "".concat(existing.class, " ").concat(className);
                } else {
                  attributes.class = className;
                }
                break;
              case "#":
                attributes.id = selector.replace("#", "");
                break;
              case "[":
                attributes[key3] = value;
                break;
            }
          });
          return extend(existing, attributes);
        }
        function toggleHidden(element, hidden) {
          if (!is$1.element(element)) {
            return;
          }
          var hide = hidden;
          if (!is$1.boolean(hide)) {
            hide = !element.hidden;
          }
          element.hidden = hide;
        }
        function toggleClass(element, className, force) {
          if (is$1.nodeList(element)) {
            return Array.from(element).map(function(e2) {
              return toggleClass(e2, className, force);
            });
          }
          if (is$1.element(element)) {
            var method = "toggle";
            if (typeof force !== "undefined") {
              method = force ? "add" : "remove";
            }
            element.classList[method](className);
            return element.classList.contains(className);
          }
          return false;
        }
        function hasClass(element, className) {
          return is$1.element(element) && element.classList.contains(className);
        }
        function matches$1(element, selector) {
          var _Element = Element, prototype = _Element.prototype;
          function match2() {
            return Array.from(document.querySelectorAll(selector)).includes(this);
          }
          var method = prototype.matches || prototype.webkitMatchesSelector || prototype.mozMatchesSelector || prototype.msMatchesSelector || match2;
          return method.call(element, selector);
        }
        function closest(element, selector) {
          var _Element2 = Element, prototype = _Element2.prototype;
          function closestElement() {
            var el = this;
            do {
              if (matches$1.matches(el, selector))
                return el;
              el = el.parentElement || el.parentNode;
            } while (el !== null && el.nodeType === 1);
            return null;
          }
          var method = prototype.closest || closestElement;
          return method.call(element, selector);
        }
        function getElements(selector) {
          return this.elements.container.querySelectorAll(selector);
        }
        function getElement(selector) {
          return this.elements.container.querySelector(selector);
        }
        function setFocus() {
          var element = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;
          var tabFocus = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
          if (!is$1.element(element)) {
            return;
          }
          element.focus({
            preventScroll: true
          });
          if (tabFocus) {
            toggleClass(element, this.config.classNames.tabFocus);
          }
        }
        var defaultCodecs = {
          "audio/ogg": "vorbis",
          "audio/wav": "1",
          "video/webm": "vp8, vorbis",
          "video/mp4": "avc1.42E01E, mp4a.40.2",
          "video/ogg": "theora"
        };
        var support = {
          audio: "canPlayType" in document.createElement("audio"),
          video: "canPlayType" in document.createElement("video"),
          check: function check2(type, provider, playsinline) {
            var canPlayInline = browser.isIPhone && playsinline && support.playsinline;
            var api = support[type] || provider !== "html5";
            var ui2 = api && support.rangeInput && (type !== "video" || !browser.isIPhone || canPlayInline);
            return {
              api,
              ui: ui2
            };
          },
          pip: function() {
            if (browser.isIPhone) {
              return false;
            }
            if (is$1.function(createElement("video").webkitSetPresentationMode)) {
              return true;
            }
            if (document.pictureInPictureEnabled && !createElement("video").disablePictureInPicture) {
              return true;
            }
            return false;
          }(),
          airplay: is$1.function(window.WebKitPlaybackTargetAvailabilityEvent),
          playsinline: "playsInline" in document.createElement("video"),
          mime: function mime(input) {
            if (is$1.empty(input)) {
              return false;
            }
            var _input$split = input.split("/"), _input$split2 = _slicedToArray(_input$split, 1), mediaType = _input$split2[0];
            var type = input;
            if (!this.isHTML5 || mediaType !== this.type) {
              return false;
            }
            if (Object.keys(defaultCodecs).includes(type)) {
              type += '; codecs="'.concat(defaultCodecs[input], '"');
            }
            try {
              return Boolean(type && this.media.canPlayType(type).replace(/no/, ""));
            } catch (e2) {
              return false;
            }
          },
          textTracks: "textTracks" in document.createElement("video"),
          rangeInput: function() {
            var range = document.createElement("input");
            range.type = "range";
            return range.type === "range";
          }(),
          touch: "ontouchstart" in document.documentElement,
          transitions: transitionEndEvent !== false,
          reducedMotion: "matchMedia" in window && window.matchMedia("(prefers-reduced-motion)").matches
        };
        var supportsPassiveListeners = function() {
          var supported = false;
          try {
            var options = Object.defineProperty({}, "passive", {
              get: function get2() {
                supported = true;
                return null;
              }
            });
            window.addEventListener("test", null, options);
            window.removeEventListener("test", null, options);
          } catch (e2) {
          }
          return supported;
        }();
        function toggleListener(element, event2, callback) {
          var _this = this;
          var toggle2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : false;
          var passive = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : true;
          var capture = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : false;
          if (!element || !("addEventListener" in element) || is$1.empty(event2) || !is$1.function(callback)) {
            return;
          }
          var events = event2.split(" ");
          var options = capture;
          if (supportsPassiveListeners) {
            options = {
              passive,
              capture
            };
          }
          events.forEach(function(type) {
            if (_this && _this.eventListeners && toggle2) {
              _this.eventListeners.push({
                element,
                type,
                callback,
                options
              });
            }
            element[toggle2 ? "addEventListener" : "removeEventListener"](type, callback, options);
          });
        }
        function on(element) {
          var events = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
          var callback = arguments.length > 2 ? arguments[2] : void 0;
          var passive = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : true;
          var capture = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : false;
          toggleListener.call(this, element, events, callback, true, passive, capture);
        }
        function off(element) {
          var events = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
          var callback = arguments.length > 2 ? arguments[2] : void 0;
          var passive = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : true;
          var capture = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : false;
          toggleListener.call(this, element, events, callback, false, passive, capture);
        }
        function once(element) {
          var _this2 = this;
          var events = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
          var callback = arguments.length > 2 ? arguments[2] : void 0;
          var passive = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : true;
          var capture = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : false;
          var onceCallback = function onceCallback2() {
            off(element, events, onceCallback2, passive, capture);
            for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
              args[_key] = arguments[_key];
            }
            callback.apply(_this2, args);
          };
          toggleListener.call(this, element, events, onceCallback, true, passive, capture);
        }
        function triggerEvent(element) {
          var type = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
          var bubbles = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
          var detail = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
          if (!is$1.element(element) || is$1.empty(type)) {
            return;
          }
          var event2 = new CustomEvent(type, {
            bubbles,
            detail: _objectSpread2(_objectSpread2({}, detail), {}, {
              plyr: this
            })
          });
          element.dispatchEvent(event2);
        }
        function unbindListeners() {
          if (this && this.eventListeners) {
            this.eventListeners.forEach(function(item) {
              var element = item.element, type = item.type, callback = item.callback, options = item.options;
              element.removeEventListener(type, callback, options);
            });
            this.eventListeners = [];
          }
        }
        function ready() {
          var _this3 = this;
          return new Promise(function(resolve) {
            return _this3.ready ? setTimeout(resolve, 0) : on.call(_this3, _this3.elements.container, "ready", resolve);
          }).then(function() {
          });
        }
        function silencePromise(value) {
          if (is$1.promise(value)) {
            value.then(null, function() {
            });
          }
        }
        function validateRatio(input) {
          if (!is$1.array(input) && (!is$1.string(input) || !input.includes(":"))) {
            return false;
          }
          var ratio = is$1.array(input) ? input : input.split(":");
          return ratio.map(Number).every(is$1.number);
        }
        function reduceAspectRatio(ratio) {
          if (!is$1.array(ratio) || !ratio.every(is$1.number)) {
            return null;
          }
          var _ratio = _slicedToArray(ratio, 2), width = _ratio[0], height = _ratio[1];
          var getDivider = function getDivider2(w2, h2) {
            return h2 === 0 ? w2 : getDivider2(h2, w2 % h2);
          };
          var divider = getDivider(width, height);
          return [width / divider, height / divider];
        }
        function getAspectRatio(input) {
          var parse = function parse2(ratio2) {
            return validateRatio(ratio2) ? ratio2.split(":").map(Number) : null;
          };
          var ratio = parse(input);
          if (ratio === null) {
            ratio = parse(this.config.ratio);
          }
          if (ratio === null && !is$1.empty(this.embed) && is$1.array(this.embed.ratio)) {
            ratio = this.embed.ratio;
          }
          if (ratio === null && this.isHTML5) {
            var _this$media = this.media, videoWidth = _this$media.videoWidth, videoHeight = _this$media.videoHeight;
            ratio = reduceAspectRatio([videoWidth, videoHeight]);
          }
          return ratio;
        }
        function setAspectRatio(input) {
          if (!this.isVideo) {
            return {};
          }
          var wrapper = this.elements.wrapper;
          var ratio = getAspectRatio.call(this, input);
          var _ref = is$1.array(ratio) ? ratio : [0, 0], _ref2 = _slicedToArray(_ref, 2), w2 = _ref2[0], h2 = _ref2[1];
          var padding = 100 / w2 * h2;
          wrapper.style.paddingBottom = "".concat(padding, "%");
          if (this.isVimeo && !this.config.vimeo.premium && this.supported.ui) {
            var height = 100 / this.media.offsetWidth * parseInt(window.getComputedStyle(this.media).paddingBottom, 10);
            var offset = (height - padding) / (height / 50);
            this.media.style.transform = "translateY(-".concat(offset, "%)");
          } else if (this.isHTML5) {
            wrapper.classList.toggle(this.config.classNames.videoFixedRatio, ratio !== null);
          }
          return {
            padding,
            ratio
          };
        }
        var html5 = {
          getSources: function getSources() {
            var _this = this;
            if (!this.isHTML5) {
              return [];
            }
            var sources = Array.from(this.media.querySelectorAll("source"));
            return sources.filter(function(source2) {
              var type = source2.getAttribute("type");
              if (is$1.empty(type)) {
                return true;
              }
              return support.mime.call(_this, type);
            });
          },
          getQualityOptions: function getQualityOptions() {
            if (this.config.quality.forced) {
              return this.config.quality.options;
            }
            return html5.getSources.call(this).map(function(source2) {
              return Number(source2.getAttribute("size"));
            }).filter(Boolean);
          },
          setup: function setup() {
            if (!this.isHTML5) {
              return;
            }
            var player = this;
            player.options.speed = player.config.speed.options;
            if (!is$1.empty(this.config.ratio)) {
              setAspectRatio.call(player);
            }
            Object.defineProperty(player.media, "quality", {
              get: function get2() {
                var sources = html5.getSources.call(player);
                var source2 = sources.find(function(s2) {
                  return s2.getAttribute("src") === player.source;
                });
                return source2 && Number(source2.getAttribute("size"));
              },
              set: function set2(input) {
                if (player.quality === input) {
                  return;
                }
                if (player.config.quality.forced && is$1.function(player.config.quality.onChange)) {
                  player.config.quality.onChange(input);
                } else {
                  var sources = html5.getSources.call(player);
                  var source2 = sources.find(function(s2) {
                    return Number(s2.getAttribute("size")) === input;
                  });
                  if (!source2) {
                    return;
                  }
                  var _player$media = player.media, currentTime = _player$media.currentTime, paused = _player$media.paused, preload = _player$media.preload, readyState = _player$media.readyState, playbackRate = _player$media.playbackRate;
                  player.media.src = source2.getAttribute("src");
                  if (preload !== "none" || readyState) {
                    player.once("loadedmetadata", function() {
                      player.speed = playbackRate;
                      player.currentTime = currentTime;
                      if (!paused) {
                        silencePromise(player.play());
                      }
                    });
                    player.media.load();
                  }
                }
                triggerEvent.call(player, player.media, "qualitychange", false, {
                  quality: input
                });
              }
            });
          },
          cancelRequests: function cancelRequests() {
            if (!this.isHTML5) {
              return;
            }
            removeElement(html5.getSources.call(this));
            this.media.setAttribute("src", this.config.blankVideo);
            this.media.load();
            this.debug.log("Cancelled network requests");
          }
        };
        function dedupe(array) {
          if (!is$1.array(array)) {
            return array;
          }
          return array.filter(function(item, index2) {
            return array.indexOf(item) === index2;
          });
        }
        function closest$1(array, value) {
          if (!is$1.array(array) || !array.length) {
            return null;
          }
          return array.reduce(function(prev, curr) {
            return Math.abs(curr - value) < Math.abs(prev - value) ? curr : prev;
          });
        }
        var defineProperty$6 = objectDefineProperty.f;
        var getOwnPropertyNames$1 = objectGetOwnPropertyNames.f;
        var setInternalState$7 = internalState.set;
        var MATCH$2 = wellKnownSymbol("match");
        var NativeRegExp = global_1.RegExp;
        var RegExpPrototype$1 = NativeRegExp.prototype;
        var re1 = /a/g;
        var re2 = /a/g;
        var CORRECT_NEW = new NativeRegExp(re1) !== re1;
        var UNSUPPORTED_Y$2 = regexpStickyHelpers.UNSUPPORTED_Y;
        var FORCED$4 = descriptors && isForced_1("RegExp", !CORRECT_NEW || UNSUPPORTED_Y$2 || fails(function() {
          re2[MATCH$2] = false;
          return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, "i") != "/a/i";
        }));
        if (FORCED$4) {
          var RegExpWrapper = function RegExp2(pattern, flags) {
            var thisIsRegExp = this instanceof RegExpWrapper;
            var patternIsRegExp = isRegexp(pattern);
            var flagsAreUndefined = flags === void 0;
            var sticky;
            if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {
              return pattern;
            }
            if (CORRECT_NEW) {
              if (patternIsRegExp && !flagsAreUndefined)
                pattern = pattern.source;
            } else if (pattern instanceof RegExpWrapper) {
              if (flagsAreUndefined)
                flags = regexpFlags.call(pattern);
              pattern = pattern.source;
            }
            if (UNSUPPORTED_Y$2) {
              sticky = !!flags && flags.indexOf("y") > -1;
              if (sticky)
                flags = flags.replace(/y/g, "");
            }
            var result = inheritIfRequired(CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags), thisIsRegExp ? this : RegExpPrototype$1, RegExpWrapper);
            if (UNSUPPORTED_Y$2 && sticky)
              setInternalState$7(result, { sticky });
            return result;
          };
          var proxy = function(key3) {
            key3 in RegExpWrapper || defineProperty$6(RegExpWrapper, key3, {
              configurable: true,
              get: function() {
                return NativeRegExp[key3];
              },
              set: function(it2) {
                NativeRegExp[key3] = it2;
              }
            });
          };
          var keys$2 = getOwnPropertyNames$1(NativeRegExp);
          var index = 0;
          while (keys$2.length > index)
            proxy(keys$2[index++]);
          RegExpPrototype$1.constructor = RegExpWrapper;
          RegExpWrapper.prototype = RegExpPrototype$1;
          redefine(global_1, "RegExp", RegExpWrapper);
        }
        setSpecies("RegExp");
        function generateId(prefix) {
          return "".concat(prefix, "-").concat(Math.floor(Math.random() * 1e4));
        }
        function format2(input) {
          for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            args[_key - 1] = arguments[_key];
          }
          if (is$1.empty(input)) {
            return input;
          }
          return input.toString().replace(/{(\d+)}/g, function(match2, i2) {
            return args[i2].toString();
          });
        }
        function getPercentage(current, max2) {
          if (current === 0 || max2 === 0 || Number.isNaN(current) || Number.isNaN(max2)) {
            return 0;
          }
          return (current / max2 * 100).toFixed(2);
        }
        var replaceAll = function replaceAll2() {
          var input = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          var find2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "";
          var replace2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "";
          return input.replace(new RegExp(find2.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g, "\\$1"), "g"), replace2.toString());
        };
        var toTitleCase = function toTitleCase2() {
          var input = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          return input.toString().replace(/\w\S*/g, function(text) {
            return text.charAt(0).toUpperCase() + text.substr(1).toLowerCase();
          });
        };
        function toPascalCase() {
          var input = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          var string = input.toString();
          string = replaceAll(string, "-", " ");
          string = replaceAll(string, "_", " ");
          string = toTitleCase(string);
          return replaceAll(string, " ", "");
        }
        function toCamelCase() {
          var input = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
          var string = input.toString();
          string = toPascalCase(string);
          return string.charAt(0).toLowerCase() + string.slice(1);
        }
        function stripHTML(source2) {
          var fragment = document.createDocumentFragment();
          var element = document.createElement("div");
          fragment.appendChild(element);
          element.innerHTML = source2;
          return fragment.firstChild.innerText;
        }
        function getHTML(element) {
          var wrapper = document.createElement("div");
          wrapper.appendChild(element);
          return wrapper.innerHTML;
        }
        var resources = {
          pip: "PIP",
          airplay: "AirPlay",
          html5: "HTML5",
          vimeo: "Vimeo",
          youtube: "YouTube"
        };
        var i18n = {
          get: function get2() {
            var key3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
            var config = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            if (is$1.empty(key3) || is$1.empty(config)) {
              return "";
            }
            var string = getDeep(config.i18n, key3);
            if (is$1.empty(string)) {
              if (Object.keys(resources).includes(key3)) {
                return resources[key3];
              }
              return "";
            }
            var replace2 = {
              "{seektime}": config.seekTime,
              "{title}": config.title
            };
            Object.entries(replace2).forEach(function(_ref) {
              var _ref2 = _slicedToArray(_ref, 2), k2 = _ref2[0], v2 = _ref2[1];
              string = replaceAll(string, k2, v2);
            });
            return string;
          }
        };
        var Storage = /* @__PURE__ */ function() {
          function Storage2(player) {
            _classCallCheck(this, Storage2);
            this.enabled = player.config.storage.enabled;
            this.key = player.config.storage.key;
          }
          _createClass(Storage2, [{
            key: "get",
            value: function get2(key3) {
              if (!Storage2.supported || !this.enabled) {
                return null;
              }
              var store2 = window.localStorage.getItem(this.key);
              if (is$1.empty(store2)) {
                return null;
              }
              var json = JSON.parse(store2);
              return is$1.string(key3) && key3.length ? json[key3] : json;
            }
          }, {
            key: "set",
            value: function set2(object) {
              if (!Storage2.supported || !this.enabled) {
                return;
              }
              if (!is$1.object(object)) {
                return;
              }
              var storage = this.get();
              if (is$1.empty(storage)) {
                storage = {};
              }
              extend(storage, object);
              window.localStorage.setItem(this.key, JSON.stringify(storage));
            }
          }], [{
            key: "supported",
            get: function get2() {
              try {
                if (!("localStorage" in window)) {
                  return false;
                }
                var test2 = "___test";
                window.localStorage.setItem(test2, test2);
                window.localStorage.removeItem(test2);
                return true;
              } catch (e2) {
                return false;
              }
            }
          }]);
          return Storage2;
        }();
        function fetch2(url) {
          var responseType = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "text";
          return new Promise(function(resolve, reject) {
            try {
              var request = new XMLHttpRequest();
              if (!("withCredentials" in request)) {
                return;
              }
              request.addEventListener("load", function() {
                if (responseType === "text") {
                  try {
                    resolve(JSON.parse(request.responseText));
                  } catch (e2) {
                    resolve(request.responseText);
                  }
                } else {
                  resolve(request.response);
                }
              });
              request.addEventListener("error", function() {
                throw new Error(request.status);
              });
              request.open("GET", url, true);
              request.responseType = responseType;
              request.send();
            } catch (e2) {
              reject(e2);
            }
          });
        }
        function loadSprite(url, id2) {
          if (!is$1.string(url)) {
            return;
          }
          var prefix = "cache";
          var hasId = is$1.string(id2);
          var isCached = false;
          var exists = function exists2() {
            return document.getElementById(id2) !== null;
          };
          var update = function update2(container2, data3) {
            container2.innerHTML = data3;
            if (hasId && exists()) {
              return;
            }
            document.body.insertAdjacentElement("afterbegin", container2);
          };
          if (!hasId || !exists()) {
            var useStorage = Storage.supported;
            var container = document.createElement("div");
            container.setAttribute("hidden", "");
            if (hasId) {
              container.setAttribute("id", id2);
            }
            if (useStorage) {
              var cached = window.localStorage.getItem("".concat(prefix, "-").concat(id2));
              isCached = cached !== null;
              if (isCached) {
                var data2 = JSON.parse(cached);
                update(container, data2.content);
              }
            }
            fetch2(url).then(function(result) {
              if (is$1.empty(result)) {
                return;
              }
              if (useStorage) {
                window.localStorage.setItem("".concat(prefix, "-").concat(id2), JSON.stringify({
                  content: result
                }));
              }
              update(container, result);
            }).catch(function() {
            });
          }
        }
        var ceil$1 = Math.ceil;
        var floor$5 = Math.floor;
        _export({ target: "Math", stat: true }, {
          trunc: function trunc(it2) {
            return (it2 > 0 ? floor$5 : ceil$1)(it2);
          }
        });
        var getHours = function getHours2(value) {
          return Math.trunc(value / 60 / 60 % 60, 10);
        };
        var getMinutes = function getMinutes2(value) {
          return Math.trunc(value / 60 % 60, 10);
        };
        var getSeconds = function getSeconds2(value) {
          return Math.trunc(value % 60, 10);
        };
        function formatTime() {
          var time = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
          var displayHours = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
          var inverted = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
          if (!is$1.number(time)) {
            return formatTime(void 0, displayHours, inverted);
          }
          var format3 = function format4(value) {
            return "0".concat(value).slice(-2);
          };
          var hours = getHours(time);
          var mins = getMinutes(time);
          var secs = getSeconds(time);
          if (displayHours || hours > 0) {
            hours = "".concat(hours, ":");
          } else {
            hours = "";
          }
          return "".concat(inverted && time > 0 ? "-" : "").concat(hours).concat(format3(mins), ":").concat(format3(secs));
        }
        var controls = {
          getIconUrl: function getIconUrl() {
            var url = new URL(this.config.iconUrl, window.location);
            var cors = url.host !== window.location.host || browser.isIE && !window.svg4everybody;
            return {
              url: this.config.iconUrl,
              cors
            };
          },
          findElements: function findElements() {
            try {
              this.elements.controls = getElement.call(this, this.config.selectors.controls.wrapper);
              this.elements.buttons = {
                play: getElements.call(this, this.config.selectors.buttons.play),
                pause: getElement.call(this, this.config.selectors.buttons.pause),
                restart: getElement.call(this, this.config.selectors.buttons.restart),
                rewind: getElement.call(this, this.config.selectors.buttons.rewind),
                fastForward: getElement.call(this, this.config.selectors.buttons.fastForward),
                mute: getElement.call(this, this.config.selectors.buttons.mute),
                pip: getElement.call(this, this.config.selectors.buttons.pip),
                airplay: getElement.call(this, this.config.selectors.buttons.airplay),
                settings: getElement.call(this, this.config.selectors.buttons.settings),
                captions: getElement.call(this, this.config.selectors.buttons.captions),
                fullscreen: getElement.call(this, this.config.selectors.buttons.fullscreen)
              };
              this.elements.progress = getElement.call(this, this.config.selectors.progress);
              this.elements.inputs = {
                seek: getElement.call(this, this.config.selectors.inputs.seek),
                volume: getElement.call(this, this.config.selectors.inputs.volume)
              };
              this.elements.display = {
                buffer: getElement.call(this, this.config.selectors.display.buffer),
                currentTime: getElement.call(this, this.config.selectors.display.currentTime),
                duration: getElement.call(this, this.config.selectors.display.duration)
              };
              if (is$1.element(this.elements.progress)) {
                this.elements.display.seekTooltip = this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip));
              }
              return true;
            } catch (error) {
              this.debug.warn("It looks like there is a problem with your custom controls HTML", error);
              this.toggleNativeControls(true);
              return false;
            }
          },
          createIcon: function createIcon(type, attributes) {
            var namespace = "http://www.w3.org/2000/svg";
            var iconUrl = controls.getIconUrl.call(this);
            var iconPath = "".concat(!iconUrl.cors ? iconUrl.url : "", "#").concat(this.config.iconPrefix);
            var icon = document.createElementNS(namespace, "svg");
            setAttributes(icon, extend(attributes, {
              "aria-hidden": "true",
              focusable: "false"
            }));
            var use = document.createElementNS(namespace, "use");
            var path2 = "".concat(iconPath, "-").concat(type);
            if ("href" in use) {
              use.setAttributeNS("http://www.w3.org/1999/xlink", "href", path2);
            }
            use.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", path2);
            icon.appendChild(use);
            return icon;
          },
          createLabel: function createLabel(key3) {
            var attr = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
            var text = i18n.get(key3, this.config);
            var attributes = _objectSpread2(_objectSpread2({}, attr), {}, {
              class: [attr.class, this.config.classNames.hidden].filter(Boolean).join(" ")
            });
            return createElement("span", attributes, text);
          },
          createBadge: function createBadge(text) {
            if (is$1.empty(text)) {
              return null;
            }
            var badge = createElement("span", {
              class: this.config.classNames.menu.value
            });
            badge.appendChild(createElement("span", {
              class: this.config.classNames.menu.badge
            }, text));
            return badge;
          },
          createButton: function createButton(buttonType, attr) {
            var _this = this;
            var attributes = extend({}, attr);
            var type = toCamelCase(buttonType);
            var props = {
              element: "button",
              toggle: false,
              label: null,
              icon: null,
              labelPressed: null,
              iconPressed: null
            };
            ["element", "icon", "label"].forEach(function(key3) {
              if (Object.keys(attributes).includes(key3)) {
                props[key3] = attributes[key3];
                delete attributes[key3];
              }
            });
            if (props.element === "button" && !Object.keys(attributes).includes("type")) {
              attributes.type = "button";
            }
            if (Object.keys(attributes).includes("class")) {
              if (!attributes.class.split(" ").some(function(c2) {
                return c2 === _this.config.classNames.control;
              })) {
                extend(attributes, {
                  class: "".concat(attributes.class, " ").concat(this.config.classNames.control)
                });
              }
            } else {
              attributes.class = this.config.classNames.control;
            }
            switch (buttonType) {
              case "play":
                props.toggle = true;
                props.label = "play";
                props.labelPressed = "pause";
                props.icon = "play";
                props.iconPressed = "pause";
                break;
              case "mute":
                props.toggle = true;
                props.label = "mute";
                props.labelPressed = "unmute";
                props.icon = "volume";
                props.iconPressed = "muted";
                break;
              case "captions":
                props.toggle = true;
                props.label = "enableCaptions";
                props.labelPressed = "disableCaptions";
                props.icon = "captions-off";
                props.iconPressed = "captions-on";
                break;
              case "fullscreen":
                props.toggle = true;
                props.label = "enterFullscreen";
                props.labelPressed = "exitFullscreen";
                props.icon = "enter-fullscreen";
                props.iconPressed = "exit-fullscreen";
                break;
              case "play-large":
                attributes.class += " ".concat(this.config.classNames.control, "--overlaid");
                type = "play";
                props.label = "play";
                props.icon = "play";
                break;
              default:
                if (is$1.empty(props.label)) {
                  props.label = type;
                }
                if (is$1.empty(props.icon)) {
                  props.icon = buttonType;
                }
            }
            var button = createElement(props.element);
            if (props.toggle) {
              button.appendChild(controls.createIcon.call(this, props.iconPressed, {
                class: "icon--pressed"
              }));
              button.appendChild(controls.createIcon.call(this, props.icon, {
                class: "icon--not-pressed"
              }));
              button.appendChild(controls.createLabel.call(this, props.labelPressed, {
                class: "label--pressed"
              }));
              button.appendChild(controls.createLabel.call(this, props.label, {
                class: "label--not-pressed"
              }));
            } else {
              button.appendChild(controls.createIcon.call(this, props.icon));
              button.appendChild(controls.createLabel.call(this, props.label));
            }
            extend(attributes, getAttributesFromSelector(this.config.selectors.buttons[type], attributes));
            setAttributes(button, attributes);
            if (type === "play") {
              if (!is$1.array(this.elements.buttons[type])) {
                this.elements.buttons[type] = [];
              }
              this.elements.buttons[type].push(button);
            } else {
              this.elements.buttons[type] = button;
            }
            return button;
          },
          createRange: function createRange(type, attributes) {
            var input = createElement("input", extend(getAttributesFromSelector(this.config.selectors.inputs[type]), {
              type: "range",
              min: 0,
              max: 100,
              step: 0.01,
              value: 0,
              autocomplete: "off",
              role: "slider",
              "aria-label": i18n.get(type, this.config),
              "aria-valuemin": 0,
              "aria-valuemax": 100,
              "aria-valuenow": 0
            }, attributes));
            this.elements.inputs[type] = input;
            controls.updateRangeFill.call(this, input);
            RangeTouch.setup(input);
            return input;
          },
          createProgress: function createProgress(type, attributes) {
            var progress = createElement("progress", extend(getAttributesFromSelector(this.config.selectors.display[type]), {
              min: 0,
              max: 100,
              value: 0,
              role: "progressbar",
              "aria-hidden": true
            }, attributes));
            if (type !== "volume") {
              progress.appendChild(createElement("span", null, "0"));
              var suffixKey = {
                played: "played",
                buffer: "buffered"
              }[type];
              var suffix = suffixKey ? i18n.get(suffixKey, this.config) : "";
              progress.innerText = "% ".concat(suffix.toLowerCase());
            }
            this.elements.display[type] = progress;
            return progress;
          },
          createTime: function createTime(type, attrs) {
            var attributes = getAttributesFromSelector(this.config.selectors.display[type], attrs);
            var container = createElement("div", extend(attributes, {
              class: "".concat(attributes.class ? attributes.class : "", " ").concat(this.config.classNames.display.time, " ").trim(),
              "aria-label": i18n.get(type, this.config)
            }), "00:00");
            this.elements.display[type] = container;
            return container;
          },
          bindMenuItemShortcuts: function bindMenuItemShortcuts(menuItem, type) {
            var _this2 = this;
            on.call(this, menuItem, "keydown keyup", function(event2) {
              if (![32, 38, 39, 40].includes(event2.which)) {
                return;
              }
              event2.preventDefault();
              event2.stopPropagation();
              if (event2.type === "keydown") {
                return;
              }
              var isRadioButton = matches$1(menuItem, '[role="menuitemradio"]');
              if (!isRadioButton && [32, 39].includes(event2.which)) {
                controls.showMenuPanel.call(_this2, type, true);
              } else {
                var target;
                if (event2.which !== 32) {
                  if (event2.which === 40 || isRadioButton && event2.which === 39) {
                    target = menuItem.nextElementSibling;
                    if (!is$1.element(target)) {
                      target = menuItem.parentNode.firstElementChild;
                    }
                  } else {
                    target = menuItem.previousElementSibling;
                    if (!is$1.element(target)) {
                      target = menuItem.parentNode.lastElementChild;
                    }
                  }
                  setFocus.call(_this2, target, true);
                }
              }
            }, false);
            on.call(this, menuItem, "keyup", function(event2) {
              if (event2.which !== 13) {
                return;
              }
              controls.focusFirstMenuItem.call(_this2, null, true);
            });
          },
          createMenuItem: function createMenuItem(_ref) {
            var _this3 = this;
            var value = _ref.value, list = _ref.list, type = _ref.type, title = _ref.title, _ref$badge = _ref.badge, badge = _ref$badge === void 0 ? null : _ref$badge, _ref$checked = _ref.checked, checked = _ref$checked === void 0 ? false : _ref$checked;
            var attributes = getAttributesFromSelector(this.config.selectors.inputs[type]);
            var menuItem = createElement("button", extend(attributes, {
              type: "button",
              role: "menuitemradio",
              class: "".concat(this.config.classNames.control, " ").concat(attributes.class ? attributes.class : "").trim(),
              "aria-checked": checked,
              value
            }));
            var flex = createElement("span");
            flex.innerHTML = title;
            if (is$1.element(badge)) {
              flex.appendChild(badge);
            }
            menuItem.appendChild(flex);
            Object.defineProperty(menuItem, "checked", {
              enumerable: true,
              get: function get2() {
                return menuItem.getAttribute("aria-checked") === "true";
              },
              set: function set2(check2) {
                if (check2) {
                  Array.from(menuItem.parentNode.children).filter(function(node2) {
                    return matches$1(node2, '[role="menuitemradio"]');
                  }).forEach(function(node2) {
                    return node2.setAttribute("aria-checked", "false");
                  });
                }
                menuItem.setAttribute("aria-checked", check2 ? "true" : "false");
              }
            });
            this.listeners.bind(menuItem, "click keyup", function(event2) {
              if (is$1.keyboardEvent(event2) && event2.which !== 32) {
                return;
              }
              event2.preventDefault();
              event2.stopPropagation();
              menuItem.checked = true;
              switch (type) {
                case "language":
                  _this3.currentTrack = Number(value);
                  break;
                case "quality":
                  _this3.quality = value;
                  break;
                case "speed":
                  _this3.speed = parseFloat(value);
                  break;
              }
              controls.showMenuPanel.call(_this3, "home", is$1.keyboardEvent(event2));
            }, type, false);
            controls.bindMenuItemShortcuts.call(this, menuItem, type);
            list.appendChild(menuItem);
          },
          formatTime: function formatTime$1() {
            var time = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
            var inverted = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
            if (!is$1.number(time)) {
              return time;
            }
            var forceHours = getHours(this.duration) > 0;
            return formatTime(time, forceHours, inverted);
          },
          updateTimeDisplay: function updateTimeDisplay() {
            var target = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : null;
            var time = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
            var inverted = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : false;
            if (!is$1.element(target) || !is$1.number(time)) {
              return;
            }
            target.innerText = controls.formatTime(time, inverted);
          },
          updateVolume: function updateVolume() {
            if (!this.supported.ui) {
              return;
            }
            if (is$1.element(this.elements.inputs.volume)) {
              controls.setRange.call(this, this.elements.inputs.volume, this.muted ? 0 : this.volume);
            }
            if (is$1.element(this.elements.buttons.mute)) {
              this.elements.buttons.mute.pressed = this.muted || this.volume === 0;
            }
          },
          setRange: function setRange(target) {
            var value = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
            if (!is$1.element(target)) {
              return;
            }
            target.value = value;
            controls.updateRangeFill.call(this, target);
          },
          updateProgress: function updateProgress(event2) {
            var _this4 = this;
            if (!this.supported.ui || !is$1.event(event2)) {
              return;
            }
            var value = 0;
            var setProgress = function setProgress2(target, input) {
              var val2 = is$1.number(input) ? input : 0;
              var progress = is$1.element(target) ? target : _this4.elements.display.buffer;
              if (is$1.element(progress)) {
                progress.value = val2;
                var label = progress.getElementsByTagName("span")[0];
                if (is$1.element(label)) {
                  label.childNodes[0].nodeValue = val2;
                }
              }
            };
            if (event2) {
              switch (event2.type) {
                case "timeupdate":
                case "seeking":
                case "seeked":
                  value = getPercentage(this.currentTime, this.duration);
                  if (event2.type === "timeupdate") {
                    controls.setRange.call(this, this.elements.inputs.seek, value);
                  }
                  break;
                case "playing":
                case "progress":
                  setProgress(this.elements.display.buffer, this.buffered * 100);
                  break;
              }
            }
          },
          updateRangeFill: function updateRangeFill(target) {
            var range = is$1.event(target) ? target.target : target;
            if (!is$1.element(range) || range.getAttribute("type") !== "range") {
              return;
            }
            if (matches$1(range, this.config.selectors.inputs.seek)) {
              range.setAttribute("aria-valuenow", this.currentTime);
              var currentTime = controls.formatTime(this.currentTime);
              var duration = controls.formatTime(this.duration);
              var format3 = i18n.get("seekLabel", this.config);
              range.setAttribute("aria-valuetext", format3.replace("{currentTime}", currentTime).replace("{duration}", duration));
            } else if (matches$1(range, this.config.selectors.inputs.volume)) {
              var percent = range.value * 100;
              range.setAttribute("aria-valuenow", percent);
              range.setAttribute("aria-valuetext", "".concat(percent.toFixed(1), "%"));
            } else {
              range.setAttribute("aria-valuenow", range.value);
            }
            if (!browser.isWebkit) {
              return;
            }
            range.style.setProperty("--value", "".concat(range.value / range.max * 100, "%"));
          },
          updateSeekTooltip: function updateSeekTooltip(event2) {
            var _this5 = this;
            if (!this.config.tooltips.seek || !is$1.element(this.elements.inputs.seek) || !is$1.element(this.elements.display.seekTooltip) || this.duration === 0) {
              return;
            }
            var visible = "".concat(this.config.classNames.tooltip, "--visible");
            var toggle2 = function toggle3(show) {
              return toggleClass(_this5.elements.display.seekTooltip, visible, show);
            };
            if (this.touch) {
              toggle2(false);
              return;
            }
            var percent = 0;
            var clientRect = this.elements.progress.getBoundingClientRect();
            if (is$1.event(event2)) {
              percent = 100 / clientRect.width * (event2.pageX - clientRect.left);
            } else if (hasClass(this.elements.display.seekTooltip, visible)) {
              percent = parseFloat(this.elements.display.seekTooltip.style.left, 10);
            } else {
              return;
            }
            if (percent < 0) {
              percent = 0;
            } else if (percent > 100) {
              percent = 100;
            }
            controls.updateTimeDisplay.call(this, this.elements.display.seekTooltip, this.duration / 100 * percent);
            this.elements.display.seekTooltip.style.left = "".concat(percent, "%");
            if (is$1.event(event2) && ["mouseenter", "mouseleave"].includes(event2.type)) {
              toggle2(event2.type === "mouseenter");
            }
          },
          timeUpdate: function timeUpdate(event2) {
            var invert = !is$1.element(this.elements.display.duration) && this.config.invertTime;
            controls.updateTimeDisplay.call(this, this.elements.display.currentTime, invert ? this.duration - this.currentTime : this.currentTime, invert);
            if (event2 && event2.type === "timeupdate" && this.media.seeking) {
              return;
            }
            controls.updateProgress.call(this, event2);
          },
          durationUpdate: function durationUpdate() {
            if (!this.supported.ui || !this.config.invertTime && this.currentTime) {
              return;
            }
            if (this.duration >= Math.pow(2, 32)) {
              toggleHidden(this.elements.display.currentTime, true);
              toggleHidden(this.elements.progress, true);
              return;
            }
            if (is$1.element(this.elements.inputs.seek)) {
              this.elements.inputs.seek.setAttribute("aria-valuemax", this.duration);
            }
            var hasDuration = is$1.element(this.elements.display.duration);
            if (!hasDuration && this.config.displayDuration && this.paused) {
              controls.updateTimeDisplay.call(this, this.elements.display.currentTime, this.duration);
            }
            if (hasDuration) {
              controls.updateTimeDisplay.call(this, this.elements.display.duration, this.duration);
            }
            controls.updateSeekTooltip.call(this);
          },
          toggleMenuButton: function toggleMenuButton(setting, toggle2) {
            toggleHidden(this.elements.settings.buttons[setting], !toggle2);
          },
          updateSetting: function updateSetting(setting, container, input) {
            var pane = this.elements.settings.panels[setting];
            var value = null;
            var list = container;
            if (setting === "captions") {
              value = this.currentTrack;
            } else {
              value = !is$1.empty(input) ? input : this[setting];
              if (is$1.empty(value)) {
                value = this.config[setting].default;
              }
              if (!is$1.empty(this.options[setting]) && !this.options[setting].includes(value)) {
                this.debug.warn("Unsupported value of '".concat(value, "' for ").concat(setting));
                return;
              }
              if (!this.config[setting].options.includes(value)) {
                this.debug.warn("Disabled value of '".concat(value, "' for ").concat(setting));
                return;
              }
            }
            if (!is$1.element(list)) {
              list = pane && pane.querySelector('[role="menu"]');
            }
            if (!is$1.element(list)) {
              return;
            }
            var label = this.elements.settings.buttons[setting].querySelector(".".concat(this.config.classNames.menu.value));
            label.innerHTML = controls.getLabel.call(this, setting, value);
            var target = list && list.querySelector('[value="'.concat(value, '"]'));
            if (is$1.element(target)) {
              target.checked = true;
            }
          },
          getLabel: function getLabel(setting, value) {
            switch (setting) {
              case "speed":
                return value === 1 ? i18n.get("normal", this.config) : "".concat(value, "&times;");
              case "quality":
                if (is$1.number(value)) {
                  var label = i18n.get("qualityLabel.".concat(value), this.config);
                  if (!label.length) {
                    return "".concat(value, "p");
                  }
                  return label;
                }
                return toTitleCase(value);
              case "captions":
                return captions.getLabel.call(this);
              default:
                return null;
            }
          },
          setQualityMenu: function setQualityMenu(options) {
            var _this6 = this;
            if (!is$1.element(this.elements.settings.panels.quality)) {
              return;
            }
            var type = "quality";
            var list = this.elements.settings.panels.quality.querySelector('[role="menu"]');
            if (is$1.array(options)) {
              this.options.quality = dedupe(options).filter(function(quality) {
                return _this6.config.quality.options.includes(quality);
              });
            }
            var toggle2 = !is$1.empty(this.options.quality) && this.options.quality.length > 1;
            controls.toggleMenuButton.call(this, type, toggle2);
            emptyElement(list);
            controls.checkMenu.call(this);
            if (!toggle2) {
              return;
            }
            var getBadge = function getBadge2(quality) {
              var label = i18n.get("qualityBadge.".concat(quality), _this6.config);
              if (!label.length) {
                return null;
              }
              return controls.createBadge.call(_this6, label);
            };
            this.options.quality.sort(function(a2, b2) {
              var sorting = _this6.config.quality.options;
              return sorting.indexOf(a2) > sorting.indexOf(b2) ? 1 : -1;
            }).forEach(function(quality) {
              controls.createMenuItem.call(_this6, {
                value: quality,
                list,
                type,
                title: controls.getLabel.call(_this6, "quality", quality),
                badge: getBadge(quality)
              });
            });
            controls.updateSetting.call(this, type, list);
          },
          setCaptionsMenu: function setCaptionsMenu() {
            var _this7 = this;
            if (!is$1.element(this.elements.settings.panels.captions)) {
              return;
            }
            var type = "captions";
            var list = this.elements.settings.panels.captions.querySelector('[role="menu"]');
            var tracks = captions.getTracks.call(this);
            var toggle2 = Boolean(tracks.length);
            controls.toggleMenuButton.call(this, type, toggle2);
            emptyElement(list);
            controls.checkMenu.call(this);
            if (!toggle2) {
              return;
            }
            var options = tracks.map(function(track, value) {
              return {
                value,
                checked: _this7.captions.toggled && _this7.currentTrack === value,
                title: captions.getLabel.call(_this7, track),
                badge: track.language && controls.createBadge.call(_this7, track.language.toUpperCase()),
                list,
                type: "language"
              };
            });
            options.unshift({
              value: -1,
              checked: !this.captions.toggled,
              title: i18n.get("disabled", this.config),
              list,
              type: "language"
            });
            options.forEach(controls.createMenuItem.bind(this));
            controls.updateSetting.call(this, type, list);
          },
          setSpeedMenu: function setSpeedMenu() {
            var _this8 = this;
            if (!is$1.element(this.elements.settings.panels.speed)) {
              return;
            }
            var type = "speed";
            var list = this.elements.settings.panels.speed.querySelector('[role="menu"]');
            this.options.speed = this.options.speed.filter(function(o2) {
              return o2 >= _this8.minimumSpeed && o2 <= _this8.maximumSpeed;
            });
            var toggle2 = !is$1.empty(this.options.speed) && this.options.speed.length > 1;
            controls.toggleMenuButton.call(this, type, toggle2);
            emptyElement(list);
            controls.checkMenu.call(this);
            if (!toggle2) {
              return;
            }
            this.options.speed.forEach(function(speed) {
              controls.createMenuItem.call(_this8, {
                value: speed,
                list,
                type,
                title: controls.getLabel.call(_this8, "speed", speed)
              });
            });
            controls.updateSetting.call(this, type, list);
          },
          checkMenu: function checkMenu() {
            var buttons = this.elements.settings.buttons;
            var visible = !is$1.empty(buttons) && Object.values(buttons).some(function(button) {
              return !button.hidden;
            });
            toggleHidden(this.elements.settings.menu, !visible);
          },
          focusFirstMenuItem: function focusFirstMenuItem(pane) {
            var tabFocus = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
            if (this.elements.settings.popup.hidden) {
              return;
            }
            var target = pane;
            if (!is$1.element(target)) {
              target = Object.values(this.elements.settings.panels).find(function(p2) {
                return !p2.hidden;
              });
            }
            var firstItem = target.querySelector('[role^="menuitem"]');
            setFocus.call(this, firstItem, tabFocus);
          },
          toggleMenu: function toggleMenu(input) {
            var popup = this.elements.settings.popup;
            var button = this.elements.buttons.settings;
            if (!is$1.element(popup) || !is$1.element(button)) {
              return;
            }
            var hidden = popup.hidden;
            var show = hidden;
            if (is$1.boolean(input)) {
              show = input;
            } else if (is$1.keyboardEvent(input) && input.which === 27) {
              show = false;
            } else if (is$1.event(input)) {
              var target = is$1.function(input.composedPath) ? input.composedPath()[0] : input.target;
              var isMenuItem = popup.contains(target);
              if (isMenuItem || !isMenuItem && input.target !== button && show) {
                return;
              }
            }
            button.setAttribute("aria-expanded", show);
            toggleHidden(popup, !show);
            toggleClass(this.elements.container, this.config.classNames.menu.open, show);
            if (show && is$1.keyboardEvent(input)) {
              controls.focusFirstMenuItem.call(this, null, true);
            } else if (!show && !hidden) {
              setFocus.call(this, button, is$1.keyboardEvent(input));
            }
          },
          getMenuSize: function getMenuSize(tab) {
            var clone = tab.cloneNode(true);
            clone.style.position = "absolute";
            clone.style.opacity = 0;
            clone.removeAttribute("hidden");
            tab.parentNode.appendChild(clone);
            var width = clone.scrollWidth;
            var height = clone.scrollHeight;
            removeElement(clone);
            return {
              width,
              height
            };
          },
          showMenuPanel: function showMenuPanel() {
            var _this9 = this;
            var type = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "";
            var tabFocus = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
            var target = this.elements.container.querySelector("#plyr-settings-".concat(this.id, "-").concat(type));
            if (!is$1.element(target)) {
              return;
            }
            var container = target.parentNode;
            var current = Array.from(container.children).find(function(node2) {
              return !node2.hidden;
            });
            if (support.transitions && !support.reducedMotion) {
              container.style.width = "".concat(current.scrollWidth, "px");
              container.style.height = "".concat(current.scrollHeight, "px");
              var size = controls.getMenuSize.call(this, target);
              var restore = function restore2(event2) {
                if (event2.target !== container || !["width", "height"].includes(event2.propertyName)) {
                  return;
                }
                container.style.width = "";
                container.style.height = "";
                off.call(_this9, container, transitionEndEvent, restore2);
              };
              on.call(this, container, transitionEndEvent, restore);
              container.style.width = "".concat(size.width, "px");
              container.style.height = "".concat(size.height, "px");
            }
            toggleHidden(current, true);
            toggleHidden(target, false);
            controls.focusFirstMenuItem.call(this, target, tabFocus);
          },
          setDownloadUrl: function setDownloadUrl() {
            var button = this.elements.buttons.download;
            if (!is$1.element(button)) {
              return;
            }
            button.setAttribute("href", this.download);
          },
          create: function create(data2) {
            var _this10 = this;
            var bindMenuItemShortcuts = controls.bindMenuItemShortcuts, createButton = controls.createButton, createProgress = controls.createProgress, createRange = controls.createRange, createTime = controls.createTime, setQualityMenu = controls.setQualityMenu, setSpeedMenu = controls.setSpeedMenu, showMenuPanel = controls.showMenuPanel;
            this.elements.controls = null;
            if (is$1.array(this.config.controls) && this.config.controls.includes("play-large")) {
              this.elements.container.appendChild(createButton.call(this, "play-large"));
            }
            var container = createElement("div", getAttributesFromSelector(this.config.selectors.controls.wrapper));
            this.elements.controls = container;
            var defaultAttributes = {
              class: "plyr__controls__item"
            };
            dedupe(is$1.array(this.config.controls) ? this.config.controls : []).forEach(function(control) {
              if (control === "restart") {
                container.appendChild(createButton.call(_this10, "restart", defaultAttributes));
              }
              if (control === "rewind") {
                container.appendChild(createButton.call(_this10, "rewind", defaultAttributes));
              }
              if (control === "play") {
                container.appendChild(createButton.call(_this10, "play", defaultAttributes));
              }
              if (control === "fast-forward") {
                container.appendChild(createButton.call(_this10, "fast-forward", defaultAttributes));
              }
              if (control === "progress") {
                var progressContainer = createElement("div", {
                  class: "".concat(defaultAttributes.class, " plyr__progress__container")
                });
                var progress = createElement("div", getAttributesFromSelector(_this10.config.selectors.progress));
                progress.appendChild(createRange.call(_this10, "seek", {
                  id: "plyr-seek-".concat(data2.id)
                }));
                progress.appendChild(createProgress.call(_this10, "buffer"));
                if (_this10.config.tooltips.seek) {
                  var tooltip = createElement("span", {
                    class: _this10.config.classNames.tooltip
                  }, "00:00");
                  progress.appendChild(tooltip);
                  _this10.elements.display.seekTooltip = tooltip;
                }
                _this10.elements.progress = progress;
                progressContainer.appendChild(_this10.elements.progress);
                container.appendChild(progressContainer);
              }
              if (control === "current-time") {
                container.appendChild(createTime.call(_this10, "currentTime", defaultAttributes));
              }
              if (control === "duration") {
                container.appendChild(createTime.call(_this10, "duration", defaultAttributes));
              }
              if (control === "mute" || control === "volume") {
                var volume = _this10.elements.volume;
                if (!is$1.element(volume) || !container.contains(volume)) {
                  volume = createElement("div", extend({}, defaultAttributes, {
                    class: "".concat(defaultAttributes.class, " plyr__volume").trim()
                  }));
                  _this10.elements.volume = volume;
                  container.appendChild(volume);
                }
                if (control === "mute") {
                  volume.appendChild(createButton.call(_this10, "mute"));
                }
                if (control === "volume" && !browser.isIos) {
                  var attributes = {
                    max: 1,
                    step: 0.05,
                    value: _this10.config.volume
                  };
                  volume.appendChild(createRange.call(_this10, "volume", extend(attributes, {
                    id: "plyr-volume-".concat(data2.id)
                  })));
                }
              }
              if (control === "captions") {
                container.appendChild(createButton.call(_this10, "captions", defaultAttributes));
              }
              if (control === "settings" && !is$1.empty(_this10.config.settings)) {
                var wrapper = createElement("div", extend({}, defaultAttributes, {
                  class: "".concat(defaultAttributes.class, " plyr__menu").trim(),
                  hidden: ""
                }));
                wrapper.appendChild(createButton.call(_this10, "settings", {
                  "aria-haspopup": true,
                  "aria-controls": "plyr-settings-".concat(data2.id),
                  "aria-expanded": false
                }));
                var popup = createElement("div", {
                  class: "plyr__menu__container",
                  id: "plyr-settings-".concat(data2.id),
                  hidden: ""
                });
                var inner = createElement("div");
                var home = createElement("div", {
                  id: "plyr-settings-".concat(data2.id, "-home")
                });
                var menu = createElement("div", {
                  role: "menu"
                });
                home.appendChild(menu);
                inner.appendChild(home);
                _this10.elements.settings.panels.home = home;
                _this10.config.settings.forEach(function(type) {
                  var menuItem = createElement("button", extend(getAttributesFromSelector(_this10.config.selectors.buttons.settings), {
                    type: "button",
                    class: "".concat(_this10.config.classNames.control, " ").concat(_this10.config.classNames.control, "--forward"),
                    role: "menuitem",
                    "aria-haspopup": true,
                    hidden: ""
                  }));
                  bindMenuItemShortcuts.call(_this10, menuItem, type);
                  on.call(_this10, menuItem, "click", function() {
                    showMenuPanel.call(_this10, type, false);
                  });
                  var flex = createElement("span", null, i18n.get(type, _this10.config));
                  var value = createElement("span", {
                    class: _this10.config.classNames.menu.value
                  });
                  value.innerHTML = data2[type];
                  flex.appendChild(value);
                  menuItem.appendChild(flex);
                  menu.appendChild(menuItem);
                  var pane = createElement("div", {
                    id: "plyr-settings-".concat(data2.id, "-").concat(type),
                    hidden: ""
                  });
                  var backButton = createElement("button", {
                    type: "button",
                    class: "".concat(_this10.config.classNames.control, " ").concat(_this10.config.classNames.control, "--back")
                  });
                  backButton.appendChild(createElement("span", {
                    "aria-hidden": true
                  }, i18n.get(type, _this10.config)));
                  backButton.appendChild(createElement("span", {
                    class: _this10.config.classNames.hidden
                  }, i18n.get("menuBack", _this10.config)));
                  on.call(_this10, pane, "keydown", function(event2) {
                    if (event2.which !== 37) {
                      return;
                    }
                    event2.preventDefault();
                    event2.stopPropagation();
                    showMenuPanel.call(_this10, "home", true);
                  }, false);
                  on.call(_this10, backButton, "click", function() {
                    showMenuPanel.call(_this10, "home", false);
                  });
                  pane.appendChild(backButton);
                  pane.appendChild(createElement("div", {
                    role: "menu"
                  }));
                  inner.appendChild(pane);
                  _this10.elements.settings.buttons[type] = menuItem;
                  _this10.elements.settings.panels[type] = pane;
                });
                popup.appendChild(inner);
                wrapper.appendChild(popup);
                container.appendChild(wrapper);
                _this10.elements.settings.popup = popup;
                _this10.elements.settings.menu = wrapper;
              }
              if (control === "pip" && support.pip) {
                container.appendChild(createButton.call(_this10, "pip", defaultAttributes));
              }
              if (control === "airplay" && support.airplay) {
                container.appendChild(createButton.call(_this10, "airplay", defaultAttributes));
              }
              if (control === "download") {
                var _attributes = extend({}, defaultAttributes, {
                  element: "a",
                  href: _this10.download,
                  target: "_blank"
                });
                if (_this10.isHTML5) {
                  _attributes.download = "";
                }
                var download = _this10.config.urls.download;
                if (!is$1.url(download) && _this10.isEmbed) {
                  extend(_attributes, {
                    icon: "logo-".concat(_this10.provider),
                    label: _this10.provider
                  });
                }
                container.appendChild(createButton.call(_this10, "download", _attributes));
              }
              if (control === "fullscreen") {
                container.appendChild(createButton.call(_this10, "fullscreen", defaultAttributes));
              }
            });
            if (this.isHTML5) {
              setQualityMenu.call(this, html5.getQualityOptions.call(this));
            }
            setSpeedMenu.call(this);
            return container;
          },
          inject: function inject() {
            var _this11 = this;
            if (this.config.loadSprite) {
              var icon = controls.getIconUrl.call(this);
              if (icon.cors) {
                loadSprite(icon.url, "sprite-plyr");
              }
            }
            this.id = Math.floor(Math.random() * 1e4);
            var container = null;
            this.elements.controls = null;
            var props = {
              id: this.id,
              seektime: this.config.seekTime,
              title: this.config.title
            };
            var update = true;
            if (is$1.function(this.config.controls)) {
              this.config.controls = this.config.controls.call(this, props);
            }
            if (!this.config.controls) {
              this.config.controls = [];
            }
            if (is$1.element(this.config.controls) || is$1.string(this.config.controls)) {
              container = this.config.controls;
            } else {
              container = controls.create.call(this, {
                id: this.id,
                seektime: this.config.seekTime,
                speed: this.speed,
                quality: this.quality,
                captions: captions.getLabel.call(this)
              });
              update = false;
            }
            var replace2 = function replace3(input) {
              var result = input;
              Object.entries(props).forEach(function(_ref2) {
                var _ref3 = _slicedToArray(_ref2, 2), key3 = _ref3[0], value = _ref3[1];
                result = replaceAll(result, "{".concat(key3, "}"), value);
              });
              return result;
            };
            if (update) {
              if (is$1.string(this.config.controls)) {
                container = replace2(container);
              }
            }
            var target;
            if (is$1.string(this.config.selectors.controls.container)) {
              target = document.querySelector(this.config.selectors.controls.container);
            }
            if (!is$1.element(target)) {
              target = this.elements.container;
            }
            var insertMethod = is$1.element(container) ? "insertAdjacentElement" : "insertAdjacentHTML";
            target[insertMethod]("afterbegin", container);
            if (!is$1.element(this.elements.controls)) {
              controls.findElements.call(this);
            }
            if (!is$1.empty(this.elements.buttons)) {
              var addProperty = function addProperty2(button) {
                var className = _this11.config.classNames.controlPressed;
                Object.defineProperty(button, "pressed", {
                  enumerable: true,
                  get: function get2() {
                    return hasClass(button, className);
                  },
                  set: function set2() {
                    var pressed = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
                    toggleClass(button, className, pressed);
                  }
                });
              };
              Object.values(this.elements.buttons).filter(Boolean).forEach(function(button) {
                if (is$1.array(button) || is$1.nodeList(button)) {
                  Array.from(button).filter(Boolean).forEach(addProperty);
                } else {
                  addProperty(button);
                }
              });
            }
            if (browser.isEdge) {
              repaint(target);
            }
            if (this.config.tooltips.controls) {
              var _this$config = this.config, classNames = _this$config.classNames, selectors = _this$config.selectors;
              var selector = "".concat(selectors.controls.wrapper, " ").concat(selectors.labels, " .").concat(classNames.hidden);
              var labels = getElements.call(this, selector);
              Array.from(labels).forEach(function(label) {
                toggleClass(label, _this11.config.classNames.hidden, false);
                toggleClass(label, _this11.config.classNames.tooltip, true);
              });
            }
          }
        };
        function parseUrl(input) {
          var safe = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
          var url = input;
          if (safe) {
            var parser = document.createElement("a");
            parser.href = url;
            url = parser.href;
          }
          try {
            return new URL(url);
          } catch (e2) {
            return null;
          }
        }
        function buildUrlParams(input) {
          var params = new URLSearchParams();
          if (is$1.object(input)) {
            Object.entries(input).forEach(function(_ref) {
              var _ref2 = _slicedToArray(_ref, 2), key3 = _ref2[0], value = _ref2[1];
              params.set(key3, value);
            });
          }
          return params;
        }
        var captions = {
          setup: function setup() {
            if (!this.supported.ui) {
              return;
            }
            if (!this.isVideo || this.isYouTube || this.isHTML5 && !support.textTracks) {
              if (is$1.array(this.config.controls) && this.config.controls.includes("settings") && this.config.settings.includes("captions")) {
                controls.setCaptionsMenu.call(this);
              }
              return;
            }
            if (!is$1.element(this.elements.captions)) {
              this.elements.captions = createElement("div", getAttributesFromSelector(this.config.selectors.captions));
              insertAfter(this.elements.captions, this.elements.wrapper);
            }
            if (browser.isIE && window.URL) {
              var elements = this.media.querySelectorAll("track");
              Array.from(elements).forEach(function(track) {
                var src = track.getAttribute("src");
                var url = parseUrl(src);
                if (url !== null && url.hostname !== window.location.href.hostname && ["http:", "https:"].includes(url.protocol)) {
                  fetch2(src, "blob").then(function(blob) {
                    track.setAttribute("src", window.URL.createObjectURL(blob));
                  }).catch(function() {
                    removeElement(track);
                  });
                }
              });
            }
            var browserLanguages = navigator.languages || [navigator.language || navigator.userLanguage || "en"];
            var languages = dedupe(browserLanguages.map(function(language2) {
              return language2.split("-")[0];
            }));
            var language = (this.storage.get("language") || this.config.captions.language || "auto").toLowerCase();
            if (language === "auto") {
              var _languages = _slicedToArray(languages, 1);
              language = _languages[0];
            }
            var active = this.storage.get("captions");
            if (!is$1.boolean(active)) {
              active = this.config.captions.active;
            }
            Object.assign(this.captions, {
              toggled: false,
              active,
              language,
              languages
            });
            if (this.isHTML5) {
              var trackEvents = this.config.captions.update ? "addtrack removetrack" : "removetrack";
              on.call(this, this.media.textTracks, trackEvents, captions.update.bind(this));
            }
            setTimeout(captions.update.bind(this), 0);
          },
          update: function update() {
            var _this = this;
            var tracks = captions.getTracks.call(this, true);
            var _this$captions = this.captions, active = _this$captions.active, language = _this$captions.language, meta2 = _this$captions.meta, currentTrackNode = _this$captions.currentTrackNode;
            var languageExists = Boolean(tracks.find(function(track) {
              return track.language === language;
            }));
            if (this.isHTML5 && this.isVideo) {
              tracks.filter(function(track) {
                return !meta2.get(track);
              }).forEach(function(track) {
                _this.debug.log("Track added", track);
                meta2.set(track, {
                  default: track.mode === "showing"
                });
                if (track.mode === "showing") {
                  track.mode = "hidden";
                }
                on.call(_this, track, "cuechange", function() {
                  return captions.updateCues.call(_this);
                });
              });
            }
            if (languageExists && this.language !== language || !tracks.includes(currentTrackNode)) {
              captions.setLanguage.call(this, language);
              captions.toggle.call(this, active && languageExists);
            }
            toggleClass(this.elements.container, this.config.classNames.captions.enabled, !is$1.empty(tracks));
            if (is$1.array(this.config.controls) && this.config.controls.includes("settings") && this.config.settings.includes("captions")) {
              controls.setCaptionsMenu.call(this);
            }
          },
          toggle: function toggle2(input) {
            var _this2 = this;
            var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
            if (!this.supported.ui) {
              return;
            }
            var toggled = this.captions.toggled;
            var activeClass = this.config.classNames.captions.active;
            var active = is$1.nullOrUndefined(input) ? !toggled : input;
            if (active !== toggled) {
              if (!passive) {
                this.captions.active = active;
                this.storage.set({
                  captions: active
                });
              }
              if (!this.language && active && !passive) {
                var tracks = captions.getTracks.call(this);
                var track = captions.findTrack.call(this, [this.captions.language].concat(_toConsumableArray(this.captions.languages)), true);
                this.captions.language = track.language;
                captions.set.call(this, tracks.indexOf(track));
                return;
              }
              if (this.elements.buttons.captions) {
                this.elements.buttons.captions.pressed = active;
              }
              toggleClass(this.elements.container, activeClass, active);
              this.captions.toggled = active;
              controls.updateSetting.call(this, "captions");
              triggerEvent.call(this, this.media, active ? "captionsenabled" : "captionsdisabled");
            }
            setTimeout(function() {
              if (active && _this2.captions.toggled) {
                _this2.captions.currentTrackNode.mode = "hidden";
              }
            });
          },
          set: function set2(index2) {
            var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
            var tracks = captions.getTracks.call(this);
            if (index2 === -1) {
              captions.toggle.call(this, false, passive);
              return;
            }
            if (!is$1.number(index2)) {
              this.debug.warn("Invalid caption argument", index2);
              return;
            }
            if (!(index2 in tracks)) {
              this.debug.warn("Track not found", index2);
              return;
            }
            if (this.captions.currentTrack !== index2) {
              this.captions.currentTrack = index2;
              var track = tracks[index2];
              var _ref = track || {}, language = _ref.language;
              this.captions.currentTrackNode = track;
              controls.updateSetting.call(this, "captions");
              if (!passive) {
                this.captions.language = language;
                this.storage.set({
                  language
                });
              }
              if (this.isVimeo) {
                this.embed.enableTextTrack(language);
              }
              triggerEvent.call(this, this.media, "languagechange");
            }
            captions.toggle.call(this, true, passive);
            if (this.isHTML5 && this.isVideo) {
              captions.updateCues.call(this);
            }
          },
          setLanguage: function setLanguage(input) {
            var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
            if (!is$1.string(input)) {
              this.debug.warn("Invalid language argument", input);
              return;
            }
            var language = input.toLowerCase();
            this.captions.language = language;
            var tracks = captions.getTracks.call(this);
            var track = captions.findTrack.call(this, [language]);
            captions.set.call(this, tracks.indexOf(track), passive);
          },
          getTracks: function getTracks() {
            var _this3 = this;
            var update = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
            var tracks = Array.from((this.media || {}).textTracks || []);
            return tracks.filter(function(track) {
              return !_this3.isHTML5 || update || _this3.captions.meta.has(track);
            }).filter(function(track) {
              return ["captions", "subtitles"].includes(track.kind);
            });
          },
          findTrack: function findTrack(languages) {
            var _this4 = this;
            var force = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
            var tracks = captions.getTracks.call(this);
            var sortIsDefault = function sortIsDefault2(track2) {
              return Number((_this4.captions.meta.get(track2) || {}).default);
            };
            var sorted = Array.from(tracks).sort(function(a2, b2) {
              return sortIsDefault(b2) - sortIsDefault(a2);
            });
            var track;
            languages.every(function(language) {
              track = sorted.find(function(t3) {
                return t3.language === language;
              });
              return !track;
            });
            return track || (force ? sorted[0] : void 0);
          },
          getCurrentTrack: function getCurrentTrack() {
            return captions.getTracks.call(this)[this.currentTrack];
          },
          getLabel: function getLabel(track) {
            var currentTrack = track;
            if (!is$1.track(currentTrack) && support.textTracks && this.captions.toggled) {
              currentTrack = captions.getCurrentTrack.call(this);
            }
            if (is$1.track(currentTrack)) {
              if (!is$1.empty(currentTrack.label)) {
                return currentTrack.label;
              }
              if (!is$1.empty(currentTrack.language)) {
                return track.language.toUpperCase();
              }
              return i18n.get("enabled", this.config);
            }
            return i18n.get("disabled", this.config);
          },
          updateCues: function updateCues(input) {
            if (!this.supported.ui) {
              return;
            }
            if (!is$1.element(this.elements.captions)) {
              this.debug.warn("No captions element to render to");
              return;
            }
            if (!is$1.nullOrUndefined(input) && !Array.isArray(input)) {
              this.debug.warn("updateCues: Invalid input", input);
              return;
            }
            var cues = input;
            if (!cues) {
              var track = captions.getCurrentTrack.call(this);
              cues = Array.from((track || {}).activeCues || []).map(function(cue) {
                return cue.getCueAsHTML();
              }).map(getHTML);
            }
            var content = cues.map(function(cueText) {
              return cueText.trim();
            }).join("\n");
            var changed = content !== this.elements.captions.innerHTML;
            if (changed) {
              emptyElement(this.elements.captions);
              var caption = createElement("span", getAttributesFromSelector(this.config.selectors.caption));
              caption.innerHTML = content;
              this.elements.captions.appendChild(caption);
              triggerEvent.call(this, this.media, "cuechange");
            }
          }
        };
        var defaults$1 = {
          enabled: true,
          title: "",
          debug: false,
          autoplay: false,
          autopause: true,
          playsinline: true,
          seekTime: 10,
          volume: 1,
          muted: false,
          duration: null,
          displayDuration: true,
          invertTime: true,
          toggleInvert: true,
          ratio: null,
          clickToPlay: true,
          hideControls: true,
          resetOnEnd: false,
          disableContextMenu: true,
          loadSprite: true,
          iconPrefix: "plyr",
          iconUrl: "https://cdn.plyr.io/3.6.2/plyr.svg",
          blankVideo: "https://cdn.plyr.io/static/blank.mp4",
          quality: {
            default: 576,
            options: [4320, 2880, 2160, 1440, 1080, 720, 576, 480, 360, 240],
            forced: false,
            onChange: null
          },
          loop: {
            active: false
          },
          speed: {
            selected: 1,
            options: [0.5, 0.75, 1, 1.25, 1.5, 1.75, 2, 4]
          },
          keyboard: {
            focused: true,
            global: false
          },
          tooltips: {
            controls: false,
            seek: true
          },
          captions: {
            active: false,
            language: "auto",
            update: false
          },
          fullscreen: {
            enabled: true,
            fallback: true,
            iosNative: false
          },
          storage: {
            enabled: true,
            key: "plyr"
          },
          controls: [
            "play-large",
            "play",
            "progress",
            "current-time",
            "mute",
            "volume",
            "captions",
            "settings",
            "pip",
            "airplay",
            "fullscreen"
          ],
          settings: ["captions", "quality", "speed"],
          i18n: {
            restart: "Restart",
            rewind: "Rewind {seektime}s",
            play: "Play",
            pause: "Pause",
            fastForward: "Forward {seektime}s",
            seek: "Seek",
            seekLabel: "{currentTime} of {duration}",
            played: "Played",
            buffered: "Buffered",
            currentTime: "Current time",
            duration: "Duration",
            volume: "Volume",
            mute: "Mute",
            unmute: "Unmute",
            enableCaptions: "Enable captions",
            disableCaptions: "Disable captions",
            download: "Download",
            enterFullscreen: "Enter fullscreen",
            exitFullscreen: "Exit fullscreen",
            frameTitle: "Player for {title}",
            captions: "Captions",
            settings: "Settings",
            pip: "PIP",
            menuBack: "Go back to previous menu",
            speed: "Speed",
            normal: "Normal",
            quality: "Quality",
            loop: "Loop",
            start: "Start",
            end: "End",
            all: "All",
            reset: "Reset",
            disabled: "Disabled",
            enabled: "Enabled",
            advertisement: "Ad",
            qualityBadge: {
              2160: "4K",
              1440: "HD",
              1080: "HD",
              720: "HD",
              576: "SD",
              480: "SD"
            }
          },
          urls: {
            download: null,
            vimeo: {
              sdk: "https://player.vimeo.com/api/player.js",
              iframe: "https://player.vimeo.com/video/{0}?{1}",
              api: "https://vimeo.com/api/v2/video/{0}.json"
            },
            youtube: {
              sdk: "https://www.youtube.com/iframe_api",
              api: "https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"
            },
            googleIMA: {
              sdk: "https://imasdk.googleapis.com/js/sdkloader/ima3.js"
            }
          },
          listeners: {
            seek: null,
            play: null,
            pause: null,
            restart: null,
            rewind: null,
            fastForward: null,
            mute: null,
            volume: null,
            captions: null,
            download: null,
            fullscreen: null,
            pip: null,
            airplay: null,
            speed: null,
            quality: null,
            loop: null,
            language: null
          },
          events: [
            "ended",
            "progress",
            "stalled",
            "playing",
            "waiting",
            "canplay",
            "canplaythrough",
            "loadstart",
            "loadeddata",
            "loadedmetadata",
            "timeupdate",
            "volumechange",
            "play",
            "pause",
            "error",
            "seeking",
            "seeked",
            "emptied",
            "ratechange",
            "cuechange",
            "download",
            "enterfullscreen",
            "exitfullscreen",
            "captionsenabled",
            "captionsdisabled",
            "languagechange",
            "controlshidden",
            "controlsshown",
            "ready",
            "statechange",
            "qualitychange",
            "adsloaded",
            "adscontentpause",
            "adscontentresume",
            "adstarted",
            "adsmidpoint",
            "adscomplete",
            "adsallcomplete",
            "adsimpression",
            "adsclick"
          ],
          selectors: {
            editable: "input, textarea, select, [contenteditable]",
            container: ".plyr",
            controls: {
              container: null,
              wrapper: ".plyr__controls"
            },
            labels: "[data-plyr]",
            buttons: {
              play: '[data-plyr="play"]',
              pause: '[data-plyr="pause"]',
              restart: '[data-plyr="restart"]',
              rewind: '[data-plyr="rewind"]',
              fastForward: '[data-plyr="fast-forward"]',
              mute: '[data-plyr="mute"]',
              captions: '[data-plyr="captions"]',
              download: '[data-plyr="download"]',
              fullscreen: '[data-plyr="fullscreen"]',
              pip: '[data-plyr="pip"]',
              airplay: '[data-plyr="airplay"]',
              settings: '[data-plyr="settings"]',
              loop: '[data-plyr="loop"]'
            },
            inputs: {
              seek: '[data-plyr="seek"]',
              volume: '[data-plyr="volume"]',
              speed: '[data-plyr="speed"]',
              language: '[data-plyr="language"]',
              quality: '[data-plyr="quality"]'
            },
            display: {
              currentTime: ".plyr__time--current",
              duration: ".plyr__time--duration",
              buffer: ".plyr__progress__buffer",
              loop: ".plyr__progress__loop",
              volume: ".plyr__volume--display"
            },
            progress: ".plyr__progress",
            captions: ".plyr__captions",
            caption: ".plyr__caption"
          },
          classNames: {
            type: "plyr--{0}",
            provider: "plyr--{0}",
            video: "plyr__video-wrapper",
            embed: "plyr__video-embed",
            videoFixedRatio: "plyr__video-wrapper--fixed-ratio",
            embedContainer: "plyr__video-embed__container",
            poster: "plyr__poster",
            posterEnabled: "plyr__poster-enabled",
            ads: "plyr__ads",
            control: "plyr__control",
            controlPressed: "plyr__control--pressed",
            playing: "plyr--playing",
            paused: "plyr--paused",
            stopped: "plyr--stopped",
            loading: "plyr--loading",
            hover: "plyr--hover",
            tooltip: "plyr__tooltip",
            cues: "plyr__cues",
            hidden: "plyr__sr-only",
            hideControls: "plyr--hide-controls",
            isIos: "plyr--is-ios",
            isTouch: "plyr--is-touch",
            uiSupported: "plyr--full-ui",
            noTransition: "plyr--no-transition",
            display: {
              time: "plyr__time"
            },
            menu: {
              value: "plyr__menu__value",
              badge: "plyr__badge",
              open: "plyr--menu-open"
            },
            captions: {
              enabled: "plyr--captions-enabled",
              active: "plyr--captions-active"
            },
            fullscreen: {
              enabled: "plyr--fullscreen-enabled",
              fallback: "plyr--fullscreen-fallback"
            },
            pip: {
              supported: "plyr--pip-supported",
              active: "plyr--pip-active"
            },
            airplay: {
              supported: "plyr--airplay-supported",
              active: "plyr--airplay-active"
            },
            tabFocus: "plyr__tab-focus",
            previewThumbnails: {
              thumbContainer: "plyr__preview-thumb",
              thumbContainerShown: "plyr__preview-thumb--is-shown",
              imageContainer: "plyr__preview-thumb__image-container",
              timeContainer: "plyr__preview-thumb__time-container",
              scrubbingContainer: "plyr__preview-scrubbing",
              scrubbingContainerShown: "plyr__preview-scrubbing--is-shown"
            }
          },
          attributes: {
            embed: {
              provider: "data-plyr-provider",
              id: "data-plyr-embed-id"
            }
          },
          ads: {
            enabled: false,
            publisherId: "",
            tagUrl: ""
          },
          previewThumbnails: {
            enabled: false,
            src: ""
          },
          vimeo: {
            byline: false,
            portrait: false,
            title: false,
            speed: true,
            transparent: false,
            premium: false,
            referrerPolicy: null
          },
          youtube: {
            noCookie: true,
            rel: 0,
            showinfo: 0,
            iv_load_policy: 3,
            modestbranding: 1
          }
        };
        var pip = {
          active: "picture-in-picture",
          inactive: "inline"
        };
        var providers = {
          html5: "html5",
          youtube: "youtube",
          vimeo: "vimeo"
        };
        var types = {
          audio: "audio",
          video: "video"
        };
        function getProviderByUrl(url) {
          if (/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(url)) {
            return providers.youtube;
          }
          if (/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(url)) {
            return providers.vimeo;
          }
          return null;
        }
        var noop = function noop2() {
        };
        var Console = /* @__PURE__ */ function() {
          function Console2() {
            var enabled = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
            _classCallCheck(this, Console2);
            this.enabled = window.console && enabled;
            if (this.enabled) {
              this.log("Debugging enabled");
            }
          }
          _createClass(Console2, [{
            key: "log",
            get: function get2() {
              return this.enabled ? Function.prototype.bind.call(console.log, console) : noop;
            }
          }, {
            key: "warn",
            get: function get2() {
              return this.enabled ? Function.prototype.bind.call(console.warn, console) : noop;
            }
          }, {
            key: "error",
            get: function get2() {
              return this.enabled ? Function.prototype.bind.call(console.error, console) : noop;
            }
          }]);
          return Console2;
        }();
        var Fullscreen = /* @__PURE__ */ function() {
          function Fullscreen2(player) {
            var _this = this;
            _classCallCheck(this, Fullscreen2);
            this.player = player;
            this.prefix = Fullscreen2.prefix;
            this.property = Fullscreen2.property;
            this.scrollPosition = {
              x: 0,
              y: 0
            };
            this.forceFallback = player.config.fullscreen.fallback === "force";
            this.player.elements.fullscreen = player.config.fullscreen.container && closest(this.player.elements.container, player.config.fullscreen.container);
            on.call(this.player, document, this.prefix === "ms" ? "MSFullscreenChange" : "".concat(this.prefix, "fullscreenchange"), function() {
              _this.onChange();
            });
            on.call(this.player, this.player.elements.container, "dblclick", function(event2) {
              if (is$1.element(_this.player.elements.controls) && _this.player.elements.controls.contains(event2.target)) {
                return;
              }
              _this.toggle();
            });
            on.call(this, this.player.elements.container, "keydown", function(event2) {
              return _this.trapFocus(event2);
            });
            this.update();
          }
          _createClass(Fullscreen2, [{
            key: "onChange",
            value: function onChange() {
              if (!this.enabled) {
                return;
              }
              var button = this.player.elements.buttons.fullscreen;
              if (is$1.element(button)) {
                button.pressed = this.active;
              }
              triggerEvent.call(this.player, this.target, this.active ? "enterfullscreen" : "exitfullscreen", true);
            }
          }, {
            key: "toggleFallback",
            value: function toggleFallback() {
              var toggle2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
              if (toggle2) {
                this.scrollPosition = {
                  x: window.scrollX || 0,
                  y: window.scrollY || 0
                };
              } else {
                window.scrollTo(this.scrollPosition.x, this.scrollPosition.y);
              }
              document.body.style.overflow = toggle2 ? "hidden" : "";
              toggleClass(this.target, this.player.config.classNames.fullscreen.fallback, toggle2);
              if (browser.isIos) {
                var viewport = document.head.querySelector('meta[name="viewport"]');
                var property = "viewport-fit=cover";
                if (!viewport) {
                  viewport = document.createElement("meta");
                  viewport.setAttribute("name", "viewport");
                }
                var hasProperty = is$1.string(viewport.content) && viewport.content.includes(property);
                if (toggle2) {
                  this.cleanupViewport = !hasProperty;
                  if (!hasProperty) {
                    viewport.content += ",".concat(property);
                  }
                } else if (this.cleanupViewport) {
                  viewport.content = viewport.content.split(",").filter(function(part) {
                    return part.trim() !== property;
                  }).join(",");
                }
              }
              this.onChange();
            }
          }, {
            key: "trapFocus",
            value: function trapFocus(event2) {
              if (browser.isIos || !this.active || event2.key !== "Tab" || event2.keyCode !== 9) {
                return;
              }
              var focused = document.activeElement;
              var focusable = getElements.call(this.player, "a[href], button:not(:disabled), input:not(:disabled), [tabindex]");
              var _focusable = _slicedToArray(focusable, 1), first2 = _focusable[0];
              var last2 = focusable[focusable.length - 1];
              if (focused === last2 && !event2.shiftKey) {
                first2.focus();
                event2.preventDefault();
              } else if (focused === first2 && event2.shiftKey) {
                last2.focus();
                event2.preventDefault();
              }
            }
          }, {
            key: "update",
            value: function update() {
              if (this.enabled) {
                var mode;
                if (this.forceFallback) {
                  mode = "Fallback (forced)";
                } else if (Fullscreen2.native) {
                  mode = "Native";
                } else {
                  mode = "Fallback";
                }
                this.player.debug.log("".concat(mode, " fullscreen enabled"));
              } else {
                this.player.debug.log("Fullscreen not supported and fallback disabled");
              }
              toggleClass(this.player.elements.container, this.player.config.classNames.fullscreen.enabled, this.enabled);
            }
          }, {
            key: "enter",
            value: function enter() {
              if (!this.enabled) {
                return;
              }
              if (browser.isIos && this.player.config.fullscreen.iosNative) {
                this.target.webkitEnterFullscreen();
              } else if (!Fullscreen2.native || this.forceFallback) {
                this.toggleFallback(true);
              } else if (!this.prefix) {
                this.target.requestFullscreen({
                  navigationUI: "hide"
                });
              } else if (!is$1.empty(this.prefix)) {
                this.target["".concat(this.prefix, "Request").concat(this.property)]();
              }
            }
          }, {
            key: "exit",
            value: function exit() {
              if (!this.enabled) {
                return;
              }
              if (browser.isIos && this.player.config.fullscreen.iosNative) {
                this.target.webkitExitFullscreen();
                silencePromise(this.player.play());
              } else if (!Fullscreen2.native || this.forceFallback) {
                this.toggleFallback(false);
              } else if (!this.prefix) {
                (document.cancelFullScreen || document.exitFullscreen).call(document);
              } else if (!is$1.empty(this.prefix)) {
                var action = this.prefix === "moz" ? "Cancel" : "Exit";
                document["".concat(this.prefix).concat(action).concat(this.property)]();
              }
            }
          }, {
            key: "toggle",
            value: function toggle2() {
              if (!this.active) {
                this.enter();
              } else {
                this.exit();
              }
            }
          }, {
            key: "usingNative",
            get: function get2() {
              return Fullscreen2.native && !this.forceFallback;
            }
          }, {
            key: "enabled",
            get: function get2() {
              return (Fullscreen2.native || this.player.config.fullscreen.fallback) && this.player.config.fullscreen.enabled && this.player.supported.ui && this.player.isVideo;
            }
          }, {
            key: "active",
            get: function get2() {
              if (!this.enabled) {
                return false;
              }
              if (!Fullscreen2.native || this.forceFallback) {
                return hasClass(this.target, this.player.config.classNames.fullscreen.fallback);
              }
              var element = !this.prefix ? document.fullscreenElement : document["".concat(this.prefix).concat(this.property, "Element")];
              return element && element.shadowRoot ? element === this.target.getRootNode().host : element === this.target;
            }
          }, {
            key: "target",
            get: function get2() {
              return browser.isIos && this.player.config.fullscreen.iosNative ? this.player.media : this.player.elements.fullscreen || this.player.elements.container;
            }
          }], [{
            key: "native",
            get: function get2() {
              return !!(document.fullscreenEnabled || document.webkitFullscreenEnabled || document.mozFullScreenEnabled || document.msFullscreenEnabled);
            }
          }, {
            key: "prefix",
            get: function get2() {
              if (is$1.function(document.exitFullscreen)) {
                return "";
              }
              var value = "";
              var prefixes = ["webkit", "moz", "ms"];
              prefixes.some(function(pre) {
                if (is$1.function(document["".concat(pre, "ExitFullscreen")]) || is$1.function(document["".concat(pre, "CancelFullScreen")])) {
                  value = pre;
                  return true;
                }
                return false;
              });
              return value;
            }
          }, {
            key: "property",
            get: function get2() {
              return this.prefix === "moz" ? "FullScreen" : "Fullscreen";
            }
          }]);
          return Fullscreen2;
        }();
        var mathSign = Math.sign || function sign(x2) {
          return (x2 = +x2) == 0 || x2 != x2 ? x2 : x2 < 0 ? -1 : 1;
        };
        _export({ target: "Math", stat: true }, {
          sign: mathSign
        });
        function loadImage(src) {
          var minWidth = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 1;
          return new Promise(function(resolve, reject) {
            var image = new Image();
            var handler = function handler2() {
              delete image.onload;
              delete image.onerror;
              (image.naturalWidth >= minWidth ? resolve : reject)(image);
            };
            Object.assign(image, {
              onload: handler,
              onerror: handler,
              src
            });
          });
        }
        var ui = {
          addStyleHook: function addStyleHook() {
            toggleClass(this.elements.container, this.config.selectors.container.replace(".", ""), true);
            toggleClass(this.elements.container, this.config.classNames.uiSupported, this.supported.ui);
          },
          toggleNativeControls: function toggleNativeControls() {
            var toggle2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
            if (toggle2 && this.isHTML5) {
              this.media.setAttribute("controls", "");
            } else {
              this.media.removeAttribute("controls");
            }
          },
          build: function build() {
            var _this = this;
            this.listeners.media();
            if (!this.supported.ui) {
              this.debug.warn("Basic support only for ".concat(this.provider, " ").concat(this.type));
              ui.toggleNativeControls.call(this, true);
              return;
            }
            if (!is$1.element(this.elements.controls)) {
              controls.inject.call(this);
              this.listeners.controls();
            }
            ui.toggleNativeControls.call(this);
            if (this.isHTML5) {
              captions.setup.call(this);
            }
            this.volume = null;
            this.muted = null;
            this.loop = null;
            this.quality = null;
            this.speed = null;
            controls.updateVolume.call(this);
            controls.timeUpdate.call(this);
            ui.checkPlaying.call(this);
            toggleClass(this.elements.container, this.config.classNames.pip.supported, support.pip && this.isHTML5 && this.isVideo);
            toggleClass(this.elements.container, this.config.classNames.airplay.supported, support.airplay && this.isHTML5);
            toggleClass(this.elements.container, this.config.classNames.isIos, browser.isIos);
            toggleClass(this.elements.container, this.config.classNames.isTouch, this.touch);
            this.ready = true;
            setTimeout(function() {
              triggerEvent.call(_this, _this.media, "ready");
            }, 0);
            ui.setTitle.call(this);
            if (this.poster) {
              ui.setPoster.call(this, this.poster, false).catch(function() {
              });
            }
            if (this.config.duration) {
              controls.durationUpdate.call(this);
            }
          },
          setTitle: function setTitle() {
            var label = i18n.get("play", this.config);
            if (is$1.string(this.config.title) && !is$1.empty(this.config.title)) {
              label += ", ".concat(this.config.title);
            }
            Array.from(this.elements.buttons.play || []).forEach(function(button) {
              button.setAttribute("aria-label", label);
            });
            if (this.isEmbed) {
              var iframe = getElement.call(this, "iframe");
              if (!is$1.element(iframe)) {
                return;
              }
              var title = !is$1.empty(this.config.title) ? this.config.title : "video";
              var format3 = i18n.get("frameTitle", this.config);
              iframe.setAttribute("title", format3.replace("{title}", title));
            }
          },
          togglePoster: function togglePoster(enable) {
            toggleClass(this.elements.container, this.config.classNames.posterEnabled, enable);
          },
          setPoster: function setPoster(poster) {
            var _this2 = this;
            var passive = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
            if (passive && this.poster) {
              return Promise.reject(new Error("Poster already set"));
            }
            this.media.setAttribute("data-poster", poster);
            return ready.call(this).then(function() {
              return loadImage(poster);
            }).catch(function(err) {
              if (poster === _this2.poster) {
                ui.togglePoster.call(_this2, false);
              }
              throw err;
            }).then(function() {
              if (poster !== _this2.poster) {
                throw new Error("setPoster cancelled by later call to setPoster");
              }
            }).then(function() {
              Object.assign(_this2.elements.poster.style, {
                backgroundImage: "url('".concat(poster, "')"),
                backgroundSize: ""
              });
              ui.togglePoster.call(_this2, true);
              return poster;
            });
          },
          checkPlaying: function checkPlaying(event2) {
            var _this3 = this;
            toggleClass(this.elements.container, this.config.classNames.playing, this.playing);
            toggleClass(this.elements.container, this.config.classNames.paused, this.paused);
            toggleClass(this.elements.container, this.config.classNames.stopped, this.stopped);
            Array.from(this.elements.buttons.play || []).forEach(function(target) {
              Object.assign(target, {
                pressed: _this3.playing
              });
              target.setAttribute("aria-label", i18n.get(_this3.playing ? "pause" : "play", _this3.config));
            });
            if (is$1.event(event2) && event2.type === "timeupdate") {
              return;
            }
            ui.toggleControls.call(this);
          },
          checkLoading: function checkLoading(event2) {
            var _this4 = this;
            this.loading = ["stalled", "waiting"].includes(event2.type);
            clearTimeout(this.timers.loading);
            this.timers.loading = setTimeout(function() {
              toggleClass(_this4.elements.container, _this4.config.classNames.loading, _this4.loading);
              ui.toggleControls.call(_this4);
            }, this.loading ? 250 : 0);
          },
          toggleControls: function toggleControls(force) {
            var controlsElement = this.elements.controls;
            if (controlsElement && this.config.hideControls) {
              var recentTouchSeek = this.touch && this.lastSeekTime + 2e3 > Date.now();
              this.toggleControls(Boolean(force || this.loading || this.paused || controlsElement.pressed || controlsElement.hover || recentTouchSeek));
            }
          },
          migrateStyles: function migrateStyles() {
            var _this5 = this;
            Object.values(_objectSpread2({}, this.media.style)).filter(function(key3) {
              return !is$1.empty(key3) && key3.startsWith("--plyr");
            }).forEach(function(key3) {
              _this5.elements.container.style.setProperty(key3, _this5.media.style.getPropertyValue(key3));
              _this5.media.style.removeProperty(key3);
            });
            if (is$1.empty(this.media.style)) {
              this.media.removeAttribute("style");
            }
          }
        };
        var Listeners = /* @__PURE__ */ function() {
          function Listeners2(player) {
            _classCallCheck(this, Listeners2);
            this.player = player;
            this.lastKey = null;
            this.focusTimer = null;
            this.lastKeyDown = null;
            this.handleKey = this.handleKey.bind(this);
            this.toggleMenu = this.toggleMenu.bind(this);
            this.setTabFocus = this.setTabFocus.bind(this);
            this.firstTouch = this.firstTouch.bind(this);
          }
          _createClass(Listeners2, [{
            key: "handleKey",
            value: function handleKey(event2) {
              var player = this.player;
              var elements = player.elements;
              var code = event2.keyCode ? event2.keyCode : event2.which;
              var pressed = event2.type === "keydown";
              var repeat = pressed && code === this.lastKey;
              if (event2.altKey || event2.ctrlKey || event2.metaKey || event2.shiftKey) {
                return;
              }
              if (!is$1.number(code)) {
                return;
              }
              var seekByKey = function seekByKey2() {
                player.currentTime = player.duration / 10 * (code - 48);
              };
              if (pressed) {
                var focused = document.activeElement;
                if (is$1.element(focused)) {
                  var editable = player.config.selectors.editable;
                  var seek = elements.inputs.seek;
                  if (focused !== seek && matches$1(focused, editable)) {
                    return;
                  }
                  if (event2.which === 32 && matches$1(focused, 'button, [role^="menuitem"]')) {
                    return;
                  }
                }
                var preventDefault = [32, 37, 38, 39, 40, 48, 49, 50, 51, 52, 53, 54, 56, 57, 67, 70, 73, 75, 76, 77, 79];
                if (preventDefault.includes(code)) {
                  event2.preventDefault();
                  event2.stopPropagation();
                }
                switch (code) {
                  case 48:
                  case 49:
                  case 50:
                  case 51:
                  case 52:
                  case 53:
                  case 54:
                  case 55:
                  case 56:
                  case 57:
                    if (!repeat) {
                      seekByKey();
                    }
                    break;
                  case 32:
                  case 75:
                    if (!repeat) {
                      silencePromise(player.togglePlay());
                    }
                    break;
                  case 38:
                    player.increaseVolume(0.1);
                    break;
                  case 40:
                    player.decreaseVolume(0.1);
                    break;
                  case 77:
                    if (!repeat) {
                      player.muted = !player.muted;
                    }
                    break;
                  case 39:
                    player.forward();
                    break;
                  case 37:
                    player.rewind();
                    break;
                  case 70:
                    player.fullscreen.toggle();
                    break;
                  case 67:
                    if (!repeat) {
                      player.toggleCaptions();
                    }
                    break;
                  case 76:
                    player.loop = !player.loop;
                    break;
                }
                if (code === 27 && !player.fullscreen.usingNative && player.fullscreen.active) {
                  player.fullscreen.toggle();
                }
                this.lastKey = code;
              } else {
                this.lastKey = null;
              }
            }
          }, {
            key: "toggleMenu",
            value: function toggleMenu(event2) {
              controls.toggleMenu.call(this.player, event2);
            }
          }, {
            key: "firstTouch",
            value: function firstTouch() {
              var player = this.player;
              var elements = player.elements;
              player.touch = true;
              toggleClass(elements.container, player.config.classNames.isTouch, true);
            }
          }, {
            key: "setTabFocus",
            value: function setTabFocus(event2) {
              var player = this.player;
              var elements = player.elements;
              clearTimeout(this.focusTimer);
              if (event2.type === "keydown" && event2.which !== 9) {
                return;
              }
              if (event2.type === "keydown") {
                this.lastKeyDown = event2.timeStamp;
              }
              var removeCurrent = function removeCurrent2() {
                var className = player.config.classNames.tabFocus;
                var current = getElements.call(player, ".".concat(className));
                toggleClass(current, className, false);
              };
              var wasKeyDown = event2.timeStamp - this.lastKeyDown <= 20;
              if (event2.type === "focus" && !wasKeyDown) {
                return;
              }
              removeCurrent();
              if (event2.type !== "focusout") {
                this.focusTimer = setTimeout(function() {
                  var focused = document.activeElement;
                  if (!elements.container.contains(focused)) {
                    return;
                  }
                  toggleClass(document.activeElement, player.config.classNames.tabFocus, true);
                }, 10);
              }
            }
          }, {
            key: "global",
            value: function global2() {
              var toggle2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : true;
              var player = this.player;
              if (player.config.keyboard.global) {
                toggleListener.call(player, window, "keydown keyup", this.handleKey, toggle2, false);
              }
              toggleListener.call(player, document.body, "click", this.toggleMenu, toggle2);
              once.call(player, document.body, "touchstart", this.firstTouch);
              toggleListener.call(player, document.body, "keydown focus blur focusout", this.setTabFocus, toggle2, false, true);
            }
          }, {
            key: "container",
            value: function container() {
              var player = this.player;
              var config = player.config, elements = player.elements, timers = player.timers;
              if (!config.keyboard.global && config.keyboard.focused) {
                on.call(player, elements.container, "keydown keyup", this.handleKey, false);
              }
              on.call(player, elements.container, "mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen", function(event2) {
                var controlsElement = elements.controls;
                if (controlsElement && event2.type === "enterfullscreen") {
                  controlsElement.pressed = false;
                  controlsElement.hover = false;
                }
                var show = ["touchstart", "touchmove", "mousemove"].includes(event2.type);
                var delay = 0;
                if (show) {
                  ui.toggleControls.call(player, true);
                  delay = player.touch ? 3e3 : 2e3;
                }
                clearTimeout(timers.controls);
                timers.controls = setTimeout(function() {
                  return ui.toggleControls.call(player, false);
                }, delay);
              });
              var setGutter = function setGutter2(ratio, padding, toggle2) {
                if (!player.isVimeo || player.config.vimeo.premium) {
                  return;
                }
                var target = player.elements.wrapper.firstChild;
                var _ratio = _slicedToArray(ratio, 2), y2 = _ratio[1];
                var _getAspectRatio$call = getAspectRatio.call(player), _getAspectRatio$call2 = _slicedToArray(_getAspectRatio$call, 2), videoX = _getAspectRatio$call2[0], videoY = _getAspectRatio$call2[1];
                target.style.maxWidth = toggle2 ? "".concat(y2 / videoY * videoX, "px") : null;
                target.style.margin = toggle2 ? "0 auto" : null;
              };
              var setPlayerSize = function setPlayerSize2(measure) {
                if (!measure) {
                  return setAspectRatio.call(player);
                }
                var rect = elements.container.getBoundingClientRect();
                var width = rect.width, height = rect.height;
                return setAspectRatio.call(player, "".concat(width, ":").concat(height));
              };
              var resized = function resized2() {
                clearTimeout(timers.resized);
                timers.resized = setTimeout(setPlayerSize, 50);
              };
              on.call(player, elements.container, "enterfullscreen exitfullscreen", function(event2) {
                var _player$fullscreen = player.fullscreen, target = _player$fullscreen.target, usingNative = _player$fullscreen.usingNative;
                if (target !== elements.container) {
                  return;
                }
                if (!player.isEmbed && is$1.empty(player.config.ratio)) {
                  return;
                }
                var isEnter = event2.type === "enterfullscreen";
                var _setPlayerSize = setPlayerSize(isEnter), padding = _setPlayerSize.padding, ratio = _setPlayerSize.ratio;
                setGutter(ratio, padding, isEnter);
                if (!usingNative) {
                  if (isEnter) {
                    on.call(player, window, "resize", resized);
                  } else {
                    off.call(player, window, "resize", resized);
                  }
                }
              });
            }
          }, {
            key: "media",
            value: function media2() {
              var _this = this;
              var player = this.player;
              var elements = player.elements;
              on.call(player, player.media, "timeupdate seeking seeked", function(event2) {
                return controls.timeUpdate.call(player, event2);
              });
              on.call(player, player.media, "durationchange loadeddata loadedmetadata", function(event2) {
                return controls.durationUpdate.call(player, event2);
              });
              on.call(player, player.media, "ended", function() {
                if (player.isHTML5 && player.isVideo && player.config.resetOnEnd) {
                  player.restart();
                  player.pause();
                }
              });
              on.call(player, player.media, "progress playing seeking seeked", function(event2) {
                return controls.updateProgress.call(player, event2);
              });
              on.call(player, player.media, "volumechange", function(event2) {
                return controls.updateVolume.call(player, event2);
              });
              on.call(player, player.media, "playing play pause ended emptied timeupdate", function(event2) {
                return ui.checkPlaying.call(player, event2);
              });
              on.call(player, player.media, "waiting canplay seeked playing", function(event2) {
                return ui.checkLoading.call(player, event2);
              });
              if (player.supported.ui && player.config.clickToPlay && !player.isAudio) {
                var wrapper = getElement.call(player, ".".concat(player.config.classNames.video));
                if (!is$1.element(wrapper)) {
                  return;
                }
                on.call(player, elements.container, "click", function(event2) {
                  var targets = [elements.container, wrapper];
                  if (!targets.includes(event2.target) && !wrapper.contains(event2.target)) {
                    return;
                  }
                  if (player.touch && player.config.hideControls) {
                    return;
                  }
                  if (player.ended) {
                    _this.proxy(event2, player.restart, "restart");
                    _this.proxy(event2, function() {
                      silencePromise(player.play());
                    }, "play");
                  } else {
                    _this.proxy(event2, function() {
                      silencePromise(player.togglePlay());
                    }, "play");
                  }
                });
              }
              if (player.supported.ui && player.config.disableContextMenu) {
                on.call(player, elements.wrapper, "contextmenu", function(event2) {
                  event2.preventDefault();
                }, false);
              }
              on.call(player, player.media, "volumechange", function() {
                player.storage.set({
                  volume: player.volume,
                  muted: player.muted
                });
              });
              on.call(player, player.media, "ratechange", function() {
                controls.updateSetting.call(player, "speed");
                player.storage.set({
                  speed: player.speed
                });
              });
              on.call(player, player.media, "qualitychange", function(event2) {
                controls.updateSetting.call(player, "quality", null, event2.detail.quality);
              });
              on.call(player, player.media, "ready qualitychange", function() {
                controls.setDownloadUrl.call(player);
              });
              var proxyEvents = player.config.events.concat(["keyup", "keydown"]).join(" ");
              on.call(player, player.media, proxyEvents, function(event2) {
                var _event$detail = event2.detail, detail = _event$detail === void 0 ? {} : _event$detail;
                if (event2.type === "error") {
                  detail = player.media.error;
                }
                triggerEvent.call(player, elements.container, event2.type, true, detail);
              });
            }
          }, {
            key: "proxy",
            value: function proxy2(event2, defaultHandler, customHandlerKey) {
              var player = this.player;
              var customHandler = player.config.listeners[customHandlerKey];
              var hasCustomHandler = is$1.function(customHandler);
              var returned = true;
              if (hasCustomHandler) {
                returned = customHandler.call(player, event2);
              }
              if (returned !== false && is$1.function(defaultHandler)) {
                defaultHandler.call(player, event2);
              }
            }
          }, {
            key: "bind",
            value: function bind2(element, type, defaultHandler, customHandlerKey) {
              var _this2 = this;
              var passive = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : true;
              var player = this.player;
              var customHandler = player.config.listeners[customHandlerKey];
              var hasCustomHandler = is$1.function(customHandler);
              on.call(player, element, type, function(event2) {
                return _this2.proxy(event2, defaultHandler, customHandlerKey);
              }, passive && !hasCustomHandler);
            }
          }, {
            key: "controls",
            value: function controls$1() {
              var _this3 = this;
              var player = this.player;
              var elements = player.elements;
              var inputEvent = browser.isIE ? "change" : "input";
              if (elements.buttons.play) {
                Array.from(elements.buttons.play).forEach(function(button) {
                  _this3.bind(button, "click", function() {
                    silencePromise(player.togglePlay());
                  }, "play");
                });
              }
              this.bind(elements.buttons.restart, "click", player.restart, "restart");
              this.bind(elements.buttons.rewind, "click", player.rewind, "rewind");
              this.bind(elements.buttons.fastForward, "click", player.forward, "fastForward");
              this.bind(elements.buttons.mute, "click", function() {
                player.muted = !player.muted;
              }, "mute");
              this.bind(elements.buttons.captions, "click", function() {
                return player.toggleCaptions();
              });
              this.bind(elements.buttons.download, "click", function() {
                triggerEvent.call(player, player.media, "download");
              }, "download");
              this.bind(elements.buttons.fullscreen, "click", function() {
                player.fullscreen.toggle();
              }, "fullscreen");
              this.bind(elements.buttons.pip, "click", function() {
                player.pip = "toggle";
              }, "pip");
              this.bind(elements.buttons.airplay, "click", player.airplay, "airplay");
              this.bind(elements.buttons.settings, "click", function(event2) {
                event2.stopPropagation();
                event2.preventDefault();
                controls.toggleMenu.call(player, event2);
              }, null, false);
              this.bind(elements.buttons.settings, "keyup", function(event2) {
                var code = event2.which;
                if (![13, 32].includes(code)) {
                  return;
                }
                if (code === 13) {
                  controls.focusFirstMenuItem.call(player, null, true);
                  return;
                }
                event2.preventDefault();
                event2.stopPropagation();
                controls.toggleMenu.call(player, event2);
              }, null, false);
              this.bind(elements.settings.menu, "keydown", function(event2) {
                if (event2.which === 27) {
                  controls.toggleMenu.call(player, event2);
                }
              });
              this.bind(elements.inputs.seek, "mousedown mousemove", function(event2) {
                var rect = elements.progress.getBoundingClientRect();
                var percent = 100 / rect.width * (event2.pageX - rect.left);
                event2.currentTarget.setAttribute("seek-value", percent);
              });
              this.bind(elements.inputs.seek, "mousedown mouseup keydown keyup touchstart touchend", function(event2) {
                var seek = event2.currentTarget;
                var code = event2.keyCode ? event2.keyCode : event2.which;
                var attribute = "play-on-seeked";
                if (is$1.keyboardEvent(event2) && code !== 39 && code !== 37) {
                  return;
                }
                player.lastSeekTime = Date.now();
                var play = seek.hasAttribute(attribute);
                var done = ["mouseup", "touchend", "keyup"].includes(event2.type);
                if (play && done) {
                  seek.removeAttribute(attribute);
                  silencePromise(player.play());
                } else if (!done && player.playing) {
                  seek.setAttribute(attribute, "");
                  player.pause();
                }
              });
              if (browser.isIos) {
                var inputs = getElements.call(player, 'input[type="range"]');
                Array.from(inputs).forEach(function(input) {
                  return _this3.bind(input, inputEvent, function(event2) {
                    return repaint(event2.target);
                  });
                });
              }
              this.bind(elements.inputs.seek, inputEvent, function(event2) {
                var seek = event2.currentTarget;
                var seekTo = seek.getAttribute("seek-value");
                if (is$1.empty(seekTo)) {
                  seekTo = seek.value;
                }
                seek.removeAttribute("seek-value");
                player.currentTime = seekTo / seek.max * player.duration;
              }, "seek");
              this.bind(elements.progress, "mouseenter mouseleave mousemove", function(event2) {
                return controls.updateSeekTooltip.call(player, event2);
              });
              this.bind(elements.progress, "mousemove touchmove", function(event2) {
                var previewThumbnails = player.previewThumbnails;
                if (previewThumbnails && previewThumbnails.loaded) {
                  previewThumbnails.startMove(event2);
                }
              });
              this.bind(elements.progress, "mouseleave touchend click", function() {
                var previewThumbnails = player.previewThumbnails;
                if (previewThumbnails && previewThumbnails.loaded) {
                  previewThumbnails.endMove(false, true);
                }
              });
              this.bind(elements.progress, "mousedown touchstart", function(event2) {
                var previewThumbnails = player.previewThumbnails;
                if (previewThumbnails && previewThumbnails.loaded) {
                  previewThumbnails.startScrubbing(event2);
                }
              });
              this.bind(elements.progress, "mouseup touchend", function(event2) {
                var previewThumbnails = player.previewThumbnails;
                if (previewThumbnails && previewThumbnails.loaded) {
                  previewThumbnails.endScrubbing(event2);
                }
              });
              if (browser.isWebkit) {
                Array.from(getElements.call(player, 'input[type="range"]')).forEach(function(element) {
                  _this3.bind(element, "input", function(event2) {
                    return controls.updateRangeFill.call(player, event2.target);
                  });
                });
              }
              if (player.config.toggleInvert && !is$1.element(elements.display.duration)) {
                this.bind(elements.display.currentTime, "click", function() {
                  if (player.currentTime === 0) {
                    return;
                  }
                  player.config.invertTime = !player.config.invertTime;
                  controls.timeUpdate.call(player);
                });
              }
              this.bind(elements.inputs.volume, inputEvent, function(event2) {
                player.volume = event2.target.value;
              }, "volume");
              this.bind(elements.controls, "mouseenter mouseleave", function(event2) {
                elements.controls.hover = !player.touch && event2.type === "mouseenter";
              });
              if (elements.fullscreen) {
                Array.from(elements.fullscreen.children).filter(function(c2) {
                  return !c2.contains(elements.container);
                }).forEach(function(child) {
                  _this3.bind(child, "mouseenter mouseleave", function(event2) {
                    elements.controls.hover = !player.touch && event2.type === "mouseenter";
                  });
                });
              }
              this.bind(elements.controls, "mousedown mouseup touchstart touchend touchcancel", function(event2) {
                elements.controls.pressed = ["mousedown", "touchstart"].includes(event2.type);
              });
              this.bind(elements.controls, "focusin", function() {
                var config = player.config, timers = player.timers;
                toggleClass(elements.controls, config.classNames.noTransition, true);
                ui.toggleControls.call(player, true);
                setTimeout(function() {
                  toggleClass(elements.controls, config.classNames.noTransition, false);
                }, 0);
                var delay = _this3.touch ? 3e3 : 4e3;
                clearTimeout(timers.controls);
                timers.controls = setTimeout(function() {
                  return ui.toggleControls.call(player, false);
                }, delay);
              });
              this.bind(elements.inputs.volume, "wheel", function(event2) {
                var inverted = event2.webkitDirectionInvertedFromDevice;
                var _map = [event2.deltaX, -event2.deltaY].map(function(value) {
                  return inverted ? -value : value;
                }), _map2 = _slicedToArray(_map, 2), x2 = _map2[0], y2 = _map2[1];
                var direction = Math.sign(Math.abs(x2) > Math.abs(y2) ? x2 : y2);
                player.increaseVolume(direction / 50);
                var volume = player.media.volume;
                if (direction === 1 && volume < 1 || direction === -1 && volume > 0) {
                  event2.preventDefault();
                }
              }, "volume", false);
            }
          }]);
          return Listeners2;
        }();
        var HAS_SPECIES_SUPPORT$3 = arrayMethodHasSpeciesSupport("splice");
        var USES_TO_LENGTH$a = arrayMethodUsesToLength("splice", { ACCESSORS: true, 0: 0, 1: 2 });
        var max$3 = Math.max;
        var min$5 = Math.min;
        var MAX_SAFE_INTEGER$1 = 9007199254740991;
        var MAXIMUM_ALLOWED_LENGTH_EXCEEDED = "Maximum allowed length exceeded";
        _export({ target: "Array", proto: true, forced: !HAS_SPECIES_SUPPORT$3 || !USES_TO_LENGTH$a }, {
          splice: function splice(start, deleteCount) {
            var O2 = toObject(this);
            var len = toLength(O2.length);
            var actualStart = toAbsoluteIndex(start, len);
            var argumentsLength = arguments.length;
            var insertCount, actualDeleteCount, A2, k2, from, to;
            if (argumentsLength === 0) {
              insertCount = actualDeleteCount = 0;
            } else if (argumentsLength === 1) {
              insertCount = 0;
              actualDeleteCount = len - actualStart;
            } else {
              insertCount = argumentsLength - 2;
              actualDeleteCount = min$5(max$3(toInteger(deleteCount), 0), len - actualStart);
            }
            if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER$1) {
              throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);
            }
            A2 = arraySpeciesCreate(O2, actualDeleteCount);
            for (k2 = 0; k2 < actualDeleteCount; k2++) {
              from = actualStart + k2;
              if (from in O2)
                createProperty(A2, k2, O2[from]);
            }
            A2.length = actualDeleteCount;
            if (insertCount < actualDeleteCount) {
              for (k2 = actualStart; k2 < len - actualDeleteCount; k2++) {
                from = k2 + actualDeleteCount;
                to = k2 + insertCount;
                if (from in O2)
                  O2[to] = O2[from];
                else
                  delete O2[to];
              }
              for (k2 = len; k2 > len - actualDeleteCount + insertCount; k2--)
                delete O2[k2 - 1];
            } else if (insertCount > actualDeleteCount) {
              for (k2 = len - actualDeleteCount; k2 > actualStart; k2--) {
                from = k2 + actualDeleteCount - 1;
                to = k2 + insertCount - 1;
                if (from in O2)
                  O2[to] = O2[from];
                else
                  delete O2[to];
              }
            }
            for (k2 = 0; k2 < insertCount; k2++) {
              O2[k2 + actualStart] = arguments[k2 + 2];
            }
            O2.length = len - actualDeleteCount + insertCount;
            return A2;
          }
        });
        var loadjs_umd = createCommonjsModule(function(module3, exports3) {
          (function(root, factory) {
            {
              module3.exports = factory();
            }
          })(commonjsGlobal, function() {
            var devnull = function devnull2() {
            }, bundleIdCache = {}, bundleResultCache = {}, bundleCallbackQueue = {};
            function subscribe(bundleIds, callbackFn) {
              bundleIds = bundleIds.push ? bundleIds : [bundleIds];
              var depsNotFound = [], i2 = bundleIds.length, numWaiting = i2, fn, bundleId, r2, q2;
              fn = function fn2(bundleId2, pathsNotFound) {
                if (pathsNotFound.length)
                  depsNotFound.push(bundleId2);
                numWaiting--;
                if (!numWaiting)
                  callbackFn(depsNotFound);
              };
              while (i2--) {
                bundleId = bundleIds[i2];
                r2 = bundleResultCache[bundleId];
                if (r2) {
                  fn(bundleId, r2);
                  continue;
                }
                q2 = bundleCallbackQueue[bundleId] = bundleCallbackQueue[bundleId] || [];
                q2.push(fn);
              }
            }
            function publish(bundleId, pathsNotFound) {
              if (!bundleId)
                return;
              var q2 = bundleCallbackQueue[bundleId];
              bundleResultCache[bundleId] = pathsNotFound;
              if (!q2)
                return;
              while (q2.length) {
                q2[0](bundleId, pathsNotFound);
                q2.splice(0, 1);
              }
            }
            function executeCallbacks(args, depsNotFound) {
              if (args.call)
                args = {
                  success: args
                };
              if (depsNotFound.length)
                (args.error || devnull)(depsNotFound);
              else
                (args.success || devnull)(args);
            }
            function loadFile(path2, callbackFn, args, numTries) {
              var doc2 = document, async = args.async, maxTries = (args.numRetries || 0) + 1, beforeCallbackFn = args.before || devnull, pathname = path2.replace(/[\?|#].*$/, ""), pathStripped = path2.replace(/^(css|img)!/, ""), isLegacyIECss, e2;
              numTries = numTries || 0;
              if (/(^css!|\.css$)/.test(pathname)) {
                e2 = doc2.createElement("link");
                e2.rel = "stylesheet";
                e2.href = pathStripped;
                isLegacyIECss = "hideFocus" in e2;
                if (isLegacyIECss && e2.relList) {
                  isLegacyIECss = 0;
                  e2.rel = "preload";
                  e2.as = "style";
                }
              } else if (/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(pathname)) {
                e2 = doc2.createElement("img");
                e2.src = pathStripped;
              } else {
                e2 = doc2.createElement("script");
                e2.src = path2;
                e2.async = async === void 0 ? true : async;
              }
              e2.onload = e2.onerror = e2.onbeforeload = function(ev) {
                var result = ev.type[0];
                if (isLegacyIECss) {
                  try {
                    if (!e2.sheet.cssText.length)
                      result = "e";
                  } catch (x2) {
                    if (x2.code != 18)
                      result = "e";
                  }
                }
                if (result == "e") {
                  numTries += 1;
                  if (numTries < maxTries) {
                    return loadFile(path2, callbackFn, args, numTries);
                  }
                } else if (e2.rel == "preload" && e2.as == "style") {
                  return e2.rel = "stylesheet";
                }
                callbackFn(path2, result, ev.defaultPrevented);
              };
              if (beforeCallbackFn(path2, e2) !== false)
                doc2.head.appendChild(e2);
            }
            function loadFiles(paths, callbackFn, args) {
              paths = paths.push ? paths : [paths];
              var numWaiting = paths.length, x2 = numWaiting, pathsNotFound = [], fn, i2;
              fn = function fn2(path2, result, defaultPrevented) {
                if (result == "e")
                  pathsNotFound.push(path2);
                if (result == "b") {
                  if (defaultPrevented)
                    pathsNotFound.push(path2);
                  else
                    return;
                }
                numWaiting--;
                if (!numWaiting)
                  callbackFn(pathsNotFound);
              };
              for (i2 = 0; i2 < x2; i2++) {
                loadFile(paths[i2], fn, args);
              }
            }
            function loadjs(paths, arg1, arg2) {
              var bundleId, args;
              if (arg1 && arg1.trim)
                bundleId = arg1;
              args = (bundleId ? arg2 : arg1) || {};
              if (bundleId) {
                if (bundleId in bundleIdCache) {
                  throw "LoadJS";
                } else {
                  bundleIdCache[bundleId] = true;
                }
              }
              function loadFn(resolve, reject) {
                loadFiles(paths, function(pathsNotFound) {
                  executeCallbacks(args, pathsNotFound);
                  if (resolve) {
                    executeCallbacks({
                      success: resolve,
                      error: reject
                    }, pathsNotFound);
                  }
                  publish(bundleId, pathsNotFound);
                }, args);
              }
              if (args.returnPromise)
                return new Promise(loadFn);
              else
                loadFn();
            }
            loadjs.ready = function ready2(deps, args) {
              subscribe(deps, function(depsNotFound) {
                executeCallbacks(args, depsNotFound);
              });
              return loadjs;
            };
            loadjs.done = function done(bundleId) {
              publish(bundleId, []);
            };
            loadjs.reset = function reset() {
              bundleIdCache = {};
              bundleResultCache = {};
              bundleCallbackQueue = {};
            };
            loadjs.isDefined = function isDefined(bundleId) {
              return bundleId in bundleIdCache;
            };
            return loadjs;
          });
        });
        function loadScript(url) {
          return new Promise(function(resolve, reject) {
            loadjs_umd(url, {
              success: resolve,
              error: reject
            });
          });
        }
        function parseId(url) {
          if (is$1.empty(url)) {
            return null;
          }
          if (is$1.number(Number(url))) {
            return url;
          }
          var regex = /^.*(vimeo.com\/|video\/)(\d+).*/;
          return url.match(regex) ? RegExp.$2 : url;
        }
        function assurePlaybackState(play) {
          if (play && !this.embed.hasPlayed) {
            this.embed.hasPlayed = true;
          }
          if (this.media.paused === play) {
            this.media.paused = !play;
            triggerEvent.call(this, this.media, play ? "play" : "pause");
          }
        }
        var vimeo = {
          setup: function setup() {
            var player = this;
            toggleClass(player.elements.wrapper, player.config.classNames.embed, true);
            player.options.speed = player.config.speed.options;
            setAspectRatio.call(player);
            if (!is$1.object(window.Vimeo)) {
              loadScript(player.config.urls.vimeo.sdk).then(function() {
                vimeo.ready.call(player);
              }).catch(function(error) {
                player.debug.warn("Vimeo SDK (player.js) failed to load", error);
              });
            } else {
              vimeo.ready.call(player);
            }
          },
          ready: function ready2() {
            var _this = this;
            var player = this;
            var config = player.config.vimeo;
            var premium = config.premium, referrerPolicy = config.referrerPolicy, frameParams = _objectWithoutProperties(config, ["premium", "referrerPolicy"]);
            if (premium) {
              Object.assign(frameParams, {
                controls: false,
                sidedock: false
              });
            }
            var params = buildUrlParams(_objectSpread2({
              loop: player.config.loop.active,
              autoplay: player.autoplay,
              muted: player.muted,
              gesture: "media",
              playsinline: !this.config.fullscreen.iosNative
            }, frameParams));
            var source2 = player.media.getAttribute("src");
            if (is$1.empty(source2)) {
              source2 = player.media.getAttribute(player.config.attributes.embed.id);
            }
            var id2 = parseId(source2);
            var iframe = createElement("iframe");
            var src = format2(player.config.urls.vimeo.iframe, id2, params);
            iframe.setAttribute("src", src);
            iframe.setAttribute("allowfullscreen", "");
            iframe.setAttribute("allow", "autoplay,fullscreen,picture-in-picture");
            if (!is$1.empty(referrerPolicy)) {
              iframe.setAttribute("referrerPolicy", referrerPolicy);
            }
            var poster = player.poster;
            if (premium) {
              iframe.setAttribute("data-poster", poster);
              player.media = replaceElement(iframe, player.media);
            } else {
              var wrapper = createElement("div", {
                class: player.config.classNames.embedContainer,
                "data-poster": poster
              });
              wrapper.appendChild(iframe);
              player.media = replaceElement(wrapper, player.media);
            }
            fetch2(format2(player.config.urls.vimeo.api, id2), "json").then(function(response) {
              if (is$1.empty(response)) {
                return;
              }
              var url = new URL(response[0].thumbnail_large);
              url.pathname = "".concat(url.pathname.split("_")[0], ".jpg");
              ui.setPoster.call(player, url.href).catch(function() {
              });
            });
            player.embed = new window.Vimeo.Player(iframe, {
              autopause: player.config.autopause,
              muted: player.muted
            });
            player.media.paused = true;
            player.media.currentTime = 0;
            if (player.supported.ui) {
              player.embed.disableTextTrack();
            }
            player.media.play = function() {
              assurePlaybackState.call(player, true);
              return player.embed.play();
            };
            player.media.pause = function() {
              assurePlaybackState.call(player, false);
              return player.embed.pause();
            };
            player.media.stop = function() {
              player.pause();
              player.currentTime = 0;
            };
            var currentTime = player.media.currentTime;
            Object.defineProperty(player.media, "currentTime", {
              get: function get2() {
                return currentTime;
              },
              set: function set2(time) {
                var embed = player.embed, media2 = player.media, paused = player.paused, volume2 = player.volume;
                var restorePause = paused && !embed.hasPlayed;
                media2.seeking = true;
                triggerEvent.call(player, media2, "seeking");
                Promise.resolve(restorePause && embed.setVolume(0)).then(function() {
                  return embed.setCurrentTime(time);
                }).then(function() {
                  return restorePause && embed.pause();
                }).then(function() {
                  return restorePause && embed.setVolume(volume2);
                }).catch(function() {
                });
              }
            });
            var speed = player.config.speed.selected;
            Object.defineProperty(player.media, "playbackRate", {
              get: function get2() {
                return speed;
              },
              set: function set2(input) {
                player.embed.setPlaybackRate(input).then(function() {
                  speed = input;
                  triggerEvent.call(player, player.media, "ratechange");
                }).catch(function() {
                  player.options.speed = [1];
                });
              }
            });
            var volume = player.config.volume;
            Object.defineProperty(player.media, "volume", {
              get: function get2() {
                return volume;
              },
              set: function set2(input) {
                player.embed.setVolume(input).then(function() {
                  volume = input;
                  triggerEvent.call(player, player.media, "volumechange");
                });
              }
            });
            var muted = player.config.muted;
            Object.defineProperty(player.media, "muted", {
              get: function get2() {
                return muted;
              },
              set: function set2(input) {
                var toggle2 = is$1.boolean(input) ? input : false;
                player.embed.setVolume(toggle2 ? 0 : player.config.volume).then(function() {
                  muted = toggle2;
                  triggerEvent.call(player, player.media, "volumechange");
                });
              }
            });
            var loop = player.config.loop;
            Object.defineProperty(player.media, "loop", {
              get: function get2() {
                return loop;
              },
              set: function set2(input) {
                var toggle2 = is$1.boolean(input) ? input : player.config.loop.active;
                player.embed.setLoop(toggle2).then(function() {
                  loop = toggle2;
                });
              }
            });
            var currentSrc;
            player.embed.getVideoUrl().then(function(value) {
              currentSrc = value;
              controls.setDownloadUrl.call(player);
            }).catch(function(error) {
              _this.debug.warn(error);
            });
            Object.defineProperty(player.media, "currentSrc", {
              get: function get2() {
                return currentSrc;
              }
            });
            Object.defineProperty(player.media, "ended", {
              get: function get2() {
                return player.currentTime === player.duration;
              }
            });
            Promise.all([player.embed.getVideoWidth(), player.embed.getVideoHeight()]).then(function(dimensions) {
              var _dimensions = _slicedToArray(dimensions, 2), width = _dimensions[0], height = _dimensions[1];
              player.embed.ratio = [width, height];
              setAspectRatio.call(_this);
            });
            player.embed.setAutopause(player.config.autopause).then(function(state) {
              player.config.autopause = state;
            });
            player.embed.getVideoTitle().then(function(title) {
              player.config.title = title;
              ui.setTitle.call(_this);
            });
            player.embed.getCurrentTime().then(function(value) {
              currentTime = value;
              triggerEvent.call(player, player.media, "timeupdate");
            });
            player.embed.getDuration().then(function(value) {
              player.media.duration = value;
              triggerEvent.call(player, player.media, "durationchange");
            });
            player.embed.getTextTracks().then(function(tracks) {
              player.media.textTracks = tracks;
              captions.setup.call(player);
            });
            player.embed.on("cuechange", function(_ref) {
              var _ref$cues = _ref.cues, cues = _ref$cues === void 0 ? [] : _ref$cues;
              var strippedCues = cues.map(function(cue) {
                return stripHTML(cue.text);
              });
              captions.updateCues.call(player, strippedCues);
            });
            player.embed.on("loaded", function() {
              player.embed.getPaused().then(function(paused) {
                assurePlaybackState.call(player, !paused);
                if (!paused) {
                  triggerEvent.call(player, player.media, "playing");
                }
              });
              if (is$1.element(player.embed.element) && player.supported.ui) {
                var frame = player.embed.element;
                frame.setAttribute("tabindex", -1);
              }
            });
            player.embed.on("bufferstart", function() {
              triggerEvent.call(player, player.media, "waiting");
            });
            player.embed.on("bufferend", function() {
              triggerEvent.call(player, player.media, "playing");
            });
            player.embed.on("play", function() {
              assurePlaybackState.call(player, true);
              triggerEvent.call(player, player.media, "playing");
            });
            player.embed.on("pause", function() {
              assurePlaybackState.call(player, false);
            });
            player.embed.on("timeupdate", function(data2) {
              player.media.seeking = false;
              currentTime = data2.seconds;
              triggerEvent.call(player, player.media, "timeupdate");
            });
            player.embed.on("progress", function(data2) {
              player.media.buffered = data2.percent;
              triggerEvent.call(player, player.media, "progress");
              if (parseInt(data2.percent, 10) === 1) {
                triggerEvent.call(player, player.media, "canplaythrough");
              }
              player.embed.getDuration().then(function(value) {
                if (value !== player.media.duration) {
                  player.media.duration = value;
                  triggerEvent.call(player, player.media, "durationchange");
                }
              });
            });
            player.embed.on("seeked", function() {
              player.media.seeking = false;
              triggerEvent.call(player, player.media, "seeked");
            });
            player.embed.on("ended", function() {
              player.media.paused = true;
              triggerEvent.call(player, player.media, "ended");
            });
            player.embed.on("error", function(detail) {
              player.media.error = detail;
              triggerEvent.call(player, player.media, "error");
            });
            setTimeout(function() {
              return ui.build.call(player);
            }, 0);
          }
        };
        function parseId$1(url) {
          if (is$1.empty(url)) {
            return null;
          }
          var regex = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
          return url.match(regex) ? RegExp.$2 : url;
        }
        function assurePlaybackState$1(play) {
          if (play && !this.embed.hasPlayed) {
            this.embed.hasPlayed = true;
          }
          if (this.media.paused === play) {
            this.media.paused = !play;
            triggerEvent.call(this, this.media, play ? "play" : "pause");
          }
        }
        function getHost$1(config) {
          if (config.noCookie) {
            return "https://www.youtube-nocookie.com";
          }
          if (window.location.protocol === "http:") {
            return "http://www.youtube.com";
          }
          return void 0;
        }
        var youtube = {
          setup: function setup() {
            var _this = this;
            toggleClass(this.elements.wrapper, this.config.classNames.embed, true);
            if (is$1.object(window.YT) && is$1.function(window.YT.Player)) {
              youtube.ready.call(this);
            } else {
              var callback = window.onYouTubeIframeAPIReady;
              window.onYouTubeIframeAPIReady = function() {
                if (is$1.function(callback)) {
                  callback();
                }
                youtube.ready.call(_this);
              };
              loadScript(this.config.urls.youtube.sdk).catch(function(error) {
                _this.debug.warn("YouTube API failed to load", error);
              });
            }
          },
          getTitle: function getTitle(videoId) {
            var _this2 = this;
            var url = format2(this.config.urls.youtube.api, videoId);
            fetch2(url).then(function(data2) {
              if (is$1.object(data2)) {
                var title = data2.title, height = data2.height, width = data2.width;
                _this2.config.title = title;
                ui.setTitle.call(_this2);
                _this2.embed.ratio = [width, height];
              }
              setAspectRatio.call(_this2);
            }).catch(function() {
              setAspectRatio.call(_this2);
            });
          },
          ready: function ready2() {
            var player = this;
            var currentId = player.media && player.media.getAttribute("id");
            if (!is$1.empty(currentId) && currentId.startsWith("youtube-")) {
              return;
            }
            var source2 = player.media.getAttribute("src");
            if (is$1.empty(source2)) {
              source2 = player.media.getAttribute(this.config.attributes.embed.id);
            }
            var videoId = parseId$1(source2);
            var id2 = generateId(player.provider);
            var poster = player.poster;
            var container = createElement("div", {
              id: id2,
              "data-poster": poster
            });
            player.media = replaceElement(container, player.media);
            var posterSrc = function posterSrc2(s2) {
              return "https://i.ytimg.com/vi/".concat(videoId, "/").concat(s2, "default.jpg");
            };
            loadImage(posterSrc("maxres"), 121).catch(function() {
              return loadImage(posterSrc("sd"), 121);
            }).catch(function() {
              return loadImage(posterSrc("hq"));
            }).then(function(image) {
              return ui.setPoster.call(player, image.src);
            }).then(function(src) {
              if (!src.includes("maxres")) {
                player.elements.poster.style.backgroundSize = "cover";
              }
            }).catch(function() {
            });
            var config = player.config.youtube;
            player.embed = new window.YT.Player(id2, {
              videoId,
              host: getHost$1(config),
              playerVars: extend({}, {
                autoplay: player.config.autoplay ? 1 : 0,
                hl: player.config.hl,
                controls: player.supported.ui ? 0 : 1,
                disablekb: 1,
                playsinline: !player.config.fullscreen.iosNative ? 1 : 0,
                cc_load_policy: player.captions.active ? 1 : 0,
                cc_lang_pref: player.config.captions.language,
                widget_referrer: window ? window.location.href : null
              }, config),
              events: {
                onError: function onError(event2) {
                  if (!player.media.error) {
                    var code = event2.data;
                    var message2 = {
                      2: "The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",
                      5: "The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",
                      100: "The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",
                      101: "The owner of the requested video does not allow it to be played in embedded players.",
                      150: "The owner of the requested video does not allow it to be played in embedded players."
                    }[code] || "An unknown error occured";
                    player.media.error = {
                      code,
                      message: message2
                    };
                    triggerEvent.call(player, player.media, "error");
                  }
                },
                onPlaybackRateChange: function onPlaybackRateChange(event2) {
                  var instance = event2.target;
                  player.media.playbackRate = instance.getPlaybackRate();
                  triggerEvent.call(player, player.media, "ratechange");
                },
                onReady: function onReady(event2) {
                  if (is$1.function(player.media.play)) {
                    return;
                  }
                  var instance = event2.target;
                  youtube.getTitle.call(player, videoId);
                  player.media.play = function() {
                    assurePlaybackState$1.call(player, true);
                    instance.playVideo();
                  };
                  player.media.pause = function() {
                    assurePlaybackState$1.call(player, false);
                    instance.pauseVideo();
                  };
                  player.media.stop = function() {
                    instance.stopVideo();
                  };
                  player.media.duration = instance.getDuration();
                  player.media.paused = true;
                  player.media.currentTime = 0;
                  Object.defineProperty(player.media, "currentTime", {
                    get: function get2() {
                      return Number(instance.getCurrentTime());
                    },
                    set: function set2(time) {
                      if (player.paused && !player.embed.hasPlayed) {
                        player.embed.mute();
                      }
                      player.media.seeking = true;
                      triggerEvent.call(player, player.media, "seeking");
                      instance.seekTo(time);
                    }
                  });
                  Object.defineProperty(player.media, "playbackRate", {
                    get: function get2() {
                      return instance.getPlaybackRate();
                    },
                    set: function set2(input) {
                      instance.setPlaybackRate(input);
                    }
                  });
                  var volume = player.config.volume;
                  Object.defineProperty(player.media, "volume", {
                    get: function get2() {
                      return volume;
                    },
                    set: function set2(input) {
                      volume = input;
                      instance.setVolume(volume * 100);
                      triggerEvent.call(player, player.media, "volumechange");
                    }
                  });
                  var muted = player.config.muted;
                  Object.defineProperty(player.media, "muted", {
                    get: function get2() {
                      return muted;
                    },
                    set: function set2(input) {
                      var toggle2 = is$1.boolean(input) ? input : muted;
                      muted = toggle2;
                      instance[toggle2 ? "mute" : "unMute"]();
                      triggerEvent.call(player, player.media, "volumechange");
                    }
                  });
                  Object.defineProperty(player.media, "currentSrc", {
                    get: function get2() {
                      return instance.getVideoUrl();
                    }
                  });
                  Object.defineProperty(player.media, "ended", {
                    get: function get2() {
                      return player.currentTime === player.duration;
                    }
                  });
                  var speeds = instance.getAvailablePlaybackRates();
                  player.options.speed = speeds.filter(function(s2) {
                    return player.config.speed.options.includes(s2);
                  });
                  if (player.supported.ui) {
                    player.media.setAttribute("tabindex", -1);
                  }
                  triggerEvent.call(player, player.media, "timeupdate");
                  triggerEvent.call(player, player.media, "durationchange");
                  clearInterval(player.timers.buffering);
                  player.timers.buffering = setInterval(function() {
                    player.media.buffered = instance.getVideoLoadedFraction();
                    if (player.media.lastBuffered === null || player.media.lastBuffered < player.media.buffered) {
                      triggerEvent.call(player, player.media, "progress");
                    }
                    player.media.lastBuffered = player.media.buffered;
                    if (player.media.buffered === 1) {
                      clearInterval(player.timers.buffering);
                      triggerEvent.call(player, player.media, "canplaythrough");
                    }
                  }, 200);
                  setTimeout(function() {
                    return ui.build.call(player);
                  }, 50);
                },
                onStateChange: function onStateChange(event2) {
                  var instance = event2.target;
                  clearInterval(player.timers.playing);
                  var seeked = player.media.seeking && [1, 2].includes(event2.data);
                  if (seeked) {
                    player.media.seeking = false;
                    triggerEvent.call(player, player.media, "seeked");
                  }
                  switch (event2.data) {
                    case -1:
                      triggerEvent.call(player, player.media, "timeupdate");
                      player.media.buffered = instance.getVideoLoadedFraction();
                      triggerEvent.call(player, player.media, "progress");
                      break;
                    case 0:
                      assurePlaybackState$1.call(player, false);
                      if (player.media.loop) {
                        instance.stopVideo();
                        instance.playVideo();
                      } else {
                        triggerEvent.call(player, player.media, "ended");
                      }
                      break;
                    case 1:
                      if (!player.config.autoplay && player.media.paused && !player.embed.hasPlayed) {
                        player.media.pause();
                      } else {
                        assurePlaybackState$1.call(player, true);
                        triggerEvent.call(player, player.media, "playing");
                        player.timers.playing = setInterval(function() {
                          triggerEvent.call(player, player.media, "timeupdate");
                        }, 50);
                        if (player.media.duration !== instance.getDuration()) {
                          player.media.duration = instance.getDuration();
                          triggerEvent.call(player, player.media, "durationchange");
                        }
                      }
                      break;
                    case 2:
                      if (!player.muted) {
                        player.embed.unMute();
                      }
                      assurePlaybackState$1.call(player, false);
                      break;
                    case 3:
                      triggerEvent.call(player, player.media, "waiting");
                      break;
                  }
                  triggerEvent.call(player, player.elements.container, "statechange", false, {
                    code: event2.data
                  });
                }
              }
            });
          }
        };
        var media = {
          setup: function setup() {
            if (!this.media) {
              this.debug.warn("No media element found!");
              return;
            }
            toggleClass(this.elements.container, this.config.classNames.type.replace("{0}", this.type), true);
            toggleClass(this.elements.container, this.config.classNames.provider.replace("{0}", this.provider), true);
            if (this.isEmbed) {
              toggleClass(this.elements.container, this.config.classNames.type.replace("{0}", "video"), true);
            }
            if (this.isVideo) {
              this.elements.wrapper = createElement("div", {
                class: this.config.classNames.video
              });
              wrap$1(this.media, this.elements.wrapper);
              this.elements.poster = createElement("div", {
                class: this.config.classNames.poster
              });
              this.elements.wrapper.appendChild(this.elements.poster);
            }
            if (this.isHTML5) {
              html5.setup.call(this);
            } else if (this.isYouTube) {
              youtube.setup.call(this);
            } else if (this.isVimeo) {
              vimeo.setup.call(this);
            }
          }
        };
        var destroy = function destroy2(instance) {
          if (instance.manager) {
            instance.manager.destroy();
          }
          if (instance.elements.displayContainer) {
            instance.elements.displayContainer.destroy();
          }
          instance.elements.container.remove();
        };
        var Ads = /* @__PURE__ */ function() {
          function Ads2(player) {
            var _this = this;
            _classCallCheck(this, Ads2);
            this.player = player;
            this.config = player.config.ads;
            this.playing = false;
            this.initialized = false;
            this.elements = {
              container: null,
              displayContainer: null
            };
            this.manager = null;
            this.loader = null;
            this.cuePoints = null;
            this.events = {};
            this.safetyTimer = null;
            this.countdownTimer = null;
            this.managerPromise = new Promise(function(resolve, reject) {
              _this.on("loaded", resolve);
              _this.on("error", reject);
            });
            this.load();
          }
          _createClass(Ads2, [{
            key: "load",
            value: function load() {
              var _this2 = this;
              if (!this.enabled) {
                return;
              }
              if (!is$1.object(window.google) || !is$1.object(window.google.ima)) {
                loadScript(this.player.config.urls.googleIMA.sdk).then(function() {
                  _this2.ready();
                }).catch(function() {
                  _this2.trigger("error", new Error("Google IMA SDK failed to load"));
                });
              } else {
                this.ready();
              }
            }
          }, {
            key: "ready",
            value: function ready2() {
              var _this3 = this;
              if (!this.enabled) {
                destroy(this);
              }
              this.startSafetyTimer(12e3, "ready()");
              this.managerPromise.then(function() {
                _this3.clearSafetyTimer("onAdsManagerLoaded()");
              });
              this.listeners();
              this.setupIMA();
            }
          }, {
            key: "setupIMA",
            value: function setupIMA() {
              var _this4 = this;
              this.elements.container = createElement("div", {
                class: this.player.config.classNames.ads
              });
              this.player.elements.container.appendChild(this.elements.container);
              google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);
              google.ima.settings.setLocale(this.player.config.ads.language);
              google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline);
              this.elements.displayContainer = new google.ima.AdDisplayContainer(this.elements.container, this.player.media);
              this.loader = new google.ima.AdsLoader(this.elements.displayContainer);
              this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED, function(event2) {
                return _this4.onAdsManagerLoaded(event2);
              }, false);
              this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, function(error) {
                return _this4.onAdError(error);
              }, false);
              this.requestAds();
            }
          }, {
            key: "requestAds",
            value: function requestAds() {
              var container = this.player.elements.container;
              try {
                var request = new google.ima.AdsRequest();
                request.adTagUrl = this.tagUrl;
                request.linearAdSlotWidth = container.offsetWidth;
                request.linearAdSlotHeight = container.offsetHeight;
                request.nonLinearAdSlotWidth = container.offsetWidth;
                request.nonLinearAdSlotHeight = container.offsetHeight;
                request.forceNonLinearFullSlot = false;
                request.setAdWillPlayMuted(!this.player.muted);
                this.loader.requestAds(request);
              } catch (e2) {
                this.onAdError(e2);
              }
            }
          }, {
            key: "pollCountdown",
            value: function pollCountdown() {
              var _this5 = this;
              var start = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
              if (!start) {
                clearInterval(this.countdownTimer);
                this.elements.container.removeAttribute("data-badge-text");
                return;
              }
              var update = function update2() {
                var time = formatTime(Math.max(_this5.manager.getRemainingTime(), 0));
                var label = "".concat(i18n.get("advertisement", _this5.player.config), " - ").concat(time);
                _this5.elements.container.setAttribute("data-badge-text", label);
              };
              this.countdownTimer = setInterval(update, 100);
            }
          }, {
            key: "onAdsManagerLoaded",
            value: function onAdsManagerLoaded(event2) {
              var _this6 = this;
              if (!this.enabled) {
                return;
              }
              var settings = new google.ima.AdsRenderingSettings();
              settings.restoreCustomPlaybackStateOnAdBreakComplete = true;
              settings.enablePreloading = true;
              this.manager = event2.getAdsManager(this.player, settings);
              this.cuePoints = this.manager.getCuePoints();
              this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR, function(error) {
                return _this6.onAdError(error);
              });
              Object.keys(google.ima.AdEvent.Type).forEach(function(type) {
                _this6.manager.addEventListener(google.ima.AdEvent.Type[type], function(e2) {
                  return _this6.onAdEvent(e2);
                });
              });
              this.trigger("loaded");
            }
          }, {
            key: "addCuePoints",
            value: function addCuePoints() {
              var _this7 = this;
              if (!is$1.empty(this.cuePoints)) {
                this.cuePoints.forEach(function(cuePoint) {
                  if (cuePoint !== 0 && cuePoint !== -1 && cuePoint < _this7.player.duration) {
                    var seekElement = _this7.player.elements.progress;
                    if (is$1.element(seekElement)) {
                      var cuePercentage = 100 / _this7.player.duration * cuePoint;
                      var cue = createElement("span", {
                        class: _this7.player.config.classNames.cues
                      });
                      cue.style.left = "".concat(cuePercentage.toString(), "%");
                      seekElement.appendChild(cue);
                    }
                  }
                });
              }
            }
          }, {
            key: "onAdEvent",
            value: function onAdEvent(event2) {
              var _this8 = this;
              var container = this.player.elements.container;
              var ad = event2.getAd();
              var adData = event2.getAdData();
              var dispatchEvent2 = function dispatchEvent3(type) {
                triggerEvent.call(_this8.player, _this8.player.media, "ads".concat(type.replace(/_/g, "").toLowerCase()));
              };
              dispatchEvent2(event2.type);
              switch (event2.type) {
                case google.ima.AdEvent.Type.LOADED:
                  this.trigger("loaded");
                  this.pollCountdown(true);
                  if (!ad.isLinear()) {
                    ad.width = container.offsetWidth;
                    ad.height = container.offsetHeight;
                  }
                  break;
                case google.ima.AdEvent.Type.STARTED:
                  this.manager.setVolume(this.player.volume);
                  break;
                case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:
                  if (this.player.ended) {
                    this.loadAds();
                  } else {
                    this.loader.contentComplete();
                  }
                  break;
                case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:
                  this.pauseContent();
                  break;
                case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:
                  this.pollCountdown();
                  this.resumeContent();
                  break;
                case google.ima.AdEvent.Type.LOG:
                  if (adData.adError) {
                    this.player.debug.warn("Non-fatal ad error: ".concat(adData.adError.getMessage()));
                  }
                  break;
              }
            }
          }, {
            key: "onAdError",
            value: function onAdError(event2) {
              this.cancel();
              this.player.debug.warn("Ads error", event2);
            }
          }, {
            key: "listeners",
            value: function listeners() {
              var _this9 = this;
              var container = this.player.elements.container;
              var time;
              this.player.on("canplay", function() {
                _this9.addCuePoints();
              });
              this.player.on("ended", function() {
                _this9.loader.contentComplete();
              });
              this.player.on("timeupdate", function() {
                time = _this9.player.currentTime;
              });
              this.player.on("seeked", function() {
                var seekedTime = _this9.player.currentTime;
                if (is$1.empty(_this9.cuePoints)) {
                  return;
                }
                _this9.cuePoints.forEach(function(cuePoint, index2) {
                  if (time < cuePoint && cuePoint < seekedTime) {
                    _this9.manager.discardAdBreak();
                    _this9.cuePoints.splice(index2, 1);
                  }
                });
              });
              window.addEventListener("resize", function() {
                if (_this9.manager) {
                  _this9.manager.resize(container.offsetWidth, container.offsetHeight, google.ima.ViewMode.NORMAL);
                }
              });
            }
          }, {
            key: "play",
            value: function play() {
              var _this10 = this;
              var container = this.player.elements.container;
              if (!this.managerPromise) {
                this.resumeContent();
              }
              this.managerPromise.then(function() {
                _this10.manager.setVolume(_this10.player.volume);
                _this10.elements.displayContainer.initialize();
                try {
                  if (!_this10.initialized) {
                    _this10.manager.init(container.offsetWidth, container.offsetHeight, google.ima.ViewMode.NORMAL);
                    _this10.manager.start();
                  }
                  _this10.initialized = true;
                } catch (adError) {
                  _this10.onAdError(adError);
                }
              }).catch(function() {
              });
            }
          }, {
            key: "resumeContent",
            value: function resumeContent() {
              this.elements.container.style.zIndex = "";
              this.playing = false;
              silencePromise(this.player.media.play());
            }
          }, {
            key: "pauseContent",
            value: function pauseContent() {
              this.elements.container.style.zIndex = 3;
              this.playing = true;
              this.player.media.pause();
            }
          }, {
            key: "cancel",
            value: function cancel() {
              if (this.initialized) {
                this.resumeContent();
              }
              this.trigger("error");
              this.loadAds();
            }
          }, {
            key: "loadAds",
            value: function loadAds() {
              var _this11 = this;
              this.managerPromise.then(function() {
                if (_this11.manager) {
                  _this11.manager.destroy();
                }
                _this11.managerPromise = new Promise(function(resolve) {
                  _this11.on("loaded", resolve);
                  _this11.player.debug.log(_this11.manager);
                });
                _this11.initialized = false;
                _this11.requestAds();
              }).catch(function() {
              });
            }
          }, {
            key: "trigger",
            value: function trigger2(event2) {
              var _this12 = this;
              for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
                args[_key - 1] = arguments[_key];
              }
              var handlers = this.events[event2];
              if (is$1.array(handlers)) {
                handlers.forEach(function(handler) {
                  if (is$1.function(handler)) {
                    handler.apply(_this12, args);
                  }
                });
              }
            }
          }, {
            key: "on",
            value: function on2(event2, callback) {
              if (!is$1.array(this.events[event2])) {
                this.events[event2] = [];
              }
              this.events[event2].push(callback);
              return this;
            }
          }, {
            key: "startSafetyTimer",
            value: function startSafetyTimer(time, from) {
              var _this13 = this;
              this.player.debug.log("Safety timer invoked from: ".concat(from));
              this.safetyTimer = setTimeout(function() {
                _this13.cancel();
                _this13.clearSafetyTimer("startSafetyTimer()");
              }, time);
            }
          }, {
            key: "clearSafetyTimer",
            value: function clearSafetyTimer(from) {
              if (!is$1.nullOrUndefined(this.safetyTimer)) {
                this.player.debug.log("Safety timer cleared from: ".concat(from));
                clearTimeout(this.safetyTimer);
                this.safetyTimer = null;
              }
            }
          }, {
            key: "enabled",
            get: function get2() {
              var config = this.config;
              return this.player.isHTML5 && this.player.isVideo && config.enabled && (!is$1.empty(config.publisherId) || is$1.url(config.tagUrl));
            }
          }, {
            key: "tagUrl",
            get: function get2() {
              var config = this.config;
              if (is$1.url(config.tagUrl)) {
                return config.tagUrl;
              }
              var params = {
                AV_PUBLISHERID: "58c25bb0073ef448b1087ad6",
                AV_CHANNELID: "5a0458dc28a06145e4519d21",
                AV_URL: window.location.hostname,
                cb: Date.now(),
                AV_WIDTH: 640,
                AV_HEIGHT: 480,
                AV_CDIM2: config.publisherId
              };
              var base2 = "https://go.aniview.com/api/adserver6/vast/";
              return "".concat(base2, "?").concat(buildUrlParams(params));
            }
          }]);
          return Ads2;
        }();
        var $findIndex = arrayIteration.findIndex;
        var FIND_INDEX = "findIndex";
        var SKIPS_HOLES$1 = true;
        var USES_TO_LENGTH$b = arrayMethodUsesToLength(FIND_INDEX);
        if (FIND_INDEX in [])
          Array(1)[FIND_INDEX](function() {
            SKIPS_HOLES$1 = false;
          });
        _export({ target: "Array", proto: true, forced: SKIPS_HOLES$1 || !USES_TO_LENGTH$b }, {
          findIndex: function findIndex2(callbackfn) {
            return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : void 0);
          }
        });
        addToUnscopables(FIND_INDEX);
        var min$6 = Math.min;
        var nativeLastIndexOf = [].lastIndexOf;
        var NEGATIVE_ZERO$1 = !!nativeLastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;
        var STRICT_METHOD$6 = arrayMethodIsStrict("lastIndexOf");
        var USES_TO_LENGTH$c = arrayMethodUsesToLength("indexOf", { ACCESSORS: true, 1: 0 });
        var FORCED$5 = NEGATIVE_ZERO$1 || !STRICT_METHOD$6 || !USES_TO_LENGTH$c;
        var arrayLastIndexOf = FORCED$5 ? function lastIndexOf(searchElement) {
          if (NEGATIVE_ZERO$1)
            return nativeLastIndexOf.apply(this, arguments) || 0;
          var O2 = toIndexedObject(this);
          var length = toLength(O2.length);
          var index2 = length - 1;
          if (arguments.length > 1)
            index2 = min$6(index2, toInteger(arguments[1]));
          if (index2 < 0)
            index2 = length + index2;
          for (; index2 >= 0; index2--)
            if (index2 in O2 && O2[index2] === searchElement)
              return index2 || 0;
          return -1;
        } : nativeLastIndexOf;
        _export({ target: "Array", proto: true, forced: arrayLastIndexOf !== [].lastIndexOf }, {
          lastIndexOf: arrayLastIndexOf
        });
        var parseVtt = function parseVtt2(vttDataString) {
          var processedList = [];
          var frames = vttDataString.split(/\r\n\r\n|\n\n|\r\r/);
          frames.forEach(function(frame) {
            var result = {};
            var lines = frame.split(/\r\n|\n|\r/);
            lines.forEach(function(line) {
              if (!is$1.number(result.startTime)) {
                var matchTimes = line.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);
                if (matchTimes) {
                  result.startTime = Number(matchTimes[1] || 0) * 60 * 60 + Number(matchTimes[2]) * 60 + Number(matchTimes[3]) + Number("0.".concat(matchTimes[4]));
                  result.endTime = Number(matchTimes[6] || 0) * 60 * 60 + Number(matchTimes[7]) * 60 + Number(matchTimes[8]) + Number("0.".concat(matchTimes[9]));
                }
              } else if (!is$1.empty(line.trim()) && is$1.empty(result.text)) {
                var lineSplit = line.trim().split("#xywh=");
                var _lineSplit = _slicedToArray(lineSplit, 1);
                result.text = _lineSplit[0];
                if (lineSplit[1]) {
                  var _lineSplit$1$split = lineSplit[1].split(",");
                  var _lineSplit$1$split2 = _slicedToArray(_lineSplit$1$split, 4);
                  result.x = _lineSplit$1$split2[0];
                  result.y = _lineSplit$1$split2[1];
                  result.w = _lineSplit$1$split2[2];
                  result.h = _lineSplit$1$split2[3];
                }
              }
            });
            if (result.text) {
              processedList.push(result);
            }
          });
          return processedList;
        };
        var fitRatio = function fitRatio2(ratio, outer) {
          var targetRatio = outer.width / outer.height;
          var result = {};
          if (ratio > targetRatio) {
            result.width = outer.width;
            result.height = 1 / ratio * outer.width;
          } else {
            result.height = outer.height;
            result.width = ratio * outer.height;
          }
          return result;
        };
        var PreviewThumbnails = /* @__PURE__ */ function() {
          function PreviewThumbnails2(player) {
            _classCallCheck(this, PreviewThumbnails2);
            this.player = player;
            this.thumbnails = [];
            this.loaded = false;
            this.lastMouseMoveTime = Date.now();
            this.mouseDown = false;
            this.loadedImages = [];
            this.elements = {
              thumb: {},
              scrubbing: {}
            };
            this.load();
          }
          _createClass(PreviewThumbnails2, [{
            key: "load",
            value: function load() {
              var _this = this;
              if (this.player.elements.display.seekTooltip) {
                this.player.elements.display.seekTooltip.hidden = this.enabled;
              }
              if (!this.enabled) {
                return;
              }
              this.getThumbnails().then(function() {
                if (!_this.enabled) {
                  return;
                }
                _this.render();
                _this.determineContainerAutoSizing();
                _this.loaded = true;
              });
            }
          }, {
            key: "getThumbnails",
            value: function getThumbnails() {
              var _this2 = this;
              return new Promise(function(resolve) {
                var src = _this2.player.config.previewThumbnails.src;
                if (is$1.empty(src)) {
                  throw new Error("Missing previewThumbnails.src config attribute");
                }
                var sortAndResolve = function sortAndResolve2() {
                  _this2.thumbnails.sort(function(x2, y2) {
                    return x2.height - y2.height;
                  });
                  _this2.player.debug.log("Preview thumbnails", _this2.thumbnails);
                  resolve();
                };
                if (is$1.function(src)) {
                  src(function(thumbnails) {
                    _this2.thumbnails = thumbnails;
                    sortAndResolve();
                  });
                } else {
                  var urls = is$1.string(src) ? [src] : src;
                  var promises = urls.map(function(u2) {
                    return _this2.getThumbnail(u2);
                  });
                  Promise.all(promises).then(sortAndResolve);
                }
              });
            }
          }, {
            key: "getThumbnail",
            value: function getThumbnail(url) {
              var _this3 = this;
              return new Promise(function(resolve) {
                fetch2(url).then(function(response) {
                  var thumbnail = {
                    frames: parseVtt(response),
                    height: null,
                    urlPrefix: ""
                  };
                  if (!thumbnail.frames[0].text.startsWith("/") && !thumbnail.frames[0].text.startsWith("http://") && !thumbnail.frames[0].text.startsWith("https://")) {
                    thumbnail.urlPrefix = url.substring(0, url.lastIndexOf("/") + 1);
                  }
                  var tempImage = new Image();
                  tempImage.onload = function() {
                    thumbnail.height = tempImage.naturalHeight;
                    thumbnail.width = tempImage.naturalWidth;
                    _this3.thumbnails.push(thumbnail);
                    resolve();
                  };
                  tempImage.src = thumbnail.urlPrefix + thumbnail.frames[0].text;
                });
              });
            }
          }, {
            key: "startMove",
            value: function startMove(event2) {
              if (!this.loaded) {
                return;
              }
              if (!is$1.event(event2) || !["touchmove", "mousemove"].includes(event2.type)) {
                return;
              }
              if (!this.player.media.duration) {
                return;
              }
              if (event2.type === "touchmove") {
                this.seekTime = this.player.media.duration * (this.player.elements.inputs.seek.value / 100);
              } else {
                var clientRect = this.player.elements.progress.getBoundingClientRect();
                var percentage = 100 / clientRect.width * (event2.pageX - clientRect.left);
                this.seekTime = this.player.media.duration * (percentage / 100);
                if (this.seekTime < 0) {
                  this.seekTime = 0;
                }
                if (this.seekTime > this.player.media.duration - 1) {
                  this.seekTime = this.player.media.duration - 1;
                }
                this.mousePosX = event2.pageX;
                this.elements.thumb.time.innerText = formatTime(this.seekTime);
              }
              this.showImageAtCurrentTime();
            }
          }, {
            key: "endMove",
            value: function endMove() {
              this.toggleThumbContainer(false, true);
            }
          }, {
            key: "startScrubbing",
            value: function startScrubbing(event2) {
              if (is$1.nullOrUndefined(event2.button) || event2.button === false || event2.button === 0) {
                this.mouseDown = true;
                if (this.player.media.duration) {
                  this.toggleScrubbingContainer(true);
                  this.toggleThumbContainer(false, true);
                  this.showImageAtCurrentTime();
                }
              }
            }
          }, {
            key: "endScrubbing",
            value: function endScrubbing() {
              var _this4 = this;
              this.mouseDown = false;
              if (Math.ceil(this.lastTime) === Math.ceil(this.player.media.currentTime)) {
                this.toggleScrubbingContainer(false);
              } else {
                once.call(this.player, this.player.media, "timeupdate", function() {
                  if (!_this4.mouseDown) {
                    _this4.toggleScrubbingContainer(false);
                  }
                });
              }
            }
          }, {
            key: "listeners",
            value: function listeners() {
              var _this5 = this;
              this.player.on("play", function() {
                _this5.toggleThumbContainer(false, true);
              });
              this.player.on("seeked", function() {
                _this5.toggleThumbContainer(false);
              });
              this.player.on("timeupdate", function() {
                _this5.lastTime = _this5.player.media.currentTime;
              });
            }
          }, {
            key: "render",
            value: function render() {
              this.elements.thumb.container = createElement("div", {
                class: this.player.config.classNames.previewThumbnails.thumbContainer
              });
              this.elements.thumb.imageContainer = createElement("div", {
                class: this.player.config.classNames.previewThumbnails.imageContainer
              });
              this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);
              var timeContainer = createElement("div", {
                class: this.player.config.classNames.previewThumbnails.timeContainer
              });
              this.elements.thumb.time = createElement("span", {}, "00:00");
              timeContainer.appendChild(this.elements.thumb.time);
              this.elements.thumb.container.appendChild(timeContainer);
              if (is$1.element(this.player.elements.progress)) {
                this.player.elements.progress.appendChild(this.elements.thumb.container);
              }
              this.elements.scrubbing.container = createElement("div", {
                class: this.player.config.classNames.previewThumbnails.scrubbingContainer
              });
              this.player.elements.wrapper.appendChild(this.elements.scrubbing.container);
            }
          }, {
            key: "destroy",
            value: function destroy2() {
              if (this.elements.thumb.container) {
                this.elements.thumb.container.remove();
              }
              if (this.elements.scrubbing.container) {
                this.elements.scrubbing.container.remove();
              }
            }
          }, {
            key: "showImageAtCurrentTime",
            value: function showImageAtCurrentTime() {
              var _this6 = this;
              if (this.mouseDown) {
                this.setScrubbingContainerSize();
              } else {
                this.setThumbContainerSizeAndPos();
              }
              var thumbNum = this.thumbnails[0].frames.findIndex(function(frame) {
                return _this6.seekTime >= frame.startTime && _this6.seekTime <= frame.endTime;
              });
              var hasThumb = thumbNum >= 0;
              var qualityIndex = 0;
              if (!this.mouseDown) {
                this.toggleThumbContainer(hasThumb);
              }
              if (!hasThumb) {
                return;
              }
              this.thumbnails.forEach(function(thumbnail, index2) {
                if (_this6.loadedImages.includes(thumbnail.frames[thumbNum].text)) {
                  qualityIndex = index2;
                }
              });
              if (thumbNum !== this.showingThumb) {
                this.showingThumb = thumbNum;
                this.loadImage(qualityIndex);
              }
            }
          }, {
            key: "loadImage",
            value: function loadImage2() {
              var _this7 = this;
              var qualityIndex = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
              var thumbNum = this.showingThumb;
              var thumbnail = this.thumbnails[qualityIndex];
              var urlPrefix = thumbnail.urlPrefix;
              var frame = thumbnail.frames[thumbNum];
              var thumbFilename = thumbnail.frames[thumbNum].text;
              var thumbUrl = urlPrefix + thumbFilename;
              if (!this.currentImageElement || this.currentImageElement.dataset.filename !== thumbFilename) {
                if (this.loadingImage && this.usingSprites) {
                  this.loadingImage.onload = null;
                }
                var previewImage = new Image();
                previewImage.src = thumbUrl;
                previewImage.dataset.index = thumbNum;
                previewImage.dataset.filename = thumbFilename;
                this.showingThumbFilename = thumbFilename;
                this.player.debug.log("Loading image: ".concat(thumbUrl));
                previewImage.onload = function() {
                  return _this7.showImage(previewImage, frame, qualityIndex, thumbNum, thumbFilename, true);
                };
                this.loadingImage = previewImage;
                this.removeOldImages(previewImage);
              } else {
                this.showImage(this.currentImageElement, frame, qualityIndex, thumbNum, thumbFilename, false);
                this.currentImageElement.dataset.index = thumbNum;
                this.removeOldImages(this.currentImageElement);
              }
            }
          }, {
            key: "showImage",
            value: function showImage(previewImage, frame, qualityIndex, thumbNum, thumbFilename) {
              var newImage = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : true;
              this.player.debug.log("Showing thumb: ".concat(thumbFilename, ". num: ").concat(thumbNum, ". qual: ").concat(qualityIndex, ". newimg: ").concat(newImage));
              this.setImageSizeAndOffset(previewImage, frame);
              if (newImage) {
                this.currentImageContainer.appendChild(previewImage);
                this.currentImageElement = previewImage;
                if (!this.loadedImages.includes(thumbFilename)) {
                  this.loadedImages.push(thumbFilename);
                }
              }
              this.preloadNearby(thumbNum, true).then(this.preloadNearby(thumbNum, false)).then(this.getHigherQuality(qualityIndex, previewImage, frame, thumbFilename));
            }
          }, {
            key: "removeOldImages",
            value: function removeOldImages(currentImage) {
              var _this8 = this;
              Array.from(this.currentImageContainer.children).forEach(function(image) {
                if (image.tagName.toLowerCase() !== "img") {
                  return;
                }
                var removeDelay = _this8.usingSprites ? 500 : 1e3;
                if (image.dataset.index !== currentImage.dataset.index && !image.dataset.deleting) {
                  image.dataset.deleting = true;
                  var currentImageContainer = _this8.currentImageContainer;
                  setTimeout(function() {
                    currentImageContainer.removeChild(image);
                    _this8.player.debug.log("Removing thumb: ".concat(image.dataset.filename));
                  }, removeDelay);
                }
              });
            }
          }, {
            key: "preloadNearby",
            value: function preloadNearby(thumbNum) {
              var _this9 = this;
              var forward = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : true;
              return new Promise(function(resolve) {
                setTimeout(function() {
                  var oldThumbFilename = _this9.thumbnails[0].frames[thumbNum].text;
                  if (_this9.showingThumbFilename === oldThumbFilename) {
                    var thumbnailsClone;
                    if (forward) {
                      thumbnailsClone = _this9.thumbnails[0].frames.slice(thumbNum);
                    } else {
                      thumbnailsClone = _this9.thumbnails[0].frames.slice(0, thumbNum).reverse();
                    }
                    var foundOne = false;
                    thumbnailsClone.forEach(function(frame) {
                      var newThumbFilename = frame.text;
                      if (newThumbFilename !== oldThumbFilename) {
                        if (!_this9.loadedImages.includes(newThumbFilename)) {
                          foundOne = true;
                          _this9.player.debug.log("Preloading thumb filename: ".concat(newThumbFilename));
                          var urlPrefix = _this9.thumbnails[0].urlPrefix;
                          var thumbURL = urlPrefix + newThumbFilename;
                          var previewImage = new Image();
                          previewImage.src = thumbURL;
                          previewImage.onload = function() {
                            _this9.player.debug.log("Preloaded thumb filename: ".concat(newThumbFilename));
                            if (!_this9.loadedImages.includes(newThumbFilename))
                              _this9.loadedImages.push(newThumbFilename);
                            resolve();
                          };
                        }
                      }
                    });
                    if (!foundOne) {
                      resolve();
                    }
                  }
                }, 300);
              });
            }
          }, {
            key: "getHigherQuality",
            value: function getHigherQuality(currentQualityIndex, previewImage, frame, thumbFilename) {
              var _this10 = this;
              if (currentQualityIndex < this.thumbnails.length - 1) {
                var previewImageHeight = previewImage.naturalHeight;
                if (this.usingSprites) {
                  previewImageHeight = frame.h;
                }
                if (previewImageHeight < this.thumbContainerHeight) {
                  setTimeout(function() {
                    if (_this10.showingThumbFilename === thumbFilename) {
                      _this10.player.debug.log("Showing higher quality thumb for: ".concat(thumbFilename));
                      _this10.loadImage(currentQualityIndex + 1);
                    }
                  }, 300);
                }
              }
            }
          }, {
            key: "toggleThumbContainer",
            value: function toggleThumbContainer() {
              var toggle2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
              var clearShowing = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
              var className = this.player.config.classNames.previewThumbnails.thumbContainerShown;
              this.elements.thumb.container.classList.toggle(className, toggle2);
              if (!toggle2 && clearShowing) {
                this.showingThumb = null;
                this.showingThumbFilename = null;
              }
            }
          }, {
            key: "toggleScrubbingContainer",
            value: function toggleScrubbingContainer() {
              var toggle2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : false;
              var className = this.player.config.classNames.previewThumbnails.scrubbingContainerShown;
              this.elements.scrubbing.container.classList.toggle(className, toggle2);
              if (!toggle2) {
                this.showingThumb = null;
                this.showingThumbFilename = null;
              }
            }
          }, {
            key: "determineContainerAutoSizing",
            value: function determineContainerAutoSizing() {
              if (this.elements.thumb.imageContainer.clientHeight > 20 || this.elements.thumb.imageContainer.clientWidth > 20) {
                this.sizeSpecifiedInCSS = true;
              }
            }
          }, {
            key: "setThumbContainerSizeAndPos",
            value: function setThumbContainerSizeAndPos() {
              if (!this.sizeSpecifiedInCSS) {
                var thumbWidth = Math.floor(this.thumbContainerHeight * this.thumbAspectRatio);
                this.elements.thumb.imageContainer.style.height = "".concat(this.thumbContainerHeight, "px");
                this.elements.thumb.imageContainer.style.width = "".concat(thumbWidth, "px");
              } else if (this.elements.thumb.imageContainer.clientHeight > 20 && this.elements.thumb.imageContainer.clientWidth < 20) {
                var _thumbWidth = Math.floor(this.elements.thumb.imageContainer.clientHeight * this.thumbAspectRatio);
                this.elements.thumb.imageContainer.style.width = "".concat(_thumbWidth, "px");
              } else if (this.elements.thumb.imageContainer.clientHeight < 20 && this.elements.thumb.imageContainer.clientWidth > 20) {
                var thumbHeight = Math.floor(this.elements.thumb.imageContainer.clientWidth / this.thumbAspectRatio);
                this.elements.thumb.imageContainer.style.height = "".concat(thumbHeight, "px");
              }
              this.setThumbContainerPos();
            }
          }, {
            key: "setThumbContainerPos",
            value: function setThumbContainerPos() {
              var seekbarRect = this.player.elements.progress.getBoundingClientRect();
              var plyrRect = this.player.elements.container.getBoundingClientRect();
              var container = this.elements.thumb.container;
              var minVal = plyrRect.left - seekbarRect.left + 10;
              var maxVal = plyrRect.right - seekbarRect.left - container.clientWidth - 10;
              var previewPos = this.mousePosX - seekbarRect.left - container.clientWidth / 2;
              if (previewPos < minVal) {
                previewPos = minVal;
              }
              if (previewPos > maxVal) {
                previewPos = maxVal;
              }
              container.style.left = "".concat(previewPos, "px");
            }
          }, {
            key: "setScrubbingContainerSize",
            value: function setScrubbingContainerSize() {
              var _fitRatio = fitRatio(this.thumbAspectRatio, {
                width: this.player.media.clientWidth,
                height: this.player.media.clientHeight
              }), width = _fitRatio.width, height = _fitRatio.height;
              this.elements.scrubbing.container.style.width = "".concat(width, "px");
              this.elements.scrubbing.container.style.height = "".concat(height, "px");
            }
          }, {
            key: "setImageSizeAndOffset",
            value: function setImageSizeAndOffset(previewImage, frame) {
              if (!this.usingSprites) {
                return;
              }
              var multiplier = this.thumbContainerHeight / frame.h;
              previewImage.style.height = "".concat(previewImage.naturalHeight * multiplier, "px");
              previewImage.style.width = "".concat(previewImage.naturalWidth * multiplier, "px");
              previewImage.style.left = "-".concat(frame.x * multiplier, "px");
              previewImage.style.top = "-".concat(frame.y * multiplier, "px");
            }
          }, {
            key: "enabled",
            get: function get2() {
              return this.player.isHTML5 && this.player.isVideo && this.player.config.previewThumbnails.enabled;
            }
          }, {
            key: "currentImageContainer",
            get: function get2() {
              if (this.mouseDown) {
                return this.elements.scrubbing.container;
              }
              return this.elements.thumb.imageContainer;
            }
          }, {
            key: "usingSprites",
            get: function get2() {
              return Object.keys(this.thumbnails[0].frames[0]).includes("w");
            }
          }, {
            key: "thumbAspectRatio",
            get: function get2() {
              if (this.usingSprites) {
                return this.thumbnails[0].frames[0].w / this.thumbnails[0].frames[0].h;
              }
              return this.thumbnails[0].width / this.thumbnails[0].height;
            }
          }, {
            key: "thumbContainerHeight",
            get: function get2() {
              if (this.mouseDown) {
                var _fitRatio2 = fitRatio(this.thumbAspectRatio, {
                  width: this.player.media.clientWidth,
                  height: this.player.media.clientHeight
                }), height = _fitRatio2.height;
                return height;
              }
              if (this.sizeSpecifiedInCSS) {
                return this.elements.thumb.imageContainer.clientHeight;
              }
              return Math.floor(this.player.media.clientWidth / this.thumbAspectRatio / 4);
            }
          }, {
            key: "currentImageElement",
            get: function get2() {
              if (this.mouseDown) {
                return this.currentScrubbingImageElement;
              }
              return this.currentThumbnailImageElement;
            },
            set: function set2(element) {
              if (this.mouseDown) {
                this.currentScrubbingImageElement = element;
              } else {
                this.currentThumbnailImageElement = element;
              }
            }
          }]);
          return PreviewThumbnails2;
        }();
        var source = {
          insertElements: function insertElements(type, attributes) {
            var _this = this;
            if (is$1.string(attributes)) {
              insertElement(type, this.media, {
                src: attributes
              });
            } else if (is$1.array(attributes)) {
              attributes.forEach(function(attribute) {
                insertElement(type, _this.media, attribute);
              });
            }
          },
          change: function change(input) {
            var _this2 = this;
            if (!getDeep(input, "sources.length")) {
              this.debug.warn("Invalid source format");
              return;
            }
            html5.cancelRequests.call(this);
            this.destroy.call(this, function() {
              _this2.options.quality = [];
              removeElement(_this2.media);
              _this2.media = null;
              if (is$1.element(_this2.elements.container)) {
                _this2.elements.container.removeAttribute("class");
              }
              var sources = input.sources, type = input.type;
              var _sources = _slicedToArray(sources, 1), _sources$ = _sources[0], _sources$$provider = _sources$.provider, provider = _sources$$provider === void 0 ? providers.html5 : _sources$$provider, src = _sources$.src;
              var tagName = provider === "html5" ? type : "div";
              var attributes = provider === "html5" ? {} : {
                src
              };
              Object.assign(_this2, {
                provider,
                type,
                supported: support.check(type, provider, _this2.config.playsinline),
                media: createElement(tagName, attributes)
              });
              _this2.elements.container.appendChild(_this2.media);
              if (is$1.boolean(input.autoplay)) {
                _this2.config.autoplay = input.autoplay;
              }
              if (_this2.isHTML5) {
                if (_this2.config.crossorigin) {
                  _this2.media.setAttribute("crossorigin", "");
                }
                if (_this2.config.autoplay) {
                  _this2.media.setAttribute("autoplay", "");
                }
                if (!is$1.empty(input.poster)) {
                  _this2.poster = input.poster;
                }
                if (_this2.config.loop.active) {
                  _this2.media.setAttribute("loop", "");
                }
                if (_this2.config.muted) {
                  _this2.media.setAttribute("muted", "");
                }
                if (_this2.config.playsinline) {
                  _this2.media.setAttribute("playsinline", "");
                }
              }
              ui.addStyleHook.call(_this2);
              if (_this2.isHTML5) {
                source.insertElements.call(_this2, "source", sources);
              }
              _this2.config.title = input.title;
              media.setup.call(_this2);
              if (_this2.isHTML5) {
                if (Object.keys(input).includes("tracks")) {
                  source.insertElements.call(_this2, "track", input.tracks);
                }
              }
              if (_this2.isHTML5 || _this2.isEmbed && !_this2.supported.ui) {
                ui.build.call(_this2);
              }
              if (_this2.isHTML5) {
                _this2.media.load();
              }
              if (!is$1.empty(input.previewThumbnails)) {
                Object.assign(_this2.config.previewThumbnails, input.previewThumbnails);
                if (_this2.previewThumbnails && _this2.previewThumbnails.loaded) {
                  _this2.previewThumbnails.destroy();
                  _this2.previewThumbnails = null;
                }
                if (_this2.config.previewThumbnails.enabled) {
                  _this2.previewThumbnails = new PreviewThumbnails(_this2);
                }
              }
              _this2.fullscreen.update();
            }, true);
          }
        };
        function clamp() {
          var input = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : 0;
          var min2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
          var max2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 255;
          return Math.min(Math.max(input, min2), max2);
        }
        var Plyr2 = /* @__PURE__ */ function() {
          function Plyr3(target, options) {
            var _this = this;
            _classCallCheck(this, Plyr3);
            this.timers = {};
            this.ready = false;
            this.loading = false;
            this.failed = false;
            this.touch = support.touch;
            this.media = target;
            if (is$1.string(this.media)) {
              this.media = document.querySelectorAll(this.media);
            }
            if (window.jQuery && this.media instanceof jQuery || is$1.nodeList(this.media) || is$1.array(this.media)) {
              this.media = this.media[0];
            }
            this.config = extend({}, defaults$1, Plyr3.defaults, options || {}, function() {
              try {
                return JSON.parse(_this.media.getAttribute("data-plyr-config"));
              } catch (e2) {
                return {};
              }
            }());
            this.elements = {
              container: null,
              fullscreen: null,
              captions: null,
              buttons: {},
              display: {},
              progress: {},
              inputs: {},
              settings: {
                popup: null,
                menu: null,
                panels: {},
                buttons: {}
              }
            };
            this.captions = {
              active: null,
              currentTrack: -1,
              meta: /* @__PURE__ */ new WeakMap()
            };
            this.fullscreen = {
              active: false
            };
            this.options = {
              speed: [],
              quality: []
            };
            this.debug = new Console(this.config.debug);
            this.debug.log("Config", this.config);
            this.debug.log("Support", support);
            if (is$1.nullOrUndefined(this.media) || !is$1.element(this.media)) {
              this.debug.error("Setup failed: no suitable element passed");
              return;
            }
            if (this.media.plyr) {
              this.debug.warn("Target already setup");
              return;
            }
            if (!this.config.enabled) {
              this.debug.error("Setup failed: disabled by config");
              return;
            }
            if (!support.check().api) {
              this.debug.error("Setup failed: no support");
              return;
            }
            var clone = this.media.cloneNode(true);
            clone.autoplay = false;
            this.elements.original = clone;
            var type = this.media.tagName.toLowerCase();
            var iframe = null;
            var url = null;
            switch (type) {
              case "div":
                iframe = this.media.querySelector("iframe");
                if (is$1.element(iframe)) {
                  url = parseUrl(iframe.getAttribute("src"));
                  this.provider = getProviderByUrl(url.toString());
                  this.elements.container = this.media;
                  this.media = iframe;
                  this.elements.container.className = "";
                  if (url.search.length) {
                    var truthy = ["1", "true"];
                    if (truthy.includes(url.searchParams.get("autoplay"))) {
                      this.config.autoplay = true;
                    }
                    if (truthy.includes(url.searchParams.get("loop"))) {
                      this.config.loop.active = true;
                    }
                    if (this.isYouTube) {
                      this.config.playsinline = truthy.includes(url.searchParams.get("playsinline"));
                      this.config.youtube.hl = url.searchParams.get("hl");
                    } else {
                      this.config.playsinline = true;
                    }
                  }
                } else {
                  this.provider = this.media.getAttribute(this.config.attributes.embed.provider);
                  this.media.removeAttribute(this.config.attributes.embed.provider);
                }
                if (is$1.empty(this.provider) || !Object.keys(providers).includes(this.provider)) {
                  this.debug.error("Setup failed: Invalid provider");
                  return;
                }
                this.type = types.video;
                break;
              case "video":
              case "audio":
                this.type = type;
                this.provider = providers.html5;
                if (this.media.hasAttribute("crossorigin")) {
                  this.config.crossorigin = true;
                }
                if (this.media.hasAttribute("autoplay")) {
                  this.config.autoplay = true;
                }
                if (this.media.hasAttribute("playsinline") || this.media.hasAttribute("webkit-playsinline")) {
                  this.config.playsinline = true;
                }
                if (this.media.hasAttribute("muted")) {
                  this.config.muted = true;
                }
                if (this.media.hasAttribute("loop")) {
                  this.config.loop.active = true;
                }
                break;
              default:
                this.debug.error("Setup failed: unsupported type");
                return;
            }
            this.supported = support.check(this.type, this.provider, this.config.playsinline);
            if (!this.supported.api) {
              this.debug.error("Setup failed: no support");
              return;
            }
            this.eventListeners = [];
            this.listeners = new Listeners(this);
            this.storage = new Storage(this);
            this.media.plyr = this;
            if (!is$1.element(this.elements.container)) {
              this.elements.container = createElement("div", {
                tabindex: 0
              });
              wrap$1(this.media, this.elements.container);
            }
            ui.migrateStyles.call(this);
            ui.addStyleHook.call(this);
            media.setup.call(this);
            if (this.config.debug) {
              on.call(this, this.elements.container, this.config.events.join(" "), function(event2) {
                _this.debug.log("event: ".concat(event2.type));
              });
            }
            this.fullscreen = new Fullscreen(this);
            if (this.isHTML5 || this.isEmbed && !this.supported.ui) {
              ui.build.call(this);
            }
            this.listeners.container();
            this.listeners.global();
            if (this.config.ads.enabled) {
              this.ads = new Ads(this);
            }
            if (this.isHTML5 && this.config.autoplay) {
              setTimeout(function() {
                return silencePromise(_this.play());
              }, 10);
            }
            this.lastSeekTime = 0;
            if (this.config.previewThumbnails.enabled) {
              this.previewThumbnails = new PreviewThumbnails(this);
            }
          }
          _createClass(Plyr3, [{
            key: "play",
            value: function play() {
              var _this2 = this;
              if (!is$1.function(this.media.play)) {
                return null;
              }
              if (this.ads && this.ads.enabled) {
                this.ads.managerPromise.then(function() {
                  return _this2.ads.play();
                }).catch(function() {
                  return silencePromise(_this2.media.play());
                });
              }
              return this.media.play();
            }
          }, {
            key: "pause",
            value: function pause() {
              if (!this.playing || !is$1.function(this.media.pause)) {
                return null;
              }
              return this.media.pause();
            }
          }, {
            key: "togglePlay",
            value: function togglePlay(input) {
              var toggle2 = is$1.boolean(input) ? input : !this.playing;
              if (toggle2) {
                return this.play();
              }
              return this.pause();
            }
          }, {
            key: "stop",
            value: function stop() {
              if (this.isHTML5) {
                this.pause();
                this.restart();
              } else if (is$1.function(this.media.stop)) {
                this.media.stop();
              }
            }
          }, {
            key: "restart",
            value: function restart() {
              this.currentTime = 0;
            }
          }, {
            key: "rewind",
            value: function rewind(seekTime) {
              this.currentTime -= is$1.number(seekTime) ? seekTime : this.config.seekTime;
            }
          }, {
            key: "forward",
            value: function forward(seekTime) {
              this.currentTime += is$1.number(seekTime) ? seekTime : this.config.seekTime;
            }
          }, {
            key: "increaseVolume",
            value: function increaseVolume(step) {
              var volume = this.media.muted ? 0 : this.volume;
              this.volume = volume + (is$1.number(step) ? step : 0);
            }
          }, {
            key: "decreaseVolume",
            value: function decreaseVolume(step) {
              this.increaseVolume(-step);
            }
          }, {
            key: "toggleCaptions",
            value: function toggleCaptions(input) {
              captions.toggle.call(this, input, false);
            }
          }, {
            key: "airplay",
            value: function airplay() {
              if (support.airplay) {
                this.media.webkitShowPlaybackTargetPicker();
              }
            }
          }, {
            key: "toggleControls",
            value: function toggleControls(toggle2) {
              if (this.supported.ui && !this.isAudio) {
                var isHidden = hasClass(this.elements.container, this.config.classNames.hideControls);
                var force = typeof toggle2 === "undefined" ? void 0 : !toggle2;
                var hiding = toggleClass(this.elements.container, this.config.classNames.hideControls, force);
                if (hiding && is$1.array(this.config.controls) && this.config.controls.includes("settings") && !is$1.empty(this.config.settings)) {
                  controls.toggleMenu.call(this, false);
                }
                if (hiding !== isHidden) {
                  var eventName = hiding ? "controlshidden" : "controlsshown";
                  triggerEvent.call(this, this.media, eventName);
                }
                return !hiding;
              }
              return false;
            }
          }, {
            key: "on",
            value: function on$1(event2, callback) {
              on.call(this, this.elements.container, event2, callback);
            }
          }, {
            key: "once",
            value: function once$1(event2, callback) {
              once.call(this, this.elements.container, event2, callback);
            }
          }, {
            key: "off",
            value: function off$1(event2, callback) {
              off(this.elements.container, event2, callback);
            }
          }, {
            key: "destroy",
            value: function destroy2(callback) {
              var _this3 = this;
              var soft = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : false;
              if (!this.ready) {
                return;
              }
              var done = function done2() {
                document.body.style.overflow = "";
                _this3.embed = null;
                if (soft) {
                  if (Object.keys(_this3.elements).length) {
                    removeElement(_this3.elements.buttons.play);
                    removeElement(_this3.elements.captions);
                    removeElement(_this3.elements.controls);
                    removeElement(_this3.elements.wrapper);
                    _this3.elements.buttons.play = null;
                    _this3.elements.captions = null;
                    _this3.elements.controls = null;
                    _this3.elements.wrapper = null;
                  }
                  if (is$1.function(callback)) {
                    callback();
                  }
                } else {
                  unbindListeners.call(_this3);
                  replaceElement(_this3.elements.original, _this3.elements.container);
                  triggerEvent.call(_this3, _this3.elements.original, "destroyed", true);
                  if (is$1.function(callback)) {
                    callback.call(_this3.elements.original);
                  }
                  _this3.ready = false;
                  setTimeout(function() {
                    _this3.elements = null;
                    _this3.media = null;
                  }, 200);
                }
              };
              this.stop();
              clearTimeout(this.timers.loading);
              clearTimeout(this.timers.controls);
              clearTimeout(this.timers.resized);
              if (this.isHTML5) {
                ui.toggleNativeControls.call(this, true);
                done();
              } else if (this.isYouTube) {
                clearInterval(this.timers.buffering);
                clearInterval(this.timers.playing);
                if (this.embed !== null && is$1.function(this.embed.destroy)) {
                  this.embed.destroy();
                }
                done();
              } else if (this.isVimeo) {
                if (this.embed !== null) {
                  this.embed.unload().then(done);
                }
                setTimeout(done, 200);
              }
            }
          }, {
            key: "supports",
            value: function supports(type) {
              return support.mime.call(this, type);
            }
          }, {
            key: "isHTML5",
            get: function get2() {
              return this.provider === providers.html5;
            }
          }, {
            key: "isEmbed",
            get: function get2() {
              return this.isYouTube || this.isVimeo;
            }
          }, {
            key: "isYouTube",
            get: function get2() {
              return this.provider === providers.youtube;
            }
          }, {
            key: "isVimeo",
            get: function get2() {
              return this.provider === providers.vimeo;
            }
          }, {
            key: "isVideo",
            get: function get2() {
              return this.type === types.video;
            }
          }, {
            key: "isAudio",
            get: function get2() {
              return this.type === types.audio;
            }
          }, {
            key: "playing",
            get: function get2() {
              return Boolean(this.ready && !this.paused && !this.ended);
            }
          }, {
            key: "paused",
            get: function get2() {
              return Boolean(this.media.paused);
            }
          }, {
            key: "stopped",
            get: function get2() {
              return Boolean(this.paused && this.currentTime === 0);
            }
          }, {
            key: "ended",
            get: function get2() {
              return Boolean(this.media.ended);
            }
          }, {
            key: "currentTime",
            set: function set2(input) {
              if (!this.duration) {
                return;
              }
              var inputIsValid = is$1.number(input) && input > 0;
              this.media.currentTime = inputIsValid ? Math.min(input, this.duration) : 0;
              this.debug.log("Seeking to ".concat(this.currentTime, " seconds"));
            },
            get: function get2() {
              return Number(this.media.currentTime);
            }
          }, {
            key: "buffered",
            get: function get2() {
              var buffered = this.media.buffered;
              if (is$1.number(buffered)) {
                return buffered;
              }
              if (buffered && buffered.length && this.duration > 0) {
                return buffered.end(0) / this.duration;
              }
              return 0;
            }
          }, {
            key: "seeking",
            get: function get2() {
              return Boolean(this.media.seeking);
            }
          }, {
            key: "duration",
            get: function get2() {
              var fauxDuration = parseFloat(this.config.duration);
              var realDuration = (this.media || {}).duration;
              var duration = !is$1.number(realDuration) || realDuration === Infinity ? 0 : realDuration;
              return fauxDuration || duration;
            }
          }, {
            key: "volume",
            set: function set2(value) {
              var volume = value;
              var max2 = 1;
              var min2 = 0;
              if (is$1.string(volume)) {
                volume = Number(volume);
              }
              if (!is$1.number(volume)) {
                volume = this.storage.get("volume");
              }
              if (!is$1.number(volume)) {
                volume = this.config.volume;
              }
              if (volume > max2) {
                volume = max2;
              }
              if (volume < min2) {
                volume = min2;
              }
              this.config.volume = volume;
              this.media.volume = volume;
              if (!is$1.empty(value) && this.muted && volume > 0) {
                this.muted = false;
              }
            },
            get: function get2() {
              return Number(this.media.volume);
            }
          }, {
            key: "muted",
            set: function set2(mute) {
              var toggle2 = mute;
              if (!is$1.boolean(toggle2)) {
                toggle2 = this.storage.get("muted");
              }
              if (!is$1.boolean(toggle2)) {
                toggle2 = this.config.muted;
              }
              this.config.muted = toggle2;
              this.media.muted = toggle2;
            },
            get: function get2() {
              return Boolean(this.media.muted);
            }
          }, {
            key: "hasAudio",
            get: function get2() {
              if (!this.isHTML5) {
                return true;
              }
              if (this.isAudio) {
                return true;
              }
              return Boolean(this.media.mozHasAudio) || Boolean(this.media.webkitAudioDecodedByteCount) || Boolean(this.media.audioTracks && this.media.audioTracks.length);
            }
          }, {
            key: "speed",
            set: function set2(input) {
              var _this4 = this;
              var speed = null;
              if (is$1.number(input)) {
                speed = input;
              }
              if (!is$1.number(speed)) {
                speed = this.storage.get("speed");
              }
              if (!is$1.number(speed)) {
                speed = this.config.speed.selected;
              }
              var min2 = this.minimumSpeed, max2 = this.maximumSpeed;
              speed = clamp(speed, min2, max2);
              this.config.speed.selected = speed;
              setTimeout(function() {
                _this4.media.playbackRate = speed;
              }, 0);
            },
            get: function get2() {
              return Number(this.media.playbackRate);
            }
          }, {
            key: "minimumSpeed",
            get: function get2() {
              if (this.isYouTube) {
                return Math.min.apply(Math, _toConsumableArray(this.options.speed));
              }
              if (this.isVimeo) {
                return 0.5;
              }
              return 0.0625;
            }
          }, {
            key: "maximumSpeed",
            get: function get2() {
              if (this.isYouTube) {
                return Math.max.apply(Math, _toConsumableArray(this.options.speed));
              }
              if (this.isVimeo) {
                return 2;
              }
              return 16;
            }
          }, {
            key: "quality",
            set: function set2(input) {
              var config = this.config.quality;
              var options = this.options.quality;
              if (!options.length) {
                return;
              }
              var quality = [!is$1.empty(input) && Number(input), this.storage.get("quality"), config.selected, config.default].find(is$1.number);
              var updateStorage = true;
              if (!options.includes(quality)) {
                var value = closest$1(options, quality);
                this.debug.warn("Unsupported quality option: ".concat(quality, ", using ").concat(value, " instead"));
                quality = value;
                updateStorage = false;
              }
              config.selected = quality;
              this.media.quality = quality;
              if (updateStorage) {
                this.storage.set({
                  quality
                });
              }
            },
            get: function get2() {
              return this.media.quality;
            }
          }, {
            key: "loop",
            set: function set2(input) {
              var toggle2 = is$1.boolean(input) ? input : this.config.loop.active;
              this.config.loop.active = toggle2;
              this.media.loop = toggle2;
            },
            get: function get2() {
              return Boolean(this.media.loop);
            }
          }, {
            key: "source",
            set: function set2(input) {
              source.change.call(this, input);
            },
            get: function get2() {
              return this.media.currentSrc;
            }
          }, {
            key: "download",
            get: function get2() {
              var download = this.config.urls.download;
              return is$1.url(download) ? download : this.source;
            },
            set: function set2(input) {
              if (!is$1.url(input)) {
                return;
              }
              this.config.urls.download = input;
              controls.setDownloadUrl.call(this);
            }
          }, {
            key: "poster",
            set: function set2(input) {
              if (!this.isVideo) {
                this.debug.warn("Poster can only be set for video");
                return;
              }
              ui.setPoster.call(this, input, false).catch(function() {
              });
            },
            get: function get2() {
              if (!this.isVideo) {
                return null;
              }
              return this.media.getAttribute("poster") || this.media.getAttribute("data-poster");
            }
          }, {
            key: "ratio",
            get: function get2() {
              if (!this.isVideo) {
                return null;
              }
              var ratio = reduceAspectRatio(getAspectRatio.call(this));
              return is$1.array(ratio) ? ratio.join(":") : ratio;
            },
            set: function set2(input) {
              if (!this.isVideo) {
                this.debug.warn("Aspect ratio can only be set for video");
                return;
              }
              if (!is$1.string(input) || !validateRatio(input)) {
                this.debug.error("Invalid aspect ratio specified (".concat(input, ")"));
                return;
              }
              this.config.ratio = input;
              setAspectRatio.call(this);
            }
          }, {
            key: "autoplay",
            set: function set2(input) {
              var toggle2 = is$1.boolean(input) ? input : this.config.autoplay;
              this.config.autoplay = toggle2;
            },
            get: function get2() {
              return Boolean(this.config.autoplay);
            }
          }, {
            key: "currentTrack",
            set: function set2(input) {
              captions.set.call(this, input, false);
            },
            get: function get2() {
              var _this$captions = this.captions, toggled = _this$captions.toggled, currentTrack = _this$captions.currentTrack;
              return toggled ? currentTrack : -1;
            }
          }, {
            key: "language",
            set: function set2(input) {
              captions.setLanguage.call(this, input, false);
            },
            get: function get2() {
              return (captions.getCurrentTrack.call(this) || {}).language;
            }
          }, {
            key: "pip",
            set: function set2(input) {
              if (!support.pip) {
                return;
              }
              var toggle2 = is$1.boolean(input) ? input : !this.pip;
              if (is$1.function(this.media.webkitSetPresentationMode)) {
                this.media.webkitSetPresentationMode(toggle2 ? pip.active : pip.inactive);
              }
              if (is$1.function(this.media.requestPictureInPicture)) {
                if (!this.pip && toggle2) {
                  this.media.requestPictureInPicture();
                } else if (this.pip && !toggle2) {
                  document.exitPictureInPicture();
                }
              }
            },
            get: function get2() {
              if (!support.pip) {
                return null;
              }
              if (!is$1.empty(this.media.webkitPresentationMode)) {
                return this.media.webkitPresentationMode === pip.active;
              }
              return this.media === document.pictureInPictureElement;
            }
          }], [{
            key: "supported",
            value: function supported(type, provider, inline) {
              return support.check(type, provider, inline);
            }
          }, {
            key: "loadSprite",
            value: function loadSprite$1(url, id2) {
              return loadSprite(url, id2);
            }
          }, {
            key: "setup",
            value: function setup(selector) {
              var options = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {};
              var targets = null;
              if (is$1.string(selector)) {
                targets = Array.from(document.querySelectorAll(selector));
              } else if (is$1.nodeList(selector)) {
                targets = Array.from(selector);
              } else if (is$1.array(selector)) {
                targets = selector.filter(is$1.element);
              }
              if (is$1.empty(targets)) {
                return null;
              }
              return targets.map(function(t3) {
                return new Plyr3(t3, options);
              });
            }
          }]);
          return Plyr3;
        }();
        Plyr2.defaults = cloneDeep(defaults$1);
        return Plyr2;
      });
    }
  });

  // frappe/public/js/frappe/provide.js
  if (!window.frappe)
    window.frappe = {};
  frappe.provide = function(namespace) {
    var nsl = namespace.split(".");
    var parent = window;
    for (var i2 = 0; i2 < nsl.length; i2++) {
      var n2 = nsl[i2];
      if (!parent[n2]) {
        parent[n2] = {};
      }
      parent = parent[n2];
    }
    return parent;
  };
  frappe.provide("locals");
  frappe.provide("frappe.flags");
  frappe.provide("frappe.settings");
  frappe.provide("frappe.utils");
  frappe.provide("frappe.ui.form");
  frappe.provide("frappe.modules");
  frappe.provide("frappe.templates");
  frappe.provide("frappe.test_data");
  frappe.provide("frappe.utils");
  frappe.provide("frappe.model");
  frappe.provide("frappe.user");
  frappe.provide("frappe.session");
  frappe.provide("frappe._messages");
  frappe.provide("locals.DocType");
  frappe.provide("frappe.listview_settings");
  frappe.provide("frappe.tour");
  frappe.provide("frappe.listview_parent_route");
  window.NEWLINE = "\n";
  window.TAB = 9;
  window.UP_ARROW = 38;
  window.DOWN_ARROW = 40;
  window.cur_frm = null;

  // frappe/public/js/frappe/translate.js
  frappe._ = function(txt2, replace, context = null) {
    if (!txt2)
      return txt2;
    if (typeof txt2 != "string")
      return txt2;
    let translated_text = "";
    let key2 = txt2;
    if (context) {
      translated_text = frappe._messages[`${key2}:${context}`];
    }
    if (!translated_text) {
      translated_text = frappe._messages[key2] || txt2;
    }
    if (replace && typeof replace === "object") {
      translated_text = $.format(translated_text, replace);
    }
    return translated_text;
  };
  window.__ = frappe._;
  frappe.get_languages = function() {
    if (!frappe.languages) {
      frappe.languages = [];
      $.each(frappe.boot.lang_dict, function(lang, value) {
        frappe.languages.push({ label: lang, value });
      });
      frappe.languages = frappe.languages.sort(function(a2, b2) {
        return a2.value < b2.value ? -1 : 1;
      });
    }
    return frappe.languages;
  };

  // frappe/public/js/frappe/class.js
  (function(global2) {
    "use strict";
    var fnTest = /xyz/.test(function() {
      xyz;
    }) ? /\b_super\b/ : /.*/;
    function Class() {
    }
    Class.extend = function(props) {
      var _super = this.prototype;
      var proto = Object.create(_super);
      for (var name2 in props) {
        proto[name2] = typeof props[name2] === "function" && typeof _super[name2] == "function" && fnTest.test(props[name2]) ? function(name3, fn) {
          return function() {
            var tmp = this._super;
            this._super = _super[name3];
            var ret = fn.apply(this, arguments);
            this._super = tmp;
            return ret;
          };
        }(name2, props[name2]) : props[name2];
      }
      var newClass = typeof proto.init === "function" ? proto.hasOwnProperty("init") ? proto.init : function SubClass() {
        _super.init.apply(this, arguments);
      } : function EmptyClass() {
      };
      newClass.prototype = proto;
      proto.constructor = newClass;
      newClass.extend = Class.extend;
      return newClass;
    };
    global2.Class = Class;
  })(window);

  // frappe/public/js/frappe/polyfill.js
  if (!String.prototype.includes) {
    String.prototype.includes = function(search, start) {
      "use strict";
      if (typeof start !== "number") {
        start = 0;
      }
      if (start + search.length > this.length) {
        return false;
      } else {
        return this.indexOf(search, start) !== -1;
      }
    };
  }
  if (!Array.prototype.includes) {
    Object.defineProperty(Array.prototype, "includes", {
      value: function(searchElement, fromIndex) {
        if (this == null) {
          throw new TypeError('"this" is null or not defined');
        }
        var o2 = Object(this);
        var len = o2.length >>> 0;
        if (len === 0) {
          return false;
        }
        var n2 = fromIndex | 0;
        var k2 = Math.max(n2 >= 0 ? n2 : len - Math.abs(n2), 0);
        while (k2 < len) {
          if (o2[k2] === searchElement) {
            return true;
          }
          k2++;
        }
        return false;
      }
    });
  }
  if (typeof String.prototype.trimLeft !== "function") {
    String.prototype.trimLeft = function() {
      return this.replace(/^\s+/, "");
    };
  }
  if (typeof String.prototype.trimRight !== "function") {
    String.prototype.trimRight = function() {
      return this.replace(/\s+$/, "");
    };
  }
  if (typeof Object.assign != "function") {
    Object.defineProperty(Object, "assign", {
      value: function assign(target) {
        "use strict";
        if (target == null) {
          throw new TypeError("Cannot convert undefined or null to object");
        }
        var to = Object(target);
        for (var index = 1; index < arguments.length; index++) {
          var nextSource = arguments[index];
          if (nextSource != null) {
            for (var nextKey in nextSource) {
              if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                to[nextKey] = nextSource[nextKey];
              }
            }
          }
        }
        return to;
      },
      writable: true,
      configurable: true
    });
  }

  // frappe/public/js/frappe/assets.js
  frappe.require = function(items, callback) {
    if (typeof items === "string") {
      items = [items];
    }
    items = items.map((item) => frappe.assets.bundled_asset(item));
    return new Promise((resolve) => {
      frappe.assets.execute(items, () => {
        resolve();
        callback && callback();
      });
    });
  };
  frappe.assets = {
    check: function() {
      if (window._version_number != localStorage.getItem("_version_number")) {
        frappe.assets.clear_local_storage();
        console.log("Cleared App Cache.");
      }
      if (localStorage._last_load) {
        var not_updated_since = new Date() - new Date(localStorage._last_load);
        if (not_updated_since < 1e4 || not_updated_since > 864e5) {
          frappe.assets.clear_local_storage();
        }
      } else {
        frappe.assets.clear_local_storage();
      }
      frappe.assets.init_local_storage();
    },
    init_local_storage: function() {
      localStorage._last_load = new Date();
      localStorage._version_number = window._version_number;
      if (frappe.boot)
        localStorage.metadata_version = frappe.boot.metadata_version;
    },
    clear_local_storage: function() {
      $.each([
        "_last_load",
        "_version_number",
        "metadata_version",
        "page_info",
        "last_visited"
      ], function(i2, key3) {
        localStorage.removeItem(key3);
      });
      for (var key2 in localStorage) {
        if (key2.indexOf("desk_assets:") === 0 || key2.indexOf("_page:") === 0 || key2.indexOf("_doctype:") === 0 || key2.indexOf("preferred_breadcrumbs:") === 0) {
          localStorage.removeItem(key2);
        }
      }
      console.log("localStorage cleared");
    },
    executed_: [],
    execute: function(items, callback) {
      var to_fetch = [];
      for (var i2 = 0, l2 = items.length; i2 < l2; i2++) {
        if (!frappe.assets.exists(items[i2])) {
          to_fetch.push(items[i2]);
        }
      }
      if (to_fetch.length) {
        frappe.assets.fetch(to_fetch, function() {
          frappe.assets.eval_assets(items, callback);
        });
      } else {
        frappe.assets.eval_assets(items, callback);
      }
    },
    eval_assets: function(items, callback) {
      for (var i2 = 0, l2 = items.length; i2 < l2; i2++) {
        var path = items[i2];
        if (frappe.assets.executed_.indexOf(path) === -1) {
          frappe.assets.handler[frappe.assets.extn(path)](frappe.assets.get(path), path);
          frappe.assets.executed_.push(path);
        }
      }
      callback && callback();
    },
    exists: function(src) {
      if (frappe.assets.executed_.indexOf(src) !== -1) {
        return true;
      }
      if (frappe.boot.developer_mode) {
        return false;
      }
      if (frappe.assets.get(src)) {
        return true;
      } else {
        return false;
      }
    },
    fetch: function(items, callback) {
      frappe.call({
        type: "GET",
        method: "frappe.client.get_js",
        args: {
          "items": items
        },
        callback: function(r2) {
          $.each(items, function(i2, src) {
            frappe.assets.add(src, r2.message[i2]);
          });
          callback();
        },
        freeze: true
      });
    },
    add: function(src, txt2) {
      if ("localStorage" in window) {
        try {
          frappe.assets.set(src, txt2);
        } catch (e2) {
          frappe.assets.clear_local_storage();
          frappe.assets.set(src, txt2);
        }
      }
    },
    get: function(src) {
      return localStorage.getItem("desk_assets:" + src);
    },
    set: function(src, txt2) {
      localStorage.setItem("desk_assets:" + src, txt2);
    },
    extn: function(src) {
      if (src.indexOf("?") != -1) {
        src = src.split("?").slice(-1)[0];
      }
      return src.split(".").slice(-1)[0];
    },
    handler: {
      js: function(txt2, src) {
        frappe.dom.eval(txt2);
      },
      css: function(txt2, src) {
        frappe.dom.set_style(txt2);
      }
    },
    bundled_asset(path, is_rtl = null) {
      if (!path.startsWith("/assets") && path.includes(".bundle.")) {
        if (path.endsWith(".css") && is_rtl) {
          path = `rtl_${path}`;
        }
        path = frappe.boot.assets_json[path] || path;
        return path;
      }
      return path;
    }
  };

  // frappe/public/js/frappe/format.js
  function format(str, args) {
    if (str == void 0)
      return str;
    this.unkeyed_index = 0;
    return str.replace(/\{(\w*)\}/g, function(match, key2) {
      if (key2 === "") {
        key2 = this.unkeyed_index;
        this.unkeyed_index++;
      }
      if (key2 == +key2) {
        return args[key2] !== void 0 ? args[key2] : match;
      }
    }.bind(this));
  }
  if (jQuery) {
    jQuery.format = format;
  }

  // frappe/public/js/frappe/form/formatters.js
  frappe.provide("frappe.form.formatters");
  frappe.form.link_formatters = {};
  frappe.form.formatters = {
    _right: function(value, options) {
      if (options && (options.inline || options.only_value)) {
        return value;
      } else {
        return "<div style='text-align: right'>" + value + "</div>";
      }
    },
    Data: function(value, df) {
      if (df && df.options == "URL") {
        return `<a href="${value}" title="Open Link" target="_blank">${value}</a>`;
      }
      return value == null ? "" : value;
    },
    Autocomplete: function(value) {
      return __(frappe.form.formatters["Data"](value));
    },
    Select: function(value) {
      return __(frappe.form.formatters["Data"](value));
    },
    Float: function(value, docfield, options, doc2) {
      var precision3 = docfield.precision || cint(frappe.boot.sysdefaults && frappe.boot.sysdefaults.float_precision) || null;
      if (docfield.options && docfield.options.trim()) {
        docfield.precision = precision3;
        return frappe.form.formatters.Currency(value, docfield, options, doc2);
      } else {
        if (!(options || {}).always_show_decimals && !is_null(value)) {
          var temp = cstr(value).split(".");
          if (temp[1] == void 0 || cint(temp[1]) === 0) {
            precision3 = 0;
          }
        }
        return frappe.form.formatters._right(value == null || value === "" ? "" : format_number(value, null, precision3), options);
      }
    },
    Int: function(value, docfield, options) {
      return frappe.form.formatters._right(value == null ? "" : cint(value), options);
    },
    Percent: function(value, docfield, options) {
      const precision3 = docfield.precision || cint(frappe.boot.sysdefaults && frappe.boot.sysdefaults.float_precision) || 2;
      return frappe.form.formatters._right(flt(value, precision3) + "%", options);
    },
    Rating: function(value, docfield) {
      let rating_html = "";
      let number_of_stars = docfield.options || 5;
      value = value * number_of_stars;
      Array.from({ length: cint(number_of_stars) }, (_2, i2) => i2 + 1).forEach((i2) => {
        rating_html += `<svg class="icon icon-md" data-rating=${i2} viewBox="0 0 24 24" fill="none">
				<path class="right-half ${i2 <= (value || 0) ? "star-click" : ""}" d="M11.9987 3.00011C12.177 3.00011 12.3554 3.09303 12.4471 3.27888L14.8213 8.09112C14.8941 8.23872 15.0349 8.34102 15.1978 8.3647L20.5069 9.13641C20.917 9.19602 21.0807 9.69992 20.7841 9.9892L16.9421 13.7354C16.8243 13.8503 16.7706 14.0157 16.7984 14.1779L17.7053 19.4674C17.7753 19.8759 17.3466 20.1874 16.9798 19.9945L12.2314 17.4973C12.1586 17.459 12.0786 17.4398 11.9987 17.4398V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
				<path class="left-half ${i2 <= (value || 0) || i2 - 0.5 == value ? "star-click" : ""}" d="M11.9987 3.00011C11.8207 3.00011 11.6428 3.09261 11.5509 3.27762L9.15562 8.09836C9.08253 8.24546 8.94185 8.34728 8.77927 8.37075L3.42887 9.14298C3.01771 9.20233 2.85405 9.70811 3.1525 9.99707L7.01978 13.7414C7.13858 13.8564 7.19283 14.0228 7.16469 14.1857L6.25116 19.4762C6.18071 19.8842 6.6083 20.1961 6.97531 20.0045L11.7672 17.5022C11.8397 17.4643 11.9192 17.4454 11.9987 17.4454V3.00011Z" fill="var(--star-fill)" stroke="var(--star-fill)"/>
			</svg>`;
      });
      return `<div class="rating">
			${rating_html}
		</div>`;
    },
    Currency: function(value, docfield, options, doc2) {
      var currency = frappe.meta.get_field_currency(docfield, doc2);
      var precision3 = docfield.precision || cint(frappe.boot.sysdefaults.currency_precision) || 2;
      if (precision3 > 2) {
        var parts = cstr(value).split(".");
        var decimals = parts.length > 1 ? parts[1] : "";
        if (decimals.length < 3 || decimals.length < precision3) {
          const fraction = frappe.model.get_value(":Currency", currency, "fraction_units") || 100;
          if (decimals.length < cstr(fraction).length) {
            precision3 = cstr(fraction).length - 1;
          }
        }
      }
      value = value == null || value === "" ? "" : format_currency(value, currency, precision3);
      if (options && options.only_value) {
        return value;
      } else {
        return frappe.form.formatters._right(value, options);
      }
    },
    Check: function(value) {
      return `<input type="checkbox" disabled
			class="disabled-${value ? "selected" : "deselected"}">`;
    },
    Link: function(value, docfield, options, doc2) {
      var doctype2 = docfield._options || docfield.options;
      var original_value = value;
      let link_title = frappe.utils.get_link_title(doctype2, value);
      if (value && value.match && value.match(/^['"].*['"]$/)) {
        value.replace(/^.(.*).$/, "$1");
      }
      if (options && (options.for_print || options.only_value)) {
        return link_title || value;
      }
      if (frappe.form.link_formatters[doctype2]) {
        if (doc2 && doctype2 !== doc2.doctype) {
          value = frappe.form.link_formatters[doctype2](value, doc2, docfield);
        }
      }
      if (!value) {
        return "";
      }
      if (value[0] == "'" && value[value.length - 1] == "'") {
        return value.substring(1, value.length - 1);
      }
      if (docfield && docfield.link_onclick) {
        return repl('<a onclick="%(onclick)s">%(value)s</a>', { onclick: docfield.link_onclick.replace(/"/g, "&quot;"), value });
      } else if (docfield && doctype2) {
        if (frappe.model.can_read(doctype2)) {
          return `<a
					href="/app/${encodeURIComponent(frappe.router.slug(doctype2))}/${encodeURIComponent(original_value)}"
					data-doctype="${doctype2}"
					data-name="${original_value}"
					data-value="${original_value}">
					${__(options && options.label || link_title || value)}</a>`;
        } else {
          return link_title || value;
        }
      } else {
        return link_title || value;
      }
    },
    Date: function(value) {
      if (!frappe.datetime.str_to_user) {
        return value;
      }
      if (value) {
        value = frappe.datetime.str_to_user(value);
        if (value === "Invalid date") {
          value = null;
        }
      }
      return value || "";
    },
    DateRange: function(value) {
      if (Array.isArray(value)) {
        return __("{0} to {1}", [frappe.datetime.str_to_user(value[0]), frappe.datetime.str_to_user(value[1])]);
      } else {
        return value || "";
      }
    },
    Datetime: function(value) {
      if (value) {
        return moment(frappe.datetime.convert_to_user_tz(value)).format(frappe.boot.sysdefaults.date_format.toUpperCase() + " " + frappe.boot.sysdefaults.time_format || "HH:mm:ss");
      } else {
        return "";
      }
    },
    Text: function(value) {
      if (value) {
        var tags = ["<p", "<div", "<br", "<table"];
        var match = false;
        for (var i2 = 0; i2 < tags.length; i2++) {
          if (value.match(tags[i2])) {
            match = true;
            break;
          }
        }
        if (!match) {
          value = frappe.utils.replace_newlines(value);
        }
      }
      return frappe.form.formatters.Data(value);
    },
    Time: function(value) {
      if (value) {
        value = frappe.datetime.str_to_user(value, true);
      }
      return value || "";
    },
    Duration: function(value, docfield) {
      if (value) {
        let duration_options = frappe.utils.get_duration_options(docfield);
        value = frappe.utils.get_formatted_duration(value, duration_options);
      }
      return value || "";
    },
    LikedBy: function(value) {
      var html = "";
      $.each(JSON.parse(value || "[]"), function(i2, v2) {
        if (v2)
          html += frappe.avatar(v2);
      });
      return html;
    },
    Tag: function(value) {
      var html = "";
      $.each((value || "").split(","), function(i2, v2) {
        if (v2)
          html += `
				<span
					class="data-pill btn-xs align-center ellipsis"
					style="background-color: var(--control-bg); box-shadow: none; margin-right: 4px;"
					data-field="_user_tags" data-label="${v2}'">
					${v2}
				</span>`;
      });
      return html;
    },
    Comment: function(value) {
      return value;
    },
    Assign: function(value) {
      var html = "";
      $.each(JSON.parse(value || "[]"), function(i2, v2) {
        if (v2)
          html += '<span class="label label-warning" 				style="margin-right: 7px;"				data-field="_assign">' + v2 + "</span>";
      });
      return html;
    },
    SmallText: function(value) {
      return frappe.form.formatters.Text(value);
    },
    TextEditor: function(value) {
      let formatted_value2 = frappe.form.formatters.Text(value);
      try {
        if (!$(formatted_value2).find(".ql-editor").length) {
          formatted_value2 = `<div class="ql-editor read-mode">${formatted_value2}</div>`;
        }
      } catch (e2) {
        formatted_value2 = `<div class="ql-editor read-mode">${formatted_value2}</div>`;
      }
      return formatted_value2;
    },
    Code: function(value) {
      return "<pre>" + (value == null ? "" : $("<div>").text(value).html()) + "</pre>";
    },
    WorkflowState: function(value) {
      var workflow_state = frappe.get_doc("Workflow State", value);
      if (workflow_state) {
        return repl("<span class='label label-%(style)s' 				data-workflow-state='%(value)s'				style='padding-bottom: 4px; cursor: pointer;'>				<i class='fa fa-small fa-white fa-%(icon)s'></i> %(value)s</span>", {
          value,
          style: workflow_state.style.toLowerCase(),
          icon: workflow_state.icon
        });
      } else {
        return "<span class='label'>" + value + "</span>";
      }
    },
    Email: function(value) {
      return $("<div></div>").text(value).html();
    },
    FileSize: function(value) {
      if (value > 1048576) {
        value = flt(flt(value) / 1048576, 1) + "M";
      } else if (value > 1024) {
        value = flt(flt(value) / 1024, 1) + "K";
      }
      return value;
    },
    TableMultiSelect: function(rows, df, options) {
      rows = rows || [];
      const meta2 = frappe.get_meta(df.options);
      const link_field = meta2.fields.find((df2) => df2.fieldtype === "Link");
      const formatted_values = rows.map((row) => {
        const value = row[link_field.fieldname];
        return frappe.format(value, link_field, options, row);
      });
      return formatted_values.join(", ");
    },
    Color: (value) => {
      return value ? `<div>
			<div class="selected-color" style="background-color: ${value}"></div>
			<span class="color-value">${value}</span>
		</div>` : "";
    },
    Icon: (value) => {
      return value ? `<div>
			<div class="selected-icon">${frappe.utils.icon(value, "md")}</div>
			<span class="icon-value">${value}</span>
		</div>` : "";
    }
  };
  frappe.form.get_formatter = function(fieldtype) {
    if (!fieldtype)
      fieldtype = "Data";
    return frappe.form.formatters[fieldtype.replace(/ /g, "")] || frappe.form.formatters.Data;
  };
  frappe.format = function(value, df, options, doc2) {
    if (!df)
      df = { "fieldtype": "Data" };
    if (df.fieldname == "_user_tags")
      df.fieldtype = "Tag";
    var fieldtype = df.fieldtype || "Data";
    if (fieldtype === "Dynamic Link") {
      fieldtype = "Link";
      df._options = doc2 ? doc2[df.options] : null;
    }
    var formatter = df.formatter || frappe.form.get_formatter(fieldtype);
    var formatted = formatter(value, df, options, doc2);
    if (typeof formatted == "string")
      formatted = frappe.dom.remove_script_and_style(formatted);
    return formatted;
  };
  frappe.get_format_helper = function(doc2) {
    var helper = {
      get_formatted: function(fieldname) {
        var df = frappe.meta.get_docfield(doc2.doctype, fieldname);
        if (!df) {
          console.log("fieldname not found: " + fieldname);
        }
        return frappe.format(doc2[fieldname], df, { inline: 1 }, doc2);
      }
    };
    $.extend(helper, doc2);
    return helper;
  };
  frappe.form.link_formatters["User"] = function(value, doc2, docfield) {
    let full_name = doc2 && (doc2.full_name || docfield && doc2[`${docfield.fieldname}_full_name`]);
    return full_name || value;
  };

  // frappe/public/js/frappe/dom.js
  frappe.provide("frappe.dom");
  frappe.dom = {
    id_count: 0,
    freeze_count: 0,
    by_id: function(id) {
      return document.getElementById(id);
    },
    get_unique_id: function() {
      const id = "unique-" + frappe.dom.id_count;
      frappe.dom.id_count++;
      return id;
    },
    set_unique_id: function(ele) {
      var $ele = $(ele);
      if ($ele.attr("id")) {
        return $ele.attr("id");
      }
      var id = "unique-" + frappe.dom.id_count;
      $ele.attr("id", id);
      frappe.dom.id_count++;
      return id;
    },
    eval: function(txt2) {
      if (!txt2)
        return;
      var el = document.createElement("script");
      el.appendChild(document.createTextNode(txt2));
      document.getElementsByTagName("head")[0].appendChild(el);
    },
    remove_script_and_style: function(txt2) {
      const evil_tags = ["script", "style", "noscript", "title", "meta", "base", "head"];
      const regex = new RegExp(evil_tags.map((tag) => `<${tag}>.*<\\/${tag}>`).join("|"), "s");
      if (!regex.test(txt2)) {
        return txt2;
      }
      var div = document.createElement("div");
      div.innerHTML = txt2;
      var found = false;
      evil_tags.forEach(function(e2) {
        var elements2 = div.getElementsByTagName(e2);
        i2 = elements2.length;
        while (i2--) {
          found = true;
          elements2[i2].parentNode.removeChild(elements2[i2]);
        }
      });
      var elements = div.getElementsByTagName("link");
      var i2 = elements.length;
      while (i2--) {
        if (elements[i2].getAttribute("rel") == "stylesheet") {
          found = true;
          elements[i2].parentNode.removeChild(elements[i2]);
        }
      }
      if (found) {
        return div.innerHTML;
      } else {
        return txt2;
      }
    },
    is_element_in_viewport: function(el, tolerance = 0) {
      if (typeof jQuery === "function" && el instanceof jQuery) {
        el = el[0];
      }
      var rect = el.getBoundingClientRect();
      return rect.top + tolerance >= 0 && rect.left + tolerance >= 0 && rect.bottom - tolerance <= $(window).height() && rect.right - tolerance <= $(window).width();
    },
    is_element_in_modal(element) {
      return Boolean($(element).parents(".modal").length);
    },
    set_style: function(txt2, id) {
      if (!txt2)
        return;
      var se = document.createElement("style");
      se.type = "text/css";
      if (id) {
        var element = document.getElementById(id);
        if (element) {
          element.parentNode.removeChild(element);
        }
        se.id = id;
      }
      if (se.styleSheet) {
        se.styleSheet.cssText = txt2;
      } else {
        se.appendChild(document.createTextNode(txt2));
      }
      document.getElementsByTagName("head")[0].appendChild(se);
      return se;
    },
    add: function(parent, newtag, className, cs, innerHTML, onclick) {
      if (parent && parent.substr)
        parent = frappe.dom.by_id(parent);
      var c2 = document.createElement(newtag);
      if (parent)
        parent.appendChild(c2);
      if (className) {
        if (newtag.toLowerCase() == "img")
          c2.src = className;
        else
          c2.className = className;
      }
      if (cs)
        frappe.dom.css(c2, cs);
      if (innerHTML)
        c2.innerHTML = innerHTML;
      if (onclick)
        c2.onclick = onclick;
      return c2;
    },
    css: function(ele, s2) {
      if (ele && s2) {
        $.extend(ele.style, s2);
      }
      return ele;
    },
    activate: function($parent, $child, common_class, active_class = "active") {
      $parent.find(`.${common_class}.${active_class}`).removeClass(active_class);
      $child.addClass(active_class);
    },
    freeze: function(msg, css_class) {
      if (!$("#freeze").length) {
        var freeze = $('<div id="freeze" class="modal-backdrop fade"></div>').on("click", function() {
          if (cur_frm && cur_frm.cur_grid) {
            cur_frm.cur_grid.toggle_view();
            return false;
          }
        }).appendTo("#body");
        freeze.html(repl('<div class="freeze-message-container"><div class="freeze-message"><p class="lead">%(msg)s</p></div></div>', { msg: msg || "" }));
        setTimeout(function() {
          freeze.addClass("in");
        }, 1);
      } else {
        $("#freeze").addClass("in");
      }
      if (css_class) {
        $("#freeze").addClass(css_class);
      }
      frappe.dom.freeze_count++;
    },
    unfreeze: function() {
      if (!frappe.dom.freeze_count)
        return;
      frappe.dom.freeze_count--;
      if (!frappe.dom.freeze_count) {
        var freeze = $("#freeze").removeClass("in").remove();
      }
    },
    save_selection: function() {
      if (window.getSelection) {
        var sel = window.getSelection();
        if (sel.getRangeAt && sel.rangeCount) {
          var ranges = [];
          for (var i2 = 0, len = sel.rangeCount; i2 < len; ++i2) {
            ranges.push(sel.getRangeAt(i2));
          }
          return ranges;
        }
      } else if (document.selection && document.selection.createRange) {
        return document.selection.createRange();
      }
      return null;
    },
    restore_selection: function(savedSel) {
      if (savedSel) {
        if (window.getSelection) {
          var sel = window.getSelection();
          sel.removeAllRanges();
          for (var i2 = 0, len = savedSel.length; i2 < len; ++i2) {
            sel.addRange(savedSel[i2]);
          }
        } else if (document.selection && savedSel.select) {
          savedSel.select();
        }
      }
    },
    is_touchscreen: function() {
      return "ontouchstart" in window;
    },
    handle_broken_images(container) {
      $(container).find("img").on("error", (e2) => {
        const $img = $(e2.currentTarget);
        $img.addClass("no-image");
      });
    },
    scroll_to_bottom(container) {
      const $container = $(container);
      $container.scrollTop($container[0].scrollHeight);
    },
    file_to_base64(file_obj) {
      return new Promise((resolve) => {
        const reader = new FileReader();
        reader.onload = function() {
          resolve(reader.result);
        };
        reader.readAsDataURL(file_obj);
      });
    },
    scroll_to_section(section_name) {
      setTimeout(() => {
        const section = $(`a:contains("${section_name}")`);
        if (section.length) {
          if (section.parent().hasClass("collapsed")) {
            section.click();
          }
          frappe.ui.scroll(section.parent().parent());
        }
      }, 200);
    },
    pixel_to_inches(pixels) {
      const div = $('<div id="dpi" style="height: 1in; width: 1in; left: 100%; position: fixed; top: 100%;"></div>');
      div.appendTo(document.body);
      const dpi_x = document.getElementById("dpi").offsetWidth;
      const inches = pixels / dpi_x;
      div.remove();
      return inches;
    }
  };
  frappe.ellipsis = function(text, max) {
    if (!max)
      max = 20;
    text = cstr(text);
    if (text.length > max) {
      text = text.substr(0, max) + "...";
    }
    return text;
  };
  frappe.run_serially = function(tasks) {
    var result = Promise.resolve();
    tasks.forEach((task) => {
      if (task) {
        result = result.then ? result.then(task) : Promise.resolve();
      }
    });
    return result;
  };
  frappe.load_image = (src, onload, onerror, preprocess = () => {
  }) => {
    var tester = new Image();
    tester.onload = function() {
      onload(this);
    };
    tester.onerror = onerror;
    preprocess(tester);
    tester.src = src;
  };
  frappe.timeout = (seconds) => {
    return new Promise((resolve) => {
      setTimeout(() => resolve(), seconds * 1e3);
    });
  };
  frappe.scrub = function(text, spacer = "_") {
    return text.replace(/ /g, spacer).toLowerCase();
  };
  frappe.unscrub = function(txt2) {
    return frappe.model.unscrub(txt2);
  };
  frappe.get_data_pill = (label, target_id = null, remove_action = null, image = null) => {
    let data_pill_wrapper = $(`
		<button class="data-pill btn">
			<div class="flex align-center ellipsis">
				${image ? image : ""}
				<span class="pill-label ${image ? "ml-2" : ""}">${label}</span>
			</div>
		</button>
	`);
    if (remove_action) {
      let remove_btn = $(`
			<span class="remove-btn cursor-pointer">
				${frappe.utils.icon("close", "sm")}
			</span>
		`).click(() => {
        remove_action(target_id || label, data_pill_wrapper);
      });
      data_pill_wrapper.append(remove_btn);
    }
    return data_pill_wrapper;
  };
  frappe.get_modal = function(title, content) {
    return $(`<div class="modal fade" style="overflow: auto;" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<div class="fill-width flex title-section">
						<span class="indicator hidden"></span>
						<h4 class="modal-title">${title}</h4>
					</div>
					<div class="modal-actions">
						<button class="btn btn-modal-minimize btn-link hide">
							${frappe.utils.icon("collapse")}
						</button>
						<button class="btn btn-modal-close btn-link" data-dismiss="modal">
							${frappe.utils.icon("close-alt", "sm", "close-alt")}
						</button>
					</div>
				</div>
				<div class="modal-body ui-front">${content}</div>
				<div class="modal-footer hide">
					<div class="custom-actions"></div>
					<div class="standard-actions">
						<button type="button" class="btn btn-secondary btn-sm hide btn-modal-secondary">
						</button>
						<button type="button" class="btn btn-primary btn-sm hide btn-modal-primary">
							${__("Confirm")}
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>`);
  };
  frappe.is_online = function() {
    if (frappe.boot.developer_mode == 1) {
      return true;
    }
    if ("onLine" in navigator) {
      return navigator.onLine;
    }
    return true;
  };
  $(window).on("online", function() {
    frappe.show_alert({
      indicator: "green",
      message: __("You are connected to internet.")
    });
  });
  $(window).on("offline", function() {
    frappe.show_alert({
      indicator: "orange",
      message: __("Connection lost. Some features might not work.")
    });
  });

  // frappe/public/js/frappe/form/section.js
  var Section = class {
    constructor(parent, df, card_layout, layout) {
      this.layout = layout;
      this.card_layout = card_layout;
      this.parent = parent;
      this.df = df || {};
      this.fields_list = [];
      this.fields_dict = {};
      this.make();
      if (this.df.label && this.df.collapsible && localStorage.getItem(df.css_class + "-closed")) {
        this.collapse();
      }
      this.row = {
        wrapper: this.wrapper
      };
      this.refresh();
    }
    make() {
      let make_card = this.card_layout;
      this.wrapper = $(`<div class="row
				${this.df.is_dashboard_section ? "form-dashboard-section" : "form-section"}
				${make_card ? "card-section" : ""}">
			`).appendTo(this.parent);
      this.layout && this.layout.sections.push(this);
      if (this.df) {
        if (this.df.label) {
          this.make_head();
        }
        if (this.df.description) {
          this.description_wrapper = $(`<div class="col-sm-12 form-section-description">
						${__(this.df.description)}
					</div>`);
          this.wrapper.append(this.description_wrapper);
        }
        if (this.df.css_class) {
          this.wrapper.addClass(this.df.css_class);
        }
        if (this.df.hide_border) {
          this.wrapper.toggleClass("hide-border", true);
        }
      }
      this.body = $('<div class="section-body">').appendTo(this.wrapper);
      if (this.df.body_html) {
        this.body.append(this.df.body_html);
      }
    }
    make_head() {
      this.head = $(`
			<div class="section-head">
				${__(this.df.label)}
				<span class="ml-2 collapse-indicator mb-1"></span>
			</div>
		`);
      this.head.appendTo(this.wrapper);
      this.indicator = this.head.find(".collapse-indicator");
      this.indicator.hide();
      if (this.df.collapsible) {
        this.collapse_link = this.head.on("click", () => {
          this.collapse();
        });
        this.set_icon();
        this.indicator.show();
      }
    }
    refresh(hide) {
      if (!this.df)
        return;
      hide = hide || this.df.hidden || this.df.hidden_due_to_dependency;
      this.wrapper.toggleClass("hide-control", !!hide);
    }
    collapse(hide) {
      if (!(this.head && this.body)) {
        return;
      }
      if (hide === void 0) {
        hide = !this.body.hasClass("hide");
      }
      this.body.toggleClass("hide", hide);
      this.head && this.head.toggleClass("collapsed", hide);
      this.set_icon(hide);
      this.fields_list.forEach((f3) => {
        if (f3.df.fieldtype == "Signature") {
          f3.refresh();
        }
      });
      if (this.df.css_class)
        localStorage.setItem(this.df.css_class + "-closed", hide ? "1" : "");
    }
    set_icon(hide) {
      let indicator_icon = hide ? "down" : "up-line";
      this.indicator && this.indicator.html(frappe.utils.icon(indicator_icon, "sm", "mb-1"));
    }
    is_collapsed() {
      return this.body.hasClass("hide");
    }
    has_missing_mandatory() {
      let missing_mandatory = false;
      for (let j2 = 0, l2 = this.fields_list.length; j2 < l2; j2++) {
        const section_df = this.fields_list[j2].df;
        if (section_df.reqd && this.layout.doc[section_df.fieldname] == null) {
          missing_mandatory = true;
          break;
        }
      }
      return missing_mandatory;
    }
    hide() {
      this.on_section_toggle(false);
    }
    show() {
      this.on_section_toggle(true);
    }
    on_section_toggle(show) {
      this.wrapper.toggleClass("hide-control", !show);
    }
  };

  // frappe/public/js/frappe/form/tab.js
  var Tab = class {
    constructor(parent, df, frm, tabs_list, tabs_content) {
      this.parent = parent;
      this.df = df || {};
      this.frm = frm;
      this.doctype = "User";
      this.label = this.df && this.df.label;
      this.tabs_list = tabs_list;
      this.tabs_content = tabs_content;
      this.fields_list = [];
      this.fields_dict = {};
      this.make();
      this.refresh();
    }
    make() {
      const id = `${frappe.scrub(this.doctype, "-")}-${this.df.fieldname}`;
      this.parent = $(`
			<li class="nav-item">
				<a class="nav-link ${this.df.active ? "active" : ""}" id="${id}-tab"
					data-toggle="tab"
					href="#${id}"
					role="tab"
					aria-controls="${this.label}">
						${__(this.label)}
				</a>
			</li>
		`).appendTo(this.tabs_list);
      this.wrapper = $(`<div class="tab-pane fade show ${this.df.active ? "active" : ""}"
			id="${id}" role="tabpanel" aria-labelledby="${id}-tab">`).appendTo(this.tabs_content);
    }
    refresh() {
      if (!this.df)
        return;
      let hide = this.df.hidden || this.df.hidden_due_to_dependency;
      if (!hide && this.frm && !this.frm.get_perm(this.df.permlevel || 0, "read")) {
        hide = true;
      }
      this.toggle(!hide);
    }
    toggle(show) {
      this.parent.toggleClass("hide", !show);
      this.wrapper.toggleClass("hide", !show);
      this.parent.toggleClass("show", show);
      this.wrapper.toggleClass("show", show);
      this.hidden = !show;
    }
    show() {
      this.parent.show();
    }
    hide() {
      this.parent.hide();
    }
    set_active() {
      this.parent.find(".nav-link").tab("show");
      this.wrapper.addClass("show");
    }
    is_active() {
      return this.wrapper.hasClass("active");
    }
    is_hidden() {
      this.wrapper.hasClass("hide") && this.parent.hasClass("hide");
    }
  };

  // frappe/public/js/frappe/form/column.js
  var Column = class {
    constructor(section, df) {
      if (!df)
        df = {};
      this.df = df;
      this.section = section;
      this.make();
      this.resize_all_columns();
    }
    make() {
      this.wrapper = $(`
			<div class="form-column">
				<form>
				</form>
			</div>
		`).appendTo(this.section.body).find("form").on("submit", function() {
        return false;
      });
      if (this.df.label) {
        $(`
				<label class="control-label">
					${__(this.df.label)}
				</label>
			`).appendTo(this.wrapper);
      }
    }
    resize_all_columns() {
      let colspan = cint(12 / this.section.wrapper.find(".form-column").length);
      this.section.wrapper.find(".form-column").removeClass().addClass("form-column").addClass("col-sm-" + colspan);
    }
    refresh() {
      this.section.refresh();
    }
  };

  // frappe/public/js/frappe/form/layout.js
  frappe.ui.form.Layout = class Layout {
    constructor(opts) {
      this.views = {};
      this.pages = [];
      this.tabs = [];
      this.sections = [];
      this.fields_list = [];
      this.fields_dict = {};
      $.extend(this, opts);
    }
    make() {
      if (!this.parent && this.body) {
        this.parent = this.body;
      }
      this.wrapper = $('<div class="form-layout">').appendTo(this.parent);
      this.message = $('<div class="form-message hidden"></div>').appendTo(this.wrapper);
      this.page = $('<div class="form-page"></div>').appendTo(this.wrapper);
      if (!this.fields) {
        this.fields = this.get_doctype_fields();
      }
      if (this.is_tabbed_layout()) {
        this.setup_tabbed_layout();
      }
      this.setup_tab_events();
      this.render();
    }
    setup_tabbed_layout() {
      $(`
			<div class="form-tabs-list">
				<ul class="nav form-tabs" id="form-tabs" role="tablist"></ul>
			</div>
		`).appendTo(this.page);
      this.tabs_list = this.page.find(".form-tabs");
      this.tabs_content = $(`<div class="form-tab-content tab-content"></div>`).appendTo(this.page);
      this.setup_events();
    }
    show_empty_form_message() {
      if (!(this.wrapper.find(".frappe-control:visible").length || this.wrapper.find(".section-head.collapsed").length)) {
        this.show_message(__("This form does not have any input"));
      }
    }
    get_doctype_fields() {
      let fields = [
        this.get_new_name_field()
      ];
      if (this.doctype_layout) {
        fields = fields.concat(this.get_fields_from_layout());
      } else {
        fields = fields.concat(frappe.meta.sort_docfields(frappe.meta.docfield_map[this.doctype]));
      }
      return fields;
    }
    get_new_name_field() {
      return {
        parent: this.frm.doctype,
        fieldtype: "Data",
        fieldname: "__newname",
        reqd: 1,
        hidden: 1,
        label: __("Name"),
        get_status: function(field) {
          if (field.frm && field.frm.is_new() && field.frm.meta.autoname && ["prompt", "name"].includes(field.frm.meta.autoname.toLowerCase())) {
            return "Write";
          }
          return "None";
        }
      };
    }
    get_fields_from_layout() {
      const fields = [];
      for (let f3 of this.doctype_layout.fields) {
        const docfield = copy_dict(frappe.meta.docfield_map[this.doctype][f3.fieldname]);
        docfield.label = f3.label;
        fields.push(docfield);
      }
      return fields;
    }
    show_message(html, color) {
      if (this.message_color) {
        this.message.removeClass(this.message_color);
      }
      this.message_color = color && ["yellow", "blue", "red"].includes(color) ? color : "blue";
      if (html) {
        if (html.substr(0, 1) !== "<") {
          html = "<div>" + html + "</div>";
        }
        this.message.removeClass("hidden").addClass(this.message_color);
        $(html).appendTo(this.message);
      } else {
        this.message.empty().addClass("hidden");
      }
    }
    render(new_fields) {
      let fields = new_fields || this.fields;
      this.section = null;
      this.column = null;
      if (this.no_opening_section() && !this.is_tabbed_layout()) {
        this.fields.unshift({ fieldtype: "Section Break" });
      }
      if (this.is_tabbed_layout()) {
        let default_tab = { label: __("Details"), fieldname: "details", fieldtype: "Tab Break" };
        let first_tab = this.fields[1].fieldtype === "Tab Break" ? this.fields[1] : null;
        if (!first_tab) {
          this.fields.splice(1, 0, default_tab);
        }
      }
      fields.forEach((df) => {
        switch (df.fieldtype) {
          case "Fold":
            this.make_page(df);
            break;
          case "Section Break":
            this.make_section(df);
            break;
          case "Column Break":
            this.make_column(df);
            break;
          case "Tab Break":
            this.make_tab(df);
            break;
          default:
            this.make_field(df);
        }
      });
    }
    no_opening_section() {
      return this.fields[0] && this.fields[0].fieldtype != "Section Break" || !this.fields.length;
    }
    no_opening_tab() {
      return this.fields[1] && this.fields[1].fieldtype != "Tab Break" || !this.fields.length;
    }
    is_tabbed_layout() {
      return this.fields.find((f3) => f3.fieldtype === "Tab Break");
    }
    replace_field(fieldname, df, render) {
      df.fieldname = fieldname;
      if (this.fields_dict[fieldname] && this.fields_dict[fieldname].df) {
        const fieldobj = this.init_field(df, render);
        this.fields_dict[fieldname].$wrapper.remove();
        this.fields_list.splice(this.fields_dict[fieldname], 1, fieldobj);
        this.fields_dict[fieldname] = fieldobj;
        if (this.frm) {
          fieldobj.perm = this.frm.perm;
        }
        this.section.fields_list.splice(this.section.fields_dict[fieldname], 1, fieldobj);
        this.section.fields_dict[fieldname] = fieldobj;
        this.refresh_fields([df]);
      }
    }
    make_field(df, colspan, render) {
      !this.section && this.make_section();
      !this.column && this.make_column();
      const fieldobj = this.init_field(df, render);
      this.fields_list.push(fieldobj);
      this.fields_dict[df.fieldname] = fieldobj;
      if (this.frm) {
        fieldobj.perm = this.frm.perm;
      }
      this.section.fields_list.push(fieldobj);
      this.section.fields_dict[df.fieldname] = fieldobj;
      fieldobj.section = this.section;
      if (this.current_tab) {
        fieldobj.tab = this.current_tab;
        this.current_tab.fields_list.push(fieldobj);
        this.current_tab.fields_dict[df.fieldname] = fieldobj;
      }
    }
    init_field(df, render = false) {
      const fieldobj = frappe.ui.form.make_control({
        df,
        doctype: this.doctype,
        parent: this.column.wrapper.get(0),
        frm: this.frm,
        render_input: render,
        doc: this.doc,
        layout: this
      });
      fieldobj.layout = this;
      return fieldobj;
    }
    make_page(df) {
      let me = this, head = $('<div class="form-clickable-section text-center">				<a class="btn-fold h6 text-muted">' + __("Show more details") + "</a>			</div>").appendTo(this.wrapper);
      this.page = $('<div class="form-page second-page hide"></div>').appendTo(this.wrapper);
      this.fold_btn = head.find(".btn-fold").on("click", function() {
        let page = $(this).parent().next();
        if (page.hasClass("hide")) {
          $(this).removeClass("btn-fold").html(__("Hide details"));
          page.removeClass("hide");
          frappe.utils.scroll_to($(this), true, 30);
          me.folded = false;
        } else {
          $(this).addClass("btn-fold").html(__("Show more details"));
          page.addClass("hide");
          me.folded = true;
        }
      });
      this.section = null;
      this.folded = true;
    }
    unfold() {
      this.fold_btn.trigger("click");
    }
    make_section(df) {
      this.section = new Section(this.current_tab ? this.current_tab.wrapper : this.page, df, this.card_layout, this);
      if (df) {
        this.fields_dict[df.fieldname] = this.section;
        this.fields_list.push(this.section);
      }
      this.column = null;
    }
    make_column(df) {
      this.column = new Column(this.section, df);
      if (df && df.fieldname) {
        this.fields_list.push(this.column);
      }
    }
    make_tab(df) {
      this.section = null;
      let tab = new Tab(this, df, this.frm, this.tabs_list, this.tabs_content);
      this.current_tab = tab;
      this.make_section({ fieldtype: "Section Break" });
      this.tabs.push(tab);
      return tab;
    }
    refresh(doc2) {
      if (doc2)
        this.doc = doc2;
      if (this.frm) {
        this.wrapper.find(".empty-form-alert").remove();
      }
      this.attach_doc_and_docfields(true);
      if (this.frm && this.frm.wrapper) {
        $(this.frm.wrapper).trigger("refresh-fields");
      }
      this.refresh_dependency();
      this.refresh_sections();
      this.tabbed_layout && this.refresh_tabs();
      if (this.frm) {
        this.refresh_section_collapse();
      }
      if (document.activeElement) {
        if (document.activeElement.tagName == "INPUT" && this.is_numeric_field_active()) {
          document.activeElement.select();
        }
      }
    }
    is_numeric_field_active() {
      const control = $(document.activeElement).closest(".frappe-control");
      const fieldtype = (control.data() || {}).fieldtype;
      return frappe.model.numeric_fieldtypes.includes(fieldtype);
    }
    refresh_sections() {
      this.wrapper.find(".form-section:not(.hide-control)").each(function() {
        const section = $(this).removeClass("empty-section visible-section");
        if (section.find(".frappe-control:not(.hide-control)").length) {
          section.addClass("visible-section");
        } else {
          section.addClass("empty-section");
        }
      });
    }
    refresh_tabs() {
      this.tabs.forEach((tab) => {
        if (!tab.wrapper.hasClass("hide") || !tab.parent.hasClass("hide")) {
          tab.parent.removeClass("show hide");
          tab.wrapper.removeClass("show hide");
          if (tab.wrapper.find(".form-section:not(.hide-control, .empty-section), .form-dashboard-section:not(.hide-control, .empty-section)").length) {
            tab.toggle(true);
          } else {
            tab.toggle(false);
          }
        }
      });
      const visible_tabs = this.tabs.filter((tab) => !tab.hidden);
      if (visible_tabs && visible_tabs.length == 1) {
        visible_tabs[0].parent.toggleClass("hide show");
      }
    }
    refresh_fields(fields) {
      let fieldnames = fields.map((field) => {
        if (field.fieldname)
          return field.fieldname;
      });
      this.fields_list.map((fieldobj) => {
        if (fieldnames.includes(fieldobj.df.fieldname)) {
          fieldobj.refresh();
          if (fieldobj.df["default"]) {
            fieldobj.set_input(fieldobj.df["default"]);
          }
        }
      });
    }
    add_fields(fields) {
      this.render(fields);
      this.refresh_fields(fields);
    }
    refresh_section_collapse() {
      if (!(this.sections && this.sections.length))
        return;
      for (let i2 = 0; i2 < this.sections.length; i2++) {
        let section = this.sections[i2];
        let df = section.df;
        if (df && df.collapsible) {
          let collapse = true;
          if (df.collapsible_depends_on) {
            collapse = !this.evaluate_depends_on_value(df.collapsible_depends_on);
          }
          if (collapse && section.has_missing_mandatory()) {
            collapse = false;
          }
          section.collapse(collapse);
        }
      }
    }
    attach_doc_and_docfields(refresh) {
      let me = this;
      for (let i2 = 0, l2 = this.fields_list.length; i2 < l2; i2++) {
        let fieldobj = this.fields_list[i2];
        if (me.doc) {
          fieldobj.doc = me.doc;
          fieldobj.doctype = me.doc.doctype;
          fieldobj.docname = me.doc.name;
          fieldobj.df = frappe.meta.get_docfield(me.doc.doctype, fieldobj.df.fieldname, me.doc.name) || fieldobj.df;
          if (me.frm) {
            fieldobj.perm = me.frm.perm;
          }
        }
        refresh && fieldobj.df && fieldobj.refresh && fieldobj.refresh();
      }
    }
    refresh_section_count() {
      this.wrapper.find(".section-count-label:visible").each(function(i2) {
        $(this).html(i2 + 1);
      });
    }
    setup_events() {
      this.tabs_list.off("click").on("click", ".nav-link", (e2) => {
        e2.preventDefault();
        e2.stopImmediatePropagation();
        $(e2.currentTarget).tab("show");
      });
    }
    setup_tab_events() {
      this.wrapper.on("keydown", (ev) => {
        if (ev.which == 9) {
          let current = $(ev.target);
          let doctype2 = current.attr("data-doctype");
          let fieldname = current.attr("data-fieldname");
          if (doctype2) {
            return this.handle_tab(doctype2, fieldname, ev.shiftKey);
          }
        }
      });
    }
    handle_tab(doctype2, fieldname, shift) {
      let grid_row = null, prev = null, fields = this.fields_list, focused = false;
      if (doctype2 != this.doctype) {
        grid_row = this.get_open_grid_row();
        if (!grid_row || !grid_row.layout) {
          return;
        }
        fields = grid_row.layout.fields_list;
      }
      for (let i2 = 0, len = fields.length; i2 < len; i2++) {
        if (fields[i2].df.fieldname == fieldname) {
          if (shift) {
            if (prev) {
              this.set_focus(prev);
            } else {
              $(this.primary_button).focus();
            }
            break;
          }
          if (i2 < len - 1) {
            focused = this.focus_on_next_field(i2, fields);
          }
          if (focused) {
            break;
          }
        }
        if (this.is_visible(fields[i2]))
          prev = fields[i2];
      }
      if (!focused) {
        if (grid_row) {
          if (grid_row.doc.idx == grid_row.grid.grid_rows.length) {
            grid_row.toggle_view(false, function() {
              grid_row.grid.frm.layout.handle_tab(grid_row.grid.df.parent, grid_row.grid.df.fieldname);
            });
          } else {
            grid_row.grid.grid_rows[grid_row.doc.idx].toggle_view(true);
          }
        } else if (!shift) {
          $(this.primary_button).focus();
        }
      }
      return false;
    }
    focus_on_next_field(start_idx, fields) {
      for (let i2 = start_idx + 1, len = fields.length; i2 < len; i2++) {
        let field = fields[i2];
        if (this.is_visible(field)) {
          if (field.df.fieldtype === "Table") {
            if (!(field.grid.grid_rows && field.grid.grid_rows.length)) {
              field.grid.add_new_row();
            }
            field.grid.grid_rows[0].show_form();
            return true;
          } else if (!in_list(frappe.model.no_value_type, field.df.fieldtype)) {
            this.set_focus(field);
            return true;
          }
        }
      }
    }
    is_visible(field) {
      return field.disp_status === "Write" && (field.df && "hidden" in field.df && !field.df.hidden);
    }
    set_focus(field) {
      if (field.tab) {
        field.tab.set_active();
      }
      if (field.df.fieldtype == "Table") {
        if (!field.grid.grid_rows.length) {
          field.grid.add_new_row(1);
        } else {
          field.grid.grid_rows[0].toggle_view(true);
        }
      } else if (field.editor) {
        field.editor.set_focus();
      } else if (field.$input) {
        field.$input.focus();
      }
    }
    get_open_grid_row() {
      return $(".grid-row-open").data("grid_row");
    }
    refresh_dependency() {
      let has_dep = false;
      const fields = this.fields_list.concat(this.tabs);
      for (let fkey in fields) {
        let f3 = fields[fkey];
        if (f3.df.depends_on || f3.df.mandatory_depends_on || f3.df.read_only_depends_on) {
          has_dep = true;
          break;
        }
      }
      if (!has_dep)
        return;
      for (let i2 = fields.length - 1; i2 >= 0; i2--) {
        let f3 = fields[i2];
        f3.guardian_has_value = true;
        if (f3.df.depends_on) {
          f3.guardian_has_value = this.evaluate_depends_on_value(f3.df.depends_on);
          if (f3.guardian_has_value) {
            if (f3.df.hidden_due_to_dependency) {
              f3.df.hidden_due_to_dependency = false;
              f3.refresh();
            }
          } else {
            if (!f3.df.hidden_due_to_dependency) {
              f3.df.hidden_due_to_dependency = true;
              f3.refresh();
            }
          }
        }
        if (f3.df.mandatory_depends_on) {
          this.set_dependant_property(f3.df.mandatory_depends_on, f3.df.fieldname, "reqd");
        }
        if (f3.df.read_only_depends_on) {
          this.set_dependant_property(f3.df.read_only_depends_on, f3.df.fieldname, "read_only");
        }
      }
      this.refresh_section_count();
    }
    set_dependant_property(condition, fieldname, property) {
      let set_property = this.evaluate_depends_on_value(condition);
      let value = set_property ? 1 : 0;
      let form_obj;
      if (this.frm) {
        form_obj = this.frm;
      } else if (this.is_dialog || this.doctype === "Web Form") {
        form_obj = this;
      }
      if (form_obj) {
        if (this.doc && this.doc.parent && this.doc.parentfield) {
          form_obj.setting_dependency = true;
          form_obj.set_df_property(this.doc.parentfield, property, value, this.doc.parent, fieldname, this.doc.name);
          form_obj.setting_dependency = false;
          this.fields_dict[fieldname] && this.fields_dict[fieldname].refresh();
        } else {
          form_obj.set_df_property(fieldname, property, value);
        }
      }
    }
    evaluate_depends_on_value(expression) {
      let out = null;
      let doc2 = this.doc;
      if (!doc2 && this.get_values) {
        doc2 = this.get_values(true);
      }
      if (!doc2) {
        return;
      }
      let parent = this.frm ? this.frm.doc : this.doc || null;
      if (typeof expression === "boolean") {
        out = expression;
      } else if (typeof expression === "function") {
        out = expression(doc2);
      } else if (expression.substr(0, 5) == "eval:") {
        try {
          out = frappe.utils.eval(expression.substr(5), { doc: doc2, parent });
          if (parent && parent.istable && expression.includes("is_submittable")) {
            out = true;
          }
        } catch (e2) {
          frappe.throw(__('Invalid "depends_on" expression'));
        }
      } else if (expression.substr(0, 3) == "fn:" && this.frm) {
        out = this.frm.script_manager.trigger(expression.substr(3), this.doctype, this.docname);
      } else {
        var value = doc2[expression];
        if ($.isArray(value)) {
          out = !!value.length;
        } else {
          out = !!value;
        }
      }
      return out;
    }
  };

  // frappe/public/js/frappe/ui/field_group.js
  frappe.provide("frappe.ui");
  frappe.ui.FieldGroup = class FieldGroup extends frappe.ui.form.Layout {
    constructor(opts) {
      super(opts);
      this.dirty = false;
      $.each(this.fields || [], function(i2, f3) {
        if (!f3.fieldname && f3.label) {
          f3.fieldname = f3.label.replace(/ /g, "_").toLowerCase();
        }
      });
      if (this.values) {
        this.set_values(this.values);
      }
    }
    make() {
      var me = this;
      if (this.fields) {
        super.make();
        this.refresh();
        $.each(this.fields_list, (_2, field) => {
          if (!is_null(field.df.default)) {
            let def_value = field.df.default;
            if (def_value === "Today" && field.df.fieldtype === "Date") {
              def_value = frappe.datetime.get_today();
            }
            this.set_value(field.df.fieldname, def_value);
          }
        });
        if (!this.no_submit_on_enter) {
          this.catch_enter_as_submit();
        }
        $(this.wrapper).find("input, select").on("change awesomplete-selectcomplete", () => {
          this.dirty = true;
          frappe.run_serially([
            () => frappe.timeout(0.1),
            () => me.refresh_dependency()
          ]);
        });
      }
    }
    focus_on_first_input() {
      if (this.no_focus)
        return;
      $.each(this.fields_list, function(i2, f3) {
        if (!in_list(["Date", "Datetime", "Time", "Check"], f3.df.fieldtype) && f3.set_focus) {
          f3.set_focus();
          return false;
        }
      });
    }
    catch_enter_as_submit() {
      var me = this;
      $(this.body).find('input[type="text"], input[type="password"], select').keypress(function(e2) {
        if (e2.which == 13) {
          if (me.has_primary_action) {
            e2.preventDefault();
            me.get_primary_btn().trigger("click");
          }
        }
      });
    }
    get_input(fieldname) {
      var field = this.fields_dict[fieldname];
      return $(field.txt ? field.txt : field.input);
    }
    get_field(fieldname) {
      return this.fields_dict[fieldname];
    }
    get_values(ignore_errors) {
      var ret = {};
      var errors = [];
      for (var key2 in this.fields_dict) {
        var f3 = this.fields_dict[key2];
        if (f3.get_value) {
          var v2 = f3.get_value();
          if (f3.df.reqd && is_null(typeof v2 === "string" ? strip_html(v2) : v2))
            errors.push(__(f3.df.label));
          if (f3.df.reqd && f3.df.fieldtype === "Text Editor" && is_null(strip_html(cstr(v2))))
            errors.push(__(f3.df.label));
          if (!is_null(v2))
            ret[f3.df.fieldname] = v2;
        }
      }
      if (errors.length && !ignore_errors) {
        frappe.msgprint({
          title: __("Missing Values Required"),
          message: __("Following fields have missing values:") + "<br><br><ul><li>" + errors.join("<li>") + "</ul>",
          indicator: "orange"
        });
        return null;
      }
      return ret;
    }
    get_value(key2) {
      var f3 = this.fields_dict[key2];
      return f3 && (f3.get_value ? f3.get_value() : null);
    }
    set_value(key2, val2) {
      return new Promise((resolve) => {
        var f3 = this.fields_dict[key2];
        if (f3) {
          f3.set_value(val2).then(() => {
            f3.set_input(val2);
            f3.refresh();
            this.refresh_dependency();
            resolve();
          });
        } else {
          resolve();
        }
      });
    }
    has_field(fieldname) {
      return !!this.fields_dict[fieldname];
    }
    set_input(key2, val2) {
      return this.set_value(key2, val2);
    }
    set_values(dict) {
      let promises = [];
      for (var key2 in dict) {
        if (this.fields_dict[key2]) {
          promises.push(this.set_value(key2, dict[key2]));
        }
      }
      return Promise.all(promises);
    }
    clear() {
      for (var key2 in this.fields_dict) {
        var f3 = this.fields_dict[key2];
        if (f3 && f3.set_input) {
          f3.set_input(f3.df["default"] || "");
        }
      }
    }
    set_df_property(fieldname, prop, value) {
      const field = this.get_field(fieldname);
      field.df[prop] = value;
      field.refresh();
    }
  };

  // frappe/public/js/frappe/ui/dialog.js
  frappe.provide("frappe.ui");
  window.cur_dialog = null;
  frappe.ui.open_dialogs = [];
  frappe.ui.Dialog = class Dialog extends frappe.ui.FieldGroup {
    constructor(opts) {
      super();
      this.display = false;
      this.is_dialog = true;
      $.extend(this, { animate: true, size: null }, opts);
      this.make();
    }
    make() {
      this.$wrapper = frappe.get_modal("", "");
      if (this.static) {
        this.$wrapper.modal({
          backdrop: "static",
          keyboard: false
        });
        this.get_close_btn().hide();
      }
      this.wrapper = this.$wrapper.find(".modal-dialog").get(0);
      if (this.size == "small")
        $(this.wrapper).addClass("modal-sm");
      else if (this.size == "large")
        $(this.wrapper).addClass("modal-lg");
      else if (this.size == "extra-large")
        $(this.wrapper).addClass("modal-xl");
      this.make_head();
      this.modal_body = this.$wrapper.find(".modal-body");
      this.$body = $("<div></div>").appendTo(this.modal_body);
      this.body = this.$body.get(0);
      this.$message = $('<div class="hide modal-message"></div>').appendTo(this.modal_body);
      this.header = this.$wrapper.find(".modal-header");
      this.footer = this.$wrapper.find(".modal-footer");
      this.standard_actions = this.footer.find(".standard-actions");
      this.custom_actions = this.footer.find(".custom-actions");
      this.set_indicator();
      super.make();
      this.refresh_section_collapse();
      this.action = this.action || { primary: {}, secondary: {} };
      if (this.primary_action || this.action.primary && this.action.primary.onsubmit) {
        this.set_primary_action(this.primary_action_label || this.action.primary.label || __("Submit", null, "Primary action in dialog"), this.primary_action || this.action.primary.onsubmit);
      }
      if (this.secondary_action) {
        this.set_secondary_action(this.secondary_action);
      }
      if (this.secondary_action_label || this.action.secondary && this.action.secondary.label) {
        this.set_secondary_action_label(this.secondary_action_label || this.action.secondary.label);
      }
      if (this.minimizable) {
        this.header.find(".title-section").click(() => this.is_minimized && this.toggle_minimize());
        this.get_minimize_btn().removeClass("hide").on("click", () => this.toggle_minimize());
      }
      var me = this;
      this.$wrapper.on("hide.bs.modal", function() {
        me.display = false;
        me.is_minimized = false;
        me.hide_scrollbar(false);
        if (frappe.ui.open_dialogs[frappe.ui.open_dialogs.length - 1] === me) {
          frappe.ui.open_dialogs.pop();
          if (frappe.ui.open_dialogs.length) {
            window.cur_dialog = frappe.ui.open_dialogs[frappe.ui.open_dialogs.length - 1];
          } else {
            window.cur_dialog = null;
          }
        }
        me.onhide && me.onhide();
        me.on_hide && me.on_hide();
      }).on("shown.bs.modal", function() {
        me.display = true;
        window.cur_dialog = me;
        frappe.ui.open_dialogs.push(me);
        me.focus_on_first_input();
        me.hide_scrollbar(true);
        me.on_page_show && me.on_page_show();
        $(document).trigger("frappe.ui.Dialog:shown");
        $(document).off("focusin.modal");
      }).on("scroll", function() {
        var $input = $("input:focus");
        if ($input.length && ["Date", "Datetime", "Time"].includes($input.attr("data-fieldtype"))) {
          $input.blur();
        }
      });
    }
    get_primary_btn() {
      return this.standard_actions.find(".btn-primary");
    }
    get_minimize_btn() {
      return this.$wrapper.find(".modal-header .btn-modal-minimize");
    }
    set_message(text) {
      this.$message.removeClass("hide");
      this.$body.addClass("hide");
      this.$message.text(text);
    }
    clear_message() {
      this.$message.addClass("hide");
      this.$body.removeClass("hide");
    }
    clear() {
      super.clear();
      this.clear_message();
    }
    set_primary_action(label, click) {
      this.footer.removeClass("hide");
      this.has_primary_action = true;
      var me = this;
      return this.get_primary_btn().removeClass("hide").html(label).click(function() {
        me.primary_action_fulfilled = true;
        var values = me.get_values();
        if (!values)
          return;
        click && click.apply(me, [values]);
      });
    }
    set_secondary_action(click) {
      this.footer.removeClass("hide");
      this.get_secondary_btn().removeClass("hide").off("click").on("click", click);
    }
    set_secondary_action_label(label) {
      this.get_secondary_btn().removeClass("hide").html(label);
    }
    disable_primary_action() {
      this.get_primary_btn().addClass("disabled");
    }
    enable_primary_action() {
      this.get_primary_btn().removeClass("disabled");
    }
    make_head() {
      this.set_title(this.title);
    }
    set_title(t3) {
      this.$wrapper.find(".modal-title").html(t3);
    }
    set_indicator() {
      if (this.indicator) {
        this.header.find(".indicator").removeClass().addClass("indicator " + this.indicator);
      }
    }
    show() {
      if (this.animate) {
        this.$wrapper.addClass("fade");
      } else {
        this.$wrapper.removeClass("fade");
      }
      this.$wrapper.modal("show");
      this.$wrapper.removeClass("modal-minimize");
      if (this.minimizable && this.is_minimized) {
        $(".modal-backdrop").toggle();
        this.is_minimized = false;
      }
      this.clear_message();
      this.primary_action_fulfilled = false;
      this.is_visible = true;
      return this;
    }
    hide() {
      this.$wrapper.modal("hide");
      this.is_visible = false;
    }
    get_close_btn() {
      return this.$wrapper.find(".btn-modal-close");
    }
    get_secondary_btn() {
      return this.standard_actions.find(".btn-modal-secondary");
    }
    no_cancel() {
      this.get_close_btn().toggle(false);
    }
    cancel() {
      this.get_close_btn().trigger("click");
    }
    toggle_minimize() {
      $(".modal-backdrop").toggle();
      let modal = this.$wrapper.closest(".modal").toggleClass("modal-minimize");
      modal.attr("tabindex") ? modal.removeAttr("tabindex") : modal.attr("tabindex", -1);
      this.is_minimized = !this.is_minimized;
      const icon = this.is_minimized ? "expand" : "collapse";
      this.get_minimize_btn().html(frappe.utils.icon(icon));
      this.on_minimize_toggle && this.on_minimize_toggle(this.is_minimized);
      this.header.find(".modal-title").toggleClass("cursor-pointer");
      this.hide_scrollbar(!this.is_minimized);
    }
    hide_scrollbar(bool) {
      $("body").css("overflow", bool ? "hidden" : "auto");
    }
    add_custom_action(label, action, css_class = null) {
      this.footer.removeClass("hide");
      let action_button = $(`
			<button class="btn btn-secondary btn-sm ${css_class || ""}">
				${label}
			</button>
		`);
      this.custom_actions.append(action_button);
      action && action_button.click(action);
    }
  };
  frappe.ui.hide_open_dialog = () => {
    if (window.cur_dialog) {
      if (!cur_dialog.minimizable) {
        cur_dialog.hide();
      } else if (!cur_dialog.is_minimized) {
        cur_dialog.toggle_minimize();
      }
    }
  };

  // frappe/public/js/frappe/ui/messages.js
  frappe.provide("frappe.messages");
  frappe.messages.waiting = function(parent, msg) {
    return $(frappe.messages.get_waiting_message(msg)).appendTo(parent);
  };
  frappe.messages.get_waiting_message = function(msg) {
    return repl('<div class="msg-box" style="width: 63%; margin: 30px auto;">		<p class="text-center">%(msg)s</p></div>', { msg });
  };
  frappe.throw = function(msg) {
    if (typeof msg === "string") {
      msg = { message: msg, title: __("Error") };
    }
    if (!msg.indicator)
      msg.indicator = "red";
    frappe.msgprint(msg);
    throw new Error(msg.message);
  };
  frappe.confirm = function(message2, confirm_action, reject_action) {
    var d2 = new frappe.ui.Dialog({
      title: __("Confirm", null, "Title of confirmation dialog"),
      primary_action_label: __("Yes", null, "Approve confirmation dialog"),
      primary_action: () => {
        confirm_action && confirm_action();
        d2.hide();
      },
      secondary_action_label: __("No", null, "Dismiss confirmation dialog"),
      secondary_action: () => d2.hide()
    });
    d2.$body.append(`<p class="frappe-confirm-message">${message2}</p>`);
    d2.show();
    d2.confirm_dialog = true;
    if (reject_action) {
      d2.onhide = () => {
        if (!d2.primary_action_fulfilled) {
          reject_action();
        }
      };
    }
    return d2;
  };
  frappe.warn = function(title, message_html, proceed_action, primary_label, is_minimizable) {
    const d2 = new frappe.ui.Dialog({
      title,
      indicator: "red",
      primary_action_label: primary_label,
      primary_action: () => {
        if (proceed_action)
          proceed_action();
        d2.hide();
      },
      secondary_action_label: __("Cancel", null, "Secondary button in warning dialog"),
      secondary_action: () => d2.hide(),
      minimizable: is_minimizable
    });
    d2.$body.append(`<div class="frappe-confirm-message">${message_html}</div>`);
    d2.standard_actions.find(".btn-primary").removeClass("btn-primary").addClass("btn-danger");
    d2.standard_actions.find(".btn-primary").removeClass("btn-primary").addClass("btn-danger");
    d2.show();
    return d2;
  };
  frappe.prompt = function(fields, callback, title, primary_label) {
    if (typeof fields === "string") {
      fields = [{
        label: fields,
        fieldname: "value",
        fieldtype: "Data",
        reqd: 1
      }];
    }
    if (!$.isArray(fields))
      fields = [fields];
    var d2 = new frappe.ui.Dialog({
      fields,
      title: title || __("Enter Value", null, "Title of prompt dialog")
    });
    d2.set_primary_action(primary_label || __("Submit", null, "Primary action of prompt dialog"), function() {
      var values = d2.get_values();
      if (!values) {
        return;
      }
      d2.hide();
      callback(values);
    });
    d2.show();
    return d2;
  };
  frappe.msgprint = function(msg, title, is_minimizable) {
    if (!msg)
      return;
    if ($.isPlainObject(msg)) {
      var data = msg;
    } else {
      if (typeof msg === "string" && msg.substr(0, 1) === "{") {
        var data = JSON.parse(msg);
      } else {
        var data = { "message": msg, "title": title };
      }
    }
    if (!data.indicator) {
      data.indicator = "blue";
    }
    if (data.as_list) {
      const list_rows = data.message.map((m2) => `<li>${m2}</li>`).join("");
      data.message = `<ul style="padding-left: 20px">${list_rows}</ul>`;
    }
    if (data.as_table) {
      const rows = data.message.map((row) => {
        const cols = row.map((col) => `<td>${col}</td>`).join("");
        return `<tr>${cols}</tr>`;
      }).join("");
      data.message = `<table class="table table-bordered" style="margin: 0;">${rows}</table>`;
    }
    if (data.message instanceof Array) {
      let messages = data.message;
      const exceptions = messages.map((m2) => JSON.parse(m2)).filter((m2) => m2.raise_exception);
      if (exceptions.length) {
        messages = exceptions;
      }
      messages.forEach(function(m2) {
        frappe.msgprint(m2);
      });
      return;
    }
    if (data.alert || data.toast) {
      frappe.show_alert(data);
      return;
    }
    if (!frappe.msg_dialog) {
      frappe.msg_dialog = new frappe.ui.Dialog({
        title: __("Message"),
        onhide: function() {
          if (frappe.msg_dialog.custom_onhide) {
            frappe.msg_dialog.custom_onhide();
          }
          frappe.msg_dialog.msg_area.empty();
        },
        minimizable: data.is_minimizable || is_minimizable
      });
      frappe.msg_dialog.msg_area = $('<div class="msgprint">').appendTo(frappe.msg_dialog.body);
      frappe.msg_dialog.clear = function() {
        frappe.msg_dialog.msg_area.empty();
      };
      frappe.msg_dialog.indicator = frappe.msg_dialog.header.find(".indicator");
    }
    if (data.primary_action) {
      if (data.primary_action.server_action && typeof data.primary_action.server_action === "string") {
        data.primary_action.action = () => {
          frappe.call({
            method: data.primary_action.server_action,
            args: {
              args: data.primary_action.args
            },
            callback() {
              if (data.primary_action.hide_on_success) {
                frappe.hide_msgprint();
              }
            }
          });
        };
      }
      if (data.primary_action.client_action && typeof data.primary_action.client_action === "string") {
        let parts = data.primary_action.client_action.split(".");
        let obj = window;
        for (let part of parts) {
          obj = obj[part];
        }
        data.primary_action.action = () => {
          if (typeof obj === "function") {
            obj(data.primary_action.args);
          }
        };
      }
      frappe.msg_dialog.set_primary_action(__(data.primary_action.label || data.primary_action_label || "Done"), data.primary_action.action);
    } else {
      if (frappe.msg_dialog.has_primary_action) {
        frappe.msg_dialog.get_primary_btn().addClass("hide");
        frappe.msg_dialog.has_primary_action = false;
      }
    }
    if (data.secondary_action) {
      frappe.msg_dialog.set_secondary_action(data.secondary_action.action);
      frappe.msg_dialog.set_secondary_action_label(__(data.secondary_action.label || "Close"));
    }
    if (data.message == null) {
      data.message = "";
    }
    if (data.message.search(/<br>|<p>|<li>/) == -1) {
      msg = frappe.utils.replace_newlines(data.message);
    }
    var msg_exists = false;
    if (data.clear) {
      frappe.msg_dialog.msg_area.empty();
    } else {
      msg_exists = frappe.msg_dialog.msg_area.html();
    }
    if (data.title || !msg_exists) {
      frappe.msg_dialog.set_title(data.title || __("Message", null, "Default title of the message dialog"));
    }
    if (data.indicator) {
      frappe.msg_dialog.indicator.removeClass().addClass("indicator " + data.indicator);
    } else {
      frappe.msg_dialog.indicator.removeClass().addClass("hidden");
    }
    if (data.wide) {
      if (frappe.msg_dialog.wrapper.classList.contains("msgprint-dialog")) {
        frappe.msg_dialog.wrapper.classList.remove("msgprint-dialog");
      }
    } else {
      frappe.msg_dialog.wrapper.classList.add("msgprint-dialog");
    }
    if (msg_exists) {
      frappe.msg_dialog.msg_area.append("<hr>");
    }
    frappe.msg_dialog.msg_area.append(data.message);
    frappe.msg_dialog.$wrapper.css("z-index", 2e3);
    frappe.msg_dialog.show();
    return frappe.msg_dialog;
  };
  window.msgprint = frappe.msgprint;
  frappe.hide_msgprint = function(instant) {
    if (frappe.msg_dialog && frappe.msg_dialog.msg_area) {
      frappe.msg_dialog.msg_area.empty();
    }
    if (frappe.msg_dialog && frappe.msg_dialog.$wrapper.is(":visible")) {
      if (instant) {
        frappe.msg_dialog.$wrapper.removeClass("fade");
      }
      frappe.msg_dialog.hide();
      if (instant) {
        frappe.msg_dialog.$wrapper.addClass("fade");
      }
    }
  };
  frappe.update_msgprint = function(html) {
    if (!frappe.msg_dialog || frappe.msg_dialog && !frappe.msg_dialog.$wrapper.is(":visible")) {
      frappe.msgprint(html);
    } else {
      frappe.msg_dialog.msg_area.html(html);
    }
  };
  frappe.verify_password = function(callback) {
    frappe.prompt({
      fieldname: "password",
      label: __("Enter your password"),
      fieldtype: "Password",
      reqd: 1
    }, function(data) {
      frappe.call({
        method: "frappe.core.doctype.user.user.verify_password",
        args: {
          password: data.password
        },
        callback: function(r2) {
          if (!r2.exc) {
            callback();
          }
        }
      });
    }, __("Verify Password"), __("Verify"));
  };
  frappe.show_progress = (title, count, total = 100, description, hide_on_completion = false) => {
    let dialog;
    if (frappe.cur_progress && frappe.cur_progress.title === title && frappe.cur_progress.is_visible) {
      dialog = frappe.cur_progress;
    } else {
      dialog = new frappe.ui.Dialog({
        title
      });
      dialog.progress = $(`<div>
			<div class="progress">
				<div class="progress-bar"></div>
			</div>
			<p class="description text-muted small"></p>
		</div`).appendTo(dialog.body);
      dialog.progress_bar = dialog.progress.css({ "margin-top": "10px" }).find(".progress-bar");
      dialog.$wrapper.removeClass("fade");
      dialog.show();
      frappe.cur_progress = dialog;
    }
    if (description) {
      dialog.progress.find(".description").text(description);
    }
    dialog.percent = cint(flt(count) * 100 / total);
    dialog.progress_bar.css({ width: dialog.percent + "%" });
    if (hide_on_completion && dialog.percent === 100) {
      setTimeout(frappe.hide_progress, 500);
    }
    return dialog;
  };
  frappe.hide_progress = function() {
    if (frappe.cur_progress) {
      frappe.cur_progress.hide();
      frappe.cur_progress = null;
    }
  };
  frappe.show_alert = frappe.toast = function(message2, seconds = 7, actions = {}) {
    let indicator_icon_map = {
      "orange": "solid-warning",
      "yellow": "solid-warning",
      "blue": "solid-info",
      "green": "solid-success",
      "red": "solid-error"
    };
    if (typeof message2 === "string") {
      message2 = {
        message: message2
      };
    }
    if (!$("#dialog-container").length) {
      $('<div id="dialog-container"><div id="alert-container"></div></div>').appendTo("body");
    }
    let icon;
    if (message2.indicator) {
      icon = indicator_icon_map[message2.indicator.toLowerCase()] || "solid-" + message2.indicator;
    } else {
      icon = "solid-info";
    }
    const indicator = message2.indicator || "blue";
    const div = $(`
		<div class="alert desk-alert ${indicator}" role="alert">
			<div class="alert-message-container">
				<div class="alert-title-container">
					<div>${frappe.utils.icon(icon, "lg")}</div>
					<div class="alert-message">${message2.message}</div>
				</div>
				<div class="alert-subtitle">${message2.subtitle || ""}</div>
			</div>
			<div class="alert-body" style="display: none"></div>
			<a class="close">${frappe.utils.icon("close-alt")}</a>
		</div>
	`);
    div.hide().appendTo("#alert-container").show();
    if (message2.body) {
      div.find(".alert-body").show().html(message2.body);
    }
    div.find(".close, button").click(function() {
      div.addClass("out");
      setTimeout(() => div.remove(), 800);
      return false;
    });
    Object.keys(actions).map((key2) => {
      div.find(`[data-action=${key2}]`).on("click", actions[key2]);
    });
    if (seconds > 2) {
      seconds = seconds - 0.8;
    }
    setTimeout(() => {
      div.addClass("out");
      setTimeout(() => div.remove(), 800);
      return false;
    }, seconds * 1e3);
    return div;
  };
  Object.defineProperty(window, "show_alert", {
    get: function() {
      console.warn("Please use `frappe.show_alert` instead of `show_alert`. It will be deprecated soon.");
      return frappe.show_alert;
    }
  });

  // frappe/public/js/frappe/ui/alt_keyboard_shortcuts.js
  frappe.provide("frappe.ui.keys");
  var shortcut_groups = /* @__PURE__ */ new WeakMap();
  var shortcut_group_list = [];
  frappe.ui.keys.shortcut_groups = shortcut_groups;
  frappe.ui.keys.get_shortcut_group = (parent) => {
    if (!shortcut_groups.has(parent)) {
      shortcut_groups.set(parent, new frappe.ui.keys.AltShortcutGroup());
    }
    return shortcut_groups.get(parent);
  };
  var listener_added = false;
  var $current_dropdown = null;
  var $body = $(document.body);
  frappe.ui.keys.bind_shortcut_group_event = () => {
    if (listener_added)
      return;
    listener_added = true;
    function highlight_alt_shortcuts() {
      if ($current_dropdown) {
        $current_dropdown.addClass("alt-pressed");
        $body.removeClass("alt-pressed");
      } else {
        $body.addClass("alt-pressed");
        $current_dropdown && $current_dropdown.removeClass("alt-pressed");
      }
    }
    function unhighlight_alt_shortcuts() {
      $current_dropdown && $current_dropdown.removeClass("alt-pressed");
      $body.removeClass("alt-pressed");
    }
    $(document).on("keydown", (e2) => {
      let key2 = (frappe.ui.keys.key_map[e2.which] || "").toLowerCase();
      if (key2 === "alt") {
        highlight_alt_shortcuts();
      }
      if (e2.shiftKey || e2.ctrlKey || e2.metaKey) {
        return;
      }
      if (key2 && e2.altKey) {
        let shortcut = get_shortcut_for_key(key2);
        if (shortcut) {
          e2.preventDefault();
          shortcut.$target[0].click();
        }
        highlight_alt_shortcuts();
      }
    });
    $(document).on("keyup", (e2) => {
      if (e2.key === "Alt") {
        unhighlight_alt_shortcuts();
      }
    });
    $(document).on("mousemove", () => {
      unhighlight_alt_shortcuts();
    });
  };
  function get_shortcut_for_key(key2) {
    let shortcuts = shortcut_group_list.filter((shortcut_group) => key2 in shortcut_group.shortcuts_dict).map((shortcut_group) => shortcut_group.shortcuts_dict[key2]).filter((shortcut2) => shortcut2.$target.is(":visible"));
    let shortcut = null;
    if ($current_dropdown && $current_dropdown.is(".open")) {
      shortcut = shortcuts.find((shortcut2) => $.contains($current_dropdown[0], shortcut2.$target[0]));
    }
    if (shortcut)
      return shortcut;
    shortcut = shortcuts.find((shortcut2) => $.contains(window.cur_page.page.page.wrapper[0], shortcut2.$target[0]));
    return shortcut;
  }
  frappe.ui.keys.AltShortcutGroup = class AltShortcutGroup {
    constructor() {
      this.shortcuts_dict = {};
      $current_dropdown = null;
      this.bind_events();
      frappe.ui.keys.bind_shortcut_group_event();
      shortcut_group_list.push(this);
    }
    bind_events() {
      $(document).on("show.bs.dropdown", (e2) => {
        $current_dropdown && $current_dropdown.removeClass("alt-pressed");
        let $target = $(e2.target);
        if ($target.is(".dropdown, .btn-group")) {
          $current_dropdown = $target;
        }
      });
      $(document).on("hide.bs.dropdown", () => {
        $current_dropdown && $current_dropdown.removeClass("alt-pressed");
        $current_dropdown = null;
      });
    }
    add($target, $text_el) {
      if (!$text_el) {
        $text_el = $target;
      }
      let text_content = $text_el.text().trim();
      let letters = text_content.split("");
      let shortcut_letter = letters.find((letter) => {
        letter = letter.toLowerCase();
        let is_valid_char = letter >= "a" && letter <= "z";
        return !this.is_taken(letter) && is_valid_char;
      });
      if (!shortcut_letter) {
        $text_el.attr("data-label", text_content);
        return;
      }
      for (let key2 in this.shortcuts_dict) {
        let shortcut2 = this.shortcuts_dict[key2];
        if (shortcut2.text === text_content) {
          shortcut2.$target = $target;
          shortcut2.$text_el = $text_el;
          this.underline_text(shortcut2);
          return;
        }
      }
      let shortcut = {
        $target,
        $text_el,
        letter: shortcut_letter,
        text: text_content
      };
      this.shortcuts_dict[shortcut_letter.toLowerCase()] = shortcut;
      this.underline_text(shortcut);
    }
    underline_text(shortcut) {
      shortcut.$text_el.attr("data-label", shortcut.text);
      let underline_el_found = false;
      let text_html = shortcut.text.split("").map((letter) => {
        if (letter === shortcut.letter && !underline_el_found) {
          letter = `<span class="alt-underline">${letter}</span>`;
          underline_el_found = true;
        }
        return letter;
      }).join("");
      let original_text_html = shortcut.$text_el.html();
      text_html = original_text_html.replace(shortcut.text.trim(), text_html.trim());
      shortcut.$text_el.html(text_html);
    }
    is_taken(letter) {
      let is_in_global_shortcut = frappe.ui.keys.standard_shortcuts.filter((s2) => !s2.page).some((s2) => s2.shortcut === `alt+${letter}`);
      return letter in this.shortcuts_dict || is_in_global_shortcut;
    }
  };

  // frappe/public/js/frappe/ui/keyboard.js
  frappe.provide("frappe.ui.keys.handlers");
  frappe.ui.keys.setup = function() {
    $(window).on("keydown", function(e2) {
      var key2 = frappe.ui.keys.get_key(e2);
      if (frappe.ui.keys.handlers[key2]) {
        var out = null;
        for (var i2 = 0, l2 = frappe.ui.keys.handlers[key2].length; i2 < l2; i2++) {
          var handler = frappe.ui.keys.handlers[key2][i2];
          var _out = handler.apply(this, [e2]);
          if (_out === false) {
            out = _out;
          }
        }
        return out;
      }
    });
  };
  var standard_shortcuts = [];
  frappe.ui.keys.standard_shortcuts = standard_shortcuts;
  frappe.ui.keys.add_shortcut = ({ shortcut, action, description, page, target, condition, ignore_inputs = false } = {}) => {
    if (target instanceof jQuery) {
      let $target = target;
      action = () => {
        $target[0].click();
      };
    }
    if (!condition) {
      condition = () => true;
    }
    let handler = (e2) => {
      let $focused_element = $(document.activeElement);
      let is_input_focused = $focused_element.is("input, select, textarea, [contenteditable=true]");
      if (is_input_focused && !ignore_inputs)
        return;
      if (!condition())
        return;
      if (!page || page.wrapper.is(":visible")) {
        let prevent_default = action(e2);
        if (prevent_default || prevent_default === void 0) {
          e2.preventDefault();
        }
      }
    };
    handler.page = page;
    frappe.ui.keys.off(shortcut, page);
    frappe.ui.keys.on(shortcut, handler);
    let existing_shortcut_index = standard_shortcuts.findIndex((s2) => s2.shortcut === shortcut);
    let new_shortcut = { shortcut, action, description, page, condition };
    if (existing_shortcut_index === -1) {
      standard_shortcuts.push(new_shortcut);
    } else {
      standard_shortcuts[existing_shortcut_index] = new_shortcut;
    }
  };
  frappe.ui.keys.show_keyboard_shortcut_dialog = () => {
    if (frappe.ui.keys.is_dialog_shown)
      return;
    let global_shortcuts = standard_shortcuts.filter((shortcut) => !shortcut.page);
    let current_page_shortcuts = standard_shortcuts.filter((shortcut) => shortcut.page && shortcut.page === window.cur_page.page.page);
    let grid_shortcuts = standard_shortcuts.filter((shortcut) => shortcut.page && shortcut.page === window.cur_page.page.frm);
    function generate_shortcuts_html(shortcuts, heading) {
      if (!shortcuts.length) {
        return "";
      }
      let html = shortcuts.filter((s2) => s2.condition ? s2.condition() : true).map((shortcut) => {
        let shortcut_label = shortcut.shortcut.split("+").map(frappe.utils.to_title_case).join("+");
        if (frappe.utils.is_mac()) {
          shortcut_label = shortcut_label.replace("Ctrl", "\u2318");
        }
        return `<tr>
					<td width="40%"><kbd>${shortcut_label}</kbd></td>
					<td width="60%">${shortcut.description || ""}</td>
				</tr>`;
      }).join("");
      html = `<h5 style="margin: 0;">${heading}</h5>
			<table style="margin-top: 10px;" class="table table-bordered">
				${html}
			</table>`;
      return html;
    }
    let global_shortcuts_html = generate_shortcuts_html(global_shortcuts, __("Global Shortcuts"));
    let current_page_shortcuts_html = generate_shortcuts_html(current_page_shortcuts, __("Page Shortcuts"));
    let grid_shortcuts_html = generate_shortcuts_html(grid_shortcuts, __("Grid Shortcuts"));
    let dialog = new frappe.ui.Dialog({
      title: __("Keyboard Shortcuts"),
      on_hide() {
        frappe.ui.keys.is_dialog_shown = false;
      }
    });
    dialog.$body.append(global_shortcuts_html);
    dialog.$body.append(current_page_shortcuts_html);
    dialog.$body.append(grid_shortcuts_html);
    dialog.$body.append(`
		<div class="text-muted">
			${__("Press Alt Key to trigger additional shortcuts in Menu and Sidebar")}
		</div>
	`);
    dialog.show();
    frappe.ui.keys.is_dialog_shown = true;
  };
  frappe.ui.keys.get_key = function(e2) {
    var keycode = e2.keyCode || e2.which;
    var key2 = frappe.ui.keys.key_map[keycode] || String.fromCharCode(keycode);
    if (e2.ctrlKey || e2.metaKey) {
      key2 = "ctrl+" + key2;
    }
    if (e2.shiftKey) {
      key2 = "shift+" + key2;
    }
    if (e2.altKey) {
      key2 = "alt+" + key2;
    }
    if (e2.altKey && e2.ctrlKey) {
      return key2.toLowerCase();
    }
    return key2.toLowerCase();
  };
  frappe.ui.keys.on = function(key2, handler) {
    if (!frappe.ui.keys.handlers[key2]) {
      frappe.ui.keys.handlers[key2] = [];
    }
    frappe.ui.keys.handlers[key2].push(handler);
  };
  frappe.ui.keys.off = function(key2, page) {
    let handlers = frappe.ui.keys.handlers[key2];
    if (!handlers || handlers.length === 0)
      return;
    frappe.ui.keys.handlers[key2] = handlers.filter((h2) => {
      if (!page)
        return false;
      return h2.page !== page;
    });
  };
  frappe.ui.keys.add_shortcut({
    shortcut: "ctrl+s",
    action: function(e2) {
      frappe.app.trigger_primary_action();
      e2.preventDefault();
      return false;
    },
    description: __("Trigger Primary Action"),
    ignore_inputs: true
  });
  frappe.ui.keys.add_shortcut({
    shortcut: "ctrl+g",
    action: function(e2) {
      $("#navbar-search").focus();
      e2.preventDefault();
      return false;
    },
    description: __("Open Awesomebar")
  });
  frappe.ui.keys.add_shortcut({
    shortcut: "ctrl+h",
    action: function(e2) {
      e2.preventDefault();
      $(".navbar-home img").click();
    },
    description: __("Navigate Home")
  });
  frappe.ui.keys.add_shortcut({
    shortcut: "alt+s",
    action: function(e2) {
      e2.preventDefault();
      $(".dropdown-navbar-user a").eq(0).click();
    },
    description: __("Open Settings")
  });
  frappe.ui.keys.add_shortcut({
    shortcut: "shift+/",
    action: function() {
      frappe.ui.keys.show_keyboard_shortcut_dialog();
    },
    description: __("Show Keyboard Shortcuts")
  });
  frappe.ui.keys.add_shortcut({
    shortcut: "alt+h",
    action: function(e2) {
      e2.preventDefault();
      $(".dropdown-help a").eq(0).click();
    },
    description: __("Open Help")
  });
  frappe.ui.keys.on("escape", function(e2) {
    close_grid_and_dialog();
  });
  frappe.ui.keys.on("esc", function(e2) {
    close_grid_and_dialog();
  });
  frappe.ui.keys.on("enter", function(e2) {
    if (window.cur_dialog && cur_dialog.confirm_dialog) {
      cur_dialog.get_primary_btn().trigger("click");
    }
  });
  frappe.ui.keys.on("ctrl+down", function(e2) {
    var grid_row = frappe.ui.form.get_open_grid_form();
    grid_row && grid_row.toggle_view(false, function() {
      grid_row.open_next();
    });
  });
  frappe.ui.keys.on("ctrl+up", function(e2) {
    var grid_row = frappe.ui.form.get_open_grid_form();
    grid_row && grid_row.toggle_view(false, function() {
      grid_row.open_prev();
    });
  });
  frappe.ui.keys.add_shortcut({
    shortcut: "shift+ctrl+r",
    action: function() {
      frappe.ui.toolbar.clear_cache();
    },
    description: __("Clear Cache and Reload")
  });
  frappe.ui.keys.key_map = {
    8: "backspace",
    9: "tab",
    13: "enter",
    16: "shift",
    17: "ctrl",
    91: "meta",
    18: "alt",
    27: "escape",
    37: "left",
    39: "right",
    38: "up",
    40: "down",
    32: "space",
    112: "f1",
    113: "f2",
    114: "f3",
    115: "f4",
    116: "f5",
    191: "/",
    188: "<",
    190: ">"
  };
  "abcdefghijklmnopqrstuvwxyz".split("").forEach((letter, i2) => {
    frappe.ui.keys.key_map[65 + i2] = letter;
  });
  frappe.ui.keyCode = {
    ESCAPE: 27,
    LEFT: 37,
    RIGHT: 39,
    UP: 38,
    DOWN: 40,
    ENTER: 13,
    TAB: 9,
    SPACE: 32,
    BACKSPACE: 8
  };
  function close_grid_and_dialog() {
    var open_row = $(".grid-row-open");
    if (open_row.length) {
      var grid_row = open_row.data("grid_row");
      grid_row.toggle_view(false);
      return false;
    }
    if (cur_dialog && !cur_dialog.no_cancel_flag) {
      cur_dialog.cancel();
      return false;
    }
  }
  $(document).on("keydown", ".dropdown-toggle", (e2) => {
    if (e2.which === frappe.ui.keyCode.ESCAPE) {
      $(e2.currentTarget).blur();
    }
  });

  // frappe/public/js/frappe/ui/colors.js
  frappe.provide("frappe.ui");
  frappe.ui.color = {
    get: function(color_name, shade) {
      if (color_name && shade)
        return this.get_color_shade(color_name, shade);
      if (color_name)
        return this.get_color_shade(color_name, "default");
      return frappe.ui.color_map;
    },
    get_color: function(color_name) {
      const color_names = Object.keys(frappe.ui.color_map);
      if (color_names.includes(color_name)) {
        return frappe.ui.color_map[color_name];
      } else {
        console.warn(`'color_name' can be one of ${color_names} and not ${color_name}`);
      }
    },
    get_color_map() {
      const colors = ["red", "green", "blue", "dark-green", "yellow", "gray", "purple", "pink", "orange"];
      const shades = ["100", "300", "500", "700"];
      const style = getComputedStyle(document.body);
      let color_map = {};
      colors.forEach((color) => {
        color_map[color] = shades.map((shade) => style.getPropertyValue(`--${color}-${shade}`).trim());
      });
      return color_map;
    },
    get_color_shade: function(color_name, shade) {
      const shades = {
        "default": 2,
        "light": 1,
        "extra-light": 0,
        "dark": 3
      };
      if (Object.keys(shades).includes(shade)) {
        const color = this.get_color(color_name);
        return color ? color[shades[shade]] : color_name;
      } else {
        console.warn(`'shade' can be one of ${Object.keys(shades)} and not ${shade}`);
      }
    },
    all: function() {
      return Object.values(frappe.ui.color_map).reduce((acc, curr) => acc.concat(curr), []);
    },
    names: function() {
      return Object.keys(frappe.ui.color_map);
    },
    is_standard: function(color_name) {
      if (!color_name)
        return false;
      if (color_name.startsWith("#")) {
        return this.all().includes(color_name);
      }
      return this.names().includes(color_name);
    },
    get_color_name: function(hex) {
      for (const key2 in frappe.ui.color_map) {
        const colors = frappe.ui.color_map[key2];
        if (colors.includes(hex))
          return key2;
      }
    },
    get_contrast_color: function(hex) {
      if (!this.validate_hex(hex)) {
        return;
      }
      if (!this.is_standard(hex)) {
        const brightness = this.brightness(hex);
        if (brightness < 128) {
          return this.lighten(hex, 0.5);
        }
        return this.lighten(hex, -0.5);
      }
      const color_name = this.get_color_name(hex);
      const colors = this.get_color(color_name);
      const shade_value = colors.indexOf(hex);
      if (shade_value <= 1) {
        return this.get(color_name, "dark");
      }
      return this.get(color_name, "extra-light");
    },
    validate_hex: function(hex) {
      return /(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(hex);
    },
    lighten(color, percent) {
      var f3 = parseInt(color.slice(1), 16), t3 = percent < 0 ? 0 : 255, p2 = percent < 0 ? percent * -1 : percent, R2 = f3 >> 16, G2 = f3 >> 8 & 255, B2 = f3 & 255;
      return "#" + (16777216 + (Math.round((t3 - R2) * p2) + R2) * 65536 + (Math.round((t3 - G2) * p2) + G2) * 256 + (Math.round((t3 - B2) * p2) + B2)).toString(16).slice(1);
    },
    hex_to_rgb(hex) {
      if (hex.startsWith("#")) {
        hex = hex.substring(1);
      }
      const r2 = parseInt(hex.substring(0, 2), 16);
      const g2 = parseInt(hex.substring(2, 4), 16);
      const b2 = parseInt(hex.substring(4, 6), 16);
      return { r: r2, g: g2, b: b2 };
    },
    brightness(hex) {
      const rgb = this.hex_to_rgb(hex);
      return (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1e3;
    }
  };
  frappe.ui.color_map = frappe.ui.color.get_color_map();

  // frappe/public/js/frappe/ui/sidebar.js
  frappe.provide("frappe.ui");
  frappe.ui.Sidebar = class Sidebar {
    constructor({ wrapper, css_class }) {
      this.wrapper = wrapper;
      this.css_class = css_class;
      this.items = {};
      this.make_dom();
    }
    make_dom() {
      this.wrapper.html(`
			<div class="${this.css_class} overlay-sidebar hidden-xs hidden-sm">
			</div>
		`);
      this.$sidebar = this.wrapper.find("." + this.css_class);
    }
    add_item(item, section, h6 = false) {
      let $section, $li_item;
      if (!section && this.wrapper.find(".sidebar-menu").length === 0) {
        $section = this.get_section();
      } else {
        $section = this.get_section(section);
      }
      if (item instanceof jQuery) {
        $li_item = $(`<li>`);
        item.appendTo($li_item);
      } else {
        const className = h6 ? "h6" : "";
        const html = `<li class=${className}>
				<a ${item.href ? `href="${item.href}"` : ""}>${item.label}</a>
			</li>`;
        $li_item = $(html).click(() => item.on_click && item.on_click());
      }
      $section.append($li_item);
      if (item.name) {
        this.items[item.name] = $li_item;
      }
    }
    remove_item(name2) {
      if (this.items[name2]) {
        this.items[name2].remove();
      }
    }
    get_section(section_heading = "") {
      let $section = $(this.wrapper.find(`[data-section-heading="${section_heading}"]`));
      if ($section.length) {
        return $section;
      }
      const $section_heading = section_heading ? `<li class="h6">${section_heading}</li>` : "";
      $section = $(`
			<ul class="list-unstyled sidebar-menu" data-section-heading="${section_heading || "default"}">
				${$section_heading}
			</ul>
		`);
      this.$sidebar.append($section);
      return $section;
    }
  };

  // frappe/public/js/frappe/ui/link_preview.js
  frappe.ui.LinkPreview = class {
    constructor() {
      this.popovers_list = [];
      this.LINK_CLASSES = 'a[data-doctype], input[data-fieldtype="Link"], .popover';
      this.popover_timeout = null;
      this.setup_events();
    }
    setup_events() {
      $(document.body).on("mouseover", this.LINK_CLASSES, (e2) => {
        this.link_hovered = true;
        this.element = $(e2.currentTarget);
        this.is_link = this.element.get(0).tagName.toLowerCase() === "a";
        if (!this.element.parents().find(".popover").length) {
          this.identify_doc();
          this.popover = this.element.data("bs.popover");
          if (this.name && this.doctype) {
            this.setup_popover_control(e2);
          }
        }
      });
      this.handle_popover_hide();
    }
    identify_doc() {
      if (this.is_link) {
        this.doctype = this.element.attr("data-doctype");
        this.name = this.element.attr("data-name");
        this.href = this.element.attr("href");
      } else {
        this.href = this.element.parents(".control-input-wrapper").find(".control-value a").attr("href");
        this.doctype = this.element.attr("data-target");
        this.name = this.element.val();
      }
    }
    setup_popover_control(e2) {
      if (!(frappe.boot.link_preview_doctypes || []).includes(this.doctype)) {
        return;
      }
      this.element.on("change", () => {
        this.new_popover = true;
      });
      if (!this.popover || this.new_popover) {
        this.data_timeout = setTimeout(() => {
          this.create_popover(e2);
        }, 100);
      } else {
        this.popover_timeout = setTimeout(() => {
          if (this.element.is(":focus")) {
            return;
          }
          this.show_popover(e2);
        }, 1e3);
      }
    }
    create_popover(e2) {
      this.new_popover = false;
      if (this.element.is(":focus")) {
        return;
      }
      this.get_preview_data().then((preview_data) => {
        if (preview_data) {
          if (this.popover_timeout) {
            clearTimeout(this.popover_timeout);
          }
          this.popover_timeout = setTimeout(() => {
            if (this.popover && this.popover.options) {
              let new_content = this.get_popover_html(preview_data);
              this.popover.options.content = new_content;
            } else {
              this.init_preview_popover(preview_data);
            }
            this.show_popover(e2);
          }, 1e3);
        }
      });
    }
    show_popover(e2) {
      this.default_timeout = setTimeout(() => {
        this.clear_all_popovers();
      }, 1e4);
      if (!this.is_link) {
        var left = e2.pageX;
        this.element.popover("show");
        var width = $(".popover").width();
        $(".control-field-popover").css("left", left - width / 2 + "px");
      } else {
        this.element.popover("show");
      }
    }
    handle_popover_hide() {
      $(document).on("mouseout", this.LINK_CLASSES, () => {
        if (!$(".popover:hover").length) {
          this.link_hovered = false;
        }
        if (!this.link_hovered) {
          if (this.data_timeout) {
            clearTimeout(this.data_timeout);
          }
          if (this.popover_timeout) {
            clearTimeout(this.popover_timeout);
          }
          if (this.default_timeout) {
            clearTimeout(this.default_timeout);
          }
          this.clear_all_popovers();
        }
      });
      frappe.router.on("change", () => {
        this.clear_all_popovers();
      });
    }
    clear_all_popovers() {
      this.popovers_list.forEach(($el) => $el.hide());
    }
    get_preview_data() {
      return frappe.xcall("frappe.desk.link_preview.get_preview_data", {
        "doctype": this.doctype,
        "docname": this.name
      });
    }
    init_preview_popover(preview_data) {
      let popover_content = this.get_popover_html(preview_data);
      this.element.popover({
        container: "body",
        template: `
				<div class="link-preview-popover popover">
					<div class="arrow"></div>
					<div class="popover-body popover-content">
					</div>
				</div>
			`,
        html: true,
        sanitizeFn: (content) => content,
        content: popover_content,
        trigger: "manual",
        placement: "top"
      });
      const $popover = $(this.element.data("bs.popover").tip);
      $popover.toggleClass("control-field-popover", this.is_link);
      this.popovers_list.push(this.element.data("bs.popover"));
    }
    get_popover_html(preview_data) {
      if (!this.href) {
        this.href = window.location.href;
      }
      if (this.href && this.href.includes(" ")) {
        this.href = this.href.replace(new RegExp(" ", "g"), "%20");
      }
      let popover_content = `
			<div class="preview-popover-header">
				<div class="preview-header">
					${this.get_image_html(preview_data)}
					<div class="preview-name">
						<a href=${this.href}>${__(preview_data.preview_title)}</a>
					</div>
					<div class="text-muted preview-title">${this.get_id_html(preview_data)}</div>
				</div>
			</div>
			<hr>
			<div class="popover-body">
				${this.get_content_html(preview_data)}
			</div>
		`;
      return popover_content;
    }
    get_id_html(preview_data) {
      let id_html = "";
      if (preview_data.preview_title !== preview_data.name) {
        id_html = `<a class="text-muted" href=${this.href}>${preview_data.name}</a>`;
      }
      return id_html;
    }
    get_image_html(preview_data) {
      let avatar_html = frappe.get_avatar("avatar-medium", preview_data.preview_title, preview_data.preview_image);
      return `<div class="preview-image">
			${avatar_html}
		</div>`;
    }
    get_content_html(preview_data) {
      let content_html = "";
      Object.keys(preview_data).forEach((key2) => {
        if (!["preview_image", "preview_title", "name"].includes(key2)) {
          let value = frappe.ellipsis(preview_data[key2], 280);
          let label = key2;
          content_html += `
					<div class="preview-field">
						<div class="preview-label text-muted">${__(label)}</div>
						<div class="preview-value">${value}</div>
					</div>
				`;
        }
      });
      return `<div class="preview-table">${content_html}</div>`;
    }
  };

  // frappe/public/js/frappe/request.js
  frappe.provide("frappe.request");
  frappe.provide("frappe.request.error_handlers");
  frappe.request.url = "/";
  frappe.request.ajax_count = 0;
  frappe.request.waiting_for_ajax = [];
  frappe.request.logs = {};
  frappe.xcall = function(method, params) {
    return new Promise((resolve, reject) => {
      frappe.call({
        method,
        args: params,
        callback: (r2) => {
          resolve(r2.message);
        },
        error: (r2) => {
          reject(r2.message);
        }
      });
    });
  };
  frappe.call = function(opts) {
    if (!frappe.is_online()) {
      frappe.show_alert({
        indicator: "orange",
        message: __("Connection Lost"),
        subtitle: __("You are not connected to Internet. Retry after sometime.")
      }, 3);
      opts.always && opts.always();
      return $.ajax();
    }
    if (typeof arguments[0] === "string") {
      opts = {
        method: arguments[0],
        args: arguments[1],
        callback: arguments[2],
        headers: arguments[3]
      };
    }
    if (opts.quiet) {
      opts.no_spinner = true;
    }
    var args = $.extend({}, opts.args);
    if (args.freeze) {
      opts.freeze = opts.freeze || args.freeze;
      opts.freeze_message = opts.freeze_message || args.freeze_message;
    }
    if (opts.module && opts.page) {
      args.cmd = opts.module + ".page." + opts.page + "." + opts.page + "." + opts.method;
    } else if (opts.doc) {
      $.extend(args, {
        cmd: "run_doc_method",
        docs: frappe.get_doc(opts.doc.doctype, opts.doc.name),
        method: opts.method,
        args: opts.args
      });
    } else if (opts.method) {
      args.cmd = opts.method;
    }
    var callback = function(data, response_text) {
      if (data.task_id) {
        frappe.socketio.subscribe(data.task_id, opts);
        if (opts.queued) {
          opts.queued(data);
        }
      } else if (opts.callback) {
        return opts.callback(data, response_text);
      }
    };
    let url = opts.url;
    if (!url) {
      url = "/api/method/" + args.cmd;
      if (window.cordova) {
        let host = frappe.request.url;
        host = host.slice(0, host.length - 1);
        url = host + url;
      }
      delete args.cmd;
    }
    if (opts.debounce && frappe.request.is_fresh(args, opts.debounce)) {
      return Promise.resolve();
    }
    return frappe.request.call({
      type: opts.type || "POST",
      args,
      success: callback,
      error: opts.error,
      always: opts.always,
      btn: opts.btn,
      freeze: opts.freeze,
      freeze_message: opts.freeze_message,
      headers: opts.headers || {},
      error_handlers: opts.error_handlers || {},
      async: opts.async,
      silent: opts.silent,
      url
    });
  };
  frappe.request.call = function(opts) {
    frappe.request.prepare(opts);
    var statusCode = {
      200: function(data, xhr) {
        opts.success_callback && opts.success_callback(data, xhr.responseText);
      },
      401: function(xhr) {
        if (frappe.app.session_expired_dialog && frappe.app.session_expired_dialog.display) {
          frappe.app.redirect_to_login();
        } else {
          frappe.app.handle_session_expired();
        }
      },
      404: function(xhr) {
        if (frappe.flags.setting_original_route) {
          frappe.app.redirect_to_login();
        } else {
          frappe.msgprint({
            title: __("Not found"),
            indicator: "red",
            message: __("The resource you are looking for is not available")
          });
        }
      },
      403: function(xhr) {
        if (frappe.session.user === "Guest" && frappe.session.logged_in_user !== "Guest") {
          frappe.app.handle_session_expired();
        } else if (xhr.responseJSON && xhr.responseJSON._error_message) {
          frappe.msgprint({
            title: __("Not permitted"),
            indicator: "red",
            message: xhr.responseJSON._error_message
          });
          xhr.responseJSON._server_messages = null;
        } else if (xhr.responseJSON && xhr.responseJSON._server_messages) {
          var _server_messages = JSON.parse(xhr.responseJSON._server_messages);
          if (_server_messages.indexOf(__("Not permitted")) !== -1) {
            return;
          }
        } else {
          frappe.msgprint({
            title: __("Not permitted"),
            indicator: "red",
            message: __("You do not have enough permissions to access this resource. Please contact your manager to get access.")
          });
        }
      },
      508: function(xhr) {
        frappe.utils.play_sound("error");
        frappe.msgprint({
          title: __("Please try again"),
          indicator: "red",
          message: __("Another transaction is blocking this one. Please try again in a few seconds.")
        });
      },
      413: function(data, xhr) {
        frappe.msgprint({ indicator: "red", title: __("File too big"), message: __("File size exceeded the maximum allowed size of {0} MB", [(frappe.boot.max_file_size || 5242880) / 1048576]) });
      },
      417: function(xhr) {
        var r2 = xhr.responseJSON;
        if (!r2) {
          try {
            r2 = JSON.parse(xhr.responseText);
          } catch (e2) {
            r2 = xhr.responseText;
          }
        }
        opts.error_callback && opts.error_callback(r2);
      },
      501: function(data, xhr) {
        if (typeof data === "string")
          data = JSON.parse(data);
        opts.error_callback && opts.error_callback(data, xhr.responseText);
      },
      500: function(xhr) {
        frappe.utils.play_sound("error");
        try {
          opts.error_callback && opts.error_callback();
          frappe.request.report_error(xhr, opts);
        } catch (e2) {
          frappe.request.report_error(xhr, opts);
        }
      },
      504: function(xhr) {
        frappe.msgprint(__("Request Timed Out"));
        opts.error_callback && opts.error_callback();
      },
      502: function(xhr) {
        frappe.msgprint(__("Internal Server Error"));
      }
    };
    var exception_handlers = {
      "QueryTimeoutError": function() {
        frappe.utils.play_sound("error");
        frappe.msgprint({
          title: __("Request Timeout"),
          indicator: "red",
          message: __("Server was too busy to process this request. Please try again.")
        });
      },
      "QueryDeadlockError": function() {
        frappe.utils.play_sound("error");
        frappe.msgprint({
          title: __("Deadlock Occurred"),
          indicator: "red",
          message: __("Server was too busy to process this request. Please try again.")
        });
      }
    };
    var ajax_args = {
      url: opts.url || frappe.request.url,
      data: opts.args,
      type: opts.type,
      dataType: opts.dataType || "json",
      async: opts.async,
      headers: Object.assign({
        "X-Frappe-CSRF-Token": frappe.csrf_token,
        "Accept": "application/json",
        "X-Frappe-CMD": opts.args && opts.args.cmd || "" || ""
      }, opts.headers),
      cache: false
    };
    if (opts.args && opts.args.doctype) {
      ajax_args.headers["X-Frappe-Doctype"] = encodeURIComponent(opts.args.doctype);
    }
    frappe.last_request = ajax_args.data;
    return $.ajax(ajax_args).done(function(data, textStatus, xhr) {
      try {
        if (typeof data === "string")
          data = JSON.parse(data);
        if (data.docs || data.docinfo) {
          frappe.model.sync(data);
        }
        if (data.__messages) {
          $.extend(frappe._messages, data.__messages);
        }
        if (data._link_titles) {
          if (!frappe._link_titles) {
            frappe._link_titles = {};
          }
          $.extend(frappe._link_titles, data._link_titles);
        }
        var status_code_handler = statusCode[xhr.statusCode().status];
        if (status_code_handler) {
          status_code_handler(data, xhr);
        }
      } catch (e2) {
        console.log("Unable to handle success response", data);
        console.trace(e2);
      }
    }).always(function(data, textStatus, xhr) {
      try {
        if (typeof data === "string") {
          data = JSON.parse(data);
        }
        if (data.responseText) {
          var xhr = data;
          data = JSON.parse(data.responseText);
        }
      } catch (e2) {
        data = null;
      }
      frappe.request.cleanup(opts, data);
      if (opts.always) {
        opts.always(data);
      }
    }).fail(function(xhr, textStatus) {
      try {
        if (xhr.getResponseHeader("content-type") == "application/json" && xhr.responseText) {
          var data;
          try {
            data = JSON.parse(xhr.responseText);
          } catch (e2) {
            console.log("Unable to parse reponse text");
            console.log(xhr.responseText);
            console.log(e2);
          }
          if (data && data.exception) {
            var exception = data.exception.split(".").at(-1).split(":").at(0);
            var exception_handler = exception_handlers[exception];
            if (exception_handler) {
              exception_handler(data);
              return;
            }
          }
        }
        var status_code_handler = statusCode[xhr.statusCode().status];
        if (status_code_handler) {
          status_code_handler(xhr);
          return;
        }
        opts.error_callback && opts.error_callback(xhr);
      } catch (e2) {
        console.log("Unable to handle failed response");
        console.trace(e2);
      }
    });
  };
  frappe.request.is_fresh = function(args, threshold) {
    if (!frappe.request.logs[args.cmd]) {
      frappe.request.logs[args.cmd] = [];
    }
    for (let past_request of frappe.request.logs[args.cmd]) {
      if (new Date() - past_request.timestamp < threshold && frappe.utils.deep_equal(args, past_request.args)) {
        console.log("throttled");
        return true;
      }
    }
    frappe.request.logs[args.cmd].push({ args, timestamp: new Date() });
    return false;
  };
  frappe.request.prepare = function(opts) {
    $("body").attr("data-ajax-state", "triggered");
    if (opts.btn)
      $(opts.btn).prop("disabled", true);
    if (opts.freeze)
      frappe.dom.freeze(opts.freeze_message);
    for (var key2 in opts.args) {
      if (opts.args[key2] && ($.isPlainObject(opts.args[key2]) || $.isArray(opts.args[key2]))) {
        opts.args[key2] = JSON.stringify(opts.args[key2]);
      }
    }
    if (!opts.args.cmd && !opts.url) {
      console.log(opts);
      throw "Incomplete Request";
    }
    opts.success_callback = opts.success;
    opts.error_callback = opts.error;
    delete opts.success;
    delete opts.error;
  };
  frappe.request.cleanup = function(opts, r2) {
    if (opts.btn) {
      $(opts.btn).prop("disabled", false);
    }
    $("body").attr("data-ajax-state", "complete");
    if (opts.freeze)
      frappe.dom.unfreeze();
    if (r2) {
      if (r2.session_expired || frappe.session.user === "Guest" && frappe.session.logged_in_user !== "Guest") {
        frappe.app.handle_session_expired();
        return;
      }
      let global_handlers = frappe.request.error_handlers[r2.exc_type] || [];
      let request_handler = opts.error_handlers ? opts.error_handlers[r2.exc_type] : null;
      let handlers = [].concat(global_handlers, request_handler).filter(Boolean);
      if (r2.exc_type) {
        handlers.forEach((handler) => {
          handler(r2);
        });
      }
      if (r2._server_messages && !opts.silent) {
        if (handlers.length === 0) {
          r2._server_messages = JSON.parse(r2._server_messages);
          frappe.hide_msgprint();
          frappe.msgprint(r2._server_messages);
        }
      }
      if (r2.exc) {
        r2.exc = JSON.parse(r2.exc);
        if (r2.exc instanceof Array) {
          $.each(r2.exc, function(i2, v2) {
            if (v2) {
              console.log(v2);
            }
          });
        } else {
          console.log(r2.exc);
        }
      }
      if (r2._debug_messages) {
        if (opts.args) {
          console.log("======== arguments ========");
          console.log(opts.args);
          console.log("========");
        }
        $.each(JSON.parse(r2._debug_messages), function(i2, v2) {
          console.log(v2);
        });
        console.log("======== response ========");
        delete r2._debug_messages;
        console.log(r2);
        console.log("========");
      }
    }
    frappe.last_response = r2;
  };
  frappe.after_server_call = () => {
    if (frappe.request.ajax_count) {
      return new Promise((resolve) => {
        frappe.request.waiting_for_ajax.push(() => {
          resolve();
        });
      });
    } else {
      return null;
    }
  };
  frappe.after_ajax = function(fn) {
    return new Promise((resolve) => {
      if (frappe.request.ajax_count) {
        frappe.request.waiting_for_ajax.push(() => {
          if (fn)
            return resolve(fn());
          resolve();
        });
      } else {
        if (fn)
          return resolve(fn());
        resolve();
      }
    });
  };
  frappe.request.report_error = function(xhr, request_opts) {
    var data = JSON.parse(xhr.responseText);
    var exc;
    if (data.exc) {
      try {
        exc = (JSON.parse(data.exc) || []).join("\n");
      } catch (e2) {
        exc = data.exc;
      }
      delete data.exc;
    } else {
      exc = "";
    }
    const copy_markdown_to_clipboard = () => {
      const code_block = (snippet) => "```\n" + snippet + "\n```";
      const traceback_info = [
        "### App Versions",
        code_block(JSON.stringify(frappe.boot.versions, null, "	")),
        "### Route",
        code_block(frappe.get_route_str()),
        "### Trackeback",
        code_block(exc),
        "### Request Data",
        code_block(JSON.stringify(request_opts, null, "	")),
        "### Response Data",
        code_block(JSON.stringify(data, null, "	"))
      ].join("\n");
      frappe.utils.copy_to_clipboard(traceback_info);
    };
    var show_communication = function() {
      var error_report_message = [
        "<h5>Please type some additional information that could help us reproduce this issue:</h5>",
        '<div style="min-height: 100px; border: 1px solid #bbb; 				border-radius: 5px; padding: 15px; margin-bottom: 15px;"></div>',
        "<hr>",
        "<h5>App Versions</h5>",
        "<pre>" + JSON.stringify(frappe.boot.versions, null, "	") + "</pre>",
        "<h5>Route</h5>",
        "<pre>" + frappe.get_route_str() + "</pre>",
        "<hr>",
        "<h5>Error Report</h5>",
        "<pre>" + exc + "</pre>",
        "<hr>",
        "<h5>Request Data</h5>",
        "<pre>" + JSON.stringify(request_opts, null, "	") + "</pre>",
        "<hr>",
        "<h5>Response JSON</h5>",
        "<pre>" + JSON.stringify(data, null, "	") + "</pre>"
      ].join("\n");
      var communication_composer = new frappe.views.CommunicationComposer({
        subject: "Error Report [" + frappe.datetime.nowdate() + "]",
        recipients: error_report_email,
        message: error_report_message,
        doc: {
          doctype: "User",
          name: frappe.session.user
        }
      });
      communication_composer.dialog.$wrapper.css("z-index", cint(frappe.msg_dialog.$wrapper.css("z-index")) + 1);
    };
    if (exc) {
      var error_report_email = frappe.boot.error_report_email;
      request_opts = frappe.request.cleanup_request_opts(request_opts);
      if (!frappe.error_dialog) {
        frappe.error_dialog = new frappe.ui.Dialog({
          title: __("Server Error"),
          primary_action_label: __("Report"),
          primary_action: () => {
            if (error_report_email) {
              show_communication();
            } else {
              frappe.msgprint(__("Support Email Address Not Specified"));
            }
            frappe.error_dialog.hide();
          },
          secondary_action_label: __("Copy error to clipboard"),
          secondary_action: () => {
            copy_markdown_to_clipboard();
            frappe.error_dialog.hide();
          }
        });
        frappe.error_dialog.wrapper.classList.add("msgprint-dialog");
      }
      let parts = strip(exc).split("\n");
      frappe.error_dialog.$body.html(parts[parts.length - 1]);
      frappe.error_dialog.show();
    }
  };
  frappe.request.cleanup_request_opts = function(request_opts) {
    var doc2 = (request_opts.args || {}).doc;
    if (doc2) {
      doc2 = JSON.parse(doc2);
      $.each(Object.keys(doc2), function(i2, key2) {
        if (key2.indexOf("password") !== -1 && doc2[key2]) {
          doc2[key2] = "*****";
        }
      });
      request_opts.args.doc = JSON.stringify(doc2);
    }
    return request_opts;
  };
  frappe.request.on_error = function(error_type, handler) {
    frappe.request.error_handlers[error_type] = frappe.request.error_handlers[error_type] || [];
    frappe.request.error_handlers[error_type].push(handler);
  };
  $(document).ajaxSend(function() {
    frappe.request.ajax_count++;
  });
  $(document).ajaxComplete(function() {
    frappe.request.ajax_count--;
    if (!frappe.request.ajax_count) {
      $.each(frappe.request.waiting_for_ajax || [], function(i2, fn) {
        fn();
      });
      frappe.request.waiting_for_ajax = [];
    }
  });

  // frappe/public/js/desk.bundle.js
  var import_socketio_client = __toESM(require_socketio_client());

  // frappe/public/js/frappe/utils/utils.js
  var import_fast_deep_equal = __toESM(require_fast_deep_equal());
  frappe.provide("frappe.utils");
  if (!Array.prototype.uniqBy) {
    Object.defineProperty(Array.prototype, "uniqBy", {
      value: function(key2) {
        var seen = {};
        return this.filter(function(item) {
          var k2 = key2(item);
          return k2 in seen ? false : seen[k2] = true;
        });
      }
    });
    Object.defineProperty(Array.prototype, "move", {
      value: function(from, to) {
        this.splice(to, 0, this.splice(from, 1)[0]);
      }
    });
  }
  Object.defineProperty(Object.prototype, "setDefault", {
    value: function(key2, default_value) {
      if (!(key2 in this))
        this[key2] = default_value;
      return this[key2];
    },
    writable: true
  });
  String.prototype.plural = function(revert) {
    const plural = {
      "(quiz)$": "$1zes",
      "^(ox)$": "$1en",
      "([m|l])ouse$": "$1ice",
      "(matr|vert|ind)ix|ex$": "$1ices",
      "(x|ch|ss|sh)$": "$1es",
      "([^aeiouy]|qu)y$": "$1ies",
      "(hive)$": "$1s",
      "(?:([^f])fe|([lr])f)$": "$1$2ves",
      "(shea|lea|loa|thie)f$": "$1ves",
      sis$: "ses",
      "([ti])um$": "$1a",
      "(tomat|potat|ech|her|vet)o$": "$1oes",
      "(bu)s$": "$1ses",
      "(alias)$": "$1es",
      "(octop)us$": "$1i",
      "(ax|test)is$": "$1es",
      "(us)$": "$1es",
      "([^s]+)$": "$1s"
    };
    const singular = {
      "(quiz)zes$": "$1",
      "(matr)ices$": "$1ix",
      "(vert|ind)ices$": "$1ex",
      "^(ox)en$": "$1",
      "(alias)es$": "$1",
      "(octop|vir)i$": "$1us",
      "(cris|ax|test)es$": "$1is",
      "(shoe)s$": "$1",
      "(o)es$": "$1",
      "(bus)es$": "$1",
      "([m|l])ice$": "$1ouse",
      "(x|ch|ss|sh)es$": "$1",
      "(m)ovies$": "$1ovie",
      "(s)eries$": "$1eries",
      "([^aeiouy]|qu)ies$": "$1y",
      "([lr])ves$": "$1f",
      "(tive)s$": "$1",
      "(hive)s$": "$1",
      "(li|wi|kni)ves$": "$1fe",
      "(shea|loa|lea|thie)ves$": "$1f",
      "(^analy)ses$": "$1sis",
      "((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$": "$1$2sis",
      "([ti])a$": "$1um",
      "(n)ews$": "$1ews",
      "(h|bl)ouses$": "$1ouse",
      "(corpse)s$": "$1",
      "(us)es$": "$1",
      s$: ""
    };
    const irregular = {
      move: "moves",
      foot: "feet",
      goose: "geese",
      sex: "sexes",
      child: "children",
      man: "men",
      tooth: "teeth",
      person: "people"
    };
    const uncountable = [
      "sheep",
      "fish",
      "deer",
      "moose",
      "series",
      "species",
      "money",
      "rice",
      "information",
      "equipment"
    ];
    if (uncountable.indexOf(this.toLowerCase()) >= 0)
      return this;
    let word;
    let pattern;
    let replace;
    for (word in irregular) {
      if (revert) {
        pattern = new RegExp(irregular[word] + "$", "i");
        replace = word;
      } else {
        pattern = new RegExp(word + "$", "i");
        replace = irregular[word];
      }
      if (pattern.test(this))
        return this.replace(pattern, replace);
    }
    let array;
    if (revert)
      array = singular;
    else
      array = plural;
    let reg;
    for (reg in array) {
      pattern = new RegExp(reg, "i");
      if (pattern.test(this))
        return this.replace(pattern, array[reg]);
    }
    return this;
  };
  Object.assign(frappe.utils, {
    get_random: function(len) {
      var text = "";
      var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
      for (var i2 = 0; i2 < len; i2++)
        text += possible.charAt(Math.floor(Math.random() * possible.length));
      return text;
    },
    get_file_link: function(filename) {
      filename = cstr(filename);
      if (frappe.utils.is_url(filename)) {
        return filename;
      } else if (filename.indexOf("/") === -1) {
        return "files/" + filename;
      } else {
        return filename;
      }
    },
    replace_newlines(t3) {
      return t3 ? t3.replace(/\n/g, "<br>") : "";
    },
    is_html: function(txt2) {
      if (!txt2)
        return false;
      if (txt2.indexOf("<br>") == -1 && txt2.indexOf("<p") == -1 && txt2.indexOf("<img") == -1 && txt2.indexOf("<div") == -1 && !txt2.includes("<span")) {
        return false;
      }
      return true;
    },
    is_mac: function() {
      return window.navigator.platform === "MacIntel";
    },
    is_xs: function() {
      return $(document).width() < 768;
    },
    is_sm: function() {
      return $(document).width() < 991 && $(document).width() >= 768;
    },
    is_md: function() {
      return $(document).width() < 1199 && $(document).width() >= 991;
    },
    is_json: function(str) {
      try {
        JSON.parse(str);
      } catch (e2) {
        return false;
      }
      return true;
    },
    parse_json: function(str) {
      let parsed_json = "";
      try {
        parsed_json = JSON.parse(str);
      } catch (e2) {
        return str;
      }
      return parsed_json;
    },
    strip_whitespace: function(html) {
      return (html || "").replace(/<p>\s*<\/p>/g, "").replace(/<br>(\s*<br>\s*)+/g, "<br><br>");
    },
    encode_tags: function(html) {
      var tagsToReplace = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;"
      };
      function replaceTag(tag) {
        return tagsToReplace[tag] || tag;
      }
      return html.replace(/[&<>]/g, replaceTag);
    },
    strip_original_content: function(txt2) {
      var out = [], part = [], newline = txt2.indexOf("<br>") === -1 ? "\n" : "<br>";
      $.each(txt2.split(newline), function(i2, t3) {
        var tt2 = strip(t3);
        if (tt2 && (tt2.substr(0, 1) === ">" || tt2.substr(0, 4) === "&gt;")) {
          part.push(t3);
        } else {
          out = out.concat(part);
          out.push(t3);
          part = [];
        }
      });
      return out.join(newline);
    },
    escape_html: function(txt2) {
      let escape_html_mapping = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#39;",
        "/": "&#x2F;",
        "`": "&#x60;",
        "=": "&#x3D;"
      };
      return String(txt2).replace(/[&<>"'`=/]/g, (char) => escape_html_mapping[char] || char);
    },
    unescape_html: function(txt2) {
      let unescape_html_mapping = {
        "&amp;": "&",
        "&lt;": "<",
        "&gt;": ">",
        "&quot;": '"',
        "&#39;": "'",
        "&#x2F;": "/",
        "&#x60;": "`",
        "&#x3D;": "="
      };
      return String(txt2).replace(/&amp;|&lt;|&gt;|&quot;|&#39;|&#x2F;|&#x60;|&#x3D;/g, (char) => unescape_html_mapping[char] || char);
    },
    html2text: function(html) {
      let d2 = document.createElement("div");
      d2.innerHTML = html;
      return d2.textContent;
    },
    is_url: function(txt2) {
      return txt2.toLowerCase().substr(0, 7) == "http://" || txt2.toLowerCase().substr(0, 8) == "https://";
    },
    to_title_case: function(string, with_space = false) {
      let titlecased_string = string.toLowerCase().replace(/(?:^|[\s-/])\w/g, function(match) {
        return match.toUpperCase();
      });
      let replace_with = with_space ? " " : "";
      return titlecased_string.replace(/-|_/g, replace_with);
    },
    toggle_blockquote: function(txt2) {
      if (!txt2)
        return txt2;
      var content = $("<div></div>").html(txt2);
      content.find("blockquote").parent("blockquote").addClass("hidden").before('<p><a class="text-muted btn btn-default toggle-blockquote" style="padding: 2px 7px 0px; line-height: 1;"> 					\u2022 \u2022 \u2022 				</a></p>');
      return content.html();
    },
    scroll_to: function(element, animate = true, additional_offset, element_to_be_scrolled, callback, highlight_element = false) {
      if (frappe.flags.disable_auto_scroll)
        return;
      element_to_be_scrolled = element_to_be_scrolled || $("html, body");
      let scroll_top = 0;
      if (element) {
        scroll_top = typeof element == "number" ? element - cint(additional_offset) : this.get_scroll_position(element, additional_offset);
      }
      if (scroll_top < 0) {
        scroll_top = 0;
      }
      if (scroll_top == element_to_be_scrolled.scrollTop()) {
        return;
      }
      if (animate) {
        element_to_be_scrolled.animate({
          scrollTop: scroll_top
        }).promise().then(() => {
          if (highlight_element) {
            $(element).addClass("highlight");
            document.addEventListener("click", function() {
              $(element).removeClass("highlight");
            }, { once: true });
          }
          callback && callback();
        });
      } else {
        element_to_be_scrolled.scrollTop(scroll_top);
      }
    },
    get_scroll_position: function(element, additional_offset) {
      let header_offset = $(".navbar").height() + $(".page-head:visible").height() || $(".navbar").height();
      let scroll_top = $(element).offset().top - header_offset - cint(additional_offset);
      return scroll_top;
    },
    filter_dict: function(dict, filters2) {
      var ret = [];
      if (typeof filters2 == "string") {
        return [dict[filters2]];
      }
      $.each(dict, function(i2, d2) {
        for (var key2 in filters2) {
          if ($.isArray(filters2[key2])) {
            if (filters2[key2][0] == "in") {
              if (filters2[key2][1].indexOf(d2[key2]) == -1)
                return;
            } else if (filters2[key2][0] == "not in") {
              if (filters2[key2][1].indexOf(d2[key2]) != -1)
                return;
            } else if (filters2[key2][0] == "<") {
              if (!(d2[key2] < filters2[key2]))
                return;
            } else if (filters2[key2][0] == "<=") {
              if (!(d2[key2] <= filters2[key2]))
                return;
            } else if (filters2[key2][0] == ">") {
              if (!(d2[key2] > filters2[key2]))
                return;
            } else if (filters2[key2][0] == ">=") {
              if (!(d2[key2] >= filters2[key2]))
                return;
            }
          } else {
            if (d2[key2] != filters2[key2])
              return;
          }
        }
        ret.push(d2);
      });
      return ret;
    },
    comma_or: function(list) {
      return frappe.utils.comma_sep(list, " " + __("or") + " ");
    },
    comma_and: function(list) {
      return frappe.utils.comma_sep(list, " " + __("and") + " ");
    },
    comma_sep: function(list, sep) {
      if (list instanceof Array) {
        if (list.length == 0) {
          return "";
        } else if (list.length == 1) {
          return list[0];
        } else {
          return list.slice(0, list.length - 1).join(", ") + sep + list.slice(-1)[0];
        }
      } else {
        return list;
      }
    },
    set_footnote: function(footnote_area, wrapper, txt2) {
      if (!footnote_area) {
        footnote_area = $('<div class="text-muted footnote-area level">').appendTo(wrapper);
      }
      if (txt2) {
        footnote_area.html(txt2);
      } else {
        footnote_area.remove();
        footnote_area = null;
      }
      return footnote_area;
    },
    get_args_dict_from_url: function(txt2) {
      var args = {};
      $.each(decodeURIComponent(txt2).split("&"), function(i2, arg) {
        arg = arg.split("=");
        args[arg[0]] = arg[1];
      });
      return args;
    },
    get_url_from_dict: function(args) {
      return $.map(args, function(val2, key2) {
        if (val2 !== null)
          return encodeURIComponent(key2) + "=" + encodeURIComponent(val2);
        else
          return null;
      }).join("&") || "";
    },
    validate_type: function(val2, type) {
      var regExp;
      switch (type) {
        case "phone":
          regExp = /^([0-9 +_\-,.*#()]){1,20}$/;
          break;
        case "name":
          regExp = /^[\w][\w'-]*([ \w][\w'-]+)*$/;
          break;
        case "number":
          regExp = /^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;
          break;
        case "digits":
          regExp = /^\d+$/;
          break;
        case "alphanum":
          regExp = /^\w+$/;
          break;
        case "email":
          regExp = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
          break;
        case "url":
          regExp = /^((([A-Za-z0-9.+-]+:(?:\/\/)?)(?:[-;:&=\+\,\w]@)?[A-Za-z0-9.-]+(:[0-9]+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/i;
          break;
        case "dateIso":
          regExp = /^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;
          break;
        default:
          return false;
      }
      return val2 !== "" ? regExp.test(val2) : false;
    },
    guess_style: function(text, default_style, _colour) {
      var style = default_style || "default";
      var colour = "gray";
      if (text) {
        if (has_words(["Pending", "Review", "Medium", "Not Approved"], text)) {
          style = "warning";
          colour = "orange";
        } else if (has_words(["Open", "Urgent", "High", "Failed", "Rejected", "Error"], text)) {
          style = "danger";
          colour = "red";
        } else if (has_words([
          "Closed",
          "Finished",
          "Converted",
          "Completed",
          "Complete",
          "Confirmed",
          "Approved",
          "Yes",
          "Active",
          "Available",
          "Paid",
          "Success"
        ], text)) {
          style = "success";
          colour = "green";
        } else if (has_words(["Submitted"], text)) {
          style = "info";
          colour = "blue";
        }
      }
      return _colour ? colour : style;
    },
    guess_colour: function(text) {
      return frappe.utils.guess_style(text, null, true);
    },
    get_indicator_color: function(state) {
      return frappe.db.get_list("Workflow State", { filters: { name: state }, fields: ["name", "style"] }).then((res) => {
        const state2 = res[0];
        if (!state2.style) {
          return frappe.utils.guess_colour(state2.name);
        }
        const style = state2.style;
        const colour_map = {
          "Success": "green",
          "Warning": "orange",
          "Danger": "red",
          "Primary": "blue"
        };
        return colour_map[style];
      });
    },
    sort: function(list, key2, compare_type, reverse) {
      if (!list || list.length < 2)
        return list || [];
      var sort_fn = {
        "string": function(a2, b2) {
          return cstr(a2[key2]).localeCompare(cstr(b2[key2]));
        },
        "number": function(a2, b2) {
          return flt(a2[key2]) - flt(b2[key2]);
        }
      };
      if (!compare_type)
        compare_type = typeof list[0][key2] === "string" ? "string" : "number";
      list.sort(sort_fn[compare_type]);
      if (reverse) {
        list.reverse();
      }
      return list;
    },
    unique: function(list) {
      var dict = {}, arr = [];
      for (var i2 = 0, l2 = list.length; i2 < l2; i2++) {
        if (!(list[i2] in dict)) {
          dict[list[i2]] = null;
          arr.push(list[i2]);
        }
      }
      return arr;
    },
    remove_nulls: function(list) {
      var new_list = [];
      for (var i2 = 0, l2 = list.length; i2 < l2; i2++) {
        if (!is_null(list[i2])) {
          new_list.push(list[i2]);
        }
      }
      return new_list;
    },
    all: function(lst) {
      for (var i2 = 0, l2 = lst.length; i2 < l2; i2++) {
        if (!lst[i2]) {
          return false;
        }
      }
      return true;
    },
    dict: function(keys, values) {
      var out = [];
      $.each(values, function(row_idx, row) {
        var new_row = {};
        $.each(keys, function(key_idx, key2) {
          new_row[key2] = row[key_idx];
        });
        out.push(new_row);
      });
      return out;
    },
    sum: function(list) {
      return list.reduce(function(previous_value, current_value) {
        return flt(previous_value) + flt(current_value);
      }, 0);
    },
    arrays_equal: function(arr1, arr2) {
      if (!arr1 || !arr2) {
        return false;
      }
      if (arr1.length != arr2.length) {
        return false;
      }
      for (var i2 = 0; i2 < arr1.length; i2++) {
        if ($.isArray(arr1[i2])) {
          if (!frappe.utils.arrays_equal(arr1[i2], arr2[i2])) {
            return false;
          }
        } else if (arr1[i2] !== arr2[i2]) {
          return false;
        }
      }
      return true;
    },
    intersection: function(a2, b2) {
      var ai = 0, bi = 0;
      var result = new Array();
      a2 = [].concat(a2).sort();
      b2 = [].concat(b2).sort();
      while (ai < a2.length && bi < b2.length) {
        if (a2[ai] < b2[bi]) {
          ai++;
        } else if (a2[ai] > b2[bi]) {
          bi++;
        } else {
          result.push(a2[ai]);
          ai++;
          bi++;
        }
      }
      return result;
    },
    resize_image: function(reader, callback, max_width, max_height) {
      var tempImg = new Image();
      if (!max_width)
        max_width = 600;
      if (!max_height)
        max_height = 400;
      tempImg.src = reader.result;
      tempImg.onload = function() {
        var tempW = tempImg.width;
        var tempH = tempImg.height;
        if (tempW > tempH) {
          if (tempW > max_width) {
            tempH *= max_width / tempW;
            tempW = max_width;
          }
        } else {
          if (tempH > max_height) {
            tempW *= max_height / tempH;
            tempH = max_height;
          }
        }
        var canvas = document.createElement("canvas");
        canvas.width = tempW;
        canvas.height = tempH;
        var ctx = canvas.getContext("2d");
        ctx.drawImage(this, 0, 0, tempW, tempH);
        var dataURL = canvas.toDataURL("image/jpeg");
        setTimeout(function() {
          callback(dataURL);
        }, 10);
      };
    },
    csv_to_array: function(strData, strDelimiter) {
      strDelimiter = strDelimiter || ",";
      var objPattern = new RegExp("(\\" + strDelimiter + '|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\' + strDelimiter + "\\r\\n]*))", "gi");
      var arrData = [[]];
      var arrMatches = null;
      while (arrMatches = objPattern.exec(strData)) {
        var strMatchedDelimiter = arrMatches[1];
        if (strMatchedDelimiter.length && strMatchedDelimiter !== strDelimiter) {
          arrData.push([]);
        }
        var strMatchedValue;
        if (arrMatches[2]) {
          strMatchedValue = arrMatches[2].replace(new RegExp('""', "g"), '"');
        } else {
          strMatchedValue = arrMatches[3];
        }
        arrData[arrData.length - 1].push(strMatchedValue);
      }
      return arrData;
    },
    warn_page_name_change: function() {
      frappe.msgprint(__("Note: Changing the Page Name will break previous URL to this page."));
    },
    notify: function(subject, body, route, onclick) {
      console.log("push notifications are evil and deprecated");
    },
    set_title: function(title) {
      frappe._original_title = title;
      if (frappe._title_prefix) {
        title = frappe._title_prefix + " " + title.replace(/<[^>]*>/g, "");
      }
      document.title = title;
      const sub_path = frappe.router.get_sub_path();
      frappe.route_titles[sub_path] = title;
    },
    set_title_prefix: function(prefix) {
      frappe._title_prefix = prefix;
      frappe.utils.set_title(frappe._original_title);
    },
    is_image_file: function(filename) {
      if (!filename)
        return false;
      filename = filename.split("?")[0];
      return /\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(filename);
    },
    play_sound: function(name2) {
      try {
        if (frappe.boot.user.mute_sounds) {
          return;
        }
        var audio = $("#sound-" + name2)[0];
        audio.volume = audio.getAttribute("volume");
        audio.play();
      } catch (e2) {
        console.log("Cannot play sound", name2, e2);
      }
    },
    split_emails: function(txt2) {
      var email_list = [];
      if (!txt2) {
        return email_list;
      }
      txt2.split(/[,\n](?=(?:[^"]|"[^"]*")*$)/g).forEach(function(email) {
        email = email.trim();
        if (email) {
          email_list.push(email);
        }
      });
      return email_list;
    },
    supportsES6: function() {
      try {
        new Function("(a = 0) => a");
        return true;
      } catch (err) {
        return false;
      }
    }(),
    throttle: function(func, wait, options) {
      var context, args, result;
      var timeout = null;
      var previous = 0;
      if (!options)
        options = {};
      let later = function() {
        previous = options.leading === false ? 0 : Date.now();
        timeout = null;
        result = func.apply(context, args);
        if (!timeout)
          context = args = null;
      };
      return function() {
        var now = Date.now();
        if (!previous && options.leading === false)
          previous = now;
        let remaining = wait - (now - previous);
        context = this;
        args = arguments;
        if (remaining <= 0 || remaining > wait) {
          if (timeout) {
            clearTimeout(timeout);
            timeout = null;
          }
          previous = now;
          result = func.apply(context, args);
          if (!timeout)
            context = args = null;
        } else if (!timeout && options.trailing !== false) {
          timeout = setTimeout(later, remaining);
        }
        return result;
      };
    },
    debounce: function(func, wait, immediate) {
      var timeout;
      return function() {
        var context = this, args = arguments;
        var later = function() {
          timeout = null;
          if (!immediate)
            func.apply(context, args);
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow)
          func.apply(context, args);
      };
    },
    get_form_link: function(doctype2, name2, html = false, display_text = null, query_params_obj = null) {
      display_text = display_text || name2;
      name2 = encodeURIComponent(name2);
      let route = `/app/${encodeURIComponent(doctype2.toLowerCase().replace(/ /g, "-"))}/${name2}`;
      if (query_params_obj) {
        route += frappe.utils.make_query_string(query_params_obj);
      }
      if (html) {
        return `<a href="${route}">${display_text}</a>`;
      }
      return route;
    },
    get_route_label(route_str) {
      let route = route_str.split("/");
      if (route[2] === "Report" || route[0] === "query-report") {
        return __("{0} Report", [route[3] || route[1]]);
      }
      if (route[0] === "List") {
        return __("{0} List", [route[1]]);
      }
      if (route[0] === "modules") {
        return __("{0} Modules", [route[1]]);
      }
      if (route[0] === "dashboard") {
        return __("{0} Dashboard", [route[1]]);
      }
      return __(frappe.utils.to_title_case(route[0], true));
    },
    report_column_total: function(values, column, type) {
      if (column.column.disable_total) {
        return "";
      } else if (values.length > 0) {
        if (column.column.fieldtype == "Percent" || type === "mean") {
          return values.reduce((a2, b2) => a2 + flt(b2)) / values.length;
        } else if (column.column.fieldtype == "Int") {
          return values.reduce((a2, b2) => a2 + cint(b2));
        } else if (frappe.model.is_numeric_field(column.column.fieldtype)) {
          return values.reduce((a2, b2) => a2 + flt(b2));
        } else {
          return null;
        }
      } else {
        return null;
      }
    },
    setup_search($wrapper, el_class, text_class, data_attr) {
      const $search_input = $wrapper.find('[data-element="search"]').show();
      $search_input.focus().val("");
      const $elements = $wrapper.find(el_class).show();
      $search_input.off("keyup").on("keyup", () => {
        let text_filter = $search_input.val().toLowerCase();
        text_filter = text_filter.replace(/^\s+|\s+$/g, "");
        for (let i2 = 0; i2 < $elements.length; i2++) {
          const text_element = $elements.eq(i2).find(text_class);
          const text = text_element.text().toLowerCase();
          let name2 = "";
          if (data_attr && text_element.attr(data_attr)) {
            name2 = text_element.attr(data_attr).toLowerCase();
          }
          if (text.includes(text_filter) || name2.includes(text_filter)) {
            $elements.eq(i2).css("display", "");
          } else {
            $elements.eq(i2).css("display", "none");
          }
        }
      });
    },
    deep_equal(a2, b2) {
      return (0, import_fast_deep_equal.default)(a2, b2);
    },
    file_name_ellipsis(filename, length) {
      let first_part_length = length * 2 / 3;
      let last_part_length = length - first_part_length;
      let parts = filename.split(".");
      let extn = parts.pop();
      let name2 = parts.join("");
      let first_part = name2.slice(0, first_part_length);
      let last_part = name2.slice(-last_part_length);
      if (name2.length > length) {
        return `${first_part}...${last_part}.${extn}`;
      } else {
        return filename;
      }
    },
    get_decoded_string(dataURI) {
      let parts = dataURI.split(",");
      const encoded_data = parts[1];
      let decoded = atob(encoded_data);
      try {
        const escaped = escape(decoded);
        decoded = decodeURIComponent(escaped);
      } catch (e2) {
      }
      return decoded;
    },
    copy_to_clipboard(string) {
      const show_success_alert = () => {
        frappe.show_alert({
          indicator: "green",
          message: __("Copied to clipboard.")
        });
      };
      if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(string).then(show_success_alert);
      } else {
        let input = $("<textarea>");
        $("body").append(input);
        input.val(string).select();
        document.execCommand("copy");
        show_success_alert();
        input.remove();
      }
    },
    is_rtl(lang = null) {
      return ["ar", "he", "fa", "ps"].includes(lang || frappe.boot.lang);
    },
    bind_actions_with_object($el, object) {
      $($el).off("click.class_actions");
      $($el).on("click.class_actions", "[data-action]", (e2) => {
        let $target = $(e2.currentTarget);
        let action = $target.data("action");
        let method = object[action];
        method ? object[action](e2, $target) : null;
      });
      return $el;
    },
    eval(code, context = {}) {
      let variable_names = Object.keys(context);
      let variables = Object.values(context);
      code = `let out = ${code}; return out`;
      try {
        let expression_function = new Function(...variable_names, code);
        return expression_function(...variables);
      } catch (error) {
        console.log("Error evaluating the following expression:");
        console.error(code);
        throw error;
      }
    },
    get_browser() {
      let ua = navigator.userAgent;
      let tem;
      let M2 = ua.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i) || [];
      if (/trident/i.test(M2[1])) {
        tem = /\brv[ :]+(\d+)/g.exec(ua) || [];
        return { name: "IE", version: tem[1] || "" };
      }
      if (M2[1] === "Chrome") {
        tem = ua.match(/\bOPR|Edge\/(\d+)/);
        if (tem != null) {
          return { name: "Opera", version: tem[1] };
        }
      }
      M2 = M2[2] ? [M2[1], M2[2]] : [navigator.appName, navigator.appVersion, "-?"];
      if ((tem = ua.match(/version\/(\d+)/i)) != null) {
        M2.splice(1, 1, tem[1]);
      }
      return {
        name: M2[0],
        version: M2[1]
      };
    },
    get_formatted_duration(value, duration_options = null) {
      let duration = "";
      if (!duration_options) {
        duration_options = {
          hide_days: 0,
          hide_seconds: 0
        };
      }
      if (value) {
        let total_duration = frappe.utils.seconds_to_duration(value, duration_options);
        if (total_duration.days) {
          duration += total_duration.days + __("d", null, "Days (Field: Duration)");
        }
        if (total_duration.hours) {
          duration += duration.length ? " " : "";
          duration += total_duration.hours + __("h", null, "Hours (Field: Duration)");
        }
        if (total_duration.minutes) {
          duration += duration.length ? " " : "";
          duration += total_duration.minutes + __("m", null, "Minutes (Field: Duration)");
        }
        if (total_duration.seconds) {
          duration += duration.length ? " " : "";
          duration += total_duration.seconds + __("s", null, "Seconds (Field: Duration)");
        }
      }
      return duration;
    },
    seconds_to_duration(seconds, duration_options) {
      const round = seconds > 0 ? Math.floor : Math.ceil;
      const total_duration = {
        days: round(seconds / 86400),
        hours: round(seconds % 86400 / 3600),
        minutes: round(seconds % 3600 / 60),
        seconds: round(seconds % 60)
      };
      if (duration_options && duration_options.hide_days) {
        total_duration.hours = round(seconds / 3600);
        total_duration.days = 0;
      }
      return total_duration;
    },
    duration_to_seconds(days = 0, hours = 0, minutes = 0, seconds = 0) {
      let value = 0;
      if (days) {
        value += days * 24 * 60 * 60;
      }
      if (hours) {
        value += hours * 60 * 60;
      }
      if (minutes) {
        value += minutes * 60;
      }
      if (seconds) {
        value += seconds;
      }
      return value;
    },
    get_duration_options: function(docfield) {
      let duration_options = {
        hide_days: docfield.hide_days,
        hide_seconds: docfield.hide_seconds
      };
      return duration_options;
    },
    get_number_system: function(country) {
      let number_system_map = {
        "India": [
          {
            divisor: 1e7,
            symbol: "Cr"
          },
          {
            divisor: 1e5,
            symbol: "Lakh"
          }
        ],
        "": [
          {
            divisor: 1e12,
            symbol: "T"
          },
          {
            divisor: 1e9,
            symbol: "B"
          },
          {
            divisor: 1e6,
            symbol: "M"
          },
          {
            divisor: 1e3,
            symbol: "K"
          }
        ]
      };
      if (!Object.keys(number_system_map).includes(country))
        country = "";
      return number_system_map[country];
    },
    map_defaults: {
      center: [19.08, 72.8961],
      zoom: 13,
      tiles: "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
      options: {
        attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
      }
    },
    icon(icon_name, size = "sm", icon_class = "", icon_style = "", svg_class = "") {
      let size_class = "";
      if (typeof size == "object") {
        icon_style += ` width: ${size.width}; height: ${size.height}`;
      } else {
        size_class = `icon-${size}`;
      }
      return `<svg class="icon ${svg_class} ${size_class}" style="${icon_style}">
			<use class="${icon_class}" href="#icon-${icon_name}"></use>
		</svg>`;
    },
    make_chart(wrapper, custom_options = {}) {
      let chart_args = {
        type: "bar",
        colors: ["light-blue"],
        axisOptions: {
          xIsSeries: 1,
          shortenYAxisNumbers: 1,
          xAxisMode: "tick"
        }
      };
      for (let key2 in custom_options) {
        if (typeof chart_args[key2] === "object" && typeof custom_options[key2] === "object") {
          chart_args[key2] = Object.assign(chart_args[key2], custom_options[key2]);
        } else {
          chart_args[key2] = custom_options[key2];
        }
      }
      return new frappe.Chart(wrapper, chart_args);
    },
    generate_route(item) {
      const type = item.type.toLowerCase();
      if (type === "doctype") {
        item.doctype = item.name;
      }
      let route = "";
      if (!item.route) {
        if (item.link) {
          route = strip(item.link, "#");
        } else if (type === "doctype") {
          let doctype_slug = frappe.router.slug(item.doctype);
          if (frappe.model.is_single(item.doctype)) {
            route = doctype_slug;
          } else {
            if (!item.doc_view) {
              if (frappe.model.is_tree(item.doctype)) {
                item.doc_view = "Tree";
              } else {
                item.doc_view = "List";
              }
            }
            switch (item.doc_view) {
              case "List":
                if (item.filters) {
                  frappe.route_options = item.filters;
                }
                route = doctype_slug;
                break;
              case "Tree":
                route = `${doctype_slug}/view/tree`;
                break;
              case "Report Builder":
                route = `${doctype_slug}/view/report`;
                break;
              case "Dashboard":
                route = `${doctype_slug}/view/dashboard`;
                break;
              case "New":
                route = `${doctype_slug}/new`;
                break;
              case "Calendar":
                route = `${doctype_slug}/view/calendar/default`;
                break;
              default:
                frappe.throw({ message: __("Not a valid view:") + item.doc_view, title: __("Unknown View") });
                route = "";
            }
          }
        } else if (type === "report") {
          if (item.is_query_report) {
            route = "query-report/" + item.name;
          } else if (!item.doctype) {
            route = "/report/" + item.name;
          } else {
            route = frappe.router.slug(item.doctype) + "/view/report/" + item.name;
          }
        } else if (type === "page") {
          route = item.name;
        } else if (type === "dashboard") {
          route = `dashboard-view/${item.name}`;
        }
      } else {
        route = item.route;
      }
      if (item.route_options) {
        route += "?" + $.map(item.route_options, function(value, key2) {
          return encodeURIComponent(key2) + "=" + encodeURIComponent(value);
        }).join("&");
      }
      return `/app/${route}`;
    },
    shorten_number: function(number, country, min_length = 4, max_no_of_decimals = 2) {
      const len = String(number).match(/\d/g).length;
      if (len < min_length)
        return number.toString();
      const number_system = this.get_number_system(country);
      let x2 = Math.abs(Math.round(number));
      for (const map of number_system) {
        if (x2 >= map.divisor) {
          let result = number / map.divisor;
          const no_of_decimals = this.get_number_of_decimals(result);
          result = no_of_decimals > max_no_of_decimals ? result.toFixed(max_no_of_decimals) : result;
          return result + " " + map.symbol;
        }
      }
      return number.toFixed(max_no_of_decimals);
    },
    get_number_of_decimals: function(number) {
      if (Math.floor(number) === number)
        return 0;
      return number.toString().split(".")[1].length || 0;
    },
    build_summary_item(summary) {
      if (summary.type == "separator") {
        return $(`<div class="summary-separator">
				<div class="summary-value ${summary.color ? summary.color.toLowerCase() : "text-muted"}">${summary.value}</div>
			</div>`);
      }
      let df = { fieldtype: summary.datatype };
      let doc2 = null;
      if (summary.datatype == "Currency") {
        df.options = "currency";
        doc2 = { currency: summary.currency };
      }
      let value = frappe.format(summary.value, df, { only_value: true }, doc2);
      let color = summary.indicator ? summary.indicator.toLowerCase() : summary.color ? summary.color.toLowerCase() : "";
      return $(`<div class="summary-item">
			<span class="summary-label">${summary.label}</span>
			<div class="summary-value ${color}">${value}</div>
		</div>`);
    },
    print(doctype2, docname, print_format, letterhead, lang_code) {
      let w2 = window.open(frappe.urllib.get_full_url("/printview?doctype=" + encodeURIComponent(doctype2) + "&name=" + encodeURIComponent(docname) + "&trigger_print=1&format=" + encodeURIComponent(print_format) + "&no_letterhead=" + (letterhead ? "0" : "1") + "&letterhead=" + encodeURIComponent(letterhead) + (lang_code ? "&_lang=" + lang_code : "")));
      if (!w2) {
        frappe.msgprint(__("Please enable pop-ups"));
        return;
      }
    },
    get_clipboard_data(clipboard_paste_event) {
      let e2 = clipboard_paste_event;
      let clipboard_data = e2.clipboardData || window.clipboardData || e2.originalEvent.clipboardData;
      return clipboard_data.getData("Text");
    },
    add_custom_button(html, action, class_name = "", title = "", btn_type, wrapper, prepend) {
      if (!btn_type)
        btn_type = "btn-secondary";
      let button = $(`<button class="btn ${btn_type} btn-xs ${class_name}" title="${title}">${html}</button>`);
      button.click((event2) => {
        event2.stopPropagation();
        action && action(event2);
      });
      !prepend && button.appendTo(wrapper);
      prepend && wrapper.prepend(button);
    },
    sleep(time) {
      return new Promise((resolve) => setTimeout(resolve, time));
    },
    parse_array(array) {
      if (array && array.length !== 0) {
        return array;
      }
      return void 0;
    },
    range(start, end) {
      if (!end) {
        end = start;
        start = 0;
      }
      let arr = [];
      for (let i2 = start; i2 < end; i2++) {
        arr.push(i2);
      }
      return arr;
    },
    get_link_title(doctype2, name2) {
      if (!doctype2 || !name2 || !frappe._link_titles) {
        return;
      }
      return frappe._link_titles[doctype2 + "::" + name2];
    },
    add_link_title(doctype2, name2, value) {
      if (!doctype2 || !name2) {
        return;
      }
      if (!frappe._link_titles) {
        frappe._link_titles = {};
      }
      frappe._link_titles[doctype2 + "::" + name2] = value;
    },
    fetch_link_title(doctype2, name2) {
      try {
        return frappe.xcall("frappe.desk.search.get_link_title", {
          "doctype": doctype2,
          "docname": name2
        }).then((title) => {
          frappe.utils.add_link_title(doctype2, name2, title);
          return title;
        });
      } catch (error) {
        console.log("Error while fetching link title.");
        console.log(error);
        return Promise.resolve(name2);
      }
    },
    only_allow_num_decimal(input) {
      input.on("input", (e2) => {
        let self2 = $(e2.target);
        self2.val(self2.val().replace(/[^0-9.]/g, ""));
        if ((e2.which != 46 || self2.val().indexOf(".") != -1) && (e2.which < 48 || e2.which > 57)) {
          e2.preventDefault();
        }
      });
    },
    string_to_boolean(string) {
      switch (string.toLowerCase().trim()) {
        case "t":
        case "true":
        case "y":
        case "yes":
        case "1":
          return true;
        case "f":
        case "false":
        case "n":
        case "no":
        case "0":
        case null:
          return false;
        default:
          return string;
      }
    }
  });

  // frappe/public/js/frappe/event_emitter.js
  frappe.provide("frappe.utils");
  var EventEmitterMixin = {
    init() {
      this.jq = jQuery({});
    },
    trigger(evt, data) {
      !this.jq && this.init();
      this.jq.trigger(evt, data);
    },
    once(evt, handler) {
      !this.jq && this.init();
      this.jq.one(evt, (e2, data) => handler(data));
    },
    on(evt, handler) {
      !this.jq && this.init();
      this.jq.bind(evt, (e2, data) => handler(data));
    },
    off(evt, handler) {
      !this.jq && this.init();
      this.jq.unbind(evt, (e2, data) => handler(data));
    }
  };
  frappe.utils.make_event_emitter = function(object) {
    Object.assign(object, EventEmitterMixin);
    return object;
  };

  // frappe/public/js/frappe/router.js
  frappe.provide("frappe.views");
  frappe.re_route = { "#login": "" };
  frappe.route_titles = {};
  frappe.route_flags = {};
  frappe.route_history = [];
  frappe.view_factory = {};
  frappe.view_factories = [];
  frappe.route_options = null;
  frappe.route_hooks = {};
  $(window).on("hashchange", function(e2) {
    if (window.location.hash && !frappe.router.is_app_route(e2.currentTarget.pathname)) {
      let sub_path = frappe.router.get_sub_path(window.location.hash);
      frappe.router.push_state(sub_path);
      return false;
    }
  });
  window.addEventListener("popstate", (e2) => {
    frappe.router.route();
    e2.preventDefault();
    return false;
  });
  $("body").on("click", "a", function(e2) {
    let override = (route) => {
      e2.preventDefault();
      frappe.set_route(route);
      return false;
    };
    const href = e2.currentTarget.getAttribute("href");
    if (e2.currentTarget.getAttribute("onclick") || (e2.ctrlKey || e2.metaKey) || href === "#") {
      return;
    }
    if (href === "") {
      return override("/app");
    }
    if (href && href.startsWith("#")) {
      return override(e2.currentTarget.hash);
    }
    if (frappe.router.is_app_route(e2.currentTarget.pathname)) {
      frappe.route_options = {};
      let params = new URLSearchParams(e2.currentTarget.search);
      for (const [key2, value] of params) {
        frappe.route_options[key2] = value;
      }
      return override(e2.currentTarget.pathname + e2.currentTarget.hash);
    }
  });
  frappe.router = {
    current_route: null,
    routes: {},
    factory_views: ["form", "list", "report", "tree", "print", "dashboard"],
    list_views: ["list", "kanban", "report", "calendar", "tree", "gantt", "dashboard", "image", "inbox"],
    layout_mapped: {},
    is_app_route(path) {
      if (path.substr(0, 1) === "/")
        path = path.substr(1);
      path = path.split("/");
      if (path[0]) {
        return path[0] === "app";
      }
    },
    setup() {
      for (let doctype2 of frappe.boot.user.can_read) {
        this.routes[this.slug(doctype2)] = { doctype: doctype2 };
      }
      if (frappe.boot.doctype_layouts) {
        for (let doctype_layout of frappe.boot.doctype_layouts) {
          this.routes[this.slug(doctype_layout.name)] = { doctype: doctype_layout.document_type, doctype_layout: doctype_layout.name };
        }
      }
    },
    route() {
      if (!frappe.app)
        return;
      let sub_path = this.get_sub_path();
      if (this.re_route(sub_path))
        return;
      this.current_sub_path = sub_path;
      this.current_route = this.parse();
      this.set_history(sub_path);
      this.render();
      this.set_title(sub_path);
      this.trigger("change");
    },
    parse(route) {
      route = this.get_sub_path_string(route).split("/");
      if (!route)
        return [];
      route = $.map(route, this.decode_component);
      this.set_route_options_from_url(route);
      return this.convert_to_standard_route(route);
    },
    convert_to_standard_route(route) {
      let private_workspace = route[1] && `${route[1]}-${frappe.user.name.toLowerCase()}`;
      if (frappe.workspaces[route[0]]) {
        route = ["Workspaces", frappe.workspaces[route[0]].title];
      } else if (route[0] == "private" && frappe.workspaces[private_workspace]) {
        route = ["Workspaces", "private", frappe.workspaces[private_workspace].title];
      } else if (this.routes[route[0]]) {
        route = this.set_doctype_route(route);
      }
      return route;
    },
    doctype_route_exist(route) {
      route = this.get_sub_path_string(route).split("/");
      return this.routes[route[0]];
    },
    set_doctype_route(route) {
      let doctype_route = this.routes[route[0]];
      if (route[1]) {
        if (route[2] && route[1] === "view") {
          route = this.get_standard_route_for_list(route, doctype_route);
        } else {
          let docname = route[1];
          if (route.length > 2) {
            docname = route.slice(1).join("/");
          }
          route = ["Form", doctype_route.doctype, docname];
        }
      } else if (frappe.model.is_single(doctype_route.doctype)) {
        route = ["Form", doctype_route.doctype, doctype_route.doctype];
      } else {
        route = ["List", doctype_route.doctype, "List"];
      }
      if (doctype_route.doctype_layout) {
        this.doctype_layout = doctype_route.doctype_layout;
      }
      return route;
    },
    get_standard_route_for_list(route, doctype_route) {
      let standard_route;
      if (route[2].toLowerCase() === "tree") {
        standard_route = ["Tree", doctype_route.doctype];
      } else {
        standard_route = ["List", doctype_route.doctype, frappe.utils.to_title_case(route[2])];
        if (route[3])
          standard_route.push(...route.slice(3, route.length));
      }
      return standard_route;
    },
    set_history() {
      frappe.route_history.push(this.current_route);
      frappe.ui.hide_open_dialog();
    },
    render() {
      if (this.current_route[0]) {
        this.render_page();
      } else {
        frappe.views.pageview.show("");
      }
    },
    render_page() {
      const route = this.current_route;
      const factory = frappe.utils.to_title_case(route[0]);
      if (route[1] && frappe.views[factory + "Factory"]) {
        route[0] = factory;
        if (!frappe.view_factory[factory]) {
          frappe.view_factory[factory] = new frappe.views[factory + "Factory"]();
        }
        frappe.view_factory[factory].show();
      } else {
        const route_name = frappe.utils.xss_sanitise(route[0]);
        if (frappe.views.pageview) {
          frappe.views.pageview.show(route_name);
        }
      }
    },
    re_route(sub_path) {
      if (frappe.re_route[sub_path] !== void 0) {
        const re_route_val = this.get_sub_path(frappe.re_route[sub_path]);
        if (re_route_val === this.current_sub_path) {
          window.history.back();
        } else {
          frappe.set_route(re_route_val);
        }
        return true;
      }
    },
    set_title(sub_path) {
      if (frappe.route_titles[sub_path]) {
        frappe.utils.set_title(frappe.route_titles[sub_path]);
      }
    },
    set_route() {
      let route = Array.from(arguments);
      return new Promise((resolve) => {
        route = this.get_route_from_arguments(route);
        route = this.convert_from_standard_route(route);
        let sub_path = this.make_url(route);
        this.push_state(sub_path);
        setTimeout(() => {
          frappe.after_ajax && frappe.after_ajax(() => {
            resolve();
          });
        }, 100);
      }).finally(() => frappe.route_flags = {});
    },
    get_route_from_arguments(route) {
      if (route.length === 1 && $.isArray(route[0])) {
        route = route[0];
      }
      if (route.length === 1 && route[0] && route[0].includes("/")) {
        route = $.map(route[0].split("/"), this.decode_component);
      }
      if (route && route[0] == "") {
        route.shift();
      }
      if (route && ["desk", "app"].includes(route[0])) {
        route.shift();
      }
      return route;
    },
    convert_from_standard_route(route) {
      const view = route[0] ? route[0].toLowerCase() : "";
      let new_route = route;
      if (view === "list") {
        if (route[2] && route[2] !== "list" && !$.isPlainObject(route[2])) {
          new_route = [this.slug(route[1]), "view", route[2].toLowerCase()];
          if (route[3])
            new_route.push(...route.slice(3, route.length));
        } else {
          if ($.isPlainObject(route[2])) {
            frappe.route_options = route[2];
          }
          new_route = [this.slug(route[1])];
        }
      } else if (view === "form") {
        new_route = [this.slug(route[1])];
        if (route[2]) {
          new_route.push(route[2]);
        }
      } else if (view === "tree") {
        new_route = [this.slug(route[1]), "view", "tree"];
      }
      return new_route;
    },
    slug_parts(route) {
      if (route[0] && this.factory_views.includes(route[0].toLowerCase())) {
        route[0] = route[0].toLowerCase();
        route[1] = this.slug(route[1]);
      }
      return route;
    },
    make_url(params) {
      let path_string = $.map(params, function(a2) {
        if ($.isPlainObject(a2)) {
          frappe.route_options = a2;
          return null;
        } else {
          a2 = String(a2);
          if (a2 && a2.match(/[%'"#\s\t]/)) {
            a2 = encodeURIComponent(a2);
          }
          return a2;
        }
      }).join("/");
      let private_home = frappe.workspaces[`home-${frappe.user.name.toLowerCase()}`];
      let default_page = private_home ? "private/home" : frappe.workspaces["home"] ? "home" : Object.keys(frappe.workspaces)[0];
      return "/app/" + (path_string || default_page);
    },
    push_state(url) {
      if (window.location.pathname !== url) {
        const method = frappe.route_flags.replace_route ? "replaceState" : "pushState";
        history[method](null, null, url);
        this.route();
      }
    },
    get_sub_path_string(route) {
      if (!route) {
        route = window.location.pathname;
        if (route.includes("app#")) {
          route = window.location.hash;
        }
      }
      return this.strip_prefix(route);
    },
    strip_prefix(route) {
      if (route.substr(0, 1) == "/")
        route = route.substr(1);
      if (route.startsWith("app/"))
        route = route.substr(4);
      if (route == "app")
        route = route.substr(4);
      if (route.substr(0, 1) == "/")
        route = route.substr(1);
      if (route.substr(0, 1) == "#")
        route = route.substr(1);
      if (route.substr(0, 1) == "!")
        route = route.substr(1);
      return route;
    },
    get_sub_path(route) {
      var sub_path = this.get_sub_path_string(route);
      route = $.map(sub_path.split("/"), this.decode_component).join("/");
      return route;
    },
    set_route_options_from_url(route) {
      var last_part = route[route.length - 1];
      if (last_part.indexOf("?") < last_part.indexOf("=")) {
        let parts = last_part.split("?");
        route[route.length - 1] = parts[0];
        let query_params = frappe.utils.get_query_params(parts[1]);
        frappe.route_options = $.extend(frappe.route_options || {}, query_params);
      }
    },
    decode_component(r2) {
      try {
        return decodeURIComponent(r2);
      } catch (e2) {
        if (e2 instanceof URIError) {
          return r2;
        } else {
          throw e2;
        }
      }
    },
    slug(name2) {
      return name2.toLowerCase().replace(/ /g, "-");
    }
  };
  frappe.get_route = () => frappe.router.current_route;
  frappe.get_route_str = () => frappe.router.current_route.join("/");
  frappe.set_route = function() {
    return frappe.router.set_route.apply(frappe.router, arguments);
  };
  frappe.get_prev_route = function() {
    if (frappe.route_history && frappe.route_history.length > 1) {
      return frappe.route_history[frappe.route_history.length - 2];
    } else {
      return [];
    }
  };
  frappe.set_re_route = function() {
    var tmp = frappe.router.get_sub_path();
    frappe.set_route.apply(null, arguments);
    frappe.re_route[tmp] = frappe.router.get_sub_path();
  };
  frappe.has_route_options = function() {
    return Boolean(Object.keys(frappe.route_options || {}).length);
  };
  frappe.utils.make_event_emitter(frappe.router);

  // frappe/public/js/frappe/router_history.js
  frappe.route_history_queue = [];
  var routes_to_skip = ["Form", "social", "setup-wizard", "recorder"];
  var save_routes = frappe.utils.debounce(() => {
    if (frappe.session.user === "Guest")
      return;
    const routes = frappe.route_history_queue;
    if (!routes.length)
      return;
    frappe.route_history_queue = [];
    frappe.xcall("frappe.desk.doctype.route_history.route_history.deferred_insert", {
      "routes": routes
    }).catch(() => {
      frappe.route_history_queue.concat(routes);
    });
  }, 1e4);
  frappe.router.on("change", () => {
    const route = frappe.get_route();
    if (is_route_useful(route)) {
      frappe.route_history_queue.push({
        "creation": frappe.datetime.now_datetime(),
        "route": frappe.get_route_str()
      });
      save_routes();
    }
  });
  function is_route_useful(route) {
    if (!route[1]) {
      return false;
    } else if (route[0] === "List" && !route[2] || routes_to_skip.includes(route[0])) {
      return false;
    } else {
      return true;
    }
  }

  // frappe/public/js/frappe/defaults.js
  frappe.defaults = {
    get_user_default: function(key2) {
      var defaults = frappe.boot.user.defaults;
      var d2 = defaults[key2];
      if (!d2 && frappe.defaults.is_a_user_permission_key(key2))
        d2 = defaults[frappe.model.scrub(key2)];
      if ($.isArray(d2))
        d2 = d2[0];
      if (!frappe.defaults.in_user_permission(key2, d2)) {
        return;
      }
      return d2;
    },
    get_user_defaults: function(key2) {
      var defaults = frappe.boot.user.defaults;
      var d2 = defaults[key2];
      if (frappe.defaults.is_a_user_permission_key(key2)) {
        if (d2 && $.isArray(d2) && d2.length === 1) {
          d2 = d2[0];
        } else {
          d2 = defaults[key2] || defaults[frappe.model.scrub(key2)];
        }
      }
      if (!$.isArray(d2))
        d2 = [d2];
      d2.filter((item) => {
        if (frappe.defaults.in_user_permission(key2, item)) {
          return item;
        }
      });
      return d2;
    },
    get_global_default: function(key2) {
      var d2 = frappe.sys_defaults[key2];
      if ($.isArray(d2))
        d2 = d2[0];
      return d2;
    },
    get_global_defaults: function(key2) {
      var d2 = frappe.sys_defaults[key2];
      if (!$.isArray(d2))
        d2 = [d2];
      return d2;
    },
    set_default: function(key2, value, callback) {
      if (typeof value !== "string")
        value = JSON.stringify(value);
      frappe.boot.user.defaults[key2] = value;
      return frappe.call({
        method: "frappe.client.set_default",
        args: {
          key: key2,
          value
        },
        callback: callback || function(r2) {
        }
      });
    },
    set_user_default_local: function(key2, value) {
      frappe.boot.user.defaults[key2] = value;
    },
    get_default: function(key2) {
      var defaults = frappe.boot.user.defaults;
      var value = defaults[key2];
      if (frappe.defaults.is_a_user_permission_key(key2)) {
        if (value && $.isArray(value) && value.length === 1) {
          value = value[0];
        } else {
          value = defaults[frappe.model.scrub(key2)];
        }
      }
      if (!frappe.defaults.in_user_permission(key2, value)) {
        return;
      }
      if (value) {
        try {
          return JSON.parse(value);
        } catch (e2) {
          return value;
        }
      }
    },
    is_a_user_permission_key: function(key2) {
      return key2.indexOf(":") === -1 && key2 !== frappe.model.scrub(key2);
    },
    in_user_permission: function(key2, value) {
      let user_permission = this.get_user_permissions()[frappe.model.unscrub(key2)];
      if (user_permission && user_permission.length) {
        let doc_found = user_permission.some((perm) => {
          return perm.doc === value;
        });
        return doc_found;
      } else {
        return true;
      }
    },
    get_user_permissions: function() {
      return this._user_permissions || {};
    },
    update_user_permissions: function() {
      const method = "frappe.core.doctype.user_permission.user_permission.get_user_permissions";
      frappe.call(method).then((r2) => {
        if (r2.message) {
          this._user_permissions = Object.assign({}, r2.message);
        }
      });
    }
  };

  // frappe/public/js/frappe/roles_editor.js
  frappe.RoleEditor = class {
    constructor(wrapper, frm, disable) {
      this.frm = frm;
      this.wrapper = wrapper;
      this.disable = disable;
      let user_roles = this.frm.doc.roles.map((a2) => a2.role);
      this.multicheck = frappe.ui.form.make_control({
        parent: wrapper,
        df: {
          fieldname: "roles",
          fieldtype: "MultiCheck",
          select_all: true,
          columns: 3,
          get_data: () => {
            return frappe.xcall("frappe.core.doctype.user.user.get_all_roles").then((roles) => {
              return roles.map((role) => {
                return {
                  label: __(role),
                  value: role,
                  checked: user_roles.includes(role)
                };
              });
            });
          },
          on_change: () => {
            this.set_roles_in_table();
            this.frm.dirty();
          }
        },
        render_input: true
      });
      let original_func = this.multicheck.make_checkboxes;
      this.multicheck.make_checkboxes = () => {
        original_func.call(this.multicheck);
        this.multicheck.$wrapper.find(".label-area").click((e2) => {
          let role = $(e2.target).data("unit");
          role && this.show_permissions(role);
          e2.preventDefault();
        });
      };
    }
    set_enable_disable() {
      $(this.wrapper).find('input[type="checkbox"]').attr("disabled", this.disable ? true : false);
    }
    show_permissions(role) {
      if (!this.perm_dialog) {
        this.make_perm_dialog();
      }
      $(this.perm_dialog.body).empty();
      return frappe.xcall("frappe.core.doctype.user.user.get_perm_info", { role }).then((permissions) => {
        const $body2 = $(this.perm_dialog.body);
        if (!permissions.length) {
          $body2.append(`<div class="text-muted text-center padding">
						${__("{0} role does not have permission on any doctype", [role])}
					</div>`);
        } else {
          $body2.append(`
						<table class="user-perm">
							<thead>
								<tr>
									<th> ${__("Document Type")} </th>
									<th> ${__("Level")} </th>
									${frappe.perm.rights.map((p2) => `<th> ${frappe.unscrub(p2)}</th>`).join("")}
								</tr>
							</thead>
							<tbody></tbody>
						</table>
					`);
          permissions.forEach((perm) => {
            $body2.find("tbody").append(`
							<tr>
								<td>${perm.parent}</td>
								<td>${perm.permlevel}</td>
								${frappe.perm.rights.map((p2) => `<td class="text-muted bold">${perm[p2] ? frappe.utils.icon("check", "xs") : "-"}</td>`).join("")}
							</tr>
						`);
          });
        }
        this.perm_dialog.set_title(role);
        this.perm_dialog.show();
      });
    }
    make_perm_dialog() {
      this.perm_dialog = new frappe.ui.Dialog({
        title: __("Role Permissions")
      });
      this.perm_dialog.$wrapper.find(".modal-dialog").css("width", "1200px").css("max-width", "80vw");
    }
    show() {
      let user_roles = this.frm.doc.roles.map((a2) => a2.role);
      this.multicheck.selected_options = user_roles;
      this.multicheck.refresh_input();
      this.set_enable_disable();
    }
    set_roles_in_table() {
      let roles = this.frm.doc.roles || [];
      let checked_options = this.multicheck.get_checked_options();
      roles.map((role_doc) => {
        if (!checked_options.includes(role_doc.role)) {
          frappe.model.clear_doc(role_doc.doctype, role_doc.name);
        }
      });
      checked_options.map((role) => {
        if (!roles.find((d2) => d2.role === role)) {
          let role_doc = frappe.model.add_child(this.frm.doc, "Has Role", "roles");
          role_doc.role = role;
        }
      });
    }
    get_roles() {
      return {
        checked_roles: this.multicheck.get_checked_options(),
        unchecked_roles: this.multicheck.get_unchecked_options()
      };
    }
  };

  // frappe/public/js/frappe/module_editor.js
  frappe.ModuleEditor = class ModuleEditor {
    constructor(frm, wrapper) {
      this.frm = frm;
      this.wrapper = wrapper;
      const block_modules = this.frm.doc.block_modules.map((row) => row.module);
      this.multicheck = frappe.ui.form.make_control({
        parent: wrapper,
        df: {
          fieldname: "block_modules",
          fieldtype: "MultiCheck",
          select_all: true,
          columns: 3,
          get_data: () => {
            return this.frm.doc.__onload.all_modules.map((module2) => {
              return {
                label: __(module2),
                value: module2,
                checked: !block_modules.includes(module2)
              };
            });
          },
          on_change: () => {
            this.set_modules_in_table();
            this.frm.dirty();
          }
        },
        render_input: true
      });
    }
    show() {
      const block_modules = this.frm.doc.block_modules.map((row) => row.module);
      const all_modules = this.frm.doc.__onload.all_modules;
      this.multicheck.selected_options = all_modules.filter((m2) => !block_modules.includes(m2));
      this.multicheck.refresh_input();
    }
    set_modules_in_table() {
      let block_modules = this.frm.doc.block_modules || [];
      let unchecked_options = this.multicheck.get_unchecked_options();
      block_modules.map((module_doc) => {
        if (!unchecked_options.includes(module_doc.module)) {
          frappe.model.clear_doc(module_doc.doctype, module_doc.name);
        }
      });
      unchecked_options.map((module2) => {
        if (!block_modules.find((d2) => d2.module === module2)) {
          let module_doc = frappe.model.add_child(this.frm.doc, "Block Module", "block_modules");
          module_doc.module = module2;
        }
      });
    }
  };

  // frappe/public/js/frappe/microtemplate.js
  frappe.template = { compiled: {}, debug: {} };
  frappe.template.compile = function(str, name2) {
    var key2 = name2 || str;
    if (!frappe.template.compiled[key2]) {
      let replacer2 = function(match, p1, p2, offset, string) {
        var i2 = frappe.utils.get_random(3);
        var len = frappe.utils.get_random(3);
        return "{% for (var " + i2 + "=0, " + len + "=" + p2 + ".length; " + i2 + "<" + len + "; " + i2 + "++) { var " + p1 + " = " + p2 + "[" + i2 + "]; " + p1 + "._index = " + i2 + "; %}";
      };
      var replacer = replacer2;
      if (str.indexOf("'") !== -1) {
        str.replace(/'/g, "\\'");
      }
      str = str.replace(/{{/g, "{%=").replace(/}}/g, "%}");
      str = str.replace(/{%\s?if\s?\s?not\s?([^\(][^%{]+)\s?%}/g, "{% if (! $1) { %}");
      str = str.replace(/{%\s?if\s?([^\(][^%{]+)\s?%}/g, "{% if ($1) { %}");
      str = str.replace(/{%\s?for\s([a-z._]+)\sin\s([a-z._]+)\s?%}/g, replacer2);
      str = str.replace(/{%\s?endif\s?%}/g, "{% }; %}");
      str = str.replace(/{%\s?else\s?%}/g, "{% } else { %}");
      str = str.replace(/{%\s?endfor\s?%}/g, "{% }; %}");
      var fn_str = "var _p=[],print=function(){_p.push.apply(_p,arguments)};with(obj){\n_p.push('" + str.replace(/[\r\t\n]/g, " ").split("{%").join("	").replace(/((^|%})[^\t]*)'/g, "$1\r").replace(/\t=(.*?)%}/g, "',$1,'").split("	").join("');\n").split("%}").join("\n_p.push('").split("\r").join("\\'") + "');}return _p.join('');";
      frappe.template.debug[name2] = fn_str;
      try {
        frappe.template.compiled[key2] = new Function("obj", fn_str);
      } catch (e2) {
        console.log("Error in Template:");
        console.log(fn_str);
        if (e2.lineNumber) {
          console.log("Error in Line " + e2.lineNumber + ", Col " + e2.columnNumber + ":");
          console.log(fn_str.split("\n")[e2.lineNumber - 1]);
        }
      }
    }
    return frappe.template.compiled[key2];
  };
  frappe.render = function(str, data, name2) {
    return frappe.template.compile(str, name2)(data);
  };
  frappe.render_template = function(name2, data) {
    if (name2.indexOf(" ") !== -1) {
      var template = name2;
    } else {
      var template = frappe.templates[name2];
    }
    if (data === void 0) {
      data = {};
    }
    if (!template) {
      frappe.throw(`Template <b>${name2}</b> not found.`);
    }
    return frappe.render(template, data, name2);
  };
  frappe.render_grid = function(opts) {
    if (opts.grid) {
      opts.columns = opts.grid.getColumns();
      opts.data = opts.grid.getData().getItems();
    }
    if (opts.print_settings && opts.print_settings.orientation && opts.print_settings.orientation.toLowerCase() === "landscape") {
      opts.landscape = true;
    }
    if (opts.landscape == null) {
      if (opts.columns && opts.columns.length > 10) {
        opts.landscape = true;
      } else {
        opts.landscape = false;
      }
    }
    if (!opts.content) {
      opts.content = frappe.render_template(opts.template || "print_grid", opts);
    }
    opts.base_url = frappe.urllib.get_base_url();
    opts.print_css = frappe.boot.print_css;
    opts.lang = opts.lang || frappe.boot.lang, opts.layout_direction = opts.layout_direction || frappe.utils.is_rtl() ? "rtl" : "ltr";
    var html = frappe.render_template("print_template", opts);
    var w2 = window.open();
    if (!w2) {
      frappe.msgprint(__("Please enable pop-ups in your browser"));
    }
    w2.document.write(html);
    w2.document.close();
  }, frappe.render_tree = function(opts) {
    opts.base_url = frappe.urllib.get_base_url();
    opts.landscape = false;
    opts.print_css = frappe.boot.print_css;
    opts.print_format_css_path = frappe.assets.bundled_asset("print_format.bundle.css");
    var tree = frappe.render_template("print_tree", opts);
    var w2 = window.open();
    if (!w2) {
      frappe.msgprint(__("Please enable pop-ups in your browser"));
    }
    w2.document.write(tree);
    w2.document.close();
  };
  frappe.render_pdf = function(html, opts = {}) {
    var formData = new FormData();
    formData.append("html", html);
    if (opts.orientation) {
      formData.append("orientation", opts.orientation);
    }
    var blob = new Blob([], { type: "text/xml" });
    formData.append("blob", blob);
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "/api/method/frappe.utils.print_format.report_to_pdf");
    xhr.setRequestHeader("X-Frappe-CSRF-Token", frappe.csrf_token);
    xhr.responseType = "arraybuffer";
    xhr.onload = function(success) {
      if (this.status === 200) {
        var blob2 = new Blob([success.currentTarget.response], { type: "application/pdf" });
        var objectUrl = URL.createObjectURL(blob2);
        window.open(objectUrl);
      }
    };
    xhr.send(formData);
  };

  // frappe-html:/home/erpnext/erpnext/apps/frappe/frappe/public/js/frappe/ui/page.html
  frappe.templates["page"] = `<div class="page-head flex">
	<div class="container">
		<div class="row flex align-center page-head-content justify-between">
			<div class="col-md-4 col-sm-6 col-xs-8 page-title">
				<!-- <div class="title-image hide hidden-md hidden-lg"></div> -->
				<!-- title -->
				<span class="sidebar-toggle-btn">
					<svg class="icon icon-md sidebar-toggle-placeholder">
						<use xlink:href="#icon-menu"></use>
					</svg>
					<span class="sidebar-toggle-icon">
						<svg class="icon icon-md">
							<use xlink:href="#icon-sidebar-collapse">
							</use>
						</svg>
					</span>
				</span>
				<div class="flex fill-width title-area">
					<div>
						<div class="flex">
							<h3 class="ellipsis title-text"></h3>
							<span class="indicator-pill whitespace-nowrap"></span>
						</div>
						<div class="ellipsis sub-heading hide text-muted"></div>
					</div>
					<button class="btn btn-default more-button hide">
						<svg class="icon icon-sm">
							<use xlink:href="#icon-dot-horizontal">
							</use>
						</svg>
					</button>
				</div>
			</div>
			<div class="flex col page-actions justify-content-end">
				<!-- buttons -->
				<div class="custom-actions hide hidden-xs hidden-md"></div>
				<div class="standard-actions flex">
					<span class="page-icon-group hide hidden-xs hidden-sm"></span>
					<div class="menu-btn-group hide">
						<button type="button" class="btn btn-default icon-btn" data-toggle="dropdown" aria-expanded="false">
							<span>
								<span class="menu-btn-group-label">
									<svg class="icon icon-sm">
										<use xlink:href="#icon-dot-horizontal">
										</use>
									</svg>
								</span>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu"></ul>
					</div>
					<button class="btn btn-secondary btn-default btn-sm hide"></button>
					<div class="actions-btn-group hide">
						<button type="button" class="btn btn-primary btn-sm" data-toggle="dropdown" aria-expanded="false">
							<span class="hidden-xs">
								<span class="actions-btn-group-label">{%= __("Actions") %}</span>
								<svg class="icon icon-xs">
									<use xlink:href="#icon-select">
									</use>
								</svg>
							</span>
						</button>
						<ul class="dropdown-menu dropdown-menu-right" role="menu">
						</ul>
					</div>
					<button class="btn btn-primary btn-sm hide primary-action"></button>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container page-body">
	<div class="page-toolbar hide">
		<div class="container">
		</div>
	</div>
	<div class="page-wrapper">
		<div class="page-content">
			<div class="workflow-button-area btn-group pull-right hide"></div>
			<div class="clearfix"></div>
		</div>
	</div>
</div>`;

  // frappe/public/js/frappe/ui/page.js
  frappe.ui.make_app_page = function(opts) {
    opts.parent.page = new frappe.ui.Page(opts);
    return opts.parent.page;
  };
  frappe.ui.pages = {};
  frappe.ui.Page = class Page {
    constructor(opts) {
      $.extend(this, opts);
      this.set_document_title = true;
      this.buttons = {};
      this.fields_dict = {};
      this.views = {};
      this.make();
      frappe.ui.pages[frappe.get_route_str()] = this;
    }
    make() {
      this.wrapper = $(this.parent);
      this.add_main_section();
      this.setup_scroll_handler();
      this.setup_sidebar_toggle();
    }
    setup_scroll_handler() {
      let last_scroll = 0;
      window.addEventListener("scroll", frappe.utils.throttle(() => {
        $(".page-head").toggleClass("drop-shadow", !!document.documentElement.scrollTop);
        let current_scroll = document.documentElement.scrollTop;
        if (current_scroll > 0 && last_scroll <= current_scroll) {
          $(".page-head").css("top", "-15px");
        } else {
          $(".page-head").css("top", "var(--navbar-height)");
        }
        last_scroll = current_scroll;
      }), 500);
    }
    get_empty_state(title, message2, primary_action) {
      let $empty_state = $(`<div class="page-card-container">
			<div class="page-card">
				<div class="page-card-head">
					<span class="indicator blue">
						${title}</span>
				</div>
				<p>${message2}</p>
				<div>
					<button class="btn btn-primary btn-sm">${primary_action}</button>
				</div>
			</div>
		</div>`);
      return $empty_state;
    }
    load_lib(callback) {
      frappe.require(this.required_libs, callback);
    }
    add_main_section() {
      $(frappe.render_template("page", {})).appendTo(this.wrapper);
      if (this.single_column) {
        this.add_view("main", '<div class="row layout-main">					<div class="col-md-12 layout-main-section-wrapper">						<div class="layout-main-section"></div>						<div class="layout-footer hide"></div>					</div>				</div>');
      } else {
        this.add_view("main", `
				<div class="row layout-main">
					<div class="col-lg-2 layout-side-section"></div>
					<div class="col layout-main-section-wrapper">
						<div class="layout-main-section"></div>
						<div class="layout-footer hide"></div>
					</div>
				</div>
			`);
      }
      this.setup_page();
    }
    setup_page() {
      this.$title_area = this.wrapper.find(".title-area");
      this.$sub_title_area = this.wrapper.find("h6");
      if (this.title)
        this.set_title(this.title);
      if (this.icon)
        this.get_main_icon(this.icon);
      this.body = this.main = this.wrapper.find(".layout-main-section");
      this.container = this.wrapper.find(".page-body");
      this.sidebar = this.wrapper.find(".layout-side-section");
      this.footer = this.wrapper.find(".layout-footer");
      this.indicator = this.wrapper.find(".indicator-pill");
      this.page_actions = this.wrapper.find(".page-actions");
      this.btn_primary = this.page_actions.find(".primary-action");
      this.btn_secondary = this.page_actions.find(".btn-secondary");
      this.menu = this.page_actions.find(".menu-btn-group .dropdown-menu");
      this.menu_btn_group = this.page_actions.find(".menu-btn-group");
      this.actions = this.page_actions.find(".actions-btn-group .dropdown-menu");
      this.actions_btn_group = this.page_actions.find(".actions-btn-group");
      this.standard_actions = this.page_actions.find(".standard-actions");
      this.custom_actions = this.page_actions.find(".custom-actions");
      this.page_form = $('<div class="page-form row hide"></div>').prependTo(this.main);
      this.inner_toolbar = this.custom_actions;
      this.icon_group = this.page_actions.find(".page-icon-group");
      if (this.make_page) {
        this.make_page();
      }
      this.card_layout && this.main.addClass("frappe-card");
      let menu_btn = this.menu_btn_group.find("button");
      menu_btn.attr("title", __("Menu")).tooltip({ delay: { "show": 600, "hide": 100 } });
      frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(menu_btn, menu_btn.find(".menu-btn-group-label"));
      let action_btn = this.actions_btn_group.find("button");
      frappe.ui.keys.get_shortcut_group(this.page_actions[0]).add(action_btn, action_btn.find(".actions-btn-group-label"));
    }
    setup_sidebar_toggle() {
      let sidebar_toggle = $(".page-head").find(".sidebar-toggle-btn");
      let sidebar_wrapper = this.wrapper.find(".layout-side-section");
      if (this.disable_sidebar_toggle || !sidebar_wrapper.length) {
        sidebar_toggle.remove();
      } else {
        sidebar_toggle.attr("title", __("Toggle Sidebar")).tooltip({
          delay: { "show": 600, "hide": 100 },
          trigger: "hover"
        });
        sidebar_toggle.click(() => {
          if (frappe.utils.is_xs() || frappe.utils.is_sm()) {
            this.setup_overlay_sidebar();
          } else {
            sidebar_wrapper.toggle();
          }
          $(document.body).trigger("toggleSidebar");
          this.update_sidebar_icon();
        });
      }
    }
    setup_overlay_sidebar() {
      let overlay_sidebar = this.sidebar.find(".overlay-sidebar").addClass("opened");
      $('<div class="close-sidebar">').hide().appendTo(this.sidebar).fadeIn();
      let scroll_container = $("html").css("overflow-y", "hidden");
      this.sidebar.find(".close-sidebar").on("click", (e2) => close_sidebar(e2));
      this.sidebar.on("click", "button:not(.dropdown-toggle)", (e2) => close_sidebar(e2));
      let close_sidebar = () => {
        scroll_container.css("overflow-y", "");
        this.sidebar.find("div.close-sidebar").fadeOut(() => {
          overlay_sidebar.removeClass("opened").find(".dropdown-toggle").removeClass("text-muted");
        });
      };
    }
    update_sidebar_icon() {
      let sidebar_toggle = $(".page-head").find(".sidebar-toggle-btn");
      let sidebar_toggle_icon = sidebar_toggle.find(".sidebar-toggle-icon");
      let sidebar_wrapper = this.wrapper.find(".layout-side-section");
      let is_sidebar_visible = $(sidebar_wrapper).is(":visible");
      sidebar_toggle_icon.html(frappe.utils.icon(is_sidebar_visible ? "sidebar-collapse" : "sidebar-expand", "md"));
    }
    set_indicator(label, color) {
      this.clear_indicator().removeClass("hide").html(`<span>${label}</span>`).addClass(color);
    }
    add_action_icon(icon, click, css_class = "", tooltip_label) {
      const button = $(`
			<button class="text-muted btn btn-default ${css_class} icon-btn">
				${frappe.utils.icon(icon)}
			</button>
		`);
      button.appendTo(this.icon_group.removeClass("hide"));
      button.click(click);
      button.attr("title", __(tooltip_label || frappe.unscrub(icon))).tooltip({ delay: { "show": 600, "hide": 100 }, trigger: "hover" });
      return button;
    }
    clear_indicator() {
      return this.indicator.removeClass().addClass("indicator-pill whitespace-nowrap hide");
    }
    get_icon_label(icon, label) {
      let icon_name = icon;
      let size = "xs";
      if (typeof icon === "object") {
        icon_name = icon.icon;
        size = icon.size || "xs";
      }
      return `${icon ? frappe.utils.icon(icon_name, size) : ""} <span class="hidden-xs"> ${__(label)} </span>`;
    }
    set_action(btn, opts) {
      let me = this;
      if (opts.icon) {
        opts.label = this.get_icon_label(opts.icon, opts.label);
      }
      this.clear_action_of(btn);
      btn.removeClass("hide").prop("disabled", false).html(opts.label).on("click", function() {
        let response = opts.click.apply(this, [btn]);
        me.btn_disable_enable(btn, response);
      });
      if (opts.working_label) {
        btn.attr("data-working-label", opts.working_label);
      }
      let text_span = btn.find("span");
      frappe.ui.keys.get_shortcut_group(this).add(btn, text_span.length ? text_span : btn);
    }
    set_primary_action(label, click, icon, working_label) {
      this.set_action(this.btn_primary, {
        label,
        click,
        icon,
        working_label
      });
      return this.btn_primary;
    }
    set_secondary_action(label, click, icon, working_label) {
      this.set_action(this.btn_secondary, {
        label,
        click,
        icon,
        working_label
      });
      return this.btn_secondary;
    }
    clear_action_of(btn) {
      btn.addClass("hide").unbind("click").removeAttr("data-working-label");
    }
    clear_primary_action() {
      this.clear_action_of(this.btn_primary);
    }
    clear_secondary_action() {
      this.clear_action_of(this.btn_secondary);
    }
    clear_actions() {
      this.clear_primary_action();
      this.clear_secondary_action();
    }
    clear_custom_actions() {
      this.custom_actions.addClass("hide").empty();
    }
    clear_icons() {
      this.icon_group.addClass("hide").empty();
    }
    add_menu_item(label, click, standard, shortcut) {
      return this.add_dropdown_item({
        label,
        click,
        standard,
        parent: this.menu,
        shortcut
      });
    }
    add_custom_menu_item(parent, label, click, standard, shortcut, icon = null) {
      return this.add_dropdown_item({
        label,
        click,
        standard,
        parent,
        shortcut,
        icon
      });
    }
    clear_menu() {
      this.clear_btn_group(this.menu);
    }
    show_menu() {
      this.menu_btn_group.removeClass("hide");
    }
    hide_menu() {
      this.menu_btn_group.addClass("hide");
    }
    show_icon_group() {
      this.icon_group.removeClass("hide");
    }
    hide_icon_group() {
      this.icon_group.addClass("hide");
    }
    show_actions_menu() {
      this.actions_btn_group.removeClass("hide");
    }
    hide_actions_menu() {
      this.actions_btn_group.addClass("hide");
    }
    add_action_item(label, click, standard) {
      return this.add_dropdown_item({
        label,
        click,
        standard,
        parent: this.actions
      });
    }
    add_actions_menu_item(label, click, standard, shortcut) {
      return this.add_dropdown_item({
        label,
        click,
        standard,
        shortcut,
        parent: this.actions,
        show_parent: false
      });
    }
    clear_actions_menu() {
      this.clear_btn_group(this.actions);
    }
    add_dropdown_item({ label, click, standard, parent, shortcut, show_parent = true, icon = null }) {
      if (show_parent) {
        parent.parent().removeClass("hide");
      }
      let $link = this.is_in_group_button_dropdown(parent, "li > a.grey-link", label);
      if ($link)
        return $link;
      let $li;
      let $icon = ``;
      if (icon) {
        $icon = `<span class="menu-item-icon">${frappe.utils.icon(icon)}</span>`;
      }
      if (shortcut) {
        let shortcut_obj = this.prepare_shortcut_obj(shortcut, click, label);
        $li = $(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${$icon}
						<span class="menu-item-label">${label}</span>
						<kbd class="pull-right">
							<span>${shortcut_obj.shortcut_label}</span>
						</kbd>
					</a>
				</li>
			`);
        frappe.ui.keys.add_shortcut(shortcut_obj);
      } else {
        $li = $(`
				<li>
					<a class="grey-link dropdown-item" href="#" onClick="return false;">
						${$icon}
						<span class="menu-item-label">${label}</span>
					</a>
				</li>
			`);
      }
      $link = $li.find("a").on("click", click);
      if (standard) {
        $li.appendTo(parent);
      } else {
        this.divider = parent.find(".dropdown-divider");
        if (!this.divider.length) {
          this.divider = $('<li class="dropdown-divider user-action"></li>').prependTo(parent);
        }
        $li.addClass("user-action").insertBefore(this.divider);
      }
      frappe.ui.keys.get_shortcut_group(parent.get(0)).add($link, $link.find(".menu-item-label"));
      return $link;
    }
    prepare_shortcut_obj(shortcut, click, label) {
      let shortcut_obj;
      if (typeof shortcut === "string") {
        shortcut_obj = { shortcut };
      } else {
        shortcut_obj = shortcut;
      }
      if (frappe.utils.is_mac()) {
        shortcut_obj.shortcut_label = shortcut_obj.shortcut.replace("Ctrl", "\u2318");
      } else {
        shortcut_obj.shortcut_label = shortcut_obj.shortcut;
      }
      shortcut_obj.shortcut = shortcut_obj.shortcut.toLowerCase();
      if (!shortcut_obj.action) {
        shortcut_obj.action = click;
      }
      if (!shortcut_obj.description) {
        shortcut_obj.description = label;
      }
      shortcut_obj.page = this;
      return shortcut_obj;
    }
    is_in_group_button_dropdown(parent, selector, label) {
      if (!selector)
        selector = "li";
      if (!label || !parent)
        return false;
      const result = $(parent).find(`${selector}:contains('${label}')`).filter(function() {
        let item = $(this).html();
        return $(item).attr("data-label") === label;
      });
      return result.length > 0 && result;
    }
    clear_btn_group(parent) {
      parent.empty();
      parent.parent().addClass("hide");
    }
    add_divider() {
      return $('<li class="dropdown-divider"></li>').appendTo(this.menu);
    }
    get_or_add_inner_group_button(label) {
      var $group = this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(label)}"]`);
      if (!$group.length) {
        $group = $(`<div class="inner-group-button" data-label="${encodeURIComponent(label)}">
					<button type="button" class="btn btn-default ellipsis" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
						${label}
						${frappe.utils.icon("select", "xs")}
					</button>
					<div role="menu" class="dropdown-menu"></div>
				</div>`).appendTo(this.inner_toolbar);
      }
      return $group;
    }
    get_inner_group_button(label) {
      return this.inner_toolbar.find(`.inner-group-button[data-label="${encodeURIComponent(label)}"]`);
    }
    set_inner_btn_group_as_primary(label) {
      this.get_or_add_inner_group_button(label).find("button").removeClass("btn-default").addClass("btn-primary");
    }
    btn_disable_enable(btn, response) {
      if (response && response.then) {
        btn.prop("disabled", true);
        response.then(() => {
          btn.prop("disabled", false);
        });
      } else if (response && response.always) {
        btn.prop("disabled", true);
        response.always(() => {
          btn.prop("disabled", false);
        });
      }
    }
    add_inner_button(label, action, group, type = "default") {
      var me = this;
      let _action = function() {
        let btn = $(this);
        let response = action();
        me.btn_disable_enable(btn, response);
      };
      if (group) {
        var $group = this.get_or_add_inner_group_button(group);
        $(this.inner_toolbar).removeClass("hide");
        if (!this.is_in_group_button_dropdown($group.find(".dropdown-menu"), "a", label)) {
          return $(`<a class="dropdown-item" href="#" onclick="return false;" data-label="${encodeURIComponent(label)}">${label}</a>`).on("click", _action).appendTo($group.find(".dropdown-menu"));
        }
      } else {
        let button = this.inner_toolbar.find(`button[data-label="${encodeURIComponent(label)}"]`);
        if (button.length == 0) {
          button = $(`<button data-label="${encodeURIComponent(label)}" class="btn btn-${type} ellipsis">
					${__(label)}
				</button>`);
          button.on("click", _action);
          button.appendTo(this.inner_toolbar.removeClass("hide"));
        }
        return button;
      }
    }
    remove_inner_button(label, group) {
      if (typeof label === "string") {
        label = [label];
      }
      label = label.map((l2) => __(l2));
      if (group) {
        var $group = this.get_inner_group_button(__(group));
        if ($group.length) {
          $group.find(`.dropdown-item[data-label="${encodeURIComponent(label)}"]`).remove();
        }
        if ($group.find(".dropdown-item").length === 0)
          $group.remove();
      } else {
        this.inner_toolbar.find(`button[data-label="${encodeURIComponent(label)}"]`).remove();
      }
    }
    change_inner_button_type(label, group, type) {
      let btn;
      if (group) {
        var $group = this.get_inner_group_button(__(group));
        if ($group.length) {
          btn = $group.find(`.dropdown-item[data-label="${encodeURIComponent(label)}"]`);
        }
      } else {
        btn = this.inner_toolbar.find(`button[data-label="${encodeURIComponent(label)}"]`);
      }
      if (btn) {
        btn.removeClass().addClass(`btn btn-${type} ellipsis`);
      }
    }
    add_inner_message(message2) {
      let $message = $(`<span class='inner-page-message text-muted small'>${message2}</div>`);
      this.inner_toolbar.find(".inner-page-message").remove();
      this.inner_toolbar.removeClass("hide").prepend($message);
      return $message;
    }
    clear_inner_toolbar() {
      this.inner_toolbar.empty().addClass("hide");
    }
    add_sidebar_item(label, action, insert_after, prepend) {
      var parent = this.sidebar.find(".sidebar-menu.standard-actions");
      var li = $("<li>");
      var link = $("<a>").html(label).on("click", action).appendTo(li);
      if (insert_after) {
        li.insertAfter(parent.find(insert_after));
      } else {
        if (prepend) {
          li.prependTo(parent);
        } else {
          li.appendTo(parent);
        }
      }
      return link;
    }
    clear_user_actions() {
      this.menu.find(".user-action").remove();
    }
    get_title_area() {
      return this.$title_area;
    }
    set_title(title, icon = null, strip2 = true, tab_title = "") {
      if (!title)
        title = "";
      if (strip2) {
        title = strip_html(title);
      }
      this.title = title;
      frappe.utils.set_title(tab_title || title);
      if (icon) {
        title = `${frappe.utils.icon(icon)} ${title}`;
      }
      let title_wrapper = this.$title_area.find(".title-text");
      title_wrapper.html(title);
      title_wrapper.attr("title", this.title);
    }
    set_title_sub(txt2) {
      this.$sub_title_area.html(txt2).toggleClass("hide", !!!txt2);
    }
    get_main_icon(icon) {
      return this.$title_area.find(".title-icon").html('<i class="' + icon + ' fa-fw"></i> ').toggle(true);
    }
    add_help_button(txt2) {
    }
    add_button(label, click, opts) {
      if (!opts)
        opts = {};
      let button = $(`<button
			class="btn ${opts.btn_class || "btn-default"} ${opts.btn_size || "btn-sm"} ellipsis">
				${opts.icon ? frappe.utils.icon(opts.icon) : ""}
				${label}
		</button>`);
      let menu_item = this.add_menu_item(label, click, false);
      menu_item.parent().addClass("hidden-xl");
      button.appendTo(this.custom_actions);
      button.on("click", click);
      this.custom_actions.removeClass("hide");
      return button;
    }
    add_custom_button_group(label, icon, parent) {
      let dropdown_label = `<span class="hidden-xs">
			<span class="custom-btn-group-label">${__(label)}</span>
			${frappe.utils.icon("select", "xs")}
		</span>`;
      if (icon) {
        dropdown_label = `<span class="hidden-xs">
				${frappe.utils.icon(icon)}
				<span class="custom-btn-group-label">${__(label)}</span>
				${frappe.utils.icon("select", "xs")}
			</span>
			<span class="visible-xs">
				${frappe.utils.icon(icon)}
			</span>`;
      }
      let custom_btn_group = $(`
			<div class="custom-btn-group">
				<button type="button" class="btn btn-default btn-sm ellipsis" data-toggle="dropdown" aria-expanded="false">
					${dropdown_label}
				</button>
				<ul class="dropdown-menu" role="menu"></ul>
			</div>
		`);
      if (!parent)
        parent = this.custom_actions;
      parent.removeClass("hide").append(custom_btn_group);
      return custom_btn_group.find(".dropdown-menu");
    }
    add_dropdown_button(parent, label, click, icon) {
      frappe.ui.toolbar.add_dropdown_button(parent, label, click, icon);
    }
    add_label(label) {
      this.show_form();
      return $("<label class='col-md-1 page-only-label'>" + label + " </label>").appendTo(this.page_form);
    }
    add_select(label, options) {
      var field = this.add_field({ label, fieldtype: "Select" });
      return field.$wrapper.find("select").empty().add_options(options);
    }
    add_data(label) {
      var field = this.add_field({ label, fieldtype: "Data" });
      return field.$wrapper.find("input").attr("placeholder", label);
    }
    add_date(label, date) {
      var field = this.add_field({ label, fieldtype: "Date", "default": date });
      return field.$wrapper.find("input").attr("placeholder", label);
    }
    add_check(label) {
      return $("<div class='checkbox'><label><input type='checkbox'>" + label + "</label></div>").appendTo(this.page_form).find("input");
    }
    add_break() {
      this.page_form.append('<div class="clearfix invisible-xs"></div>');
    }
    add_field(df, parent) {
      this.show_form();
      if (!df.placeholder) {
        df.placeholder = df.label;
      }
      df.input_class = "input-xs";
      var f3 = frappe.ui.form.make_control({
        df,
        parent: parent || this.page_form,
        only_input: df.fieldtype == "Check" ? false : true
      });
      f3.refresh();
      $(f3.wrapper).addClass("col-md-2").attr("title", __(df.label)).tooltip({
        delay: { "show": 600, "hide": 100 },
        trigger: "hover"
      });
      if (df.fieldtype == "HTML") {
        return;
      }
      if (!f3.$input)
        f3.make_input();
      f3.$input.attr("placeholder", __(df.label));
      if (df.fieldtype === "Check") {
        $(f3.wrapper).find(":first-child").removeClass("col-md-offset-4 col-md-8");
      }
      if (df.fieldtype == "Button") {
        $(f3.wrapper).find(".page-control-label").html("&nbsp;");
        f3.$input.addClass("btn-xs").css({ "width": "100%", "margin-top": "-1px" });
      }
      if (df["default"])
        f3.set_input(df["default"]);
      this.fields_dict[df.fieldname || df.label] = f3;
      return f3;
    }
    clear_fields() {
      this.page_form.empty();
    }
    show_form() {
      this.page_form.removeClass("hide");
    }
    hide_form() {
      this.page_form.addClass("hide");
    }
    get_form_values() {
      var values = {};
      for (let fieldname in this.fields_dict) {
        let field = this.fields_dict[fieldname];
        values[fieldname] = field.get_value();
      }
      return values;
    }
    add_view(name2, html) {
      let element = html;
      if (typeof html === "string") {
        element = $(html);
      }
      this.views[name2] = element.appendTo($(this.wrapper).find(".page-content"));
      if (!this.current_view) {
        this.current_view = this.views[name2];
      } else {
        this.views[name2].toggle(false);
      }
      return this.views[name2];
    }
    set_view(name2) {
      if (this.current_view_name === name2)
        return;
      this.current_view && this.current_view.toggle(false);
      this.current_view = this.views[name2];
      this.previous_view_name = this.current_view_name;
      this.current_view_name = name2;
      this.views[name2].toggle(true);
      this.wrapper.trigger("view-change");
    }
  };

  // frappe/public/js/frappe/ui/slides.js
  frappe.provide("frappe.ui");
  frappe.ui.Slide = class Slide {
    constructor(slide = null) {
      $.extend(this, slide);
      this.setup();
    }
    setup() {
      this.$wrapper = $('<div class="slide-wrapper hidden"></div>').attr({ "data-slide-id": this.id, "data-slide-name": this.name }).appendTo(this.parent);
    }
    make() {
      if (this.before_load)
        this.before_load(this);
      this.$body = $(`<div class="slide-body">
			<div class="content text-center">
				<h1 class="title slide-title">${__(this.title)}</h1>
			</div>
			<div class="form-wrapper">
				<div class="form"></div>
				<div class="add-more text-center" style="margin-top: 5px;">
					<button class="form-more-btn hide btn btn-default btn-xs">
						<span>Add More</span>
					</button>
				</div>
			</div>
		</div>`).appendTo(this.$wrapper);
      this.$content = this.$body.find(".content");
      this.$form = this.$body.find(".form");
      this.$primary_btn = this.slides_footer.find(".primary");
      this.$form_wrapper = this.$body.find(".form-wrapper");
      if (this.image_src)
        this.$content.append($(`<img src="${this.image_src}" style="margin: 20px;">`));
      if (this.help)
        this.$content.append($(`<p class="slide-help">${__(this.help)}</p>`));
      this.reqd_fields = [];
      this.refresh();
      this.made = true;
    }
    refresh() {
      this.render_parent_dots();
      if (!this.done) {
        this.setup_form();
      } else {
        this.setup_done_state();
      }
    }
    setup_form() {
      this.form = new frappe.ui.FieldGroup({
        fields: this.get_atomic_fields(),
        body: this.$form[0],
        no_submit_on_enter: true
      });
      this.form.make();
      if (this.add_more)
        this.bind_more_button();
      this.set_reqd_fields();
      if (this.onload)
        this.onload(this);
      this.set_reqd_fields();
    }
    setup_done_state() {
    }
    get_atomic_fields() {
      var fields = JSON.parse(JSON.stringify(this.fields));
      if (this.add_more) {
        this.count = 1;
        fields = fields.map((field, i2) => {
          if (field.fieldname) {
            field.fieldname += "_1";
          }
          if (i2 === 1 && this.mandatory_entry) {
            field.reqd = 1;
          }
          if (!field.static) {
            if (field.label)
              field.label;
          }
          return field;
        });
      }
      return fields;
    }
    set_reqd_fields() {
      var dict = this.form.fields_dict;
      this.reqd_fields = [];
      Object.keys(dict).map((key2) => {
        if (dict[key2].df.reqd) {
          this.reqd_fields.push(dict[key2]);
        }
      });
    }
    set_values() {
      this.values = this.form.get_values();
      if (this.values === null) {
        return false;
      }
      if (this.validate && !this.validate()) {
        return false;
      }
      return true;
    }
    bind_more_button() {
      this.$more = this.$body.find(".form-more-btn");
      this.$more.removeClass("hide").on("click", () => {
        this.count++;
        var fields = JSON.parse(JSON.stringify(this.fields));
        this.form.add_fields(fields.map((field) => {
          if (field.fieldname)
            field.fieldname += "_" + this.count;
          if (!field.static) {
            if (field.label)
              field.label;
          }
          field.reqd = 0;
          return field;
        }));
        if (this.count === this.max_count) {
          this.$more.addClass("hide");
        }
      });
    }
    resetup_primary_button() {
      this.unbind_primary_action();
      this.bind_fields_to_action_btn();
      this.reset_action_button_state();
      this.bind_primary_action();
    }
    bind_fields_to_action_btn() {
      var me = this;
      this.reqd_fields.map((field) => {
        field.$wrapper.on("change input click", () => {
          me.reset_action_button_state();
        });
        field.$wrapper.on("keydown", "input", (e2) => {
          if (e2.key == "Enter") {
            me.reset_action_button_state();
          }
        });
      });
    }
    reset_action_button_state() {
      var empty_fields = this.reqd_fields.filter((field) => {
        return !field.get_value();
      });
      if (empty_fields.length) {
        this.slides_footer.find(".action").addClass("disabled");
      } else {
        this.slides_footer.find(".action").removeClass("disabled");
      }
    }
    unbind_primary_action() {
      this.slides_footer.find(".primary").off();
    }
    bind_primary_action() {
      this.slides_footer.find(".primary").on("click.primary_action", () => {
        this.primary_action();
      });
    }
    is_last_slide() {
      if (this.id === this.parent[0].children.length - 1) {
        return true;
      }
      return false;
    }
    before_show() {
    }
    show_slide() {
      this.$wrapper.removeClass("hidden");
      this.before_show();
      this.resetup_primary_button();
      if (!this.done) {
        this.$body.find(".form-control").first().focus();
        this.$primary_btn.show();
      } else {
        this.$primary_btn.hide();
      }
    }
    hide_slide() {
      this.$wrapper.addClass("hidden");
    }
    get_input(fieldname) {
      return this.form.get_input(fieldname);
    }
    get_field(fieldname) {
      return this.form.get_field(fieldname);
    }
    get_value(fieldname) {
      return this.form.get_value(fieldname);
    }
    destroy() {
      this.$body.remove();
    }
    primary_action() {
    }
  };
  frappe.ui.Slides = class Slides {
    constructor({
      parent = null,
      slides = [],
      slide_class = null,
      unidirectional = 0,
      done_state = 0,
      before_load = null,
      on_update = null
    }) {
      this.parent = parent;
      this.slides = slides;
      this.slide_class = slide_class;
      this.unidirectional = unidirectional;
      this.done_state = done_state;
      this.before_load = before_load;
      this.on_update = on_update;
      this.page_name = "setup-wizard";
      this.slide_dict = {};
      this.made_slide_ids = [];
      this.values = {};
      this.make();
    }
    make() {
      this.$slide_progress = $(`<div>`).addClass(`slides-progress text-center text-extra-muted`).appendTo(this.parent);
      this.container = $("<div>").addClass("slides-wrapper").attr({ "tabindex": -1 }).appendTo(this.parent);
      this.$body = $(`<div>`).addClass(`slide-container`).appendTo(this.container);
      this.$footer = $(`<div>`).addClass(`slide-footer`).appendTo(this.container);
      this.render_progress_dots();
      this.make_prev_next_complete_buttons();
      if (this.before_load)
        this.before_load(this.$footer);
      this.setup();
      this.show_slide(0);
    }
    setup() {
      this.slides.map((slide, id) => {
        if (!this.slide_dict[id]) {
          this.slide_dict[id] = new this.slide_class($.extend(this.slides[id], {
            parent: this.$body,
            slides_footer: this.$footer,
            render_parent_dots: this.render_progress_dots.bind(this),
            id
          }));
          if (!this.unidirectional) {
            this.slide_dict[id].make();
          }
        } else {
          if (this.made_slide_ids.includes(id + "")) {
            this.slide_dict[id].done = false;
            this.slide_dict[id].destroy();
            this.slide_dict[id].make();
          }
        }
      });
    }
    refresh(id) {
      this.render_progress_dots();
      this.make_prev_next_complete_buttons();
      this.show_hide_prev_next(id);
      this.$body.find(".form-control").first().focus();
    }
    render_progress_dots() {
      this.$slide_progress.empty();
      this.slides.map((slide, id) => {
        let $dot = $(`<div class="slide-step">
				<div class="slide-step-indicator"></div>
				<div class="slide-step-complete">${frappe.utils.icon("tick", "xs")}</div>
			</div>`).attr({ "data-step-id": id });
        if (this.done_state && (this.slide_dict[id] && this.slide_dict[id].done || slide.done)) {
          $dot.addClass("step-success");
        }
        if (this.unidirectional && id === this.current_id) {
          $dot.addClass("active");
        }
        this.$slide_progress.append($dot);
      });
      this.completed = 0;
      this.slides.map((slide, i2) => {
        if (this.slide_dict[i2]) {
          if (this.slide_dict[i2].done)
            this.completed++;
        } else {
          if (slide.done)
            this.completed++;
        }
      });
      if (this.on_update)
        this.on_update(this.completed, this.slides.length);
      if (!this.unidirectional)
        this.bind_progress_dots();
    }
    make_prev_next_complete_buttons() {
      this.$footer.empty();
      $(`<div class="row">
			<div class="col-sm-4 text-left prev-div">
				<button class="prev-btn btn btn-secondary btn-sm" tabindex="0">${__("Previous", null, "Go to previous slide")}</button>
			</div>
			<div class="col-sm-8 text-right next-div">
				<button class="complete-btn btn btn-sm primary">${__("Complete Setup", null, "Finish the setup wizard")}</button>
				<button class="next-btn btn btn-default btn-sm" tabindex="0">${__("Next", null, "Go to next slide")}</button>
			</div>
		</div>`).appendTo(this.$footer);
      this.$prev_btn = this.$footer.find(".prev-btn").attr("tabIndex", 0).on("click", () => this.show_slide(this.current_id - 1));
      this.$next_btn = this.$footer.find(".next-btn").attr("tabIndex", 0).on("click", () => {
        if (this.done_state) {
          if (this.slide)
            this.slide.done = true;
          if (this.current_slide)
            this.current_slide.done = true;
        }
        if (!this.unidirectional || this.unidirectional && this.current_slide.set_values()) {
          this.show_slide(this.current_id + 1);
        }
      });
      this.$complete_btn = this.$footer.find(".complete-btn").attr("tabIndex", 0);
    }
    bind_progress_dots() {
      var me = this;
      this.$slide_progress.find(".fa-circle").addClass("link").on("click", function() {
        let id = $(this).attr("data-step-id");
        me.show_slide(id);
      });
    }
    before_show_slide() {
      return true;
    }
    show_slide(id) {
      id = cint(id);
      if (!this.before_show_slide() || this.current_slide && this.current_id === id) {
        return;
      }
      this.update_values();
      if (this.current_slide)
        this.current_slide.hide_slide();
      if (this.unidirectional && !this.slide_dict[id].made) {
        this.slide_dict[id].make();
      }
      this.current_id = id;
      this.current_slide = this.slide_dict[id];
      this.current_slide.show_slide();
      this.refresh(id);
    }
    destroy_slide(id) {
      if (this.slide_dict[id])
        this.slide_dict[id].destroy();
      this.slide_dict[id] = null;
    }
    on_update(completed, total) {
    }
    show_hide_prev_next(id) {
      id === 0 ? this.$prev_btn.hide() : this.$prev_btn.show();
      id + 1 === this.slides.length ? this.$next_btn.hide() : this.$next_btn.show();
    }
    get_values() {
      var values = {};
      $.each(this.slide_dict, function(id, slide) {
        if (slide.values) {
          $.extend(values, slide.values);
        }
      });
      return values;
    }
    update_values() {
      this.values = $.extend(this.values, this.get_values());
    }
  };

  // frappe/public/js/frappe/ui/find.js
  frappe.find = {
    page_primary_action: () => {
      return $(".page-actions:visible .btn-primary");
    },
    field: (fieldname, value) => {
      return new Promise((resolve) => {
        let input = $(`[data-fieldname="${fieldname}"] :input`);
        if (value) {
          input.val(value).trigger("change");
          frappe.after_ajax(() => {
            resolve(input);
          });
        } else {
          resolve(input);
        }
      });
    }
  };

  // frappe/public/js/frappe/ui/iconbar.js
  frappe.ui.IconBar = class IconBar {
    constructor(parent, n_groups) {
      this.parent = parent;
      this.buttons = {};
      this.make(n_groups);
    }
    make(n_groups) {
      this.$wrapper = $('<div class="iconbar-wrapper hide"></div>').appendTo(this.parent);
      for (var i2 = 0; i2 < n_groups; i2++) {
        this.get_group(i2 + 1);
      }
    }
    get_group(group) {
      var $ul = this.$wrapper.find(".iconbar-" + group + " ul");
      if (!$ul.length)
        $ul = $('<div class="iconbar iconbar-' + group + ' hide"><ul></ul></div>').appendTo(this.$wrapper).find("ul");
      return $ul;
    }
    add_btn(group, icon, label, click) {
      var $ul = this.get_group(group);
      var $li = $('<li><i class="' + icon + '"></i></li>').appendTo($ul).on("click", function() {
        click.apply(this);
        return false;
      });
      $li.find("i").attr("title", label).tooltip({ delay: { "show": 600, "hide": 100 }, trigger: "hover" });
      this.$wrapper.find(".iconbar-" + group).removeClass("hide");
      this.show();
      return $li;
    }
    hide(group) {
      if (group) {
        this.$wrapper.find(".iconbar-" + group).addClass("hide");
        this.check_if_all_hidden();
      } else {
        this.$wrapper.addClass("hide").trigger("hidden");
      }
    }
    show(group) {
      if (group) {
        this.$wrapper.find(".iconbar-" + group).removeClass("hide");
        this.show();
      } else {
        if (this.$wrapper.hasClass("hide"))
          this.$wrapper.removeClass("hide").trigger("shown");
      }
    }
    clear(group) {
      var me = this;
      this.$wrapper.find(".iconbar-" + group).addClass("hide").find("ul").empty();
      this.check_if_all_hidden();
    }
    check_if_all_hidden() {
      if (!this.$wrapper.find(".iconbar:visible").length) {
        this.hide();
      }
    }
  };

  // frappe/public/js/frappe/form/link_selector.js
  frappe.ui.form.LinkSelector = class LinkSelector {
    constructor(opts) {
      $.extend(this, opts);
      var me = this;
      if (this.doctype != "[Select]") {
        frappe.model.with_doctype(this.doctype, function(r2) {
          me.make();
        });
      } else {
        this.make();
      }
    }
    make() {
      var me = this;
      this.start = 0;
      this.dialog = new frappe.ui.Dialog({
        title: __("Select {0}", [this.doctype == "[Select]" ? __("value") : __(this.doctype)]),
        fields: [
          {
            fieldtype: "Data",
            fieldname: "txt",
            label: __("Beginning with"),
            description: __("You can use wildcard %")
          },
          {
            fieldtype: "HTML",
            fieldname: "results"
          },
          {
            fieldtype: "Button",
            fieldname: "more",
            label: __("More"),
            click: () => {
              me.start += 20;
              me.search();
            }
          }
        ],
        primary_action_label: __("Search"),
        primary_action: function() {
          me.start = 0;
          me.search();
        }
      });
      if (this.txt)
        this.dialog.fields_dict.txt.set_input(this.txt);
      this.dialog.get_input("txt").on("keypress", function(e2) {
        if (e2.which === 13) {
          me.start = 0;
          me.search();
        }
      });
      this.dialog.show();
      this.search();
    }
    search() {
      var args = {
        txt: this.dialog.fields_dict.txt.get_value(),
        searchfield: "name",
        start: this.start
      };
      var me = this;
      if (this.target.set_custom_query) {
        this.target.set_custom_query(args);
      }
      if (this.target.is_grid && this.target.fieldinfo[this.fieldname] && this.target.fieldinfo[this.fieldname].get_query) {
        $.extend(args, this.target.fieldinfo[this.fieldname].get_query(cur_frm.doc));
      }
      frappe.link_search(this.doctype, args, function(r2) {
        var parent = me.dialog.fields_dict.results.$wrapper;
        if (args.start === 0) {
          parent.empty();
        }
        if (r2.values.length) {
          $.each(r2.values, function(i2, v2) {
            var row = $(repl('<div class="row link-select-row">						<div class="col-xs-4">							<b><a href="#">%(name)s</a></b></div>						<div class="col-xs-8">							<span class="text-muted">%(values)s</span></div>						</div>', {
              name: v2[0],
              values: v2.splice(1).join(", ")
            })).appendTo(parent);
            row.find("a").attr("data-value", v2[0]).click(function() {
              var value = $(this).attr("data-value");
              if (me.target.is_grid) {
                me.set_in_grid(value).then(() => me.search());
              } else {
                if (me.target.doctype)
                  me.target.parse_validate_and_set_in_model(value);
                else {
                  me.target.set_input(value);
                  me.target.$input.trigger("change");
                }
                me.dialog.hide();
              }
              return false;
            });
          });
        } else {
          $('<p><br><span class="text-muted">' + __("No Results") + "</span>" + (frappe.model.can_create(me.doctype) ? '<br><br><a class="new-doc btn btn-default btn-sm">' + __("Create a new {0}", [__(me.doctype)]) + "</a>" : "") + "</p>").appendTo(parent).find(".new-doc").click(function() {
            frappe.new_doc(me.doctype);
          });
        }
        if (r2.values.length < 20) {
          var more_btn = me.dialog.fields_dict.more.$wrapper;
          more_btn.hide();
        }
      }, this.dialog.get_primary_btn());
    }
    set_in_grid(value) {
      return new Promise((resolve) => {
        if (this.qty_fieldname) {
          frappe.prompt({
            fieldname: "qty",
            fieldtype: "Float",
            label: "Qty",
            default: 1,
            reqd: 1
          }, (data) => {
            let updated = (this.target.frm.doc[this.target.df.fieldname] || []).some((d2) => {
              if (d2[this.fieldname] === value) {
                frappe.model.set_value(d2.doctype, d2.name, this.qty_fieldname, data.qty).then(() => {
                  frappe.show_alert(__("Added {0} ({1})", [value, d2[this.qty_fieldname]]));
                  resolve();
                });
                return true;
              }
            });
            if (!updated) {
              let d2 = null;
              frappe.run_serially([
                () => d2 = this.target.add_new_row(),
                () => frappe.timeout(0.1),
                () => {
                  let args = {};
                  args[this.fieldname] = value;
                  args[this.qty_fieldname] = data.qty;
                  return frappe.model.set_value(d2.doctype, d2.name, args);
                },
                () => frappe.show_alert(__("Added {0} ({1})", [value, data.qty])),
                () => resolve()
              ]);
            }
          }, __("Set Quantity"), __("Set"));
        } else if (this.dynamic_link_field) {
          let d2 = this.target.add_new_row();
          frappe.model.set_value(d2.doctype, d2.name, this.dynamic_link_field, this.dynamic_link_reference);
          frappe.model.set_value(d2.doctype, d2.name, this.fieldname, value).then(() => {
            frappe.show_alert(__("{0} {1} added", [this.dynamic_link_reference, value]));
            resolve();
          });
        } else {
          let d2 = this.target.add_new_row();
          frappe.model.set_value(d2.doctype, d2.name, this.fieldname, value).then(() => {
            frappe.show_alert(__("{0} added", [value]));
            resolve();
          });
        }
      });
    }
  };
  frappe.link_search = function(doctype2, args, callback, btn) {
    if (!args) {
      args = {
        txt: ""
      };
    }
    args.doctype = doctype2;
    if (!args.searchfield) {
      args.searchfield = "name";
    }
    frappe.call({
      method: "frappe.desk.search.search_widget",
      type: "GET",
      args,
      callback: function(r2) {
        callback && callback(r2);
      },
      btn
    });
  };

  // frappe/public/js/frappe/form/multi_select_dialog.js
  frappe.ui.form.MultiSelectDialog = class MultiSelectDialog {
    constructor(opts) {
      Object.assign(this, opts);
      this.for_select = this.doctype == "[Select]";
      if (!this.for_select) {
        frappe.model.with_doctype(this.doctype, () => this.init());
      } else {
        this.init();
      }
    }
    init() {
      this.page_length = 20;
      this.child_page_length = 20;
      this.fields = this.get_fields();
      this.make();
    }
    get_fields() {
      const primary_fields = this.get_primary_filters();
      const result_fields = this.get_result_fields();
      const data_fields = this.get_data_fields();
      const child_selection_fields = this.get_child_selection_fields();
      return [...primary_fields, ...result_fields, ...data_fields, ...child_selection_fields];
    }
    get_result_fields() {
      const show_next_page = () => {
        this.page_length += 20;
        this.get_results();
      };
      return [
        {
          fieldtype: "HTML",
          fieldname: "results_area"
        },
        {
          fieldtype: "Button",
          fieldname: "more_btn",
          label: __("More"),
          click: show_next_page.bind(this)
        }
      ];
    }
    get_data_fields() {
      if (this.data_fields && this.data_fields.length) {
        return [
          { fieldtype: "Section Break" },
          ...this.data_fields
        ];
      } else {
        return [];
      }
    }
    get_child_selection_fields() {
      const fields = [];
      if (this.allow_child_item_selection && this.child_fieldname) {
        const show_more_child_results = () => {
          this.child_page_length += 20;
          this.show_child_results();
        };
        fields.push({ fieldtype: "HTML", fieldname: "child_selection_area" });
        fields.push({
          fieldtype: "Button",
          fieldname: "more_child_btn",
          hidden: 1,
          label: __("More"),
          click: show_more_child_results.bind(this)
        });
      }
      return fields;
    }
    make() {
      let doctype_plural = this.doctype.plural();
      let title = __("Select {0}", [this.for_select ? __("value") : __(doctype_plural)]);
      this.dialog = new frappe.ui.Dialog({
        title,
        fields: this.fields,
        size: this.size,
        primary_action_label: this.primary_action_label || __("Get Items"),
        secondary_action_label: __("Make {0}", [__(this.doctype)]),
        primary_action: () => {
          let filters_data = this.get_custom_filters();
          const data_values = cur_dialog.get_values();
          const filtered_children = this.get_selected_child_names();
          const selected_documents = [...this.get_checked_values(), ...this.get_parent_name_of_selected_children()];
          this.action(selected_documents, __spreadProps(__spreadValues(__spreadValues(__spreadValues({}, this.args), data_values), filters_data), {
            filtered_children
          }));
        },
        secondary_action: this.make_new_document.bind(this)
      });
      if (this.add_filters_group) {
        this.make_filter_area();
      }
      this.args = {};
      this.setup_results();
      this.bind_events();
      this.get_results();
      this.dialog.show();
    }
    make_new_document(e2) {
      if (e2) {
        this.set_route_options();
        frappe.new_doc(this.doctype, true);
      }
    }
    set_route_options() {
      frappe.route_options = {};
      if (Array.isArray(this.setters)) {
        for (let df of this.setters) {
          frappe.route_options[df.fieldname] = this.dialog.fields_dict[df.fieldname].get_value() || void 0;
        }
      } else {
        Object.keys(this.setters).forEach((setter) => {
          frappe.route_options[setter] = this.dialog.fields_dict[setter].get_value() || void 0;
        });
      }
    }
    setup_results() {
      this.$parent = $(this.dialog.body);
      this.$wrapper = this.dialog.fields_dict.results_area.$wrapper.append(`<div class="results my-3"
			style="border: 1px solid #d1d8dd; border-radius: 3px; height: 300px; overflow: auto;"></div>`);
      this.$results = this.$wrapper.find(".results");
      this.$results.append(this.make_list_row());
    }
    show_child_results() {
      this.get_child_result().then((r2) => {
        this.child_results = r2.message || [];
        this.render_child_datatable();
        this.$wrapper.addClass("hidden");
        this.$child_wrapper.removeClass("hidden");
        this.dialog.fields_dict.more_btn.$wrapper.hide();
      });
    }
    is_child_selection_enabled() {
      return this.dialog.fields_dict["allow_child_item_selection"].get_value();
    }
    toggle_child_selection() {
      if (this.is_child_selection_enabled()) {
        this.show_child_results();
      } else {
        this.child_results = [];
        this.get_results();
        this.$wrapper.removeClass("hidden");
        this.$child_wrapper.addClass("hidden");
      }
    }
    render_child_datatable() {
      if (!this.child_datatable) {
        this.setup_child_datatable();
      } else {
        setTimeout(() => {
          this.child_datatable.rowmanager.checkMap = [];
          this.child_datatable.refresh(this.get_child_datatable_rows());
          this.$child_wrapper.find(".dt-scrollable").css("height", "300px");
          this.$child_wrapper.find(".dt-scrollable").css("overflow-y", "scroll");
        }, 500);
      }
    }
    get_child_datatable_columns() {
      const parent = this.doctype;
      return [parent, ...this.child_columns].map((d2) => ({ name: frappe.unscrub(d2), editable: false }));
    }
    get_child_datatable_rows() {
      if (this.child_results.length > this.child_page_length) {
        this.dialog.fields_dict.more_child_btn.toggle(true);
      } else {
        this.dialog.fields_dict.more_child_btn.toggle(false);
      }
      return this.child_results.slice(0, this.child_page_length).map((d2) => Object.values(d2).slice(1));
    }
    setup_child_datatable() {
      const header_columns = this.get_child_datatable_columns();
      const rows = this.get_child_datatable_rows();
      this.$child_wrapper = this.dialog.fields_dict.child_selection_area.$wrapper;
      this.$child_wrapper.addClass("my-3");
      this.child_datatable = new frappe.DataTable(this.$child_wrapper.get(0), {
        columns: header_columns,
        data: rows,
        layout: "fluid",
        inlineFilters: true,
        serialNoColumn: false,
        checkboxColumn: true,
        cellHeight: 35,
        noDataMessage: __("No Data"),
        disableReorderColumn: true
      });
      this.$child_wrapper.find(".dt-scrollable").css("height", "300px");
    }
    get_primary_filters() {
      let fields = [];
      let columns = new Array(3);
      columns[0] = [
        {
          fieldtype: "Data",
          label: __("Name"),
          fieldname: "search_term"
        }
      ];
      columns[1] = [];
      columns[2] = [];
      if ($.isArray(this.setters)) {
        this.setters.forEach((setter, index) => {
          columns[(index + 1) % 3].push(setter);
        });
      } else {
        Object.keys(this.setters).forEach((setter, index) => {
          let df_prop = frappe.meta.docfield_map[this.doctype][setter];
          columns[(index + 1) % 3].push({
            fieldtype: df_prop.fieldtype,
            label: df_prop.label,
            fieldname: setter,
            options: df_prop.options,
            default: this.setters[setter]
          });
        });
      }
      if (Object.seal) {
        Object.seal(columns);
      }
      if (this.allow_child_item_selection) {
        this.child_doctype = frappe.meta.get_docfield(this.doctype, this.child_fieldname).options;
        columns[0].push({
          fieldtype: "Check",
          label: __("Select {0}", [this.child_doctype]),
          fieldname: "allow_child_item_selection",
          onchange: this.toggle_child_selection.bind(this)
        });
      }
      fields = [
        ...columns[0],
        { fieldtype: "Column Break" },
        ...columns[1],
        { fieldtype: "Column Break" },
        ...columns[2],
        { fieldtype: "Section Break", fieldname: "primary_filters_sb" }
      ];
      if (this.add_filters_group) {
        fields.push({
          fieldtype: "HTML",
          fieldname: "filter_area"
        });
      }
      return fields;
    }
    make_filter_area() {
      this.filter_group = new frappe.ui.FilterGroup({
        parent: this.dialog.get_field("filter_area").$wrapper,
        doctype: this.doctype,
        on_change: () => {
          if (this.is_child_selection_enabled()) {
            this.show_child_results();
          } else {
            this.get_results();
          }
        }
      });
      this.filter_group.wrapper.find(".apply-filters").hide();
    }
    get_custom_filters() {
      if (this.add_filters_group && this.filter_group) {
        return this.filter_group.get_filters().reduce((acc, filter) => {
          return Object.assign(acc, {
            [filter[1]]: [filter[2], filter[3]]
          });
        }, {});
      } else {
        return {};
      }
    }
    bind_events() {
      let me = this;
      this.$results.on("click", ".list-item-container", function(e2) {
        if (!$(e2.target).is(":checkbox") && !$(e2.target).is("a")) {
          $(this).find(":checkbox").trigger("click");
        }
      });
      this.$results.on("click", ".list-item--head :checkbox", (e2) => {
        this.$results.find(".list-item-container .list-row-check").prop("checked", $(e2.target).is(":checked"));
      });
      this.$parent.find(".input-with-feedback").on("change", () => {
        frappe.flags.auto_scroll = false;
        if (this.is_child_selection_enabled()) {
          this.show_child_results();
        } else {
          this.get_results();
        }
      });
      this.$parent.find('[data-fieldtype="Data"]').on("input", () => {
        var $this = $(this);
        clearTimeout($this.data("timeout"));
        $this.data("timeout", setTimeout(function() {
          frappe.flags.auto_scroll = false;
          if (me.is_child_selection_enabled()) {
            me.show_child_results();
          } else {
            me.empty_list();
            me.get_results();
          }
        }, 300));
      });
    }
    get_parent_name_of_selected_children() {
      if (!this.child_datatable || !this.child_datatable.datamanager.rows.length)
        return [];
      let parent_names = this.child_datatable.rowmanager.checkMap.reduce((parent_names2, checked, index) => {
        if (checked == 1) {
          const parent_name = this.child_results[index].parent;
          if (!parent_names2.includes(parent_name)) {
            parent_names2.push(parent_name);
          }
        }
        return parent_names2;
      }, []);
      return parent_names;
    }
    get_selected_child_names() {
      if (!this.child_datatable || !this.child_datatable.datamanager.rows.length)
        return [];
      let checked_names = this.child_datatable.rowmanager.checkMap.reduce((checked_names2, checked, index) => {
        if (checked == 1) {
          const child_row_name = this.child_results[index].name;
          checked_names2.push(child_row_name);
        }
        return checked_names2;
      }, []);
      return checked_names;
    }
    get_checked_values() {
      return this.$results.find(".list-item-container").map(function() {
        if ($(this).find(".list-row-check:checkbox:checked").length > 0) {
          return $(this).attr("data-item-name");
        }
      }).get();
    }
    get_checked_items() {
      let checked_values = this.get_checked_values();
      return this.results.filter((res) => checked_values.includes(res.name));
    }
    get_datatable_columns() {
      if (this.get_query && this.get_query().query && this.columns)
        return this.columns;
      if (Array.isArray(this.setters))
        return ["name", ...this.setters.map((df) => df.fieldname)];
      return ["name", ...Object.keys(this.setters)];
    }
    make_list_row(result = {}) {
      var me = this;
      let head = Object.keys(result).length === 0;
      let contents = ``;
      this.get_datatable_columns().forEach(function(column) {
        contents += `<div class="list-item__content ellipsis">
				${head ? `<span class="ellipsis text-muted" title="${__(frappe.model.unscrub(column))}">${__(frappe.model.unscrub(column))}</span>` : column !== "name" ? `<span class="ellipsis result-row" title="${__(result[column] || "")}">${__(result[column] || "")}</span>` : `<a href="${"/app/" + frappe.router.slug(me.doctype) + "/" + result[column] || ""}" class="list-id ellipsis" title="${__(result[column] || "")}">
							${__(result[column] || "")}</a>`}
			</div>`;
      });
      let $row = $(`<div class="list-item">
			<div class="list-item__content" style="flex: 0 0 10px;">
				<input type="checkbox" class="list-row-check" data-item-name="${result.name}" ${result.checked ? "checked" : ""}>
			</div>
			${contents}
		</div>`);
      head ? $row.addClass("list-item--head") : $row = $(`<div class="list-item-container" data-item-name="${result.name}"></div>`).append($row);
      return $row;
    }
    render_result_list(results, more = 0, empty = true) {
      var me = this;
      var more_btn = me.dialog.fields_dict.more_btn.$wrapper;
      if (!frappe.flags.auto_scroll && empty) {
        this.empty_list();
      }
      more_btn.hide();
      $(".modal-dialog .list-item--head").css("z-index", 1);
      if (results.length === 0)
        return;
      if (more)
        more_btn.show();
      let checked = this.get_checked_values();
      results.filter((result) => !checked.includes(result.name)).forEach((result) => {
        me.$results.append(me.make_list_row(result));
      });
      this.$results.find(".list-item--head").css("z-index", 1);
      if (frappe.flags.auto_scroll) {
        this.$results.animate({ scrollTop: me.$results.prop("scrollHeight") }, 500);
      }
    }
    empty_list() {
      let checked = this.get_checked_items().map((item) => {
        return __spreadProps(__spreadValues({}, item), {
          checked: true
        });
      });
      this.$results.find(".list-item-container").remove();
      this.render_result_list(checked, 0, false);
    }
    get_filters_from_setters() {
      let me = this;
      let filters2 = (this.get_query ? this.get_query().filters : {}) || {};
      let filter_fields = [];
      if ($.isArray(this.setters)) {
        for (let df of this.setters) {
          filters2[df.fieldname] = me.dialog.fields_dict[df.fieldname].get_value() || void 0;
          me.args[df.fieldname] = filters2[df.fieldname];
          filter_fields.push(df.fieldname);
        }
      } else {
        Object.keys(this.setters).forEach(function(setter) {
          var value = me.dialog.fields_dict[setter].get_value();
          if (me.dialog.fields_dict[setter].df.fieldtype == "Data" && value) {
            filters2[setter] = ["like", "%" + value + "%"];
          } else {
            filters2[setter] = value || void 0;
            me.args[setter] = filters2[setter];
            filter_fields.push(setter);
          }
        });
      }
      return [filters2, filter_fields];
    }
    get_args_for_search() {
      let [filters2, filter_fields] = this.get_filters_from_setters();
      let custom_filters = this.get_custom_filters();
      Object.assign(filters2, custom_filters);
      return {
        doctype: this.doctype,
        txt: this.dialog.fields_dict["search_term"].get_value(),
        filters: filters2,
        filter_fields,
        page_length: this.page_length + 5,
        query: this.get_query ? this.get_query().query : "",
        as_dict: 1
      };
    }
    async perform_search(args) {
      const res = await frappe.call({
        type: "GET",
        method: "frappe.desk.search.search_widget",
        no_spinner: true,
        args
      });
      const more = res.values.length && res.values.length > this.page_length ? 1 : 0;
      return [res, more];
    }
    async get_results() {
      const args = this.get_args_for_search();
      const [res, more] = await this.perform_search(args);
      if (more) {
        res.values = res.values.splice(0, this.page_length);
      }
      this.results = [];
      if (res.values.length) {
        res.values.forEach((result) => {
          result.checked = 0;
          this.results.push(result);
        });
      }
      this.render_result_list(this.results, more);
    }
    async get_filtered_parents_for_child_search() {
      const parent_search_args = this.get_args_for_search();
      parent_search_args.filter_fields = ["name"];
      const [response, _2] = await this.perform_search(parent_search_args);
      let parent_names = [];
      if (response.values.length) {
        parent_names = response.values.map((v2) => v2.name);
      }
      return parent_names;
    }
    async add_parent_filters(filters2) {
      const parent_names = await this.get_filtered_parents_for_child_search();
      if (parent_names.length) {
        filters2.push(["parent", "in", parent_names]);
      }
    }
    add_custom_child_filters(filters2) {
      if (this.add_filters_group && this.filter_group) {
        this.filter_group.get_filters().forEach((filter) => {
          if (filter[0] == this.child_doctype) {
            filters2.push([filter[1], filter[2], filter[3]]);
          }
        });
      }
    }
    async get_child_result() {
      let filters2 = [["parentfield", "=", this.child_fieldname]];
      await this.add_parent_filters(filters2);
      this.add_custom_child_filters(filters2);
      return frappe.call({
        method: "frappe.client.get_list",
        args: {
          doctype: this.child_doctype,
          filters: filters2,
          fields: ["name", "parent", ...this.child_columns],
          parent: this.doctype,
          limit_page_length: this.child_page_length + 5,
          order_by: "parent"
        }
      });
    }
  };

  // frappe/public/js/frappe/ui/capture.js
  frappe._.get_data_uri = (element) => {
    const width = element.videoWidth;
    const height = element.videoHeight;
    const $canvas = $("<canvas/>");
    $canvas[0].width = width;
    $canvas[0].height = height;
    const context = $canvas[0].getContext("2d");
    context.drawImage(element, 0, 0, width, height);
    const data_uri = $canvas[0].toDataURL("image/png");
    return data_uri;
  };
  function get_file_input() {
    let input = document.createElement("input");
    input.setAttribute("type", "file");
    input.setAttribute("accept", "image/*");
    input.setAttribute("multiple", "");
    return input;
  }
  function read(file) {
    return new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve(reader.result);
      reader.onerror = reject;
      reader.readAsDataURL(file);
    });
  }
  frappe.ui.Capture = class {
    constructor(options = {}) {
      this.options = frappe.ui.Capture.OPTIONS;
      this.set_options(options);
      this.facing_mode = "environment";
      this.images = [];
    }
    set_options(options) {
      this.options = __spreadValues(__spreadValues({}, frappe.ui.Capture.OPTIONS), options);
      return this;
    }
    show() {
      this.build_dialog();
      if (frappe.is_mobile()) {
        this.show_for_mobile();
      } else {
        this.show_for_desktop();
      }
    }
    build_dialog() {
      let me = this;
      me.dialog = new frappe.ui.Dialog({
        title: this.options.title,
        animate: this.options.animate,
        fields: [
          {
            fieldtype: "HTML",
            fieldname: "capture"
          },
          {
            fieldtype: "HTML",
            fieldname: "total_count"
          }
        ],
        on_hide: this.stop_media_stream()
      });
      me.$template = $(frappe.ui.Capture.TEMPLATE);
      let field = me.dialog.get_field("capture");
      $(field.wrapper).html(me.$template);
      me.dialog.get_close_btn().on("click", () => {
        me.hide();
      });
    }
    show_for_mobile() {
      let me = this;
      if (!me.input) {
        me.input = get_file_input();
      }
      me.input.onchange = async () => {
        for (let file of me.input.files) {
          let f3 = await read(file);
          me.images.push(f3);
        }
        me.render_preview();
        me.dialog.show();
      };
      me.input.click();
    }
    show_for_desktop() {
      let me = this;
      this.render_stream().then(() => {
        me.dialog.show();
      }).catch((err) => {
        if (me.options.error) {
          frappe.show_alert(frappe.ui.Capture.ERR_MESSAGE, 3);
        }
        throw err;
      });
    }
    render_stream() {
      let me = this;
      let constraints = {
        video: {
          facingMode: this.facing_mode
        }
      };
      return navigator.mediaDevices.getUserMedia(constraints).then((stream) => {
        me.stream = stream;
        me.dialog.custom_actions.empty();
        me.dialog.get_primary_btn().off("click");
        me.setup_take_photo_action();
        me.setup_preview_action();
        me.setup_toggle_camera();
        me.$template.find(".fc-stream-container").show();
        me.$template.find(".fc-preview-container").hide();
        me.video = me.$template.find("video")[0];
        me.video.srcObject = me.stream;
        me.video.load();
        me.video.play();
      });
    }
    render_preview() {
      this.stop_media_stream();
      this.$template.find(".fc-stream-container").hide();
      this.$template.find(".fc-preview-container").show();
      this.dialog.get_primary_btn().off("click");
      let images = ``;
      this.images.forEach((image, idx) => {
        images += `
				<div class="mt-1 p-1 rounded col-md-3 col-sm-4 col-xs-4" data-idx="${idx}">
					<span class="capture-remove-btn" data-idx="${idx}">
						${frappe.utils.icon("close", "lg")}
					</span>
					<img class="rounded" src="${image}" data-idx="${idx}">
				</div>
			`;
      });
      this.$template.find(".fc-preview-container").empty();
      $(this.$template.find(".fc-preview-container")).html(`<div class="row">
				${images}
			</div>`);
      this.setup_capture_action();
      this.setup_submit_action();
      this.setup_remove_action();
      this.update_count();
      this.dialog.custom_actions.empty();
    }
    setup_take_photo_action() {
      let me = this;
      this.dialog.set_primary_action(__("Take Photo"), () => {
        const data_url = frappe._.get_data_uri(me.video);
        me.images.push(data_url);
        me.setup_preview_action();
        me.update_count();
      });
    }
    setup_preview_action() {
      let me = this;
      if (!this.images.length) {
        return;
      }
      this.dialog.set_secondary_action_label(__("Preview"));
      this.dialog.set_secondary_action(() => {
        me.dialog.get_primary_btn().off("click");
        me.render_preview();
      });
    }
    setup_remove_action() {
      let me = this;
      let elements = this.$template[0].getElementsByClassName("capture-remove-btn");
      elements.forEach((el) => {
        el.onclick = () => {
          let idx = parseInt(el.getAttribute("data-idx"));
          me.images.splice(idx, 1);
          me.render_preview();
        };
      });
    }
    update_count() {
      let field = this.dialog.get_field("total_count");
      let msg = `${__("Total Images")}: <b>${this.images.length}`;
      if (this.images.length === 0) {
        msg = __("No Images");
      }
      $(field.wrapper).html(`
			<div class="row mt-2">
				<div class="offset-4 col-4 d-flex justify-content-center">${msg}</b></div>
			</div>
		`);
    }
    setup_toggle_camera() {
      let me = this;
      this.dialog.add_custom_action(__("Switch Camera"), () => {
        me.facing_mode = me.facing_mode == "environment" ? "user" : "environment";
        frappe.show_alert({
          message: __("Switching Camera")
        });
        me.stop_media_stream();
        me.render_stream();
      }, "btn-switch");
    }
    setup_capture_action() {
      let me = this;
      this.dialog.set_secondary_action_label(__("Capture"));
      this.dialog.set_secondary_action(() => {
        if (frappe.is_mobile()) {
          me.show_for_mobile();
        } else {
          me.render_stream();
        }
      });
    }
    setup_submit_action() {
      let me = this;
      this.dialog.set_primary_action(__("Submit"), () => {
        me.hide();
        if (me.callback) {
          me.callback(me.images);
        }
      });
    }
    hide() {
      if (this.dialog)
        this.dialog.hide();
      this.stop_media_stream();
    }
    stop_media_stream() {
      if (this.stream) {
        this.stream.getTracks().forEach((track) => {
          track.stop();
        });
      }
    }
    submit(fn) {
      this.callback = fn;
    }
  };
  frappe.ui.Capture.OPTIONS = {
    title: __("Camera"),
    animate: false,
    error: false
  };
  frappe.ui.Capture.ERR_MESSAGE = __("Unable to load camera.");
  frappe.ui.Capture.TEMPLATE = `
<div class="frappe-capture">
	<div class="embed-responsive embed-responsive-16by9 fc-stream-container">
		<video class="fc-stream embed-responsive-item">${frappe.ui.Capture.ERR_MESSAGE}</video>
	</div>
	<div class="fc-preview-container px-2" style="display: none;">

	</div>
</div>
`;

  // frappe/public/js/frappe/ui/app_icon.js
  frappe.provide("frappe.ui");
  frappe.ui.app_icon = {
    get_html: function(module2, small) {
      var icon = module2.icon;
      var color = module2.color;
      if (icon && icon.match(/([\uE000-\uF8FF]|\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDDFF])/g)) {
        module2.emoji = module2.icon;
      }
      var icon_style = "";
      if (module2.reverse) {
        icon_style = "color: #36414C;";
      }
      if (!color) {
        color = "#4aa3df";
      }
      if (!icon || module2.emoji) {
        icon = '<span class="inner" ' + (module2.reverse ? 'style="' + icon_style + '"' : "") + ">" + (module2.emoji || module2._label[0].toUpperCase()) + "</span>";
      } else if (icon.split(".").slice(-1)[0] === "svg") {
        $.ajax({
          url: frappe.urllib.get_full_url(icon),
          dataType: "text",
          async: false,
          success: function(data) {
            icon = data;
          }
        });
        icon = '<object class="app-icon-svg">' + icon + "</object>";
      } else {
        icon = '<i class="' + icon + '" title="' + module2._label + '" style="' + icon_style + '"></i>';
      }
      return '<div class="app-icon' + (small ? " app-icon-small" : "") + '" style="background-color: ' + color + '" title="' + module2._label + '">' + icon + "</div>";
    }
  };

  // frappe/public/js/frappe/ui/theme_switcher.js
  frappe.provide("frappe.ui");
  frappe.ui.ThemeSwitcher = class ThemeSwitcher {
    constructor() {
      this.setup_dialog();
      this.refresh();
    }
    setup_dialog() {
      this.dialog = new frappe.ui.Dialog({
        title: __("Switch Theme")
      });
      this.body = $(`<div class="theme-grid"></div>`).appendTo(this.dialog.$body);
      this.bind_events();
    }
    bind_events() {
      this.dialog.$wrapper.on("keydown", (e2) => {
        if (!this.themes)
          return;
        const key2 = frappe.ui.keys.get_key(e2);
        let increment_by;
        if (key2 === "right") {
          increment_by = 1;
        } else if (key2 === "left") {
          increment_by = -1;
        } else if (e2.keyCode === 13) {
          this.hide();
        } else {
          return;
        }
        const current_index = this.themes.findIndex((theme) => {
          return theme.name === this.current_theme;
        });
        const new_theme = this.themes[current_index + increment_by];
        if (!new_theme)
          return;
        new_theme.$html.click();
        return false;
      });
    }
    refresh() {
      this.current_theme = document.documentElement.getAttribute("data-theme-mode") || "light";
      this.fetch_themes().then(() => {
        this.render();
      });
    }
    fetch_themes() {
      return new Promise((resolve) => {
        this.themes = [
          {
            name: "light",
            label: __("Frappe Light"),
            info: __("Light Theme")
          },
          {
            name: "dark",
            label: __("Timeless Night"),
            info: __("Dark Theme")
          },
          {
            name: "automatic",
            label: __("Automatic"),
            info: __("Uses system's theme to switch between light and dark mode")
          }
        ];
        resolve(this.themes);
      });
    }
    render() {
      this.themes.forEach((theme) => {
        let html = this.get_preview_html(theme);
        html.appendTo(this.body);
        theme.$html = html;
      });
    }
    get_preview_html(theme) {
      const is_auto_theme = theme.name === "automatic";
      const preview = $(`<div class="${this.current_theme == theme.name ? "selected" : ""}">
			<div data-theme=${is_auto_theme ? "light" : theme.name}
				data-is-auto-theme="${is_auto_theme}" title="${theme.info}">
				<div class="background">
					<div>
						<div class="preview-check" data-theme=${is_auto_theme ? "dark" : theme.name}>
							${frappe.utils.icon("tick", "xs")}
						</div>
					</div>
					<div class="navbar"></div>
					<div class="p-2">
						<div class="toolbar">
							<span class="text"></span>
							<span class="primary"></span>
						</div>
						<div class="foreground"></div>
						<div class="foreground"></div>
					</div>
				</div>
			</div>
			<div class="mt-3 text-center">
				<h5 class="theme-title">${theme.label}</h5>
			</div>
		</div>`);
      preview.on("click", () => {
        if (this.current_theme === theme.name)
          return;
        this.themes.forEach((th) => {
          th.$html.removeClass("selected");
        });
        preview.addClass("selected");
        this.toggle_theme(theme.name);
      });
      return preview;
    }
    toggle_theme(theme) {
      this.current_theme = theme.toLowerCase();
      document.documentElement.setAttribute("data-theme-mode", this.current_theme);
      frappe.show_alert(__("Theme Changed"), 3);
      frappe.xcall("frappe.core.doctype.user.user.switch_theme", {
        theme: toTitle(theme)
      });
    }
    show() {
      this.dialog.show();
    }
    hide() {
      this.dialog.hide();
    }
  };
  frappe.ui.add_system_theme_switch_listener = () => {
    frappe.ui.dark_theme_media_query.addEventListener("change", () => {
      frappe.ui.set_theme();
    });
  };
  frappe.ui.dark_theme_media_query = window.matchMedia("(prefers-color-scheme: dark)");
  frappe.ui.set_theme = (theme) => {
    const root = document.documentElement;
    let theme_mode = root.getAttribute("data-theme-mode");
    if (!theme) {
      if (theme_mode === "automatic") {
        theme = frappe.ui.dark_theme_media_query.matches ? "dark" : "light";
      }
    }
    root.setAttribute("data-theme", theme || theme_mode);
  };

  // frappe/public/js/desk.bundle.js
  var import_model = __toESM(require_model());

  // frappe/public/js/frappe/db.js
  frappe.db = {
    get_list: function(doctype2, args) {
      if (!args) {
        args = {};
      }
      args.doctype = doctype2;
      if (!args.fields) {
        args.fields = ["name"];
      }
      if (!("limit" in args)) {
        args.limit = 20;
      }
      return new Promise((resolve) => {
        frappe.call({
          method: "frappe.desk.reportview.get_list",
          args,
          type: "GET",
          callback: function(r2) {
            resolve(r2.message);
          }
        });
      });
    },
    exists: function(doctype2, name2) {
      return new Promise((resolve) => {
        frappe.db.get_value(doctype2, { name: name2 }, "name").then((r2) => {
          r2.message && r2.message.name ? resolve(true) : resolve(false);
        });
      });
    },
    get_value: function(doctype2, filters2, fieldname, callback, parent_doc) {
      return frappe.call({
        method: "frappe.client.get_value",
        type: "GET",
        args: {
          doctype: doctype2,
          fieldname,
          filters: filters2,
          parent: parent_doc
        },
        callback: function(r2) {
          callback && callback(r2.message);
        }
      });
    },
    get_single_value: (doctype2, field) => {
      return new Promise((resolve) => {
        frappe.call({
          method: "frappe.client.get_single_value",
          args: { doctype: doctype2, field },
          type: "GET"
        }).then((r2) => resolve(r2 ? r2.message : null));
      });
    },
    set_value: function(doctype2, docname, fieldname, value, callback) {
      return frappe.call({
        method: "frappe.client.set_value",
        args: {
          doctype: doctype2,
          name: docname,
          fieldname,
          value
        },
        callback: function(r2) {
          callback && callback(r2.message);
        }
      });
    },
    get_doc: function(doctype2, name2, filters2 = null) {
      return new Promise((resolve, reject) => {
        frappe.call({
          method: "frappe.client.get",
          type: "GET",
          args: { doctype: doctype2, name: name2, filters: filters2 },
          callback: (r2) => {
            frappe.model.sync(r2.message);
            resolve(r2.message);
          }
        }).fail(reject);
      });
    },
    insert: function(doc2) {
      return frappe.xcall("frappe.client.insert", { doc: doc2 });
    },
    delete_doc: function(doctype2, name2) {
      return new Promise((resolve) => {
        frappe.call("frappe.client.delete", { doctype: doctype2, name: name2 }, (r2) => resolve(r2.message));
      });
    },
    count: function(doctype2, args = {}) {
      let filters2 = args.filters || {};
      const distinct = Array.isArray(filters2) && filters2.some((filter) => {
        return filter[0] !== doctype2;
      });
      const fields = [];
      return frappe.xcall("frappe.desk.reportview.get_count", {
        doctype: doctype2,
        filters: filters2,
        fields,
        distinct
      });
    },
    get_link_options(doctype2, txt2 = "", filters2 = {}) {
      return new Promise((resolve) => {
        frappe.call({
          type: "GET",
          method: "frappe.desk.search.search_link",
          args: {
            doctype: doctype2,
            txt: txt2,
            filters: filters2
          },
          callback(r2) {
            resolve(r2.results);
          }
        });
      });
    }
  };

  // frappe/public/js/frappe/model/meta.js
  frappe.provide("frappe.meta.docfield_map");
  frappe.provide("frappe.meta.docfield_copy");
  frappe.provide("frappe.meta.docfield_list");
  frappe.provide("frappe.meta.doctypes");
  frappe.provide("frappe.meta.precision_map");
  frappe.get_meta = function(doctype2) {
    return locals["DocType"] ? locals["DocType"][doctype2] : null;
  };
  $.extend(frappe.meta, {
    sync: function(doc2) {
      $.each(doc2.fields, function(i2, df) {
        frappe.meta.add_field(df);
      });
      frappe.meta.sync_messages(doc2);
      if (doc2.__print_formats)
        frappe.model.sync(doc2.__print_formats);
      if (doc2.__workflow_docs)
        frappe.model.sync(doc2.__workflow_docs);
    },
    add_field: function(df) {
      frappe.provide("frappe.meta.docfield_map." + df.parent);
      frappe.meta.docfield_map[df.parent][df.fieldname || df.label] = df;
      if (!frappe.meta.docfield_list[df.parent])
        frappe.meta.docfield_list[df.parent] = [];
      for (var i2 in frappe.meta.docfield_list[df.parent]) {
        var d2 = frappe.meta.docfield_list[df.parent][i2];
        if (df.fieldname == d2.fieldname)
          return;
      }
      frappe.meta.docfield_list[df.parent].push(df);
    },
    make_docfield_copy_for: function(doctype2, docname, docfield_list = null) {
      var c2 = frappe.meta.docfield_copy;
      if (!c2[doctype2])
        c2[doctype2] = {};
      if (!c2[doctype2][docname])
        c2[doctype2][docname] = {};
      docfield_list = docfield_list || frappe.meta.docfield_list[doctype2] || [];
      for (var i2 = 0, j2 = docfield_list.length; i2 < j2; i2++) {
        var df = docfield_list[i2];
        c2[doctype2][docname][df.fieldname || df.label] = copy_dict(df);
      }
    },
    get_field: function(doctype2, fieldname, name2) {
      var out = frappe.meta.get_docfield(doctype2, fieldname, name2);
      if (!out) {
        frappe.model.std_fields.every(function(d2) {
          if (d2.fieldname === fieldname) {
            out = d2;
            return false;
          } else {
            return true;
          }
        });
      }
      return out;
    },
    get_docfield: function(doctype2, fieldname, name2) {
      var fields_dict = frappe.meta.get_docfield_copy(doctype2, name2);
      return fields_dict ? fields_dict[fieldname] : null;
    },
    set_formatter: function(doctype2, fieldname, name2, formatter) {
      frappe.meta.get_docfield(doctype2, fieldname, name2).formatter = formatter;
    },
    set_indicator_formatter: function(doctype2, fieldname, name2, get_text, get_color) {
      frappe.meta.get_docfield(doctype2, fieldname, name2).formatter = function(value, df, options, doc2) {
        return repl('<span class="indicator %(color)s">%(name)s</span>', {
          color: get_color(),
          name: get_text()
        });
      };
    },
    get_docfields: function(doctype2, name2, filters2) {
      var docfield_map = frappe.meta.get_docfield_copy(doctype2, name2);
      var docfields = frappe.meta.sort_docfields(docfield_map);
      if (filters2) {
        docfields = frappe.utils.filter_dict(docfields, filters2);
      }
      return docfields;
    },
    get_linked_fields: function(doctype2) {
      return $.map(frappe.get_meta(doctype2).fields, function(d2) {
        return d2.fieldtype == "Link" ? d2.options : null;
      });
    },
    get_fields_to_check_permissions: function(doctype2) {
      var fields = $.map(frappe.meta.get_docfields(doctype2, name), function(df) {
        return df.fieldtype === "Link" && df.ignore_user_permissions !== 1 ? df : null;
      });
      fields = fields.concat({ label: "Name", fieldname: name, options: doctype2 });
      return fields;
    },
    sort_docfields: function(docs) {
      return $.map(docs, function(d2) {
        return d2;
      }).sort(function(a2, b2) {
        return a2.idx - b2.idx;
      });
    },
    get_docfield_copy: function(doctype2, name2) {
      if (!name2)
        return frappe.meta.docfield_map[doctype2];
      if (!(frappe.meta.docfield_copy[doctype2] && frappe.meta.docfield_copy[doctype2][name2])) {
        frappe.meta.make_docfield_copy_for(doctype2, name2);
      }
      return frappe.meta.docfield_copy[doctype2][name2];
    },
    get_fieldnames: function(doctype2, name2, filters2) {
      return $.map(frappe.utils.filter_dict(frappe.meta.docfield_map[doctype2], filters2), function(df) {
        return df.fieldname;
      });
    },
    has_field: function(dt2, fn) {
      let docfield_map = frappe.meta.docfield_map[dt2];
      return docfield_map && docfield_map[fn];
    },
    get_table_fields: function(dt2) {
      return $.map(frappe.meta.docfield_list[dt2], function(d2) {
        return frappe.model.table_fields.includes(d2.fieldtype) ? d2 : null;
      });
    },
    get_doctype_for_field: function(doctype2, key2) {
      var out = null;
      if (in_list(frappe.model.std_fields_list, key2)) {
        out = doctype2;
      } else if (frappe.meta.has_field(doctype2, key2)) {
        out = doctype2;
      } else {
        frappe.meta.get_table_fields(doctype2).every(function(d2) {
          if (frappe.meta.has_field(d2.options, key2) || in_list(frappe.model.child_table_field_list, key2)) {
            out = d2.options;
            return false;
          }
          return true;
        });
        if (!out) {
          console.log(__("Warning: Unable to find {0} in any table related to {1}", [key2, __(doctype2)]));
        }
      }
      return out;
    },
    get_parentfield: function(parent_dt, child_dt) {
      var df = (frappe.get_doc("DocType", parent_dt).fields || []).filter((df2) => frappe.model.table_fields.includes(df2.fieldtype) && df2.options === child_dt);
      if (!df.length)
        throw "parentfield not found for " + parent_dt + ", " + child_dt;
      return df[0].fieldname;
    },
    get_label: function(dt2, fn, dn) {
      var standard = {
        "owner": __("Owner"),
        "creation": __("Created On"),
        "modified": __("Last Modified On"),
        "idx": __("Idx"),
        "name": __("Name"),
        "modified_by": __("Last Modified By")
      };
      if (standard[fn]) {
        return standard[fn];
      } else {
        var df = this.get_docfield(dt2, fn, dn);
        return (df ? df.label : "") || fn;
      }
    },
    get_print_sizes: function() {
      return [
        "A0",
        "A1",
        "A2",
        "A3",
        "A4",
        "A5",
        "A6",
        "A7",
        "A8",
        "A9",
        "B0",
        "B1",
        "B2",
        "B3",
        "B4",
        "B5",
        "B6",
        "B7",
        "B8",
        "B9",
        "B10",
        "C5E",
        "Comm10E",
        "DLE",
        "Executive",
        "Folio",
        "Ledger",
        "Legal",
        "Letter",
        "Tabloid",
        "Custom"
      ];
    },
    get_print_formats: function(doctype2) {
      var print_format_list = ["Standard"];
      var default_print_format = locals.DocType[doctype2].default_print_format;
      let enable_raw_printing = frappe.model.get_doc(":Print Settings", "Print Settings").enable_raw_printing;
      var print_formats = frappe.get_list("Print Format", { doc_type: doctype2 }).sort(function(a2, b2) {
        return a2 > b2 ? 1 : -1;
      });
      $.each(print_formats, function(i2, d2) {
        if (!in_list(print_format_list, d2.name) && d2.print_format_type !== "JS" && (cint(enable_raw_printing) || !d2.raw_printing)) {
          print_format_list.push(d2.name);
        }
      });
      if (default_print_format && default_print_format != "Standard") {
        var index = print_format_list.indexOf(default_print_format);
        print_format_list.splice(index, 1).sort();
        print_format_list.unshift(default_print_format);
      }
      return print_format_list;
    },
    sync_messages: function(doc2) {
      if (doc2.__messages) {
        $.extend(frappe._messages, doc2.__messages);
      }
    },
    get_field_currency: function(df, doc2) {
      var currency = frappe.boot.sysdefaults.currency;
      if (!doc2 && cur_frm)
        doc2 = cur_frm.doc;
      if (df && df.options) {
        if (doc2 && df.options.indexOf(":") != -1) {
          var options = df.options.split(":");
          if (options.length == 3) {
            var docname = doc2[options[1]];
            if (!docname && cur_frm) {
              docname = cur_frm.doc[options[1]];
            }
            currency = frappe.model.get_value(options[0], docname, options[2]) || frappe.model.get_value(":" + options[0], docname, options[2]) || currency;
          }
        } else if (doc2 && doc2[df.options]) {
          currency = doc2[df.options];
        } else if (cur_frm && cur_frm.doc[df.options]) {
          currency = cur_frm.doc[df.options];
        }
      }
      return currency;
    },
    get_field_precision: function(df, doc2) {
      var precision3 = null;
      if (df && df.precision) {
        precision3 = cint(df.precision);
      } else if (df && df.fieldtype === "Currency") {
        precision3 = cint(frappe.defaults.get_default("currency_precision"));
        if (!precision3) {
          var number_format = get_number_format();
          var number_format_info = get_number_format_info(number_format);
          precision3 = number_format_info.precision;
        }
      } else {
        precision3 = cint(frappe.defaults.get_default("float_precision")) || 3;
      }
      return precision3;
    }
  });

  // frappe/public/js/frappe/model/sync.js
  Object.assign(frappe.model, {
    docinfo: {},
    sync: function(r2) {
      var isPlain;
      if (!r2.docs && !r2.docinfo)
        r2 = { docs: r2 };
      isPlain = $.isPlainObject(r2.docs);
      if (isPlain)
        r2.docs = [r2.docs];
      if (r2.docs) {
        for (var i2 = 0, l2 = r2.docs.length; i2 < l2; i2++) {
          var d2 = r2.docs[i2];
          if (locals[d2.doctype] && locals[d2.doctype][d2.name]) {
            frappe.model.update_in_locals(d2);
          } else {
            frappe.model.add_to_locals(d2);
          }
          d2.__last_sync_on = new Date();
          if (d2.doctype === "DocType") {
            frappe.meta.sync(d2);
          }
          if (d2.localname) {
            frappe.model.rename_after_save(d2, i2);
          }
        }
      }
      frappe.model.sync_docinfo(r2);
      return r2.docs;
    },
    rename_after_save: (d2, i2) => {
      frappe.model.new_names[d2.localname] = d2.name;
      $(document).trigger("rename", [d2.doctype, d2.localname, d2.name]);
      delete locals[d2.doctype][d2.localname];
      if (i2 === 0) {
        frappe.model.docinfo[d2.doctype][d2.name] = frappe.model.docinfo[d2.doctype][d2.localname];
        frappe.model.docinfo[d2.doctype][d2.localname] = void 0;
      }
    },
    sync_docinfo: (r2) => {
      if (r2.docinfo) {
        var doc2;
        if (r2.docs) {
          doc2 = r2.docs[0];
        } else {
          if (cur_frm)
            doc2 = cur_frm.doc;
        }
        if (doc2) {
          if (!frappe.model.docinfo[doc2.doctype])
            frappe.model.docinfo[doc2.doctype] = {};
          frappe.model.docinfo[doc2.doctype][doc2.name] = r2.docinfo;
        }
        Object.assign(frappe.boot.user_info, r2.docinfo.user_info);
      }
      return r2.docs;
    },
    add_to_locals: function(doc2) {
      if (!locals[doc2.doctype])
        locals[doc2.doctype] = {};
      if (!doc2.name && doc2.__islocal) {
        if (!doc2.parentfield)
          frappe.model.clear_doc(doc2);
        doc2.name = frappe.model.get_new_name(doc2.doctype);
        if (!doc2.parentfield)
          frappe.provide("frappe.model.docinfo." + doc2.doctype + "." + doc2.name);
      }
      locals[doc2.doctype][doc2.name] = doc2;
      let meta2 = frappe.get_meta(doc2.doctype);
      let is_table = meta2 ? meta2.istable : doc2.parentfield;
      if (!is_table) {
        for (var i2 in doc2) {
          var value = doc2[i2];
          if ($.isArray(value)) {
            for (var x2 = 0, y2 = value.length; x2 < y2; x2++) {
              var d2 = value[x2];
              if (typeof d2 == "object" && !d2.parent)
                d2.parent = doc2.name;
              frappe.model.add_to_locals(d2);
            }
          }
        }
      }
    },
    update_in_locals: function(doc2) {
      let local_doc = locals[doc2.doctype][doc2.name];
      let clear_keys = function(source, target) {
        Object.keys(target).map((key2) => {
          if (source[key2] == void 0)
            delete target[key2];
        });
      };
      for (let fieldname in doc2) {
        let df = frappe.meta.get_field(doc2.doctype, fieldname);
        if (df && frappe.model.table_fields.includes(df.fieldtype)) {
          if (!(doc2[fieldname] instanceof Array)) {
            doc2[fieldname] = [];
          }
          if (!(local_doc[fieldname] instanceof Array)) {
            local_doc[fieldname] = [];
          }
          for (let i2 = 0; i2 < doc2[fieldname].length; i2++) {
            let d2 = doc2[fieldname][i2];
            let local_d = local_doc[fieldname][i2];
            if (local_d) {
              if (!locals[d2.doctype])
                locals[d2.doctype] = {};
              if (!d2.name) {
                d2.name = frappe.model.get_new_name(doc2.doctype);
              }
              if (!locals[d2.doctype][d2.name]) {
                delete locals[d2.doctype][local_d.name];
                locals[d2.doctype][d2.name] = local_d;
              }
              Object.assign(local_d, d2);
              clear_keys(d2, local_d);
            } else {
              local_doc[fieldname].push(d2);
              if (!d2.parent)
                d2.parent = doc2.name;
              frappe.model.add_to_locals(d2);
            }
          }
          if (local_doc[fieldname].length > doc2[fieldname].length) {
            for (let i2 = doc2[fieldname].length; i2 < local_doc[fieldname].length; i2++) {
              let d2 = local_doc[fieldname][i2];
              if (locals[d2.doctype] && locals[d2.doctype][d2.name]) {
                delete locals[d2.doctype][d2.name];
              }
            }
            local_doc[fieldname].length = doc2[fieldname].length;
          }
        } else {
          local_doc[fieldname] = doc2[fieldname];
        }
      }
      clear_keys(doc2, local_doc);
    }
  });

  // frappe/public/js/frappe/model/create_new.js
  frappe.provide("frappe.model");
  $.extend(frappe.model, {
    new_names: {},
    new_name_count: {},
    get_new_doc: function(doctype2, parent_doc, parentfield, with_mandatory_children) {
      frappe.provide("locals." + doctype2);
      var doc2 = {
        docstatus: 0,
        doctype: doctype2,
        name: frappe.model.get_new_name(doctype2),
        __islocal: 1,
        __unsaved: 1,
        owner: frappe.session.user
      };
      frappe.model.set_default_values(doc2, parent_doc);
      if (parent_doc) {
        $.extend(doc2, {
          parent: parent_doc.name,
          parentfield,
          parenttype: parent_doc.doctype
        });
        if (!parent_doc[parentfield])
          parent_doc[parentfield] = [];
        doc2.idx = parent_doc[parentfield].length + 1;
        parent_doc[parentfield].push(doc2);
      } else {
        frappe.provide("frappe.model.docinfo." + doctype2 + "." + doc2.name);
      }
      frappe.model.add_to_locals(doc2);
      if (with_mandatory_children) {
        frappe.model.create_mandatory_children(doc2);
      }
      if (!parent_doc) {
        doc2.__run_link_triggers = 1;
      }
      if (frappe.route_options && frappe.route_options.name_field) {
        var meta2 = frappe.get_meta(doctype2);
        if (meta2.autoname && meta2.autoname.indexOf("field:") !== -1) {
          doc2[meta2.autoname.substr(6)] = frappe.route_options.name_field;
        } else if (meta2.title_field) {
          doc2[meta2.title_field] = frappe.route_options.name_field;
        }
        delete frappe.route_options.name_field;
      }
      if (frappe.route_options && !doc2.parent) {
        $.each(frappe.route_options, function(fieldname, value) {
          var df = frappe.meta.has_field(doctype2, fieldname);
          if (df && in_list(["Link", "Data", "Select", "Dynamic Link"], df.fieldtype) && !df.no_copy) {
            doc2[fieldname] = value;
          }
        });
        frappe.route_options = null;
      }
      return doc2;
    },
    make_new_doc_and_get_name: function(doctype2, with_mandatory_children) {
      return frappe.model.get_new_doc(doctype2, null, null, with_mandatory_children).name;
    },
    get_new_name: function(doctype2) {
      var cnt = frappe.model.new_name_count;
      if (!cnt[doctype2])
        cnt[doctype2] = 0;
      cnt[doctype2]++;
      return frappe.router.slug(`new-${doctype2}-${cnt[doctype2]}`);
    },
    set_default_values: function(doc2, parent_doc) {
      var doctype2 = doc2.doctype;
      var docfields = frappe.meta.get_docfields(doctype2);
      var updated = [];
      for (var fid = 0; fid < docfields.length; fid++) {
        var f3 = docfields[fid];
        if (!in_list(frappe.model.no_value_type, f3.fieldtype) && doc2[f3.fieldname] == null) {
          if (f3.no_default)
            continue;
          var v2 = frappe.model.get_default_value(f3, doc2, parent_doc);
          if (v2) {
            if (in_list(["Int", "Check"], f3.fieldtype))
              v2 = cint(v2);
            else if (in_list(["Currency", "Float"], f3.fieldtype))
              v2 = flt(v2);
            doc2[f3.fieldname] = v2;
            updated.push(f3.fieldname);
          } else if (f3.fieldtype == "Select" && f3.options && typeof f3.options === "string" && !in_list(["[Select]", "Loading..."], f3.options)) {
            doc2[f3.fieldname] = f3.options.split("\n")[0];
          }
        }
      }
      return updated;
    },
    create_mandatory_children: function(doc2) {
      var meta2 = frappe.get_meta(doc2.doctype);
      if (meta2 && meta2.istable)
        return;
      frappe.meta.get_docfields(doc2.doctype).forEach(function(df) {
        if (df.fieldtype === "Table" && df.reqd) {
          frappe.model.add_child(doc2, df.fieldname);
        }
      });
    },
    get_default_value: function(df, doc2, parent_doc) {
      var user_default = "";
      var user_permissions = frappe.defaults.get_user_permissions();
      let allowed_records = [];
      let default_doc = null;
      let value = null;
      if (user_permissions) {
        ({
          allowed_records,
          default_doc
        } = frappe.perm.filter_allowed_docs_for_doctype(user_permissions[df.options], doc2.doctype));
      }
      var meta2 = frappe.get_meta(doc2.doctype);
      var has_user_permissions = df.fieldtype === "Link" && !$.isEmptyObject(user_permissions) && df.ignore_user_permissions != 1 && allowed_records.length;
      if (df.fieldtype === "Link" && df.options !== "User") {
        if (has_user_permissions && default_doc) {
          value = default_doc;
        } else {
          if (!df.ignore_user_permissions) {
            var user_defaults = frappe.defaults.get_user_defaults(df.options);
            if (user_defaults && user_defaults.length === 1) {
              user_default = user_defaults[0];
            }
          }
          if (!user_default) {
            user_default = frappe.defaults.get_user_default(df.fieldname);
          } else if (!user_default && df.remember_last_selected_value && frappe.boot.user.last_selected_values) {
            user_default = frappe.boot.user.last_selected_values[df.options];
          }
          var is_allowed_user_default = user_default && (!has_user_permissions || allowed_records.includes(user_default));
          if (is_allowed_user_default) {
            value = user_default;
          }
        }
      }
      if (!value || df["default"]) {
        const default_val = String(df["default"]);
        if (default_val == "__user" || default_val.toLowerCase() == "user") {
          value = frappe.session.user;
        } else if (default_val == "user_fullname") {
          value = frappe.session.user_fullname;
        } else if (default_val == "Today") {
          value = frappe.datetime.get_today();
        } else if ((default_val || "").toLowerCase() === "now") {
          value = frappe.datetime.now_datetime();
        } else if (default_val[0] === ":") {
          var boot_doc = frappe.model.get_default_from_boot_docs(df, doc2, parent_doc);
          var is_allowed_boot_doc = !has_user_permissions || allowed_records.includes(boot_doc);
          if (is_allowed_boot_doc) {
            value = boot_doc;
          }
        } else if (df.fieldname === meta2.title_field) {
          value = "";
        } else {
          var is_allowed_default = !has_user_permissions || allowed_records.includes(df.default);
          if (df.fieldtype !== "Link" || df.options === "User" || is_allowed_default) {
            value = df["default"];
          }
        }
      } else if (df.fieldtype == "Time") {
        value = frappe.datetime.now_time();
      }
      df.__default_value = value;
      return value;
    },
    get_default_from_boot_docs: function(df, doc2, parent_doc) {
      if (frappe.get_list(df["default"]).length > 0) {
        var ref_fieldname = df["default"].slice(1).toLowerCase().replace(" ", "_");
        var ref_value = parent_doc ? parent_doc[ref_fieldname] : frappe.defaults.get_user_default(ref_fieldname);
        var ref_doc = ref_value ? frappe.get_doc(df["default"], ref_value) : null;
        if (ref_doc && ref_doc[df.fieldname]) {
          return ref_doc[df.fieldname];
        }
      }
    },
    add_child: function(parent_doc, doctype2, parentfield, idx) {
      if (arguments.length === 2) {
        parentfield = doctype2;
        doctype2 = frappe.meta.get_field(parent_doc.doctype, parentfield).options;
      }
      idx = idx ? idx - 0.1 : (parent_doc[parentfield] || []).length + 1;
      var child = frappe.model.get_new_doc(doctype2, parent_doc, parentfield);
      child.idx = idx;
      if (idx !== cint(idx)) {
        var sorted = parent_doc[parentfield].sort(function(a2, b2) {
          return a2.idx - b2.idx;
        });
        for (var i2 = 0, j2 = sorted.length; i2 < j2; i2++) {
          var d2 = sorted[i2];
          d2.idx = i2 + 1;
        }
      }
      if (cur_frm && cur_frm.doc == parent_doc)
        cur_frm.dirty();
      return child;
    },
    copy_doc: function(doc2, from_amend, parent_doc, parentfield) {
      var no_copy_list = [
        "name",
        "amended_from",
        "amendment_date",
        "cancel_reason"
      ];
      var newdoc = frappe.model.get_new_doc(doc2.doctype, parent_doc, parentfield);
      for (var key2 in doc2) {
        var df = frappe.meta.get_docfield(doc2.doctype, key2);
        if (df && key2.substr(0, 2) != "__" && !in_list(no_copy_list, key2) && !(df && (!from_amend && cint(df.no_copy) == 1))) {
          var value = doc2[key2] || [];
          if (frappe.model.table_fields.includes(df.fieldtype)) {
            for (var i2 = 0, j2 = value.length; i2 < j2; i2++) {
              var d2 = value[i2];
              frappe.model.copy_doc(d2, from_amend, newdoc, df.fieldname);
            }
          } else {
            newdoc[key2] = doc2[key2];
          }
        }
      }
      var user = frappe.session.user;
      newdoc.__islocal = 1;
      newdoc.docstatus = 0;
      newdoc.owner = user;
      newdoc.creation = "";
      newdoc.modified_by = user;
      newdoc.modified = "";
      newdoc.lft = null;
      newdoc.rgt = null;
      return newdoc;
    },
    open_mapped_doc: function(opts) {
      if (opts.frm && opts.frm.doc.__unsaved) {
        frappe.throw(__("You have unsaved changes in this form. Please save before you continue."));
      } else if (!opts.source_name && opts.frm) {
        opts.source_name = opts.frm.doc.name;
      } else if (!opts.frm && !opts.source_name) {
        opts.source_name = null;
      }
      return frappe.call({
        type: "POST",
        method: "frappe.model.mapper.make_mapped_doc",
        args: {
          method: opts.method,
          source_name: opts.source_name,
          args: opts.args || null,
          selected_children: opts.frm ? opts.frm.get_selected() : null
        },
        freeze: true,
        freeze_message: opts.freeze_message || "",
        callback: function(r2) {
          if (!r2.exc) {
            frappe.model.sync(r2.message);
            if (opts.run_link_triggers) {
              frappe.get_doc(r2.message.doctype, r2.message.name).__run_link_triggers = true;
            }
            frappe.set_route("Form", r2.message.doctype, r2.message.name);
          }
        }
      });
    }
  });
  frappe.create_routes = {};
  frappe.new_doc = function(doctype2, opts, init_callback) {
    if (doctype2 === "File") {
      new frappe.ui.FileUploader({
        folder: opts ? opts.folder : "Home"
      });
      return;
    }
    return new Promise((resolve) => {
      if (opts && $.isPlainObject(opts)) {
        frappe.route_options = opts;
      }
      frappe.model.with_doctype(doctype2, function() {
        if (frappe.create_routes[doctype2]) {
          frappe.set_route(frappe.create_routes[doctype2]).then(() => resolve());
        } else {
          frappe.ui.form.make_quick_entry(doctype2, null, init_callback).then(() => resolve());
        }
      });
    });
  };

  // frappe/public/js/frappe/model/perm.js
  frappe.provide("frappe.perm");
  Object.assign(window, {
    READ: "read",
    WRITE: "write",
    CREATE: "create",
    DELETE: "delete",
    SUBMIT: "submit",
    CANCEL: "cancel",
    AMEND: "amend"
  });
  $.extend(frappe.perm, {
    rights: [
      "select",
      "read",
      "write",
      "create",
      "delete",
      "submit",
      "cancel",
      "amend",
      "report",
      "import",
      "export",
      "print",
      "email",
      "share",
      "set_user_permissions"
    ],
    doctype_perm: {},
    has_perm: (doctype2, permlevel, ptype, doc2) => {
      if (!permlevel)
        permlevel = 0;
      if (!frappe.perm.doctype_perm[doctype2]) {
        frappe.perm.doctype_perm[doctype2] = frappe.perm.get_perm(doctype2);
      }
      let perms = frappe.perm.doctype_perm[doctype2];
      if (!perms || !perms[permlevel])
        return false;
      let perm = !!perms[permlevel][ptype];
      if (permlevel === 0 && perm && doc2) {
        let docinfo = frappe.model.get_docinfo(doctype2, doc2.name);
        if (docinfo && !docinfo.permissions[ptype])
          perm = false;
      }
      return perm;
    },
    get_perm: (doctype2, doc2) => {
      let perm = [{ read: 0, permlevel: 0 }];
      let meta2 = frappe.get_doc("DocType", doctype2);
      const user = frappe.session.user;
      if (user === "Administrator" || frappe.user_roles.includes("Administrator")) {
        perm[0].read = 1;
      }
      if (!meta2)
        return perm;
      perm = frappe.perm.get_role_permissions(meta2);
      if (doc2) {
        let docinfo = frappe.model.get_docinfo(doctype2, doc2.name);
        if (docinfo && docinfo.permissions) {
          Object.keys(docinfo.permissions).forEach((ptype) => {
            perm[0][ptype] = docinfo.permissions[ptype];
          });
        }
        if (!$.isEmptyObject(perm[0].if_owner)) {
          if (doc2.owner === user) {
            $.extend(perm[0], perm[0].if_owner);
          } else {
            $.each(perm[0].if_owner, (ptype) => {
              if (perm[0].if_owner[ptype]) {
                perm[0][ptype] = 0;
              }
            });
          }
        }
        if (docinfo && docinfo.shared) {
          for (let i2 = 0; i2 < docinfo.shared.length; i2++) {
            let s2 = docinfo.shared[i2];
            if (s2.user === user) {
              perm[0]["read"] = perm[0]["read"] || s2.read;
              perm[0]["write"] = perm[0]["write"] || s2.write;
              perm[0]["submit"] = perm[0]["submit"] || s2.submit;
              perm[0]["share"] = perm[0]["share"] || s2.share;
              if (s2.read) {
                perm[0].email = frappe.boot.user.can_email.indexOf(doctype2) !== -1 ? 1 : 0;
                perm[0].print = frappe.boot.user.can_print.indexOf(doctype2) !== -1 ? 1 : 0;
              }
            }
          }
        }
      }
      if (frappe.model.can_read(doctype2) && !perm[0].read) {
        perm[0].read = 1;
      }
      return perm;
    },
    get_role_permissions: (meta2) => {
      let perm = [{ read: 0, permlevel: 0 }];
      (meta2.permissions || []).forEach((p2) => {
        let permlevel = cint(p2.permlevel);
        if (!perm[permlevel]) {
          perm[permlevel] = {};
          perm[permlevel]["permlevel"] = permlevel;
        }
        if (frappe.user_roles.includes(p2.role)) {
          frappe.perm.rights.forEach((right) => {
            let value = perm[permlevel][right] || (p2[right] || 0);
            if (value) {
              perm[permlevel][right] = value;
            }
          });
        }
      });
      perm = perm.map((p2) => p2 || {});
      return perm;
    },
    get_match_rules: (doctype2, ptype) => {
      let match_rules = [];
      if (!ptype)
        ptype = "read";
      let perm = frappe.perm.get_perm(doctype2);
      let user_permissions = frappe.defaults.get_user_permissions();
      if (user_permissions && !$.isEmptyObject(user_permissions)) {
        let rules = {};
        let fields_to_check = frappe.meta.get_fields_to_check_permissions(doctype2);
        $.each(fields_to_check, (i2, df) => {
          const user_permissions_for_doctype = user_permissions[df.options] || [];
          const allowed_records = frappe.perm.get_allowed_docs_for_doctype(user_permissions_for_doctype, doctype2);
          if (allowed_records.length) {
            rules[df.label] = allowed_records;
          }
        });
        if (!$.isEmptyObject(rules)) {
          match_rules.push(rules);
        }
      }
      if (perm[0].if_owner && perm[0].read) {
        match_rules.push({ "Owner": frappe.session.user });
      }
      return match_rules;
    },
    get_field_display_status: (df, doc2, perm, explain) => {
      if (!perm && doc2) {
        perm = frappe.perm.get_perm(doc2.doctype, doc2);
      }
      if (!perm) {
        return df && (cint(df.hidden) || cint(df.hidden_due_to_dependency)) ? "None" : "Write";
      }
      if (!df.permlevel)
        df.permlevel = 0;
      let p2 = perm[df.permlevel];
      let status = "None";
      if (p2) {
        if (p2.write && !df.disabled) {
          status = "Write";
        } else if (p2.read) {
          status = "Read";
        }
      }
      if (explain)
        console.log("By Permission:" + status);
      if (cint(df.hidden))
        status = "None";
      if (explain)
        console.log("By Hidden:" + status);
      if (cint(df.hidden_due_to_dependency))
        status = "None";
      if (explain)
        console.log("By Hidden Due To Dependency:" + status);
      if (!doc2) {
        return status;
      }
      if (status === "Write" && cint(doc2.docstatus) > 0)
        status = "Read";
      if (explain)
        console.log("By Submit:" + status);
      let allow_on_submit = cint(df.allow_on_submit);
      if (status === "Read" && allow_on_submit && cint(doc2.docstatus) === 1 && p2.write) {
        status = "Write";
      }
      if (explain)
        console.log("By Allow on Submit:" + status);
      if (status === "Read" && cur_frm && cur_frm.state_fieldname) {
        if (cint(cur_frm.read_only) || in_list(cur_frm.states.update_fields, df.fieldname) || df.fieldname == cur_frm.state_fieldname) {
          status = "Read";
        }
      }
      if (explain)
        console.log("By Workflow:" + status);
      if (status === "Write" && (cint(df.read_only) || df.fieldtype === "Read Only")) {
        status = "Read";
      }
      if (explain)
        console.log("By Read Only:" + status);
      if (status === "Write" && df.set_only_once && !doc2.__islocal) {
        status = "Read";
      }
      if (explain)
        console.log("By Set Only Once:" + status);
      return status;
    },
    is_visible: (df, doc2, perm) => {
      if (typeof df === "string") {
        df = frappe.meta.get_docfield(doc2.doctype, df, doc2.parent || doc2.name);
      }
      let status = frappe.perm.get_field_display_status(df, doc2, perm);
      return status === "None" ? false : true;
    },
    get_allowed_docs_for_doctype: (user_permissions, doctype2) => {
      return frappe.perm.filter_allowed_docs_for_doctype(user_permissions, doctype2, false);
    },
    filter_allowed_docs_for_doctype: (user_permissions, doctype2, with_default_doc = true) => {
      const filtered_perms = (user_permissions || []).filter((perm) => {
        return perm.applicable_for === doctype2 || !perm.applicable_for;
      });
      const allowed_docs = filtered_perms.map((perm) => perm.doc);
      if (with_default_doc) {
        const default_doc = allowed_docs.length === 1 ? allowed_docs : filtered_perms.filter((perm) => perm.is_default).map((record) => record.doc);
        return {
          allowed_records: allowed_docs,
          default_doc: default_doc[0]
        };
      } else {
        return allowed_docs;
      }
    }
  });

  // frappe/public/js/frappe/model/workflow.js
  frappe.provide("frappe.workflow");
  frappe.workflow = {
    state_fields: {},
    workflows: {},
    setup: function(doctype2) {
      var wf = frappe.get_list("Workflow", { document_type: doctype2 });
      if (wf.length) {
        frappe.workflow.workflows[doctype2] = wf[0];
        frappe.workflow.state_fields[doctype2] = wf[0].workflow_state_field;
      } else {
        frappe.workflow.state_fields[doctype2] = null;
      }
    },
    get_state_fieldname: function(doctype2) {
      if (frappe.workflow.state_fields[doctype2] === void 0) {
        frappe.workflow.setup(doctype2);
      }
      return frappe.workflow.state_fields[doctype2];
    },
    get_default_state: function(doctype2, docstatus) {
      frappe.workflow.setup(doctype2);
      var value = null;
      $.each(frappe.workflow.workflows[doctype2].states, function(i2, workflow_state) {
        if (cint(workflow_state.doc_status) === cint(docstatus)) {
          value = workflow_state.state;
          return false;
        }
      });
      return value;
    },
    get_transitions: function(doc2) {
      frappe.workflow.setup(doc2.doctype);
      return frappe.xcall("frappe.model.workflow.get_transitions", { doc: doc2 });
    },
    get_document_state: function(doctype2, state) {
      frappe.workflow.setup(doctype2);
      return frappe.get_children(frappe.workflow.workflows[doctype2], "states", { state })[0];
    },
    is_self_approval_enabled: function(doctype2) {
      return frappe.workflow.workflows[doctype2].allow_self_approval;
    },
    is_read_only: function(doctype2, name2) {
      var state_fieldname = frappe.workflow.get_state_fieldname(doctype2);
      if (state_fieldname) {
        var doc2 = locals[doctype2][name2];
        if (!doc2)
          return false;
        if (doc2.__islocal)
          return false;
        var state = doc2[state_fieldname] || frappe.workflow.get_default_state(doctype2, doc2.docstatus);
        var allow_edit = state ? frappe.workflow.get_document_state(doctype2, state) && frappe.workflow.get_document_state(doctype2, state).allow_edit : null;
        if (!frappe.user_roles.includes(allow_edit)) {
          return true;
        }
      }
      return false;
    },
    get_update_fields: function(doctype2) {
      var update_fields = $.unique($.map(frappe.workflow.workflows[doctype2].states || [], function(d2) {
        return d2.update_field;
      }));
      return update_fields;
    },
    get_state(doc2) {
      const state_field = this.get_state_fieldname(doc2.doctype);
      let state = doc2[state_field];
      if (!state) {
        state = this.get_default_state(doc2.doctype, doc2.docstatus);
      }
      return state;
    },
    get_all_transitions(doctype2) {
      return frappe.workflow.workflows[doctype2].transitions || [];
    },
    get_all_transition_actions(doctype2) {
      const transitions = this.get_all_transitions(doctype2);
      return transitions.map((transition) => {
        return transition.action;
      });
    }
  };

  // frappe/public/js/frappe/model/user_settings.js
  frappe.provide("frappe.model.user_settings");
  $.extend(frappe.model.user_settings, {
    get: function(doctype2) {
      return frappe.call("frappe.model.utils.user_settings.get", { doctype: doctype2 }).then((r2) => JSON.parse(r2.message || "{}"));
    },
    save: function(doctype2, key2, value) {
      if (frappe.session.user === "Guest")
        return Promise.resolve();
      const old_user_settings = frappe.model.user_settings[doctype2] || {};
      const new_user_settings = $.extend(true, {}, old_user_settings);
      if ($.isPlainObject(value)) {
        new_user_settings[key2] = new_user_settings[key2] || {};
        $.extend(new_user_settings[key2], value);
      } else {
        new_user_settings[key2] = value;
      }
      const a2 = JSON.stringify(old_user_settings);
      const b2 = JSON.stringify(new_user_settings);
      if (a2 !== b2) {
        return this.update(doctype2, new_user_settings);
      }
      return Promise.resolve(new_user_settings);
    },
    remove: function(doctype2, key2) {
      var user_settings = frappe.model.user_settings[doctype2] || {};
      delete user_settings[key2];
      return this.update(doctype2, user_settings);
    },
    update: function(doctype2, user_settings) {
      if (frappe.session.user === "Guest")
        return Promise.resolve();
      return frappe.call({
        method: "frappe.model.utils.user_settings.save",
        args: {
          doctype: doctype2,
          user_settings
        },
        callback: function(r2) {
          frappe.model.user_settings[doctype2] = r2.message;
        }
      });
    }
  });
  frappe.get_user_settings = function(doctype2, key2) {
    var settings = frappe.model.user_settings[doctype2] || {};
    if (key2) {
      settings = settings[key2] || {};
    }
    return settings;
  };

  // frappe/public/js/frappe/utils/user.js
  frappe.user_info = function(uid) {
    if (!uid)
      uid = frappe.session.user;
    if (!(frappe.boot.user_info && frappe.boot.user_info[uid])) {
      var user_info = { fullname: uid || "Unknown" };
    } else {
      var user_info = frappe.boot.user_info[uid];
    }
    user_info.abbr = frappe.get_abbr(user_info.fullname);
    user_info.color = frappe.get_palette(user_info.fullname);
    return user_info;
  };
  frappe.provide("frappe.user");
  $.extend(frappe.user, {
    name: "Guest",
    full_name: function(uid) {
      return uid === frappe.session.user ? __("You", null, "Name of the current user. For example: You edited this 5 hours ago.") : frappe.user_info(uid).fullname;
    },
    image: function(uid) {
      return frappe.user_info(uid).image;
    },
    abbr: function(uid) {
      return frappe.user_info(uid).abbr;
    },
    has_role: function(rl) {
      if (typeof rl == "string")
        rl = [rl];
      for (var i2 in rl) {
        if ((frappe.boot ? frappe.boot.user.roles : ["Guest"]).indexOf(rl[i2]) != -1)
          return true;
      }
    },
    get_desktop_items: function() {
      var modules_list = $.map(frappe.boot.allowed_modules, function(icon) {
        var m2 = icon.module_name;
        var type = frappe.modules[m2] && frappe.modules[m2].type;
        if (frappe.boot.user.allow_modules.indexOf(m2) === -1)
          return null;
        var ret = null;
        if (type === "module") {
          if (frappe.boot.user.allow_modules.indexOf(m2) != -1 || frappe.modules[m2].is_help)
            ret = m2;
        } else if (type === "page") {
          if (frappe.boot.allowed_pages.indexOf(frappe.modules[m2].link) != -1)
            ret = m2;
        } else if (type === "list") {
          if (frappe.model.can_read(frappe.modules[m2]._doctype))
            ret = m2;
        } else if (type === "view") {
          ret = m2;
        } else if (type === "setup") {
          if (frappe.user.has_role("System Manager") || frappe.user.has_role("Administrator"))
            ret = m2;
        } else {
          ret = m2;
        }
        return ret;
      });
      return modules_list;
    },
    is_report_manager: function() {
      return frappe.user.has_role(["Administrator", "System Manager", "Report Manager"]);
    },
    get_formatted_email: function(email) {
      var fullname = frappe.user.full_name(email);
      if (!fullname) {
        return email;
      } else {
        var quote = "";
        if (fullname.search(/[\[\]\\()<>@,:;".]/) !== -1) {
          quote = '"';
        }
        return repl("%(quote)s%(fullname)s%(quote)s <%(email)s>", {
          fullname,
          email,
          quote
        });
      }
    },
    get_emails: () => {
      return Object.keys(frappe.boot.user_info).map((key2) => frappe.boot.user_info[key2].email);
    },
    toString: function() {
      return this.name;
    }
  });
  frappe.session_alive = true;
  $(document).bind("mousemove", function() {
    if (frappe.session_alive === false) {
      $(document).trigger("session_alive");
    }
    frappe.session_alive = true;
    if (frappe.session_alive_timeout)
      clearTimeout(frappe.session_alive_timeout);
    frappe.session_alive_timeout = setTimeout("frappe.session_alive=false;", 3e4);
  });

  // frappe/public/js/frappe/utils/common.js
  var import_md5 = __toESM(require_md5());
  frappe.avatar = function(user, css_class, title, image_url = null, remove_color = false, filterable = false) {
    let user_info;
    if (user) {
      user_info = frappe.user_info(user);
    } else {
      let full_name = title || frappe.get_cookie("full_name");
      user_info = {
        image: image_url === null ? frappe.get_cookie("user_image") : image_url,
        fullname: full_name,
        abbr: frappe.get_abbr(full_name),
        color: frappe.get_palette(full_name)
      };
    }
    if (!title) {
      title = user_info.fullname;
    }
    let data_attr = "";
    if (filterable) {
      css_class += " filterable";
      data_attr = `data-filter="_assign,like,%${user}%"`;
    }
    return frappe.get_avatar(css_class, title, image_url || user_info.image, remove_color, data_attr);
  };
  frappe.get_avatar = function(css_class, title, image_url = null, remove_color, data_attributes) {
    if (!css_class) {
      css_class = "avatar-small";
    }
    if (image_url) {
      const image = window.cordova && image_url.indexOf("http") === -1 ? frappe.base_url + image_url : image_url;
      return `<span class="avatar ${css_class}" title="${title}" ${data_attributes}>
				<span class="avatar-frame" style='background-image: url("${image}")'
					title="${title}"></span>
			</span>`;
    } else {
      let abbr = frappe.get_abbr(title);
      let style = "";
      if (!remove_color) {
        let color = frappe.get_palette(title);
        style = `background-color: var(${color[0]}); color: var(${color[1]})`;
      }
      if (css_class === "avatar-small" || css_class == "avatar-xs") {
        abbr = abbr.substr(0, 1);
      }
      return `<span class="avatar ${css_class}" title="${title}" ${data_attributes}>
			<div class="avatar-frame standard-image"
				style="${style}">
					${abbr}
			</div>
		</span>`;
    }
  };
  frappe.avatar_group = function(users, limit = 4, options = {}) {
    let avatar_action_html = "";
    const display_users = users.slice(0, limit);
    const extra_users = users.slice(limit);
    const css_class = options.css_class || "";
    let html = display_users.map((user) => frappe.avatar(user, "avatar-small " + css_class, null, null, false, options.filterable)).join("");
    if (extra_users.length === 1) {
      html += frappe.avatar(extra_users[0], "avatar-small " + css_class, null, null, false, options.filterable);
    } else if (extra_users.length > 1) {
      html = `
			${html}
			<span class="avatar avatar-small ${css_class}">
				<div class="avatar-frame standard-image avatar-extra-count"
					title="${extra_users.map((u2) => frappe.user_info(u2).fullname).join(", ")}">
					+${extra_users.length}
				</div>
			</span>
		`;
    }
    if (options.action_icon) {
      avatar_action_html = `
			<span class="avatar avatar-small">
				<div class="avatar-frame avatar-action">
					${frappe.utils.icon(options.action_icon, "sm")}
				</div>
			</span>
		`;
    }
    const $avatar_group = $(`<div class="avatar-group ${options.align || "right"} ${options.overlap != false ? "overlap" : ""}">
			${html}
			${avatar_action_html}
		</div>`);
    $avatar_group.find(".avatar-action").on("click", options.action);
    return $avatar_group;
  };
  frappe.ui.scroll = function(element, animate, additional_offset) {
    var header_offset = $(".navbar").height() + $(".page-head").height();
    var top = $(element).offset().top - header_offset - cint(additional_offset);
    if (animate) {
      $("html, body").animate({ scrollTop: top });
    } else {
      $(window).scrollTop(top);
    }
  };
  frappe.palette = [
    ["--orange-avatar-bg", "--orange-avatar-color"],
    ["--pink-avatar-bg", "--pink-avatar-color"],
    ["--blue-avatar-bg", "--blue-avatar-color"],
    ["--green-avatar-bg", "--green-avatar-color"],
    ["--dark-green-avatar-bg", "--dark-green-avatar-color"],
    ["--red-avatar-bg", "--red-avatar-color"],
    ["--yellow-avatar-bg", "--yellow-avatar-color"],
    ["--purple-avatar-bg", "--purple-avatar-color"],
    ["--gray-avatar-bg", "--gray-avatar-color0"]
  ];
  frappe.get_palette = function(txt2) {
    var idx = cint((parseInt((0, import_md5.default)(txt2).substr(4, 2), 16) + 1) / 5.33);
    return frappe.palette[idx % 8];
  };
  frappe.get_abbr = function(txt2, max_length) {
    if (!txt2)
      return "";
    var abbr = "";
    $.each(txt2.split(" "), function(i2, w2) {
      if (abbr.length >= (max_length || 2)) {
        return false;
      } else if (!w2.trim().length) {
        return true;
      }
      abbr += w2.trim()[0];
    });
    return abbr || "?";
  };
  frappe.gravatars = {};
  frappe.get_gravatar = function(email_id, size = 0) {
    var param = size ? "s=" + size : "d=retro";
    if (!frappe.gravatars[email_id]) {
      frappe.gravatars[email_id] = "https://secure.gravatar.com/avatar/" + (0, import_md5.default)(email_id) + "?" + param;
    }
    return frappe.gravatars[email_id];
  };
  window.repl = function repl2(s2, dict) {
    if (s2 == null)
      return "";
    for (var key2 in dict) {
      s2 = s2.split("%(" + key2 + ")s").join(dict[key2]);
    }
    return s2;
  };
  window.replace_all = function(s2, t1, t22) {
    return s2.split(t1).join(t22);
  };
  window.strip_html = function(txt2) {
    return cstr(txt2).replace(/<[^>]*>/g, "");
  };
  window.strip = function(s2, chars) {
    if (s2) {
      s2 = lstrip(s2, chars);
      s2 = rstrip(s2, chars);
      return s2;
    }
  };
  window.lstrip = function lstrip2(s2, chars) {
    if (!chars)
      chars = ["\n", "	", " "];
    let first_char = s2.substr(0, 1);
    while (in_list(chars, first_char)) {
      s2 = s2.substr(1);
      first_char = s2.substr(0, 1);
    }
    return s2;
  };
  window.rstrip = function(s2, chars) {
    if (!chars)
      chars = ["\n", "	", " "];
    let last_char = s2.substr(s2.length - 1);
    while (in_list(chars, last_char)) {
      s2 = s2.substr(0, s2.length - 1);
      last_char = s2.substr(s2.length - 1);
    }
    return s2;
  };
  frappe.get_cookie = function getCookie(name2) {
    return frappe.get_cookies()[name2];
  };
  frappe.get_cookies = function getCookies() {
    var c2 = document.cookie, v2 = 0, cookies = {};
    if (document.cookie.match(/^\s*\$Version=(?:"1"|1);\s*(.*)/)) {
      c2 = RegExp.$1;
      v2 = 1;
    }
    if (v2 === 0) {
      c2.split(/[,;]/).map(function(cookie) {
        var parts = cookie.split(/=/, 2), name2 = decodeURIComponent(parts[0].trimLeft()), value = parts.length > 1 ? decodeURIComponent(parts[1].trimRight()) : null;
        if (value && value.charAt(0) === '"') {
          value = value.substr(1, value.length - 2);
        }
        cookies[name2] = value;
      });
    } else {
      c2.match(/(?:^|\s+)([!#$%&'*+\-.0-9A-Z^`a-z|~]+)=([!#$%&'*+\-.0-9A-Z^`a-z|~]*|"(?:[\x20-\x7E\x80\xFF]|\\[\x00-\x7F])*")(?=\s*[,;]|$)/g).map(function($0, $1) {
        var name2 = $0, value = $1.charAt(0) === '"' ? $1.substr(1, -1).replace(/\\(.)/g, "$1") : $1;
        cookies[name2] = value;
      });
    }
    return cookies;
  };
  frappe.is_mobile = function() {
    return $(document).width() < 768;
  };
  frappe.utils.xss_sanitise = function(string, options) {
    let sanitised = string;
    const DEFAULT_OPTIONS = {
      strategies: ["html", "js"]
    };
    const HTML_ESCAPE_MAP = {
      "<": "&lt;",
      ">": "&gt;",
      '"': "&quot;",
      "'": "&#x27;",
      "/": "&#x2F;"
    };
    const REGEX_SCRIPT = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;
    const REGEX_ALERT = /confirm\(.*\)|alert\(.*\)|prompt\(.*\)/gi;
    options = Object.assign({}, DEFAULT_OPTIONS, options);
    if (options.strategies.includes("js")) {
      sanitised = sanitised.replace(REGEX_SCRIPT, "");
      sanitised = sanitised.replace(REGEX_ALERT, "");
    }
    if (options.strategies.includes("html")) {
      for (let char in HTML_ESCAPE_MAP) {
        const escape2 = HTML_ESCAPE_MAP[char];
        const regex = new RegExp(char, "g");
        sanitised = sanitised.replace(regex, escape2);
      }
    }
    return sanitised;
  };
  frappe.utils.sanitise_redirect = (url) => {
    const is_external = (() => {
      return (url2) => {
        function domain(url3) {
          let base_domain = /^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:/\n?]+)/img.exec(url3);
          return base_domain == null ? "" : base_domain[1];
        }
        function is_absolute(url3) {
          return /^(?:[a-z]+:)?\/\//i.test(url3);
        }
        return is_absolute(url2) ? domain(location.href) !== domain(url2) : false;
      };
    })();
    const sanitise_javascript = (url2) => {
      const REGEX_SCRIPT = /j[\s]*(&#x.{1,7})?a[\s]*(&#x.{1,7})?v[\s]*(&#x.{1,7})?a[\s]*(&#x.{1,7})?s[\s]*(&#x.{1,7})?c[\s]*(&#x.{1,7})?r[\s]*(&#x.{1,7})?i[\s]*(&#x.{1,7})?p[\s]*(&#x.{1,7})?t/gi;
      return url2.replace(REGEX_SCRIPT, "");
    };
    url = frappe.utils.strip_url(url);
    return is_external(url) ? "" : sanitise_javascript(frappe.utils.xss_sanitise(url, { strategies: ["js"] }));
  };
  frappe.utils.strip_url = (url) => {
    return url.replace(/^[^A-Za-z0-9(//)#]+/g, "");
  };
  frappe.utils.new_auto_repeat_prompt = function(frm) {
    const fields = [
      {
        "fieldname": "frequency",
        "fieldtype": "Select",
        "label": __("Frequency"),
        "reqd": 1,
        "options": [
          { "label": __("Daily"), "value": "Daily" },
          { "label": __("Weekly"), "value": "Weekly" },
          { "label": __("Monthly"), "value": "Monthly" },
          { "label": __("Quarterly"), "value": "Quarterly" },
          { "label": __("Half-yearly"), "value": "Half-yearly" },
          { "label": __("Yearly"), "value": "Yearly" }
        ]
      },
      {
        "fieldname": "start_date",
        "fieldtype": "Date",
        "label": __("Start Date"),
        "reqd": 1,
        "default": frappe.datetime.nowdate()
      },
      {
        "fieldname": "end_date",
        "fieldtype": "Date",
        "label": __("End Date")
      }
    ];
    frappe.prompt(fields, function(values) {
      frappe.call({
        method: "frappe.automation.doctype.auto_repeat.auto_repeat.make_auto_repeat",
        args: {
          "doctype": frm.doc.doctype,
          "docname": frm.doc.name,
          "frequency": values["frequency"],
          "start_date": values["start_date"],
          "end_date": values["end_date"]
        },
        callback: function(r2) {
          if (r2.message) {
            frappe.show_alert({
              "message": __("Auto Repeat created for this document"),
              "indicator": "green"
            });
            frm.reload_doc();
          }
        }
      });
    }, __("Auto Repeat"), __("Save"));
  };
  frappe.utils.get_page_view_count = function(route) {
    return frappe.call("frappe.website.doctype.web_page_view.web_page_view.get_page_view_count", {
      path: route
    });
  };

  // frappe/public/js/frappe/utils/urllib.js
  frappe.urllib = {
    get_arg: function(name2) {
      name2 = name2.replace(/[[]/, "\\[").replace(/[\]]/, "\\]");
      var regexS = "[\\?&]" + name2 + "=([^&#]*)";
      var regex = new RegExp(regexS);
      var results = regex.exec(window.location.href);
      if (results == null)
        return "";
      else
        return decodeURIComponent(results[1]);
    },
    get_dict: function() {
      var d2 = {};
      var t3 = window.location.href.split("?")[1];
      if (!t3)
        return d2;
      if (t3.indexOf("#") != -1)
        t3 = t3.split("#")[0];
      if (!t3)
        return d2;
      t3 = t3.split("&");
      for (var i2 = 0; i2 < t3.length; i2++) {
        var a2 = t3[i2].split("=");
        d2[decodeURIComponent(a2[0])] = decodeURIComponent(a2[1]);
      }
      return d2;
    },
    get_base_url: function() {
      var url = frappe.base_url || window.location.origin;
      if (url.substr(url.length - 1, 1) == "/")
        url = url.substr(0, url.length - 1);
      return url;
    },
    get_full_url: function(url) {
      if (url.indexOf("http://") === 0 || url.indexOf("https://") === 0) {
        return url;
      }
      return url.substr(0, 1) === "/" ? frappe.urllib.get_base_url() + url : frappe.urllib.get_base_url() + "/" + url;
    }
  };
  window.open_url_post = function open_url_post(URL2, PARAMS, new_window) {
    if (window.cordova) {
      let url = URL2 + "api/method/" + PARAMS.cmd + frappe.utils.make_query_string(PARAMS, false);
      window.location.href = url;
    } else {
      var temp = document.createElement("form");
      temp.action = URL2;
      temp.method = "POST";
      temp.style.display = "none";
      if (new_window) {
        temp.target = "_blank";
      }
      PARAMS["csrf_token"] = frappe.csrf_token;
      for (var x2 in PARAMS) {
        var opt = document.createElement("textarea");
        opt.name = x2;
        var val2 = PARAMS[x2];
        if (typeof val2 != "string")
          val2 = JSON.stringify(val2);
        opt.value = val2;
        temp.appendChild(opt);
      }
      document.body.appendChild(temp);
      temp.submit();
      return temp;
    }
  };
  window.get_url_arg = frappe.urllib.get_arg;
  window.get_url_dict = frappe.urllib.get_dict;

  // frappe/public/js/frappe/utils/pretty_date.js
  function prettyDate(date, mini) {
    if (!date)
      return "";
    if (typeof date == "string") {
      date = frappe.datetime.convert_to_user_tz(date);
      date = new Date((date || "").replace(/-/g, "/").replace(/[TZ]/g, " ").replace(/\.[0-9]*/, ""));
    }
    let diff = (new Date(frappe.datetime.now_datetime()).getTime() - date.getTime()) / 1e3;
    let day_diff = Math.floor(diff / 86400);
    if (isNaN(day_diff) || day_diff < 0)
      return "";
    if (mini) {
      if (day_diff == 0) {
        if (diff < 60) {
          return __("now");
        } else if (diff < 3600) {
          return __("{0} m", [Math.floor(diff / 60)]);
        } else if (diff < 86400) {
          return __("{0} h", [Math.floor(diff / 3600)]);
        }
      } else {
        if (day_diff < 7) {
          return __("{0} d", [day_diff]);
        } else if (day_diff < 31) {
          return __("{0} w", [Math.floor(day_diff / 7)]);
        } else if (day_diff < 365) {
          return __("{0} M", [Math.floor(day_diff / 30)]);
        } else {
          return __("{0} y", [Math.floor(day_diff / 365)]);
        }
      }
    } else {
      if (day_diff == 0) {
        if (diff < 60) {
          return __("just now");
        } else if (diff < 120) {
          return __("1 minute ago");
        } else if (diff < 3600) {
          return __("{0} minutes ago", [Math.floor(diff / 60)]);
        } else if (diff < 7200) {
          return __("1 hour ago");
        } else if (diff < 86400) {
          return __("{0} hours ago", [Math.floor(diff / 3600)]);
        }
      } else {
        if (day_diff == 1) {
          return __("yesterday");
        } else if (day_diff < 7) {
          return __("{0} days ago", [day_diff]);
        } else if (day_diff < 14) {
          return __("1 week ago");
        } else if (day_diff < 31) {
          return __("{0} weeks ago", [Math.floor(day_diff / 7)]);
        } else if (day_diff < 62) {
          return __("1 month ago");
        } else if (day_diff < 365) {
          return __("{0} months ago", [Math.floor(day_diff / 30)]);
        } else if (day_diff < 730) {
          return __("1 year ago");
        } else {
          return __("{0} years ago", [Math.floor(day_diff / 365)]);
        }
      }
    }
  }
  frappe.provide("frappe.datetime");
  window.comment_when = function(datetime, mini) {
    var timestamp = frappe.datetime.str_to_user ? frappe.datetime.str_to_user(datetime) : datetime;
    return '<span class="frappe-timestamp ' + (mini ? " mini" : "") + '" data-timestamp="' + datetime + '" title="' + timestamp + '">' + prettyDate(datetime, mini) + "</span>";
  };
  frappe.datetime.comment_when = comment_when;
  frappe.datetime.prettyDate = prettyDate;
  frappe.datetime.refresh_when = function() {
    if (jQuery) {
      $(".frappe-timestamp").each(function() {
        $(this).html(prettyDate($(this).attr("data-timestamp"), $(this).hasClass("mini")));
      });
    }
  };
  setInterval(function() {
    frappe.datetime.refresh_when();
  }, 6e4);

  // frappe/public/js/frappe/utils/tools.js
  var import_showdown = __toESM(require_showdown());
  frappe.provide("frappe.tools");
  frappe.tools.downloadify = function(data, roles, title) {
    if (roles && roles.length && !has_common(roles, roles)) {
      frappe.msgprint(__("Export not allowed. You need {0} role to export.", [frappe.utils.comma_or(roles)]));
      return;
    }
    var filename = title + ".csv";
    var csv_data = frappe.tools.to_csv(data);
    var a2 = document.createElement("a");
    if ("download" in a2) {
      var blob_object = new Blob([csv_data], { type: "text/csv;charset=UTF-8" });
      a2.href = URL.createObjectURL(blob_object);
      a2.download = filename;
    } else {
      a2.href = "data:attachment/csv," + encodeURIComponent(csv_data);
      a2.download = filename;
      a2.target = "_blank";
    }
    document.body.appendChild(a2);
    a2.click();
    document.body.removeChild(a2);
  };
  frappe.markdown = function(txt2) {
    if (!frappe.md2html) {
      frappe.md2html = new import_showdown.default.Converter();
    }
    while (txt2.substr(0, 1) === "\n") {
      txt2 = txt2.substr(1);
    }
    var whitespace_len = 0, first_line = txt2.split("\n")[0];
    while (["\n", "	"].indexOf(first_line.substr(0, 1)) !== -1) {
      whitespace_len++;
      first_line = first_line.substr(1);
    }
    if (whitespace_len && whitespace_len != first_line.length) {
      var txt1 = [];
      $.each(txt2.split("\n"), function(i2, t3) {
        txt1.push(t3.substr(whitespace_len));
      });
      txt2 = txt1.join("\n");
    }
    return frappe.md2html.makeHtml(txt2);
  };
  frappe.tools.to_csv = function(data) {
    var res = [];
    $.each(data, function(i2, row) {
      row = $.map(row, function(col) {
        if (col === null || col === void 0)
          col = "";
        return typeof col === "string" ? '"' + $("<i>").html(col.replace(/"/g, '""')).text() + '"' : col;
      });
      res.push(row.join(","));
    });
    return res.join("\n");
  };

  // frappe/public/js/frappe/utils/datetime.js
  frappe.provide("frappe.datetime");
  frappe.defaultDateFormat = "YYYY-MM-DD";
  frappe.defaultTimeFormat = "HH:mm:ss";
  frappe.defaultDatetimeFormat = frappe.defaultDateFormat + " " + frappe.defaultTimeFormat;
  moment.defaultFormat = frappe.defaultDateFormat;
  frappe.provide("frappe.datetime");
  $.extend(frappe.datetime, {
    convert_to_user_tz: function(date, format2) {
      let date_obj = null;
      if (frappe.boot.time_zone && frappe.boot.time_zone.system && frappe.boot.time_zone.user) {
        date_obj = moment.tz(date, frappe.boot.time_zone.system).clone().tz(frappe.boot.time_zone.user);
      } else {
        date_obj = moment(date);
      }
      return format2 === false ? date_obj : date_obj.format(frappe.defaultDatetimeFormat);
    },
    convert_to_system_tz: function(date, format2) {
      let date_obj = null;
      if (frappe.boot.time_zone && frappe.boot.time_zone.system && frappe.boot.time_zone.user) {
        date_obj = moment.tz(date, frappe.boot.time_zone.user).clone().tz(frappe.boot.time_zone.system);
      } else {
        date_obj = moment(date);
      }
      return format2 === false ? date_obj : date_obj.format(frappe.defaultDatetimeFormat);
    },
    is_system_time_zone: function() {
      if (frappe.boot.time_zone && frappe.boot.time_zone.system && frappe.boot.time_zone.user) {
        return moment().tz(frappe.boot.time_zone.system).utcOffset() === moment().tz(frappe.boot.time_zone.user).utcOffset();
      }
      return true;
    },
    is_timezone_same: function() {
      return frappe.datetime.is_system_time_zone();
    },
    str_to_obj: function(d2) {
      return moment(d2, frappe.defaultDatetimeFormat)._d;
    },
    obj_to_str: function(d2) {
      return moment(d2).locale("en").format();
    },
    obj_to_user: function(d2) {
      return moment(d2).format(frappe.datetime.get_user_date_fmt().toUpperCase());
    },
    get_diff: function(d1, d2) {
      return moment(d1).diff(d2, "days");
    },
    get_hour_diff: function(d1, d2) {
      return moment(d1).diff(d2, "hours");
    },
    get_day_diff: function(d1, d2) {
      return moment(d1).diff(d2, "days");
    },
    add_days: function(d2, days) {
      return moment(d2).add(days, "days").format();
    },
    add_months: function(d2, months) {
      return moment(d2).add(months, "months").format();
    },
    week_start: function() {
      return moment().startOf("week").format();
    },
    week_end: function() {
      return moment().endOf("week").format();
    },
    month_start: function() {
      return moment().startOf("month").format();
    },
    month_end: function() {
      return moment().endOf("month").format();
    },
    quarter_start: function() {
      return moment().startOf("quarter").format();
    },
    quarter_end: function() {
      return moment().endOf("quarter").format();
    },
    year_start: function() {
      return moment().startOf("year").format();
    },
    year_end: function() {
      return moment().endOf("year").format();
    },
    get_user_time_fmt: function() {
      return frappe.sys_defaults && frappe.sys_defaults.time_format || "HH:mm:ss";
    },
    get_user_date_fmt: function() {
      return frappe.sys_defaults && frappe.sys_defaults.date_format || "yyyy-mm-dd";
    },
    get_user_fmt: function() {
      return frappe.sys_defaults && frappe.sys_defaults.date_format || "yyyy-mm-dd";
    },
    str_to_user: function(val2, only_time = false) {
      if (!val2)
        return "";
      const user_date_fmt = frappe.datetime.get_user_date_fmt().toUpperCase();
      const user_time_fmt = frappe.datetime.get_user_time_fmt();
      let user_format = user_time_fmt;
      if (only_time) {
        let date_obj = moment(val2, frappe.defaultTimeFormat);
        return date_obj.format(user_format);
      } else {
        let date_obj = moment.tz(val2, frappe.boot.time_zone.system);
        if (typeof val2 !== "string" || val2.indexOf(" ") === -1) {
          user_format = user_date_fmt;
        } else {
          user_format = user_date_fmt + " " + user_time_fmt;
        }
        return date_obj.clone().tz(frappe.boot.time_zone.user).format(user_format);
      }
    },
    get_datetime_as_string: function(d2) {
      return moment(d2).format("YYYY-MM-DD HH:mm:ss");
    },
    user_to_str: function(val2, only_time = false) {
      var user_time_fmt = frappe.datetime.get_user_time_fmt();
      if (only_time) {
        return moment(val2, user_time_fmt).format(frappe.defaultTimeFormat);
      }
      var user_fmt = frappe.datetime.get_user_date_fmt().toUpperCase();
      var system_fmt = "YYYY-MM-DD";
      if (val2.indexOf(" ") !== -1) {
        user_fmt += " " + user_time_fmt;
        system_fmt += " HH:mm:ss";
      }
      return moment(val2, [
        user_fmt.replace("YYYY", "YY"),
        user_fmt
      ]).locale("en").format(system_fmt);
    },
    user_to_obj: function(d2) {
      return frappe.datetime.str_to_obj(frappe.datetime.user_to_str(d2));
    },
    global_date_format: function(d2) {
      var m2 = moment(d2);
      if (m2._f && m2._f.indexOf("HH") !== -1) {
        return m2.format("Do MMMM YYYY, h:mma");
      } else {
        return m2.format("Do MMMM YYYY");
      }
    },
    now_date: function(as_obj = false) {
      return frappe.datetime._date(frappe.defaultDateFormat, as_obj);
    },
    now_time: function(as_obj = false) {
      return frappe.datetime._date(frappe.defaultTimeFormat, as_obj);
    },
    now_datetime: function(as_obj = false) {
      return frappe.datetime._date(frappe.defaultDatetimeFormat, as_obj);
    },
    _date: function(format2, as_obj = false) {
      let time_zone = frappe.boot.time_zone ? frappe.boot.time_zone.user || frappe.boot.time_zone.system : frappe.sys_defaults.time_zone;
      let date = moment.tz(time_zone);
      return as_obj ? frappe.datetime.moment_to_date_obj(date) : date.format(format2);
    },
    moment_to_date_obj: function(moment_obj) {
      const date_obj = new Date();
      const date_array = moment_obj.toArray();
      date_obj.setFullYear(date_array[0]);
      date_obj.setMonth(date_array[1]);
      date_obj.setDate(date_array[2]);
      date_obj.setHours(date_array[3]);
      date_obj.setMinutes(date_array[4]);
      date_obj.setSeconds(date_array[5]);
      date_obj.setMilliseconds(date_array[6]);
      return date_obj;
    },
    nowdate: function() {
      return frappe.datetime.now_date();
    },
    get_today: function() {
      return frappe.datetime.now_date();
    },
    get_time: (timestamp) => {
      return moment(timestamp).format("hh:mm A");
    },
    validate: function(d2) {
      return moment(d2, [
        frappe.defaultDateFormat,
        frappe.defaultDatetimeFormat,
        frappe.defaultTimeFormat
      ], true).isValid();
    },
    get_first_day_of_the_week_index() {
      const first_day_of_the_week = frappe.sys_defaults.first_day_of_the_week || "Sunday";
      return moment.weekdays().indexOf(first_day_of_the_week);
    }
  });
  Object.defineProperties(window, {
    "dateutil": {
      get: function() {
        console.warn("Please use `frappe.datetime` instead of `dateutil`. It will be deprecated soon.");
        return frappe.datetime;
      },
      configurable: true
    },
    "date": {
      get: function() {
        console.warn("Please use `frappe.datetime` instead of `date`. It will be deprecated soon.");
        return frappe.datetime;
      },
      configurable: true
    },
    "get_today": {
      get: function() {
        console.warn("Please use `frappe.datetime.get_today` instead of `get_today`. It will be deprecated soon.");
        return frappe.datetime.get_today;
      },
      configurable: true
    }
  });

  // frappe/public/js/frappe/utils/datatype.js
  window.cstr = function(s2) {
    if (s2 == null)
      return "";
    return s2 + "";
  };
  window.cint = function(v2, def) {
    if (v2 === true)
      return 1;
    if (v2 === false)
      return 0;
    v2 = v2 + "";
    if (v2 !== "0")
      v2 = lstrip(v2, ["0"]);
    v2 = parseInt(v2);
    if (isNaN(v2))
      v2 = def === void 0 ? 0 : def;
    return v2;
  };
  window.toTitle = function(str) {
    var word_in = str.split(" ");
    var word_out = [];
    for (var w2 in word_in) {
      word_out[w2] = word_in[w2].charAt(0).toUpperCase() + word_in[w2].slice(1);
    }
    return word_out.join(" ");
  };
  window.is_null = function(v2) {
    if (v2 === null || v2 === void 0 || cstr(v2).trim() === "")
      return true;
  };
  window.copy_dict = function(d2) {
    var n2 = {};
    for (var k2 in d2)
      n2[k2] = d2[k2];
    return n2;
  };
  window.validate_email = function(txt2) {
    return frappe.utils.validate_type(txt2, "email");
  };
  window.validate_phone = function(txt2) {
    return frappe.utils.validate_type(txt2, "phone");
  };
  window.validate_name = function(txt2) {
    return frappe.utils.validate_type(txt2, "name");
  };
  window.validate_url = function(txt2) {
    return frappe.utils.validate_type(txt2, "url");
  };
  window.nth = function(number) {
    number = cint(number);
    var s2 = "th";
    if ((number + "").substr(-1) == "1")
      s2 = "st";
    if ((number + "").substr(-1) == "2")
      s2 = "nd";
    if ((number + "").substr(-1) == "3")
      s2 = "rd";
    return number + s2;
  };
  window.has_words = function(list, item) {
    if (!item)
      return true;
    if (!list)
      return false;
    for (var i2 = 0, j2 = list.length; i2 < j2; i2++) {
      if (item.indexOf(list[i2]) != -1)
        return true;
    }
    return false;
  };
  window.has_common = function(list1, list2) {
    if (!list1 || !list2)
      return false;
    for (var i2 = 0, j2 = list1.length; i2 < j2; i2++) {
      if (in_list(list2, list1[i2]))
        return true;
    }
    return false;
  };

  // frappe/public/js/frappe/utils/number_format.js
  if (!window.frappe)
    window.frappe = {};
  function flt2(v2, decimals, number_format) {
    if (v2 == null || v2 == "")
      return 0;
    if (!(typeof v2 === "number" || String(parseFloat(v2)) == v2)) {
      v2 = v2 + "";
      if (v2.indexOf(" ") != -1) {
        var parts = v2.split(" ");
        v2 = isNaN(parseFloat(parts[0])) ? parts.slice(parts.length - 1).join(" ") : v2;
      }
      v2 = strip_number_groups(v2, number_format);
      v2 = parseFloat(v2);
      if (isNaN(v2))
        v2 = 0;
    }
    v2 = parseFloat(v2);
    if (decimals != null)
      return _round(v2, decimals);
    return v2;
  }
  function strip_number_groups(v2, number_format) {
    if (!number_format)
      number_format = get_number_format2();
    var info = get_number_format_info2(number_format);
    var group_regex = new RegExp(info.group_sep === "." ? "\\." : info.group_sep, "g");
    v2 = v2.replace(group_regex, "");
    if (info.decimal_str !== "." && info.decimal_str !== "") {
      var decimal_regex = new RegExp(info.decimal_str, "g");
      v2 = v2.replace(decimal_regex, ".");
    }
    return v2;
  }
  frappe.number_format_info = {
    "#,###.##": { decimal_str: ".", group_sep: "," },
    "#.###,##": { decimal_str: ",", group_sep: "." },
    "# ###.##": { decimal_str: ".", group_sep: " " },
    "# ###,##": { decimal_str: ",", group_sep: " " },
    "#'###.##": { decimal_str: ".", group_sep: "'" },
    "#, ###.##": { decimal_str: ".", group_sep: ", " },
    "#,##,###.##": { decimal_str: ".", group_sep: "," },
    "#,###.###": { decimal_str: ".", group_sep: "," },
    "#.###": { decimal_str: "", group_sep: "." },
    "#,###": { decimal_str: "", group_sep: "," }
  };
  window.format_number = function(v2, format2, decimals) {
    if (!format2) {
      format2 = get_number_format2();
      if (decimals == null)
        decimals = cint(frappe.defaults.get_default("float_precision")) || 3;
    }
    var info = get_number_format_info2(format2);
    if (decimals == null)
      decimals = info.precision;
    v2 = flt2(v2, decimals, format2);
    let is_negative = false;
    if (v2 < 0)
      is_negative = true;
    v2 = Math.abs(v2);
    v2 = v2.toFixed(decimals);
    var part = v2.split(".");
    var group_position = info.group_sep ? 3 : 0;
    if (group_position) {
      var integer = part[0];
      var str = "";
      var offset = integer.length % group_position;
      for (var i2 = integer.length; i2 >= 0; i2--) {
        var l2 = replace_all(str, info.group_sep, "").length;
        if (format2 == "#,##,###.##" && str.indexOf(",") != -1) {
          group_position = 2;
          l2 += 1;
        }
        str += integer.charAt(i2);
        if (l2 && !((l2 + 1) % group_position) && i2 != 0) {
          str += info.group_sep;
        }
      }
      part[0] = str.split("").reverse().join("");
    }
    if (part[0] + "" == "") {
      part[0] = "0";
    }
    part[1] = part[1] && info.decimal_str ? info.decimal_str + part[1] : "";
    return (is_negative ? "-" : "") + part[0] + part[1];
  };
  function format_currency2(v2, currency, decimals) {
    var format2 = get_number_format2(currency);
    var symbol = get_currency_symbol(currency);
    if (decimals === void 0) {
      decimals = frappe.boot.sysdefaults.currency_precision || null;
    }
    if (symbol)
      return __(symbol) + " " + format_number(v2, format2, decimals);
    else
      return format_number(v2, format2, decimals);
  }
  function get_currency_symbol(currency) {
    if (frappe.boot) {
      if (frappe.boot.sysdefaults && frappe.boot.sysdefaults.hide_currency_symbol == "Yes")
        return null;
      if (!currency)
        currency = frappe.boot.sysdefaults.currency;
      return frappe.model.get_value(":Currency", currency, "symbol") || currency;
    } else {
      return frappe.currency_symbols[currency];
    }
  }
  function get_number_format2(currency) {
    return frappe.boot && frappe.boot.sysdefaults && frappe.boot.sysdefaults.number_format || "#,###.##";
  }
  function get_number_format_info2(format2) {
    var info = frappe.number_format_info[format2];
    if (!info) {
      info = { decimal_str: ".", group_sep: "," };
    }
    info.precision = format2.split(info.decimal_str).slice(1)[0].length;
    return info;
  }
  function _round(num, precision3) {
    var is_negative = num < 0 ? true : false;
    var d2 = cint(precision3);
    var m2 = Math.pow(10, d2);
    var n2 = +(d2 ? Math.abs(num) * m2 : Math.abs(num)).toFixed(8);
    var i2 = Math.floor(n2), f3 = n2 - i2;
    var r2 = !precision3 && f3 == 0.5 ? i2 % 2 == 0 ? i2 : i2 + 1 : Math.round(n2);
    r2 = d2 ? r2 / m2 : r2;
    return is_negative ? -r2 : r2;
  }
  function roundNumber(num, precision3) {
    return _round(num, precision3);
  }
  function precision2(fieldname, doc2) {
    if (cur_frm) {
      if (!doc2)
        doc2 = cur_frm.doc;
      var df = frappe.meta.get_docfield(doc2.doctype, fieldname, doc2.parent || doc2.name);
      if (!df)
        console.log(fieldname + ": could not find docfield in method precision()");
      return frappe.meta.get_field_precision(df, doc2);
    } else {
      return frappe.boot.sysdefaults.float_precision;
    }
  }
  function in_list2(list, item) {
    return list.includes(item);
  }
  function remainder(numerator, denominator, precision3) {
    precision3 = cint(precision3);
    var multiplier = Math.pow(10, precision3);
    if (precision3) {
      var _remainder = numerator * multiplier % (denominator * multiplier) / multiplier;
    } else {
      var _remainder = numerator % denominator;
    }
    return flt2(_remainder, precision3);
  }
  function round_based_on_smallest_currency_fraction(value, currency, precision3) {
    var smallest_currency_fraction_value = flt2(frappe.model.get_value(":Currency", currency, "smallest_currency_fraction_value"));
    if (smallest_currency_fraction_value) {
      var remainder_val = remainder(value, smallest_currency_fraction_value, precision3);
      if (remainder_val > smallest_currency_fraction_value / 2) {
        value += smallest_currency_fraction_value - remainder_val;
      } else {
        value -= remainder_val;
      }
    } else {
      value = _round(value);
    }
    return value;
  }
  function fmt_money(v2, format2) {
    return format_currency2(v2, format2);
  }
  Object.assign(window, {
    flt: flt2,
    cint,
    strip_number_groups,
    format_currency: format_currency2,
    fmt_money,
    get_currency_symbol,
    get_number_format: get_number_format2,
    get_number_format_info: get_number_format_info2,
    _round,
    roundNumber,
    precision: precision2,
    remainder,
    round_based_on_smallest_currency_fraction,
    in_list: in_list2
  });

  // frappe/public/js/frappe/utils/help.js
  frappe.provide("frappe.help");
  frappe.help.youtube_id = {};
  frappe.help.has_help = function(doctype2) {
    return frappe.help.youtube_id[doctype2];
  };
  frappe.help.show = function(doctype2) {
    if (frappe.help.youtube_id[doctype2]) {
      frappe.help.show_video(frappe.help.youtube_id[doctype2]);
    }
  };
  frappe.help.show_video = function(youtube_id, title) {
    if (frappe.utils.is_url(youtube_id)) {
      const expression = '(?:youtube.com/(?:[^/]+/.+/|(?:v|e(?:mbed)?)/|.*[?&]v=)|youtu.be/)([^"&?\\s]{11})';
      youtube_id = youtube_id.match(expression)[1];
    }
    let dialog = new frappe.ui.Dialog({
      title: title || __("Help"),
      size: "large"
    });
    let video = $(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${youtube_id}"></div>`);
    video.appendTo(dialog.body);
    dialog.show();
    dialog.$wrapper.addClass("video-modal");
    let plyr = new frappe.Plyr(video[0], {
      hideControls: true,
      resetOnEnd: true
    });
    dialog.onhide = () => {
      plyr.destroy();
    };
  };
  $("body").on("click", "a.help-link", function() {
    var doctype2 = $(this).attr("data-doctype");
    doctype2 && frappe.help.show(doctype2);
  });

  // frappe/public/js/frappe/utils/help_links.js
  frappe.provide("frappe.help.help_links");
  frappe.help.help_links["data-import-tool"] = [
    { label: "Importing and Exporting Data", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/data/data-import-tool.html" }
  ];
  frappe.help.help_links["modules/Setup"] = [
    { label: "Users and Permissions", url: "http://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/" },
    { label: "Settings", url: "http://frappe.github.io/erpnext/user/manual/en/setting-up/settings/" },
    { label: "Data Management", url: "http://frappe.github.io/erpnext/user/manual/en/setting-up/data/" },
    { label: "Email", url: "http://frappe.github.io/erpnext/user/manual/en/setting-up/email/" },
    { label: "Printing", url: "http://frappe.github.io/erpnext/user/manual/en/setting-up/print/" }
  ];
  frappe.help.help_links["List/User"] = [
    { label: "Adding Users", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/adding-users" },
    { label: "Rename User", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/articles/rename-user" }
  ];
  frappe.help.help_links["permission-manager"] = [
    { label: "Role Permissions Manager", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/role-based-permissions" }
  ];
  frappe.help.help_links["user-permissions"] = [
    { label: "User Permissions", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/users-and-permissions/user-permissions" }
  ];
  frappe.help.help_links["Form/System Settings"] = [
    { label: "System Settings", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/settings/system-settings" }
  ];
  frappe.help.help_links["List/Email Account"] = [
    { label: "Email Account", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-account" }
  ];
  frappe.help.help_links["List/Notification"] = [
    { label: "Notification", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/email/email-alerts" }
  ];
  frappe.help.help_links["Form/Print Settings"] = [
    { label: "Print Settings", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-settings" }
  ];
  frappe.help.help_links["print-format-builder"] = [
    { label: "Print Format Builder", url: "https://frappe.github.io/erpnext/user/manual/en/setting-up/print/print-format-builder" }
  ];

  // frappe/public/js/frappe/utils/address_and_contact.js
  frappe.provide("frappe.contacts");
  $.extend(frappe.contacts, {
    clear_address_and_contact: function(frm) {
      $(frm.fields_dict["address_html"].wrapper).html("");
      frm.fields_dict["contact_html"] && $(frm.fields_dict["contact_html"].wrapper).html("");
    },
    render_address_and_contact: function(frm) {
      if (frm.fields_dict["address_html"] && "addr_list" in frm.doc.__onload) {
        $(frm.fields_dict["address_html"].wrapper).html(frappe.render_template("address_list", frm.doc.__onload)).find(".btn-address").on("click", function() {
          frappe.new_doc("Address");
        });
      }
      if (frm.fields_dict["contact_html"] && "contact_list" in frm.doc.__onload) {
        $(frm.fields_dict["contact_html"].wrapper).html(frappe.render_template("contact_list", frm.doc.__onload)).find(".btn-contact").on("click", function() {
          frappe.new_doc("Contact");
        });
      }
    },
    get_last_doc: function(frm) {
      const reverse_routes = frappe.route_history.slice().reverse();
      const last_route = reverse_routes.find((route) => {
        return route[0] === "Form" && route[1] !== frm.doctype;
      });
      let doctype2 = last_route && last_route[1];
      let docname = last_route && last_route[2];
      if (last_route && last_route.length > 3)
        docname = last_route.slice(2).join("/");
      return {
        doctype: doctype2,
        docname
      };
    }
  });

  // frappe/public/js/frappe/utils/preview_email.js
  frappe.preview_email = function(template, args, header, with_container = false, only_html = false) {
    return frappe.call({
      method: "frappe.email.email_body.get_email_html",
      args: {
        subject: "Test",
        template,
        args,
        header,
        with_container
      }
    }).then((r2) => {
      var html = r2.message;
      html = html.replace(/embed=/, "src=");
      if (only_html) {
        return html;
      }
      var d2 = frappe.msgprint({
        message: '<iframe width="100%" height="600px" style="border: none;"></iframe>',
        wide: true
      });
      setTimeout(() => {
        d2.$wrapper.find("iframe").contents().find("html").html(html);
        d2.$wrapper.find(".modal-dialog").css("width", "70%");
      }, 1e3);
    });
  };

  // frappe/public/js/frappe/utils/file_manager.js
  frappe.provide("frappe.file_manager");
  frappe.file_manager = function() {
    let files_to_move = [];
    let old_folder = null;
    let new_folder = null;
    function cut(files, old_folder_) {
      files_to_move = files;
      old_folder = old_folder_;
    }
    function paste(new_folder_) {
      return new Promise((resolve, reject) => {
        if (files_to_move.length === 0 || !old_folder) {
          reset();
          resolve();
          return;
        }
        new_folder = new_folder_;
        frappe.call({
          method: "frappe.core.doctype.file.file.move_file",
          args: {
            file_list: files_to_move,
            new_parent: new_folder,
            old_parent: old_folder
          },
          callback: (r2) => {
            reset();
            resolve(r2);
          }
        }).fail(reject);
      });
    }
    function reset() {
      files_to_move = [];
      old_folder = null;
      new_folder = null;
    }
    return {
      cut,
      paste,
      get can_paste() {
        return Boolean(files_to_move.length > 0 && old_folder);
      },
      get old_folder() {
        return old_folder;
      },
      get files_to_move() {
        return files_to_move;
      }
    };
  }();

  // frappe/public/js/frappe/utils/diffview.js
  frappe.provide("frappe.ui");
  frappe.ui.DiffView = class DiffView {
    constructor(doctype2, fieldname, docname) {
      this.dialog = null;
      this.handler = null;
      this.doctype = doctype2;
      this.fieldname = fieldname;
      this.docname = docname;
      this.dialog = this.make_dialog();
      this.set_empty_state();
      this.dialog.show();
    }
    make_dialog() {
      const get_query = () => ({
        query: "frappe.utils.diff.version_query",
        filters: { docname: this.docname, ref_doctype: this.doctype }
      });
      const onchange = () => this.compute_diff();
      let dialog = new frappe.ui.Dialog({
        title: __("Compare Versions"),
        fields: [
          {
            label: __("From version"),
            fieldtype: "Link",
            fieldname: "from_version",
            options: "Version",
            reqd: 1,
            get_query,
            onchange
          },
          {
            fieldtype: "Column Break",
            fieldname: "cb"
          },
          {
            label: __("To version"),
            fieldtype: "Link",
            fieldname: "to_version",
            options: "Version",
            reqd: 1,
            get_query,
            onchange
          },
          {
            fieldtype: "Section Break",
            fieldname: "sb"
          },
          {
            label: __("Diff"),
            fieldtype: "HTML",
            fieldname: "diff"
          }
        ],
        size: "extra-large"
      });
      return dialog;
    }
    compute_diff() {
      const from_version = this.dialog.get_value("from_version");
      const to_version = this.dialog.get_value("to_version");
      const fieldname = this.fieldname;
      if (from_version && to_version) {
        frappe.xcall("frappe.utils.diff.get_version_diff", {
          from_version,
          to_version,
          fieldname
        }).then((data) => {
          this.dialog.set_value("diff", this.prettify_diff(data));
        });
      } else {
        this.set_empty_state();
      }
    }
    prettify_diff(diff) {
      let html = ``;
      diff.forEach((line) => {
        let line_class = "";
        if (line.startsWith("+")) {
          line_class = "insert";
        } else if (line.startsWith("-")) {
          line_class = "delete";
        }
        html += `<div class=${line_class}>${line}</div>`;
      });
      return `<div class='diffview'>${html}</div>`;
    }
    set_empty_state() {
      this.dialog.set_value("diff", __("Select two versions to view the diff."));
    }
  };

  // frappe/public/js/frappe/utils/datatable.js
  frappe.provide("frappe.utils.datatable");
  frappe.utils.datatable.get_translations = function() {
    let translations = {};
    translations[frappe.boot.lang] = {
      "Sort Ascending": __("Sort Ascending"),
      "Sort Descending": __("Sort Descending"),
      "Reset sorting": __("Reset sorting"),
      "Remove column": __("Remove column"),
      "No Data": __("No Data"),
      "{count} cells copied": {
        "1": __("{count} cell copied"),
        "default": __("{count} cells copied")
      },
      "{count} rows selected": {
        "1": __("{count} row selected"),
        "default": __("{count} rows selected")
      }
    };
    return translations;
  };

  // frappe/public/js/frappe/file_uploader/ProgressRing.vue
  var __vue_script__ = {
    name: "ProgressRing",
    props: {
      primary: String,
      secondary: String,
      radius: Number,
      progress: Number,
      stroke: Number
    },
    data() {
      const normalizedRadius = this.radius - this.stroke * 2;
      const circumference = normalizedRadius * 2 * Math.PI;
      return {
        normalizedRadius,
        circumference
      };
    },
    computed: {
      strokeDashoffset() {
        return this.circumference - this.progress / 100 * this.circumference;
      }
    }
  };
  var __vue_render__ = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("svg", { attrs: { height: _vm.radius * 2, width: _vm.radius * 2 } }, [
      _c("circle", {
        style: {
          stroke: _vm.secondary,
          strokeDashoffset: 0
        },
        attrs: {
          "stroke-dasharray": _vm.circumference + " " + _vm.circumference,
          "stroke-width": _vm.stroke,
          fill: "transparent",
          r: _vm.normalizedRadius,
          cx: _vm.radius,
          cy: _vm.radius
        }
      }),
      _vm._v(" "),
      _c("circle", {
        style: {
          stroke: _vm.primary,
          strokeDashoffset: _vm.strokeDashoffset
        },
        attrs: {
          "stroke-dasharray": _vm.circumference + " " + _vm.circumference,
          "stroke-width": _vm.stroke,
          fill: "transparent",
          r: _vm.normalizedRadius,
          cx: _vm.radius,
          cy: _vm.radius
        }
      }),
      _vm._v(" "),
      _c("text", {
        style: {
          color: "var(--text-color)",
          fontSize: "var(--text-xs)",
          fontWeight: "var(--text-bold)"
        },
        attrs: {
          "dominant-baseline": "middle",
          "text-anchor": "middle",
          x: _vm.radius,
          y: _vm.radius
        }
      }, [_vm._v("\n		" + _vm._s(_vm.progress) + "%\n	")])
    ]);
  };
  var __vue_staticRenderFns__ = [];
  __vue_render__._withStripped = true;
  var __vue_inject_styles__ = function(inject) {
    if (!inject)
      return;
    inject("data-v-0f538d8f_0", { source: "\ncircle[data-v-0f538d8f] {\n	transition: stroke-dashoffset 0.35s;\n	transform: rotate(-90deg);\n	transform-origin: 50% 50%;\n}\n", map: { "version": 3, "sources": ["frappe/public/js/frappe/file_uploader/ProgressRing.vue"], "names": [], "mappings": ";AAsEA;CACA,mCAAA;CACA,yBAAA;CACA,yBAAA;AACA", "file": "ProgressRing.vue", "sourcesContent": [`<template>
	<svg :height="radius * 2" :width="radius * 2">
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: secondary,
				strokeDashoffset: 0
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: primary,
				strokeDashoffset: strokeDashoffset
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<text
			dominant-baseline="middle"
			text-anchor="middle"
			:x="radius"
			:y="radius"
			:style="{
				color: 'var(--text-color)',
				fontSize: 'var(--text-xs)',
				fontWeight: 'var(--text-bold)'
			}"
		>
			{{ progress }}%
		</text>
	</svg>
</template>
<script>
export default {
	name: "ProgressRing",
	props: {
		primary: String,
		secondary: String,
		radius: Number,
		progress: Number,
		stroke: Number
	},
	data() {
		const normalizedRadius = this.radius - this.stroke * 2;
		const circumference = normalizedRadius * 2 * Math.PI;

		return {
			normalizedRadius,
			circumference
		};
	},
	computed: {
		strokeDashoffset() {
			return (
				this.circumference - (this.progress / 100) * this.circumference
			);
		}
	}
};
<\/script>
<style scoped>
circle {
	transition: stroke-dashoffset 0.35s;
	transform: rotate(-90deg);
	transform-origin: 50% 50%;
}
</style>
`] }, media: void 0 });
  };
  var __vue_scope_id__ = "data-v-0f538d8f";
  var __vue_module_identifier__ = void 0;
  var __vue_is_functional_template__ = false;
  function __vue_normalize__(template, style, script, scope, functional, moduleIdentifier, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    const component = (typeof script === "function" ? script.options : script) || {};
    component.__file = `<template>
	<svg :height="radius * 2" :width="radius * 2">
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: secondary,
				strokeDashoffset: 0
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<circle
			:stroke-dasharray="circumference + ' ' + circumference"
			:style="{
				stroke: primary,
				strokeDashoffset: strokeDashoffset
			}"
			:stroke-width="stroke"
			fill="transparent"
			:r="normalizedRadius"
			:cx="radius"
			:cy="radius"
		/>
		<text
			dominant-baseline="middle"
			text-anchor="middle"
			:x="radius"
			:y="radius"
			:style="{
				color: 'var(--text-color)',
				fontSize: 'var(--text-xs)',
				fontWeight: 'var(--text-bold)'
			}"
		>
			{{ progress }}%
		</text>
	</svg>
</template>
<script>
export default {
	name: "ProgressRing",
	props: {
		primary: String,
		secondary: String,
		radius: Number,
		progress: Number,
		stroke: Number
	},
	data() {
		const normalizedRadius = this.radius - this.stroke * 2;
		const circumference = normalizedRadius * 2 * Math.PI;

		return {
			normalizedRadius,
			circumference
		};
	},
	computed: {
		strokeDashoffset() {
			return (
				this.circumference - (this.progress / 100) * this.circumference
			);
		}
	}
};
<\/script>
<style scoped>
circle {
	transition: stroke-dashoffset 0.35s;
	transform: rotate(-90deg);
	transform-origin: 50% 50%;
}
</style>
`;
    if (!component.render) {
      component.render = template.render;
      component.staticRenderFns = template.staticRenderFns;
      component._compiled = true;
      if (functional)
        component.functional = true;
    }
    component._scopeId = scope;
    if (true) {
      let hook;
      if (false) {
        hook = function(context) {
          context = context || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext;
          if (!context && typeof __VUE_SSR_CONTEXT__ !== "undefined") {
            context = __VUE_SSR_CONTEXT__;
          }
          if (style) {
            style.call(this, createInjectorSSR(context));
          }
          if (context && context._registeredComponents) {
            context._registeredComponents.add(moduleIdentifier);
          }
        };
        component._ssrRegister = hook;
      } else if (style) {
        hook = shadowMode ? function(context) {
          style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
        } : function(context) {
          style.call(this, createInjector(context));
        };
      }
      if (hook !== void 0) {
        if (component.functional) {
          const originalRender = component.render;
          component.render = function renderWithStyleInjection(h2, context) {
            hook.call(context);
            return originalRender(h2, context);
          };
        } else {
          const existing = component.beforeCreate;
          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
        }
      }
    }
    return component;
  }
  function __vue_create_injector__() {
    const styles = __vue_create_injector__.styles || (__vue_create_injector__.styles = {});
    const isOldIE = typeof navigator !== "undefined" && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
    return function addStyle(id, css) {
      if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]'))
        return;
      const group = isOldIE ? css.media || "default" : id;
      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: void 0 });
      if (!style.ids.includes(id)) {
        let code = css.source;
        let index = style.ids.length;
        style.ids.push(id);
        if (false) {
          code += "\n/*# sourceURL=" + css.map.sources[0] + " */";
          code += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + " */";
        }
        if (isOldIE) {
          style.element = style.element || document.querySelector("style[data-group=" + group + "]");
        }
        if (!style.element) {
          const head = document.head || document.getElementsByTagName("head")[0];
          const el = style.element = document.createElement("style");
          el.type = "text/css";
          if (css.media)
            el.setAttribute("media", css.media);
          if (isOldIE) {
            el.setAttribute("data-group", group);
            el.setAttribute("data-next-index", "0");
          }
          head.appendChild(el);
        }
        if (isOldIE) {
          index = parseInt(style.element.getAttribute("data-next-index"));
          style.element.setAttribute("data-next-index", index + 1);
        }
        if (style.element.styleSheet) {
          style.parts.push(code);
          style.element.styleSheet.cssText = style.parts.filter(Boolean).join("\n");
        } else {
          const textNode = document.createTextNode(code);
          const nodes = style.element.childNodes;
          if (nodes[index])
            style.element.removeChild(nodes[index]);
          if (nodes.length)
            style.element.insertBefore(textNode, nodes[index]);
          else
            style.element.appendChild(textNode);
        }
      }
    };
  }
  var __vue_component__ = /* @__PURE__ */ __vue_normalize__({ render: __vue_render__, staticRenderFns: __vue_staticRenderFns__ }, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, false, __vue_create_injector__, void 0, void 0);
  var ProgressRing_default = __vue_component__;

  // frappe/public/js/frappe/file_uploader/FilePreview.vue
  var __vue_script__2 = {
    name: "FilePreview",
    props: ["file"],
    components: {
      ProgressRing: ProgressRing_default
    },
    data() {
      return {
        src: null,
        optimize: this.file.optimize
      };
    },
    mounted() {
      if (this.is_image) {
        if (window.FileReader) {
          let fr = new FileReader();
          fr.onload = () => this.src = fr.result;
          fr.readAsDataURL(this.file.file_obj);
        }
      }
    },
    filters: {
      file_size(value) {
        return frappe.form.formatters.FileSize(value);
      },
      file_name(value) {
        return value;
      }
    },
    computed: {
      private_icon() {
        return frappe.utils.icon(this.is_private ? "lock" : "unlock");
      },
      is_private() {
        return this.file.doc ? this.file.doc.is_private : this.file.private;
      },
      uploaded() {
        return this.file.request_succeeded;
      },
      is_image() {
        return this.file.file_obj.type.startsWith("image");
      },
      is_optimizable() {
        let is_svg = this.file.file_obj.type == "image/svg+xml";
        return this.is_image && !is_svg && !this.uploaded && !this.file.failed;
      },
      is_cropable() {
        let croppable_types = ["image/jpeg", "image/png"];
        return !this.uploaded && !this.file.uploading && !this.file.failed && croppable_types.includes(this.file.file_obj.type);
      },
      progress() {
        let value = Math.round(this.file.progress * 100 / this.file.total);
        if (isNaN(value)) {
          value = 0;
        }
        return value;
      }
    }
  };
  var __vue_render__2 = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", { staticClass: "file-preview" }, [
      _c("div", { staticClass: "file-icon" }, [
        _vm.is_image ? _c("img", { attrs: { src: _vm.src, alt: _vm.file.name } }) : _c("div", {
          staticClass: "fallback",
          domProps: { innerHTML: _vm._s(_vm.frappe.utils.icon("file", "md")) }
        })
      ]),
      _vm._v(" "),
      _c("div", [
        _c("div", [
          _vm.file.doc ? _c("a", {
            staticClass: "flex",
            attrs: { href: _vm.file.doc.file_url, target: "_blank" }
          }, [
            _c("span", { staticClass: "file-name" }, [
              _vm._v(_vm._s(_vm._f("file_name")(_vm.file.name)))
            ]),
            _vm._v(" "),
            _c("div", {
              staticClass: "ml-2",
              domProps: { innerHTML: _vm._s(_vm.private_icon) }
            })
          ]) : _c("span", { staticClass: "flex" }, [
            _c("span", { staticClass: "file-name" }, [
              _vm._v(_vm._s(_vm._f("file_name")(_vm.file.name)))
            ]),
            _vm._v(" "),
            _c("button", {
              staticClass: "ml-2 btn-reset",
              attrs: { title: _vm.__("Toggle Public/Private") },
              on: {
                click: function($event) {
                  return _vm.$emit("toggle_private");
                }
              }
            }, [
              _c("div", {
                domProps: { innerHTML: _vm._s(_vm.private_icon) }
              })
            ])
          ])
        ]),
        _vm._v(" "),
        _c("div", [
          _c("span", { staticClass: "file-size" }, [
            _vm._v("\n				" + _vm._s(_vm._f("file_size")(_vm.file.file_obj.size)) + "\n			")
          ])
        ]),
        _vm._v(" "),
        _vm.is_optimizable ? _c("label", { staticClass: "optimize-checkbox" }, [
          _c("input", {
            attrs: { type: "checkbox" },
            domProps: { checked: _vm.optimize },
            on: {
              change: function($event) {
                return _vm.$emit("toggle_optimize");
              }
            }
          }),
          _vm._v("Optimize")
        ]) : _vm._e(),
        _vm._v(" "),
        _c("div", [
          _vm.file.error_message ? _c("span", { staticClass: "file-error text-danger" }, [
            _vm._v("\n				" + _vm._s(_vm.file.error_message) + "\n			")
          ]) : _vm._e()
        ])
      ]),
      _vm._v(" "),
      _c("div", { staticClass: "file-actions" }, [
        _c("ProgressRing", {
          directives: [
            {
              name: "show",
              rawName: "v-show",
              value: _vm.file.uploading && !_vm.uploaded && !_vm.file.failed,
              expression: "file.uploading && !uploaded && !file.failed"
            }
          ],
          attrs: {
            primary: "var(--primary-color)",
            secondary: "var(--gray-200)",
            radius: 24,
            progress: _vm.progress,
            stroke: 3
          }
        }),
        _vm._v(" "),
        _vm.uploaded ? _c("div", {
          domProps: {
            innerHTML: _vm._s(_vm.frappe.utils.icon("solid-success", "lg"))
          }
        }) : _vm._e(),
        _vm._v(" "),
        _vm.file.failed ? _c("div", {
          domProps: {
            innerHTML: _vm._s(_vm.frappe.utils.icon("solid-error", "lg"))
          }
        }) : _vm._e(),
        _vm._v(" "),
        _c("div", { staticClass: "file-action-buttons" }, [
          _vm.is_cropable ? _c("button", {
            staticClass: "btn btn-crop muted",
            domProps: {
              innerHTML: _vm._s(_vm.frappe.utils.icon("crop", "md"))
            },
            on: {
              click: function($event) {
                return _vm.$emit("toggle_image_cropper");
              }
            }
          }) : _vm._e(),
          _vm._v(" "),
          !_vm.uploaded && !_vm.file.uploading && !_vm.file.failed ? _c("button", {
            staticClass: "btn muted",
            domProps: {
              innerHTML: _vm._s(_vm.frappe.utils.icon("delete", "md"))
            },
            on: {
              click: function($event) {
                return _vm.$emit("remove");
              }
            }
          }) : _vm._e()
        ])
      ], 1)
    ]);
  };
  var __vue_staticRenderFns__2 = [];
  __vue_render__2._withStripped = true;
  var __vue_inject_styles__2 = function(inject) {
    if (!inject)
      return;
    inject("data-v-681a589e_0", { source: "\n.file-preview {\n	display: flex;\n	align-items: center;\n	padding: 0.75rem;\n	border: 1px solid transparent;\n}\n.file-preview + .file-preview {\n	border-top-color: var(--border-color);\n}\n.file-preview:hover {\n	background-color: var(--bg-color);\n	border-color: var(--dark-border-color);\n	border-radius: var(--border-radius);\n}\n.file-preview:hover + .file-preview {\n	border-top-color: transparent;\n}\n.file-icon {\n	border-radius: var(--border-radius);\n	width: 2.625rem;\n	height: 2.625rem;\n	overflow: hidden;\n	margin-right: var(--margin-md);\n	flex-shrink: 0;\n}\n.file-icon img {\n	width: 100%;\n	height: 100%;\n	object-fit: cover;\n}\n.file-icon .fallback {\n	width: 100%;\n	height: 100%;\n	display: flex;\n	align-items: center;\n	justify-content: center;\n	border: 1px solid var(--border-color);\n	border-radius: var(--border-radius);\n}\n.file-name {\n	font-size: var(--text-base);\n	font-weight: var(--text-bold);\n	color: var(--text-color);\n	display: -webkit-box;\n	-webkit-line-clamp: 1;\n	-webkit-box-orient: vertical;\n	overflow: hidden;\n}\n.file-size {\n	font-size: var(--text-sm);\n	color: var(--text-light);\n}\n.file-actions {\n	width: 3rem;\n	flex-shrink: 0;\n	margin-left: auto;\n	text-align: center;\n}\n.file-actions .btn {\n	padding: var(--padding-xs);\n	box-shadow: none;\n}\n.file-action-buttons {\n	display: flex;\n	justify-content: flex-end;\n}\n.muted {\n	opacity: 0.5;\n	transition: 0.3s;\n}\n.muted:hover {\n	opacity: 1;\n}\n.optimize-checkbox {\n	font-size: var(--text-sm);\n	color: var(--text-light);\n	display: flex;\n	align-items: center;\n	padding-top: 0.25rem;\n}\n.file-error {\n	font-size: var(--text-sm);\n	font-weight: var(--text-bold);\n}\n", map: { "version": 3, "sources": ["frappe/public/js/frappe/file_uploader/FilePreview.vue"], "names": [], "mappings": ";AAyHA;CACA,aAAA;CACA,mBAAA;CACA,gBAAA;CACA,6BAAA;AACA;AAEA;CACA,qCAAA;AACA;AAEA;CACA,iCAAA;CACA,sCAAA;CACA,mCAAA;AACA;AAEA;CACA,6BAAA;AACA;AAEA;CACA,mCAAA;CACA,eAAA;CACA,gBAAA;CACA,gBAAA;CACA,8BAAA;CACA,cAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,iBAAA;AACA;AAEA;CACA,WAAA;CACA,YAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,qCAAA;CACA,mCAAA;AACA;AAEA;CACA,2BAAA;CACA,6BAAA;CACA,wBAAA;CACA,oBAAA;CACA,qBAAA;CACA,4BAAA;CACA,gBAAA;AACA;AAEA;CACA,yBAAA;CACA,wBAAA;AACA;AAEA;CACA,WAAA;CACA,cAAA;CACA,iBAAA;CACA,kBAAA;AACA;AAEA;CACA,0BAAA;CACA,gBAAA;AACA;AAEA;CACA,aAAA;CACA,yBAAA;AACA;AAEA;CACA,YAAA;CACA,gBAAA;AACA;AAEA;CACA,UAAA;AACA;AAEA;CACA,yBAAA;CACA,wBAAA;CACA,aAAA;CACA,mBAAA;CACA,oBAAA;AACA;AAEA;CACA,yBAAA;CACA,6BAAA;AACA", "file": "FilePreview.vue", "sourcesContent": [`<template>
	<div class="file-preview">
		<div class="file-icon">
			<img
				v-if="is_image"
				:src="src"
				:alt="file.name"
			>
			<div class="fallback" v-else v-html="frappe.utils.icon('file', 'md')">
			</div>
		</div>
		<div>
			<div>
				<a class="flex" :href="file.doc.file_url" v-if="file.doc" target="_blank">
					<span class="file-name">{{ file.name | file_name }}</span>
					<div class="ml-2" v-html="private_icon"></div>
				</a>
				<span class="flex" v-else>
					<span class="file-name">{{ file.name | file_name }}</span>
					<button class="ml-2 btn-reset" @click="$emit('toggle_private')" :title="__('Toggle Public/Private')">
						<div v-html="private_icon"></div>
					</button>
				</span>
			</div>

			<div>
				<span class="file-size">
					{{ file.file_obj.size | file_size }}
				</span>
			</div>
			<label v-if="is_optimizable" class="optimize-checkbox"><input type="checkbox" :checked="optimize" @change="$emit('toggle_optimize')">Optimize</label>
			<div>
				<span v-if="file.error_message" class="file-error text-danger">
					{{ file.error_message }}
				</span>
			</div>
		</div>
		<div class="file-actions">
			<ProgressRing
				v-show="file.uploading && !uploaded && !file.failed"
				primary="var(--primary-color)"
				secondary="var(--gray-200)"
				:radius="24"
				:progress="progress"
				:stroke="3"
			/>
			<div v-if="uploaded" v-html="frappe.utils.icon('solid-success', 'lg')"></div>
			<div v-if="file.failed" v-html="frappe.utils.icon('solid-error', 'lg')"></div>
			<div class="file-action-buttons">
				<button v-if="is_cropable" class="btn btn-crop muted" @click="$emit('toggle_image_cropper')" v-html="frappe.utils.icon('crop', 'md')"></button>
				<button v-if="!uploaded && !file.uploading && !file.failed" class="btn muted" @click="$emit('remove')" v-html="frappe.utils.icon('delete', 'md')"></button>
			</div>
		</div>
	</div>
</template>

<script>
import ProgressRing from './ProgressRing.vue';
export default {
	name: 'FilePreview',
	props: ['file'],
	components: {
		ProgressRing
	},
	data() {
		return {
			src: null,
			optimize: this.file.optimize
		}
	},
	mounted() {
		if (this.is_image) {
			if (window.FileReader) {
				let fr = new FileReader();
				fr.onload = () => this.src = fr.result;
				fr.readAsDataURL(this.file.file_obj);
			}
		}
	},
	filters: {
		file_size(value) {
			return frappe.form.formatters.FileSize(value);
		},
		file_name(value) {
			return value;
			// return frappe.utils.file_name_ellipsis(value, 9);
		}
	},
	computed: {
		private_icon() {
			return frappe.utils.icon(this.is_private ? 'lock' : 'unlock');
		},
		is_private() {
			return this.file.doc ? this.file.doc.is_private : this.file.private;
		},
		uploaded() {
			return this.file.request_succeeded;
		},
		is_image() {
			return this.file.file_obj.type.startsWith('image');
		},
		is_optimizable() {
			let is_svg = this.file.file_obj.type == 'image/svg+xml';
			return this.is_image && !is_svg && !this.uploaded && !this.file.failed;
		},
		is_cropable() {
			let croppable_types = ['image/jpeg', 'image/png'];
			return !this.uploaded && !this.file.uploading && !this.file.failed && croppable_types.includes(this.file.file_obj.type);
		},
		progress() {
			let value = Math.round((this.file.progress * 100) / this.file.total);
			if (isNaN(value)) {
				value = 0;
			}
			return value;
		}
	}
}
<\/script>

<style>
.file-preview {
	display: flex;
	align-items: center;
	padding: 0.75rem;
	border: 1px solid transparent;
}

.file-preview + .file-preview {
	border-top-color: var(--border-color);
}

.file-preview:hover {
	background-color: var(--bg-color);
	border-color: var(--dark-border-color);
	border-radius: var(--border-radius);
}

.file-preview:hover + .file-preview {
	border-top-color: transparent;
}

.file-icon {
	border-radius: var(--border-radius);
	width: 2.625rem;
	height: 2.625rem;
	overflow: hidden;
	margin-right: var(--margin-md);
	flex-shrink: 0;
}

.file-icon img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.file-icon .fallback {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
}

.file-name {
	font-size: var(--text-base);
	font-weight: var(--text-bold);
	color: var(--text-color);
	display: -webkit-box;
	-webkit-line-clamp: 1;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.file-size {
	font-size: var(--text-sm);
	color: var(--text-light);
}

.file-actions {
	width: 3rem;
	flex-shrink: 0;
	margin-left: auto;
	text-align: center;
}

.file-actions .btn {
	padding: var(--padding-xs);
	box-shadow: none;
}

.file-action-buttons {
	display: flex;
	justify-content: flex-end;
}

.muted {
	opacity: 0.5;
	transition: 0.3s;
}

.muted:hover {
	opacity: 1;
}

.optimize-checkbox {
	font-size: var(--text-sm);
	color: var(--text-light);
	display: flex;
	align-items: center;
	padding-top: 0.25rem;
}

.file-error {
	font-size: var(--text-sm);
	font-weight: var(--text-bold);
}
</style>
`] }, media: void 0 });
  };
  var __vue_scope_id__2 = void 0;
  var __vue_module_identifier__2 = void 0;
  var __vue_is_functional_template__2 = false;
  function __vue_normalize__2(template, style, script, scope, functional, moduleIdentifier, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    const component = (typeof script === "function" ? script.options : script) || {};
    component.__file = `<template>
	<div class="file-preview">
		<div class="file-icon">
			<img
				v-if="is_image"
				:src="src"
				:alt="file.name"
			>
			<div class="fallback" v-else v-html="frappe.utils.icon('file', 'md')">
			</div>
		</div>
		<div>
			<div>
				<a class="flex" :href="file.doc.file_url" v-if="file.doc" target="_blank">
					<span class="file-name">{{ file.name | file_name }}</span>
					<div class="ml-2" v-html="private_icon"></div>
				</a>
				<span class="flex" v-else>
					<span class="file-name">{{ file.name | file_name }}</span>
					<button class="ml-2 btn-reset" @click="$emit('toggle_private')" :title="__('Toggle Public/Private')">
						<div v-html="private_icon"></div>
					</button>
				</span>
			</div>

			<div>
				<span class="file-size">
					{{ file.file_obj.size | file_size }}
				</span>
			</div>
			<label v-if="is_optimizable" class="optimize-checkbox"><input type="checkbox" :checked="optimize" @change="$emit('toggle_optimize')">Optimize</label>
			<div>
				<span v-if="file.error_message" class="file-error text-danger">
					{{ file.error_message }}
				</span>
			</div>
		</div>
		<div class="file-actions">
			<ProgressRing
				v-show="file.uploading && !uploaded && !file.failed"
				primary="var(--primary-color)"
				secondary="var(--gray-200)"
				:radius="24"
				:progress="progress"
				:stroke="3"
			/>
			<div v-if="uploaded" v-html="frappe.utils.icon('solid-success', 'lg')"></div>
			<div v-if="file.failed" v-html="frappe.utils.icon('solid-error', 'lg')"></div>
			<div class="file-action-buttons">
				<button v-if="is_cropable" class="btn btn-crop muted" @click="$emit('toggle_image_cropper')" v-html="frappe.utils.icon('crop', 'md')"></button>
				<button v-if="!uploaded && !file.uploading && !file.failed" class="btn muted" @click="$emit('remove')" v-html="frappe.utils.icon('delete', 'md')"></button>
			</div>
		</div>
	</div>
</template>

<script>
import ProgressRing from './ProgressRing.vue';
export default {
	name: 'FilePreview',
	props: ['file'],
	components: {
		ProgressRing
	},
	data() {
		return {
			src: null,
			optimize: this.file.optimize
		}
	},
	mounted() {
		if (this.is_image) {
			if (window.FileReader) {
				let fr = new FileReader();
				fr.onload = () => this.src = fr.result;
				fr.readAsDataURL(this.file.file_obj);
			}
		}
	},
	filters: {
		file_size(value) {
			return frappe.form.formatters.FileSize(value);
		},
		file_name(value) {
			return value;
			// return frappe.utils.file_name_ellipsis(value, 9);
		}
	},
	computed: {
		private_icon() {
			return frappe.utils.icon(this.is_private ? 'lock' : 'unlock');
		},
		is_private() {
			return this.file.doc ? this.file.doc.is_private : this.file.private;
		},
		uploaded() {
			return this.file.request_succeeded;
		},
		is_image() {
			return this.file.file_obj.type.startsWith('image');
		},
		is_optimizable() {
			let is_svg = this.file.file_obj.type == 'image/svg+xml';
			return this.is_image && !is_svg && !this.uploaded && !this.file.failed;
		},
		is_cropable() {
			let croppable_types = ['image/jpeg', 'image/png'];
			return !this.uploaded && !this.file.uploading && !this.file.failed && croppable_types.includes(this.file.file_obj.type);
		},
		progress() {
			let value = Math.round((this.file.progress * 100) / this.file.total);
			if (isNaN(value)) {
				value = 0;
			}
			return value;
		}
	}
}
<\/script>

<style>
.file-preview {
	display: flex;
	align-items: center;
	padding: 0.75rem;
	border: 1px solid transparent;
}

.file-preview + .file-preview {
	border-top-color: var(--border-color);
}

.file-preview:hover {
	background-color: var(--bg-color);
	border-color: var(--dark-border-color);
	border-radius: var(--border-radius);
}

.file-preview:hover + .file-preview {
	border-top-color: transparent;
}

.file-icon {
	border-radius: var(--border-radius);
	width: 2.625rem;
	height: 2.625rem;
	overflow: hidden;
	margin-right: var(--margin-md);
	flex-shrink: 0;
}

.file-icon img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.file-icon .fallback {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px solid var(--border-color);
	border-radius: var(--border-radius);
}

.file-name {
	font-size: var(--text-base);
	font-weight: var(--text-bold);
	color: var(--text-color);
	display: -webkit-box;
	-webkit-line-clamp: 1;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.file-size {
	font-size: var(--text-sm);
	color: var(--text-light);
}

.file-actions {
	width: 3rem;
	flex-shrink: 0;
	margin-left: auto;
	text-align: center;
}

.file-actions .btn {
	padding: var(--padding-xs);
	box-shadow: none;
}

.file-action-buttons {
	display: flex;
	justify-content: flex-end;
}

.muted {
	opacity: 0.5;
	transition: 0.3s;
}

.muted:hover {
	opacity: 1;
}

.optimize-checkbox {
	font-size: var(--text-sm);
	color: var(--text-light);
	display: flex;
	align-items: center;
	padding-top: 0.25rem;
}

.file-error {
	font-size: var(--text-sm);
	font-weight: var(--text-bold);
}
</style>
`;
    if (!component.render) {
      component.render = template.render;
      component.staticRenderFns = template.staticRenderFns;
      component._compiled = true;
      if (functional)
        component.functional = true;
    }
    component._scopeId = scope;
    if (true) {
      let hook;
      if (false) {
        hook = function(context) {
          context = context || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext;
          if (!context && typeof __VUE_SSR_CONTEXT__ !== "undefined") {
            context = __VUE_SSR_CONTEXT__;
          }
          if (style) {
            style.call(this, createInjectorSSR(context));
          }
          if (context && context._registeredComponents) {
            context._registeredComponents.add(moduleIdentifier);
          }
        };
        component._ssrRegister = hook;
      } else if (style) {
        hook = shadowMode ? function(context) {
          style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
        } : function(context) {
          style.call(this, createInjector(context));
        };
      }
      if (hook !== void 0) {
        if (component.functional) {
          const originalRender = component.render;
          component.render = function renderWithStyleInjection(h2, context) {
            hook.call(context);
            return originalRender(h2, context);
          };
        } else {
          const existing = component.beforeCreate;
          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
        }
      }
    }
    return component;
  }
  function __vue_create_injector__2() {
    const styles = __vue_create_injector__2.styles || (__vue_create_injector__2.styles = {});
    const isOldIE = typeof navigator !== "undefined" && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
    return function addStyle(id, css) {
      if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]'))
        return;
      const group = isOldIE ? css.media || "default" : id;
      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: void 0 });
      if (!style.ids.includes(id)) {
        let code = css.source;
        let index = style.ids.length;
        style.ids.push(id);
        if (false) {
          code += "\n/*# sourceURL=" + css.map.sources[0] + " */";
          code += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + " */";
        }
        if (isOldIE) {
          style.element = style.element || document.querySelector("style[data-group=" + group + "]");
        }
        if (!style.element) {
          const head = document.head || document.getElementsByTagName("head")[0];
          const el = style.element = document.createElement("style");
          el.type = "text/css";
          if (css.media)
            el.setAttribute("media", css.media);
          if (isOldIE) {
            el.setAttribute("data-group", group);
            el.setAttribute("data-next-index", "0");
          }
          head.appendChild(el);
        }
        if (isOldIE) {
          index = parseInt(style.element.getAttribute("data-next-index"));
          style.element.setAttribute("data-next-index", index + 1);
        }
        if (style.element.styleSheet) {
          style.parts.push(code);
          style.element.styleSheet.cssText = style.parts.filter(Boolean).join("\n");
        } else {
          const textNode = document.createTextNode(code);
          const nodes = style.element.childNodes;
          if (nodes[index])
            style.element.removeChild(nodes[index]);
          if (nodes.length)
            style.element.insertBefore(textNode, nodes[index]);
          else
            style.element.appendChild(textNode);
        }
      }
    };
  }
  var __vue_component__2 = /* @__PURE__ */ __vue_normalize__2({ render: __vue_render__2, staticRenderFns: __vue_staticRenderFns__2 }, __vue_inject_styles__2, __vue_script__2, __vue_scope_id__2, __vue_is_functional_template__2, __vue_module_identifier__2, false, __vue_create_injector__2, void 0, void 0);
  var FilePreview_default = __vue_component__2;

  // frappe/public/js/frappe/file_uploader/TreeNode.vue
  var __vue_script__3 = {
    name: "TreeNode",
    props: ["node", "selected_node"],
    components: {
      TreeNode: () => frappe.ui.components.TreeNode
    },
    computed: {
      icon() {
        let icons = {
          open: frappe.utils.icon("folder-open", "md"),
          closed: frappe.utils.icon("folder-normal", "md"),
          leaf: frappe.utils.icon("primitive-dot", "xs"),
          search: frappe.utils.icon("search")
        };
        if (this.node.by_search)
          return icons.search;
        if (this.node.is_leaf)
          return icons.leaf;
        if (this.node.open)
          return icons.open;
        return icons.closed;
      }
    }
  };
  var __vue_render__3 = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", { staticClass: "tree-node", class: { opened: _vm.node.open } }, [
      _c("span", {
        staticClass: "tree-link",
        class: { active: _vm.node.value === _vm.selected_node.value },
        attrs: { disabled: _vm.node.fetching },
        on: {
          click: function($event) {
            return _vm.$emit("node-click", _vm.node);
          }
        }
      }, [
        _c("div", { domProps: { innerHTML: _vm._s(_vm.icon) } }),
        _vm._v(" "),
        _c("a", { staticClass: "tree-label" }, [
          _vm._v(_vm._s(_vm.node.label))
        ])
      ]),
      _vm._v(" "),
      _c("ul", {
        directives: [
          {
            name: "show",
            rawName: "v-show",
            value: _vm.node.open,
            expression: "node.open"
          }
        ],
        staticClass: "tree-children"
      }, [
        _vm._l(_vm.node.children, function(n2) {
          return _c("TreeNode", {
            key: n2.value,
            attrs: { node: n2, selected_node: _vm.selected_node },
            on: {
              "node-click": function(n3) {
                return _vm.$emit("node-click", n3);
              },
              "load-more": function(n3) {
                return _vm.$emit("load-more", n3);
              }
            }
          });
        }),
        _vm._v(" "),
        _vm.node.has_more_children ? _c("button", {
          staticClass: "btn btn-xs btn-load-more",
          attrs: { disabled: _vm.node.children_loading },
          on: {
            click: function($event) {
              return _vm.$emit("load-more", _vm.node);
            }
          }
        }, [
          _vm._v("\n			" + _vm._s(_vm.node.children_loading ? _vm.__("Loading...") : _vm.__("Load more")) + "\n		")
        ]) : _vm._e()
      ], 2)
    ]);
  };
  var __vue_staticRenderFns__3 = [];
  __vue_render__3._withStripped = true;
  var __vue_inject_styles__3 = function(inject) {
    if (!inject)
      return;
    inject("data-v-23974a16_0", { source: "\n.btn-load-more[data-v-23974a16] {\n	margin-left: 1.6rem;\n	margin-top: 0.5rem;\n}\n", map: { "version": 3, "sources": ["frappe/public/js/frappe/file_uploader/TreeNode.vue"], "names": [], "mappings": ";AAwDA;CACA,mBAAA;CACA,kBAAA;AACA", "file": "TreeNode.vue", "sourcesContent": [`<template>
	<div class="tree-node" :class="{ opened: node.open }">
		<span
			class="tree-link"
			@click="$emit('node-click', node)"
			:class="{ active: node.value === selected_node.value }"
			:disabled="node.fetching"
		>
			<div v-html="icon"></div>
			<a class="tree-label">{{ node.label }}</a>
		</span>
		<ul class="tree-children" v-show="node.open">
			<TreeNode
				v-for="n in node.children"
				:key="n.value"
				:node="n"
				:selected_node="selected_node"
				@node-click="n => $emit('node-click', n)"
				@load-more="n => $emit('load-more', n)"
			/>
			<button
				class="btn btn-xs btn-load-more"
				v-if="node.has_more_children"
				@click="$emit('load-more', node)"
				:disabled="node.children_loading"
			>
				{{ node.children_loading ? __("Loading...") : __("Load more") }}
			</button>
		</ul>
	</div>
</template>
<script>
export default {
	name: "TreeNode",
	props: ["node", "selected_node"],
	components: {
		TreeNode: () => frappe.ui.components.TreeNode
	},
	computed: {
		icon() {
			let icons = {
				open: frappe.utils.icon("folder-open", "md"),
				closed: frappe.utils.icon("folder-normal", "md"),
				leaf: frappe.utils.icon("primitive-dot", "xs"),
				search: frappe.utils.icon("search")
			};

			if (this.node.by_search) return icons.search;
			if (this.node.is_leaf) return icons.leaf;
			if (this.node.open) return icons.open;
			return icons.closed;
		}
	}
};
<\/script>
<style scoped>
.btn-load-more {
	margin-left: 1.6rem;
	margin-top: 0.5rem;
}
</style>
`] }, media: void 0 });
  };
  var __vue_scope_id__3 = "data-v-23974a16";
  var __vue_module_identifier__3 = void 0;
  var __vue_is_functional_template__3 = false;
  function __vue_normalize__3(template, style, script, scope, functional, moduleIdentifier, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    const component = (typeof script === "function" ? script.options : script) || {};
    component.__file = `<template>
	<div class="tree-node" :class="{ opened: node.open }">
		<span
			class="tree-link"
			@click="$emit('node-click', node)"
			:class="{ active: node.value === selected_node.value }"
			:disabled="node.fetching"
		>
			<div v-html="icon"></div>
			<a class="tree-label">{{ node.label }}</a>
		</span>
		<ul class="tree-children" v-show="node.open">
			<TreeNode
				v-for="n in node.children"
				:key="n.value"
				:node="n"
				:selected_node="selected_node"
				@node-click="n => $emit('node-click', n)"
				@load-more="n => $emit('load-more', n)"
			/>
			<button
				class="btn btn-xs btn-load-more"
				v-if="node.has_more_children"
				@click="$emit('load-more', node)"
				:disabled="node.children_loading"
			>
				{{ node.children_loading ? __("Loading...") : __("Load more") }}
			</button>
		</ul>
	</div>
</template>
<script>
export default {
	name: "TreeNode",
	props: ["node", "selected_node"],
	components: {
		TreeNode: () => frappe.ui.components.TreeNode
	},
	computed: {
		icon() {
			let icons = {
				open: frappe.utils.icon("folder-open", "md"),
				closed: frappe.utils.icon("folder-normal", "md"),
				leaf: frappe.utils.icon("primitive-dot", "xs"),
				search: frappe.utils.icon("search")
			};

			if (this.node.by_search) return icons.search;
			if (this.node.is_leaf) return icons.leaf;
			if (this.node.open) return icons.open;
			return icons.closed;
		}
	}
};
<\/script>
<style scoped>
.btn-load-more {
	margin-left: 1.6rem;
	margin-top: 0.5rem;
}
</style>
`;
    if (!component.render) {
      component.render = template.render;
      component.staticRenderFns = template.staticRenderFns;
      component._compiled = true;
      if (functional)
        component.functional = true;
    }
    component._scopeId = scope;
    if (true) {
      let hook;
      if (false) {
        hook = function(context) {
          context = context || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext;
          if (!context && typeof __VUE_SSR_CONTEXT__ !== "undefined") {
            context = __VUE_SSR_CONTEXT__;
          }
          if (style) {
            style.call(this, createInjectorSSR(context));
          }
          if (context && context._registeredComponents) {
            context._registeredComponents.add(moduleIdentifier);
          }
        };
        component._ssrRegister = hook;
      } else if (style) {
        hook = shadowMode ? function(context) {
          style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
        } : function(context) {
          style.call(this, createInjector(context));
        };
      }
      if (hook !== void 0) {
        if (component.functional) {
          const originalRender = component.render;
          component.render = function renderWithStyleInjection(h2, context) {
            hook.call(context);
            return originalRender(h2, context);
          };
        } else {
          const existing = component.beforeCreate;
          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
        }
      }
    }
    return component;
  }
  function __vue_create_injector__3() {
    const styles = __vue_create_injector__3.styles || (__vue_create_injector__3.styles = {});
    const isOldIE = typeof navigator !== "undefined" && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
    return function addStyle(id, css) {
      if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]'))
        return;
      const group = isOldIE ? css.media || "default" : id;
      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: void 0 });
      if (!style.ids.includes(id)) {
        let code = css.source;
        let index = style.ids.length;
        style.ids.push(id);
        if (false) {
          code += "\n/*# sourceURL=" + css.map.sources[0] + " */";
          code += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + " */";
        }
        if (isOldIE) {
          style.element = style.element || document.querySelector("style[data-group=" + group + "]");
        }
        if (!style.element) {
          const head = document.head || document.getElementsByTagName("head")[0];
          const el = style.element = document.createElement("style");
          el.type = "text/css";
          if (css.media)
            el.setAttribute("media", css.media);
          if (isOldIE) {
            el.setAttribute("data-group", group);
            el.setAttribute("data-next-index", "0");
          }
          head.appendChild(el);
        }
        if (isOldIE) {
          index = parseInt(style.element.getAttribute("data-next-index"));
          style.element.setAttribute("data-next-index", index + 1);
        }
        if (style.element.styleSheet) {
          style.parts.push(code);
          style.element.styleSheet.cssText = style.parts.filter(Boolean).join("\n");
        } else {
          const textNode = document.createTextNode(code);
          const nodes = style.element.childNodes;
          if (nodes[index])
            style.element.removeChild(nodes[index]);
          if (nodes.length)
            style.element.insertBefore(textNode, nodes[index]);
          else
            style.element.appendChild(textNode);
        }
      }
    };
  }
  var __vue_component__3 = /* @__PURE__ */ __vue_normalize__3({ render: __vue_render__3, staticRenderFns: __vue_staticRenderFns__3 }, __vue_inject_styles__3, __vue_script__3, __vue_scope_id__3, __vue_is_functional_template__3, __vue_module_identifier__3, false, __vue_create_injector__3, void 0, void 0);
  var TreeNode_default = __vue_component__3;

  // frappe/public/js/frappe/file_uploader/FileBrowser.vue
  var __vue_script__4 = {
    name: "FileBrowser",
    components: {
      TreeNode: TreeNode_default
    },
    data() {
      return {
        node: {
          label: __("Home"),
          value: "Home",
          children: [],
          children_start: 0,
          children_loading: false,
          is_leaf: false,
          fetching: false,
          fetched: false,
          open: false,
          filtered: true
        },
        selected_node: {},
        search_text: "",
        page_length: 10
      };
    },
    mounted() {
      this.toggle_node(this.node);
    },
    methods: {
      toggle_node(node) {
        if (!node.fetched && !node.is_leaf) {
          node.fetching = true;
          node.children_start = 0;
          node.children_loading = false;
          this.get_files_in_folder(node.value, 0).then(({ files, has_more }) => {
            node.open = true;
            node.children = files;
            node.fetched = true;
            node.fetching = false;
            node.children_start += this.page_length;
            node.has_more_children = has_more;
          });
        } else {
          node.open = !node.open;
          this.select_node(node);
        }
      },
      load_more(node) {
        if (node.has_more_children) {
          let start = node.children_start;
          node.children_loading = true;
          this.get_files_in_folder(node.value, start).then(({ files, has_more }) => {
            node.children = node.children.concat(files);
            node.children_start += this.page_length;
            node.has_more_children = has_more;
            node.children_loading = false;
          });
        }
      },
      select_node(node) {
        if (node.is_leaf) {
          this.selected_node = node;
        }
      },
      get_files_in_folder(folder, start) {
        return frappe.call("frappe.core.doctype.file.file.get_files_in_folder", {
          folder,
          start,
          page_length: this.page_length
        }).then((r2) => {
          let { files = [], has_more = false } = r2.message || {};
          files.sort((a2, b2) => {
            if (a2.is_folder && b2.is_folder) {
              return a2.modified < b2.modified ? -1 : 1;
            }
            if (a2.is_folder) {
              return -1;
            }
            if (b2.is_folder) {
              return 1;
            }
            return 0;
          });
          files = files.map((file) => this.make_file_node(file));
          return { files, has_more };
        });
      },
      search_by_name: frappe.utils.debounce(function() {
        if (this.search_text === "") {
          this.node = this.folder_node;
          return;
        }
        if (this.search_text.length < 3)
          return;
        frappe.call("frappe.core.doctype.file.file.get_files_by_search_text", {
          text: this.search_text
        }).then((r2) => {
          let files = r2.message || [];
          files = files.map((file) => this.make_file_node(file));
          if (!this.folder_node) {
            this.folder_node = this.node;
          }
          this.node = {
            label: __("Search Results"),
            value: "",
            children: files,
            by_search: true,
            open: true,
            filtered: true
          };
        });
      }, 300),
      make_file_node(file) {
        let filename = file.file_name || file.name;
        let label = frappe.utils.file_name_ellipsis(filename, 40);
        return {
          label,
          filename,
          file_url: file.file_url,
          value: file.name,
          is_leaf: !file.is_folder,
          fetched: !file.is_folder,
          children: [],
          children_loading: false,
          children_start: 0,
          open: false,
          fetching: false,
          filtered: true
        };
      }
    }
  };
  var __vue_render__4 = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", { staticClass: "file-browser" }, [
      _c("div", [
        _c("a", {
          staticClass: "text-muted text-medium",
          attrs: { href: "" },
          on: {
            click: function($event) {
              $event.preventDefault();
              return _vm.$emit("hide-browser");
            }
          }
        }, [
          _vm._v("\n			" + _vm._s(_vm.__("\u2190 Back to upload files")) + "\n		")
        ])
      ]),
      _vm._v(" "),
      _c("div", { staticClass: "file-browser-list" }, [
        _c("div", { staticClass: "file-filter" }, [
          _c("input", {
            directives: [
              {
                name: "model",
                rawName: "v-model",
                value: _vm.search_text,
                expression: "search_text"
              }
            ],
            staticClass: "form-control input-xs",
            attrs: {
              type: "search",
              placeholder: _vm.__("Search by filename or extension")
            },
            domProps: { value: _vm.search_text },
            on: {
              input: [
                function($event) {
                  if ($event.target.composing) {
                    return;
                  }
                  _vm.search_text = $event.target.value;
                },
                _vm.search_by_name
              ]
            }
          })
        ]),
        _vm._v(" "),
        _c("TreeNode", {
          staticClass: "tree with-skeleton",
          attrs: { node: _vm.node, selected_node: _vm.selected_node },
          on: {
            "node-click": function(n2) {
              return _vm.toggle_node(n2);
            },
            "load-more": function(n2) {
              return _vm.load_more(n2);
            }
          }
        })
      ], 1)
    ]);
  };
  var __vue_staticRenderFns__4 = [];
  __vue_render__4._withStripped = true;
  var __vue_inject_styles__4 = function(inject) {
    if (!inject)
      return;
    inject("data-v-0fedeac3_0", { source: "\n.file-browser-list {\n	height: 300px;\n	overflow: hidden;\n	margin-top: 10px;\n}\n.file-filter {\n	padding: 3px;\n}\n.tree {\n	overflow: auto;\n	height: 100%;\n	padding-left: 0;\n	padding-right: 0;\n	padding-bottom: 4rem;\n}\n", map: { "version": 3, "sources": ["frappe/public/js/frappe/file_uploader/FileBrowser.vue"], "names": [], "mappings": ";AAkLA;CACA,aAAA;CACA,gBAAA;CACA,gBAAA;AACA;AAEA;CACA,YAAA;AACA;AAEA;CACA,cAAA;CACA,YAAA;CACA,eAAA;CACA,gBAAA;CACA,oBAAA;AACA", "file": "FileBrowser.vue", "sourcesContent": [`<template>
	<div class="file-browser">
		<div>
			<a
				href=""
				class="text-muted text-medium"
				@click.prevent="$emit('hide-browser')"
			>
				{{ __("\u2190 Back to upload files") }}
			</a>
		</div>
		<div class="file-browser-list">
			<div class="file-filter">
				<input
					type="search"
					class="form-control input-xs"
					:placeholder="__('Search by filename or extension')"
					v-model="search_text"
					@input="search_by_name"
				/>
			</div>
			<TreeNode
				class="tree with-skeleton"
				:node="node"
				:selected_node="selected_node"
				@node-click="n => toggle_node(n)"
				@load-more="n => load_more(n)"
			/>
		</div>
	</div>
</template>
<script>
import TreeNode from "./TreeNode.vue";

export default {
	name: "FileBrowser",
	components: {
		TreeNode
	},
	data() {
		return {
			node: {
				label: __("Home"),
				value: "Home",
				children: [],
				children_start: 0,
				children_loading: false,
				is_leaf: false,
				fetching: false,
				fetched: false,
				open: false,
				filtered: true
			},
			selected_node: {},
			search_text: "",
			page_length: 10
		};
	},
	mounted() {
		this.toggle_node(this.node);
	},
	methods: {
		toggle_node(node) {
			if (!node.fetched && !node.is_leaf) {
				node.fetching = true;
				node.children_start = 0;
				node.children_loading = false;
				this.get_files_in_folder(node.value, 0).then(
					({ files, has_more }) => {
						node.open = true;
						node.children = files;
						node.fetched = true;
						node.fetching = false;
						node.children_start += this.page_length;
						node.has_more_children = has_more;
					}
				);
			} else {
				node.open = !node.open;
				this.select_node(node);
			}
		},
		load_more(node) {
			if (node.has_more_children) {
				let start = node.children_start;
				node.children_loading = true;
				this.get_files_in_folder(node.value, start).then(
					({ files, has_more }) => {
						node.children = node.children.concat(files);
						node.children_start += this.page_length;
						node.has_more_children = has_more;
						node.children_loading = false;
					}
				);
			}
		},
		select_node(node) {
			if (node.is_leaf) {
				this.selected_node = node;
			}
		},
		get_files_in_folder(folder, start) {
			return frappe
				.call("frappe.core.doctype.file.file.get_files_in_folder", {
					folder,
					start,
					page_length: this.page_length
				})
				.then(r => {
					let { files = [], has_more = false } = r.message || {};
					files.sort((a, b) => {
						if (a.is_folder && b.is_folder) {
							return a.modified < b.modified ? -1 : 1;
						}
						if (a.is_folder) {
							return -1;
						}
						if (b.is_folder) {
							return 1;
						}
						return 0;
					});
					files = files.map(file => this.make_file_node(file));
					return { files, has_more };
				});
		},
		search_by_name: frappe.utils.debounce(function() {
			if (this.search_text === "") {
				this.node = this.folder_node;
				return;
			}
			if (this.search_text.length < 3) return;
			frappe
				.call(
					"frappe.core.doctype.file.file.get_files_by_search_text",
					{
						text: this.search_text
					}
				)
				.then(r => {
					let files = r.message || [];
					files = files.map(file => this.make_file_node(file));
					if (!this.folder_node) {
						this.folder_node = this.node;
					}
					this.node = {
						label: __("Search Results"),
						value: "",
						children: files,
						by_search: true,
						open: true,
						filtered: true
					};
				});
		}, 300),
		make_file_node(file) {
			let filename = file.file_name || file.name;
			let label = frappe.utils.file_name_ellipsis(filename, 40);
			return {
				label: label,
				filename: filename,
				file_url: file.file_url,
				value: file.name,
				is_leaf: !file.is_folder,
				fetched: !file.is_folder, // fetched if node is leaf
				children: [],
				children_loading: false,
				children_start: 0,
				open: false,
				fetching: false,
				filtered: true
			};
		}
	}
};
<\/script>

<style>
.file-browser-list {
	height: 300px;
	overflow: hidden;
	margin-top: 10px;
}

.file-filter {
	padding: 3px;
}

.tree {
	overflow: auto;
	height: 100%;
	padding-left: 0;
	padding-right: 0;
	padding-bottom: 4rem;
}
</style>
`] }, media: void 0 });
  };
  var __vue_scope_id__4 = void 0;
  var __vue_module_identifier__4 = void 0;
  var __vue_is_functional_template__4 = false;
  function __vue_normalize__4(template, style, script, scope, functional, moduleIdentifier, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    const component = (typeof script === "function" ? script.options : script) || {};
    component.__file = `<template>
	<div class="file-browser">
		<div>
			<a
				href=""
				class="text-muted text-medium"
				@click.prevent="$emit('hide-browser')"
			>
				{{ __("\u2190 Back to upload files") }}
			</a>
		</div>
		<div class="file-browser-list">
			<div class="file-filter">
				<input
					type="search"
					class="form-control input-xs"
					:placeholder="__('Search by filename or extension')"
					v-model="search_text"
					@input="search_by_name"
				/>
			</div>
			<TreeNode
				class="tree with-skeleton"
				:node="node"
				:selected_node="selected_node"
				@node-click="n => toggle_node(n)"
				@load-more="n => load_more(n)"
			/>
		</div>
	</div>
</template>
<script>
import TreeNode from "./TreeNode.vue";

export default {
	name: "FileBrowser",
	components: {
		TreeNode
	},
	data() {
		return {
			node: {
				label: __("Home"),
				value: "Home",
				children: [],
				children_start: 0,
				children_loading: false,
				is_leaf: false,
				fetching: false,
				fetched: false,
				open: false,
				filtered: true
			},
			selected_node: {},
			search_text: "",
			page_length: 10
		};
	},
	mounted() {
		this.toggle_node(this.node);
	},
	methods: {
		toggle_node(node) {
			if (!node.fetched && !node.is_leaf) {
				node.fetching = true;
				node.children_start = 0;
				node.children_loading = false;
				this.get_files_in_folder(node.value, 0).then(
					({ files, has_more }) => {
						node.open = true;
						node.children = files;
						node.fetched = true;
						node.fetching = false;
						node.children_start += this.page_length;
						node.has_more_children = has_more;
					}
				);
			} else {
				node.open = !node.open;
				this.select_node(node);
			}
		},
		load_more(node) {
			if (node.has_more_children) {
				let start = node.children_start;
				node.children_loading = true;
				this.get_files_in_folder(node.value, start).then(
					({ files, has_more }) => {
						node.children = node.children.concat(files);
						node.children_start += this.page_length;
						node.has_more_children = has_more;
						node.children_loading = false;
					}
				);
			}
		},
		select_node(node) {
			if (node.is_leaf) {
				this.selected_node = node;
			}
		},
		get_files_in_folder(folder, start) {
			return frappe
				.call("frappe.core.doctype.file.file.get_files_in_folder", {
					folder,
					start,
					page_length: this.page_length
				})
				.then(r => {
					let { files = [], has_more = false } = r.message || {};
					files.sort((a, b) => {
						if (a.is_folder && b.is_folder) {
							return a.modified < b.modified ? -1 : 1;
						}
						if (a.is_folder) {
							return -1;
						}
						if (b.is_folder) {
							return 1;
						}
						return 0;
					});
					files = files.map(file => this.make_file_node(file));
					return { files, has_more };
				});
		},
		search_by_name: frappe.utils.debounce(function() {
			if (this.search_text === "") {
				this.node = this.folder_node;
				return;
			}
			if (this.search_text.length < 3) return;
			frappe
				.call(
					"frappe.core.doctype.file.file.get_files_by_search_text",
					{
						text: this.search_text
					}
				)
				.then(r => {
					let files = r.message || [];
					files = files.map(file => this.make_file_node(file));
					if (!this.folder_node) {
						this.folder_node = this.node;
					}
					this.node = {
						label: __("Search Results"),
						value: "",
						children: files,
						by_search: true,
						open: true,
						filtered: true
					};
				});
		}, 300),
		make_file_node(file) {
			let filename = file.file_name || file.name;
			let label = frappe.utils.file_name_ellipsis(filename, 40);
			return {
				label: label,
				filename: filename,
				file_url: file.file_url,
				value: file.name,
				is_leaf: !file.is_folder,
				fetched: !file.is_folder, // fetched if node is leaf
				children: [],
				children_loading: false,
				children_start: 0,
				open: false,
				fetching: false,
				filtered: true
			};
		}
	}
};
<\/script>

<style>
.file-browser-list {
	height: 300px;
	overflow: hidden;
	margin-top: 10px;
}

.file-filter {
	padding: 3px;
}

.tree {
	overflow: auto;
	height: 100%;
	padding-left: 0;
	padding-right: 0;
	padding-bottom: 4rem;
}
</style>
`;
    if (!component.render) {
      component.render = template.render;
      component.staticRenderFns = template.staticRenderFns;
      component._compiled = true;
      if (functional)
        component.functional = true;
    }
    component._scopeId = scope;
    if (true) {
      let hook;
      if (false) {
        hook = function(context) {
          context = context || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext;
          if (!context && typeof __VUE_SSR_CONTEXT__ !== "undefined") {
            context = __VUE_SSR_CONTEXT__;
          }
          if (style) {
            style.call(this, createInjectorSSR(context));
          }
          if (context && context._registeredComponents) {
            context._registeredComponents.add(moduleIdentifier);
          }
        };
        component._ssrRegister = hook;
      } else if (style) {
        hook = shadowMode ? function(context) {
          style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
        } : function(context) {
          style.call(this, createInjector(context));
        };
      }
      if (hook !== void 0) {
        if (component.functional) {
          const originalRender = component.render;
          component.render = function renderWithStyleInjection(h2, context) {
            hook.call(context);
            return originalRender(h2, context);
          };
        } else {
          const existing = component.beforeCreate;
          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
        }
      }
    }
    return component;
  }
  function __vue_create_injector__4() {
    const styles = __vue_create_injector__4.styles || (__vue_create_injector__4.styles = {});
    const isOldIE = typeof navigator !== "undefined" && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
    return function addStyle(id, css) {
      if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]'))
        return;
      const group = isOldIE ? css.media || "default" : id;
      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: void 0 });
      if (!style.ids.includes(id)) {
        let code = css.source;
        let index = style.ids.length;
        style.ids.push(id);
        if (false) {
          code += "\n/*# sourceURL=" + css.map.sources[0] + " */";
          code += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + " */";
        }
        if (isOldIE) {
          style.element = style.element || document.querySelector("style[data-group=" + group + "]");
        }
        if (!style.element) {
          const head = document.head || document.getElementsByTagName("head")[0];
          const el = style.element = document.createElement("style");
          el.type = "text/css";
          if (css.media)
            el.setAttribute("media", css.media);
          if (isOldIE) {
            el.setAttribute("data-group", group);
            el.setAttribute("data-next-index", "0");
          }
          head.appendChild(el);
        }
        if (isOldIE) {
          index = parseInt(style.element.getAttribute("data-next-index"));
          style.element.setAttribute("data-next-index", index + 1);
        }
        if (style.element.styleSheet) {
          style.parts.push(code);
          style.element.styleSheet.cssText = style.parts.filter(Boolean).join("\n");
        } else {
          const textNode = document.createTextNode(code);
          const nodes = style.element.childNodes;
          if (nodes[index])
            style.element.removeChild(nodes[index]);
          if (nodes.length)
            style.element.insertBefore(textNode, nodes[index]);
          else
            style.element.appendChild(textNode);
        }
      }
    };
  }
  var __vue_component__4 = /* @__PURE__ */ __vue_normalize__4({ render: __vue_render__4, staticRenderFns: __vue_staticRenderFns__4 }, __vue_inject_styles__4, __vue_script__4, __vue_scope_id__4, __vue_is_functional_template__4, __vue_module_identifier__4, false, __vue_create_injector__4, void 0, void 0);
  var FileBrowser_default = __vue_component__4;

  // frappe/public/js/frappe/file_uploader/WebLink.vue
  var __vue_script__5 = {
    name: "WebLink",
    data() {
      return {
        url: ""
      };
    }
  };
  var __vue_render__5 = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", { staticClass: "file-web-link margin-bottom" }, [
      _c("a", {
        staticClass: "text-muted text-medium",
        attrs: { href: "" },
        on: {
          click: function($event) {
            $event.preventDefault();
            return _vm.$emit("hide-web-link");
          }
        }
      }, [_vm._v("\n		" + _vm._s(_vm.__("\u2190 Back to upload files")) + "\n	")]),
      _vm._v(" "),
      _c("div", { staticClass: "input-group" }, [
        _c("input", {
          directives: [
            {
              name: "model",
              rawName: "v-model",
              value: _vm.url,
              expression: "url"
            }
          ],
          staticClass: "form-control",
          attrs: { type: "text", placeholder: _vm.__("Attach a web link") },
          domProps: { value: _vm.url },
          on: {
            input: function($event) {
              if ($event.target.composing) {
                return;
              }
              _vm.url = $event.target.value;
            }
          }
        })
      ])
    ]);
  };
  var __vue_staticRenderFns__5 = [];
  __vue_render__5._withStripped = true;
  var __vue_inject_styles__5 = function(inject) {
    if (!inject)
      return;
    inject("data-v-3d6cb693_0", { source: "\n.file-web-link .input-group {\n	margin-top: 10px;\n}\n", map: { "version": 3, "sources": ["frappe/public/js/frappe/file_uploader/WebLink.vue"], "names": [], "mappings": ";AA6BA;CACA,gBAAA;AACA", "file": "WebLink.vue", "sourcesContent": [`<template>
	<div class="file-web-link margin-bottom">
		<a href class="text-muted text-medium"
			@click.prevent="$emit('hide-web-link')"
		>
			{{ __('\u2190 Back to upload files') }}
		</a>
		<div class="input-group">
			<input
				type="text"
				class="form-control"
				:placeholder="__('Attach a web link')"
				v-model="url"
			>
		</div>
	</div>
</template>
<script>
export default {
	name: 'WebLink',
	data() {
		return {
			url: '',
		}
	}
}
<\/script>

<style>
.file-web-link .input-group {
	margin-top: 10px;
}
</style>
`] }, media: void 0 });
  };
  var __vue_scope_id__5 = void 0;
  var __vue_module_identifier__5 = void 0;
  var __vue_is_functional_template__5 = false;
  function __vue_normalize__5(template, style, script, scope, functional, moduleIdentifier, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    const component = (typeof script === "function" ? script.options : script) || {};
    component.__file = `<template>
	<div class="file-web-link margin-bottom">
		<a href class="text-muted text-medium"
			@click.prevent="$emit('hide-web-link')"
		>
			{{ __('\u2190 Back to upload files') }}
		</a>
		<div class="input-group">
			<input
				type="text"
				class="form-control"
				:placeholder="__('Attach a web link')"
				v-model="url"
			>
		</div>
	</div>
</template>
<script>
export default {
	name: 'WebLink',
	data() {
		return {
			url: '',
		}
	}
}
<\/script>

<style>
.file-web-link .input-group {
	margin-top: 10px;
}
</style>
`;
    if (!component.render) {
      component.render = template.render;
      component.staticRenderFns = template.staticRenderFns;
      component._compiled = true;
      if (functional)
        component.functional = true;
    }
    component._scopeId = scope;
    if (true) {
      let hook;
      if (false) {
        hook = function(context) {
          context = context || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext;
          if (!context && typeof __VUE_SSR_CONTEXT__ !== "undefined") {
            context = __VUE_SSR_CONTEXT__;
          }
          if (style) {
            style.call(this, createInjectorSSR(context));
          }
          if (context && context._registeredComponents) {
            context._registeredComponents.add(moduleIdentifier);
          }
        };
        component._ssrRegister = hook;
      } else if (style) {
        hook = shadowMode ? function(context) {
          style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
        } : function(context) {
          style.call(this, createInjector(context));
        };
      }
      if (hook !== void 0) {
        if (component.functional) {
          const originalRender = component.render;
          component.render = function renderWithStyleInjection(h2, context) {
            hook.call(context);
            return originalRender(h2, context);
          };
        } else {
          const existing = component.beforeCreate;
          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
        }
      }
    }
    return component;
  }
  function __vue_create_injector__5() {
    const styles = __vue_create_injector__5.styles || (__vue_create_injector__5.styles = {});
    const isOldIE = typeof navigator !== "undefined" && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
    return function addStyle(id, css) {
      if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]'))
        return;
      const group = isOldIE ? css.media || "default" : id;
      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: void 0 });
      if (!style.ids.includes(id)) {
        let code = css.source;
        let index = style.ids.length;
        style.ids.push(id);
        if (false) {
          code += "\n/*# sourceURL=" + css.map.sources[0] + " */";
          code += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + " */";
        }
        if (isOldIE) {
          style.element = style.element || document.querySelector("style[data-group=" + group + "]");
        }
        if (!style.element) {
          const head = document.head || document.getElementsByTagName("head")[0];
          const el = style.element = document.createElement("style");
          el.type = "text/css";
          if (css.media)
            el.setAttribute("media", css.media);
          if (isOldIE) {
            el.setAttribute("data-group", group);
            el.setAttribute("data-next-index", "0");
          }
          head.appendChild(el);
        }
        if (isOldIE) {
          index = parseInt(style.element.getAttribute("data-next-index"));
          style.element.setAttribute("data-next-index", index + 1);
        }
        if (style.element.styleSheet) {
          style.parts.push(code);
          style.element.styleSheet.cssText = style.parts.filter(Boolean).join("\n");
        } else {
          const textNode = document.createTextNode(code);
          const nodes = style.element.childNodes;
          if (nodes[index])
            style.element.removeChild(nodes[index]);
          if (nodes.length)
            style.element.insertBefore(textNode, nodes[index]);
          else
            style.element.appendChild(textNode);
        }
      }
    };
  }
  var __vue_component__5 = /* @__PURE__ */ __vue_normalize__5({ render: __vue_render__5, staticRenderFns: __vue_staticRenderFns__5 }, __vue_inject_styles__5, __vue_script__5, __vue_scope_id__5, __vue_is_functional_template__5, __vue_module_identifier__5, false, __vue_create_injector__5, void 0, void 0);
  var WebLink_default = __vue_component__5;

  // frappe/public/js/integrations/google_drive_picker.js
  var GoogleDrivePicker = class {
    constructor({
      pickerCallback,
      enabled,
      appId,
      developerKey,
      clientId
    } = {}) {
      this.scope = ["https://www.googleapis.com/auth/drive.readonly"];
      this.pickerApiLoaded = false;
      this.enabled = enabled;
      this.appId = appId;
      this.pickerCallback = pickerCallback;
      this.developerKey = developerKey;
      this.clientId = clientId;
    }
    loadPicker() {
      $.ajax({
        method: "GET",
        url: "https://apis.google.com/js/api.js",
        dataType: "script",
        cache: true
      }).done(this.loadGapi.bind(this));
    }
    loadGapi() {
      if (!frappe.boot.user.google_drive_token) {
        gapi.load("auth", this.onAuthApiLoad.bind(this));
      }
      gapi.load("picker", this.onPickerApiLoad.bind(this));
    }
    onAuthApiLoad() {
      gapi.auth.authorize({
        "client_id": this.clientId,
        "scope": this.scope,
        "immediate": false
      }, this.handleAuthResult.bind(this));
    }
    handleAuthResult(authResult) {
      let error_map = {
        "popup_closed_by_user": __("Google Authentication was closed abruptly by the user")
      };
      if (authResult && !authResult.error) {
        frappe.boot.user.google_drive_token = authResult.access_token;
        this.createPicker();
      } else {
        let error = error_map[authResult.error] || __("Google Authentication Error");
        frappe.throw(error);
      }
    }
    onPickerApiLoad() {
      this.pickerApiLoaded = true;
      this.createPicker();
    }
    createPicker() {
      if (this.pickerApiLoaded && frappe.boot.user.google_drive_token) {
        this.view = new google.picker.DocsView(google.picker.ViewId.DOCS).setParent("root").setIncludeFolders(true);
        this.picker = new google.picker.PickerBuilder().setAppId(this.appId).setDeveloperKey(this.developerKey).setOAuthToken(frappe.boot.user.google_drive_token).addView(this.view).setLocale(frappe.boot.lang).setCallback(this.pickerCallback).build();
        this.picker.setVisible(true);
        this.setupHide();
      }
    }
    setupHide() {
      let bg = $(".picker-dialog-bg");
      for (let el of bg) {
        el.onclick = () => {
          this.picker.setVisible(false);
          this.picker.Ob({
            action: google.picker.Action.CANCEL
          });
        };
      }
    }
  };

  // frappe/public/js/frappe/file_uploader/ImageCropper.vue
  var import_cropperjs = __toESM(require_cropper());
  var __vue_script__6 = {
    name: "ImageCropper",
    props: ["file", "fixed_aspect_ratio"],
    data() {
      let aspect_ratio = this.fixed_aspect_ratio != null ? this.fixed_aspect_ratio : NaN;
      return {
        src: null,
        cropper: null,
        image: null,
        aspect_ratio
      };
    },
    watch: {
      aspect_ratio(value) {
        if (this.cropper) {
          this.cropper.setAspectRatio(value);
        }
      }
    },
    mounted() {
      if (window.FileReader) {
        let fr = new FileReader();
        fr.onload = () => this.src = fr.result;
        fr.readAsDataURL(this.file.cropper_file);
      }
      let crop_box = this.file.crop_box_data;
      this.image = this.$refs.image;
      this.image.onload = () => {
        this.cropper = new import_cropperjs.default(this.image, {
          zoomable: false,
          scalable: false,
          viewMode: 1,
          data: crop_box,
          aspectRatio: this.aspect_ratio
        });
        window.cropper = this.cropper;
      };
    },
    computed: {
      aspect_ratio_buttons() {
        return [
          {
            label: __("1:1"),
            value: 1
          },
          {
            label: __("4:3"),
            value: 4 / 3
          },
          {
            label: __("16:9"),
            value: 16 / 9
          },
          {
            label: __("Free"),
            value: NaN
          }
        ];
      }
    },
    methods: {
      crop_image() {
        this.file.crop_box_data = this.cropper.getData();
        const canvas = this.cropper.getCroppedCanvas();
        const file_type = this.file.file_obj.type;
        canvas.toBlob((blob) => {
          var cropped_file_obj = new File([blob], this.file.name, {
            type: blob.type
          });
          this.file.file_obj = cropped_file_obj;
          this.$emit("toggle_image_cropper");
        }, file_type);
      }
    }
  };
  var __vue_render__6 = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", [
      _c("div", [
        _c("img", { ref: "image", attrs: { src: _vm.src, alt: _vm.file.name } })
      ]),
      _vm._v(" "),
      _c("div", { staticClass: "image-cropper-actions" }, [
        _c("div", [
          _vm.fixed_aspect_ratio == null ? _c("div", { staticClass: "btn-group" }, _vm._l(_vm.aspect_ratio_buttons, function(button) {
            return _c("button", {
              key: button.label,
              staticClass: "btn btn-default btn-sm",
              class: {
                active: isNaN(_vm.aspect_ratio) ? isNaN(button.value) : button.value === _vm.aspect_ratio
              },
              attrs: { type: "button" },
              on: {
                click: function($event) {
                  _vm.aspect_ratio = button.value;
                }
              }
            }, [_vm._v("\n					" + _vm._s(button.label) + "\n				")]);
          }), 0) : _vm._e()
        ]),
        _vm._v(" "),
        _c("div", [
          _vm.fixed_aspect_ratio == null ? _c("button", {
            staticClass: "btn btn-sm margin-right",
            on: {
              click: function($event) {
                return _vm.$emit("toggle_image_cropper");
              }
            }
          }, [_vm._v("\n				" + _vm._s(_vm.__("Back")) + "\n			")]) : _vm._e(),
          _vm._v(" "),
          _c("button", {
            staticClass: "btn btn-primary btn-sm",
            on: { click: _vm.crop_image }
          }, [_vm._v("\n				" + _vm._s(_vm.__("Crop")) + "\n			")])
        ])
      ])
    ]);
  };
  var __vue_staticRenderFns__6 = [];
  __vue_render__6._withStripped = true;
  var __vue_inject_styles__6 = function(inject) {
    if (!inject)
      return;
    inject("data-v-07cb5b9d_0", { source: "\nimg {\n	display: block;\n	max-width: 100%;\n	max-height: 600px;\n}\n.image-cropper-actions {\n	display: flex;\n	align-items: center;\n	justify-content: space-between;\n	margin-top: var(--margin-md);\n}\n", map: { "version": 3, "sources": ["frappe/public/js/frappe/file_uploader/ImageCropper.vue"], "names": [], "mappings": ";AAwHA;CACA,cAAA;CACA,eAAA;CACA,iBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;CACA,4BAAA;AACA", "file": "ImageCropper.vue", "sourcesContent": [`<template>
	<div>
		<div>
			<img ref="image" :src="src" :alt="file.name" />
		</div>
		<div class="image-cropper-actions">
			<div>
				<div class="btn-group" v-if="fixed_aspect_ratio == null">
					<button
						v-for="button in aspect_ratio_buttons"
						type="button"
						class="btn btn-default btn-sm"
						:class="{
							active: isNaN(aspect_ratio)
								? isNaN(button.value)
								: button.value === aspect_ratio
						}"
						:key="button.label"
						@click="aspect_ratio = button.value"
					>
						{{ button.label }}
					</button>
				</div>
			</div>
			<div>
				<button
					class="btn btn-sm margin-right"
					@click="$emit('toggle_image_cropper')"
					v-if="fixed_aspect_ratio == null"
				>
					{{ __("Back") }}
				</button>
				<button class="btn btn-primary btn-sm" @click="crop_image">
					{{ __("Crop") }}
				</button>
			</div>
		</div>
	</div>
</template>

<script>
import Cropper from "cropperjs";
export default {
	name: "ImageCropper",
	props: ["file", "fixed_aspect_ratio"],
	data() {
		let aspect_ratio =
			this.fixed_aspect_ratio != null ? this.fixed_aspect_ratio : NaN;
		return {
			src: null,
			cropper: null,
			image: null,
			aspect_ratio
		};
	},
	watch: {
		aspect_ratio(value) {
			if (this.cropper) {
				this.cropper.setAspectRatio(value);
			}
		}
	},
	mounted() {
		if (window.FileReader) {
			let fr = new FileReader();
			fr.onload = () => (this.src = fr.result);
			fr.readAsDataURL(this.file.cropper_file);
		}
		let crop_box = this.file.crop_box_data;
		this.image = this.$refs.image;
		this.image.onload = () => {
			this.cropper = new Cropper(this.image, {
				zoomable: false,
				scalable: false,
				viewMode: 1,
				data: crop_box,
				aspectRatio: this.aspect_ratio
			});
			window.cropper = this.cropper;
		};
	},
	computed: {
		aspect_ratio_buttons() {
			return [
				{
					label: __("1:1"),
					value: 1
				},
				{
					label: __("4:3"),
					value: 4 / 3
				},
				{
					label: __("16:9"),
					value: 16 / 9
				},
				{
					label: __("Free"),
					value: NaN
				}
			];
		}
	},
	methods: {
		crop_image() {
			this.file.crop_box_data = this.cropper.getData();
			const canvas = this.cropper.getCroppedCanvas();
			const file_type = this.file.file_obj.type;
			canvas.toBlob(blob => {
				var cropped_file_obj = new File([blob], this.file.name, {
					type: blob.type
				});
				this.file.file_obj = cropped_file_obj;
				this.$emit("toggle_image_cropper");
			}, file_type);
		}
	}
};
<\/script>
<style>
img {
	display: block;
	max-width: 100%;
	max-height: 600px;
}

.image-cropper-actions {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-top: var(--margin-md);
}
</style>
`] }, media: void 0 });
  };
  var __vue_scope_id__6 = void 0;
  var __vue_module_identifier__6 = void 0;
  var __vue_is_functional_template__6 = false;
  function __vue_normalize__6(template, style, script, scope, functional, moduleIdentifier, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    const component = (typeof script === "function" ? script.options : script) || {};
    component.__file = `<template>
	<div>
		<div>
			<img ref="image" :src="src" :alt="file.name" />
		</div>
		<div class="image-cropper-actions">
			<div>
				<div class="btn-group" v-if="fixed_aspect_ratio == null">
					<button
						v-for="button in aspect_ratio_buttons"
						type="button"
						class="btn btn-default btn-sm"
						:class="{
							active: isNaN(aspect_ratio)
								? isNaN(button.value)
								: button.value === aspect_ratio
						}"
						:key="button.label"
						@click="aspect_ratio = button.value"
					>
						{{ button.label }}
					</button>
				</div>
			</div>
			<div>
				<button
					class="btn btn-sm margin-right"
					@click="$emit('toggle_image_cropper')"
					v-if="fixed_aspect_ratio == null"
				>
					{{ __("Back") }}
				</button>
				<button class="btn btn-primary btn-sm" @click="crop_image">
					{{ __("Crop") }}
				</button>
			</div>
		</div>
	</div>
</template>

<script>
import Cropper from "cropperjs";
export default {
	name: "ImageCropper",
	props: ["file", "fixed_aspect_ratio"],
	data() {
		let aspect_ratio =
			this.fixed_aspect_ratio != null ? this.fixed_aspect_ratio : NaN;
		return {
			src: null,
			cropper: null,
			image: null,
			aspect_ratio
		};
	},
	watch: {
		aspect_ratio(value) {
			if (this.cropper) {
				this.cropper.setAspectRatio(value);
			}
		}
	},
	mounted() {
		if (window.FileReader) {
			let fr = new FileReader();
			fr.onload = () => (this.src = fr.result);
			fr.readAsDataURL(this.file.cropper_file);
		}
		let crop_box = this.file.crop_box_data;
		this.image = this.$refs.image;
		this.image.onload = () => {
			this.cropper = new Cropper(this.image, {
				zoomable: false,
				scalable: false,
				viewMode: 1,
				data: crop_box,
				aspectRatio: this.aspect_ratio
			});
			window.cropper = this.cropper;
		};
	},
	computed: {
		aspect_ratio_buttons() {
			return [
				{
					label: __("1:1"),
					value: 1
				},
				{
					label: __("4:3"),
					value: 4 / 3
				},
				{
					label: __("16:9"),
					value: 16 / 9
				},
				{
					label: __("Free"),
					value: NaN
				}
			];
		}
	},
	methods: {
		crop_image() {
			this.file.crop_box_data = this.cropper.getData();
			const canvas = this.cropper.getCroppedCanvas();
			const file_type = this.file.file_obj.type;
			canvas.toBlob(blob => {
				var cropped_file_obj = new File([blob], this.file.name, {
					type: blob.type
				});
				this.file.file_obj = cropped_file_obj;
				this.$emit("toggle_image_cropper");
			}, file_type);
		}
	}
};
<\/script>
<style>
img {
	display: block;
	max-width: 100%;
	max-height: 600px;
}

.image-cropper-actions {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-top: var(--margin-md);
}
</style>
`;
    if (!component.render) {
      component.render = template.render;
      component.staticRenderFns = template.staticRenderFns;
      component._compiled = true;
      if (functional)
        component.functional = true;
    }
    component._scopeId = scope;
    if (true) {
      let hook;
      if (false) {
        hook = function(context) {
          context = context || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext;
          if (!context && typeof __VUE_SSR_CONTEXT__ !== "undefined") {
            context = __VUE_SSR_CONTEXT__;
          }
          if (style) {
            style.call(this, createInjectorSSR(context));
          }
          if (context && context._registeredComponents) {
            context._registeredComponents.add(moduleIdentifier);
          }
        };
        component._ssrRegister = hook;
      } else if (style) {
        hook = shadowMode ? function(context) {
          style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
        } : function(context) {
          style.call(this, createInjector(context));
        };
      }
      if (hook !== void 0) {
        if (component.functional) {
          const originalRender = component.render;
          component.render = function renderWithStyleInjection(h2, context) {
            hook.call(context);
            return originalRender(h2, context);
          };
        } else {
          const existing = component.beforeCreate;
          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
        }
      }
    }
    return component;
  }
  function __vue_create_injector__6() {
    const styles = __vue_create_injector__6.styles || (__vue_create_injector__6.styles = {});
    const isOldIE = typeof navigator !== "undefined" && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
    return function addStyle(id, css) {
      if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]'))
        return;
      const group = isOldIE ? css.media || "default" : id;
      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: void 0 });
      if (!style.ids.includes(id)) {
        let code = css.source;
        let index = style.ids.length;
        style.ids.push(id);
        if (false) {
          code += "\n/*# sourceURL=" + css.map.sources[0] + " */";
          code += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + " */";
        }
        if (isOldIE) {
          style.element = style.element || document.querySelector("style[data-group=" + group + "]");
        }
        if (!style.element) {
          const head = document.head || document.getElementsByTagName("head")[0];
          const el = style.element = document.createElement("style");
          el.type = "text/css";
          if (css.media)
            el.setAttribute("media", css.media);
          if (isOldIE) {
            el.setAttribute("data-group", group);
            el.setAttribute("data-next-index", "0");
          }
          head.appendChild(el);
        }
        if (isOldIE) {
          index = parseInt(style.element.getAttribute("data-next-index"));
          style.element.setAttribute("data-next-index", index + 1);
        }
        if (style.element.styleSheet) {
          style.parts.push(code);
          style.element.styleSheet.cssText = style.parts.filter(Boolean).join("\n");
        } else {
          const textNode = document.createTextNode(code);
          const nodes = style.element.childNodes;
          if (nodes[index])
            style.element.removeChild(nodes[index]);
          if (nodes.length)
            style.element.insertBefore(textNode, nodes[index]);
          else
            style.element.appendChild(textNode);
        }
      }
    };
  }
  var __vue_component__6 = /* @__PURE__ */ __vue_normalize__6({ render: __vue_render__6, staticRenderFns: __vue_staticRenderFns__6 }, __vue_inject_styles__6, __vue_script__6, __vue_scope_id__6, __vue_is_functional_template__6, __vue_module_identifier__6, false, __vue_create_injector__6, void 0, void 0);
  var ImageCropper_default = __vue_component__6;

  // frappe/public/js/frappe/file_uploader/FileUploader.vue
  var __vue_script__7 = {
    name: "FileUploader",
    props: {
      show_upload_button: {
        default: true
      },
      disable_file_browser: {
        default: false
      },
      allow_multiple: {
        default: true
      },
      as_dataurl: {
        default: false
      },
      doctype: {
        default: null
      },
      docname: {
        default: null
      },
      fieldname: {
        default: null
      },
      folder: {
        default: "Home"
      },
      method: {
        default: null
      },
      on_success: {
        default: null
      },
      restrictions: {
        default: () => ({
          max_file_size: null,
          max_number_of_files: null,
          allowed_file_types: [],
          crop_image_aspect_ratio: null
        })
      },
      attach_doc_image: {
        default: false
      },
      upload_notes: {
        default: null
      }
    },
    components: {
      FilePreview: FilePreview_default,
      FileBrowser: FileBrowser_default,
      WebLink: WebLink_default,
      ImageCropper: ImageCropper_default
    },
    data() {
      return {
        files: [],
        is_dragging: false,
        currently_uploading: -1,
        show_file_browser: false,
        show_web_link: false,
        show_image_cropper: false,
        crop_image_with_index: -1,
        trigger_upload: false,
        close_dialog: false,
        hide_dialog_footer: false,
        allow_take_photo: false,
        allow_web_link: true,
        google_drive_settings: {
          enabled: false
        },
        wrapper_ready: false
      };
    },
    created() {
      this.allow_take_photo = window.navigator.mediaDevices;
      if (frappe.user_id !== "Guest") {
        frappe.call({
          method: "frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",
          callback: (resp) => {
            if (!resp.exc) {
              this.google_drive_settings = resp.message;
            }
          }
        });
      }
      if (this.restrictions.max_file_size == null) {
        frappe.call("frappe.core.doctype.file.file.get_max_file_size").then((res) => {
          this.restrictions.max_file_size = Number(res.message);
        });
      }
    },
    watch: {
      files(newvalue, oldvalue) {
        if (!this.allow_multiple && newvalue.length > 1) {
          this.files = [newvalue[newvalue.length - 1]];
        }
      }
    },
    computed: {
      upload_complete() {
        return this.files.length > 0 && this.files.every((file) => file.total !== 0 && file.progress === file.total);
      }
    },
    methods: {
      dragover() {
        this.is_dragging = true;
      },
      dragleave() {
        this.is_dragging = false;
      },
      dropfiles(e2) {
        this.is_dragging = false;
        this.add_files(e2.dataTransfer.files);
      },
      browse_files() {
        this.$refs.file_input.click();
      },
      on_file_input(e2) {
        this.add_files(this.$refs.file_input.files);
      },
      remove_file(file) {
        this.files = this.files.filter((f3) => f3 !== file);
      },
      toggle_image_cropper(index) {
        this.crop_image_with_index = this.show_image_cropper ? -1 : index;
        this.hide_dialog_footer = !this.show_image_cropper;
        this.show_image_cropper = !this.show_image_cropper;
      },
      toggle_all_private() {
        let flag;
        let private_values = this.files.filter((file) => file.private);
        if (private_values.length < this.files.length) {
          flag = true;
        } else {
          flag = false;
        }
        this.files = this.files.map((file) => {
          file.private = flag;
          return file;
        });
      },
      add_files(file_array) {
        let files = Array.from(file_array).filter(this.check_restrictions).map((file) => {
          let is_image = file.type.startsWith("image");
          let size_kb = file.size / 1024;
          return {
            file_obj: file,
            cropper_file: file,
            crop_box_data: null,
            optimize: size_kb > 200 && is_image && !file.type.includes("svg"),
            name: file.name,
            doc: null,
            progress: 0,
            total: 0,
            failed: false,
            request_succeeded: false,
            error_message: null,
            uploading: false,
            private: !is_image
          };
        });
        this.files = this.files.concat(files);
        if (this.files.length === 1 && !this.allow_multiple && this.restrictions.crop_image_aspect_ratio != null) {
          if (!this.files[0].file_obj.type.includes("svg")) {
            this.toggle_image_cropper(0);
          }
        }
      },
      check_restrictions(file) {
        let { max_file_size, allowed_file_types = [] } = this.restrictions;
        let mime_type = file.type;
        let extension = "." + file.name.split(".").pop();
        let is_correct_type = true;
        let valid_file_size = true;
        if (allowed_file_types.length) {
          is_correct_type = allowed_file_types.some((type) => {
            if (type.includes("/")) {
              if (!file.type)
                return false;
              return file.type.match(type);
            }
            if (type[0] === ".") {
              return file.name.endsWith(type);
            }
            return false;
          });
        }
        if (max_file_size && file.size != null) {
          valid_file_size = file.size < max_file_size;
        }
        if (!is_correct_type) {
          console.warn("File skipped because of invalid file type", file);
          frappe.show_alert({
            message: __('File "{0}" was skipped because of invalid file type', [file.name]),
            indicator: "orange"
          });
        }
        if (!valid_file_size) {
          console.warn("File skipped because of invalid file size", file.size, file);
          frappe.show_alert({
            message: __('File "{0}" was skipped because size exceeds {1} MB', [file.name, max_file_size / (1024 * 1024)]),
            indicator: "orange"
          });
        }
        return is_correct_type && valid_file_size;
      },
      upload_files() {
        if (this.show_file_browser) {
          return this.upload_via_file_browser();
        }
        if (this.show_web_link) {
          return this.upload_via_web_link();
        }
        if (this.as_dataurl) {
          return this.return_as_dataurl();
        }
        return frappe.run_serially(this.files.map((file, i2) => () => this.upload_file(file, i2)));
      },
      upload_via_file_browser() {
        let selected_file = this.$refs.file_browser.selected_node;
        if (!selected_file.value) {
          frappe.msgprint(__("Click on a file to select it."));
          this.close_dialog = true;
          return Promise.reject();
        }
        this.close_dialog = true;
        return this.upload_file({
          file_url: selected_file.file_url
        });
      },
      upload_via_web_link() {
        let file_url = this.$refs.web_link.url;
        if (!file_url) {
          frappe.msgprint(__("Invalid URL"));
          this.close_dialog = true;
          return Promise.reject();
        }
        file_url = decodeURI(file_url);
        this.close_dialog = true;
        return this.upload_file({
          file_url
        });
      },
      return_as_dataurl() {
        let promises = this.files.map((file) => frappe.dom.file_to_base64(file.file_obj).then((dataurl) => {
          file.dataurl = dataurl;
          this.on_success && this.on_success(file);
        }));
        this.close_dialog = true;
        return Promise.all(promises);
      },
      upload_file(file, i2) {
        this.currently_uploading = i2;
        return new Promise((resolve, reject) => {
          let xhr = new XMLHttpRequest();
          xhr.upload.addEventListener("loadstart", (e2) => {
            file.uploading = true;
          });
          xhr.upload.addEventListener("progress", (e2) => {
            if (e2.lengthComputable) {
              file.progress = e2.loaded;
              file.total = e2.total;
            }
          });
          xhr.upload.addEventListener("load", (e2) => {
            file.uploading = false;
            resolve();
          });
          xhr.addEventListener("error", (e2) => {
            file.failed = true;
            reject();
          });
          xhr.onreadystatechange = () => {
            if (xhr.readyState == XMLHttpRequest.DONE) {
              if (xhr.status === 200) {
                file.request_succeeded = true;
                let r2 = null;
                let file_doc = null;
                try {
                  r2 = JSON.parse(xhr.responseText);
                  if (r2.message.doctype === "File") {
                    file_doc = r2.message;
                  }
                } catch (e2) {
                  r2 = xhr.responseText;
                }
                file.doc = file_doc;
                if (this.on_success) {
                  this.on_success(file_doc, r2);
                }
                if (i2 == this.files.length - 1 && this.files.every((file2) => file2.request_succeeded)) {
                  this.close_dialog = true;
                }
              } else if (xhr.status === 403) {
                file.failed = true;
                let response = JSON.parse(xhr.responseText);
                file.error_message = `Not permitted. ${response._error_message || ""}`;
              } else if (xhr.status === 413) {
                file.failed = true;
                file.error_message = "Size exceeds the maximum allowed file size.";
              } else {
                file.failed = true;
                file.error_message = xhr.status === 0 ? "XMLHttpRequest Error" : `${xhr.status} : ${xhr.statusText}`;
                let error = null;
                try {
                  error = JSON.parse(xhr.responseText);
                } catch (e2) {
                }
                frappe.request.cleanup({}, error);
              }
            }
          };
          xhr.open("POST", "/api/method/upload_file", true);
          xhr.setRequestHeader("Accept", "application/json");
          xhr.setRequestHeader("X-Frappe-CSRF-Token", frappe.csrf_token);
          let form_data = new FormData();
          if (file.file_obj) {
            form_data.append("file", file.file_obj, file.name);
          }
          form_data.append("is_private", +file.private);
          form_data.append("folder", this.folder);
          if (file.file_url) {
            form_data.append("file_url", file.file_url);
          }
          if (file.file_name) {
            form_data.append("file_name", file.file_name);
          }
          if (this.doctype && this.docname) {
            form_data.append("doctype", this.doctype);
            form_data.append("docname", this.docname);
          }
          if (this.fieldname) {
            form_data.append("fieldname", this.fieldname);
          }
          if (this.method) {
            form_data.append("method", this.method);
          }
          if (file.optimize) {
            form_data.append("optimize", true);
          }
          if (this.attach_doc_image) {
            form_data.append("max_width", 200);
            form_data.append("max_height", 200);
          }
          xhr.send(form_data);
        });
      },
      capture_image() {
        const capture = new frappe.ui.Capture({
          animate: false,
          error: true
        });
        capture.show();
        capture.submit((data_urls) => {
          data_urls.forEach((data_url) => {
            let filename = `capture_${frappe.datetime.now_datetime().replaceAll(/[: -]/g, "_")}.png`;
            this.url_to_file(data_url, filename, "image/png").then((file) => this.add_files([file]));
          });
        });
      },
      show_google_drive_picker() {
        this.close_dialog = true;
        let google_drive = new GoogleDrivePicker(__spreadValues({
          pickerCallback: (data) => this.google_drive_callback(data)
        }, this.google_drive_settings));
        google_drive.loadPicker();
      },
      google_drive_callback(data) {
        if (data.action == google.picker.Action.PICKED) {
          this.upload_file({
            file_url: data.docs[0].url,
            file_name: data.docs[0].name
          });
        } else if (data.action == google.picker.Action.CANCEL) {
          cur_frm.attachments.new_attachment();
        }
      },
      url_to_file(url, filename, mime_type) {
        return fetch(url).then((res) => res.arrayBuffer()).then((buffer) => new File([buffer], filename, { type: mime_type }));
      }
    }
  };
  var __vue_render__7 = function() {
    var _vm = this;
    var _h = _vm.$createElement;
    var _c = _vm._self._c || _h;
    return _c("div", {
      staticClass: "file-uploader",
      on: {
        dragover: function($event) {
          $event.preventDefault();
          return _vm.dragover($event);
        },
        dragleave: function($event) {
          $event.preventDefault();
          return _vm.dragleave($event);
        },
        drop: function($event) {
          $event.preventDefault();
          return _vm.dropfiles($event);
        }
      }
    }, [
      _c("div", {
        directives: [
          {
            name: "show",
            rawName: "v-show",
            value: _vm.files.length === 0 && !_vm.show_file_browser && !_vm.show_web_link,
            expression: "files.length === 0 && !show_file_browser && !show_web_link"
          }
        ],
        staticClass: "file-upload-area"
      }, [
        !_vm.is_dragging ? _c("div", [
          _c("div", { staticClass: "text-center" }, [
            _vm._v("\n				" + _vm._s(_vm.__("Drag and drop files here or upload from")) + "\n			")
          ]),
          _vm._v(" "),
          _c("div", { staticClass: "mt-2 text-center" }, [
            _c("button", {
              staticClass: "btn btn-file-upload",
              on: { click: _vm.browse_files }
            }, [
              _c("svg", {
                attrs: {
                  width: "30",
                  height: "30",
                  viewBox: "0 0 30 30",
                  fill: "none",
                  xmlns: "http://www.w3.org/2000/svg"
                }
              }, [
                _c("circle", {
                  attrs: {
                    cx: "15",
                    cy: "15",
                    r: "15",
                    fill: "url(#paint0_linear)"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M13.5 22V19",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M16.5 22V19",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M10.5 22H19.5",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M7.5 16H22.5",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("defs", [
                  _c("linearGradient", {
                    attrs: {
                      id: "paint0_linear",
                      x1: "0",
                      y1: "0",
                      x2: "0",
                      y2: "30",
                      gradientUnits: "userSpaceOnUse"
                    }
                  }, [
                    _c("stop", {
                      attrs: { "stop-color": "#2C9AF1" }
                    }),
                    _vm._v(" "),
                    _c("stop", {
                      attrs: {
                        offset: "1",
                        "stop-color": "#2490EF"
                      }
                    })
                  ], 1)
                ], 1)
              ]),
              _vm._v(" "),
              _c("div", { staticClass: "mt-1" }, [
                _vm._v(_vm._s(_vm.__("My Device")))
              ])
            ]),
            _vm._v(" "),
            _c("input", {
              ref: "file_input",
              staticClass: "hidden",
              attrs: {
                type: "file",
                multiple: _vm.allow_multiple,
                accept: (_vm.restrictions.allowed_file_types || []).join(", ")
              },
              on: { change: _vm.on_file_input }
            }),
            _vm._v(" "),
            !_vm.disable_file_browser ? _c("button", {
              staticClass: "btn btn-file-upload",
              on: {
                click: function($event) {
                  _vm.show_file_browser = true;
                }
              }
            }, [
              _c("svg", {
                attrs: {
                  width: "30",
                  height: "30",
                  viewBox: "0 0 30 30",
                  fill: "none",
                  xmlns: "http://www.w3.org/2000/svg"
                }
              }, [
                _c("circle", {
                  attrs: {
                    cx: "15",
                    cy: "15",
                    r: "15",
                    fill: "#48BB74"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z",
                    stroke: "white",
                    "stroke-miterlimit": "10",
                    "stroke-linecap": "square"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12",
                    stroke: "white",
                    "stroke-miterlimit": "10",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                })
              ]),
              _vm._v(" "),
              _c("div", { staticClass: "mt-1" }, [
                _vm._v(_vm._s(_vm.__("Library")))
              ])
            ]) : _vm._e(),
            _vm._v(" "),
            _vm.allow_web_link ? _c("button", {
              staticClass: "btn btn-file-upload",
              on: {
                click: function($event) {
                  _vm.show_web_link = true;
                }
              }
            }, [
              _c("svg", {
                attrs: {
                  width: "30",
                  height: "30",
                  viewBox: "0 0 30 30",
                  fill: "none",
                  xmlns: "http://www.w3.org/2000/svg"
                }
              }, [
                _c("circle", {
                  attrs: {
                    cx: "15",
                    cy: "15",
                    r: "15",
                    fill: "#ECAC4B"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M12.0469 17.9543L17.9558 12.0454",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455",
                    stroke: "white",
                    "stroke-linecap": "round",
                    "stroke-linejoin": "round"
                  }
                })
              ]),
              _vm._v(" "),
              _c("div", { staticClass: "mt-1" }, [
                _vm._v(_vm._s(_vm.__("Link")))
              ])
            ]) : _vm._e(),
            _vm._v(" "),
            _vm.allow_take_photo ? _c("button", {
              staticClass: "btn btn-file-upload",
              on: { click: _vm.capture_image }
            }, [
              _c("svg", {
                attrs: {
                  width: "30",
                  height: "30",
                  viewBox: "0 0 30 30",
                  fill: "none",
                  xmlns: "http://www.w3.org/2000/svg"
                }
              }, [
                _c("circle", {
                  attrs: {
                    cx: "15",
                    cy: "15",
                    r: "15",
                    fill: "#CE315B"
                  }
                }),
                _vm._v(" "),
                _c("path", {
                  attrs: {
                    d: "M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z",
                    stroke: "white",
                    "stroke-linejoin": "round"
                  }
                }),
                _vm._v(" "),
                _c("circle", {
                  attrs: {
                    cx: "15",
                    cy: "16",
                    r: "2.5",
                    stroke: "white"
                  }
                })
              ]),
              _vm._v(" "),
              _c("div", { staticClass: "mt-1" }, [
                _vm._v(_vm._s(_vm.__("Camera")))
              ])
            ]) : _vm._e(),
            _vm._v(" "),
            _vm.google_drive_settings.enabled ? _c("button", {
              staticClass: "btn btn-file-upload",
              on: { click: _vm.show_google_drive_picker }
            }, [
              _c("svg", { attrs: { width: "30", height: "30" } }, [
                _c("image", {
                  attrs: {
                    "xlink:href": "/assets/frappe/icons/social/google_drive.svg",
                    width: "30",
                    height: "30"
                  }
                })
              ]),
              _vm._v(" "),
              _c("div", { staticClass: "mt-1" }, [
                _vm._v(_vm._s(_vm.__("Google Drive")))
              ])
            ]) : _vm._e()
          ]),
          _vm._v(" "),
          _c("div", { staticClass: "text-muted text-medium" }, [
            _vm._v("\n				" + _vm._s(_vm.upload_notes) + "\n			")
          ])
        ]) : _c("div", [
          _vm._v("\n			" + _vm._s(_vm.__("Drop files here")) + "\n		")
        ])
      ]),
      _vm._v(" "),
      _c("div", {
        directives: [
          {
            name: "show",
            rawName: "v-show",
            value: _vm.files.length && !_vm.show_file_browser && !_vm.show_web_link,
            expression: "files.length && !show_file_browser && !show_web_link"
          }
        ],
        staticClass: "file-preview-area"
      }, [
        !_vm.show_image_cropper ? _c("div", { staticClass: "file-preview-container" }, _vm._l(_vm.files, function(file, i2) {
          return _c("FilePreview", {
            key: file.name,
            attrs: { file },
            on: {
              remove: function($event) {
                return _vm.remove_file(file);
              },
              toggle_private: function($event) {
                file.private = !file.private;
              },
              toggle_optimize: function($event) {
                file.optimize = !file.optimize;
              },
              toggle_image_cropper: function($event) {
                return _vm.toggle_image_cropper(i2);
              }
            }
          });
        }), 1) : _vm._e(),
        _vm._v(" "),
        _vm.show_upload_button && _vm.currently_uploading === -1 ? _c("div", { staticClass: "flex align-center" }, [
          _c("button", {
            staticClass: "btn btn-primary btn-sm margin-right",
            on: { click: _vm.upload_files }
          }, [
            _vm.files.length === 1 ? _c("span", [
              _vm._v("\n					" + _vm._s(_vm.__("Upload file")) + "\n				")
            ]) : _c("span", [
              _vm._v("\n					" + _vm._s(_vm.__("Upload {0} files", [_vm.files.length])) + "\n				")
            ])
          ]),
          _vm._v(" "),
          _c("div", { staticClass: "text-muted text-medium" }, [
            _vm._v("\n				" + _vm._s(_vm.__("Click on the lock icon to toggle public/private")) + "\n			")
          ])
        ]) : _vm._e()
      ]),
      _vm._v(" "),
      _vm.show_image_cropper && _vm.wrapper_ready ? _c("ImageCropper", {
        attrs: {
          file: _vm.files[_vm.crop_image_with_index],
          fixed_aspect_ratio: _vm.restrictions.crop_image_aspect_ratio
        },
        on: {
          toggle_image_cropper: function($event) {
            return _vm.toggle_image_cropper(-1);
          },
          upload_after_crop: function($event) {
            _vm.trigger_upload = true;
          }
        }
      }) : _vm._e(),
      _vm._v(" "),
      _vm.show_file_browser && !_vm.disable_file_browser ? _c("FileBrowser", {
        ref: "file_browser",
        on: {
          "hide-browser": function($event) {
            _vm.show_file_browser = false;
          }
        }
      }) : _vm._e(),
      _vm._v(" "),
      _vm.show_web_link ? _c("WebLink", {
        ref: "web_link",
        on: {
          "hide-web-link": function($event) {
            _vm.show_web_link = false;
          }
        }
      }) : _vm._e()
    ], 1);
  };
  var __vue_staticRenderFns__7 = [];
  __vue_render__7._withStripped = true;
  var __vue_inject_styles__7 = function(inject) {
    if (!inject)
      return;
    inject("data-v-aac52ee0_0", { source: "\n.file-upload-area {\n	min-height: 16rem;\n	display: flex;\n	align-items: center;\n	justify-content: center;\n	border: 1px dashed var(--dark-border-color);\n	border-radius: var(--border-radius);\n	cursor: pointer;\n	background-color: var(--bg-color);\n}\n.btn-file-upload {\n	background-color: transparent;\n	border: none;\n	box-shadow: none;\n	font-size: var(--text-xs);\n}\n", map: { "version": 3, "sources": ["frappe/public/js/frappe/file_uploader/FileUploader.vue"], "names": [], "mappings": ";AA0jBA;CACA,iBAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;CACA,2CAAA;CACA,mCAAA;CACA,eAAA;CACA,iCAAA;AACA;AAEA;CACA,6BAAA;CACA,YAAA;CACA,gBAAA;CACA,yBAAA;AACA", "file": "FileUploader.vue", "sourcesContent": [`<template>
	<div class="file-uploader"
		@dragover.prevent="dragover"
		@dragleave.prevent="dragleave"
		@drop.prevent="dropfiles"
	>
		<div
			class="file-upload-area"
			v-show="files.length === 0 && !show_file_browser && !show_web_link"
		>
			<div v-if="!is_dragging">
				<div class="text-center">
					{{ __('Drag and drop files here or upload from') }}
				</div>
				<div class="mt-2 text-center">
					<button class="btn btn-file-upload" @click="browse_files">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="url(#paint0_linear)"/>
							<path d="M13.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M16.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M10.5 22H19.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M7.5 16H22.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<defs>
							<linearGradient id="paint0_linear" x1="0" y1="0" x2="0" y2="30" gradientUnits="userSpaceOnUse">
							<stop stop-color="#2C9AF1"/>
							<stop offset="1" stop-color="#2490EF"/>
							</linearGradient>
							</defs>
						</svg>
						<div class="mt-1">{{ __('My Device') }}</div>
					</button>
					<input
						type="file"
						class="hidden"
						ref="file_input"
						@change="on_file_input"
						:multiple="allow_multiple"
						:accept="(restrictions.allowed_file_types || []).join(', ')"
					>
					<button class="btn btn-file-upload" v-if="!disable_file_browser" @click="show_file_browser = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#48BB74"/>
							<path d="M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z" stroke="white" stroke-miterlimit="10" stroke-linecap="square"/>
							<path d="M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12" stroke="white" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Library') }}</div>
					</button>
					<button class="btn btn-file-upload" v-if="allow_web_link" @click="show_web_link = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#ECAC4B"/>
							<path d="M12.0469 17.9543L17.9558 12.0454" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Link') }}</div>
					</button>
					<button v-if="allow_take_photo" class="btn btn-file-upload" @click="capture_image">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#CE315B"/>
							<path d="M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z" stroke="white" stroke-linejoin="round"/>
							<circle cx="15" cy="16" r="2.5" stroke="white"/>
						</svg>
						<div class="mt-1">{{ __('Camera') }}</div>
					</button>
					<button v-if="google_drive_settings.enabled" class="btn btn-file-upload" @click="show_google_drive_picker">
						<svg width="30" height="30">
							<image xlink:href="/assets/frappe/icons/social/google_drive.svg" width="30" height="30"/>
						</svg>
						<div class="mt-1">{{ __('Google Drive') }}</div>
					</button>
				</div>
				<div class="text-muted text-medium">
					{{ upload_notes }}
				</div>
			</div>
			<div v-else>
				{{ __('Drop files here') }}
			</div>
		</div>
		<div class="file-preview-area" v-show="files.length && !show_file_browser && !show_web_link">
			<div class="file-preview-container" v-if="!show_image_cropper">
				<FilePreview
					v-for="(file, i) in files"
					:key="file.name"
					:file="file"
					@remove="remove_file(file)"
					@toggle_private="file.private = !file.private"
					@toggle_optimize="file.optimize = !file.optimize"
					@toggle_image_cropper="toggle_image_cropper(i)"
				/>
			</div>
			<div class="flex align-center" v-if="show_upload_button && currently_uploading === -1">
				<button
					class="btn btn-primary btn-sm margin-right"
					@click="upload_files"
				>
					<span v-if="files.length === 1">
						{{ __('Upload file') }}
					</span>
					<span v-else>
						{{ __('Upload {0} files', [files.length]) }}
					</span>
				</button>
				<div class="text-muted text-medium">
					{{ __('Click on the lock icon to toggle public/private') }}
				</div>
			</div>
		</div>
		<ImageCropper
			v-if="show_image_cropper && wrapper_ready"
			:file="files[crop_image_with_index]"
			:fixed_aspect_ratio="restrictions.crop_image_aspect_ratio"
			@toggle_image_cropper="toggle_image_cropper(-1)"
			@upload_after_crop="trigger_upload=true"
		/>
		<FileBrowser
			ref="file_browser"
			v-if="show_file_browser && !disable_file_browser"
			@hide-browser="show_file_browser = false"
		/>
		<WebLink
			ref="web_link"
			v-if="show_web_link"
			@hide-web-link="show_web_link = false"
		/>
	</div>
</template>

<script>
import FilePreview from './FilePreview.vue';
import FileBrowser from './FileBrowser.vue';
import WebLink from './WebLink.vue';
import GoogleDrivePicker from '../../integrations/google_drive_picker';
import ImageCropper from './ImageCropper.vue';

export default {
	name: 'FileUploader',
	props: {
		show_upload_button: {
			default: true
		},
		disable_file_browser: {
			default: false
		},
		allow_multiple: {
			default: true
		},
		as_dataurl: {
			default: false
		},
		doctype: {
			default: null
		},
		docname: {
			default: null
		},
		fieldname: {
			default: null
		},
		folder: {
			default: 'Home'
		},
		method: {
			default: null
		},
		on_success: {
			default: null
		},
		restrictions: {
			default: () => ({
				max_file_size: null, // 2048 -> 2KB
				max_number_of_files: null,
				allowed_file_types: [], // ['image/*', 'video/*', '.jpg', '.gif', '.pdf'],
				crop_image_aspect_ratio: null // 1, 16 / 9, 4 / 3, NaN (free)
			})
		},
		attach_doc_image: {
			default: false
		},
		upload_notes: {
			default: null // "Images or video, upto 2MB"
		}
	},
	components: {
		FilePreview,
		FileBrowser,
		WebLink,
		ImageCropper
	},
	data() {
		return {
			files: [],
			is_dragging: false,
			currently_uploading: -1,
			show_file_browser: false,
			show_web_link: false,
			show_image_cropper: false,
			crop_image_with_index: -1,
			trigger_upload: false,
			close_dialog: false,
			hide_dialog_footer: false,
			allow_take_photo: false,
			allow_web_link: true,
			google_drive_settings: {
				enabled: false
			},
			wrapper_ready: false
		}
	},
	created() {
		this.allow_take_photo = window.navigator.mediaDevices;
		if (frappe.user_id !== "Guest") {
			frappe.call({
				// method only available after login
				method: "frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",
				callback: (resp) => {
					if (!resp.exc) {
						this.google_drive_settings = resp.message;
					}
				}
			});
		}
		if (this.restrictions.max_file_size == null) {
			frappe.call('frappe.core.doctype.file.file.get_max_file_size')
				.then(res => {
					this.restrictions.max_file_size = Number(res.message);
				});
		}
	},
	watch: {
		files(newvalue, oldvalue) {
			if (!this.allow_multiple && newvalue.length > 1) {
				this.files = [newvalue[newvalue.length - 1]];
			}
		}
	},
	computed: {
		upload_complete() {
			return this.files.length > 0
				&& this.files.every(
					file => file.total !== 0 && file.progress === file.total);
		}
	},
	methods: {
		dragover() {
			this.is_dragging = true;
		},
		dragleave() {
			this.is_dragging = false;
		},
		dropfiles(e) {
			this.is_dragging = false;
			this.add_files(e.dataTransfer.files);
		},
		browse_files() {
			this.$refs.file_input.click();
		},
		on_file_input(e) {
			this.add_files(this.$refs.file_input.files);
		},
		remove_file(file) {
			this.files = this.files.filter(f => f !== file);
		},
		toggle_image_cropper(index) {
			this.crop_image_with_index = this.show_image_cropper ? -1 : index;
			this.hide_dialog_footer = !this.show_image_cropper;
			this.show_image_cropper = !this.show_image_cropper;
		},
		toggle_all_private() {
			let flag;
			let private_values = this.files.filter(file => file.private);
			if (private_values.length < this.files.length) {
				// there are some private and some public
				// set all to private
				flag = true;
			} else {
				// all are private, set all to public
				flag = false;
			}
			this.files = this.files.map(file => {
				file.private = flag;
				return file;
			});
		},
		add_files(file_array) {
			let files = Array.from(file_array)
				.filter(this.check_restrictions)
				.map(file => {
					let is_image = file.type.startsWith('image');
					let size_kb = file.size / 1024;
					return {
						file_obj: file,
						cropper_file: file,
						crop_box_data: null,
						optimize: size_kb > 200 && is_image && !file.type.includes('svg'),
						name: file.name,
						doc: null,
						progress: 0,
						total: 0,
						failed: false,
						request_succeeded: false,
						error_message: null,
						uploading: false,
						private: !is_image
					}
				});
			this.files = this.files.concat(files);
			// if only one file is allowed and crop_image_aspect_ratio is set, open cropper immediately
			if (this.files.length === 1 && !this.allow_multiple && this.restrictions.crop_image_aspect_ratio != null) {
				if (!this.files[0].file_obj.type.includes('svg')) {
					this.toggle_image_cropper(0);
				}
			}
		},
		check_restrictions(file) {
			let { max_file_size, allowed_file_types = [] } = this.restrictions;

			let mime_type = file.type;
			let extension = '.' + file.name.split('.').pop();

			let is_correct_type = true;
			let valid_file_size = true;

			if (allowed_file_types.length) {
				is_correct_type = allowed_file_types.some((type) => {
					// is this is a mime-type
					if (type.includes('/')) {
						if (!file.type) return false;
						return file.type.match(type);
					}

					// otherwise this is likely an extension
					if (type[0] === '.') {
						return file.name.endsWith(type);
					}
					return false;
				});
			}

			if (max_file_size && file.size != null) {
				valid_file_size = file.size < max_file_size;
			}

			if (!is_correct_type) {
				console.warn('File skipped because of invalid file type', file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because of invalid file type', [file.name]),
					indicator: 'orange'
				});
			}
			if (!valid_file_size) {
				console.warn('File skipped because of invalid file size', file.size, file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because size exceeds {1} MB', [file.name, max_file_size / (1024 * 1024)]),
					indicator: 'orange'
				});
			}

			return is_correct_type && valid_file_size;
		},
		upload_files() {
			if (this.show_file_browser) {
				return this.upload_via_file_browser();
			}
			if (this.show_web_link) {
				return this.upload_via_web_link();
			}
			if (this.as_dataurl) {
				return this.return_as_dataurl();
			}
			return frappe.run_serially(
				this.files.map(
					(file, i) =>
						() => this.upload_file(file, i)
				)
			);
		},
		upload_via_file_browser() {
			let selected_file = this.$refs.file_browser.selected_node;
			if (!selected_file.value) {
				frappe.msgprint(__('Click on a file to select it.'));
				this.close_dialog = true;
				return Promise.reject();
			}
			this.close_dialog = true;
			return this.upload_file({
				file_url: selected_file.file_url
			});
		},
		upload_via_web_link() {
			let file_url = this.$refs.web_link.url;
			if (!file_url) {
				frappe.msgprint(__('Invalid URL'));
				this.close_dialog = true;
				return Promise.reject();
			}
			file_url = decodeURI(file_url)
			this.close_dialog = true;
			return this.upload_file({
				file_url
			});
		},
		return_as_dataurl() {
			let promises = this.files.map(file =>
				frappe.dom.file_to_base64(file.file_obj)
					.then(dataurl => {
						file.dataurl = dataurl;
						this.on_success && this.on_success(file);
					})
			);
			this.close_dialog = true;
			return Promise.all(promises);
		},
		upload_file(file, i) {
			this.currently_uploading = i;

			return new Promise((resolve, reject) => {
				let xhr = new XMLHttpRequest();
				xhr.upload.addEventListener('loadstart', (e) => {
					file.uploading = true;
				})
				xhr.upload.addEventListener('progress', (e) => {
					if (e.lengthComputable) {
						file.progress = e.loaded;
						file.total = e.total;
					}
				})
				xhr.upload.addEventListener('load', (e) => {
					file.uploading = false;
					resolve();
				})
				xhr.addEventListener('error', (e) => {
					file.failed = true;
					reject();
				})
				xhr.onreadystatechange = () => {
					if (xhr.readyState == XMLHttpRequest.DONE) {
						if (xhr.status === 200) {
							file.request_succeeded = true;
							let r = null;
							let file_doc = null;
							try {
								r = JSON.parse(xhr.responseText);
								if (r.message.doctype === 'File') {
									file_doc = r.message;
								}
							} catch(e) {
								r = xhr.responseText;
							}

							file.doc = file_doc;

							if (this.on_success) {
								this.on_success(file_doc, r);
							}

							if (i == this.files.length - 1 && this.files.every(file => file.request_succeeded)) {
								this.close_dialog = true;
							}

						} else if (xhr.status === 403) {
							file.failed = true;
							let response = JSON.parse(xhr.responseText);
							file.error_message = \`Not permitted. \${response._error_message || ''}\`;

						} else if (xhr.status === 413) {
							file.failed = true;
							file.error_message = 'Size exceeds the maximum allowed file size.';

						} else {
							file.failed = true;
							file.error_message = xhr.status === 0 ? 'XMLHttpRequest Error' : \`\${xhr.status} : \${xhr.statusText}\`;

							let error = null;
							try {
								error = JSON.parse(xhr.responseText);
							} catch(e) {
								// pass
							}
							frappe.request.cleanup({}, error);
						}
					}
				}
				xhr.open('POST', '/api/method/upload_file', true);
				xhr.setRequestHeader('Accept', 'application/json');
				xhr.setRequestHeader('X-Frappe-CSRF-Token', frappe.csrf_token);

				let form_data = new FormData();
				if (file.file_obj) {
					form_data.append('file', file.file_obj, file.name);
				}
				form_data.append('is_private', +file.private);
				form_data.append('folder', this.folder);

				if (file.file_url) {
					form_data.append('file_url', file.file_url);
				}

				if (file.file_name) {
					form_data.append('file_name', file.file_name);
				}

				if (this.doctype && this.docname) {
					form_data.append('doctype', this.doctype);
					form_data.append('docname', this.docname);
				}

				if (this.fieldname) {
					form_data.append('fieldname', this.fieldname);
				}

				if (this.method) {
					form_data.append('method', this.method);
				}

				if (file.optimize) {
					form_data.append('optimize', true);
				}

				if (this.attach_doc_image) {
					form_data.append('max_width', 200);
					form_data.append('max_height', 200);
				}

				xhr.send(form_data);
			});
		},
		capture_image() {
			const capture = new frappe.ui.Capture({
				animate: false,
				error: true
			});
			capture.show();
			capture.submit(data_urls => {
				data_urls.forEach(data_url => {
					let filename = \`capture_\${frappe.datetime.now_datetime().replaceAll(/[: -]/g, '_')}.png\`;
					this.url_to_file(data_url, filename, 'image/png').then((file) =>
						this.add_files([file])
					);
				});
			});
		},
		show_google_drive_picker() {
			this.close_dialog = true;
			let google_drive = new GoogleDrivePicker({
				pickerCallback: data => this.google_drive_callback(data),
				...this.google_drive_settings
			});
			google_drive.loadPicker();
		},
		google_drive_callback(data) {
			if (data.action == google.picker.Action.PICKED) {
				this.upload_file({
					file_url: data.docs[0].url,
					file_name: data.docs[0].name
				});
			} else if (data.action == google.picker.Action.CANCEL) {
				cur_frm.attachments.new_attachment()
			}
		},
		url_to_file(url, filename, mime_type) {
			return fetch(url)
					.then(res => res.arrayBuffer())
					.then(buffer => new File([buffer], filename, { type: mime_type }));
		},
	}
}
<\/script>
<style>
.file-upload-area {
	min-height: 16rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px dashed var(--dark-border-color);
	border-radius: var(--border-radius);
	cursor: pointer;
	background-color: var(--bg-color);
}

.btn-file-upload {
	background-color: transparent;
	border: none;
	box-shadow: none;
	font-size: var(--text-xs);
}
</style>
`] }, media: void 0 });
  };
  var __vue_scope_id__7 = void 0;
  var __vue_module_identifier__7 = void 0;
  var __vue_is_functional_template__7 = false;
  function __vue_normalize__7(template, style, script, scope, functional, moduleIdentifier, shadowMode, createInjector, createInjectorSSR, createInjectorShadow) {
    const component = (typeof script === "function" ? script.options : script) || {};
    component.__file = `<template>
	<div class="file-uploader"
		@dragover.prevent="dragover"
		@dragleave.prevent="dragleave"
		@drop.prevent="dropfiles"
	>
		<div
			class="file-upload-area"
			v-show="files.length === 0 && !show_file_browser && !show_web_link"
		>
			<div v-if="!is_dragging">
				<div class="text-center">
					{{ __('Drag and drop files here or upload from') }}
				</div>
				<div class="mt-2 text-center">
					<button class="btn btn-file-upload" @click="browse_files">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="url(#paint0_linear)"/>
							<path d="M13.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M16.5 22V19" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M10.5 22H19.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M7.5 16H22.5" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M21 8H9C8.17157 8 7.5 8.67157 7.5 9.5V17.5C7.5 18.3284 8.17157 19 9 19H21C21.8284 19 22.5 18.3284 22.5 17.5V9.5C22.5 8.67157 21.8284 8 21 8Z" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<defs>
							<linearGradient id="paint0_linear" x1="0" y1="0" x2="0" y2="30" gradientUnits="userSpaceOnUse">
							<stop stop-color="#2C9AF1"/>
							<stop offset="1" stop-color="#2490EF"/>
							</linearGradient>
							</defs>
						</svg>
						<div class="mt-1">{{ __('My Device') }}</div>
					</button>
					<input
						type="file"
						class="hidden"
						ref="file_input"
						@change="on_file_input"
						:multiple="allow_multiple"
						:accept="(restrictions.allowed_file_types || []).join(', ')"
					>
					<button class="btn btn-file-upload" v-if="!disable_file_browser" @click="show_file_browser = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#48BB74"/>
							<path d="M13.0245 11.5H8C7.72386 11.5 7.5 11.7239 7.5 12V20C7.5 21.1046 8.39543 22 9.5 22H20.5C21.6046 22 22.5 21.1046 22.5 20V14.5C22.5 14.2239 22.2761 14 22 14H15.2169C15.0492 14 14.8926 13.9159 14.8 13.776L13.4414 11.724C13.3488 11.5841 13.1922 11.5 13.0245 11.5Z" stroke="white" stroke-miterlimit="10" stroke-linecap="square"/>
							<path d="M8.87939 9.5V8.5C8.87939 8.22386 9.10325 8 9.37939 8H20.6208C20.8969 8 21.1208 8.22386 21.1208 8.5V12" stroke="white" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Library') }}</div>
					</button>
					<button class="btn btn-file-upload" v-if="allow_web_link" @click="show_web_link = true">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#ECAC4B"/>
							<path d="M12.0469 17.9543L17.9558 12.0454" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M13.8184 11.4547L15.7943 9.47873C16.4212 8.85205 17.2714 8.5 18.1578 8.5C19.0443 8.5 19.8945 8.85205 20.5214 9.47873V9.47873C21.1481 10.1057 21.5001 10.9558 21.5001 11.8423C21.5001 12.7287 21.1481 13.5789 20.5214 14.2058L18.5455 16.1818" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
							<path d="M11.4547 13.8184L9.47873 15.7943C8.85205 16.4212 8.5 17.2714 8.5 18.1578C8.5 19.0443 8.85205 19.8945 9.47873 20.5214V20.5214C10.1057 21.1481 10.9558 21.5001 11.8423 21.5001C12.7287 21.5001 13.5789 21.1481 14.2058 20.5214L16.1818 18.5455" stroke="white" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
						<div class="mt-1">{{ __('Link') }}</div>
					</button>
					<button v-if="allow_take_photo" class="btn btn-file-upload" @click="capture_image">
						<svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
							<circle cx="15" cy="15" r="15" fill="#CE315B"/>
							<path d="M11.5 10.5H9.5C8.67157 10.5 8 11.1716 8 12V20C8 20.8284 8.67157 21.5 9.5 21.5H20.5C21.3284 21.5 22 20.8284 22 20V12C22 11.1716 21.3284 10.5 20.5 10.5H18.5L17.3 8.9C17.1111 8.64819 16.8148 8.5 16.5 8.5H13.5C13.1852 8.5 12.8889 8.64819 12.7 8.9L11.5 10.5Z" stroke="white" stroke-linejoin="round"/>
							<circle cx="15" cy="16" r="2.5" stroke="white"/>
						</svg>
						<div class="mt-1">{{ __('Camera') }}</div>
					</button>
					<button v-if="google_drive_settings.enabled" class="btn btn-file-upload" @click="show_google_drive_picker">
						<svg width="30" height="30">
							<image xlink:href="/assets/frappe/icons/social/google_drive.svg" width="30" height="30"/>
						</svg>
						<div class="mt-1">{{ __('Google Drive') }}</div>
					</button>
				</div>
				<div class="text-muted text-medium">
					{{ upload_notes }}
				</div>
			</div>
			<div v-else>
				{{ __('Drop files here') }}
			</div>
		</div>
		<div class="file-preview-area" v-show="files.length && !show_file_browser && !show_web_link">
			<div class="file-preview-container" v-if="!show_image_cropper">
				<FilePreview
					v-for="(file, i) in files"
					:key="file.name"
					:file="file"
					@remove="remove_file(file)"
					@toggle_private="file.private = !file.private"
					@toggle_optimize="file.optimize = !file.optimize"
					@toggle_image_cropper="toggle_image_cropper(i)"
				/>
			</div>
			<div class="flex align-center" v-if="show_upload_button && currently_uploading === -1">
				<button
					class="btn btn-primary btn-sm margin-right"
					@click="upload_files"
				>
					<span v-if="files.length === 1">
						{{ __('Upload file') }}
					</span>
					<span v-else>
						{{ __('Upload {0} files', [files.length]) }}
					</span>
				</button>
				<div class="text-muted text-medium">
					{{ __('Click on the lock icon to toggle public/private') }}
				</div>
			</div>
		</div>
		<ImageCropper
			v-if="show_image_cropper && wrapper_ready"
			:file="files[crop_image_with_index]"
			:fixed_aspect_ratio="restrictions.crop_image_aspect_ratio"
			@toggle_image_cropper="toggle_image_cropper(-1)"
			@upload_after_crop="trigger_upload=true"
		/>
		<FileBrowser
			ref="file_browser"
			v-if="show_file_browser && !disable_file_browser"
			@hide-browser="show_file_browser = false"
		/>
		<WebLink
			ref="web_link"
			v-if="show_web_link"
			@hide-web-link="show_web_link = false"
		/>
	</div>
</template>

<script>
import FilePreview from './FilePreview.vue';
import FileBrowser from './FileBrowser.vue';
import WebLink from './WebLink.vue';
import GoogleDrivePicker from '../../integrations/google_drive_picker';
import ImageCropper from './ImageCropper.vue';

export default {
	name: 'FileUploader',
	props: {
		show_upload_button: {
			default: true
		},
		disable_file_browser: {
			default: false
		},
		allow_multiple: {
			default: true
		},
		as_dataurl: {
			default: false
		},
		doctype: {
			default: null
		},
		docname: {
			default: null
		},
		fieldname: {
			default: null
		},
		folder: {
			default: 'Home'
		},
		method: {
			default: null
		},
		on_success: {
			default: null
		},
		restrictions: {
			default: () => ({
				max_file_size: null, // 2048 -> 2KB
				max_number_of_files: null,
				allowed_file_types: [], // ['image/*', 'video/*', '.jpg', '.gif', '.pdf'],
				crop_image_aspect_ratio: null // 1, 16 / 9, 4 / 3, NaN (free)
			})
		},
		attach_doc_image: {
			default: false
		},
		upload_notes: {
			default: null // "Images or video, upto 2MB"
		}
	},
	components: {
		FilePreview,
		FileBrowser,
		WebLink,
		ImageCropper
	},
	data() {
		return {
			files: [],
			is_dragging: false,
			currently_uploading: -1,
			show_file_browser: false,
			show_web_link: false,
			show_image_cropper: false,
			crop_image_with_index: -1,
			trigger_upload: false,
			close_dialog: false,
			hide_dialog_footer: false,
			allow_take_photo: false,
			allow_web_link: true,
			google_drive_settings: {
				enabled: false
			},
			wrapper_ready: false
		}
	},
	created() {
		this.allow_take_photo = window.navigator.mediaDevices;
		if (frappe.user_id !== "Guest") {
			frappe.call({
				// method only available after login
				method: "frappe.integrations.doctype.google_settings.google_settings.get_file_picker_settings",
				callback: (resp) => {
					if (!resp.exc) {
						this.google_drive_settings = resp.message;
					}
				}
			});
		}
		if (this.restrictions.max_file_size == null) {
			frappe.call('frappe.core.doctype.file.file.get_max_file_size')
				.then(res => {
					this.restrictions.max_file_size = Number(res.message);
				});
		}
	},
	watch: {
		files(newvalue, oldvalue) {
			if (!this.allow_multiple && newvalue.length > 1) {
				this.files = [newvalue[newvalue.length - 1]];
			}
		}
	},
	computed: {
		upload_complete() {
			return this.files.length > 0
				&& this.files.every(
					file => file.total !== 0 && file.progress === file.total);
		}
	},
	methods: {
		dragover() {
			this.is_dragging = true;
		},
		dragleave() {
			this.is_dragging = false;
		},
		dropfiles(e) {
			this.is_dragging = false;
			this.add_files(e.dataTransfer.files);
		},
		browse_files() {
			this.$refs.file_input.click();
		},
		on_file_input(e) {
			this.add_files(this.$refs.file_input.files);
		},
		remove_file(file) {
			this.files = this.files.filter(f => f !== file);
		},
		toggle_image_cropper(index) {
			this.crop_image_with_index = this.show_image_cropper ? -1 : index;
			this.hide_dialog_footer = !this.show_image_cropper;
			this.show_image_cropper = !this.show_image_cropper;
		},
		toggle_all_private() {
			let flag;
			let private_values = this.files.filter(file => file.private);
			if (private_values.length < this.files.length) {
				// there are some private and some public
				// set all to private
				flag = true;
			} else {
				// all are private, set all to public
				flag = false;
			}
			this.files = this.files.map(file => {
				file.private = flag;
				return file;
			});
		},
		add_files(file_array) {
			let files = Array.from(file_array)
				.filter(this.check_restrictions)
				.map(file => {
					let is_image = file.type.startsWith('image');
					let size_kb = file.size / 1024;
					return {
						file_obj: file,
						cropper_file: file,
						crop_box_data: null,
						optimize: size_kb > 200 && is_image && !file.type.includes('svg'),
						name: file.name,
						doc: null,
						progress: 0,
						total: 0,
						failed: false,
						request_succeeded: false,
						error_message: null,
						uploading: false,
						private: !is_image
					}
				});
			this.files = this.files.concat(files);
			// if only one file is allowed and crop_image_aspect_ratio is set, open cropper immediately
			if (this.files.length === 1 && !this.allow_multiple && this.restrictions.crop_image_aspect_ratio != null) {
				if (!this.files[0].file_obj.type.includes('svg')) {
					this.toggle_image_cropper(0);
				}
			}
		},
		check_restrictions(file) {
			let { max_file_size, allowed_file_types = [] } = this.restrictions;

			let mime_type = file.type;
			let extension = '.' + file.name.split('.').pop();

			let is_correct_type = true;
			let valid_file_size = true;

			if (allowed_file_types.length) {
				is_correct_type = allowed_file_types.some((type) => {
					// is this is a mime-type
					if (type.includes('/')) {
						if (!file.type) return false;
						return file.type.match(type);
					}

					// otherwise this is likely an extension
					if (type[0] === '.') {
						return file.name.endsWith(type);
					}
					return false;
				});
			}

			if (max_file_size && file.size != null) {
				valid_file_size = file.size < max_file_size;
			}

			if (!is_correct_type) {
				console.warn('File skipped because of invalid file type', file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because of invalid file type', [file.name]),
					indicator: 'orange'
				});
			}
			if (!valid_file_size) {
				console.warn('File skipped because of invalid file size', file.size, file);
				frappe.show_alert({
					message: __('File "{0}" was skipped because size exceeds {1} MB', [file.name, max_file_size / (1024 * 1024)]),
					indicator: 'orange'
				});
			}

			return is_correct_type && valid_file_size;
		},
		upload_files() {
			if (this.show_file_browser) {
				return this.upload_via_file_browser();
			}
			if (this.show_web_link) {
				return this.upload_via_web_link();
			}
			if (this.as_dataurl) {
				return this.return_as_dataurl();
			}
			return frappe.run_serially(
				this.files.map(
					(file, i) =>
						() => this.upload_file(file, i)
				)
			);
		},
		upload_via_file_browser() {
			let selected_file = this.$refs.file_browser.selected_node;
			if (!selected_file.value) {
				frappe.msgprint(__('Click on a file to select it.'));
				this.close_dialog = true;
				return Promise.reject();
			}
			this.close_dialog = true;
			return this.upload_file({
				file_url: selected_file.file_url
			});
		},
		upload_via_web_link() {
			let file_url = this.$refs.web_link.url;
			if (!file_url) {
				frappe.msgprint(__('Invalid URL'));
				this.close_dialog = true;
				return Promise.reject();
			}
			file_url = decodeURI(file_url)
			this.close_dialog = true;
			return this.upload_file({
				file_url
			});
		},
		return_as_dataurl() {
			let promises = this.files.map(file =>
				frappe.dom.file_to_base64(file.file_obj)
					.then(dataurl => {
						file.dataurl = dataurl;
						this.on_success && this.on_success(file);
					})
			);
			this.close_dialog = true;
			return Promise.all(promises);
		},
		upload_file(file, i) {
			this.currently_uploading = i;

			return new Promise((resolve, reject) => {
				let xhr = new XMLHttpRequest();
				xhr.upload.addEventListener('loadstart', (e) => {
					file.uploading = true;
				})
				xhr.upload.addEventListener('progress', (e) => {
					if (e.lengthComputable) {
						file.progress = e.loaded;
						file.total = e.total;
					}
				})
				xhr.upload.addEventListener('load', (e) => {
					file.uploading = false;
					resolve();
				})
				xhr.addEventListener('error', (e) => {
					file.failed = true;
					reject();
				})
				xhr.onreadystatechange = () => {
					if (xhr.readyState == XMLHttpRequest.DONE) {
						if (xhr.status === 200) {
							file.request_succeeded = true;
							let r = null;
							let file_doc = null;
							try {
								r = JSON.parse(xhr.responseText);
								if (r.message.doctype === 'File') {
									file_doc = r.message;
								}
							} catch(e) {
								r = xhr.responseText;
							}

							file.doc = file_doc;

							if (this.on_success) {
								this.on_success(file_doc, r);
							}

							if (i == this.files.length - 1 && this.files.every(file => file.request_succeeded)) {
								this.close_dialog = true;
							}

						} else if (xhr.status === 403) {
							file.failed = true;
							let response = JSON.parse(xhr.responseText);
							file.error_message = \`Not permitted. \${response._error_message || ''}\`;

						} else if (xhr.status === 413) {
							file.failed = true;
							file.error_message = 'Size exceeds the maximum allowed file size.';

						} else {
							file.failed = true;
							file.error_message = xhr.status === 0 ? 'XMLHttpRequest Error' : \`\${xhr.status} : \${xhr.statusText}\`;

							let error = null;
							try {
								error = JSON.parse(xhr.responseText);
							} catch(e) {
								// pass
							}
							frappe.request.cleanup({}, error);
						}
					}
				}
				xhr.open('POST', '/api/method/upload_file', true);
				xhr.setRequestHeader('Accept', 'application/json');
				xhr.setRequestHeader('X-Frappe-CSRF-Token', frappe.csrf_token);

				let form_data = new FormData();
				if (file.file_obj) {
					form_data.append('file', file.file_obj, file.name);
				}
				form_data.append('is_private', +file.private);
				form_data.append('folder', this.folder);

				if (file.file_url) {
					form_data.append('file_url', file.file_url);
				}

				if (file.file_name) {
					form_data.append('file_name', file.file_name);
				}

				if (this.doctype && this.docname) {
					form_data.append('doctype', this.doctype);
					form_data.append('docname', this.docname);
				}

				if (this.fieldname) {
					form_data.append('fieldname', this.fieldname);
				}

				if (this.method) {
					form_data.append('method', this.method);
				}

				if (file.optimize) {
					form_data.append('optimize', true);
				}

				if (this.attach_doc_image) {
					form_data.append('max_width', 200);
					form_data.append('max_height', 200);
				}

				xhr.send(form_data);
			});
		},
		capture_image() {
			const capture = new frappe.ui.Capture({
				animate: false,
				error: true
			});
			capture.show();
			capture.submit(data_urls => {
				data_urls.forEach(data_url => {
					let filename = \`capture_\${frappe.datetime.now_datetime().replaceAll(/[: -]/g, '_')}.png\`;
					this.url_to_file(data_url, filename, 'image/png').then((file) =>
						this.add_files([file])
					);
				});
			});
		},
		show_google_drive_picker() {
			this.close_dialog = true;
			let google_drive = new GoogleDrivePicker({
				pickerCallback: data => this.google_drive_callback(data),
				...this.google_drive_settings
			});
			google_drive.loadPicker();
		},
		google_drive_callback(data) {
			if (data.action == google.picker.Action.PICKED) {
				this.upload_file({
					file_url: data.docs[0].url,
					file_name: data.docs[0].name
				});
			} else if (data.action == google.picker.Action.CANCEL) {
				cur_frm.attachments.new_attachment()
			}
		},
		url_to_file(url, filename, mime_type) {
			return fetch(url)
					.then(res => res.arrayBuffer())
					.then(buffer => new File([buffer], filename, { type: mime_type }));
		},
	}
}
<\/script>
<style>
.file-upload-area {
	min-height: 16rem;
	display: flex;
	align-items: center;
	justify-content: center;
	border: 1px dashed var(--dark-border-color);
	border-radius: var(--border-radius);
	cursor: pointer;
	background-color: var(--bg-color);
}

.btn-file-upload {
	background-color: transparent;
	border: none;
	box-shadow: none;
	font-size: var(--text-xs);
}
</style>
`;
    if (!component.render) {
      component.render = template.render;
      component.staticRenderFns = template.staticRenderFns;
      component._compiled = true;
      if (functional)
        component.functional = true;
    }
    component._scopeId = scope;
    if (true) {
      let hook;
      if (false) {
        hook = function(context) {
          context = context || this.$vnode && this.$vnode.ssrContext || this.parent && this.parent.$vnode && this.parent.$vnode.ssrContext;
          if (!context && typeof __VUE_SSR_CONTEXT__ !== "undefined") {
            context = __VUE_SSR_CONTEXT__;
          }
          if (style) {
            style.call(this, createInjectorSSR(context));
          }
          if (context && context._registeredComponents) {
            context._registeredComponents.add(moduleIdentifier);
          }
        };
        component._ssrRegister = hook;
      } else if (style) {
        hook = shadowMode ? function(context) {
          style.call(this, createInjectorShadow(context, this.$root.$options.shadowRoot));
        } : function(context) {
          style.call(this, createInjector(context));
        };
      }
      if (hook !== void 0) {
        if (component.functional) {
          const originalRender = component.render;
          component.render = function renderWithStyleInjection(h2, context) {
            hook.call(context);
            return originalRender(h2, context);
          };
        } else {
          const existing = component.beforeCreate;
          component.beforeCreate = existing ? [].concat(existing, hook) : [hook];
        }
      }
    }
    return component;
  }
  function __vue_create_injector__7() {
    const styles = __vue_create_injector__7.styles || (__vue_create_injector__7.styles = {});
    const isOldIE = typeof navigator !== "undefined" && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());
    return function addStyle(id, css) {
      if (document.querySelector('style[data-vue-ssr-id~="' + id + '"]'))
        return;
      const group = isOldIE ? css.media || "default" : id;
      const style = styles[group] || (styles[group] = { ids: [], parts: [], element: void 0 });
      if (!style.ids.includes(id)) {
        let code = css.source;
        let index = style.ids.length;
        style.ids.push(id);
        if (false) {
          code += "\n/*# sourceURL=" + css.map.sources[0] + " */";
          code += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(css.map)))) + " */";
        }
        if (isOldIE) {
          style.element = style.element || document.querySelector("style[data-group=" + group + "]");
        }
        if (!style.element) {
          const head = document.head || document.getElementsByTagName("head")[0];
          const el = style.element = document.createElement("style");
          el.type = "text/css";
          if (css.media)
            el.setAttribute("media", css.media);
          if (isOldIE) {
            el.setAttribute("data-group", group);
            el.setAttribute("data-next-index", "0");
          }
          head.appendChild(el);
        }
        if (isOldIE) {
          index = parseInt(style.element.getAttribute("data-next-index"));
          style.element.setAttribute("data-next-index", index + 1);
        }
        if (style.element.styleSheet) {
          style.parts.push(code);
          style.element.styleSheet.cssText = style.parts.filter(Boolean).join("\n");
        } else {
          const textNode = document.createTextNode(code);
          const nodes = style.element.childNodes;
          if (nodes[index])
            style.element.removeChild(nodes[index]);
          if (nodes.length)
            style.element.insertBefore(textNode, nodes[index]);
          else
            style.element.appendChild(textNode);
        }
      }
    };
  }
  var __vue_component__7 = /* @__PURE__ */ __vue_normalize__7({ render: __vue_render__7, staticRenderFns: __vue_staticRenderFns__7 }, __vue_inject_styles__7, __vue_script__7, __vue_scope_id__7, __vue_is_functional_template__7, __vue_module_identifier__7, false, __vue_create_injector__7, void 0, void 0);
  var FileUploader_default = __vue_component__7;

  // frappe/public/js/frappe/file_uploader/index.js
  var FileUploader = class {
    constructor({
      wrapper,
      method,
      on_success,
      doctype: doctype2,
      docname,
      fieldname,
      files,
      folder,
      restrictions = {},
      upload_notes,
      allow_multiple,
      as_dataurl,
      disable_file_browser,
      dialog_title,
      attach_doc_image,
      frm
    } = {}) {
      frm && frm.attachments.max_reached(true);
      if (!wrapper) {
        this.make_dialog(dialog_title);
      } else {
        this.wrapper = wrapper.get ? wrapper.get(0) : wrapper;
      }
      this.$fileuploader = new Vue({
        el: this.wrapper,
        render: (h2) => h2(FileUploader_default, {
          props: {
            show_upload_button: !Boolean(this.dialog),
            doctype: doctype2,
            docname,
            fieldname,
            method,
            folder,
            on_success,
            restrictions,
            upload_notes,
            allow_multiple,
            as_dataurl,
            disable_file_browser,
            attach_doc_image
          }
        })
      });
      this.uploader = this.$fileuploader.$children[0];
      if (!this.dialog) {
        this.uploader.wrapper_ready = true;
      }
      this.uploader.$watch("files", (files2) => {
        let all_private = files2.every((file) => file.private);
        if (this.dialog) {
          this.dialog.set_secondary_action_label(all_private ? __("Set all public") : __("Set all private"));
        }
      }, { deep: true });
      this.uploader.$watch("trigger_upload", (trigger_upload) => {
        if (trigger_upload) {
          this.upload_files();
        }
      });
      this.uploader.$watch("close_dialog", (close_dialog) => {
        if (close_dialog) {
          this.dialog && this.dialog.hide();
        }
      });
      this.uploader.$watch("hide_dialog_footer", (hide_dialog_footer) => {
        if (hide_dialog_footer) {
          this.dialog && this.dialog.footer.addClass("hide");
          this.dialog.$wrapper.data("bs.modal")._config.backdrop = "static";
        } else {
          this.dialog && this.dialog.footer.removeClass("hide");
          this.dialog.$wrapper.data("bs.modal")._config.backdrop = true;
        }
      });
      if (files && files.length) {
        this.uploader.add_files(files);
      }
    }
    upload_files() {
      this.dialog && this.dialog.get_primary_btn().prop("disabled", true);
      this.dialog && this.dialog.get_secondary_btn().prop("disabled", true);
      return this.uploader.upload_files();
    }
    make_dialog(title) {
      this.dialog = new frappe.ui.Dialog({
        title: title || __("Upload"),
        primary_action_label: __("Upload"),
        primary_action: () => this.upload_files(),
        secondary_action_label: __("Set all private"),
        secondary_action: () => {
          this.uploader.toggle_all_private();
        },
        on_page_show: () => {
          this.uploader.wrapper_ready = true;
        }
      });
      this.wrapper = this.dialog.body;
      this.dialog.show();
      this.dialog.$wrapper.on("hidden.bs.modal", function() {
        $(this).data("bs.modal", null);
        $(this).remove();
      });
    }
  };

  // frappe/public/js/frappe/upload.js
  frappe.provide("frappe.ui");
  frappe.ui.FileUploader = FileUploader;

  // frappe/public/js/frappe/ui/tree.js
  frappe.provide("frappe.ui");
  frappe.ui.Tree = class {
    constructor({
      parent,
      label,
      root_value,
      icon_set,
      toolbar,
      expandable,
      with_skeleton = 1,
      args,
      method,
      get_label,
      on_render,
      on_click
    }) {
      $.extend(this, arguments[0]);
      if (root_value == null) {
        this.root_value = label;
      }
      this.setup_treenode_class();
      this.nodes = {};
      this.wrapper = $('<div class="tree">').appendTo(this.parent);
      if (with_skeleton)
        this.wrapper.addClass("with-skeleton");
      if (!icon_set) {
        this.icon_set = {
          open: frappe.utils.icon("folder-open", "md"),
          closed: frappe.utils.icon("folder-normal", "md"),
          leaf: frappe.utils.icon("primitive-dot", "xs")
        };
      }
      this.setup_root_node();
    }
    get_nodes(value, is_root) {
      var args = Object.assign({}, this.args);
      args.parent = value;
      args.is_root = is_root;
      return new Promise((resolve) => {
        frappe.call({
          method: this.method,
          args,
          callback: (r2) => {
            this.on_get_node && this.on_get_node(r2.message);
            resolve(r2.message);
          }
        });
      });
    }
    get_all_nodes(value, is_root, label) {
      var args = Object.assign({}, this.args);
      args.label = label || value;
      args.parent = value;
      args.is_root = is_root;
      args.tree_method = this.method;
      return new Promise((resolve) => {
        frappe.call({
          method: "frappe.desk.treeview.get_all_nodes",
          args,
          callback: (r2) => {
            this.on_get_node && this.on_get_node(r2.message, true);
            resolve(r2.message);
          }
        });
      });
    }
    setup_treenode_class() {
      let tree = this;
      this.TreeNode = class {
        constructor({
          parent,
          label,
          parent_label,
          expandable,
          is_root,
          data
        }) {
          $.extend(this, arguments[0]);
          this.loaded = 0;
          this.expanded = 0;
          if (this.parent_label) {
            this.parent_node = tree.nodes[this.parent_label];
          }
          tree.nodes[this.label] = this;
          tree.make_node_element(this);
          tree.on_render && tree.on_render(this);
        }
      };
    }
    setup_root_node() {
      this.root_node = new this.TreeNode({
        parent: this.wrapper,
        label: this.label,
        parent_label: null,
        expandable: true,
        is_root: true,
        data: {
          value: this.root_value
        }
      });
      this.expand_node(this.root_node, false);
    }
    refresh() {
      this.selected_node.parent_node && this.load_children(this.selected_node.parent_node, true);
    }
    make_node_element(node) {
      node.$tree_link = $('<span class="tree-link">').attr("data-label", node.label).data("node", node).appendTo(node.parent);
      node.$ul = $('<ul class="tree-children">').hide().appendTo(node.parent);
      this.make_icon_and_label(node);
      if (this.toolbar) {
        node.$toolbar = this.get_toolbar(node).insertAfter(node.$tree_link);
      }
    }
    add_node(node, data) {
      var $li = $('<li class="tree-node">');
      return new this.TreeNode({
        parent: $li.appendTo(node.$ul),
        parent_label: node.label,
        label: data.value,
        title: data.title,
        expandable: data.expandable,
        data
      });
    }
    reload_node(node) {
      this.load_children(node);
    }
    toggle() {
      this.get_selected_node().toggle();
    }
    get_selected_node() {
      return this.selected_node;
    }
    set_selected_node(node) {
      this.selected_node = node;
    }
    load_children(node, deep = false) {
      let lab = node.label, value = node.data.value, is_root = node.is_root;
      if (!deep) {
        frappe.run_serially([
          () => this.get_nodes(value, is_root),
          (data_set) => this.render_node_children(node, data_set),
          () => this.set_selected_node(node)
        ]);
      } else {
        frappe.run_serially([
          () => this.get_all_nodes(value, is_root, lab),
          (data_list) => this.render_children_of_all_nodes(data_list),
          () => this.set_selected_node(node)
        ]);
      }
    }
    render_children_of_all_nodes(data_list) {
      data_list.map((d2) => this.render_node_children(this.nodes[d2.parent], d2.data));
    }
    render_node_children(node, data_set) {
      node.$ul.empty();
      if (data_set) {
        $.each(data_set, (i2, data) => {
          var child_node = this.add_node(node, data);
          child_node.$tree_link.data("node-data", data).data("node", child_node);
        });
      }
      node.expanded = false;
      node.loaded = true;
      this.expand_node(node);
    }
    on_node_click(node) {
      this.expand_node(node);
      frappe.dom.activate(this.wrapper, node.$tree_link, "tree-link");
      if (node.$toolbar)
        this.show_toolbar(node);
    }
    expand_node(node, click = true) {
      this.set_selected_node(node);
      if (click) {
        this.on_click && this.on_click(node);
      }
      if (node.expandable) {
        this.toggle_node(node);
      }
      this.select_link(node);
      node.expanded = !node.expanded;
      node.parent.toggleClass("opened", node.expanded);
    }
    toggle_node(node) {
      if (node.expandable && this.get_nodes && !node.loaded) {
        return this.load_children(node);
      }
      if (node.$ul) {
        if (node.$ul.children().length) {
          node.$ul.toggle(!node.expanded);
        }
        if (this.icon_set) {
          if (!node.expanded) {
            node.$tree_link.find(".icon").parent().html(this.icon_set.open);
          } else {
            node.$tree_link.find(".icon").parent().addClass("node-parent").html(this.icon_set.closed);
          }
        }
      }
    }
    select_link(node) {
      this.wrapper.find(".selected").removeClass("selected");
      node.$tree_link.toggleClass("selected");
    }
    show_toolbar(node) {
      if (this.cur_toolbar)
        $(this.cur_toolbar).hide();
      this.cur_toolbar = node.$toolbar;
      node.$toolbar.show();
    }
    get_node_label(node) {
      if (this.get_label) {
        return this.get_label(node);
      }
      if (node.title && node.title != node.label) {
        return __(node.title) + ` <span class='text-muted'>(${node.label})</span>`;
      } else {
        return __(node.title || node.label);
      }
    }
    make_icon_and_label(node) {
      let icon_html = "";
      if (this.icon_set) {
        if (node.expandable) {
          icon_html = `<span class="node-parent">${this.icon_set.closed}</span>`;
        } else {
          icon_html = `<span>${this.icon_set.leaf}</span>`;
        }
      }
      $(icon_html).appendTo(node.$tree_link);
      $(`<a class="tree-label"> ${this.get_node_label(node)}</a>`).appendTo(node.$tree_link);
      node.$tree_link.on("click", () => {
        setTimeout(() => {
          this.on_node_click(node);
        }, 100);
      });
      node.$tree_link.hover(function() {
        $(this).parent().addClass("hover-active");
      }, function() {
        $(this).parent().removeClass("hover-active");
      });
    }
    get_toolbar(node) {
      let $toolbar = $('<span class="tree-node-toolbar btn-group"></span>').hide();
      Object.keys(this.toolbar).map((key2) => {
        let obj = this.toolbar[key2];
        if (!obj.label)
          return;
        if (obj.condition && !obj.condition(node))
          return;
        var label = obj.get_label ? obj.get_label() : obj.label;
        var $link = $("<button class='btn btn-default btn-xs'></button>").html(label).addClass("tree-toolbar-button " + (obj.btnClass || "")).appendTo($toolbar);
        $link.on("click", () => {
          obj.click(node);
        });
      });
      return $toolbar;
    }
  };

  // frappe/public/js/frappe/views/container.js
  frappe.provide("frappe.pages");
  frappe.provide("frappe.views");
  window.cur_page = null;
  frappe.views.Container = class Container {
    constructor() {
      this.container = $("#body").get(0);
      this.page = null;
      this.pagewidth = $(this.container).width();
      this.pagemargin = 50;
      var me = this;
      $(document).on("page-change", function() {
        var route_str = frappe.get_route_str();
        $("body").attr("data-route", route_str);
        $("body").attr("data-sidebar", me.has_sidebar() ? 1 : 0);
      });
      $(document).bind("rename", function(event2, dt2, old_name, new_name) {
        frappe.breadcrumbs.rename(dt2, old_name, new_name);
      });
    }
    add_page(label) {
      var page = $('<div class="content page-container"></div>').attr("id", "page-" + label).attr("data-page-route", label).hide().appendTo(this.container).get(0);
      page.label = label;
      frappe.pages[label] = page;
      return page;
    }
    change_to(label) {
      cur_page = this;
      if (label.tagName) {
        var page = label;
      } else {
        var page = frappe.pages[label];
      }
      if (!page) {
        console.log(__("Page not found") + ": " + label);
        return;
      }
      if (window.cur_dialog && cur_dialog.display && !cur_dialog.keep_open) {
        if (!cur_dialog.minimizable) {
          cur_dialog.hide();
        } else if (!cur_dialog.is_minimized) {
          cur_dialog.toggle_minimize();
        }
      }
      if (this.page && this.page != page) {
        $(this.page).hide();
        $(this.page).trigger("hide");
      }
      if (!this.page || this.page != page) {
        this.page = page;
        $(this.page).show();
      }
      $(document).trigger("page-change");
      this.page._route = frappe.router.get_sub_path();
      $(this.page).trigger("show");
      !this.page.disable_scroll_to_top && frappe.utils.scroll_to(0);
      frappe.breadcrumbs.update();
      return this.page;
    }
    has_sidebar() {
      var flag = 0;
      var route_str = frappe.get_route_str();
      flag = frappe.ui.pages[route_str] && !frappe.ui.pages[route_str].single_column;
      if (!flag) {
        var page_route = route_str.split("/").slice(0, 2).join("/");
        flag = $(`.page-container[data-page-route="${page_route}"] .layout-side-section`).length ? 1 : 0;
      }
      return flag;
    }
  };

  // frappe/public/js/frappe/views/breadcrumbs.js
  frappe.breadcrumbs = {
    all: {},
    preferred: {
      "File": "",
      "Dashboard": "Customization",
      "Dashboard Chart": "Customization",
      "Dashboard Chart Source": "Customization"
    },
    module_map: {
      "Core": "Settings",
      "Email": "Settings",
      "Custom": "Settings",
      "Workflow": "Settings",
      "Printing": "Settings",
      "Setup": "Settings",
      "Event Streaming": "Tools",
      "Automation": "Tools"
    },
    set_doctype_module(doctype2, module2) {
      localStorage["preferred_breadcrumbs:" + doctype2] = module2;
    },
    get_doctype_module(doctype2) {
      return localStorage["preferred_breadcrumbs:" + doctype2];
    },
    add(module2, doctype2, type) {
      let obj;
      if (typeof module2 === "object") {
        obj = module2;
      } else {
        obj = {
          module: module2,
          doctype: doctype2,
          type
        };
      }
      this.all[frappe.breadcrumbs.current_page()] = obj;
      this.update();
    },
    current_page() {
      return frappe.get_route_str();
    },
    update() {
      var breadcrumbs = this.all[frappe.breadcrumbs.current_page()];
      this.clear();
      if (!breadcrumbs)
        return this.toggle(false);
      if (breadcrumbs.type === "Custom") {
        this.set_custom_breadcrumbs(breadcrumbs);
      } else {
        this.set_workspace_breadcrumb(breadcrumbs);
        let view = frappe.get_route()[0];
        view = view ? view.toLowerCase() : null;
        if (breadcrumbs.doctype && ["print", "form"].includes(view)) {
          this.set_list_breadcrumb(breadcrumbs);
          this.set_form_breadcrumb(breadcrumbs, view);
        } else if (breadcrumbs.doctype && view === "list") {
          this.set_list_breadcrumb(breadcrumbs);
        } else if (breadcrumbs.doctype && view == "dashboard-view") {
          this.set_list_breadcrumb(breadcrumbs);
          this.set_dashboard_breadcrumb(breadcrumbs);
        }
      }
      this.toggle(true);
    },
    set_custom_breadcrumbs(breadcrumbs) {
      const html = `<li><a href="${breadcrumbs.route}">${breadcrumbs.label}</a></li>`;
      this.$breadcrumbs.append(html);
    },
    set_workspace_breadcrumb(breadcrumbs) {
      if (!breadcrumbs.workspace) {
        this.set_workspace(breadcrumbs);
      }
      if (breadcrumbs.workspace) {
        if (!breadcrumbs.module_info.blocked && frappe.visible_modules.includes(breadcrumbs.module_info.module)) {
          $(`<li><a href="/app/${frappe.router.slug(breadcrumbs.workspace)}">${__(breadcrumbs.workspace)}</a></li>`).appendTo(this.$breadcrumbs);
        }
      }
    },
    set_workspace(breadcrumbs) {
      this.setup_modules();
      var from_module = this.get_doctype_module(breadcrumbs.doctype);
      if (from_module) {
        breadcrumbs.module = from_module;
      } else if (this.preferred[breadcrumbs.doctype] !== void 0) {
        breadcrumbs.module = this.preferred[breadcrumbs.doctype];
      }
      if (breadcrumbs.module) {
        if (this.module_map[breadcrumbs.module]) {
          breadcrumbs.module = this.module_map[breadcrumbs.module];
        }
        breadcrumbs.module_info = frappe.get_module(breadcrumbs.module);
        if (breadcrumbs.module_info && frappe.boot.module_page_map[breadcrumbs.module]) {
          breadcrumbs.workspace = frappe.boot.module_page_map[breadcrumbs.module];
        }
      }
    },
    set_list_breadcrumb(breadcrumbs) {
      const doctype2 = breadcrumbs.doctype;
      const doctype_meta = frappe.get_doc("DocType", doctype2);
      if (doctype2 === "User" && !frappe.user.has_role("System Manager") || doctype_meta && doctype_meta.issingle) {
      } else {
        let route;
        const doctype_route = frappe.router.slug(frappe.router.doctype_layout || doctype2);
        if (frappe.boot.treeviews.indexOf(doctype2) !== -1) {
          let view = frappe.model.user_settings[doctype2].last_view || "Tree";
          route = `${doctype_route}/view/${view}`;
        } else {
          route = doctype_route;
        }
        $(`<li><a href="/app/${route}">${__(doctype2)}</a></li>`).appendTo(this.$breadcrumbs);
      }
    },
    set_form_breadcrumb(breadcrumbs, view) {
      const doctype2 = breadcrumbs.doctype;
      const docname = frappe.get_route()[2];
      let form_route = `/app/${frappe.router.slug(doctype2)}/${docname}`;
      $(`<li><a href="${form_route}">${__(docname)}</a></li>`).appendTo(this.$breadcrumbs);
      if (view === "form") {
        let last_crumb = this.$breadcrumbs.find("li").last();
        last_crumb.addClass("disabled");
        last_crumb.css("cursor", "copy");
        last_crumb.click((event2) => {
          event2.stopImmediatePropagation();
          frappe.utils.copy_to_clipboard(last_crumb.text());
        });
      }
    },
    set_dashboard_breadcrumb(breadcrumbs) {
      const doctype2 = breadcrumbs.doctype;
      const docname = frappe.get_route()[1];
      let dashboard_route = `/app/${frappe.router.slug(doctype2)}/${docname}`;
      $(`<li><a href="${dashboard_route}">${__(docname)}</a></li>`).appendTo(this.$breadcrumbs);
    },
    setup_modules() {
      if (!frappe.visible_modules) {
        frappe.visible_modules = $.map(frappe.boot.allowed_workspaces, (m2) => {
          return m2.module;
        });
      }
    },
    rename(doctype2, old_name, new_name) {
      var old_route_str = ["Form", doctype2, old_name].join("/");
      var new_route_str = ["Form", doctype2, new_name].join("/");
      this.all[new_route_str] = this.all[old_route_str];
      delete frappe.breadcrumbs.all[old_route_str];
      this.update();
    },
    clear() {
      this.$breadcrumbs = $("#navbar-breadcrumbs").empty();
    },
    toggle(show) {
      if (show) {
        $("body").addClass("no-breadcrumbs");
      } else {
        $("body").removeClass("no-breadcrumbs");
      }
    }
  };

  // frappe/public/js/frappe/views/factory.js
  frappe.provide("frappe.pages");
  frappe.provide("frappe.views");
  frappe.views.Factory = class Factory {
    constructor(opts) {
      $.extend(this, opts);
    }
    show() {
      this.route = frappe.get_route();
      this.page_name = frappe.get_route_str();
      if (this.before_show && this.before_show() === false)
        return;
      if (frappe.pages[this.page_name]) {
        frappe.container.change_to(this.page_name);
        if (this.on_show) {
          this.on_show();
        }
      } else {
        if (this.route[1]) {
          this.make(this.route);
        } else {
          frappe.show_not_found(this.route);
        }
      }
    }
    make_page(double_column, page_name) {
      return frappe.make_page(double_column, page_name);
    }
  };
  frappe.make_page = function(double_column, page_name) {
    if (!page_name) {
      page_name = frappe.get_route_str();
    }
    const page = frappe.container.add_page(page_name);
    frappe.ui.make_app_page({
      parent: page,
      single_column: !double_column
    });
    frappe.container.change_to(page_name);
    return page;
  };

  // frappe/public/js/frappe/views/pageview.js
  frappe.provide("frappe.views.pageview");
  frappe.provide("frappe.standard_pages");
  frappe.views.pageview = {
    with_page: function(name2, callback) {
      if (frappe.standard_pages[name2]) {
        if (!frappe.pages[name2]) {
          frappe.standard_pages[name2]();
        }
        callback();
        return;
      }
      if (locals.Page && locals.Page[name2] && locals.Page[name2].script || name2 == window.page_name) {
        callback();
      } else if (localStorage["_page:" + name2] && frappe.boot.developer_mode != 1) {
        frappe.model.sync(JSON.parse(localStorage["_page:" + name2]));
        callback();
      } else if (name2) {
        return frappe.call({
          method: "frappe.desk.desk_page.getpage",
          args: { "name": name2 },
          callback: function(r2) {
            if (!r2.docs._dynamic_page) {
              localStorage["_page:" + name2] = JSON.stringify(r2.docs);
            }
            callback();
          },
          freeze: true
        });
      }
    },
    show: function(name2) {
      if (!name2) {
        name2 = frappe.boot ? frappe.boot.home_page : window.page_name;
      }
      frappe.model.with_doctype("Page", function() {
        frappe.views.pageview.with_page(name2, function(r2) {
          if (r2 && r2.exc) {
            if (!r2["403"])
              frappe.show_not_found(name2);
          } else if (!frappe.pages[name2]) {
            new frappe.views.Page(name2);
          }
          frappe.container.change_to(name2);
        });
      });
    }
  };
  frappe.views.Page = class Page2 {
    constructor(name2) {
      this.name = name2;
      var me = this;
      if (name2 == window.page_name) {
        this.wrapper = document.getElementById("page-" + name2);
        this.wrapper.label = document.title || window.page_name;
        this.wrapper.page_name = window.page_name;
        frappe.pages[window.page_name] = this.wrapper;
      } else {
        this.pagedoc = locals.Page[this.name];
        if (!this.pagedoc) {
          frappe.show_not_found(name2);
          return;
        }
        this.wrapper = frappe.container.add_page(this.name);
        this.wrapper.page_name = this.pagedoc.name;
        if (this.pagedoc.content)
          this.wrapper.innerHTML = this.pagedoc.content;
        frappe.dom.eval(this.pagedoc.__script || this.pagedoc.script || "");
        frappe.dom.set_style(this.pagedoc.style || "");
        frappe.breadcrumbs.add(this.pagedoc.module || null);
      }
      this.trigger_page_event("on_page_load");
      $(this.wrapper).on("show", function() {
        window.cur_frm = null;
        me.trigger_page_event("on_page_show");
        me.trigger_page_event("refresh");
      });
    }
    trigger_page_event(eventname) {
      var me = this;
      if (me.wrapper[eventname]) {
        me.wrapper[eventname](me.wrapper);
      }
    }
  };
  frappe.show_not_found = function(page_name) {
    frappe.show_message_page({
      page_name,
      message: __("Sorry! I could not find what you were looking for."),
      img: "/assets/frappe/images/ui/bubble-tea-sorry.svg"
    });
  };
  frappe.show_not_permitted = function(page_name) {
    frappe.show_message_page({
      page_name,
      message: __("Sorry! You are not permitted to view this page."),
      img: "/assets/frappe/images/ui/bubble-tea-sorry.svg"
    });
  };
  frappe.show_message_page = function(opts) {
    if (!opts.page_name) {
      opts.page_name = frappe.get_route_str();
    }
    if (opts.icon) {
      opts.img = repl('<span class="%(icon)s message-page-icon"></span> ', opts);
    } else if (opts.img) {
      opts.img = repl('<img src="%(img)s" class="message-page-image">', opts);
    }
    var page = frappe.pages[opts.page_name] || frappe.container.add_page(opts.page_name);
    $(page).html(repl('<div class="page message-page">			<div class="text-center message-page-content">				%(img)s				<p class="lead">%(message)s</p>				<a class="btn btn-default btn-sm btn-home" href="#">%(home)s</a>			</div>		</div>', {
      img: opts.img || "",
      message: opts.message || "",
      home: __("Home")
    }));
    frappe.container.change_to(opts.page_name);
  };

  // frappe/public/js/desk.bundle.js
  var import_awesome_bar = __toESM(require_awesome_bar());

  // frappe/public/js/frappe/ui/notifications/notifications.js
  frappe.provide("frappe.search");
  frappe.ui.Notifications = class Notifications {
    constructor() {
      this.tabs = {};
      this.notification_settings = frappe.boot.notification_settings;
      this.make();
    }
    make() {
      this.dropdown = $(".navbar").find(".dropdown-notifications").removeClass("hidden");
      this.dropdown_list = this.dropdown.find(".notifications-list");
      this.header_items = this.dropdown_list.find(".header-items");
      this.header_actions = this.dropdown_list.find(".header-actions");
      this.body = this.dropdown_list.find(".notification-list-body");
      this.panel_events = this.dropdown_list.find(".panel-events");
      this.panel_notifications = this.dropdown_list.find(".panel-notifications");
      this.user = frappe.session.user;
      this.setup_headers();
      this.setup_dropdown_events();
    }
    setup_headers() {
      $(`<span class="notification-settings pull-right" data-action="go_to_settings">
			${frappe.utils.icon("setting-gear")}
		</span>`).on("click", (e2) => {
        e2.stopImmediatePropagation();
        this.dropdown.dropdown("hide");
        frappe.set_route("Form", "Notification Settings", frappe.session.user);
      }).appendTo(this.header_actions).attr("title", __("Notification Settings")).tooltip({ delay: { "show": 600, "hide": 100 }, trigger: "hover" });
      $(`<span class="mark-all-read pull-right" data-action="mark_all_as_read">
			${frappe.utils.icon("mark-as-read")}
		</span>`).on("click", (e2) => this.mark_all_as_read(e2)).appendTo(this.header_actions).attr("title", __("Mark all as read")).tooltip({ delay: { "show": 600, "hide": 100 }, trigger: "hover" });
      this.categories = [
        {
          label: __("Notifications"),
          id: "notifications",
          view: NotificationsView,
          el: this.panel_notifications
        },
        {
          label: __("Today's Events"),
          id: "todays_events",
          view: EventsView,
          el: this.panel_events
        }
      ];
      let get_headers_html = (item) => {
        let active = item.id == "notifications" ? "active" : "";
        let html = `<li class="notifications-category ${active}"
					id="${item.id}"
					data-toggle="collapse"
				>${item.label}</li>`;
        return html;
      };
      let navitem = $(`<ul class="notification-item-tabs nav nav-tabs" role="tablist"></ul>`);
      this.categories = this.categories.map((item) => {
        item.$tab = $(get_headers_html(item));
        item.$tab.on("click", (e2) => {
          e2.stopImmediatePropagation();
          this.switch_tab(item);
        });
        navitem.append(item.$tab);
        return item;
      });
      navitem.appendTo(this.header_items);
      this.categories.forEach((category) => {
        this.make_tab_view(category);
      });
      this.switch_tab(this.categories[0]);
    }
    switch_tab(item) {
      this.categories.forEach((item2) => {
        item2.$tab.removeClass("active");
      });
      item.$tab.addClass("active");
      Object.keys(this.tabs).forEach((tab_name) => this.tabs[tab_name].hide());
      this.tabs[item.id].show();
    }
    make_tab_view(item) {
      let tabView = new item.view(item.el, this.dropdown, this.notification_settings);
      this.tabs[item.id] = tabView;
    }
    mark_all_as_read(e2) {
      e2.stopImmediatePropagation();
      this.dropdown_list.find(".unread").removeClass("unread");
      frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_all_as_read");
    }
    setup_dropdown_events() {
      this.dropdown.on("hide.bs.dropdown", (e2) => {
        let hide = $(e2.currentTarget).data("closable");
        $(e2.currentTarget).data("closable", true);
        return hide;
      });
      this.dropdown.on("click", (e2) => {
        $(e2.currentTarget).data("closable", true);
      });
    }
  };
  frappe.ui.notifications = {
    get_notification_config() {
      return frappe.xcall("frappe.desk.notifications.get_notification_info").then((r2) => {
        frappe.ui.notifications.config = r2;
        return r2;
      });
    },
    show_open_count_list(doctype2) {
      if (!frappe.ui.notifications.config) {
        this.get_notification_config().then(() => {
          this.route_to_list_with_filters(doctype2);
        });
      } else {
        this.route_to_list_with_filters(doctype2);
      }
    },
    route_to_list_with_filters(doctype2) {
      let filters2 = frappe.ui.notifications.config["conditions"][doctype2];
      if (filters2 && $.isPlainObject(filters2)) {
        if (!frappe.route_options) {
          frappe.route_options = {};
        }
        $.extend(frappe.route_options, filters2);
      }
      frappe.set_route("List", doctype2);
    }
  };
  var BaseNotificationsView = class {
    constructor(wrapper, parent, settings) {
      this.wrapper = wrapper;
      this.parent = parent;
      this.settings = settings;
      this.max_length = 20;
      this.container = $(`<div></div>`).appendTo(this.wrapper);
      this.make();
    }
    show() {
      this.container.show();
    }
    hide() {
      this.container.hide();
    }
  };
  var NotificationsView = class extends BaseNotificationsView {
    make() {
      this.notifications_icon = this.parent.find(".notifications-icon");
      this.notifications_icon.attr("title", __("Notifications")).tooltip({ delay: { "show": 600, "hide": 100 }, trigger: "hover" });
      this.setup_notification_listeners();
      this.get_notifications_list(this.max_length).then((list) => {
        this.dropdown_items = list;
        this.render_notifications_dropdown();
        if (this.settings.seen == 0) {
          this.toggle_notification_icon(false);
        }
      });
    }
    update_dropdown() {
      this.get_notifications_list(1).then((r2) => {
        let new_item = r2[0];
        this.dropdown_items.unshift(new_item);
        if (this.dropdown_items.length > this.max_length) {
          this.container.find(".recent-notification").last().remove();
          this.dropdown_items.pop();
        }
        this.insert_into_dropdown();
      });
    }
    change_activity_status() {
      if (this.container.find(".activity-status")) {
        this.container.find(".activity-status").replaceWith(`<a class="recent-item text-center text-muted"
					href="/app/List/Notification Log">
					<div class="full-log-btn">${__("View Full Log")}</div>
				</a>`);
      }
    }
    mark_as_read(docname, $el) {
      frappe.call("frappe.desk.doctype.notification_log.notification_log.mark_as_read", { docname }).then(() => {
        $el.removeClass("unread");
      });
    }
    insert_into_dropdown() {
      let new_item = this.dropdown_items[0];
      let new_item_html = this.get_dropdown_item_html(new_item);
      $(new_item_html).prependTo(this.container);
      this.change_activity_status();
    }
    get_dropdown_item_html(field) {
      let doc_link = this.get_item_link(field);
      let read_class = field.read ? "" : "unread";
      let message2 = field.subject;
      let title = message2.match(/<b class="subject-title">(.*?)<\/b>/);
      message2 = title ? message2.replace(title[1], frappe.ellipsis(strip_html(title[1]), 100)) : message2;
      let timestamp = frappe.datetime.comment_when(field.creation);
      let message_html = `<div class="message">
			<div>${message2}</div>
			<div class="notification-timestamp text-muted">
				${timestamp}
			</div>
		</div>`;
      let user = field.from_user;
      let user_avatar = frappe.avatar(user, "avatar-medium user-avatar");
      let item_html = $(`<a class="recent-item notification-item ${read_class}"
				href="${doc_link}"
				data-name="${field.name}"
			>
				<div class="notification-body">
					${user_avatar}
					${message_html}
				</div>
				<div class="mark-as-read" title="${__("Mark as Read")}">
				</div>
			</a>`);
      if (!field.read) {
        let mark_btn = item_html.find(".mark-as-read");
        mark_btn.tooltip({ delay: { "show": 600, "hide": 100 }, trigger: "hover" });
        mark_btn.on("click", (e2) => {
          e2.preventDefault();
          e2.stopImmediatePropagation();
          this.mark_as_read(field.name, item_html);
        });
      }
      item_html.on("click", () => {
        !field.read && this.mark_as_read(field.name, item_html);
        this.notifications_icon.trigger("click");
      });
      return item_html;
    }
    render_notifications_dropdown() {
      if (this.settings && !this.settings.enabled) {
        this.container.html(`<li class="recent-item notification-item">
				<span class="text-muted">
					${__("Notifications Disabled")}
				</span></li>`);
      } else {
        if (this.dropdown_items.length) {
          this.container.empty();
          this.dropdown_items.forEach((field) => {
            this.container.append(this.get_dropdown_item_html(field));
          });
          this.container.append(`<a class="list-footer"
					href="/app/List/Notification Log">
						<div class="full-log-btn">${__("See all Activity")}</div>
					</a>`);
        } else {
          this.container.append($(`<div class="notification-null-state">
					<div class="text-center">
						<img src="/assets/frappe/images/ui-states/notification-empty-state.svg" alt="Generic Empty State" class="null-state">
						<div class="title">${__("No New notifications")}</div>
						<div class="subtitle">
							${__("Looks like you haven\u2019t received any notifications.")}
					</div></div></div>`));
        }
      }
    }
    get_notifications_list(limit) {
      return frappe.db.get_list("Notification Log", {
        fields: ["*"],
        limit,
        order_by: "creation desc"
      });
    }
    get_item_link(notification_doc) {
      const link_doctype = notification_doc.type == "Alert" ? "Notification Log" : notification_doc.document_type;
      const link_docname = notification_doc.type == "Alert" ? notification_doc.name : notification_doc.document_name;
      return frappe.utils.get_form_link(link_doctype, link_docname);
    }
    toggle_notification_icon(seen) {
      this.notifications_icon.find(".notifications-seen").toggle(seen);
      this.notifications_icon.find(".notifications-unseen").toggle(!seen);
    }
    toggle_seen(flag) {
      frappe.call("frappe.desk.doctype.notification_settings.notification_settings.set_seen_value", {
        value: cint(flag),
        user: frappe.session.user
      });
    }
    setup_notification_listeners() {
      frappe.realtime.on("notification", () => {
        this.toggle_notification_icon(false);
        this.update_dropdown();
      });
      frappe.realtime.on("indicator_hide", () => {
        this.toggle_notification_icon(true);
      });
      this.parent.on("show.bs.dropdown", () => {
        this.toggle_seen(true);
        if (this.notifications_icon.find(".notifications-unseen").is(":visible")) {
          this.toggle_notification_icon(true);
          frappe.call("frappe.desk.doctype.notification_log.notification_log.trigger_indicator_hide");
        }
      });
    }
  };
  var EventsView = class extends BaseNotificationsView {
    make() {
      let today = frappe.datetime.get_today();
      frappe.xcall("frappe.desk.doctype.event.event.get_events", {
        start: today,
        end: today
      }).then((event_list) => {
        this.render_events_html(event_list);
      });
    }
    render_events_html(event_list) {
      let html = "";
      if (event_list.length) {
        let get_event_html = (event2) => {
          let time = __("All Day");
          if (!event2.all_day) {
            let start_time = frappe.datetime.get_time(event2.starts_on);
            let days_diff = frappe.datetime.get_day_diff(event2.ends_on, event2.starts_on);
            let end_time = frappe.datetime.get_time(event2.ends_on);
            if (days_diff > 1) {
              end_time = __("Rest of the day");
            }
            time = `${start_time} - ${end_time}`;
          }
          let particpants = "";
          if (event2.particpants) {
            particpants = frappe.avatar_group(event2.particpants, 3);
          }
          let location2 = "";
          if (event2.location) {
            location2 = `, ${event2.location}`;
          }
          return `<a class="recent-item event" href="/app/event/${event2.name}">
					<div class="event-border" style="border-color: ${event2.color}"></div>
					<div class="event-item">
						<div class="event-subject">${event2.subject}</div>
						<div class="event-time">${time}${location2}</div>
						${particpants}
					</div>
				</a>`;
        };
        html = event_list.map(get_event_html).join("");
      } else {
        html = `
				<div class="notification-null-state">
					<div class="text-center">
					<img src="/assets/frappe/images/ui-states/event-empty-state.svg" alt="Generic Empty State" class="null-state">
					<div class="title">${__("No Upcoming Events")}</div>
					<div class="subtitle">
						${__("There are no upcoming events for you.")}
				</div></div></div>
			`;
      }
      this.container.html(html);
    }
  };

  // frappe/public/js/frappe/ui/toolbar/search.js
  frappe.provide("frappe.search");
  frappe.search.SearchDialog = class {
    constructor(opts) {
      $.extend(this, opts);
      this.make();
    }
    make() {
      this.search_dialog = new frappe.ui.Dialog({
        minimizable: true,
        size: "large"
      });
      this.set_header();
      this.$wrapper = $(this.search_dialog.$wrapper).addClass("search-dialog");
      this.$body = $(this.search_dialog.body);
      this.$input = this.$wrapper.find(".search-input");
      this.setup();
    }
    set_header() {
      this.search_dialog.header.addClass("search-header").find(".title-section").html(`<div class="input-group text-muted">
					<input type="text" class="form-control search-input">
				</div>
				<span class="search-icon">
					${frappe.utils.icon("search")}
				</span>`);
    }
    setup() {
      this.modal_state = 0;
      this.current_keyword = "";
      this.more_count = 20;
      this.full_lists = {};
      this.nav_lists = {};
      this.init_search_objects();
      this.bind_input();
      this.bind_events();
    }
    init_search_objects() {
      this.searches = {
        global_search: {
          input_placeholder: __("Search"),
          empty_state_text: __("Search for anything"),
          no_results_status: () => __("No Results found"),
          get_results: (keywords, callback) => {
            let start = 0, limit = 1e3;
            let results = frappe.search.utils.get_nav_results(keywords);
            frappe.search.utils.get_global_results(keywords, start, limit).then((global_results) => {
              results = results.concat(global_results);
              callback(results, keywords);
            }, (err) => {
              console.error(err);
            });
          }
        },
        tags: {
          input_placeholder: __("Search"),
          empty_state_text: __("Search for anything"),
          no_results_status: (keyword) => "<div>" + __("No documents found tagged with {0}", [keyword]) + "</div>",
          get_results: (keywords, callback) => {
            var results = frappe.search.utils.get_nav_results(keywords);
            frappe.tags.utils.get_tag_results(keywords).then((global_results) => {
              results = results.concat(global_results);
              callback(results, keywords);
            }, (err) => {
              console.error(err);
            });
          }
        }
      };
    }
    update($r) {
      this.$wrapper.find(".loading-state").addClass("hide");
      this.$body.append($r);
      if (this.$body.find(".search-results").length > 1) {
        this.$body.find(".search-results").first().addClass("hide");
        $r.removeClass("hide");
        this.$body.find(".search-results").first().remove();
      } else {
        $r.removeClass("hide");
      }
    }
    put_placeholder(status_text) {
      var $placeholder = $(`<div class="row search-results hide">
			<div class="empty-state">
				<div class="text-center">
					<img src="/assets/frappe/images/ui-states/search-empty-state.svg"
						alt="Generic Empty State"
						class="null-state"
					>
					<div class="empty-state-text">${status_text}</div>
				</div>
			</div>
		</div>`);
      this.update($placeholder);
    }
    bind_input() {
      this.$input.on("input", (e2) => {
        const $el = $(e2.currentTarget);
        clearTimeout($el.data("timeout"));
        $el.data("timeout", setTimeout(() => {
          if (this.$input.val() === this.current_keyword)
            return;
          let keywords = this.$input.val();
          if (keywords.length > 1) {
            this.get_results(keywords);
          } else {
            this.current_keyword = "";
            this.put_placeholder(this.search.empty_state_text);
          }
        }, 300));
      });
    }
    bind_events() {
      this.$body.on("click", ".list-link", (e2) => {
        const $link = $(e2.currentTarget);
        this.$body.find(".search-sidebar").find(".list-link").removeClass("active selected");
        $link.addClass("active selected");
        const type = $link.attr("data-category");
        this.$body.find(".results-area").empty().html(this.full_lists[type]);
        this.$body.find(".module-section-link").first().focus();
      });
      this.$body.on("click", ".section-more", (e2) => {
        const $section = $(e2.currentTarget);
        const type = $section.attr("data-category");
        this.$body.find(".search-sidebar").find('*[data-category="' + type + '"]').trigger("click");
      });
      this.$body.on("click", ".all-results-link", () => {
        this.$body.find(".search-sidebar").find('*[data-category="All Results"]').trigger("click");
      });
      this.$body.on("click", ".list-more", (e2) => {
        const $el = $(e2.currentTarget);
        const type = $el.attr("data-category");
        const fetch_type = $el.attr("data-search");
        var current_count = this.$body.find(".result").length;
        if (fetch_type === "Global") {
          frappe.search.utils.get_global_results(this.current_keyword, current_count, this.more_count, type).then((doctype_results) => {
            doctype_results.length && this.add_more_results(doctype_results);
          }, (err) => {
            console.error(err);
          });
        } else {
          let results = this.nav_lists[type].slice(0, this.more_count);
          this.nav_lists[type].splice(0, this.more_count);
          this.add_more_results([{ title: type, results }]);
        }
      });
      this.$body.on("click", ".switch-to-global-search", () => {
        this.search = this.searches["global_search"];
        this.$input.attr("placeholder", this.search.input_placeholder);
        this.put_placeholder(this.search.empty_state_text);
        this.get_results(this.current_keyword);
      });
    }
    init_search(keywords, search_type) {
      this.search = this.searches[search_type];
      this.$input.attr("placeholder", this.search.input_placeholder);
      this.put_placeholder(this.search.empty_state_text);
      this.get_results(keywords);
      this.search_dialog.show();
      this.$input.val(keywords);
      setTimeout(() => this.$input.select(), 500);
    }
    get_results(keywords) {
      this.current_keyword = keywords;
      if (this.$body.find(".empty-state").length > 0) {
        this.put_placeholder(__("Searching ..."));
      } else {
        this.$wrapper.find(".loading-state").removeClass("hide");
      }
      if (this.current_keyword.charAt(0) === "#") {
        this.search = this.searches["tags"];
      } else {
        this.search = this.searches["global_search"];
      }
      this.search.get_results(keywords, this.parse_results.bind(this));
    }
    parse_results(result_sets, keyword) {
      result_sets = result_sets.filter(function(set) {
        return set.results.length > 0;
      });
      if (result_sets.length > 0) {
        this.render_data(result_sets);
      } else {
        this.put_placeholder(this.search.no_results_status(keyword));
      }
    }
    render_data(result_sets) {
      let $search_results = $(frappe.render_template("search")).addClass("hide");
      let $sidebar = $search_results.find(".search-sidebar").empty();
      let sidebar_item_html = '<li class="search-sidebar-item standard-sidebar-item list-link" data-category="{0}"><a><span class="ellipsis">{1}</span></a></li>';
      this.modal_state = 0;
      this.full_lists = {
        "All Results": $('<div class="results-summary"></div>')
      };
      this.nav_lists = {};
      result_sets.forEach((set) => {
        $sidebar.append($(__(sidebar_item_html, [set.title, __(set.title)])));
        this.add_section_to_summary(set.title, set.results);
        this.full_lists[set.title] = this.render_full_list(set.title, set.results, set.fetch_type);
      });
      if (result_sets.length > 1) {
        $sidebar.prepend($(__(sidebar_item_html, ["All Results", __("All Results")])));
      }
      this.update($search_results.clone());
      this.$body.find(".list-link").first().trigger("click");
    }
    render_full_list(type, results, fetch_type) {
      let max_length = 20;
      let $results_list = $(`<div class="results-summary">
			<div class="result-section full-list ${type}-section col-sm-12">
				<div class="result-title"> ${__(type)}</div>
				<div class="result-body">
				</div>
			</div>
		</div>`);
      results.slice(0, max_length).forEach((result) => {
        $results_list.find(".result-body").append(this.render_result(type, result));
      });
      if (results.length > 0) {
        if (fetch_type === "Nav")
          this.nav_lists[type] = results;
        if (results.length > max_length) {
          $(`<a class="list-more" data-search="${fetch_type}"
					data-category="${type}" data-count="${max_length}">
						${__("More")}
				</a>`).appendTo($results_list.find(".result-body"));
        }
      }
      return $results_list;
    }
    add_section_to_summary(type, results) {
      let section_length = 4;
      let more_html = "";
      let get_result_html = (result) => this.render_result(type, result);
      if (results.length > section_length) {
        more_html = `<div>
				<a class="section-more" data-category="${type}">${__("More")}</a>
			</div>`;
      }
      let $result_section = $(`<div class="col-sm-12 result-section" data-type="${type}">
			<div class="result-title">${__(type)}</div>
			<div class="result-body">
				${more_html}
			</div>
		</div>`).appendTo(this.full_lists["All Results"]);
      $result_section.find(".result-body").prepend(results.slice(0, section_length).map(get_result_html));
    }
    get_link(result) {
      let link = "";
      if (result.route) {
        link = `href="/app/${result.route.join("/")}"`;
      } else if (result.data_path) {
        link = `data-path=${result.data_path}"`;
      }
      return link;
    }
    render_result(type, result) {
      let image_html = "";
      if (result.image !== void 0) {
        let avatar_html = frappe.get_avatar("avatar-medium", result.label, result.image);
        image_html = `<a ${this.get_link(result)}>
				<div class="result-image">
					${avatar_html}
				</div>
			</a>`;
      }
      let link_html = `<a ${this.get_link(result)} class="result-section-link">${result.label}</a>`;
      let title_html = !result.description ? link_html : `<b>${link_html}</b><div class="description"> ${result.description} </div>`;
      let result_text = `<div class="result-text">
			${title_html}
		</div>`;
      let $result = $(`<div class="result ${type}-result">
			${image_html}
			${result_text}
			${result.subtypes || ""}
		</div>`);
      if (!result.description) {
        this.handle_result_click(result, $result);
      }
      return $result;
    }
    handle_result_click(result, $result) {
      if (result.route_options) {
        frappe.route_options = result.route_options;
      }
      $result.on("click", () => {
        if (result.onclick) {
          result.onclick(result.match);
        } else {
          var previous_hash = window.location.hash;
          frappe.set_route(result.route);
          if (window.location.hash == previous_hash) {
            frappe.router.route();
          }
        }
      });
    }
    add_more_results(results_set) {
      let more_results = $('<div class="more-results last"></div>');
      if (results_set[0].results) {
        results_set[0].results.forEach((result) => {
          more_results.append(this.render_result(results_set[0].title, result));
        });
      }
      this.$body.find(".list-more").before(more_results);
      if (results_set[0].results.length < this.more_count) {
        this.$body.find(".list-more").hide();
        let no_of_results = this.$body.find(".result").length;
        let no_of_results_cue = $('<div class="results-status">' + no_of_results + " results found</div>");
        this.$body.find(".more-results:last").append(no_of_results_cue);
      }
      this.$body.find(".more-results.last").slideDown(200, function() {
      });
    }
  };

  // frappe/public/js/frappe/ui/toolbar/tag_utils.js
  frappe.provide("frappe.tags");
  frappe.tags.utils = {
    get_tags: function(txt2) {
      txt2 = txt2.slice(1);
      let out = [];
      for (let i2 in frappe.tags.tags) {
        let tag = frappe.tags.tags[i2];
        let level = frappe.search.utils.fuzzy_search(txt2, tag);
        if (level) {
          out.push({
            type: "Tag",
            label: __("#{0}", [frappe.search.utils.bolden_match_part(__(tag), txt2)]),
            value: __("#{0}", [__(tag)]),
            index: 1 + level,
            match: tag,
            onclick() {
              frappe.searchdialog.search.init_search("#".concat(tag), "tags");
            }
          });
        }
      }
      return out;
    },
    fetch_tags() {
      frappe.call({
        method: "frappe.desk.doctype.tag.tag.get_tags_list_for_awesomebar",
        callback: function(r2) {
          if (r2 && r2.message) {
            frappe.tags.tags = $.extend([], r2.message);
          }
        }
      });
    },
    get_tag_results: function(tag) {
      function get_results_sets(data) {
        var results_sets = [], result, set;
        function get_existing_set(doctype2) {
          return results_sets.find(function(set2) {
            return set2.title === doctype2;
          });
        }
        function make_description(content) {
          var field_length = 110;
          var field_value = null;
          if (content.length > field_length) {
            field_value = content.slice(0, field_length) + "...";
          } else {
            var length = content.length;
            field_value = content.slice(0, length) + "...";
          }
          return field_value;
        }
        data.forEach(function(d2) {
          var description = "";
          if (d2.content) {
            description = make_description(d2.content);
          }
          result = {
            label: d2.name,
            value: d2.name,
            description,
            route: ["Form", d2.doctype, d2.name]
          };
          set = get_existing_set(d2.doctype);
          if (set) {
            set.results.push(result);
          } else {
            set = {
              title: d2.doctype,
              results: [result],
              fetch_type: "Global"
            };
            results_sets.push(set);
          }
        });
        return results_sets;
      }
      return new Promise(function(resolve) {
        frappe.call({
          method: "frappe.desk.doctype.tag.tag.get_documents_for_tag",
          args: {
            tag
          },
          callback: function(r2) {
            if (r2.message) {
              resolve(get_results_sets(r2.message));
            } else {
              resolve([]);
            }
          }
        });
      });
    }
  };

  // frappe-html:/home/erpnext/erpnext/apps/frappe/frappe/public/js/frappe/ui/toolbar/search.html
  frappe.templates["search"] = `<div class="search-results flex">
	<div class="col-md-3 col-sm-3 hidden-xs layout-side-section">
		<ul class="overlay-sidebar list-unstyled search-sidebar"></ul>
	</div>
	<div class="col-md-9 col-sm-9 layout-main-section results-area">

	</div>
</div>
`;

  // frappe/public/js/frappe/ui/toolbar/fuzzy_match.js
  var SEQUENTIAL_BONUS = 15;
  var SEPARATOR_BONUS = 30;
  var CAMEL_BONUS = 30;
  var FIRST_LETTER_BONUS = 15;
  var LEADING_LETTER_PENALTY = -5;
  var MAX_LEADING_LETTER_PENALTY = -15;
  var UNMATCHED_LETTER_PENALTY = -1;
  function fuzzy_match(pattern, str) {
    const recursion_count = 0;
    const recursion_limit = 10;
    const matches = [];
    const max_matches = 256;
    return fuzzy_match_recursive(pattern, str, 0, 0, null, matches, max_matches, 0, recursion_count, recursion_limit);
  }
  function fuzzy_match_recursive(pattern, str, pattern_cur_index, str_curr_index, src_matches, matches, max_matches, next_match, recursion_count, recursion_limit) {
    let out_score = 0;
    if (++recursion_count >= recursion_limit) {
      return [false, out_score];
    }
    if (pattern_cur_index === pattern.length || str_curr_index === str.length) {
      return [false, out_score];
    }
    let recursive_match = false;
    let best_recursive_matches = [];
    let best_recursive_score = 0;
    let first_match = true;
    while (pattern_cur_index < pattern.length && str_curr_index < str.length) {
      if (pattern[pattern_cur_index].toLowerCase() === str[str_curr_index].toLowerCase()) {
        if (next_match >= max_matches) {
          return [false, out_score];
        }
        if (first_match && src_matches) {
          matches = [...src_matches];
          first_match = false;
        }
        const recursive_matches = [];
        const [matched2, recursive_score] = fuzzy_match_recursive(pattern, str, pattern_cur_index, str_curr_index + 1, matches, recursive_matches, max_matches, next_match, recursion_count, recursion_limit);
        if (matched2) {
          if (!recursive_match || recursive_score > best_recursive_score) {
            best_recursive_matches = [...recursive_matches];
            best_recursive_score = recursive_score;
          }
          recursive_match = true;
        }
        matches[next_match++] = str_curr_index;
        ++pattern_cur_index;
      }
      ++str_curr_index;
    }
    const matched = pattern_cur_index === pattern.length;
    if (matched) {
      out_score = 100;
      let penalty = LEADING_LETTER_PENALTY * matches[0];
      penalty = penalty < MAX_LEADING_LETTER_PENALTY ? MAX_LEADING_LETTER_PENALTY : penalty;
      out_score += penalty;
      const unmatched = str.length - next_match;
      out_score += UNMATCHED_LETTER_PENALTY * unmatched;
      for (let i2 = 0; i2 < next_match; i2++) {
        const curr_idx = matches[i2];
        if (i2 > 0) {
          const prev_idx = matches[i2 - 1];
          if (curr_idx == prev_idx + 1) {
            out_score += SEQUENTIAL_BONUS;
          }
        }
        if (curr_idx > 0) {
          const neighbor = str[curr_idx - 1];
          const curr = str[curr_idx];
          if (neighbor !== neighbor.toUpperCase() && curr !== curr.toLowerCase()) {
            out_score += CAMEL_BONUS;
          }
          const is_neighbour_separator = neighbor == "_" || neighbor == " ";
          if (is_neighbour_separator) {
            out_score += SEPARATOR_BONUS;
          }
        } else {
          out_score += FIRST_LETTER_BONUS;
        }
      }
      if (recursive_match && (!matched || best_recursive_score > out_score)) {
        matches = [...best_recursive_matches];
        out_score = best_recursive_score;
        return [true, out_score];
      } else if (matched) {
        return [true, out_score];
      } else {
        return [false, out_score];
      }
    }
    return [false, out_score];
  }

  // frappe/public/js/frappe/ui/toolbar/search_utils.js
  frappe.provide("frappe.search");
  frappe.search.utils = {
    setup_recent: function() {
      this.recent = JSON.parse(frappe.boot.user.recent || "[]") || [];
    },
    get_recent_pages: function(keywords) {
      if (keywords === null)
        keywords = "";
      var me = this, values = [], options = [];
      function find(list, keywords2, process) {
        list.forEach(function(item, i2) {
          var _item = $.isArray(item) ? item[0] : item;
          _item = __(_item || "").toLowerCase().replace(/-/g, " ");
          if (keywords2 === _item || _item.indexOf(keywords2) !== -1) {
            var option = process(item);
            if (option) {
              if ($.isPlainObject(option)) {
                option = [option];
              }
              option.forEach(function(o2) {
                o2.match = item;
                o2.recent = true;
              });
              options = option.concat(options);
            }
          }
        });
      }
      me.recent.forEach(function(doctype2, i2) {
        values.push([doctype2[1], ["Form", doctype2[0], doctype2[1]]]);
      });
      values = values.reverse();
      frappe.route_history.forEach(function(route, i2) {
        if (route[0] === "Form") {
          values.push([route[2], route]);
        } else if (["List", "Tree", "Workspaces", "query-report"].includes(route[0]) || route[2] === "Report") {
          if (route[1]) {
            values.push([route[1], route]);
          }
        } else if (route[0]) {
          values.push([frappe.route_titles[route.join("/")] || route[0], route]);
        }
      });
      find(values, keywords, function(match) {
        var out = {
          route: match[1]
        };
        if (match[1][0] === "Form") {
          if (match[1].length > 2 && match[1][1] !== match[1][2]) {
            out.label = __(match[1][1]) + " " + match[1][2].bold();
            out.value = __(match[1][1]) + " " + match[1][2];
          } else {
            out.label = __(match[1][1]).bold();
            out.value = __(match[1][1]);
          }
        } else if (["List", "Tree", "Workspaces", "query-report"].includes(match[1][0]) && match[1].length > 1) {
          var type = match[1][0], label = type;
          if (type === "Workspaces")
            label = "Workspace";
          else if (type === "query-report" || match[1][2] === "Report")
            label = "Report";
          out.label = __(`{0} ${label}`, [__(match[1][1]).bold()]);
          out.value = __(`{0} ${label}`, [__(match[1][1])]);
        } else if (match[0]) {
          out.label = match[0].bold();
          out.value = match[0];
        } else {
          console.log("Illegal match", match);
        }
        out.index = 80;
        return out;
      });
      return options;
    },
    get_frequent_links() {
      let options = [];
      frappe.boot.frequently_visited_links.forEach((link) => {
        const label = frappe.utils.get_route_label(link.route);
        options.push({
          "route": link.route,
          "label": label,
          "value": label,
          "index": link.count
        });
      });
      if (!options.length) {
        return this.get_recent_pages("");
      }
      return options;
    },
    get_search_in_list: function(keywords) {
      var me = this;
      var out = [];
      if (in_list(keywords.split(" "), "in") && keywords.slice(-2) !== "in") {
        var parts = keywords.split(" in ");
        frappe.boot.user.can_read.forEach(function(item) {
          if (frappe.boot.user.can_search.includes(item)) {
            var level = me.fuzzy_search(parts[1], item);
            if (level) {
              out.push({
                type: "In List",
                label: __("Find {0} in {1}", [__(parts[0]), me.bolden_match_part(__(item), parts[1])]),
                value: __("Find {0} in {1}", [__(parts[0]), __(item)]),
                route_options: { "name": ["like", "%" + parts[0] + "%"] },
                index: 1 + level,
                route: ["List", item]
              });
            }
          }
        });
      }
      return out;
    },
    get_creatables: function(keywords) {
      var me = this;
      var out = [];
      var firstKeyword = keywords.split(" ")[0];
      if (firstKeyword.toLowerCase() === __("new")) {
        frappe.boot.user.can_create.forEach(function(item) {
          var level = me.fuzzy_search(keywords.substr(4), item);
          if (level) {
            out.push({
              type: "New",
              label: __("New {0}", [me.bolden_match_part(__(item), keywords.substr(4))]),
              value: __("New {0}", [__(item)]),
              index: 1 + level,
              match: item,
              onclick: function() {
                frappe.new_doc(item, true);
              }
            });
          }
        });
      }
      return out;
    },
    get_doctypes: function(keywords) {
      var me = this;
      var out = [];
      var level, target;
      var option = function(type, route, order) {
        let skip_list = type === "List" && target.endsWith("List");
        let label_without_type = me.bolden_match_part(__(target), keywords);
        if (skip_list) {
          var label = label_without_type;
        } else {
          label = __(`{0} ${skip_list ? "" : type}`, [label_without_type]);
        }
        return {
          type,
          label,
          value: __(`{0} ${type}`, [target]),
          index: level + order,
          match: target,
          route
        };
      };
      frappe.boot.user.can_read.forEach(function(item) {
        level = me.fuzzy_search(keywords, item);
        if (level) {
          target = item;
          if (in_list(frappe.boot.single_types, item)) {
            out.push(option("", ["Form", item, item], 0.05));
          } else if (frappe.boot.user.can_search.includes(item)) {
            if (in_list(frappe.boot.user.can_create, item)) {
              var match = item;
              out.push({
                type: "New",
                label: __("New {0}", [me.bolden_match_part(__(item), keywords)]),
                value: __("New {0}", [__(item)]),
                index: level + 0.015,
                match: item,
                onclick: function() {
                  frappe.new_doc(match, true);
                }
              });
            }
            if (in_list(frappe.boot.treeviews, item)) {
              out.push(option("Tree", ["Tree", item], 0.05));
            } else {
              out.push(option("List", ["List", item], 0.05));
              if (frappe.model.can_get_report(item)) {
                out.push(option("Report", ["List", item, "Report"], 0.04));
              }
            }
          }
        }
      });
      return out;
    },
    get_reports: function(keywords) {
      var me = this;
      var out = [];
      var route;
      Object.keys(frappe.boot.user.all_reports).forEach(function(item) {
        var level = me.fuzzy_search(keywords, item);
        if (level > 0) {
          var report = frappe.boot.user.all_reports[item];
          if (report.report_type == "Report Builder")
            route = ["List", report.ref_doctype, "Report", item];
          else
            route = ["query-report", item];
          out.push({
            type: "Report",
            label: __("Report {0}", [me.bolden_match_part(__(item), keywords)]),
            value: __("Report {0}", [__(item)]),
            index: level,
            route
          });
        }
      });
      return out;
    },
    get_pages: function(keywords) {
      var me = this;
      var out = [];
      this.pages = {};
      $.each(frappe.boot.page_info, function(name2, p2) {
        me.pages[p2.title] = p2;
        p2.name = name2;
      });
      Object.keys(this.pages).forEach(function(item) {
        if (item == "Hub" || item == "hub")
          return;
        var level = me.fuzzy_search(keywords, item);
        if (level) {
          var page = me.pages[item];
          out.push({
            type: "Page",
            label: __("Open {0}", [me.bolden_match_part(__(item), keywords)]),
            value: __("Open {0}", [__(item)]),
            match: item,
            index: level,
            route: [page.route || page.name]
          });
        }
      });
      var target = "Calendar";
      if (__("calendar").indexOf(keywords.toLowerCase()) === 0) {
        out.push({
          type: "Calendar",
          value: __("Open {0}", [__(target)]),
          index: me.fuzzy_search(keywords, "Calendar"),
          match: target,
          route: ["List", "Event", target]
        });
      }
      target = "Hub";
      if (__("hub").indexOf(keywords.toLowerCase()) === 0) {
        out.push({
          type: "Hub",
          value: __("Open {0}", [__(target)]),
          index: me.fuzzy_search(keywords, "Hub"),
          match: target,
          route: [target, "Item"]
        });
      }
      if (__("email inbox").indexOf(keywords.toLowerCase()) === 0) {
        out.push({
          type: "Inbox",
          value: __("Open {0}", [__("Email Inbox")]),
          index: me.fuzzy_search(keywords, "email inbox"),
          match: target,
          route: ["List", "Communication", "Inbox"]
        });
      }
      return out;
    },
    get_workspaces: function(keywords) {
      var me = this;
      var out = [];
      frappe.boot.allowed_workspaces.forEach(function(item) {
        var level = me.fuzzy_search(keywords, item.name);
        if (level > 0) {
          var ret = {
            type: "Workspace",
            label: __("Open {0}", [me.bolden_match_part(__(item.name), keywords)]),
            value: __("Open {0}", [__(item.name)]),
            index: level,
            route: [frappe.router.slug(item.name)]
          };
          out.push(ret);
        }
      });
      return out;
    },
    get_dashboards: function(keywords) {
      var me = this;
      var out = [];
      frappe.boot.dashboards.forEach(function(item) {
        var level = me.fuzzy_search(keywords, item.name);
        if (level > 0) {
          var ret = {
            type: "Dashboard",
            label: __("{0} Dashboard", [me.bolden_match_part(__(item.name), keywords)]),
            value: __("{0} Dashboard", [__(item.name)]),
            index: level,
            route: ["dashboard-view", item.name]
          };
          out.push(ret);
        }
      });
      return out;
    },
    get_global_results: function(keywords, start, limit, doctype2 = "") {
      var me = this;
      function get_results_sets(data) {
        var results_sets = [], result, set;
        function get_existing_set(doctype3) {
          return results_sets.find(function(set2) {
            return set2.title === doctype3;
          });
        }
        function make_description(content, doc_name) {
          var parts = content.split(" ||| ");
          var result_max_length = 300;
          var field_length = 120;
          var fields = [];
          var result_current_length = 0;
          var field_text = "";
          for (var i2 = 0; i2 < parts.length; i2++) {
            var part = parts[i2];
            if (part.toLowerCase().indexOf(keywords) !== -1) {
              if (part.indexOf(" &&& ") !== -1) {
                var colon_index = part.indexOf(" &&& ");
                var field_value = part.slice(colon_index + 5);
              } else {
                var colon_index = part.indexOf(" : ");
                var field_value = part.slice(colon_index + 3);
              }
              if (field_value.length > field_length) {
                var field_data = "";
                var index = field_value.indexOf(keywords);
                field_data += index < field_length / 2 ? field_value.slice(0, index) : "..." + field_value.slice(index - field_length / 2, index);
                field_data += field_value.slice(index, index + field_length / 2);
                field_data += index + field_length / 2 < field_value.length ? "..." : "";
                field_value = field_data;
              }
              var field_name = part.slice(0, colon_index);
              var remaining_length = result_max_length - result_current_length;
              result_current_length += field_name.length + field_value.length + 2;
              if (result_current_length < result_max_length) {
                field_text = '<span class="field-name text-muted">' + me.bolden_match_part(field_name, keywords) + ": </span> " + me.bolden_match_part(field_value, keywords);
                if (fields.indexOf(field_text) === -1 && doc_name !== field_value) {
                  fields.push(field_text);
                }
              } else {
                if (field_name.length < remaining_length) {
                  remaining_length -= field_name.length;
                  field_text = '<span class="field-name text-muted">' + me.bolden_match_part(field_name, keywords) + ": </span> ";
                  field_value = field_value.slice(0, remaining_length);
                  field_value = field_value.slice(0, field_value.lastIndexOf(" ")) + " ...";
                  field_text += me.bolden_match_part(field_value, keywords);
                  fields.push(field_text);
                } else {
                  fields.push("...");
                }
                break;
              }
            }
          }
          return fields.join(", ");
        }
        data.forEach(function(d2) {
          result = {
            label: d2.name,
            value: d2.name,
            description: make_description(d2.content, d2.name),
            route: ["Form", d2.doctype, d2.name]
          };
          if (d2.image || d2.image === null) {
            result.image = d2.image;
          }
          set = get_existing_set(d2.doctype);
          if (set) {
            set.results.push(result);
          } else {
            set = {
              title: d2.doctype,
              results: [result],
              fetch_type: "Global"
            };
            results_sets.push(set);
          }
        });
        return results_sets;
      }
      return new Promise(function(resolve, reject) {
        frappe.call({
          method: "frappe.utils.global_search.search",
          args: {
            text: keywords,
            start,
            limit,
            doctype: doctype2
          },
          callback: function(r2) {
            if (r2.message) {
              resolve(get_results_sets(r2.message));
            } else {
              resolve([]);
            }
          }
        });
      });
    },
    get_nav_results: function(keywords) {
      function sort_uniques(array) {
        var routes = [], out = [];
        array.forEach(function(d2) {
          if (d2.route) {
            if (d2.route[0] === "List" && d2.route[2]) {
              d2.route.splice(2);
            }
            var str_route = d2.route.join("/");
            if (routes.indexOf(str_route) === -1) {
              routes.push(str_route);
              out.push(d2);
            } else {
              var old = routes.indexOf(str_route);
              if (out[old].index > d2.index) {
                out[old] = d2;
              }
            }
          } else {
            out.push(d2);
          }
        });
        return out.sort(function(a2, b2) {
          return b2.index - a2.index;
        });
      }
      var lists = [], setup = [];
      var all_doctypes = sort_uniques(this.get_doctypes(keywords));
      all_doctypes.forEach(function(d2) {
        if (d2.type === "") {
          setup.push(d2);
        } else {
          lists.push(d2);
        }
      });
      var in_keyword = keywords.split(" in ")[0];
      return [
        {
          title: __("Recents"),
          fetch_type: "Nav",
          results: sort_uniques(this.get_recent_pages(keywords))
        },
        {
          title: __("Create a new ..."),
          fetch_type: "Nav",
          results: sort_uniques(this.get_creatables(keywords))
        },
        {
          title: __("Lists"),
          fetch_type: "Nav",
          results: lists
        },
        {
          title: __("Reports"),
          fetch_type: "Nav",
          results: sort_uniques(this.get_reports(keywords))
        },
        {
          title: __("Administration"),
          fetch_type: "Nav",
          results: sort_uniques(this.get_pages(keywords))
        },
        {
          title: __("Workspace"),
          fetch_type: "Nav",
          results: sort_uniques(this.get_workspaces(keywords))
        },
        {
          title: __("Dashboard"),
          fetch_type: "Nav",
          results: sort_uniques(this.get_dashboards(keywords))
        },
        {
          title: __("Setup"),
          fetch_type: "Nav",
          results: setup
        },
        {
          title: __("Find '{0}' in ...", [in_keyword]),
          fetch_type: "Nav",
          results: sort_uniques(this.get_search_in_list(keywords))
        }
      ];
    },
    fuzzy_search: function(keywords, _item) {
      keywords = keywords || "";
      var item = __(_item || "");
      var match = fuzzy_match(keywords, item);
      return match[1];
    },
    bolden_match_part: function(str, subseq) {
      if (fuzzy_match(subseq, str)[0] === false) {
        return str;
      }
      if (str.indexOf(subseq) == 0) {
        var tail = str.split(subseq)[1];
        return "<mark>" + subseq + "</mark>" + tail;
      }
      var rendered = "";
      var str_orig = str;
      var str_len = str.length;
      str = str.toLowerCase();
      subseq = subseq.toLowerCase();
      outer:
        for (var i2 = 0, j2 = 0; i2 < subseq.length; i2++) {
          var sub_ch = subseq.charCodeAt(i2);
          while (j2 < str_len) {
            if (str.charCodeAt(j2) === sub_ch) {
              var str_char = str_orig.charAt(j2);
              if (str_char === str_char.toLowerCase()) {
                rendered += "<mark>" + subseq.charAt(i2) + "</mark>";
              } else {
                rendered += "<mark>" + subseq.charAt(i2).toUpperCase() + "</mark>";
              }
              j2++;
              continue outer;
            }
            rendered += str_orig.charAt(j2);
            j2++;
          }
          return str_orig;
        }
      rendered += str_orig.slice(j2);
      return rendered;
    },
    get_executables(keywords) {
      let results = [];
      this.searchable_functions.forEach((item) => {
        const target = item.label.toLowerCase();
        const txt2 = keywords.toLowerCase();
        if (txt2 === target || target.indexOf(txt2) === 0) {
          results.push({
            type: "Executable",
            value: this.bolden_match_part(__(item.label), txt2),
            index: this.fuzzy_search(txt2, target),
            match: item.label,
            onclick: () => item.action.apply(this, item.args)
          });
        }
      });
      return results;
    },
    make_function_searchable(_function, label = null, args = null) {
      if (typeof _function !== "function") {
        throw new Error("First argument should be a function");
      }
      this.searchable_functions.push({
        "label": label || _function.name,
        "action": _function,
        "args": args
      });
    },
    searchable_functions: []
  };

  // frappe/public/js/frappe/ui/toolbar/about.js
  frappe.provide("frappe.ui.misc");
  frappe.ui.misc.about = function() {
    if (!frappe.ui.misc.about_dialog) {
      var d2 = new frappe.ui.Dialog({ title: __("Frappe Framework") });
      $(d2.body).html(repl("<div>		<p>" + __("Open Source Applications for the Web") + "</p>  		<p><i class='fa fa-globe fa-fw'></i>			Website: <a href='https://frappeframework.com' target='_blank'>https://frappeframework.com</a></p>		<p><i class='fa fa-github fa-fw'></i>			Source: <a href='https://github.com/frappe' target='_blank'>https://github.com/frappe</a></p>		<p><i class='fa fa-linkedin fa-fw'></i>			Linkedin: <a href='https://linkedin.com/company/frappe-tech' target='_blank'>https://linkedin.com/company/frappe-tech</a></p>		<p><i class='fa fa-facebook fa-fw'></i>			Facebook: <a href='https://facebook.com/erpnext' target='_blank'>https://facebook.com/erpnext</a></p>		<p><i class='fa fa-twitter fa-fw'></i>			Twitter: <a href='https://twitter.com/erpnext' target='_blank'>https://twitter.com/erpnext</a></p>		<hr>		<h4>Installed Apps</h4>		<div id='about-app-versions'>Loading versions...</div>		<hr>		<p class='text-muted'>&copy; Frappe Technologies Pvt. Ltd and contributors </p> 		</div>", frappe.app));
      frappe.ui.misc.about_dialog = d2;
      frappe.ui.misc.about_dialog.on_page_show = function() {
        if (!frappe.versions) {
          frappe.call({
            method: "frappe.utils.change_log.get_versions",
            callback: function(r2) {
              show_versions(r2.message);
            }
          });
        } else {
          show_versions(frappe.versions);
        }
      };
      var show_versions = function(versions) {
        var $wrap = $("#about-app-versions").empty();
        $.each(Object.keys(versions).sort(), function(i2, key2) {
          var v2 = versions[key2];
          if (v2.branch) {
            var text = $.format("<p><b>{0}:</b> v{1} ({2})<br></p>", [v2.title, v2.branch_version || v2.version, v2.branch]);
          } else {
            var text = $.format("<p><b>{0}:</b> v{1}<br></p>", [v2.title, v2.version]);
          }
          $(text).appendTo($wrap);
        });
        frappe.versions = versions;
      };
    }
    frappe.ui.misc.about_dialog.show();
  };

  // frappe-html:/home/erpnext/erpnext/apps/frappe/frappe/public/js/frappe/ui/toolbar/navbar.html
  frappe.templates["navbar"] = `<header class="navbar navbar-expand sticky-top" role="navigation">
	<div class="container">
		<a class="navbar-brand navbar-home" href="/app">
			<img class="app-logo" style="width: {{ navbar_settings.logo_width || 24 }}px" src="{{ frappe.boot.app_logo_url }}">
		</a>
		<ul class="nav navbar-nav d-none d-sm-flex" id="navbar-breadcrumbs"></ul>
		<div class="collapse navbar-collapse justify-content-end">
			<form class="form-inline fill-width justify-content-end" role="search" onsubmit="return false;">
				<div class="input-group search-bar text-muted hidden">
					<input
						id="navbar-search"
						type="text"
						class="form-control"
						placeholder="{%= __("Search or type a command (Ctrl + G)") %}"
						aria-haspopup="true"
					>
					<span class="search-icon">
						<svg class="icon icon-sm"><use xlink:href="#icon-search"></use></svg>
					</span>
				</div>
			</form>
			<ul class="navbar-nav">
				<li class="nav-item dropdown dropdown-notifications dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span class="notifications-seen">
							<svg class="icon icon-md"><use href="#icon-notification"></use></svg>
						</span>
						<span class="notifications-unseen">
							<svg class="icon icon-md"><use href="#icon-notification-with-indicator"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu notifications-list dropdown-menu-right" role="menu">
						<div class="notification-list-header">
							<div class="header-items"></div>
							<div class="header-actions"></div>
						</div>
						<div class="notification-list-body">
							<div class="panel-notifications"></div>
							<div class="panel-events"></div>
						</div>
					</div>
				</li>
				<li class="nav-item dropdown dropdown-message dropdown-mobile hidden">
					<a
						class="nav-link notifications-icon text-muted"
						data-toggle="dropdown"
						aria-haspopup="true"
						aria-expanded="true"
						href="#"
						onclick="return false;">
						<span>
							<svg class="icon icon-md"><use href="#icon-small-message"></use></svg>
						</span>
					</a>
				</li>
				<li class="vertical-bar d-none d-sm-block"></li>
				<li class="nav-item dropdown dropdown-help dropdown-mobile d-none d-lg-block">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ __("Help") }}
						<span>
							<svg class="icon icon-xs"><use href="#icon-small-down"></use></svg>
						</span>
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-help" role="menu">
						<div id="help-links"></div>
						<div class="dropdown-divider documentation-links"></div>
						{% for item in navbar_settings.help_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
				<li class="nav-item dropdown dropdown-navbar-user dropdown-mobile">
					<a class="nav-link" data-toggle="dropdown" href="#" onclick="return false;">
						{{ avatar }}
					</a>
					<div class="dropdown-menu dropdown-menu-right" id="toolbar-user" role="menu">
						{% for item in navbar_settings.settings_dropdown %}
							{% if (!item.hidden) { %}
								{% if (item.route) { %}
									<a class="dropdown-item" href="{{ item.route }}">
										{%= __(item.item_label) %}
									</a>
								{% } else if (item.action) { %}
									<a class="dropdown-item" onclick="return {{ item.action }}">
										{%= __(item.item_label) %}
									</a>
								{% } else { %}
									<div class="dropdown-divider"></div>
								{% } %}
							{% } %}
						{% endfor %}
					</div>
				</li>
			</ul>
		</div>
	</div>
</header>
`;

  // frappe/public/js/frappe/ui/toolbar/toolbar.js
  frappe.provide("frappe.ui.toolbar");
  frappe.provide("frappe.search");
  frappe.ui.toolbar.Toolbar = class {
    constructor() {
      $("header").replaceWith(frappe.render_template("navbar", {
        avatar: frappe.avatar(frappe.session.user, "avatar-medium"),
        navbar_settings: frappe.boot.navbar_settings
      }));
      $(".dropdown-toggle").dropdown();
      this.setup_awesomebar();
      this.setup_notifications();
      this.setup_help();
      this.make();
    }
    make() {
      this.bind_events();
      $(document).trigger("toolbar_setup");
    }
    bind_events() {
      $(document).on("page-change", function() {
        $("header .navbar .custom-menu").remove();
      });
      $("#search-modal").on("shown.bs.modal", function() {
        var search_modal = $(this);
        setTimeout(function() {
          search_modal.find("#modal-search").focus();
        }, 300);
      });
      $(".navbar-toggle-full-width").click(() => {
        frappe.ui.toolbar.toggle_full_width();
      });
    }
    setup_help() {
      if (!frappe.boot.desk_settings.notifications) {
        $(".navbar .vertical-bar").removeClass("d-sm-block");
        $(".dropdown-help").removeClass("d-lg-block");
        return;
      }
      frappe.provide("frappe.help");
      frappe.help.show_results = show_results;
      this.search = new frappe.search.SearchDialog();
      frappe.provide("frappe.searchdialog");
      frappe.searchdialog.search = this.search;
      $(".dropdown-help .dropdown-toggle").on("click", function() {
        $(".dropdown-help input").focus();
      });
      $(".dropdown-help .dropdown-menu").on("click", "input, button", function(e2) {
        e2.stopPropagation();
      });
      $("#input-help").on("keydown", function(e2) {
        if (e2.which == 13) {
          $(this).val("");
        }
      });
      $(document).on("page-change", function() {
        var $help_links = $(".dropdown-help #help-links");
        $help_links.html("");
        var route = frappe.get_route_str();
        var breadcrumbs = route.split("/");
        var links = [];
        for (var i2 = 0; i2 < breadcrumbs.length; i2++) {
          var r2 = route.split("/", i2 + 1);
          var key2 = r2.join("/");
          var help_links = frappe.help.help_links[key2] || [];
          links = $.merge(links, help_links);
        }
        if (links.length === 0) {
          $help_links.next().hide();
        } else {
          $help_links.next().show();
        }
        for (var i2 = 0; i2 < links.length; i2++) {
          var link = links[i2];
          var url = link.url;
          $("<a>", {
            href: url,
            class: "dropdown-item",
            text: link.label,
            target: "_blank"
          }).appendTo($help_links);
        }
        $(".dropdown-help .dropdown-menu").on("click", "a", show_results);
      });
      var $result_modal = frappe.get_modal("", "");
      $result_modal.addClass("help-modal");
      $(document).on("click", ".help-modal a", show_results);
      function show_results(e2) {
        var href = e2.target.href;
        if (href.indexOf("blob") > 0) {
          window.open(href, "_blank");
        }
        var path = $(e2.target).attr("data-path");
        if (path) {
          e2.preventDefault();
        }
      }
    }
    setup_awesomebar() {
      if (frappe.boot.desk_settings.search_bar) {
        let awesome_bar = new frappe.search.AwesomeBar();
        awesome_bar.setup("#navbar-search");
        frappe.search.utils.make_function_searchable(function() {
          frappe.set_route("List", "Client Script");
        }, __("Custom Script List"));
      }
    }
    setup_notifications() {
      if (frappe.boot.desk_settings.notifications && frappe.session.user !== "Guest") {
        this.notifications = new frappe.ui.Notifications();
      }
    }
  };
  $.extend(frappe.ui.toolbar, {
    add_dropdown_button: function(parent, label, click, icon) {
      var menu = frappe.ui.toolbar.get_menu(parent);
      if (menu.find("li:not(.custom-menu)").length && !menu.find(".divider").length) {
        frappe.ui.toolbar.add_menu_divider(menu);
      }
      return $('<li class="custom-menu"><a><i class="fa-fw ' + icon + '"></i> ' + label + "</a></li>").insertBefore(menu.find(".divider")).find("a").click(function() {
        click.apply(this);
      });
    },
    get_menu: function(label) {
      return $("#navbar-" + label.toLowerCase());
    },
    add_menu_divider: function(menu) {
      menu = typeof menu == "string" ? frappe.ui.toolbar.get_menu(menu) : menu;
      $('<li class="divider custom-menu"></li>').prependTo(menu);
    },
    add_icon_link(route, icon, index, class_name) {
      let parent_element = $(".navbar-right").get(0);
      let new_element = $(`<li class="${class_name}">
			<a class="btn" href="${route}" title="${frappe.utils.to_title_case(class_name, true)}" aria-haspopup="true" aria-expanded="true">
				<div>
					<i class="octicon ${icon}"></i>
				</div>
			</a>
		</li>`).get(0);
      parent_element.insertBefore(new_element, parent_element.children[index]);
    },
    toggle_full_width() {
      let fullwidth = JSON.parse(localStorage.container_fullwidth || "false");
      fullwidth = !fullwidth;
      localStorage.container_fullwidth = fullwidth;
      frappe.ui.toolbar.set_fullwidth_if_enabled();
      $(document.body).trigger("toggleFullWidth");
    },
    set_fullwidth_if_enabled() {
      let fullwidth = JSON.parse(localStorage.container_fullwidth || "false");
      $(document.body).toggleClass("full-width", fullwidth);
    },
    show_shortcuts(e2) {
      e2.preventDefault();
      frappe.ui.keys.show_keyboard_shortcut_dialog();
      return false;
    }
  });
  frappe.ui.toolbar.clear_cache = frappe.utils.throttle(function() {
    frappe.assets.clear_local_storage();
    frappe.xcall("frappe.sessions.clear").then((message2) => {
      frappe.show_alert({
        message: message2,
        indicator: "info"
      });
      location.reload(true);
    });
  }, 1e4);
  frappe.ui.toolbar.show_about = function() {
    try {
      frappe.ui.misc.about();
    } catch (e2) {
      console.log(e2);
    }
    return false;
  };
  frappe.ui.toolbar.route_to_user = function() {
    frappe.set_route("Form", "User", frappe.session.user);
  };
  frappe.ui.toolbar.view_website = function() {
    let website_tab = window.open();
    website_tab.opener = null;
    website_tab.location = "/index";
  };
  frappe.ui.toolbar.setup_session_defaults = function() {
    let fields = [];
    frappe.call({
      method: "frappe.core.doctype.session_default_settings.session_default_settings.get_session_default_values",
      callback: function(data) {
        fields = JSON.parse(data.message);
        let perms = frappe.perm.get_perm("Session Default Settings");
        if (in_list(frappe.user_roles, "System Manager") || perms[0].read == 1) {
          fields[fields.length] = {
            "fieldname": "settings",
            "fieldtype": "Button",
            "label": __("Settings"),
            "click": () => {
              frappe.set_route("Form", "Session Default Settings", "Session Default Settings");
            }
          };
        }
        frappe.prompt(fields, function(values) {
          fields.forEach(function(d2) {
            if (!values[d2.fieldname]) {
              values[d2.fieldname] = "";
            }
          });
          frappe.call({
            method: "frappe.core.doctype.session_default_settings.session_default_settings.set_session_default_values",
            args: {
              default_values: values
            },
            callback: function(data2) {
              if (data2.message == "success") {
                frappe.show_alert({
                  "message": __("Session Defaults Saved"),
                  "indicator": "green"
                });
                frappe.ui.toolbar.clear_cache();
              } else {
                frappe.show_alert({
                  "message": __("An error occurred while setting Session Defaults"),
                  "indicator": "red"
                });
              }
            }
          });
        }, __("Session Defaults"), __("Save"));
      }
    });
  };

  // frappe/public/js/frappe/views/communication.js
  var import_localforage = __toESM(require_localforage());
  frappe.last_edited_communication = {};
  var separator_element = "<div>---</div>";
  frappe.views.CommunicationComposer = class {
    constructor(opts) {
      $.extend(this, opts);
      if (!this.doc) {
        this.doc = this.frm && this.frm.doc || {};
      }
      this.make();
    }
    make() {
      const me = this;
      this.dialog = new frappe.ui.Dialog({
        title: this.title || this.subject || __("New Email"),
        no_submit_on_enter: true,
        fields: this.get_fields(),
        primary_action_label: __("Send"),
        primary_action() {
          me.send_action();
        },
        secondary_action_label: __("Discard"),
        secondary_action() {
          me.dialog.hide();
          me.clear_cache();
        },
        size: "large",
        minimizable: true
      });
      $(this.dialog.$wrapper.find(".form-section").get(0)).addClass("to_section");
      this.prepare();
      this.dialog.show();
      if (this.frm) {
        $(document).trigger("form-typing", [this.frm]);
      }
    }
    get_fields() {
      const fields = [
        {
          label: __("To"),
          fieldtype: "MultiSelect",
          reqd: 0,
          fieldname: "recipients"
        },
        {
          fieldtype: "Button",
          label: frappe.utils.icon("down"),
          fieldname: "option_toggle_button",
          click: () => {
            this.toggle_more_options();
          }
        },
        {
          fieldtype: "Section Break",
          hidden: 1,
          fieldname: "more_options"
        },
        {
          label: __("CC"),
          fieldtype: "MultiSelect",
          fieldname: "cc"
        },
        {
          label: __("BCC"),
          fieldtype: "MultiSelect",
          fieldname: "bcc"
        },
        {
          label: __("Email Template"),
          fieldtype: "Link",
          options: "Email Template",
          fieldname: "email_template"
        },
        { fieldtype: "Section Break" },
        {
          label: __("Subject"),
          fieldtype: "Data",
          reqd: 1,
          fieldname: "subject",
          length: 524288
        },
        {
          label: __("Message"),
          fieldtype: "Text Editor",
          fieldname: "content",
          onchange: frappe.utils.debounce(this.save_as_draft.bind(this), 300)
        },
        {
          fieldtype: "Button",
          label: __("Add Signature"),
          fieldname: "add_signature",
          hidden: 1,
          click: async () => {
            let sender_email = this.dialog.get_value("sender") || "";
            this.content_set = false;
            await this.set_content(sender_email);
          }
        },
        { fieldtype: "Section Break" },
        {
          label: __("Send me a copy"),
          fieldtype: "Check",
          fieldname: "send_me_a_copy",
          default: frappe.boot.user.send_me_a_copy
        },
        {
          label: __("Send Read Receipt"),
          fieldtype: "Check",
          fieldname: "send_read_receipt"
        },
        {
          label: __("Attach Document Print"),
          fieldtype: "Check",
          fieldname: "attach_document_print"
        },
        {
          label: __("Select Print Format"),
          fieldtype: "Select",
          fieldname: "select_print_format"
        },
        {
          label: __("Select Languages"),
          fieldtype: "Select",
          fieldname: "language_sel"
        },
        { fieldtype: "Column Break" },
        {
          label: __("Select Attachments"),
          fieldtype: "HTML",
          fieldname: "select_attachments"
        }
      ];
      const email_accounts = frappe.boot.email_accounts.filter((account) => {
        return !in_list(["All Accounts", "Sent", "Spam", "Trash"], account.email_account) && account.enable_outgoing;
      });
      if (email_accounts.length) {
        this.user_email_accounts = email_accounts.map(function(e2) {
          return e2.email_id;
        });
        fields.unshift({
          label: __("From"),
          fieldtype: "Select",
          reqd: 1,
          fieldname: "sender",
          options: this.user_email_accounts
        });
      }
      return fields;
    }
    toggle_more_options(show_options) {
      show_options = show_options || this.dialog.fields_dict.more_options.df.hidden;
      this.dialog.set_df_property("more_options", "hidden", !show_options);
      const label = frappe.utils.icon(show_options ? "up-line" : "down");
      this.dialog.get_field("option_toggle_button").set_label(label);
    }
    prepare() {
      this.setup_multiselect_queries();
      this.setup_subject_and_recipients();
      this.setup_print_language();
      this.setup_print();
      this.setup_attach();
      this.setup_email();
      this.setup_email_template();
      this.setup_last_edited_communication();
      this.setup_add_signature_button();
      this.set_values();
    }
    setup_add_signature_button() {
      let has_sender = this.dialog.has_field("sender");
      this.dialog.set_df_property("add_signature", "hidden", !has_sender);
    }
    setup_multiselect_queries() {
      ["recipients", "cc", "bcc"].forEach((field) => {
        this.dialog.fields_dict[field].get_data = () => {
          const data = this.dialog.fields_dict[field].get_value();
          const txt2 = data.match(/[^,\s*]*$/)[0] || "";
          frappe.call({
            method: "frappe.email.get_contact_list",
            args: { txt: txt2 },
            callback: (r2) => {
              this.dialog.fields_dict[field].set_data(r2.message);
            }
          });
        };
      });
    }
    setup_subject_and_recipients() {
      this.subject = this.subject || "";
      if (!this.forward && !this.recipients && this.last_email) {
        this.recipients = this.last_email.sender;
        this.cc = this.last_email.cc;
        this.bcc = this.last_email.bcc;
      }
      if (!this.forward && !this.recipients) {
        this.recipients = this.frm && this.frm.timeline.get_recipient();
      }
      if (!this.subject && this.frm) {
        const last = this.frm.timeline.get_last_email();
        if (last) {
          this.subject = last.subject;
          if (!this.recipients) {
            this.recipients = last.sender;
          }
          if (strip(this.subject.toLowerCase().split(":")[0]) != "re") {
            this.subject = __("Re: {0}", [this.subject]);
          }
        }
        if (!this.subject) {
          this.subject = this.frm.doc.name;
          if (this.frm.meta.subject_field && this.frm.doc[this.frm.meta.subject_field]) {
            this.subject = this.frm.doc[this.frm.meta.subject_field];
          } else if (this.frm.meta.title_field && this.frm.doc[this.frm.meta.title_field]) {
            this.subject = this.frm.doc[this.frm.meta.title_field];
          }
        }
        const identifier = `#${this.frm.doc.name}`;
        if (!cstr(this.subject).includes(identifier)) {
          this.subject = `${this.subject} (${identifier})`;
        }
      }
      if (this.frm && !this.recipients) {
        this.recipients = this.frm.doc[this.frm.email_field];
      }
    }
    setup_email_template() {
      const me = this;
      this.dialog.fields_dict["email_template"].df.onchange = () => {
        const email_template = me.dialog.fields_dict.email_template.get_value();
        if (!email_template)
          return;
        function prepend_reply(reply) {
          if (me.reply_added === email_template)
            return;
          const content_field = me.dialog.fields_dict.content;
          const subject_field = me.dialog.fields_dict.subject;
          let content = content_field.get_value() || "";
          content_field.set_value(`${reply.message}<br>${content}`);
          subject_field.set_value(reply.subject);
          me.reply_added = email_template;
        }
        frappe.call({
          method: "frappe.email.doctype.email_template.email_template.get_email_template",
          args: {
            template_name: email_template,
            doc: me.doc,
            _lang: me.dialog.get_value("language_sel")
          },
          callback(r2) {
            prepend_reply(r2.message);
          }
        });
      };
    }
    setup_last_edited_communication() {
      if (this.frm) {
        this.doctype = this.frm.doctype;
        this.key = this.frm.docname;
      } else {
        this.doctype = this.key = "Inbox";
      }
      if (this.last_email) {
        this.key = this.key + ":" + this.last_email.name;
      }
      if (this.subject) {
        this.key = this.key + ":" + this.subject;
      }
      this.dialog.on_hide = () => {
        $.extend(this.get_last_edited_communication(true), this.dialog.get_values(true));
        if (this.frm) {
          $(document).trigger("form-stopped-typing", [this.frm]);
        }
      };
    }
    get_last_edited_communication(clear) {
      if (!frappe.last_edited_communication[this.doctype]) {
        frappe.last_edited_communication[this.doctype] = {};
      }
      if (clear || !frappe.last_edited_communication[this.doctype][this.key]) {
        frappe.last_edited_communication[this.doctype][this.key] = {};
      }
      return frappe.last_edited_communication[this.doctype][this.key];
    }
    async set_values() {
      for (const fieldname of ["recipients", "cc", "bcc", "sender"]) {
        await this.dialog.set_value(fieldname, this[fieldname] || "");
      }
      const subject = frappe.utils.html2text(this.subject) || "";
      await this.dialog.set_value("subject", subject);
      await this.set_values_from_last_edited_communication();
      await this.set_content();
      if (this.frm && !this.is_a_reply && !this.content_set) {
        const email_template = this.frm.meta.default_email_template || "";
        await this.dialog.set_value("email_template", email_template);
      }
      for (const fieldname of ["email_template", "cc", "bcc"]) {
        if (this.dialog.get_value(fieldname)) {
          this.toggle_more_options(true);
          break;
        }
      }
    }
    async set_values_from_last_edited_communication() {
      if (this.message)
        return;
      const last_edited = this.get_last_edited_communication();
      if (!last_edited.content)
        return;
      if (last_edited.email_template) {
        const template_field = this.dialog.fields_dict.email_template;
        await template_field.set_model_value(last_edited.email_template);
        delete last_edited.email_template;
      }
      await this.dialog.set_values(last_edited);
      this.content_set = true;
    }
    selected_format() {
      return this.dialog.fields_dict.select_print_format.input.value || this.frm && this.frm.meta.default_print_format || "Standard";
    }
    get_print_format(format2) {
      if (!format2) {
        format2 = this.selected_format();
      }
      if (locals["Print Format"] && locals["Print Format"][format2]) {
        return locals["Print Format"][format2];
      } else {
        return {};
      }
    }
    setup_print_language() {
      const fields = this.dialog.fields_dict;
      this.lang_code = this.doc.language || this.get_print_format().default_print_language || frappe.boot.lang;
      const me = this;
      $(fields.language_sel.input).change(function() {
        me.lang_code = this.value;
      });
      $(fields.language_sel.input).empty().add_options(frappe.get_languages());
      if (this.lang_code) {
        $(fields.language_sel.input).val(this.lang_code);
      }
    }
    setup_print() {
      const fields = this.dialog.fields_dict;
      $(fields.attach_document_print.input).click(function() {
        $(fields.select_print_format.wrapper).toggle($(this).prop("checked"));
      });
      $(fields.select_print_format.wrapper).toggle(false);
      if (this.frm) {
        const print_formats = frappe.meta.get_print_formats(this.frm.meta.name);
        $(fields.select_print_format.input).empty().add_options(print_formats).val(print_formats[0]);
      } else {
        $(fields.attach_document_print.wrapper).toggle(false);
      }
    }
    setup_attach() {
      const fields = this.dialog.fields_dict;
      const attach = $(fields.select_attachments.wrapper);
      if (!this.attachments) {
        this.attachments = [];
      }
      let args = {
        folder: "Home/Attachments",
        on_success: (attachment) => {
          this.attachments.push(attachment);
          this.render_attachment_rows(attachment);
        }
      };
      if (this.frm) {
        args = {
          doctype: this.frm.doctype,
          docname: this.frm.docname,
          folder: "Home/Attachments",
          on_success: (attachment) => {
            this.frm.attachments.attachment_uploaded(attachment);
            this.render_attachment_rows(attachment);
          }
        };
      }
      $(`
			<label class="control-label">
				${__("Select Attachments")}
			</label>
			<div class='attach-list'></div>
			<p class='add-more-attachments'>
				<button class='btn btn-xs btn-default'>
					${frappe.utils.icon("small-add", "xs")}&nbsp;
					${__("Add Attachment")}
				</button>
			</p>
		`).appendTo(attach.empty());
      attach.find(".add-more-attachments button").on("click", () => new frappe.ui.FileUploader(args));
      this.render_attachment_rows();
    }
    render_attachment_rows(attachment) {
      const select_attachments = this.dialog.fields_dict.select_attachments;
      const attachment_rows = $(select_attachments.wrapper).find(".attach-list");
      if (attachment) {
        attachment_rows.append(this.get_attachment_row(attachment, true));
      } else {
        let files = [];
        if (this.attachments && this.attachments.length) {
          files = files.concat(this.attachments);
        }
        if (this.frm) {
          files = files.concat(this.frm.get_files());
        }
        if (files.length) {
          $.each(files, (i2, f3) => {
            if (!f3.file_name)
              return;
            if (!attachment_rows.find(`[data-file-name="${f3.name}"]`).length) {
              f3.file_url = frappe.urllib.get_full_url(f3.file_url);
              attachment_rows.append(this.get_attachment_row(f3));
            }
          });
        }
      }
    }
    get_attachment_row(attachment, checked) {
      return $(`<p class="checkbox flex">
			<label class="ellipsis" title="${attachment.file_name}">
				<input
					type="checkbox"
					data-file-name="${attachment.name}"
					${checked ? "checked" : ""}>
				</input>
				<span class="ellipsis">${attachment.file_name}</span>
			</label>
			&nbsp;
			<a href="${attachment.file_url}" target="_blank" class="btn-linkF">
				${frappe.utils.icon("link-url")}
			</a>
		</p>`);
    }
    setup_email() {
      const fields = this.dialog.fields_dict;
      if (this.attach_document_print) {
        $(fields.attach_document_print.input).click();
        $(fields.select_print_format.wrapper).toggle(true);
      }
      $(fields.send_me_a_copy.input).on("click", () => {
        const val2 = fields.send_me_a_copy.get_value();
        frappe.db.set_value("User", frappe.session.user, "send_me_a_copy", val2);
        frappe.boot.user.send_me_a_copy = val2;
      });
    }
    send_action() {
      const me = this;
      const btn = me.dialog.get_primary_btn();
      const form_values = this.get_values();
      if (!form_values)
        return;
      const selected_attachments = $.map($(me.dialog.wrapper).find("[data-file-name]:checked"), function(element) {
        return $(element).attr("data-file-name");
      });
      if (form_values.attach_document_print) {
        me.send_email(btn, form_values, selected_attachments, null, form_values.select_print_format || "");
      } else {
        me.send_email(btn, form_values, selected_attachments);
      }
    }
    get_values() {
      const form_values = this.dialog.get_values();
      for (let i2 = 0, l2 = this.dialog.fields.length; i2 < l2; i2++) {
        const df = this.dialog.fields[i2];
        if (df.is_cc_checkbox) {
          if (form_values[df.fieldname]) {
            form_values.cc = (form_values.cc ? form_values.cc + ", " : "") + df.fieldname;
            form_values.bcc = (form_values.bcc ? form_values.bcc + ", " : "") + df.fieldname;
          }
          delete form_values[df.fieldname];
        }
      }
      return form_values;
    }
    save_as_draft() {
      if (this.dialog && this.frm) {
        let message2 = this.dialog.get_value("content");
        message2 = message2.split(separator_element)[0];
        import_localforage.default.setItem(this.frm.doctype + this.frm.docname, message2).catch((e2) => {
          if (e2) {
            console.log(e2);
            console.warn("[Communication] IndexedDB is full. Cannot save message as draft");
          }
        });
      }
    }
    clear_cache() {
      this.delete_saved_draft();
      this.get_last_edited_communication(true);
    }
    delete_saved_draft() {
      if (this.dialog && this.frm) {
        import_localforage.default.removeItem(this.frm.doctype + this.frm.docname).catch((e2) => {
          if (e2) {
            console.log(e2);
            console.warn("[Communication] IndexedDB is full. Cannot save message as draft");
          }
        });
      }
    }
    send_email(btn, form_values, selected_attachments, print_html, print_format) {
      const me = this;
      this.dialog.hide();
      if (!form_values.recipients) {
        frappe.msgprint(__("Enter Email Recipient(s)"));
        return;
      }
      if (!form_values.attach_document_print) {
        print_html = null;
        print_format = null;
      }
      if (this.frm && !frappe.model.can_email(this.doc.doctype, this.frm)) {
        frappe.msgprint(__("You are not allowed to send emails related to this document"));
        return;
      }
      return frappe.call({
        method: "frappe.core.doctype.communication.email.make",
        args: {
          recipients: form_values.recipients,
          cc: form_values.cc,
          bcc: form_values.bcc,
          subject: form_values.subject,
          content: form_values.content,
          doctype: me.doc.doctype,
          name: me.doc.name,
          send_email: 1,
          print_html,
          send_me_a_copy: form_values.send_me_a_copy,
          print_format,
          sender: form_values.sender,
          sender_full_name: form_values.sender ? frappe.user.full_name() : void 0,
          email_template: form_values.email_template,
          attachments: selected_attachments,
          _lang: me.lang_code,
          read_receipt: form_values.send_read_receipt,
          print_letterhead: me.is_print_letterhead_checked()
        },
        btn,
        callback(r2) {
          if (!r2.exc) {
            frappe.utils.play_sound("email");
            if (r2.message["emails_not_sent_to"]) {
              frappe.msgprint(__("Email not sent to {0} (unsubscribed / disabled)", [frappe.utils.escape_html(r2.message["emails_not_sent_to"])]));
            }
            me.clear_cache();
            if (me.frm) {
              me.frm.reload_doc();
            }
            if (me.success) {
              try {
                me.success(r2);
              } catch (e2) {
                console.log(e2);
              }
            }
          } else {
            frappe.msgprint(__("There were errors while sending email. Please try again."));
            if (me.error) {
              try {
                me.error(r2);
              } catch (e2) {
                console.log(e2);
              }
            }
          }
        }
      });
    }
    is_print_letterhead_checked() {
      if (this.frm && $(this.frm.wrapper).find(".form-print-wrapper").is(":visible")) {
        return $(this.frm.wrapper).find(".print-letterhead").prop("checked") ? 1 : 0;
      } else {
        return (frappe.model.get_doc(":Print Settings", "Print Settings") || { with_letterhead: 1 }).with_letterhead ? 1 : 0;
      }
    }
    async set_content(sender_email) {
      if (this.content_set)
        return;
      let message2 = this.message || "";
      if (!message2 && this.frm) {
        const { doctype: doctype2, docname } = this.frm;
        message2 = await import_localforage.default.getItem(doctype2 + docname) || "";
      }
      if (message2) {
        this.content_set = true;
      }
      message2 += await this.get_signature(sender_email || null);
      if (this.is_a_reply && !this.reply_set) {
        message2 += this.get_earlier_reply();
      }
      await this.dialog.set_value("content", message2);
    }
    async get_signature(sender_email) {
      let signature = frappe.boot.user.email_signature;
      if (!signature) {
        let filters2 = {
          "add_signature": 1
        };
        if (sender_email) {
          filters2["email_id"] = sender_email;
        } else {
          filters2["default_outgoing"] = 1;
        }
        const email = await frappe.db.get_list("Email Account", {
          filters: filters2,
          fields: ["signature", "email_id"],
          limit: 1
        });
        signature = email && email[0].signature;
        if (this.user_email_accounts && this.user_email_accounts.includes(email[0].email_id)) {
          this.dialog.set_value("sender", email[0].email_id);
        }
      }
      if (!signature)
        return "";
      if (!frappe.utils.is_html(signature)) {
        signature = signature.replace(/\n/g, "<br>");
      }
      return "<br>" + signature;
    }
    get_earlier_reply() {
      this.reply_set = false;
      const last_email = this.last_email || this.frm && this.frm.timeline.get_last_email(true);
      if (!last_email)
        return "";
      let last_email_content = last_email.original_comment || last_email.content;
      last_email_content = this.html2text(last_email_content).replace(/\n/g, "<br>");
      if (last_email_content.length > 20 * 1024) {
        last_email_content += "<div>" + __("Message clipped") + "</div>" + last_email_content;
        last_email_content = last_email_content.slice(0, 20 * 1024);
      }
      const communication_date = frappe.datetime.global_date_format(last_email.communication_date || last_email.creation);
      this.reply_set = true;
      return `
			<div><br></div>
			${separator_element || ""}
			<p>
			${__("On {0}, {1} wrote:", [communication_date, last_email.sender])}
			</p>
			<blockquote>
			${last_email_content}
			</blockquote>
		`;
    }
    html2text(html) {
      const d2 = document.createElement("div");
      d2.innerHTML = html.replace(/<\/div>/g, "<br></div>").replace(/<\/p>/g, "<br></p>").replace(/<br>/g, "\n");
      return d2.textContent.replace(/\n{3,}/g, "\n\n");
    }
  };

  // frappe/public/js/frappe/views/translation_manager.js
  frappe.views.TranslationManager = class TranslationManager {
    constructor(opts) {
      Object.assign(this, opts);
      this.make();
    }
    make() {
      this.data = [];
      this.dialog = new frappe.ui.Dialog({
        fields: this.get_fields(),
        title: __("Translate {0}", [this.df.label]),
        no_submit_on_enter: true,
        primary_action_label: __("Update Translations"),
        primary_action: (values) => this.update_translations(values).then(() => {
          this.dialog.hide();
          this.data = [];
          frappe.msgprint({
            title: __("Success"),
            message: __("Successfully updated translations"),
            indicator: "green"
          });
        })
      });
      this.get_translations_data().then((data) => {
        this.data.push(...data || []);
        this.dialog.refresh();
        this.dialog.show();
      });
    }
    get_fields() {
      var fields = [
        {
          label: __("Source Text"),
          fieldname: "source",
          fieldtype: "Data",
          read_only: 1,
          bold: 1,
          default: this.source_text
        },
        {
          label: __("Translations"),
          fieldname: "translation_data",
          fieldtype: "Table",
          fields: [
            {
              label: "Language",
              fieldname: "language",
              fieldtype: "Link",
              options: "Language",
              in_list_view: 1,
              columns: 3
            },
            {
              label: "Translation",
              fieldname: "translation",
              fieldtype: "Text",
              in_list_view: 1,
              columns: 7
            }
          ],
          data: this.data,
          get_data: () => {
            return this.data;
          }
        }
      ];
      return fields;
    }
    get_translations_data() {
      return frappe.db.get_list("Translation", {
        fields: ["name", "language", "translated_text as translation"],
        filters: {
          source_text: strip_html(this.source_text)
        }
      });
    }
    update_translations({ source, translation_data = [] }) {
      const translation_dict = {};
      translation_data.map((row) => {
        translation_dict[row.language] = row.translation;
      });
      return frappe.call({
        method: "frappe.translate.update_translations_for_source",
        btn: this.dialog.get_primary_btn(),
        args: {
          source,
          translation_dict
        }
      }).fail(() => {
        frappe.msgprint({
          title: __("Something went wrong"),
          message: __("Please try again"),
          indicator: "red"
        });
      });
    }
  };

  // frappe/public/js/frappe/views/workspace/workspace.js
  var import_editorjs = __toESM(require_editor());
  var import_editorjs_undo = __toESM(require_bundle());
  frappe.standard_pages["Workspaces"] = function() {
    var wrapper = frappe.container.add_page("Workspaces");
    frappe.ui.make_app_page({
      parent: wrapper,
      name: "Workspaces",
      title: __("Workspace")
    });
    frappe.workspace = new frappe.views.Workspace(wrapper);
    $(wrapper).bind("show", function() {
      frappe.workspace.show();
    });
  };
  frappe.views.Workspace = class Workspace {
    constructor(wrapper) {
      this.wrapper = $(wrapper);
      this.page = wrapper.page;
      this.blocks = frappe.workspace_block.blocks;
      this.is_read_only = true;
      this.pages = {};
      this.sorted_public_items = [];
      this.sorted_private_items = [];
      this.current_page = {};
      this.sidebar_items = {
        "public": {},
        "private": {}
      };
      this.sidebar_categories = [
        "My Workspaces",
        "Public"
      ];
      this.prepare_container();
      this.setup_pages();
    }
    prepare_container() {
      let list_sidebar = $(`
			<div class="list-sidebar overlay-sidebar hidden-xs hidden-sm">
				<div class="desk-sidebar list-unstyled sidebar-menu"></div>
			</div>
		`).appendTo(this.wrapper.find(".layout-side-section"));
      this.sidebar = list_sidebar.find(".desk-sidebar");
      this.body = this.wrapper.find(".layout-main-section");
    }
    async setup_pages(reload) {
      !this.discard && this.create_page_skeleton();
      !this.discard && this.create_sidebar_skeleton();
      this.sidebar_pages = !this.discard ? await this.get_pages() : this.sidebar_pages;
      this.cached_pages = $.extend(true, {}, this.sidebar_pages);
      this.all_pages = this.sidebar_pages.pages;
      this.has_access = this.sidebar_pages.has_access;
      this.all_pages.forEach((page) => {
        page.is_editable = !page.public || this.has_access;
      });
      this.public_pages = this.all_pages.filter((page) => page.public);
      this.private_pages = this.all_pages.filter((page) => !page.public);
      if (this.all_pages) {
        frappe.workspaces = {};
        for (let page of this.all_pages) {
          frappe.workspaces[frappe.router.slug(page.name)] = { title: page.title };
        }
        this.make_sidebar();
        reload && this.show();
      }
    }
    get_pages() {
      return frappe.xcall("frappe.desk.desktop.get_workspace_sidebar_items");
    }
    sidebar_item_container(item) {
      return $(`
			<div class="sidebar-item-container ${item.is_editable ? "is-draggable" : ""}" item-parent="${item.parent_page}" item-name="${item.title}" item-public="${item.public || 0}">
				<div class="desk-sidebar-item standard-sidebar-item ${item.selected ? "selected" : ""}">
					<a
						href="/app/${item.public ? frappe.router.slug(item.title) : "private/" + frappe.router.slug(item.title)}"
						class="item-anchor ${item.is_editable ? "" : "block-click"}" title="${__(item.title)}"
					>
						<span class="sidebar-item-icon" item-icon=${item.icon || "folder-normal"}>${frappe.utils.icon(item.icon || "folder-normal", "md")}</span>
						<span class="sidebar-item-label">${__(item.title)}<span>
					</a>
					<div class="sidebar-item-control"></div>
				</div>
				<div class="sidebar-child-item nested-container"></div>
			</div>
		`);
    }
    make_sidebar() {
      if (this.sidebar.find(".standard-sidebar-section")[0]) {
        this.sidebar.find(".standard-sidebar-section").remove();
      }
      this.sidebar_categories.forEach((category) => {
        let root_pages = this.public_pages.filter((page) => page.parent_page == "" || page.parent_page == null);
        if (category != "Public") {
          root_pages = this.private_pages.filter((page) => page.parent_page == "" || page.parent_page == null);
        }
        this.build_sidebar_section(category, root_pages);
      });
      this.sidebar.find(".selected").length && !frappe.dom.is_element_in_viewport(this.sidebar.find(".selected")) && this.sidebar.find(".selected")[0].scrollIntoView();
      this.remove_sidebar_skeleton();
    }
    build_sidebar_section(title, root_pages) {
      let sidebar_section = $(`<div class="standard-sidebar-section nested-container"></div>`);
      let $title = $(`<div class="standard-sidebar-label">
			<span>${frappe.utils.icon("small-down", "xs")}</span>
			<span class="section-title">${__(title)}<span>
		</div>`).appendTo(sidebar_section);
      this.prepare_sidebar(root_pages, sidebar_section, this.sidebar);
      $title.on("click", (e2) => {
        let icon = $(e2.target).find("span use").attr("href") === "#icon-small-down" ? "#icon-right" : "#icon-small-down";
        $(e2.target).find("span use").attr("href", icon);
        $(e2.target).parent().find(".sidebar-item-container").toggleClass("hidden");
      });
      if (Object.keys(root_pages).length === 0) {
        sidebar_section.addClass("hidden");
      }
    }
    prepare_sidebar(items, child_container, item_container) {
      items.forEach((item) => this.append_item(item, child_container));
      child_container.appendTo(item_container);
    }
    append_item(item, container) {
      let is_current_page = frappe.router.slug(item.title) == frappe.router.slug(this.get_page_to_show().name) && item.public == this.get_page_to_show().public;
      item.selected = is_current_page;
      if (is_current_page) {
        this.current_page = { name: item.title, public: item.public };
      }
      let $item_container = this.sidebar_item_container(item);
      let sidebar_control = $item_container.find(".sidebar-item-control");
      this.add_sidebar_actions(item, sidebar_control);
      let pages = item.public ? this.public_pages : this.private_pages;
      let child_items = pages.filter((page) => page.parent_page == item.title);
      if (child_items.length > 0) {
        let child_container = $item_container.find(".sidebar-child-item");
        child_container.addClass("hidden");
        this.prepare_sidebar(child_items, child_container, $item_container);
      }
      $item_container.appendTo(container);
      this.sidebar_items[item.public ? "public" : "private"][item.title] = $item_container;
      if ($item_container.parent().hasClass("hidden") && is_current_page) {
        $item_container.parent().toggleClass("hidden");
      }
      this.add_drop_icon(item, sidebar_control, $item_container);
    }
    add_drop_icon(item, sidebar_control, item_container) {
      let drop_icon = "small-down";
      if (item_container.find(`[item-name="${this.current_page.name}"]`).length) {
        drop_icon = "small-up";
      }
      let $child_item_section = item_container.find(".sidebar-child-item");
      let $drop_icon = $(`<span class="drop-icon hidden">${frappe.utils.icon(drop_icon, "sm")}</span>`).appendTo(sidebar_control);
      let pages = item.public ? this.public_pages : this.private_pages;
      if (pages.some((e2) => e2.parent_page == item.title)) {
        $drop_icon.removeClass("hidden");
      }
      $drop_icon.on("click", () => {
        let icon = $drop_icon.find("use").attr("href") === "#icon-small-down" ? "#icon-small-up" : "#icon-small-down";
        $drop_icon.find("use").attr("href", icon);
        $child_item_section.toggleClass("hidden");
      });
    }
    show() {
      if (!this.all_pages) {
        setTimeout(() => this.show(), 100);
        return;
      }
      let page = this.get_page_to_show();
      this.page.set_title(`${__(page.name)}`);
      this.update_selected_sidebar(this.current_page, false);
      this.update_selected_sidebar(page, true);
      this.show_page(page);
    }
    update_selected_sidebar(page, add) {
      let section = page.public ? "public" : "private";
      if (this.sidebar && this.sidebar_items[section] && this.sidebar_items[section][page.name]) {
        let $sidebar = this.sidebar_items[section][page.name];
        let pages = page.public ? this.public_pages : this.private_pages;
        let sidebar_page = pages.find((p2) => p2.title == page.name);
        if (add) {
          $sidebar[0].firstElementChild.classList.add("selected");
          if (sidebar_page)
            sidebar_page.selected = true;
          $sidebar.parent().hasClass("hidden") && $sidebar.parent().removeClass("hidden");
          this.current_page = { name: page.name, public: page.public };
          localStorage.current_page = page.name;
          localStorage.is_current_page_public = page.public;
        } else {
          $sidebar[0].firstElementChild.classList.remove("selected");
          if (sidebar_page)
            sidebar_page.selected = false;
        }
      }
    }
    get_data(page) {
      return frappe.call("frappe.desk.desktop.get_desktop_page", {
        page
      }).then((data) => {
        this.page_data = data.message;
        this.pages[page.name] && delete this.pages[page.name];
        this.pages[page.name] = data.message;
        if (!this.page_data || Object.keys(this.page_data).length === 0)
          return;
        if (this.page_data.charts && this.page_data.charts.items.length === 0)
          return;
        return frappe.dashboard_utils.get_dashboard_settings().then((settings) => {
          if (settings) {
            let chart_config = settings.chart_config ? JSON.parse(settings.chart_config) : {};
            this.page_data.charts.items.map((chart) => {
              chart.chart_settings = chart_config[chart.chart_name] || {};
            });
            this.pages[page.name] = this.page_data;
          }
        });
      });
    }
    get_page_to_show() {
      let default_page;
      if (localStorage.current_page && this.all_pages.filter((page2) => page2.title == localStorage.current_page).length != 0) {
        default_page = { name: localStorage.current_page, public: localStorage.is_current_page_public == "true" };
      } else if (Object.keys(this.all_pages).length !== 0) {
        default_page = { name: this.all_pages[0].title, public: true };
      } else {
        default_page = { name: "Build", public: true };
      }
      let page = (frappe.get_route()[1] == "private" ? frappe.get_route()[2] : frappe.get_route()[1]) || default_page.name;
      let is_public = frappe.get_route()[1] ? frappe.get_route()[1] != "private" : default_page.public;
      return { name: page, public: is_public };
    }
    async show_page(page) {
      if (!this.body.find("#editorjs")[0]) {
        this.$page = $(`
				<div id="editorjs" class="desk-page page-main-content"></div>
			`).appendTo(this.body);
      }
      if (this.all_pages) {
        this.create_page_skeleton();
        let pages = page.public ? this.public_pages : this.private_pages;
        let current_page = pages.filter((p2) => p2.title == page.name)[0];
        this.content = current_page && JSON.parse(current_page.content);
        this.add_custom_cards_in_content();
        $(".item-anchor").addClass("disable-click");
        if (this.pages && this.pages[current_page.name]) {
          this.page_data = this.pages[current_page.name];
        } else {
          await frappe.after_ajax(() => this.get_data(current_page));
        }
        this.setup_actions(page);
        this.prepare_editorjs();
        $(".item-anchor").removeClass("disable-click");
        this.remove_page_skeleton();
      }
    }
    add_custom_cards_in_content() {
      let index = -1;
      this.content.find((item, i2) => {
        if (item.type == "card")
          index = i2;
      });
      if (index !== -1) {
        this.content.splice(index + 1, 0, { "type": "card", "data": { "card_name": "Custom Documents", "col": 4 } });
        this.content.splice(index + 2, 0, { "type": "card", "data": { "card_name": "Custom Reports", "col": 4 } });
      }
    }
    prepare_editorjs() {
      if (this.editor) {
        this.editor.isReady.then(() => {
          this.editor.configuration.tools.chart.config.page_data = this.page_data;
          this.editor.configuration.tools.shortcut.config.page_data = this.page_data;
          this.editor.configuration.tools.card.config.page_data = this.page_data;
          this.editor.configuration.tools.onboarding.config.page_data = this.page_data;
          this.editor.render({ blocks: this.content || [] });
        });
      } else {
        this.initialize_editorjs(this.content);
      }
    }
    setup_actions(page) {
      let pages = page.public ? this.public_pages : this.private_pages;
      let current_page = pages.filter((p2) => p2.title == page.name)[0];
      if (!this.is_read_only) {
        this.setup_customization_buttons(current_page);
        return;
      }
      this.clear_page_actions();
      current_page.is_editable && this.page.set_secondary_action(__("Edit"), async () => {
        if (!this.editor || !this.editor.readOnly)
          return;
        this.is_read_only = false;
        await this.editor.readOnly.toggle();
        this.editor.isReady.then(() => {
          this.initialize_editorjs_undo();
          this.setup_customization_buttons(current_page);
          this.show_sidebar_actions();
          this.make_blocks_sortable();
        });
      });
      this.page.add_inner_button(__("Create Workspace"), () => {
        this.initialize_new_page();
      });
    }
    initialize_editorjs_undo() {
      this.undo = new import_editorjs_undo.default({ editor: this.editor });
      this.undo.initialize({ blocks: this.content || [] });
      this.undo.readOnly = false;
    }
    clear_page_actions() {
      this.page.clear_primary_action();
      this.page.clear_secondary_action();
      this.page.clear_inner_toolbar();
    }
    setup_customization_buttons(page) {
      this.clear_page_actions();
      page.is_editable && this.page.set_primary_action(__("Save"), () => {
        this.clear_page_actions();
        this.save_page(page).then((saved) => {
          if (!saved)
            return;
          this.undo.readOnly = true;
          this.editor.readOnly.toggle();
          this.is_read_only = true;
        });
      }, null, __("Saving"));
      this.page.set_secondary_action(__("Discard"), async () => {
        this.discard = true;
        this.clear_page_actions();
        await this.editor.readOnly.toggle();
        this.is_read_only = true;
        this.sidebar_pages = this.cached_pages;
        this.reload();
        frappe.show_alert({ message: __("Customizations Discarded"), indicator: "info" });
      });
      page.name && this.page.add_inner_button(__("Settings"), () => {
        frappe.set_route(`workspace/${page.name}`);
      });
    }
    show_sidebar_actions() {
      this.sidebar.find(".standard-sidebar-section").addClass("show-control");
      this.make_sidebar_sortable();
    }
    add_sidebar_actions(item, sidebar_control, is_new) {
      if (!item.is_editable) {
        sidebar_control.parent().click(() => {
          !this.is_read_only && frappe.show_alert({
            message: __("Only Workspace Manager can sort or edit this page"),
            indicator: "info"
          }, 5);
        });
        frappe.utils.add_custom_button(frappe.utils.icon("duplicate", "sm"), () => this.duplicate_page(item), "duplicate-page", `${__("Duplicate Workspace")}`, null, sidebar_control);
      } else {
        frappe.utils.add_custom_button(frappe.utils.icon("drag", "xs"), null, "drag-handle", `${__("Drag")}`, null, sidebar_control);
        !is_new && this.add_settings_button(item, sidebar_control);
      }
    }
    get_parent_pages(page) {
      this.public_parent_pages = ["", ...this.public_pages.filter((p2) => !p2.parent_page).map((p2) => p2.title)];
      this.private_parent_pages = ["", ...this.private_pages.filter((p2) => !p2.parent_page).map((p2) => p2.title)];
      if (page) {
        return page.public ? this.public_parent_pages : this.private_parent_pages;
      }
    }
    edit_page(item) {
      var me = this;
      let old_item = item;
      let parent_pages = this.get_parent_pages(item);
      let idx = parent_pages.findIndex((x2) => x2 == item.title);
      if (idx !== -1)
        parent_pages.splice(idx, 1);
      const d2 = new frappe.ui.Dialog({
        title: __("Update Details"),
        fields: [
          {
            label: __("Title"),
            fieldtype: "Data",
            fieldname: "title",
            reqd: 1,
            default: item.title
          },
          {
            label: __("Parent"),
            fieldtype: "Select",
            fieldname: "parent",
            options: parent_pages,
            default: item.parent_page
          },
          {
            label: __("Public"),
            fieldtype: "Check",
            fieldname: "is_public",
            depends_on: `eval:${this.has_access}`,
            default: item.public,
            onchange: function() {
              d2.set_df_property("parent", "options", this.get_value() ? me.public_parent_pages : me.private_parent_pages);
            }
          },
          {
            fieldtype: "Column Break"
          },
          {
            label: __("Icon"),
            fieldtype: "Icon",
            fieldname: "icon",
            default: item.icon
          }
        ],
        primary_action_label: __("Update"),
        primary_action: (values) => {
          let is_title_changed = values.title != old_item.title;
          let is_section_changed = values.is_public != old_item.public;
          if ((is_title_changed || is_section_changed) && !this.validate_page(values, old_item))
            return;
          d2.hide();
          frappe.call({
            method: "frappe.desk.doctype.workspace.workspace.update_page",
            args: {
              name: old_item.name,
              title: values.title,
              icon: values.icon || "",
              parent: values.parent || "",
              public: values.is_public || 0
            },
            callback: function(res) {
              if (res.message) {
                let message2 = `Workspace <b>${old_item.title}</b> Edited Successfully`;
                frappe.show_alert({ message: __(message2), indicator: "green" });
              }
            }
          });
          this.update_sidebar(old_item, values);
          if (this.make_page_selected) {
            let pre_url = values.is_public ? "" : "private/";
            let route = pre_url + frappe.router.slug(values.title);
            frappe.set_route(route);
            this.make_page_selected = false;
          }
          this.make_sidebar();
          this.show_sidebar_actions();
        }
      });
      d2.show();
    }
    update_sidebar(old_item, new_item) {
      let is_section_changed = old_item.public != (new_item.is_public || 0);
      let is_title_changed = old_item.title != new_item.title;
      let new_updated_item = __spreadValues({}, old_item);
      let pages = old_item.public ? this.public_pages : this.private_pages;
      let child_items = pages.filter((page) => page.parent_page == old_item.title);
      this.make_page_selected = old_item.selected;
      new_updated_item.title = new_item.title;
      new_updated_item.icon = new_item.icon;
      new_updated_item.parent_page = new_item.parent || "";
      new_updated_item.public = new_item.is_public;
      if (is_title_changed || is_section_changed) {
        if (new_item.is_public) {
          new_updated_item.name = new_item.title;
          new_updated_item.label = new_item.title;
          new_updated_item.for_user = "";
        } else {
          let user = frappe.session.user;
          new_updated_item.name = `${new_item.title}-${user}`;
          new_updated_item.label = `${new_item.title}-${user}`;
          new_updated_item.for_user = user;
        }
      }
      this.update_cached_values(old_item, new_updated_item);
      if (child_items.length) {
        child_items.forEach((child) => {
          child.parent_page = new_item.title;
          is_section_changed && this.update_child_sidebar(child, new_item);
        });
      }
    }
    update_child_sidebar(child, new_item) {
      let old_child = __spreadValues({}, child);
      this.make_page_selected = child.selected;
      child.public = new_item.is_public;
      if (new_item.is_public) {
        child.name = child.title;
        child.label = child.title;
        child.for_user = "";
      } else {
        let user = frappe.session.user;
        child.name = `${child.title}-${user}`;
        child.label = `${child.title}-${user}`;
        child.for_user = user;
      }
      this.update_cached_values(old_child, child);
    }
    update_cached_values(old_item, new_item, duplicate, new_page) {
      let [from_pages, to_pages] = old_item.public ? [this.public_pages, this.private_pages] : [this.private_pages, this.public_pages];
      let old_item_index = from_pages.findIndex((page) => page.title == old_item.title);
      duplicate && old_item_index++;
      if (frappe.workspaces[frappe.router.slug(old_item.name)] || new_page) {
        !duplicate && delete frappe.workspaces[frappe.router.slug(old_item.name)];
        if (new_item) {
          frappe.workspaces[frappe.router.slug(new_item.name)] = { "title": new_item.title };
        }
      }
      if (this.pages && this.pages[old_item.name] || new_page) {
        if (new_item) {
          this.pages[new_item.name] = this.pages[old_item.name] || {};
        }
        !duplicate && delete this.pages[old_item.name];
      }
      if (new_item) {
        let is_section_changed = old_item.public != (new_item.is_public || new_item.public || 0);
        if (is_section_changed) {
          !duplicate && from_pages.splice(old_item_index, 1);
          to_pages.push(new_item);
        } else if (new_page) {
          from_pages.push(new_item);
        } else {
          from_pages.splice(old_item_index, duplicate ? 0 : 1, new_item);
        }
      } else {
        from_pages.splice(old_item_index, 1);
      }
      this.sidebar_pages.pages = [...this.public_pages, ...this.private_pages];
      this.cached_pages = this.sidebar_pages;
    }
    add_settings_button(item, sidebar_control) {
      this.dropdown_list = [
        {
          label: "Edit",
          title: "Edit Workspace",
          icon: frappe.utils.icon("edit", "sm"),
          action: () => this.edit_page(item)
        },
        {
          label: "Duplicate",
          title: "Duplicate Workspace",
          icon: frappe.utils.icon("duplicate", "sm"),
          action: () => this.duplicate_page(item)
        },
        {
          label: "Delete",
          title: "Delete Workspace",
          icon: frappe.utils.icon("delete-active", "sm"),
          action: () => this.delete_page(item)
        }
      ];
      let $button = $(`
			<div class="btn btn-secondary btn-xs setting-btn dropdown-btn" title="${__("Setting")}">
				${frappe.utils.icon("dot-horizontal", "xs")}
			</div>
			<div class="dropdown-list hidden"></div>
		`);
      let dropdown_item = function(label, title, icon, action) {
        let html = $(`
				<div class="dropdown-item" title="${title}">
					<span class="dropdown-item-icon">${icon}</span>
					<span class="dropdown-item-label">${label}</span>
				</div>
			`);
        html.click((event2) => {
          event2.stopPropagation();
          action && action();
        });
        return html;
      };
      $button.filter(".dropdown-btn").click((event2) => {
        event2.stopPropagation();
        if ($button.filter(".dropdown-list.hidden").length) {
          $(".dropdown-list:not(.hidden)").addClass("hidden");
        }
        $button.filter(".dropdown-list").toggleClass("hidden");
      });
      $(document).click((event2) => {
        event2.stopPropagation();
        $(".dropdown-list:not(.hidden)").addClass("hidden");
      });
      sidebar_control.append($button);
      this.dropdown_list.forEach((i2) => {
        $button.filter(".dropdown-list").append(dropdown_item(i2.label, i2.title, i2.icon, i2.action));
      });
    }
    delete_page(page) {
      frappe.confirm(__("Are you sure you want to delete page {0}?", [page.title]), () => {
        frappe.call({
          method: "frappe.desk.doctype.workspace.workspace.delete_page",
          args: { page },
          callback: function(res) {
            if (res.message) {
              let page2 = res.message;
              let message2 = `Workspace <b>${page2.title}</b> Deleted Successfully`;
              frappe.show_alert({ message: __(message2), indicator: "green" });
            }
          }
        });
        this.page.clear_primary_action();
        this.update_cached_values(page);
        if (this.current_page.name == page.title && this.current_page.public == page.public) {
          frappe.set_route("/");
        }
        this.make_sidebar();
        this.show_sidebar_actions();
      });
    }
    duplicate_page(page) {
      var me = this;
      let parent_pages = this.get_parent_pages(page);
      const d2 = new frappe.ui.Dialog({
        title: __("Create Duplicate"),
        fields: [
          {
            label: __("Title"),
            fieldtype: "Data",
            fieldname: "title",
            reqd: 1
          },
          {
            label: __("Parent"),
            fieldtype: "Select",
            fieldname: "parent",
            options: parent_pages,
            default: page.parent_page
          },
          {
            label: __("Public"),
            fieldtype: "Check",
            fieldname: "is_public",
            depends_on: `eval:${this.has_access}`,
            default: page.public,
            onchange: function() {
              d2.set_df_property("parent", "options", this.get_value() ? me.public_parent_pages : me.private_parent_pages);
            }
          },
          {
            fieldtype: "Column Break"
          },
          {
            label: __("Icon"),
            fieldtype: "Icon",
            fieldname: "icon",
            default: page.icon
          }
        ],
        primary_action_label: __("Duplicate"),
        primary_action: (values) => {
          if (!this.validate_page(values))
            return;
          d2.hide();
          frappe.call({
            method: "frappe.desk.doctype.workspace.workspace.duplicate_page",
            args: {
              page_name: page.name,
              new_page: values
            },
            callback: function(res) {
              if (res.message) {
                let new_page2 = res.message;
                let message2 = `Duplicate of <b>${page.title}</b> named as <b>${new_page2.title}</b> is created successfully`;
                frappe.show_alert({ message: __(message2), indicator: "green" });
              }
            }
          });
          let new_page = __spreadValues({}, page);
          new_page.title = values.title;
          new_page.public = values.is_public || 0;
          new_page.name = values.title + (new_page.public ? "" : "-" + frappe.session.user);
          new_page.label = new_page.name;
          new_page.icon = values.icon;
          new_page.parent_page = values.parent || "";
          new_page.for_user = new_page.public ? "" : frappe.session.user;
          new_page.is_editable = !new_page.public;
          new_page.selected = true;
          this.update_cached_values(page, new_page, true);
          let pre_url = values.is_public ? "" : "private/";
          let route = pre_url + frappe.router.slug(values.title);
          frappe.set_route(route);
          me.make_sidebar();
          me.show_sidebar_actions();
        }
      });
      d2.show();
    }
    make_sidebar_sortable() {
      let me = this;
      $(".nested-container").each(function() {
        new Sortable(this, {
          handle: ".drag-handle",
          draggable: ".sidebar-item-container.is-draggable",
          group: "nested",
          animation: 150,
          fallbackOnBody: true,
          swapThreshold: 0.65,
          onEnd: function(evt) {
            let is_public = $(evt.item).attr("item-public") == "1";
            me.prepare_sorted_sidebar(is_public);
            me.update_sorted_sidebar();
          }
        });
      });
    }
    prepare_sorted_sidebar(is_public) {
      let pages = is_public ? this.public_pages : this.private_pages;
      if (is_public) {
        this.sorted_public_items = this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").last(), pages);
      } else {
        this.sorted_private_items = this.sort_sidebar(this.sidebar.find(".standard-sidebar-section").first(), pages);
      }
      this.sidebar_pages.pages = [...this.public_pages, ...this.private_pages];
      this.cached_pages = this.sidebar_pages;
    }
    sort_sidebar($sidebar_section, pages) {
      let sorted_items = [];
      Array.from($sidebar_section.find(".sidebar-item-container")).forEach((page, i2) => {
        let parent_page = "";
        if (page.closest(".nested-container").classList.contains("sidebar-child-item")) {
          parent_page = page.parentElement.parentElement.attributes["item-name"].value;
        }
        sorted_items.push({
          title: page.attributes["item-name"].value,
          parent_page,
          public: page.attributes["item-public"].value
        });
        let $drop_icon = $(page).find(".sidebar-item-control .drop-icon").first();
        if ($(page).find(".sidebar-child-item > *").length != 0) {
          $drop_icon.removeClass("hidden");
        } else {
          $drop_icon.addClass("hidden");
        }
        let from_index = pages.findIndex((p2) => p2.title == page.attributes["item-name"].value);
        let element = pages[from_index];
        element.parent_page = parent_page;
        if (from_index != i2) {
          pages.splice(from_index, 1);
          pages.splice(i2, 0, element);
        }
      });
      return sorted_items;
    }
    update_sorted_sidebar() {
      if (this.sorted_public_items || this.sorted_private_items) {
        frappe.call({
          method: "frappe.desk.doctype.workspace.workspace.sort_pages",
          args: {
            sb_public_items: this.sorted_public_items,
            sb_private_items: this.sorted_private_items
          },
          callback: function(res) {
            if (res.message) {
              let message2 = `Sidebar Updated Successfully`;
              frappe.show_alert({ message: __(message2), indicator: "green" });
            }
          }
        });
      }
    }
    make_blocks_sortable() {
      let me = this;
      this.page_sortable = Sortable.create(this.page.main.find(".codex-editor__redactor").get(0), {
        handle: ".drag-handle",
        draggable: ".ce-block",
        animation: 150,
        onEnd: function(evt) {
          me.editor.blocks.move(evt.newIndex, evt.oldIndex);
        },
        setData: function() {
        }
      });
    }
    initialize_new_page() {
      var me = this;
      this.get_parent_pages();
      const d2 = new frappe.ui.Dialog({
        title: __("New Workspace"),
        fields: [
          {
            label: __("Title"),
            fieldtype: "Data",
            fieldname: "title",
            reqd: 1
          },
          {
            label: __("Parent"),
            fieldtype: "Select",
            fieldname: "parent",
            options: this.private_parent_pages
          },
          {
            label: __("Public"),
            fieldtype: "Check",
            fieldname: "is_public",
            depends_on: `eval:${this.has_access}`,
            onchange: function() {
              d2.set_df_property("parent", "options", this.get_value() ? me.public_parent_pages : me.private_parent_pages);
            }
          },
          {
            fieldtype: "Column Break"
          },
          {
            label: __("Icon"),
            fieldtype: "Icon",
            fieldname: "icon"
          }
        ],
        primary_action_label: __("Create"),
        primary_action: (values) => {
          if (!this.validate_page(values))
            return;
          d2.hide();
          this.initialize_editorjs_undo();
          this.setup_customization_buttons({ is_editable: true });
          let name2 = values.title + (values.is_public ? "" : "-" + frappe.session.user);
          let blocks = [{
            type: "header",
            data: { text: values.title }
          }];
          let new_page = {
            content: JSON.stringify(blocks),
            name: name2,
            label: name2,
            title: values.title,
            public: values.is_public || 0,
            for_user: values.is_public ? "" : frappe.session.user,
            icon: values.icon,
            parent_page: values.parent || "",
            is_editable: true,
            selected: true
          };
          this.editor.render({
            blocks
          }).then(async () => {
            if (this.editor.configuration.readOnly) {
              this.is_read_only = false;
              await this.editor.readOnly.toggle();
            }
            frappe.call({
              method: "frappe.desk.doctype.workspace.workspace.new_page",
              args: {
                new_page
              },
              callback: function(res) {
                if (res.message) {
                  let message2 = `Workspace <b>${new_page.title}</b> Created Successfully`;
                  frappe.show_alert({ message: __(message2), indicator: "green" });
                }
              }
            });
            this.update_cached_values(new_page, new_page, true, true);
            let pre_url = new_page.public ? "" : "private/";
            let route = pre_url + frappe.router.slug(new_page.title);
            frappe.set_route(route);
            this.make_sidebar();
            this.show_sidebar_actions();
          });
        }
      });
      d2.show();
    }
    validate_page(new_page, old_page) {
      let message2 = "";
      let [from_pages, to_pages] = new_page.is_public ? [this.private_pages, this.public_pages] : [this.public_pages, this.private_pages];
      let section = this.sidebar_categories[new_page.is_public];
      if (to_pages && to_pages.filter((p2) => p2.title == new_page.title)[0]) {
        message2 = `Page with title ${new_page.title} already exist.`;
      }
      if (frappe.router.doctype_route_exist(frappe.router.slug(new_page.title))) {
        message2 = "Doctype with same route already exist. Please choose different title.";
      }
      let child_pages = old_page && from_pages.filter((p2) => p2.parent_page == old_page.title);
      if (child_pages) {
        child_pages.every((child_page) => {
          if (to_pages && to_pages.find((p2) => p2.title == child_page.title)) {
            message2 = `One of the child page with name <b>${child_page.title}</b> already exist in <b>${section}</b> Section. Please update the name of the child page first before moving`;
            cur_dialog.hide();
            return false;
          }
          return true;
        });
      }
      if (message2) {
        frappe.throw(__(message2));
        return false;
      }
      return true;
    }
    add_page_to_sidebar(page) {
      let $sidebar = $(".standard-sidebar-section");
      let item = __spreadValues({}, page);
      item.selected = true;
      item.is_editable = true;
      let $sidebar_item = this.sidebar_item_container(item);
      this.add_sidebar_actions(item, $sidebar_item.find(".sidebar-item-control"), true);
      $sidebar_item.find(".sidebar-item-control .drag-handle").css("margin-right", "8px");
      let sidebar_section = item.is_public ? $sidebar[1] : $sidebar[0];
      if (!item.parent) {
        !item.is_public && $sidebar.first().removeClass("hidden");
        $sidebar_item.appendTo(sidebar_section);
      } else {
        let $item_container = $(sidebar_section).find(`[item-name="${item.parent}"]`);
        let $child_section = $item_container.find(".sidebar-child-item");
        let $drop_icon = $item_container.find(".drop-icon");
        if (!$child_section[0]) {
          $child_section = $(`<div class="sidebar-child-item hidden nested-container"></div>`).appendTo($item_container);
          $drop_icon.toggleClass("hidden");
        }
        $sidebar_item.appendTo($child_section);
        $child_section.removeClass("hidden");
        $item_container.find(".drop-icon.hidden").removeClass("hidden");
        $item_container.find(".drop-icon use").attr("href", "#icon-small-up");
      }
      let section = item.is_public ? "public" : "private";
      if (this.sidebar_items && this.sidebar_items[section] && !this.sidebar_items[section][item.title]) {
        this.sidebar_items[section][item.title] = $sidebar_item;
      }
    }
    initialize_editorjs(blocks) {
      this.tools = {
        header: {
          class: this.blocks["header"],
          inlineToolbar: ["HeaderSize", "bold", "italic", "link"],
          config: {
            default_size: 4
          }
        },
        paragraph: {
          class: this.blocks["paragraph"],
          inlineToolbar: ["HeaderSize", "bold", "italic", "link"],
          config: {
            placeholder: "Choose a block or continue typing"
          }
        },
        chart: {
          class: this.blocks["chart"],
          config: {
            page_data: this.page_data || []
          }
        },
        card: {
          class: this.blocks["card"],
          config: {
            page_data: this.page_data || []
          }
        },
        shortcut: {
          class: this.blocks["shortcut"],
          config: {
            page_data: this.page_data || []
          }
        },
        onboarding: {
          class: this.blocks["onboarding"],
          config: {
            page_data: this.page_data || []
          }
        },
        spacer: this.blocks["spacer"],
        HeaderSize: frappe.workspace_block.tunes["header_size"]
      };
      this.editor = new import_editorjs.default({
        data: {
          blocks: blocks || []
        },
        tools: this.tools,
        autofocus: false,
        readOnly: true,
        logLevel: "ERROR"
      });
    }
    save_page(page) {
      let me = this;
      this.current_page = { name: page.title, public: page.public };
      return this.editor.save().then((outputData) => {
        let new_widgets = {};
        outputData.blocks.forEach((item) => {
          if (item.data.new) {
            if (!new_widgets[item.type]) {
              new_widgets[item.type] = [];
            }
            new_widgets[item.type].push(item.data.new);
            delete item.data["new"];
          }
        });
        let blocks = outputData.blocks.filter((item) => item.type != "card" || item.data.card_name !== "Custom Documents" && item.data.card_name !== "Custom Reports");
        if (page.content == JSON.stringify(blocks) && Object.keys(new_widgets).length === 0) {
          this.setup_customization_buttons(page);
          frappe.show_alert({ message: __("No changes made on the page"), indicator: "warning" });
          return false;
        }
        this.create_page_skeleton();
        page.content = JSON.stringify(blocks);
        frappe.call({
          method: "frappe.desk.doctype.workspace.workspace.save_page",
          args: {
            title: page.title,
            public: page.public || 0,
            new_widgets,
            blocks: JSON.stringify(blocks)
          },
          callback: function(res) {
            if (res.message) {
              me.discard = true;
              me.update_cached_values(page, page);
              me.reload();
              frappe.show_alert({ message: __("Page Saved Successfully"), indicator: "green" });
            }
          }
        });
        return true;
      }).catch((error) => {
        error;
      });
    }
    reload() {
      this.sorted_public_items = [];
      this.sorted_private_items = [];
      this.setup_pages(true);
      this.discard = false;
      this.undo.readOnly = true;
    }
    create_page_skeleton() {
      if ($(".layout-main-section").find(".workspace-skeleton").length)
        return;
      $(".layout-main-section").prepend(frappe.render_template("workspace_loading_skeleton"));
      $(".layout-main-section").find(".codex-editor").addClass("hidden");
    }
    remove_page_skeleton() {
      $(".layout-main-section").find(".codex-editor").removeClass("hidden");
      $(".layout-main-section").find(".workspace-skeleton").remove();
    }
    create_sidebar_skeleton() {
      if ($(".list-sidebar").find(".workspace-sidebar-skeleton").length)
        return;
      $(".list-sidebar").prepend(frappe.render_template("workspace_sidebar_loading_skeleton"));
      $(".desk-sidebar").addClass("hidden");
    }
    remove_sidebar_skeleton() {
      $(".desk-sidebar").removeClass("hidden");
      $(".list-sidebar").find(".workspace-sidebar-skeleton").remove();
    }
  };

  // frappe/public/js/frappe/widgets/widget_dialog.js
  var WidgetDialog = class {
    constructor(opts) {
      Object.assign(this, opts);
      this.editing = Boolean(this.values && Object.keys(this.values).length);
    }
    make() {
      this.make_dialog();
      this.setup_dialog_events();
      this.dialog.show();
      window.cur_dialog = this.dialog;
      this.editing && this.set_default_values();
    }
    make_dialog() {
      this.dialog = new frappe.ui.Dialog({
        title: this.get_title(),
        fields: this.get_fields(),
        primary_action: (data) => {
          data = this.process_data(data);
          if (!this.editing && !data.name) {
            data.name = `${this.type}-${this.label}-${frappe.utils.get_random(20)}`;
          }
          this.dialog.hide();
          this.primary_action(data);
        },
        primary_action_label: this.primary_action_label || __("Add")
      });
    }
    get_title() {
      let action = this.editing ? "Edit" : "Add";
      let label = action = action + " " + frappe.model.unscrub(this.type);
      return __(label);
    }
    get_fields() {
    }
    set_default_values() {
      return this.dialog.set_values(this.values);
    }
    process_data(data) {
      return data;
    }
    setup_dialog_events() {
    }
    hide_field(fieldname) {
      this.dialog.set_df_property(fieldname, "hidden", true);
    }
    show_field(fieldname) {
      this.dialog.set_df_property(fieldname, "hidden", false);
    }
    setup_filter(doctype2) {
      if (this.filter_group) {
        this.filter_group.wrapper.empty();
        delete this.filter_group;
      }
      let $loading = this.dialog.get_field("filter_area_loading").$wrapper;
      $(`<span class="text-muted">${__("Loading Filters...")}</span>`).appendTo($loading);
      this.filters = [];
      if (this.values && this.values.stats_filter) {
        const filters_json = new Function(`return ${this.values.stats_filter}`)();
        this.filters = Object.keys(filters_json).map((filter) => {
          let val2 = filters_json[filter];
          return [this.values.link_to, filter, val2[0], val2[1], false];
        });
      }
      this.filter_group = new frappe.ui.FilterGroup({
        parent: this.dialog.get_field("filter_area").$wrapper,
        doctype: doctype2,
        on_change: () => {
        }
      });
      frappe.model.with_doctype(doctype2, () => {
        this.filter_group.add_filters_to_filter_group(this.filters);
        this.hide_field("filter_area_loading");
        this.show_field("filter_area");
      });
    }
  };
  var ChartDialog = class extends WidgetDialog {
    constructor(opts) {
      super(opts);
    }
    get_fields() {
      return [
        {
          fieldtype: "Link",
          fieldname: "chart_name",
          label: "Chart Name",
          options: "Dashboard Chart",
          reqd: 1
        },
        {
          fieldtype: "Data",
          fieldname: "label",
          label: "Label"
        }
      ];
    }
    process_data(data) {
      data.label = data.label ? data.label : data.chart_name;
      return data;
    }
  };
  var OnboardingDialog = class extends WidgetDialog {
    constructor(opts) {
      super(opts);
    }
    get_fields() {
      return [
        {
          fieldtype: "Link",
          fieldname: "onboarding_name",
          label: "Onboarding Name",
          options: "Module Onboarding",
          reqd: 1
        }
      ];
    }
  };
  var CardDialog = class extends WidgetDialog {
    constructor(opts) {
      super(opts);
    }
    get_fields() {
      let me = this;
      return [
        {
          fieldtype: "Data",
          fieldname: "label",
          label: "Label"
        },
        {
          fieldname: "links",
          fieldtype: "Table",
          label: __("Card Links"),
          editable_grid: 1,
          data: me.values ? JSON.parse(me.values.links) : [],
          get_data: () => {
            return me.values ? JSON.parse(me.values.links) : [];
          },
          fields: [
            {
              fieldname: "label",
              fieldtype: "Data",
              in_list_view: 1,
              label: "Label"
            },
            {
              fieldname: "icon",
              fieldtype: "Icon",
              label: "Icon"
            },
            {
              fieldname: "link_type",
              fieldtype: "Select",
              in_list_view: 1,
              label: "Link Type",
              reqd: 1,
              options: ["DocType", "Page", "Report"]
            },
            {
              fieldname: "link_to",
              fieldtype: "Dynamic Link",
              in_list_view: 1,
              label: "Link To",
              reqd: 1,
              get_options: (df) => {
                return df.doc.link_type;
              }
            },
            {
              fieldname: "column_break_7",
              fieldtype: "Column Break"
            },
            {
              fieldname: "dependencies",
              fieldtype: "Data",
              label: "Dependencies"
            },
            {
              fieldname: "only_for",
              fieldtype: "Link",
              label: "Only for ",
              options: "Country"
            },
            {
              default: "0",
              fieldname: "onboard",
              fieldtype: "Check",
              label: "Onboard"
            },
            {
              default: "0",
              fieldname: "is_query_report",
              fieldtype: "Check",
              label: "Is Query Report"
            }
          ]
        }
      ];
    }
    process_data(data) {
      data.links.map((item, idx) => {
        let message2 = "";
        let row = idx + 1;
        if (!item.link_type) {
          message2 = "Following fields have missing values: <br><br><ul>";
          message2 += `<li>Link Type in Row ${row}</li>`;
        }
        if (!item.link_to) {
          message2 += `<li>Link To in Row ${row}</li>`;
        }
        if (message2) {
          message2 += "</ul>";
          frappe.throw({
            message: __(message2),
            title: __("Missing Values Required"),
            indicator: "orange"
          });
        }
        item.label = item.label ? item.label : item.link_to;
      });
      data.label = data.label ? data.label : data.chart_name;
      return data;
    }
  };
  var ShortcutDialog = class extends WidgetDialog {
    constructor(opts) {
      super(opts);
    }
    hide_filters() {
      this.hide_field("count_section_break");
      this.hide_field("filters_section_break");
    }
    show_filters() {
      this.show_field("count_section_break");
      this.show_field("filters_section_break");
    }
    get_fields() {
      return [
        {
          fieldtype: "Select",
          fieldname: "type",
          label: "Type",
          reqd: 1,
          options: "DocType\nReport\nPage\nDashboard",
          onchange: () => {
            if (this.dialog.get_value("type") == "DocType") {
              this.dialog.fields_dict.link_to.get_query = () => {
                return {
                  query: "frappe.core.report.permitted_documents_for_user.permitted_documents_for_user.query_doctypes",
                  filters: {
                    user: frappe.session.user
                  }
                };
              };
            } else {
              this.dialog.fields_dict.link_to.get_query = null;
            }
          }
        },
        {
          fieldtype: "Data",
          fieldname: "label",
          label: "Label"
        },
        {
          fieldtype: "Column Break",
          fieldname: "column_break_4"
        },
        {
          fieldtype: "Dynamic Link",
          fieldname: "link_to",
          label: "Link To",
          reqd: 1,
          options: "type",
          onchange: () => {
            if (this.dialog.get_value("type") == "DocType") {
              let doctype2 = this.dialog.get_value("link_to");
              if (doctype2 && frappe.boot.single_types.includes(doctype2)) {
                this.hide_filters();
              } else if (doctype2) {
                this.setup_filter(doctype2);
                this.show_filters();
              }
              const views = ["List", "Report Builder", "Dashboard", "New"];
              if (frappe.boot.treeviews.includes(doctype2))
                views.push("Tree");
              if (frappe.boot.calendars.includes(doctype2))
                views.push("Calendar");
              this.dialog.set_df_property("doc_view", "options", views.join("\n"));
            } else {
              this.hide_filters();
            }
          }
        },
        {
          fieldtype: "Select",
          fieldname: "doc_view",
          label: "DocType View",
          options: "List\nReport Builder\nDashboard\nTree\nNew\nCalendar",
          description: __("Which view of the associated DocType should this shortcut take you to?"),
          default: "List",
          depends_on: (state) => {
            if (this.dialog) {
              let doctype2 = this.dialog.get_value("link_to");
              let is_single = frappe.boot.single_types.includes(doctype2);
              return state.type == "DocType" && !is_single;
            }
            return false;
          }
        },
        {
          fieldtype: "Section Break",
          fieldname: "filters_section_break",
          label: __("Count Filter"),
          hidden: 1
        },
        {
          fieldtype: "HTML",
          fieldname: "filter_area_loading"
        },
        {
          fieldtype: "HTML",
          fieldname: "filter_area",
          hidden: 1
        },
        {
          fieldtype: "Section Break",
          fieldname: "count_section_break",
          label: __("Count Customizations"),
          hidden: 1
        },
        {
          fieldtype: "Select",
          fieldname: "color",
          label: __("Color"),
          options: ["Grey", "Green", "Red", "Orange", "Pink", "Yellow", "Blue", "Cyan"],
          default: "Grey",
          input_class: "color-select",
          onchange: () => {
            let color = this.dialog.fields_dict.color.value.toLowerCase();
            let $select = this.dialog.fields_dict.color.$input;
            if (!$select.parent().find(".color-box").get(0)) {
              $(`<div class="color-box"></div>`).insertBefore($select.get(0));
            }
            $select.parent().find(".color-box").get(0).style.backgroundColor = `var(--text-on-${color})`;
          }
        },
        {
          fieldtype: "Column Break",
          fieldname: "column_break_3"
        },
        {
          fieldtype: "Data",
          fieldname: "format",
          label: __("Format"),
          description: __("For Example: {} Open")
        }
      ];
    }
    set_default_values() {
      super.set_default_values().then(() => {
        this.dialog.fields_dict.link_to.df.onchange();
      });
    }
    process_data(data) {
      if (this.dialog.get_value("type") == "DocType" && this.filter_group) {
        let filters2 = this.filter_group.get_filters();
        let stats_filter = null;
        if (filters2.length) {
          stats_filter = {};
          filters2.forEach((arr) => {
            stats_filter[arr[1]] = [arr[2], arr[3]];
          });
          stats_filter = JSON.stringify(stats_filter);
        }
        data.stats_filter = stats_filter;
      }
      data.label = data.label ? data.label : frappe.model.unscrub(data.link_to);
      return data;
    }
  };
  var NumberCardDialog = class extends WidgetDialog {
    constructor(opts) {
      super(opts);
    }
    get_fields() {
      let fields;
      fields = [
        {
          fieldtype: "Select",
          label: __("Choose Existing Card or create New Card"),
          fieldname: "new_or_existing",
          options: ["New Card", "Existing Card"]
        },
        {
          fieldtype: "Link",
          fieldname: "card",
          label: __("Number Cards"),
          options: "Number Card",
          get_query: () => {
            return {
              "query": "frappe.desk.doctype.number_card.number_card.get_cards_for_user",
              filters: {
                document_type: this.document_type
              }
            };
          },
          depends_on: 'eval: doc.new_or_existing == "Existing Card"'
        },
        {
          fieldtype: "Section Break",
          fieldname: "sb_1",
          depends_on: 'eval: doc.new_or_existing == "New Card"'
        },
        {
          label: __("Label"),
          fieldname: "label",
          fieldtype: "Data",
          mandatory_depends_on: 'eval: doc.new_or_existing == "New Card"'
        },
        {
          label: __("Doctype"),
          fieldname: "document_type",
          fieldtype: "Link",
          options: "DocType",
          onchange: () => {
            this.document_type = this.dialog.get_value("document_type");
            this.set_aggregate_function_fields(this.dialog.get_values());
            this.setup_filter(this.document_type);
          },
          hidden: 1
        },
        {
          label: __("Color"),
          fieldname: "color",
          fieldtype: "Color"
        },
        {
          fieldtype: "Column Break",
          fieldname: "cb_1"
        },
        {
          label: __("Function"),
          fieldname: "function",
          fieldtype: "Select",
          options: ["Count", "Sum", "Average", "Minimum", "Maximum"],
          mandatory_depends_on: 'eval: doc.new_or_existing == "New Card"'
        },
        {
          label: __("Function Based On"),
          fieldname: "aggregate_function_based_on",
          fieldtype: "Select",
          depends_on: "eval: doc.function !== 'Count'",
          mandatory_depends_on: 'eval: doc.function !== "Count" && doc.new_or_existing == "New Card"'
        },
        {
          fieldtype: "Section Break",
          fieldname: "sb_1",
          label: __("Add Filters"),
          depends_on: 'eval: doc.new_or_existing == "New Card"'
        },
        {
          fieldtype: "HTML",
          fieldname: "filter_area_loading"
        },
        {
          fieldtype: "HTML",
          fieldname: "filter_area",
          hidden: 1
        },
        {
          fieldtype: "Section Break",
          fieldname: "sb_1"
        }
      ];
      return fields;
    }
    setup_dialog_events() {
      if (!this.document_type) {
        if (this.default_values && this.default_values["doctype"]) {
          this.document_type = this.default_values["doctype"];
          this.setup_filter(this.default_values["doctype"]);
          this.set_aggregate_function_fields();
        } else {
          this.show_field("document_type");
        }
      }
    }
    set_aggregate_function_fields() {
      let aggregate_function_fields = [];
      if (this.document_type && frappe.get_meta(this.document_type)) {
        frappe.get_meta(this.document_type).fields.map((df) => {
          if (frappe.model.numeric_fieldtypes.includes(df.fieldtype)) {
            if (df.fieldtype == "Currency") {
              if (!df.options || df.options !== "Company:company:default_currency") {
                return;
              }
            }
            aggregate_function_fields.push({ label: df.label, value: df.fieldname });
          }
        });
      }
      this.dialog.set_df_property("aggregate_function_based_on", "options", aggregate_function_fields);
    }
    process_data(data) {
      if (data.new_or_existing == "Existing Card") {
        data.name = data.card;
      }
      data.stats_filter = this.filter_group && JSON.stringify(this.filter_group.get_filters());
      data.document_type = this.document_type;
      return data;
    }
  };
  function get_dialog_constructor(type) {
    const widget_map = {
      chart: ChartDialog,
      shortcut: ShortcutDialog,
      number_card: NumberCardDialog,
      links: CardDialog,
      onboarding: OnboardingDialog
    };
    return widget_map[type] || WidgetDialog;
  }

  // frappe/public/js/frappe/views/workspace/blocks/block.js
  var Block = class {
    constructor(opts) {
      Object.assign(this, opts);
    }
    make(block, block_name, widget_type = block) {
      let block_data = this.config.page_data[block + "s"].items.find((obj) => {
        return frappe.utils.unescape_html(obj.label) == frappe.utils.unescape_html(block_name);
      });
      if (!block_data)
        return false;
      this.wrapper.innerHTML = "";
      block_data.in_customize_mode = !this.readOnly;
      this.block_widget = new frappe.widget.SingleWidgetGroup({
        container: this.wrapper,
        type: widget_type,
        class_name: block == "chart" ? "widget-charts" : "",
        options: this.options,
        widgets: block_data,
        api: this.api,
        block: this.block
      });
      this.wrapper.setAttribute(block + "_name", block_name);
      if (!this.readOnly) {
        this.block_widget.customize();
      }
      return true;
    }
    rendered(wrapper) {
      if (wrapper)
        this.wrapper = wrapper;
      !this.readOnly && this.resizer();
      let block = this.wrapper.closest(".ce-block");
      this.set_col_class(block, this.get_col());
    }
    resizer() {
      this.wrapper.className = this.wrapper.className + " resizable";
      var resizer = document.createElement("div");
      resizer.className = "resizer";
      this.wrapper.parentElement.appendChild(resizer);
      resizer.addEventListener("mousedown", init_drag, false);
      let me = this;
      var startX, startWidth;
      function init_drag(e2) {
        startX = e2.clientX;
        startWidth = this.parentElement.offsetWidth;
        document.documentElement.addEventListener("mousemove", do_drag, false);
        document.documentElement.addEventListener("mouseup", stop_drag, false);
      }
      function do_drag(e2) {
        $(this).css("cursor", "col-resize");
        $(".widget").css("pointer-events", "none");
        $(me.wrapper.parentElement).find(".resizer").css("border-right", "3px solid var(--gray-400)");
        un_focus();
        if (startWidth + e2.clientX - startX - startWidth > 60) {
          startX = e2.clientX;
          me.increase_width();
        } else if (startWidth + e2.clientX - startX - startWidth < -60) {
          startX = e2.clientX;
          me.decrease_width();
        }
      }
      function un_focus() {
        if (document.selection) {
          document.selection.empty();
        } else {
          window.getSelection().removeAllRanges();
        }
      }
      function stop_drag() {
        $(this).css("cursor", "default");
        $(".widget").css("pointer-events", "auto");
        $(me.wrapper.parentElement).find(".resizer").css("border-right", "0px solid transparent");
        document.documentElement.removeEventListener("mousemove", do_drag, false);
        document.documentElement.removeEventListener("mouseup", stop_drag, false);
      }
    }
    new(block, widget_type = block) {
      let me = this;
      const dialog_class = get_dialog_constructor(widget_type);
      let block_name = block + "_name";
      this.dialog = new dialog_class({
        label: this.label,
        type: widget_type,
        primary_action: (widget) => {
          widget.in_customize_mode = 1;
          this.block_widget = frappe.widget.make_widget(__spreadProps(__spreadValues({}, widget), {
            widget_type,
            container: this.wrapper,
            options: __spreadProps(__spreadValues({}, this.options), {
              on_delete: () => this.api.blocks.delete(),
              on_edit: () => this.on_edit(this.block_widget)
            })
          }));
          this.block_widget.customize(this.options);
          this.wrapper.setAttribute(block_name, this.block_widget.label);
          $(this.wrapper).find(".widget").addClass(`${widget_type} edit-mode`);
          this.new_block_widget = this.block_widget.get_config();
          this.add_settings_button();
        }
      });
      if (!this.readOnly && this.data && !this.data[block_name]) {
        this.dialog.make();
        this.dialog.dialog.get_close_btn().click(() => {
          me.wrapper.closest(".ce-block").remove();
        });
      }
    }
    on_edit(block_obj) {
      let block_name = block_obj.edit_dialog.type + "_name";
      if (block_obj.edit_dialog.type == "links") {
        block_name = "card_name";
      }
      let block = block_obj.get_config();
      this.block_widget.widgets = block;
      this.wrapper.setAttribute(block_name, block.label);
      this.new_block_widget = block_obj.get_config();
    }
    add_new_block_button() {
      let $new_button = $(`
			<div class="new-block-button">${frappe.utils.icon("add-round", "lg")}</div>
		`);
      $new_button.appendTo(this.wrapper);
      $new_button.click((event2) => {
        event2.stopPropagation();
        let index = this.api.blocks.getCurrentBlockIndex() + 1;
        this.api.blocks.insert("paragraph", {}, {}, index);
        this.api.caret.setToBlock(index);
      });
    }
    add_settings_button() {
      let me = this;
      this.dropdown_list = [
        {
          label: "Delete",
          title: "Delete Block",
          icon: frappe.utils.icon("delete-active", "sm"),
          action: () => this.api.blocks.delete()
        },
        {
          label: "Expand",
          title: "Expand Block",
          icon: frappe.utils.icon("expand-alt", "sm"),
          action: () => this.increase_width()
        },
        {
          label: "Shrink",
          title: "Shrink Block",
          icon: frappe.utils.icon("shrink", "sm"),
          action: () => this.decrease_width()
        },
        {
          label: "Move Up",
          title: "Move Up",
          icon: frappe.utils.icon("up-arrow", "sm"),
          action: () => this.move_block("up")
        },
        {
          label: "Move Down",
          title: "Move Down",
          icon: frappe.utils.icon("down-arrow", "sm"),
          action: () => this.move_block("down")
        }
      ];
      let $widget_control = $(this.wrapper).find(".widget-control");
      let $button = $(`
			<div class="dropdown-btn">
				<button class="btn btn-secondary btn-xs setting-btn" title="${__("Setting")}">
					${frappe.utils.icon("dot-horizontal", "xs")}
				</button>
				<div class="dropdown-list hidden"></div>
			</div>
		`);
      let dropdown_item = function(label, title, icon, action) {
        let html = $(`
				<div class="dropdown-item" title="${title}">
					<span class="dropdown-item-icon">${icon}</span>
					<span class="dropdown-item-label">${label}</span>
				</div>
			`);
        html.click((event2) => {
          event2.stopPropagation();
          action && action();
        });
        return html;
      };
      $button.click((event2) => {
        event2.stopPropagation();
        $button.find(".dropdown-list").toggleClass("hidden");
      });
      $(document).click(() => {
        $button.find(".dropdown-list").addClass("hidden");
      });
      $widget_control.prepend($button);
      this.dropdown_list.forEach((item) => {
        if ((item.label == "Expand" || item.label == "Shrink") && me.options && !me.options.allow_resize) {
          return;
        }
        $button.find(".dropdown-list").append(dropdown_item(item.label, item.title, item.icon, item.action));
      });
    }
    get_col() {
      let col = this.col || 12;
      let class_name = "col-xs-12";
      let wrapper = this.wrapper.closest(".ce-block");
      const col_class = new RegExp(/\bcol-.+?\b/, "g");
      if (wrapper && wrapper.className.match(col_class)) {
        wrapper.classList.forEach(function(cn) {
          if (cn.match(col_class)) {
            class_name = cn;
          }
        });
        let parts = class_name.split("-");
        col = parseInt(parts[2]);
      }
      return col;
    }
    decrease_width() {
      this.update_width("decrease");
    }
    increase_width() {
      this.update_width("increase");
    }
    update_width(action) {
      let min_width = this.options && this.options.min_width || 3;
      const current_block_index = this.api.blocks.getCurrentBlockIndex();
      if (current_block_index < 0) {
        return;
      }
      let current_block = this.api.blocks.getBlockByIndex(current_block_index);
      if (!current_block) {
        return;
      }
      const current_block_element = current_block.holder;
      let className = "col-xs-12";
      const colClass = new RegExp(/\bcol-.+?\b/, "g");
      if (current_block_element.className.match(colClass)) {
        current_block_element.classList.forEach((cn) => {
          if (cn.match(colClass)) {
            className = cn;
          }
        });
        let parts = className.split("-");
        let width = parseInt(parts[2]);
        let condition = true;
        if (action == "increase") {
          condition = width <= 11;
          width = width + 1;
        } else if (action == "decrease") {
          condition = width > min_width;
          width = width - 1;
        }
        if (condition) {
          this.set_col_class(current_block_element, width);
        }
      }
    }
    set_col_class(node, width) {
      let classes = $.grep(node.classList, function(item) {
        return item.indexOf("col-") !== 0;
      });
      node.classList = "";
      classes.forEach((cl) => {
        node.classList.add(cl);
      });
      let col = "col-xs-12";
      if (width <= 12 && width >= 7) {
        col = "col-xs-" + width;
      } else if (width == 6 || width == 5) {
        node.classList.add("col-xs-12");
        col = "col-sm-" + width;
      } else if (width == 4) {
        node.classList.add("col-xs-12");
        node.classList.add("col-sm-6");
        col = "col-md-" + width;
      } else if (width == 3) {
        node.classList.add("col-xs-12");
        node.classList.add("col-sm-6");
        node.classList.add("col-md-4");
        col = "col-lg-" + width;
      }
      node.classList.add(col);
    }
    move_block(direction) {
      let current_index = this.api.blocks.getCurrentBlockIndex();
      let new_index = current_index + (direction == "down" ? 1 : -1);
      this.api.blocks.move(new_index, current_index);
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/header.js
  var Header = class extends Block {
    constructor({ data, config, api, readOnly }) {
      super({ config, api, readOnly });
      this._settings = this.config;
      this._data = this.normalizeData(data);
      this._element = this.getTag();
      this.data = data;
      this.col = this.data.col ? this.data.col : "12";
    }
    normalizeData(data) {
      const newData = {};
      if (typeof data !== "object") {
        data = {};
      }
      newData.text = data.text || "";
      newData.col = parseInt(data.col) || 12;
      return newData;
    }
    render() {
      this.wrapper = document.createElement("div");
      if (!this.readOnly) {
        let $widget_head = $(`<div class="widget-head"></div>`);
        let $widget_control = $(`<div class="widget-control"></div>`);
        $widget_head[0].appendChild(this._element);
        $widget_control.appendTo($widget_head);
        $widget_head.appendTo(this.wrapper);
        this.wrapper.classList.add("widget", "header", "edit-mode");
        this.add_settings_button();
        this.add_new_block_button();
        frappe.utils.add_custom_button(frappe.utils.icon("drag", "xs"), null, "drag-handle", `${__("Drag")}`, null, $widget_control);
        return this.wrapper;
      }
      return this._element;
    }
    merge(data) {
      const newData = {
        text: this.data.text + data.text
      };
      this.data = newData;
    }
    validate(blockData) {
      return blockData.text.trim() !== "";
    }
    save() {
      this.wrapper = this._element;
      return {
        text: this.wrapper.innerHTML.replace(/&nbsp;/gi, ""),
        col: this.get_col()
      };
    }
    rendered() {
      super.rendered(this._element);
    }
    static get sanitize() {
      return {
        level: false,
        text: {
          br: true,
          b: true,
          i: true,
          a: true,
          span: true
        }
      };
    }
    static get isReadOnlySupported() {
      return true;
    }
    get data() {
      this._data.text = this._element.innerHTML;
      return this._data;
    }
    set data(data) {
      this._data = this.normalizeData(data);
      if (data.text !== void 0) {
        let text = this._data.text || "";
        const contains_html_tag = /<[a-z][\s\S]*>/i.test(text);
        this._element.innerHTML = contains_html_tag ? text : `<span class="h${this._settings.default_size}">${text}</span>`;
      }
      if (!this.readOnly && this.wrapper) {
        this.wrapper.classList.add("widget", "header");
      }
    }
    getTag() {
      const tag = document.createElement("DIV");
      let text = this._data.text || "&nbsp";
      tag.innerHTML = `<span class="h${this._settings.default_size}"><b>${text}</b></span>`;
      tag.classList.add("ce-header");
      if (!this.readOnly) {
        tag.contentEditable = true;
      }
      tag.dataset.placeholder = this.api.i18n.t(this._settings.placeholder || "");
      return tag;
    }
    static get toolbox() {
      return {
        title: "Heading",
        icon: frappe.utils.icon("header", "sm")
      };
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/paragraph.js
  var Paragraph = class extends Block {
    static get DEFAULT_PLACEHOLDER() {
      return "";
    }
    constructor({ data, config, api, readOnly }) {
      super({ config, api, readOnly });
      this._CSS = {
        block: this.api.styles.block,
        wrapper: "ce-paragraph"
      };
      if (!this.readOnly) {
        this.onKeyUp = this.onKeyUp.bind(this);
      }
      this._placeholder = this.config.placeholder ? this.config.placeholder : Paragraph.DEFAULT_PLACEHOLDER;
      this._data = {};
      this._element = this.drawView();
      this._preserveBlank = this.config.preserveBlank !== void 0 ? this.config.preserveBlank : false;
      this.data = data;
      this.col = this.data.col ? this.data.col : "12";
    }
    onKeyUp(e2) {
      if (!this.wrapper)
        return;
      this.show_hide_block_list(true);
      if (e2.code !== "Backspace" && e2.code !== "Delete") {
        return;
      }
      const { textContent } = this._element;
      if (textContent === "") {
        this.show_hide_block_list();
        this._element.innerHTML = "";
      }
    }
    show_hide_block_list(hide) {
      let $wrapper = $(this.wrapper).hasClass("ce-paragraph") ? $(this.wrapper.parentElement) : $(this.wrapper);
      let $block_list_container = $wrapper.find(".block-list-container.dropdown-list");
      $block_list_container.removeClass("hidden");
      hide && $block_list_container.addClass("hidden");
    }
    drawView() {
      let div = document.createElement("DIV");
      div.classList.add(this._CSS.wrapper, this._CSS.block, "widget");
      div.contentEditable = false;
      if (!this.readOnly) {
        div.contentEditable = true;
        div.addEventListener("focus", () => {
          const { textContent } = this._element;
          if (textContent !== "")
            return;
          this.show_hide_block_list();
        });
        div.addEventListener("blur", () => {
          !this.over_block_list_item && this.show_hide_block_list(true);
        });
        div.dataset.placeholder = this.api.i18n.t(this._placeholder);
        div.addEventListener("keyup", this.onKeyUp);
      }
      return div;
    }
    open_block_list() {
      let dropdown_title = "Templates";
      let $block_list_container = $(`
			<div class="block-list-container dropdown-list">
				<div class="dropdown-title">${dropdown_title.toUpperCase()}</div>
			</div>
		`);
      let all_blocks = frappe.workspace_block.blocks;
      Object.keys(all_blocks).forEach((key2) => {
        let $block_list_item = $(`
				<div class="block-list-item dropdown-item">
					<span class="dropdown-item-icon">${all_blocks[key2].toolbox.icon}</span>
					<span class="dropdown-item-label">${__(all_blocks[key2].toolbox.title)}</span>
				</div>
			`);
        $block_list_item.click((event2) => {
          event2.stopPropagation();
          const index = this.api.blocks.getCurrentBlockIndex();
          this.api.blocks.delete();
          this.api.blocks.insert(key2, {}, {}, index);
          this.api.caret.setToBlock(index);
        });
        $block_list_item.mouseenter(() => {
          this.over_block_list_item = true;
        }).mouseleave(() => {
          this.over_block_list_item = false;
        });
        $block_list_container.append($block_list_item);
      });
      $block_list_container.addClass("hidden");
      $block_list_container.appendTo(this.wrapper);
    }
    render() {
      this.wrapper = document.createElement("div");
      if (!this.readOnly) {
        let $para_control = $(`<div class="widget-control paragraph-control"></div>`);
        this.wrapper.appendChild(this._element);
        this._element.classList.remove("widget");
        $para_control.appendTo(this.wrapper);
        this.wrapper.classList.add("widget", "paragraph", "edit-mode");
        this.open_block_list();
        this.add_new_block_button();
        this.add_settings_button();
        frappe.utils.add_custom_button(frappe.utils.icon("drag", "xs"), null, "drag-handle", `${__("Drag")}`, null, $para_control);
        return this.wrapper;
      }
      return this._element;
    }
    merge(data) {
      let newData = {
        text: this.data.text + data.text
      };
      this.data = newData;
    }
    validate(savedData) {
      if (savedData.text.trim() === "" && !this._preserveBlank) {
        return false;
      }
      return true;
    }
    save() {
      this.wrapper = this._element;
      return {
        text: this.wrapper.innerHTML,
        col: this.get_col()
      };
    }
    rendered() {
      super.rendered(this._element);
    }
    onPaste(event2) {
      const data = {
        text: event2.detail.data.innerHTML
      };
      this.data = data;
    }
    static get sanitize() {
      return {
        text: {
          br: true,
          b: true,
          i: true,
          a: true,
          span: true
        }
      };
    }
    static get isReadOnlySupported() {
      return true;
    }
    get data() {
      let text = this._element.innerHTML;
      this._data.text = text;
      return this._data;
    }
    set data(data) {
      this._data = data || {};
      this._element.innerHTML = __(this._data.text) || "";
    }
    static get pasteConfig() {
      return {
        tags: ["P"]
      };
    }
    static get toolbox() {
      return {
        title: "Text",
        icon: frappe.utils.icon("text", "sm")
      };
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/card.js
  var Card = class extends Block {
    static get toolbox() {
      return {
        title: "Card",
        icon: frappe.utils.icon("card", "sm")
      };
    }
    static get isReadOnlySupported() {
      return true;
    }
    constructor({ data, api, config, readOnly, block }) {
      super({ data, api, config, readOnly, block });
      this.sections = {};
      this.col = this.data.col ? this.data.col : "4";
      this.allow_customization = !this.readOnly;
      this.options = {
        allow_sorting: this.allow_customization,
        allow_create: this.allow_customization,
        allow_delete: this.allow_customization,
        allow_hiding: false,
        allow_edit: true,
        allow_resize: true
      };
    }
    render() {
      this.wrapper = document.createElement("div");
      this.new("card", "links");
      if (this.data && this.data.card_name) {
        let has_data = this.make("card", __(this.data.card_name), "links");
        if (!has_data)
          return;
      }
      if (!this.readOnly) {
        $(this.wrapper).find(".widget").addClass("links edit-mode");
        this.add_settings_button();
        this.add_new_block_button();
      }
      return this.wrapper;
    }
    validate(savedData) {
      if (!savedData.card_name) {
        return false;
      }
      return true;
    }
    save() {
      return {
        card_name: this.wrapper.getAttribute("card_name"),
        col: this.get_col(),
        new: this.new_block_widget
      };
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/chart.js
  var Chart = class extends Block {
    static get toolbox() {
      return {
        title: "Chart",
        icon: frappe.utils.icon("chart", "sm")
      };
    }
    static get isReadOnlySupported() {
      return true;
    }
    constructor({ data, api, config, readOnly, block }) {
      super({ data, api, config, readOnly, block });
      this.col = this.data.col ? this.data.col : "12";
      this.allow_customization = !this.readOnly;
      this.options = {
        allow_sorting: this.allow_customization,
        allow_create: this.allow_customization,
        allow_delete: this.allow_customization,
        allow_hiding: false,
        allow_edit: true,
        allow_resize: true,
        min_width: 6,
        max_widget_count: 2
      };
    }
    render() {
      this.wrapper = document.createElement("div");
      this.new("chart");
      if (this.data && this.data.chart_name) {
        let has_data = this.make("chart", __(this.data.chart_name));
        if (!has_data)
          return;
      }
      if (!this.readOnly) {
        $(this.wrapper).find(".widget").addClass("chart edit-mode");
        this.add_settings_button();
        this.add_new_block_button();
      }
      return this.wrapper;
    }
    validate(savedData) {
      if (!savedData.chart_name) {
        return false;
      }
      return true;
    }
    save() {
      return {
        chart_name: this.wrapper.getAttribute("chart_name"),
        col: this.get_col(),
        new: this.new_block_widget
      };
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/shortcut.js
  var Shortcut = class extends Block {
    static get toolbox() {
      return {
        title: "Shortcut",
        icon: frappe.utils.icon("shortcut", "sm")
      };
    }
    static get isReadOnlySupported() {
      return true;
    }
    constructor({ data, api, config, readOnly, block }) {
      super({ data, api, config, readOnly, block });
      this.col = this.data.col ? this.data.col : "3";
      this.allow_customization = !this.readOnly;
      this.options = {
        allow_sorting: this.allow_customization,
        allow_create: this.allow_customization,
        allow_delete: this.allow_customization,
        allow_hiding: false,
        allow_edit: true,
        allow_resize: true
      };
    }
    rendered() {
      super.rendered();
      this.remove_last_divider();
      $(window).resize(() => {
        this.remove_last_divider();
      });
    }
    remove_last_divider() {
      let block = this.wrapper.closest(".ce-block");
      let container_offset_right = $(".layout-main-section")[0].offsetWidth;
      let block_offset_right = block.offsetLeft + block.offsetWidth;
      if (container_offset_right - block_offset_right <= 110) {
        $(block).find(".divider").addClass("hidden");
      } else {
        $(block).find(".divider").removeClass("hidden");
      }
    }
    render() {
      this.wrapper = document.createElement("div");
      this.new("shortcut");
      if (this.data && this.data.shortcut_name) {
        let has_data = this.make("shortcut", __(this.data.shortcut_name));
        if (!has_data)
          return;
      }
      if (!this.readOnly) {
        $(this.wrapper).find(".widget").addClass("shortcut edit-mode");
        this.add_settings_button();
        this.add_new_block_button();
      } else {
        let $shortcut_icon = frappe.utils.icon("arrow-up-right", "xs", "", "stroke: grey", "ml-2");
        $(this.wrapper).find(".widget .widget-title").append($shortcut_icon);
        $(this.wrapper).append($(`<div class="divider"></div>`));
      }
      return this.wrapper;
    }
    validate(savedData) {
      if (!savedData.shortcut_name) {
        return false;
      }
      return true;
    }
    save() {
      return {
        shortcut_name: this.wrapper.getAttribute("shortcut_name"),
        col: this.get_col(),
        new: this.new_block_widget
      };
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/spacer.js
  var Spacer = class extends Block {
    static get toolbox() {
      return {
        title: "Spacer",
        icon: frappe.utils.icon("spacer", "sm")
      };
    }
    static get isReadOnlySupported() {
      return true;
    }
    constructor({ data, api, config, readOnly }) {
      super({ data, api, config, readOnly });
      this.col = this.data.col ? this.data.col : "12";
    }
    render() {
      this.wrapper = document.createElement("div");
      this.wrapper.classList.add("widget", "spacer");
      if (!this.readOnly) {
        let $spacer = $(`
				<div class="widget-head">
					<div class="spacer-left"></div>
					<div>Spacer</div>
					<div class="widget-control"></div>
				</div>
			`);
        $spacer.appendTo(this.wrapper);
        this.wrapper.classList.add("edit-mode");
        this.wrapper.style.minHeight = 40 + "px";
        let $widget_control = $spacer.find(".widget-control");
        this.add_settings_button();
        this.add_new_block_button();
        frappe.utils.add_custom_button(frappe.utils.icon("drag", "xs"), null, "drag-handle", `${__("Drag")}`, null, $widget_control);
      }
      return this.wrapper;
    }
    save() {
      return {
        col: this.get_col()
      };
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/onboarding.js
  var Onboarding = class extends Block {
    static get toolbox() {
      return {
        title: "Onboarding",
        icon: frappe.utils.icon("onboarding", "sm")
      };
    }
    static get isReadOnlySupported() {
      return true;
    }
    constructor({ data, api, config, readOnly, block }) {
      super({ data, api, config, readOnly, block });
      this.col = this.data.col ? this.data.col : "12";
      this.allow_customization = !this.readOnly;
      this.options = {
        allow_sorting: this.allow_customization,
        allow_create: this.allow_customization,
        allow_delete: this.allow_customization,
        allow_hiding: false,
        allow_edit: true,
        allow_resize: false
      };
    }
    rendered() {
      let block = this.wrapper.closest(".ce-block");
      if (this.readOnly && !$(this.wrapper).find(".onboarding-widget-box").is(":visible")) {
        $(block).hide();
      }
      this.set_col_class(block, this.get_col());
    }
    new(block, widget_type = block) {
      let me = this;
      const dialog_class = get_dialog_constructor(widget_type);
      let block_name = block + "_name";
      this.dialog = new dialog_class({
        label: this.label,
        type: widget_type,
        primary_action: (widget) => {
          widget.in_customize_mode = 1;
          this.block_widget = frappe.widget.make_widget(__spreadProps(__spreadValues({}, widget), {
            widget_type,
            container: this.wrapper,
            options: __spreadProps(__spreadValues({}, this.options), {
              on_delete: () => this.api.blocks.delete(),
              on_edit: () => this.on_edit(this.block_widget)
            }),
            new: true
          }));
          this.block_widget.customize(this.options);
          this.wrapper.setAttribute(block_name, this.block_widget.label || this.block_widget.onboarding_name);
          $(this.wrapper).find(".widget").addClass(`${widget_type} edit-mode`);
          this.new_block_widget = this.block_widget.get_config();
          this.add_settings_button();
        }
      });
      if (!this.readOnly && this.data && !this.data[block_name]) {
        this.dialog.make();
        this.dialog.dialog.get_close_btn().click(() => {
          me.wrapper.closest(".ce-block").remove();
        });
      }
    }
    make(block, block_name) {
      let block_data = this.config.page_data["onboardings"].items.find((obj) => {
        return obj.label == block_name;
      });
      if (!block_data)
        return false;
      this.wrapper.innerHTML = "";
      block_data.in_customize_mode = !this.readOnly;
      this.block_widget = frappe.widget.make_widget({
        container: this.wrapper,
        widget_type: "onboarding",
        in_customize_mode: block_data.in_customize_mode,
        options: __spreadProps(__spreadValues({}, this.options), {
          on_delete: () => this.api.blocks.delete(),
          on_edit: () => this.on_edit(this.block_widget)
        }),
        label: block_data.label,
        title: block_data.title || __("Let's Get Started"),
        subtitle: block_data.subtitle,
        steps: block_data.items,
        success: block_data.success,
        docs_url: block_data.docs_url,
        user_can_dismiss: block_data.user_can_dismiss
      });
      this.wrapper.setAttribute(block + "_name", block_name);
      if (!this.readOnly) {
        this.block_widget.customize(this.options);
      }
      return true;
    }
    render() {
      this.wrapper = document.createElement("div");
      this.new("onboarding");
      if (this.data && this.data.onboarding_name) {
        let has_data = this.make("onboarding", this.data.onboarding_name);
        if (!has_data)
          return;
      }
      if (!this.readOnly) {
        $(this.wrapper).find(".widget").addClass("onboarding edit-mode");
        this.add_settings_button();
        this.add_new_block_button();
      }
      $(this.wrapper).css("padding-bottom", "20px");
      return this.wrapper;
    }
    validate(savedData) {
      if (!savedData.onboarding_name) {
        return false;
      }
      return true;
    }
    save() {
      return {
        onboarding_name: this.wrapper.getAttribute("onboarding_name"),
        col: this.get_col(),
        new: this.new_block_widget
      };
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/header_size.js
  var HeaderSize = class {
    static get isInline() {
      return true;
    }
    get state() {
      return this._state;
    }
    set state(state) {
      this._state = state;
    }
    get title() {
      return "Header Size";
    }
    constructor({ api }) {
      this.api = api;
      this.button = null;
      this._state = true;
      this.selectedText = null;
      this.range = null;
      this.headerLevels = [];
    }
    render() {
      this.button = document.createElement("button");
      this.button.type = "button";
      this.button.innerHTML = `${frappe.utils.icon("header", "sm")}${frappe.utils.icon("small-down", "xs")}`;
      this.button.classList = "header-inline-tool";
      return this.button;
    }
    checkState(selection) {
      let termWrapper = this.api.selection.findParentTag("SPAN");
      for (const h2 of ["h1", "h2", "h3", "h4", "h5", "h6"]) {
        if (termWrapper && termWrapper.classList.contains(h2)) {
          let num = h2.match(/\d+/)[0];
          $(".header-inline-tool svg:first-child").replaceWith(frappe.utils.icon(`header-${num}`, "md"));
        }
      }
      const text = selection.anchorNode;
      if (!text)
        return;
    }
    change_size(range, size) {
      if (!range)
        return;
      let span = document.createElement("SPAN");
      span.classList.add(`h${size}`);
      span.innerText = range.toString();
      this.remove_parent_tag(range, range.commonAncestorContainer, span);
      range.extractContents();
      range.insertNode(span);
      this.api.inlineToolbar.close();
    }
    remove_parent_tag(range, parent_node, span) {
      let diff = range.startContainer.data;
      let selected_text = span.innerText;
      let parent_tag = parent_node.parentElement;
      if (diff !== selected_text) {
        parent_tag = parent_node;
      }
      if (parent_tag.innerText == selected_text) {
        if (!parent_tag.classList.contains("ce-header") && !parent_tag.classList.contains("ce-paragraph")) {
          this.remove_parent_tag(range, parent_node.parentElement, span);
          parent_tag.remove();
        }
      }
    }
    surround(range) {
      this.selectedText = range.cloneContents();
      this.actions.hidden = !this.actions.hidden;
      this.range = !this.actions.hidden ? range : null;
      this.state = !this.actions.hidden;
    }
    renderActions() {
      this.actions = document.createElement("div");
      this.actions.classList = "header-level-select";
      this.headerLevels = new Array(6).fill().map((_2, idx) => {
        const $header_level = document.createElement("div");
        $header_level.classList.add(`h${idx + 1}`, "header-level");
        $header_level.innerText = `Header ${idx + 1}`;
        return $header_level;
      });
      for (const [i2, headerLevel] of this.headerLevels.entries()) {
        this.actions.appendChild(headerLevel);
        this.api.listeners.on(headerLevel, "click", () => {
          this.change_size(this.range, i2 + 1);
        });
      }
      this.actions.hidden = true;
      return this.actions;
    }
    destroy() {
      for (const headerLevel of this.headerLevels) {
        this.api.listeners.off(headerLevel, "click");
      }
    }
  };

  // frappe/public/js/frappe/views/workspace/blocks/index.js
  frappe.provide("frappe.workspace_block");
  frappe.workspace_block.blocks = {
    header: Header,
    paragraph: Paragraph,
    card: Card,
    chart: Chart,
    shortcut: Shortcut,
    spacer: Spacer,
    onboarding: Onboarding
  };
  frappe.workspace_block.tunes = {
    header_size: HeaderSize
  };

  // frappe/public/js/frappe/widgets/base_widget.js
  var Widget = class {
    constructor(opts) {
      Object.assign(this, opts);
      this.make();
    }
    refresh() {
      this.set_title();
      this.set_actions();
      this.set_body();
      this.setup_events();
    }
    get_config() {
      return {
        name: this.name,
        label: this.label
      };
    }
    customize(options) {
      this.in_customize_mode = true;
      this.action_area.empty();
      options.allow_sorting && frappe.utils.add_custom_button(frappe.utils.icon("drag", "xs"), null, "drag-handle", `${__("Drag")}`, null, this.action_area);
      if (options.allow_hiding) {
        if (this.hidden) {
          this.widget.removeClass("hidden");
          this.body.css("opacity", 0.5);
          this.title_field.css("opacity", 0.5);
          this.footer.css("opacity", 0.5);
        }
        const classname = this.hidden ? "fa fa-eye" : "fa fa-eye-slash";
        const title = this.hidden ? `${__("Show")}` : `${__("Hide")}`;
        frappe.utils.add_custom_button(`<i class="${classname}" aria-hidden="true"></i>`, () => this.hide_or_show(), "show-or-hide-button", title, null, this.action_area);
        this.show_or_hide_button = this.action_area.find(".show-or-hide-button");
      }
      options.allow_edit && frappe.utils.add_custom_button(frappe.utils.icon("edit", "xs"), () => this.edit(), "edit-button", `${__("Edit")}`, null, this.action_area);
    }
    make() {
      this.make_widget();
      this.widget.appendTo(this.container);
    }
    make_widget() {
      this.widget = $(`<div class="widget" data-widget-name="${this.name ? this.name : ""}">
			<div class="widget-head">
				<div class="widget-label">
					<div class="widget-title"></div>
					<div class="widget-subtitle"></div>
				</div>
				<div class="widget-control"></div>
			</div>
			<div class="widget-body"></div>
			<div class="widget-footer"></div>
		</div>`);
      this.title_field = this.widget.find(".widget-title");
      this.subtitle_field = this.widget.find(".widget-subtitle");
      this.body = this.widget.find(".widget-body");
      this.action_area = this.widget.find(".widget-control");
      this.head = this.widget.find(".widget-head");
      this.footer = this.widget.find(".widget-footer");
      this.refresh();
    }
    set_title(max_chars) {
      let base = this.title || this.label || this.name;
      let title = max_chars ? frappe.ellipsis(base, max_chars) : base;
      if (this.icon) {
        let icon = frappe.utils.icon(this.icon, "lg");
        this.title_field[0].innerHTML = `${icon} <span class="ellipsis" title="${title}">${title}</span>`;
      } else {
        this.title_field[0].innerHTML = `<span class="ellipsis" title="${title}">${title}</span>`;
        if (max_chars) {
          this.title_field[0].setAttribute("title", this.title || this.label);
        }
      }
      this.subtitle && this.subtitle_field.html(this.subtitle);
    }
    delete(animate = true, dismissed = false) {
      let remove_widget = (setup_new) => {
        this.widget.remove();
        !dismissed && this.options.on_delete && this.options.on_delete(this.name, setup_new);
      };
      if (animate) {
        this.widget.addClass("zoom-out");
        setTimeout(() => {
          remove_widget(true);
        }, 300);
      } else {
        remove_widget(false);
      }
    }
    edit() {
      const dialog_class = get_dialog_constructor(this.widget_type);
      this.edit_dialog = new dialog_class({
        label: this.label,
        type: this.widget_type,
        values: this.get_config(),
        primary_action: (data) => {
          Object.assign(this, data);
          data.name = this.name;
          this.new = true;
          this.refresh();
          this.options.on_edit && this.options.on_edit(data);
        },
        primary_action_label: __("Save")
      });
      this.edit_dialog.make();
    }
    toggle_width() {
      if (this.width == "Full") {
        this.widget.removeClass("full-width");
        this.width = null;
        this.refresh();
      } else {
        this.widget.addClass("full-width");
        this.width = "Full";
        this.refresh();
      }
      const title = this.width == "Full" ? `${__("Collapse")}` : `${__("Expand")}`;
      this.resize_button.attr("title", title);
    }
    hide_or_show() {
      if (!this.hidden) {
        this.body.css("opacity", 0.5);
        this.title_field.css("opacity", 0.5);
        this.footer.css("opacity", 0.5);
        this.hidden = true;
      } else {
        this.body.css("opacity", 1);
        this.title_field.css("opacity", 1);
        this.footer.css("opacity", 1);
        this.hidden = false;
      }
      this.show_or_hide_button.empty();
      const classname = this.hidden ? "fa fa-eye" : "fa fa-eye-slash";
      const title = this.hidden ? `${__("Show")}` : `${__("Hide")}`;
      $(`<i class="${classname}" aria-hidden="true" title="${title}"></i>`).appendTo(this.show_or_hide_button);
    }
    setup_events() {
    }
    set_actions() {
    }
    set_body() {
    }
  };

  // frappe/public/js/frappe/widgets/chart_widget.js
  frappe.provide("frappe.widget.utils");
  frappe.provide("frappe.dashboards");
  frappe.provide("frappe.dashboards.chart_sources");
  var ChartWidget = class extends Widget {
    constructor(opts) {
      opts.shadow = true;
      super(opts);
      this.height = this.height || 240;
    }
    get_config() {
      return {
        name: this.name,
        chart_name: this.chart_name,
        label: this.label,
        hidden: this.hidden,
        width: this.width
      };
    }
    refresh() {
      delete this.dashboard_chart;
      this.set_body();
      this.make_chart();
    }
    set_chart_title() {
      const max_chars = this.widget.width() < 600 ? 40 : 60;
      this.set_title(max_chars);
    }
    set_body() {
      this.widget.addClass("dashboard-widget-box");
      if (this.width == "Full") {
        this.widget.addClass("full-width");
      }
    }
    setup_container() {
      this.body.empty();
      if (this.chart_doc.type == "Heatmap") {
        this.setup_heatmap_container();
      }
      this.loading = $(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("Loading...")}</div>`);
      this.loading.appendTo(this.body);
      this.empty = $(`<div class="chart-loading-state text-muted" style="height: ${this.height}px;">${__("No Data...")}</div>`);
      this.empty.hide().appendTo(this.body);
      this.chart_wrapper = $(`<div></div>`);
      this.chart_wrapper.appendTo(this.body);
      this.$heatmap_legend = null;
      this.set_chart_title();
    }
    setup_heatmap_container() {
      this.widget.addClass("heatmap-chart");
      this.widget.removeClass("full-width").addClass("full-width");
      this.width = "Full";
    }
    set_summary() {
      if (!this.$summary) {
        this.$summary = $(`<div class="report-summary"></div>`).hide();
        this.head.after(this.$summary);
      } else {
        this.$summary.empty();
      }
      this.summary.forEach((summary) => {
        frappe.utils.build_summary_item(summary).appendTo(this.$summary);
      });
      this.summary.length && this.$summary.show();
    }
    make_chart() {
      this.get_settings().then(() => {
        if (!this.settings) {
          this.deleted = true;
          this.widget.remove();
          return;
        }
        if (!this.chart_settings) {
          this.chart_settings = {};
        }
        this.setup_container();
        if (!this.in_customize_mode) {
          this.action_area.empty();
          this.prepare_chart_actions();
          if (this.chart_doc.timeseries && this.chart_doc.chart_type !== "Custom") {
            this.render_time_series_filters();
          }
        }
        frappe.run_serially([
          () => this.prepare_chart_object(),
          () => this.setup_filter_button(),
          () => this.fetch_and_update_chart()
        ]);
      });
    }
    render_time_series_filters() {
      let filters2 = this.get_time_series_filters();
      frappe.dashboard_utils.render_chart_filters(filters2, "chart-actions", this.action_area, 0);
    }
    get_time_series_filters() {
      let filters2;
      if (this.chart_doc.type == "Heatmap") {
        filters2 = [{
          label: this.chart_settings.heatmap_year || this.chart_doc.heatmap_year,
          options: frappe.dashboard_utils.get_years_since_creation(frappe.boot.user.creation),
          action: (selected_item) => {
            this.selected_heatmap_year = selected_item;
            this.save_chart_config_for_user({ "heatmap_year": this.selected_heatmap_year });
            this.fetch_and_update_chart();
          }
        }];
      } else {
        filters2 = [
          {
            label: this.chart_settings.time_interval || this.chart_doc.time_interval,
            options: ["Yearly", "Quarterly", "Monthly", "Weekly", "Daily"],
            icon: "calendar",
            class: "time-interval-filter",
            action: (selected_item) => {
              this.selected_time_interval = selected_item;
              this.save_chart_config_for_user({ "time_interval": this.selected_time_interval });
              this.fetch_and_update_chart();
            }
          },
          {
            label: this.chart_settings.timespan || this.chart_doc.timespan,
            options: [
              "Select Date Range",
              "Last Year",
              "Last Quarter",
              "Last Month",
              "Last Week"
            ],
            class: "timespan-filter",
            action: (selected_item) => {
              this.selected_timespan = selected_item;
              if (this.selected_timespan === "Select Date Range") {
                this.render_date_range_field();
              } else {
                this.selected_from_date = null;
                this.selected_to_date = null;
                if (this.date_field_wrapper) {
                  this.date_field_wrapper.hide();
                  this.title_field.show();
                  this.subtitle_field.show();
                  this.head.css("flex-direction", "row");
                }
                this.save_chart_config_for_user({
                  "timespan": this.selected_timespan,
                  "from_date": null,
                  "to_date": null
                });
                this.fetch_and_update_chart();
              }
            }
          }
        ];
      }
      return filters2;
    }
    fetch_and_update_chart() {
      this.args = {
        timespan: this.selected_timespan || this.chart_settings.timespan,
        time_interval: this.selected_time_interval || this.chart_settings.time_interval,
        from_date: this.selected_from_date || this.chart_settings.from_date,
        to_date: this.selected_to_date || this.chart_settings.to_date,
        heatmap_year: this.selected_heatmap_year || this.chart_settings.heatmap_year
      };
      this.fetch(this.filters, true, this.args).then((data) => {
        if (this.chart_doc.chart_type == "Report") {
          this.report_result = data;
          this.summary = data.report_summary;
          data = this.get_report_chart_data(data);
        }
        this.update_chart_object();
        this.data = data;
        this.render();
      });
    }
    render_date_range_field() {
      if (!this.date_field_wrapper || !this.date_field_wrapper.is(":visible")) {
        this.date_field_wrapper = $(`<div class="dashboard-date-field pull-right"></div>`).insertAfter(this.action_area.find(".timespan-filter"));
        if (this.width !== "Full" && this.widget.width() < 700) {
          this.title_field.hide();
          this.subtitle_field.hide();
          this.head.css("flex-direction", "row-reverse");
        }
        this.date_range_field = frappe.ui.form.make_control({
          df: {
            fieldtype: "DateRange",
            fieldname: "from_date",
            placeholder: "Date Range",
            input_class: "input-xs",
            default: [this.chart_settings.from_date, this.chart_settings.to_date],
            value: [this.chart_settings.from_date, this.chart_settings.to_date],
            reqd: 1,
            change: () => {
              let selected_date_range = this.date_range_field.get_value();
              this.selected_from_date = selected_date_range[0];
              this.selected_to_date = selected_date_range[1];
              if (selected_date_range && selected_date_range.length == 2) {
                this.save_chart_config_for_user({
                  "timespan": this.selected_timespan,
                  "from_date": this.selected_from_date,
                  "to_date": this.selected_to_date
                });
                this.fetch_and_update_chart();
              }
            }
          },
          parent: this.date_field_wrapper,
          render_input: 1
        });
        this.date_range_field.$input.focus();
      }
    }
    get_report_chart_data(result) {
      if (result.chart && this.chart_doc.use_report_chart) {
        return result.chart.data;
      } else {
        let y_fields = [];
        this.chart_doc.y_axis.map((field) => {
          y_fields.push(field.y_field);
        });
        let chart_fields = {
          y_fields,
          x_field: this.chart_doc.x_field,
          chart_type: this.chart_doc.type,
          color: this.chart_doc.color
        };
        let columns = result.columns.map((col) => {
          return frappe.report_utils.prepare_field_from_column(col);
        });
        let data = frappe.report_utils.make_chart_options(columns, result, chart_fields).data;
        return data;
      }
    }
    prepare_chart_actions() {
      let actions = [
        {
          label: __("Refresh"),
          action: "action-refresh",
          handler: () => {
            delete this.dashboard_chart;
            this.make_chart();
          }
        },
        {
          label: __("Edit"),
          action: "action-edit",
          handler: () => {
            frappe.set_route("Form", "Dashboard Chart", this.chart_doc.name);
          }
        },
        {
          label: __("Reset Chart"),
          action: "action-reset",
          handler: () => {
            this.reset_chart();
            delete this.dashboard_chart;
            this.make_chart();
          }
        }
      ];
      if (this.chart_doc.document_type) {
        actions.push({
          label: __("{0} List", [this.chart_doc.document_type]),
          action: "action-list",
          handler: () => {
            frappe.set_route("List", this.chart_doc.document_type);
          }
        });
      } else if (this.chart_doc.chart_type === "Report") {
        actions.push({
          label: __("{0} Report", [this.chart_doc.report_name]),
          action: "action-list",
          handler: () => {
            frappe.set_route("query-report", this.chart_doc.report_name);
          }
        });
      }
      this.set_chart_actions(actions);
    }
    setup_filter_button() {
      if (this.in_customize_mode)
        return;
      this.is_document_type = this.chart_doc.chart_type !== "Report" && this.chart_doc.chart_type !== "Custom";
      this.filter_button = $(`<div class="filter-chart btn btn-xs pull-right">
				${frappe.utils.icon("filter", "sm")}
			</div>`);
      this.filter_button.appendTo(this.action_area);
      if (this.is_document_type) {
        if (this.filter_group) {
          this.filters = this.filter_group.get_filters();
        }
        this.create_filter_group_and_add_filters();
      } else {
        this.filter_button.on("click", () => {
          let fields;
          frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then((filters2) => {
            if (!this.is_document_type) {
              if (!filters2) {
                fields = [
                  {
                    fieldtype: "HTML",
                    options: __("No Filters Set")
                  }
                ];
              } else {
                fields = filters2.filter((df) => df.fieldname).map((df) => {
                  Object.assign(df, df.dashboard_config || {});
                  return df;
                });
              }
            } else {
              fields = [
                {
                  fieldtype: "HTML",
                  fieldname: "filter_area"
                }
              ];
            }
            this.setup_filter_dialog(fields);
          });
        });
      }
    }
    setup_filter_dialog(fields) {
      let me = this;
      let dialog = new frappe.ui.Dialog({
        title: __("Set Filters for {0}", [this.chart_doc.chart_name]),
        fields,
        primary_action: function() {
          let values = this.get_values();
          if (values) {
            this.hide();
            me.filters = values;
            me.save_chart_config_for_user({ "filters": me.filters });
            me.fetch_and_update_chart();
          }
        },
        primary_action_label: "Set"
      });
      dialog.show();
      if (this.chart_doc.chart_type == "Report") {
        frappe.query_report = new frappe.views.QueryReport({ "filters": dialog.fields_list });
        frappe.query_reports[this.chart_doc.report_name].onload && frappe.query_reports[this.chart_doc.report_name].onload(frappe.query_report);
      }
      dialog.set_values(this.filters);
    }
    reset_chart() {
      this.save_chart_config_for_user(null, 1);
      this.chart_settings = {};
      this.filters = null;
      this.selected_time_interval = null;
      this.selected_timespan = null;
      this.selected_heatmap_year = null;
    }
    save_chart_config_for_user(config, reset = 0) {
      Object.assign(this.chart_settings, config);
      frappe.xcall("frappe.desk.doctype.dashboard_settings.dashboard_settings.save_chart_config", {
        "reset": reset,
        "config": this.chart_settings,
        "chart_name": this.chart_doc.chart_name
      });
    }
    create_filter_group_and_add_filters() {
      this.filter_group = new frappe.ui.FilterGroup({
        doctype: this.chart_doc.document_type,
        parent_doctype: this.chart_doc.parent_document_type,
        filter_button: this.filter_button,
        on_change: () => {
          this.filters = this.filter_group.get_filters();
          this.save_chart_config_for_user({
            "filters": this.filters
          });
          this.fetch_and_update_chart();
        }
      });
      this.filters && frappe.model.with_doctype(this.chart_doc.document_type, () => {
        this.filter_group.add_filters_to_filter_group(this.filters);
      });
    }
    set_chart_actions(actions) {
      this.chart_actions = $(`<div class="chart-actions dropdown pull-right">
			<button data-toggle="dropdown"
				aria-haspopup="true"aria-expanded="false"
				class="btn btn-xs btn-secondary chart-menu"
			>
				<svg class="icon icon-sm">
					<use xlink:href="#icon-dot-horizontal">
					</use>
				</svg>
			</button>
			<ul class="dropdown-menu dropdown-menu-right">
				${actions.map((action) => `<li><a class="dropdown-item" data-action="${action.action}">${action.label}</a></li>`).join("")}
			</ul>
		</div>
		`);
      this.chart_actions.find("a[data-action]").each((i2, o2) => {
        const action = o2.dataset.action;
        $(o2).click(actions.find((a2) => a2.action === action));
      });
      this.chart_actions.appendTo(this.action_area);
    }
    fetch(filters2, refresh = false, args) {
      let method = this.settings.method;
      if (this.chart_doc.chart_type == "Report") {
        args = {
          report_name: this.chart_doc.report_name,
          filters: filters2,
          ignore_prepared_report: 1
        };
      } else {
        args = {
          chart_name: this.chart_doc.name,
          filters: filters2,
          refresh: refresh ? 1 : 0,
          time_interval: args && args.time_interval ? args.time_interval : null,
          timespan: args && args.timespan ? args.timespan : null,
          from_date: args && args.from_date ? args.from_date : null,
          to_date: args && args.to_date ? args.to_date : null,
          heatmap_year: args && args.heatmap_year ? args.heatmap_year : null
        };
      }
      return frappe.xcall(method, args);
    }
    render() {
      if (!this.data || !this.data.labels || !Object.keys(this.data).length) {
        this.chart_wrapper.hide();
        this.loading.hide();
        this.$summary && this.$summary.hide();
        this.empty.show();
      } else {
        this.loading.hide();
        this.empty.hide();
        this.chart_wrapper.show();
        const chart_args = this.get_chart_args();
        if (!this.dashboard_chart) {
          this.dashboard_chart = frappe.utils.make_chart(this.chart_wrapper[0], chart_args);
        } else {
          this.dashboard_chart.update(this.data);
        }
        this.width == "Full" && this.summary && this.set_summary();
        this.chart_doc.type == "Heatmap" && this.render_heatmap_legend();
      }
    }
    get_chart_args() {
      let colors = this.get_chart_colors();
      const chart_type_map = {
        Line: "line",
        Bar: "bar",
        Percentage: "percentage",
        Pie: "pie",
        Donut: "donut",
        Heatmap: "heatmap"
      };
      let chart_args = {
        data: this.data,
        type: chart_type_map[this.chart_doc.type],
        colors,
        height: this.height,
        maxSlices: ["Pie", "Donut"].includes(this.chart_doc.type) ? 6 : 9,
        axisOptions: {
          xIsSeries: this.chart_doc.timeseries,
          shortenYAxisNumbers: 1
        }
      };
      if (this.report_result && this.report_result.chart) {
        chart_args.tooltipOptions = {
          formatTooltipY: (value) => frappe.format(value, {
            fieldtype: this.report_result.chart.fieldtype,
            options: this.report_result.chart.options
          }, { always_show_decimals: true, inline: true })
        };
      }
      if (this.chart_doc.type == "Heatmap") {
        const heatmap_year = parseInt(this.selected_heatmap_year || this.chart_settings.heatmap_year || this.chart_doc.heatmap_year);
        chart_args.data.start = new Date(`${heatmap_year}-01-01`);
        chart_args.data.end = new Date(`${heatmap_year + 1}-01-01`);
      }
      let set_options = (options) => {
        let custom_options = JSON.parse(options);
        for (let key2 in custom_options) {
          if (typeof chart_args[key2] === "object" && typeof custom_options[key2] === "object") {
            chart_args[key2] = Object.assign(chart_args[key2], custom_options[key2]);
          } else {
            chart_args[key2] = custom_options[key2];
          }
        }
      };
      if (this.custom_options) {
        set_options(this.custom_options);
      }
      if (this.chart_doc.custom_options) {
        set_options(this.chart_doc.custom_options);
      }
      return chart_args;
    }
    get_chart_colors() {
      let colors = [];
      if (this.chart_doc.y_axis.length) {
        this.chart_doc.y_axis.map((field) => {
          colors.push(field.color);
        });
      } else if (["Line", "Bar"].includes(this.chart_doc.type)) {
        colors = [this.chart_doc.color || []];
      } else if (this.chart_doc.type == "Heatmap") {
        colors = [];
      }
      return colors;
    }
    render_heatmap_legend() {
      let legend_colors;
      let set_legend_color = (options) => {
        legend_colors = JSON.parse(options).colors;
      };
      if (this.custom_options) {
        set_legend_color(this.custom_options);
      }
      if (this.chart_doc.custom_options) {
        set_legend_color(this.chart_doc.custom_options);
      }
      if (!this.$heatmap_legend && this.widget.width() > 991) {
        this.$heatmap_legend = $(`
				<div class="heatmap-legend">
					<ul class="legend-colors">
						<li style="background-color: ${legend_colors[0] || "#ebedf0"}"></li>
						<li style="background-color: ${legend_colors[1] || "#c6e48b"}"></li>
						<li style="background-color: ${legend_colors[2] || "#7bc96f"}"></li>
						<li style="background-color: ${legend_colors[3] || "#239a3b"}"></li>
						<li style="background-color: ${legend_colors[4] || "#196127"}"></li>
					</ul>
					<div class="legend-label">
						<div style="margin-bottom: 45px">${__("Less")}</div>
						<div>${__("More")}</div>
					</div>
				</div>
				`);
        this.body.append(this.$heatmap_legend);
      }
    }
    update_last_synced() {
      if (!this.chart_doc.last_synced_on) {
        return;
      }
      let last_synced_text = __("Last synced {0}", [comment_when(this.chart_doc.last_synced_on)]);
      this.subtitle_field.html(last_synced_text);
    }
    update_chart_object() {
      frappe.db.get_doc("Dashboard Chart", this.chart_doc.name).then((doc2) => {
        this.chart_doc = doc2;
        this.update_last_synced();
      });
    }
    prepare_chart_object() {
      if (this.chart_doc.type == "Heatmap" && !this.chart_doc.heatmap_year) {
        this.chart_doc.heatmap_year = frappe.dashboard_utils.get_year(frappe.datetime.now_date());
      }
      return this.set_chart_filters();
    }
    set_chart_filters() {
      let user_saved_filters = this.chart_settings.filters || null;
      let chart_saved_filters = frappe.dashboard_utils.get_all_filters(this.chart_doc);
      if (this.chart_doc.chart_type == "Report") {
        return frappe.dashboard_utils.get_filters_for_chart_type(this.chart_doc).then((filters2) => {
          chart_saved_filters = this.update_default_date_filters(filters2, chart_saved_filters);
          this.filters = frappe.utils.parse_array(user_saved_filters) || frappe.utils.parse_array(this.filters) || frappe.utils.parse_array(chart_saved_filters);
        });
      } else {
        this.filters = frappe.utils.parse_array(user_saved_filters) || frappe.utils.parse_array(this.filters) || frappe.utils.parse_array(chart_saved_filters);
        return Promise.resolve();
      }
    }
    update_default_date_filters(report_filters, chart_filters) {
      if (report_filters) {
        report_filters.map((f3) => {
          if (["Date", "DateRange"].includes(f3.fieldtype) && f3.default) {
            if (f3.reqd || chart_filters[f3.fieldname]) {
              chart_filters[f3.fieldname] = f3.default;
            }
          }
        });
      }
      return chart_filters;
    }
    get_settings() {
      return frappe.model.with_doc("Dashboard Chart", this.chart_name).then((chart_doc) => {
        if (chart_doc) {
          this.chart_doc = chart_doc;
          if (this.chart_doc.chart_type == "Custom") {
            if (frappe.dashboards.chart_sources[this.chart_doc.source]) {
              this.settings = frappe.dashboards.chart_sources[this.chart_doc.source];
              return Promise.resolve();
            } else {
              const method = "frappe.desk.doctype.dashboard_chart_source.dashboard_chart_source.get_config";
              return frappe.xcall(method, { name: this.chart_doc.source }).then((config) => {
                frappe.dom.eval(config);
                this.settings = frappe.dashboards.chart_sources[this.chart_doc.source];
              });
            }
          } else if (this.chart_doc.chart_type == "Report") {
            this.settings = {
              method: "frappe.desk.query_report.run"
            };
            return Promise.resolve();
          } else {
            this.settings = {
              method: "frappe.desk.doctype.dashboard_chart.dashboard_chart.get"
            };
            return Promise.resolve();
          }
        }
      });
    }
  };

  // frappe/public/js/frappe/widgets/shortcut_widget.js
  frappe.provide("frappe.utils");
  var ShortcutWidget = class extends Widget {
    constructor(opts) {
      opts.shadow = true;
      super(opts);
    }
    get_config() {
      return {
        name: this.name,
        icon: this.icon,
        label: this.label,
        format: this.format,
        link_to: this.link_to,
        doc_view: this.doc_view,
        color: this.color,
        restrict_to_domain: this.restrict_to_domain,
        stats_filter: this.stats_filter,
        type: this.type
      };
    }
    setup_events() {
      this.widget.click(() => {
        if (this.in_customize_mode)
          return;
        let route = frappe.utils.generate_route({
          route: this.route,
          name: this.link_to,
          type: this.type,
          is_query_report: this.is_query_report,
          doctype: this.ref_doctype,
          doc_view: this.doc_view
        });
        let filters2 = this.get_doctype_filter();
        if (this.type == "DocType" && filters2) {
          frappe.route_options = filters2;
        }
        frappe.set_route(route);
      });
    }
    set_actions() {
      if (this.in_customize_mode)
        return;
      this.widget.addClass("shortcut-widget-box");
      let filters2 = this.get_doctype_filter();
      if (this.type == "DocType" && filters2) {
        frappe.db.count(this.link_to, {
          filters: filters2
        }).then((count) => this.set_count(count));
      }
    }
    get_doctype_filter() {
      let count_filter = new Function(`return ${this.stats_filter}`)();
      if (count_filter) {
        return count_filter;
      }
      return null;
    }
    set_count(count) {
      const get_label = () => {
        if (this.format) {
          return __(this.format).replace(/{}/g, count);
        }
        return count;
      };
      this.action_area.empty();
      const label = get_label();
      let color = this.color && count ? this.color.toLowerCase() : "gray";
      $(`<div class="indicator-pill ellipsis ${color}">${label}</div>`).appendTo(this.action_area);
    }
  };

  // frappe/public/js/frappe/widgets/links_widget.js
  frappe.provide("frappe.utils");
  var LinksWidget = class extends Widget {
    constructor(opts) {
      opts.icon = opts.icon || "file";
      super(opts);
    }
    get_config() {
      return {
        name: this.name,
        links: JSON.stringify(this.links),
        link_count: this.links.length,
        label: this.label,
        hidden: this.hidden
      };
    }
    set_body() {
      if (!this.options) {
        this.options = {};
        this.options.links = this.links;
      }
      this.widget.addClass("links-widget-box");
      const is_link_disabled = (item) => {
        return item.dependencies && item.incomplete_dependencies;
      };
      const disabled_dependent = (item) => {
        return is_link_disabled(item) ? "disabled-link" : "";
      };
      const get_indicator_color = (item) => {
        if (item.open_count) {
          return "red";
        }
        if (item.onboard) {
          return item.count ? "blue" : "yellow";
        }
        return "gray";
      };
      const get_link_for_item = (item) => {
        if (is_link_disabled(item)) {
          return `<span class="link-content ellipsis disabled-link">${item.label ? item.label : item.name}</span>
					<div class="module-link-popover popover fade top in" role="tooltip" style="display: none;">
						<div class="arrow"></div>
						<h3 class="popover-title" style="display: none;"></h3>
						<div class="popover-content" style="padding: 12px;">
							<div class="small text-muted">${__("You need to create these first: ")}</div>
							<div class="small">${item.incomplete_dependencies.join(", ")}</div>
						</div>
					</div>`;
        }
        if (item.youtube_id)
          return `<span class="link-content help-video-link ellipsis" data-youtubeid="${item.youtube_id}">
						${item.label ? item.label : item.name}</span>`;
        return `<span class="link-content ellipsis">${item.label ? item.label : item.name}</span>`;
      };
      this.link_list = this.links.map((item) => {
        const opts = {
          name: item.link_to,
          type: item.link_type,
          doctype: item.doctype,
          is_query_report: item.is_query_report
        };
        if (item.link_type.toLowerCase() == "report" && !item.is_query_report) {
          opts.doctype = item.dependencies;
        }
        const route = frappe.utils.generate_route(opts);
        return $(`<a href="${route}" class="link-item ellipsis ${item.onboard ? "onboard-spotlight" : ""} ${disabled_dependent(item)}" type="${item.type}" title="${item.label ? item.label : item.name}">
					<span class="indicator-pill no-margin ${get_indicator_color(item)}"></span>
					${get_link_for_item(item)}
			</a>`);
      });
      if (this.in_customize_mode) {
        this.body.empty();
      }
      this.link_list.forEach((link) => link.appendTo(this.body));
    }
    setup_events() {
      this.link_list.forEach((link) => {
        const link_label = link.find(".link-content");
        if (link.hasClass("disabled-link")) {
          const popover = link.find(".module-link-popover");
          link_label.mouseover(() => {
            if (this.in_customize_mode)
              return;
            popover.show();
          });
          link_label.mouseout(() => popover.hide());
        } else {
          link_label.click((event2) => {
            if (this.in_customize_mode)
              return;
            if (link_label.hasClass("help-video-link")) {
              let yt_id = event2.currentTarget.dataset.youtubeid;
              frappe.help.show_video(yt_id);
            }
          });
        }
      });
    }
  };

  // frappe/public/js/frappe/widgets/onboarding_widget.js
  frappe.provide("frappe.utils");
  var OnboardingWidget = class extends Widget {
    async refresh() {
      this.new && await this.get_onboarding_data();
      this.set_title();
      this.set_actions();
      this.set_body();
      this.setup_events();
    }
    get_config() {
      return {
        label: this.onboarding_name
      };
    }
    make_body() {
      this.body.empty();
      this.steps_wrapper = $(`<div class="onboarding-steps-wrapper"></div>`).appendTo(this.body);
      this.step_preview = $(`<div class="onboarding-step-preview">
			<div class="onboarding-step-body"></div>
			<div class="onboarding-step-footer"></div>
		</div>`).appendTo(this.body);
      this.step_body = this.step_preview.find(".onboarding-step-body");
      this.step_footer = this.step_preview.find(".onboarding-step-footer");
      this.steps.forEach((step, index) => {
        this.add_step(step, index);
      });
      this.show_step(this.steps[0]);
    }
    add_step(step, index) {
      let status = "pending";
      if (step.is_skipped)
        status = "skipped";
      if (step.is_complete)
        status = "complete";
      let $step = $(`<a class="onboarding-step ${status}">
				<div class="step-title">
					<div class="step-index step-pending">${__(index + 1)}</div>
					<div class="step-index step-skipped">${frappe.utils.icon("tick", "xs")}</div>
					<div class="step-index step-complete">${frappe.utils.icon("tick", "xs")}</div>
					<div>${__(step.title)}</div>
				</div>
			</a>`);
      step.$step = $step;
      if (!step.is_complete && !step.is_skipped) {
        let skip_html = $(`<div class="step-skip">${__("Skip")}</div>`);
        skip_html.appendTo($step);
        skip_html.on("click", () => {
          this.skip_step(step);
          event.stopPropagation();
        });
      }
      $step.on("click", () => this.show_step(step));
      $step.appendTo(this.steps_wrapper);
      return $step;
    }
    show_step(step) {
      this.active_step && this.active_step.$step.removeClass("active");
      step.$step.addClass("active");
      this.active_step = step;
      let actions = {
        "Watch Video": (step2) => this.show_video(step2),
        "Create Entry": (step2) => {
          if (step2.is_complete) {
            frappe.set_route(`/app/List/${step2.reference_document}`);
          } else {
            if (step2.show_full_form) {
              this.create_entry(step2);
            } else {
              this.show_quick_entry(step2);
            }
          }
        },
        "Show Form Tour": (step2) => this.show_form_tour(step2),
        "Update Settings": (step2) => this.update_settings(step2),
        "View Report": (step2) => this.open_report(step2),
        "Go to Page": (step2) => this.go_to_page(step2)
      };
      const toggle_content = () => {
        this.step_body.empty();
        this.step_footer.empty();
        this.step_body.html(step.description ? frappe.markdown(step.description) : `<h1>${step.title}</h1>`);
        if (step.intro_video_url) {
          $(`<button class="btn btn-primary btn-sm">${__("Watch Tutorial")}</button>`).appendTo(this.step_footer).on("click", toggle_video);
        } else {
          $(`<button class="btn btn-primary btn-sm">${__(step.action_label || step.action)}</button>`).appendTo(this.step_footer).on("click", () => actions[step.action](step));
        }
      };
      const toggle_video = () => {
        this.step_body.empty();
        this.step_footer.empty();
        const video = $(`<div class="video-player" data-plyr-provider="youtube" data-plyr-embed-id="${step.intro_video_url}"></div>`);
        video.appendTo(this.step_body);
        let plyr = new frappe.Plyr(video[0], {
          hideControls: true,
          resetOnEnd: true
        });
        $(`<button class="btn btn-primary btn-sm">${__(step.action_label || step.action)}</button>`).appendTo(this.step_footer).on("click", () => {
          plyr.pause();
          actions[step.action](step);
        });
        $(window).one("hashchange", () => {
          plyr.pause();
        });
        $(`<button class="btn btn-secondary ml-2 btn-sm">${__("Back")}</button>`).appendTo(this.step_footer).on("click", toggle_content);
      };
      toggle_content();
    }
    go_to_page(step) {
      this.mark_complete(step);
      frappe.set_route(step.path).then(() => {
        let message2 = step.callback_message || __("You can continue with the onboarding after exploring this page");
        let title = step.callback_title || __("Awesome Work");
        let msg_dialog = frappe.msgprint({
          message: message2,
          title,
          primary_action: {
            action: () => {
              msg_dialog.hide();
            },
            label: () => __("Continue")
          },
          wide: true
        });
      });
    }
    open_report(step) {
      let route = frappe.utils.generate_route({
        name: step.reference_report,
        type: "report",
        is_query_report: step.report_type !== "Report Builder",
        doctype: step.report_reference_doctype
      });
      let current_route = frappe.get_route();
      frappe.set_route(route).then(() => {
        let msg_dialog = frappe.msgprint({
          message: __(step.report_description),
          title: __(step.reference_report),
          primary_action: {
            action: () => {
              frappe.set_route(current_route).then(() => {
                this.mark_complete(step);
              });
              msg_dialog.hide();
            },
            label: () => __("Continue")
          },
          secondary_action: {
            action: () => {
              msg_dialog.hide();
              frappe.set_route(current_route).then(() => {
                this.mark_complete(step);
              });
            },
            label: __("Go Back")
          }
        });
        frappe.msg_dialog.custom_onhide = () => this.mark_complete(step);
      });
    }
    show_form_tour(step) {
      let route;
      if (step.is_single) {
        route = frappe.router.slug(step.reference_document);
      } else {
        route = `${frappe.router.slug(step.reference_document)}/new`;
      }
      let current_route = frappe.get_route();
      frappe.route_hooks = {};
      frappe.route_hooks.after_load = (frm) => {
        const on_finish = () => {
          let msg_dialog = frappe.msgprint({
            message: __("Let's take you back to onboarding"),
            title: __("Great Job"),
            primary_action: {
              action: () => {
                frappe.set_route(current_route).then(() => {
                  this.mark_complete(step);
                });
                msg_dialog.hide();
              },
              label: () => __("Continue")
            }
          });
        };
        const tour_name = step.form_tour;
        frm.tour.init({ tour_name, on_finish }).then(() => frm.tour.start());
      };
      frappe.set_route(route);
    }
    update_settings(step) {
      let current_route = frappe.get_route();
      frappe.route_hooks = {};
      frappe.route_hooks.after_load = (frm) => {
        frm.scroll_to_field(step.field);
        frm.doc.__unsaved = true;
      };
      frappe.route_hooks.after_save = (frm) => {
        let success = false;
        let args = {};
        let value = frm.doc[step.field];
        let custom_onhide = null;
        if (value && step.value_to_validate == "%")
          success = true;
        if (value == step.value_to_validate)
          success = true;
        if (cstr(value) == cstr(step.value_to_validate))
          success = true;
        if (success) {
          args.message = __("Let's take you back to onboarding");
          args.title = __("Looks Great");
          args.primary_action = {
            action: () => {
              frappe.set_route(current_route).then(() => {
                this.mark_complete(step);
              });
            },
            label: __("Continue")
          };
          custom_onhide = () => args.primary_action.action();
        } else {
          args.message = __("Looks like you didn't change the value");
          args.title = __("Oops");
          args.secondary_action = {
            action: () => frappe.set_route(current_route),
            label: __("Go Back")
          };
          args.primary_action = {
            action: () => {
              frappe.set_route(current_route).then(() => {
                setTimeout(() => {
                  this.skip_step(step);
                }, 300);
              });
            },
            label: __("Skip Step")
          };
          custom_onhide = () => args.secondary_action.action();
        }
        frappe.msgprint(args);
        frappe.msg_dialog.custom_onhide = () => custom_onhide();
      };
      frappe.set_route("Form", step.reference_document);
    }
    async create_entry(step) {
      let current_route = frappe.get_route();
      let docname = await this.get_first_document(step.reference_document);
      frappe.route_hooks = {};
      frappe.route_hooks.after_load = (frm) => {
        const on_finish = () => {
          frappe.msgprint({
            message: __("Awesome, now try making an entry yourself"),
            title: __("Great"),
            primary_action: {
              action: () => {
                frappe.set_route(current_route).then(() => {
                  this.mark_complete(step);
                });
              },
              label: __("Continue")
            }
          });
          frappe.msg_dialog.custom_onhide = () => {
            this.mark_complete(step);
          };
        };
        const tour_name = step.form_tour;
        frm.tour.init({ tour_name, on_finish }).then(() => frm.tour.start());
      };
      let callback = () => {
        frappe.msgprint({
          message: __("You're doing great, let's take you back to the onboarding page."),
          title: __("Good Work \u{1F389}"),
          primary_action: {
            action: () => {
              frappe.set_route(current_route).then(() => {
                this.mark_complete(step);
              });
            },
            label: __("Continue")
          }
        });
        frappe.msg_dialog.custom_onhide = () => {
          this.mark_complete(step);
        };
      };
      if (step.is_submittable) {
        frappe.route_hooks.after_save = () => {
          frappe.msgprint({
            message: __("Submit this document to complete this step."),
            title: __("Great")
          });
        };
        frappe.route_hooks.after_submit = callback;
      } else {
        frappe.route_hooks.after_save = callback;
      }
      frappe.set_route("Form", step.reference_document, docname);
    }
    show_quick_entry(step) {
      let current_route = frappe.get_route_str();
      frappe.ui.form.make_quick_entry(step.reference_document, () => {
        if (frappe.get_route_str() != current_route) {
          let success_dialog = frappe.msgprint({
            message: __("Let's take you back to onboarding"),
            title: __("Looks Great"),
            primary_action: {
              action: () => {
                success_dialog.hide();
                frappe.set_route(current_route).then(() => {
                  this.mark_complete(step);
                });
              },
              label: __("Continue")
            }
          });
          frappe.msg_dialog.custom_onhide = () => {
            frappe.set_route(current_route).then(() => {
              this.mark_complete(step);
            });
          };
        } else {
          frappe.msgprint({
            message: __("Let us continue with the onboarding"),
            title: __("Looks Great")
          });
          this.mark_complete(step);
        }
      }, null, null, true);
    }
    show_video(step) {
      frappe.help.show_video(step.video_url, step.title);
      this.mark_complete(step);
    }
    mark_complete(step) {
      let $step = step.$step;
      let callback = () => {
        step.is_complete = true;
        $step.removeClass("skipped");
        $step.addClass("complete");
      };
      this.update_step_status(step, "is_complete", 1, callback);
    }
    skip_step(step) {
      let $step = step.$step;
      let callback = () => {
        step.is_skipped = true;
        $step.removeClass("complete");
        $step.removeClass("pending");
        $step.addClass("skipped");
      };
      this.update_step_status(step, "is_skipped", 1, callback);
    }
    update_step_status(step, status, value, callback) {
      let icon_class = {
        is_complete: "complete",
        is_skipped: "skipped"
      };
      frappe.route_hooks = {};
      frappe.call("frappe.desk.desktop.update_onboarding_step", {
        name: step.name,
        field: status,
        value
      }).then(() => {
        callback();
        step.$step.removeClass("pending").removeClass("complete").removeClass("skipped").addClass(icon_class[status]);
        let pending = this.steps.filter((step2) => {
          return !(step2.is_complete || step2.is_skipped);
        });
        if (pending.length == 0) {
          this.show_success();
        }
      });
    }
    show_success() {
      let success_message = this.success || __("You seem good to go!");
      let success_state_image = this.success_state_image || "/assets/frappe/images/ui-states/success-color.png";
      let documentation = "";
      if (this.docs_url) {
        documentation = __('Congratulations on completing the module setup. If you want to learn more you can refer to the documentation <a target="_blank" href="{0}">here</a>.', [this.docs_url]);
      }
      let success = $(`<div class="text-center onboarding-success">
					<img src="${success_state_image}" alt="Success State" class="zoom-in success-state">
					<h3>${success_message}</h3>
					<div class="text-muted">${documentation}</div>
					<button class="btn btn-primary btn-sm">${__("Continue")}</button>
			</div>
		`);
      success.find(".btn").on("click", () => this.delete());
      this.step_preview.empty();
      success.appendTo(this.step_preview);
    }
    set_body() {
      this.widget.addClass("onboarding-widget-box");
      if (this.is_dismissed()) {
        this.widget.hide();
      } else {
        this.make_body();
      }
    }
    is_dismissed() {
      if (this.in_customize_mode)
        return false;
      let dismissed = JSON.parse(localStorage.getItem("dismissed-onboarding") || "{}");
      if (Object.keys(dismissed).includes(this.title)) {
        let last_hidden = new Date(dismissed[this.title]);
        let today = new Date();
        let diff = frappe.datetime.get_hour_diff(today, last_hidden);
        return diff < 24;
      }
      return false;
    }
    set_actions() {
      if (this.in_customize_mode)
        return;
      this.action_area.empty();
      const dismiss = $(`<div class="small" style="cursor:pointer;">${__("Dismiss", null, "Stop showing the onboarding widget.")}</div>`);
      dismiss.on("click", () => {
        let dismissed = JSON.parse(localStorage.getItem("dismissed-onboarding") || "{}");
        dismissed[this.title] = frappe.datetime.now_datetime();
        localStorage.setItem("dismissed-onboarding", JSON.stringify(dismissed));
        this.delete(true, true);
        this.widget.closest(".ce-block").hide();
      });
      dismiss.appendTo(this.action_area);
    }
    get_onboarding_data() {
      return frappe.model.with_doc("Module Onboarding", this.onboarding_name).then((onboarding_doc) => {
        if (onboarding_doc) {
          this.onboarding_doc = onboarding_doc;
          this.label = onboarding_doc.label;
          this.title = onboarding_doc.title || __("Let's Get Started");
          this.subtitle = onboarding_doc.subtitle;
          this.success = onboarding_doc.success;
          this.docs_url = onboarding_doc.docs_url;
          this.user_can_dismiss = onboarding_doc.user_can_dismiss;
          const method = "frappe.desk.doctype.onboarding_step.onboarding_step.get_onboarding_steps";
          return frappe.xcall(method, { ob_steps: onboarding_doc.steps }).then((steps) => {
            this.steps = steps;
          });
        }
      });
    }
    async get_first_document(doctype2) {
      const { message: message2 } = await frappe.db.get_value("Form Tour", { "reference_doctype": doctype2 }, ["first_document"]);
      let docname;
      if (message2.first_document) {
        await frappe.db.get_list(doctype2, { order_by: "creation" }).then((res) => {
          if (Array.isArray(res) && res.length)
            docname = res[0].name;
        });
      }
      return docname || "new";
    }
  };

  // frappe/public/js/frappe/widgets/new_widget.js
  var NewWidget = class {
    constructor(opts) {
      Object.assign(this, opts);
      this.make();
    }
    customize() {
      return;
    }
    make() {
      this.make_widget();
      this.widget.appendTo(this.container);
      this.setup_events();
    }
    get_title() {
      let title = `New ${frappe.model.unscrub(this.type)}`;
      return __(title);
    }
    make_widget() {
      const new_widget_class = `new-${frappe.scrub(frappe.model.unscrub(this.type), "-")}-widget`;
      this.widget = $(`<div class="widget new-widget ${new_widget_class}">
				+ ${this.get_title()}
			</div>`);
      this.body = this.widget;
    }
    setup_events() {
      this.widget.on("click", () => {
        if (!this.custom_dialog) {
          this.open_dialog();
        } else {
          this.custom_dialog();
        }
      });
    }
    open_dialog() {
      const dialog_class = get_dialog_constructor(this.type);
      this.dialog = new dialog_class({
        label: this.label,
        type: this.type,
        values: false,
        default_values: this.default_values,
        primary_action: this.on_create
      });
      this.dialog.make();
    }
    delete() {
      this.widget.remove();
    }
  };

  // frappe/public/js/frappe/widgets/number_card_widget.js
  frappe.provide("frappe.utils");
  var NumberCardWidget = class extends Widget {
    constructor(opts) {
      opts.shadow = true;
      super(opts);
    }
    get_config() {
      return {
        name: this.name,
        label: this.label,
        color: this.color,
        hidden: this.hidden
      };
    }
    refresh() {
      this.set_body();
    }
    set_body() {
      this.widget.addClass("number-widget-box");
      this.make_card();
    }
    set_title() {
      $(this.title_field).html(`<div class="number-label">${this.card_doc.label}</div>`);
    }
    make_card() {
      frappe.model.with_doc("Number Card", this.name).then((card) => {
        if (!card) {
          if (this.document_type) {
            frappe.run_serially([
              () => this.create_number_card(),
              () => this.render_card()
            ]);
          } else {
            this.delete(false);
            return;
          }
        } else {
          this.card_doc = card;
          this.render_card();
        }
        this.set_events();
      });
    }
    create_number_card() {
      this.set_doc_args();
      return frappe.xcall("frappe.desk.doctype.number_card.number_card.create_number_card", {
        "args": this.card_doc
      }).then((doc2) => {
        this.name = doc2.name;
        this.card_doc = doc2;
        this.widget.attr("data-widget-name", this.name);
      });
    }
    set_events() {
      $(this.body).click(() => {
        if (this.in_customize_mode || this.card_doc.type == "Custom")
          return;
        this.set_route();
      });
    }
    set_route() {
      const is_document_type = this.card_doc.type !== "Report";
      const name2 = is_document_type ? this.card_doc.document_type : this.card_doc.report_name;
      const route = frappe.utils.generate_route({
        name: name2,
        type: is_document_type ? "doctype" : "report",
        is_query_report: !is_document_type
      });
      if (is_document_type) {
        const filters2 = JSON.parse(this.card_doc.filters_json);
        frappe.route_options = filters2.reduce((acc, filter) => {
          return Object.assign(acc, {
            [`${filter[0]}.${filter[1]}`]: [filter[2], filter[3]]
          });
        }, {});
      }
      frappe.set_route(route);
    }
    set_doc_args() {
      this.card_doc = Object.assign({}, {
        document_type: this.document_type,
        label: this.label,
        function: this.function,
        aggregate_function_based_on: this.aggregate_function_based_on,
        color: this.color,
        filters_json: this.stats_filter
      });
    }
    get_settings(type) {
      this.filters = this.get_filters();
      const settings_map = {
        "Custom": {
          method: this.card_doc.method,
          args: {
            filters: this.filters
          },
          get_number: (res) => this.get_number_for_custom_card(res)
        },
        "Report": {
          method: "frappe.desk.query_report.run",
          args: {
            report_name: this.card_doc.report_name,
            filters: this.filters,
            ignore_prepared_report: 1
          },
          get_number: (res) => this.get_number_for_report_card(res)
        },
        "Document Type": {
          method: "frappe.desk.doctype.number_card.number_card.get_result",
          args: {
            doc: this.card_doc,
            filters: this.filters
          },
          get_number: (res) => this.get_number_for_doctype_card(res)
        }
      };
      return settings_map[type];
    }
    get_filters() {
      const filters2 = frappe.dashboard_utils.get_all_filters(this.card_doc);
      return filters2;
    }
    render_card() {
      this.prepare_actions();
      this.set_title();
      this.set_loading_state();
      if (!this.card_doc.type) {
        this.card_doc.type = "Document Type";
      }
      this.settings = this.get_settings(this.card_doc.type);
      frappe.run_serially([
        () => this.render_number(),
        () => this.render_stats()
      ]);
    }
    set_loading_state() {
      $(this.body).html(`<div class="number-card-loading text-muted">
			${__("Loading...")}
		</div>`);
    }
    get_number() {
      return frappe.xcall(this.settings.method, this.settings.args).then((res) => {
        return this.settings.get_number(res);
      });
    }
    get_number_for_custom_card(res) {
      if (typeof res === "object") {
        this.number = res.value;
        this.set_formatted_number(res);
      } else {
        this.formatted_number = res;
      }
    }
    get_number_for_doctype_card(res) {
      this.number = res;
      if (this.card_doc.function !== "Count") {
        return frappe.model.with_doctype(this.card_doc.document_type, () => {
          const based_on_df = frappe.meta.get_docfield(this.card_doc.document_type, this.card_doc.aggregate_function_based_on);
          this.set_formatted_number(based_on_df);
        });
      } else {
        this.formatted_number = res;
      }
    }
    get_number_for_report_card(res) {
      const field = this.card_doc.report_field;
      const vals = res.result.reduce((acc, col2) => {
        col2[field] && acc.push(col2[field]);
        return acc;
      }, []);
      const col = res.columns.find((col2) => col2.fieldname == field);
      this.number = frappe.report_utils.get_result_of_fn(this.card_doc.report_function, vals);
      this.set_formatted_number(col);
    }
    set_formatted_number(df) {
      const default_country = frappe.sys_defaults.country;
      const shortened_number = frappe.utils.shorten_number(this.number, default_country, 5);
      let number_parts = shortened_number.split(" ");
      const symbol = number_parts[1] || "";
      const formatted_number = $(frappe.format(number_parts[0], df)).text();
      this.formatted_number = formatted_number + " " + __(symbol);
    }
    render_number() {
      return this.get_number().then(() => {
        $(this.body).html(`<div class="widget-content">
				<div class="number" style="color:${this.card_doc.color}">${this.formatted_number}</div>
				</div>`);
      });
    }
    render_stats() {
      if (this.card_doc.type !== "Document Type") {
        return;
      }
      let caret_html = "";
      let color_class = "";
      return this.get_percentage_stats().then(() => {
        if (this.percentage_stat == 0 || this.percentage_stat == void 0) {
          color_class = "grey-stat";
        } else if (this.percentage_stat > 0) {
          caret_html = `<span class="indicator-pill-round green">
						${frappe.utils.icon("arrow-up-right", "xs")}
					</span>`;
          color_class = "green-stat";
        } else {
          caret_html = `<span class="indicator-pill-round red">
						${frappe.utils.icon("arrow-down-left", "xs")}
					</span>`;
          color_class = "red-stat";
        }
        const stats_qualifier_map = {
          "Daily": __("since yesterday"),
          "Weekly": __("since last week"),
          "Monthly": __("since last month"),
          "Yearly": __("since last year")
        };
        const stats_qualifier = stats_qualifier_map[this.card_doc.stats_time_interval];
        let get_stat = () => {
          if (this.percentage_stat == void 0)
            return NaN;
          const parts = this.percentage_stat.split(" ");
          const symbol = parts[1] || "";
          return Math.abs(parts[0]) + " " + symbol;
        };
        $(this.body).find(".widget-content").append(`<div class="card-stats ${color_class}">
				<span class="percentage-stat-area">
					${caret_html}
					<span class="percentage-stat">
						${get_stat()} %
					</span>
				</span>
				<span class="stat-period text-muted">
					${stats_qualifier}
				</span>
			</div>`);
      });
    }
    get_percentage_stats() {
      return frappe.xcall("frappe.desk.doctype.number_card.number_card.get_percentage_difference", {
        doc: this.card_doc,
        filters: this.filters,
        result: this.number
      }).then((res) => {
        if (res !== void 0) {
          this.percentage_stat = frappe.utils.shorten_number(res);
        }
      });
    }
    prepare_actions() {
      let actions = [
        {
          label: __("Refresh"),
          action: "action-refresh",
          handler: () => {
            this.render_card();
          }
        },
        {
          label: __("Edit"),
          action: "action-edit",
          handler: () => {
            frappe.set_route("Form", "Number Card", this.name);
          }
        }
      ];
      this.set_card_actions(actions);
    }
    set_card_actions(actions) {
      this.card_actions = $(`<div class="card-actions dropdown pull-right">
				<a data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				...
				</a>
				<ul class="dropdown-menu" style="max-height: 300px; overflow-y: auto;">
					${actions.map((action) => `<li class="dropdown-item">
									<a data-action="${action.action}">${action.label}</a>
								</li>`).join("")}
				</ul>
			</div>`);
      this.card_actions.find("a[data-action]").each((i2, o2) => {
        const action = o2.dataset.action;
        $(o2).click(actions.find((a2) => a2.action === action));
      });
      this.action_area.html(this.card_actions);
    }
  };

  // frappe/public/js/frappe/widgets/widget_group.js
  frappe.provide("frappe.widget");
  frappe.widget.widget_factory = {
    chart: ChartWidget,
    base: Widget,
    shortcut: ShortcutWidget,
    links: LinksWidget,
    onboarding: OnboardingWidget,
    number_card: NumberCardWidget
  };
  frappe.widget.make_widget = (opts) => {
    const widget_class = frappe.widget.widget_factory[opts.widget_type];
    if (widget_class) {
      return new widget_class(opts);
    } else {
      console.warn("Invalid Widget Name: " + opts.widget_type);
    }
  };
  var WidgetGroup = class {
    constructor(opts) {
      Object.assign(this, opts);
      this.widgets_list = [];
      this.widgets_dict = {};
      this.widget_order = [];
      this.make();
    }
    make() {
      this.make_container();
      if (this.title) {
        this.set_title();
      } else {
        this.title_area.remove();
      }
      this.widgets && this.make_widgets();
    }
    make_container() {
      const widget_area = $(`<div class="widget-group ${this.class_name || ""}">
				<div class="widget-group-head">
					<div class="widget-group-title"></div>
					<div class="widget-group-control"></div>
				</div>
				<div class="widget-group-body grid-col-${this.columns}">
				</div>
			</div>`);
      this.widget_area = widget_area;
      if (this.hidden)
        this.widget_area.hide();
      this.title_area = widget_area.find(".widget-group-title");
      this.control_area = widget_area.find(".widget-group-control");
      this.body = widget_area.find(".widget-group-body");
      !this.widgets.length && this.widget_area.hide();
      widget_area.appendTo(this.container);
    }
    set_title() {
      this.title_area[0].innerText = this.title;
    }
    make_widgets() {
      this.body.empty();
      this.widgets.forEach((widget) => {
        this.add_widget(widget);
      });
    }
    add_widget(widget) {
      let widget_object = frappe.widget.make_widget(__spreadProps(__spreadValues({}, widget), {
        widget_type: this.type,
        container: this.body,
        height: this.height || null,
        options: __spreadProps(__spreadValues({}, this.options), {
          on_delete: (name2) => this.on_delete(name2)
        })
      }));
      this.widgets_list.push(widget_object);
      this.widgets_dict[widget.name] = widget_object;
      return widget_object;
    }
    remove_widget(widget_obj) {
      widget_obj.widget.remove();
      this.widgets_list.filter((widget) => {
        if (widget.name == widget_obj.name)
          return false;
      });
      delete this.widgets_dict[widget_obj.name];
    }
    customize() {
      if (!this.hidden)
        this.widget_area.show();
      this.widgets_list.forEach((wid) => {
        wid.customize(this.options);
      });
      this.options.allow_create && this.setup_new_widget();
      this.options.allow_sorting && this.setup_sortable();
    }
    setup_new_widget() {
      const max = this.options ? this.options.max_widget_count || Number.POSITIVE_INFINITY : Number.POSITIVE_INFINITY;
      if (this.widgets_list.length < max) {
        this.new_widget = new NewWidget({
          container: this.body,
          type: this.type,
          custom_dialog: this.custom_dialog,
          default_values: this.default_values,
          on_create: (config) => {
            this.new_widget.delete();
            delete this.new_widget;
            config.in_customize_mode = 1;
            let wid = this.add_widget(config);
            wid.customize(this.options);
            if (this.widgets_list.length < max) {
              this.setup_new_widget();
            }
          }
        });
      }
    }
    on_delete(name2, setup_new) {
      this.widgets_list = this.widgets_list.filter((wid) => name2 != wid.name);
      delete this.widgets_dict[name2];
      this.update_widget_order();
      if (!this.new_widget && setup_new)
        this.setup_new_widget();
    }
    update_widget_order() {
      this.widget_order = [];
      this.body.children().each((index, element) => {
        let name2 = element.dataset.widgetName;
        if (name2) {
          this.widget_order.push(name2);
        }
      });
    }
    setup_sortable() {
      const container = this.body[0];
      this.sortable = new Sortable(container, {
        animation: 150,
        handle: ".drag-handle",
        onEnd: () => this.update_widget_order()
      });
    }
    get_widget_config() {
      this.update_widget_order();
      let prepared_dict = {};
      this.widgets_list.forEach((wid) => {
        let config = wid.get_config();
        let name2 = config.docname ? config.docname : config.name;
        prepared_dict[name2] = config;
      });
      return {
        order: this.widget_order,
        widgets: prepared_dict
      };
    }
  };
  var SingleWidgetGroup = class {
    constructor(opts) {
      Object.assign(this, opts);
      this.widgets_list = [];
      this.widgets_dict = {};
      this.make();
    }
    make() {
      this.add_widget(this.widgets);
    }
    add_widget(widget) {
      let widget_object = frappe.widget.make_widget(__spreadProps(__spreadValues({}, widget), {
        widget_type: this.type,
        container: this.container,
        height: this.height || null,
        options: __spreadProps(__spreadValues({}, this.options), {
          on_delete: () => this.on_delete(),
          on_edit: () => this.on_edit(widget_object)
        })
      }));
      this.widgets_list.push(widget_object);
      this.widgets_dict[widget.name] = widget_object;
      return widget_object;
    }
    on_delete() {
      this.api.blocks.delete();
    }
    on_edit(widget_object) {
      this.block.call("on_edit", widget_object);
    }
    customize() {
      this.widgets_list.forEach((wid) => {
        wid.customize(this.options);
      });
    }
  };
  frappe.widget.WidgetGroup = WidgetGroup;
  frappe.widget.SingleWidgetGroup = SingleWidgetGroup;

  // frappe-html:/home/erpnext/erpnext/apps/frappe/frappe/public/js/frappe/ui/sort_selector.html
  frappe.templates["sort_selector"] = `<div class="sort-selector">
	<div class="btn-group">
		<button class="btn btn-default btn-sm btn-order"
			data-value="{{ sort_order }}"
			title="{{ sort_order==="desc" ? "descending" : "ascending" }}">
			<span class="sort-order">
				<svg class="icon icon-sm">
					<use xlink:href="#icon-{{ sort_order==="desc" ? "sort-descending" : "sort-ascending" }}"></use>
				</svg>
			</span>
		</button>
		<button type="button" class="btn btn-default btn-sm sort-selector-button" data-toggle="dropdown">
			<span class="dropdown-text">{{ __(sort_by_label) }}</span>
			<ul class="dropdown-menu dropdown-menu-right">
				{% for value in options %}
				<li>
					<a class="dropdown-item option" data-value="{{ value.fieldname }}">
						{{ __(value.label) }}
					</a>
				</li>
				{% endfor %}
			</ul>
		</button>
	</div>
</div>
`;

  // frappe/public/js/frappe/ui/sort_selector.js
  frappe.ui.SortSelector = class SortSelector {
    constructor(opts) {
      $.extend(this, opts);
      this.labels = {};
      this.make();
    }
    make() {
      this.prepare_args();
      this.parent.find(".sort-selector").remove();
      this.wrapper = $(frappe.render_template("sort_selector", this.args)).appendTo(this.parent);
      this.bind_events();
    }
    bind_events() {
      var me = this;
      this.wrapper.find(".btn-order").on("click", function() {
        let btn = $(this);
        const order = $(this).attr("data-value") === "desc" ? "asc" : "desc";
        const title = $(this).attr("data-value") === "desc" ? "ascending" : "descending";
        btn.attr("data-value", order);
        btn.attr("title", title);
        me.sort_order = order;
        const icon_name = order === "asc" ? "sort-ascending" : "sort-descending";
        btn.find(".sort-order").html(frappe.utils.icon(icon_name, "sm"));
        (me.onchange || me.change)(me.sort_by, me.sort_order);
      });
      this.wrapper.find(".dropdown-menu a.option").on("click", function() {
        me.sort_by = $(this).attr("data-value");
        me.wrapper.find(".dropdown-text").html($(this).html());
        (me.onchange || me.change)(me.sort_by, me.sort_order);
      });
    }
    prepare_args() {
      var me = this;
      if (!this.args) {
        this.args = {};
      }
      if (this.args && typeof this.args === "string") {
        var order_by = this.args;
        this.args = {};
        if (order_by.includes("`.`")) {
          order_by = order_by.split(".")[1];
        }
        var parts = order_by.split(" ");
        if (parts.length === 2) {
          var fieldname = strip(parts[0], "`");
          this.args.sort_by = fieldname;
          this.args.sort_order = parts[1];
        }
      }
      if (this.args.options) {
        this.args.options.forEach(function(o2) {
          me.labels[o2.fieldname] = o2.label;
        });
      }
      this.setup_from_doctype();
      if (this.args.sort_by && !this.args.sort_by_label) {
        this.args.options.every(function(o2) {
          if (o2.fieldname === me.args.sort_by) {
            me.args.sort_by_label = o2.label;
            return false;
          }
          return true;
        });
      }
    }
    setup_from_doctype() {
      var me = this;
      var meta2 = frappe.get_meta(this.doctype);
      if (!meta2)
        return;
      var { meta_sort_field, meta_sort_order } = this.get_meta_sort_field();
      if (!this.args.sort_by) {
        if (meta_sort_field) {
          this.args.sort_by = meta_sort_field;
          this.args.sort_order = meta_sort_order;
        } else {
          this.args.sort_by = "modified";
          this.args.sort_order = "desc";
        }
      }
      if (!this.args.sort_by_label) {
        this.args.sort_by_label = this.get_label(this.args.sort_by);
      }
      if (!this.args.options) {
        var _options = [
          { "fieldname": "modified" },
          { "fieldname": "name" },
          { "fieldname": "creation" },
          { "fieldname": "idx" }
        ];
        if (meta2.title_field) {
          _options.splice(1, 0, { "fieldname": meta2.title_field });
        }
        if (meta_sort_field) {
          _options.splice(1, 0, { "fieldname": meta_sort_field });
        }
        meta2.fields.forEach(function(df) {
          if ((df.mandatory || df.bold || df.in_list_view) && frappe.model.is_value_type(df.fieldtype) && frappe.perm.has_perm(me.doctype, df.permlevel, "read")) {
            _options.push({ fieldname: df.fieldname, label: df.label });
          }
        });
        _options.forEach((option) => {
          if (!option.label) {
            option.label = me.get_label(option.fieldname);
          }
        });
        this.args.options = _options.uniqBy((obj) => {
          return obj.fieldname;
        });
      }
      this.sort_by = this.args.sort_by;
      this.sort_order = this.args.sort_order;
    }
    get_meta_sort_field() {
      var meta2 = frappe.get_meta(this.doctype);
      if (!meta2) {
        return {
          meta_sort_field: null,
          meta_sort_order: null
        };
      }
      if (meta2.sort_field && meta2.sort_field.includes(",")) {
        var parts = meta2.sort_field.split(",")[0].split(" ");
        return {
          meta_sort_field: parts[0],
          meta_sort_order: parts[1]
        };
      } else {
        return {
          meta_sort_field: meta2.sort_field || "modified",
          meta_sort_order: meta2.sort_order ? meta2.sort_order.toLowerCase() : ""
        };
      }
    }
    get_label(fieldname) {
      if (fieldname === "idx") {
        return __("Most Used");
      } else {
        return this.labels[fieldname] || frappe.meta.get_label(this.doctype, fieldname);
      }
    }
    get_sql_string() {
      return "`tab" + this.doctype + "`.`" + this.sort_by + "` " + this.sort_order;
    }
  };

  // frappe-html:/home/erpnext/erpnext/apps/frappe/frappe/public/js/frappe/change_log.html
  frappe.templates["change_log"] = `{% for (var i=0, l=change_log.length; i < l; i++) {
    var app_info = change_log[i]; %}
	{% if (i > 0) { %} <hr> {% } %}
	<div class="text-left app-change-log">
		<h2 style="margin-top: 10px;">
            {{ app_info.title }}
			<small>{{ __("updated to {0}", [app_info.version]) }}</small>
		</h2>
		<div class="app-change-log-body">
		{% for (var x=0, y=app_info.change_log.length; x < y; x++) {
            var version_info = app_info.change_log[x];
            if(version_info) { %}
    			<p>{{ frappe.markdown(version_info[1]) }}</p>
		    {% }
        } %}
    	</div>
	</div>
{% } %}
`;

  // frappe-html:/home/erpnext/erpnext/apps/frappe/frappe/public/js/frappe/ui/workspace_loading_skeleton.html
  frappe.templates["workspace_loading_skeleton"] = `<div class="workspace-skeleton">
	<div class="widget-group">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
			<div class="widget shortcut-widget-box skeleton-card"></div>
		</div>
	</div>
	<div class="widget-group skeleton-body">
		<div class="widget-group-head skeleton-header">
			<div class="widget-group-title skeleton-card"></div>
		</div>
		<div class="widget-group-body grid-col-3">
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
			<div class="widget links-widget-box skeleton-card"></div>
		</div>
	</div>
</div>
`;

  // frappe-html:/home/erpnext/erpnext/apps/frappe/frappe/public/js/frappe/ui/workspace_sidebar_loading_skeleton.html
  frappe.templates["workspace_sidebar_loading_skeleton"] = `<div class="workspace-sidebar-skeleton">
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
	<div class="widget-group-body">
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box child skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
		<div class="widget sidebar-box skeleton-card"></div>
	</div>
</div>`;

  // frappe/public/js/frappe/desk.js
  frappe.start_app = function() {
    if (!frappe.Application)
      return;
    frappe.assets.check();
    frappe.provide("frappe.app");
    frappe.provide("frappe.desk");
    frappe.app = new frappe.Application();
  };
  $(document).ready(function() {
    if (!frappe.utils.supportsES6) {
      frappe.msgprint({
        indicator: "red",
        title: __("Browser not supported"),
        message: __("Some of the features might not work in your browser. Please update your browser to the latest version.")
      });
    }
    frappe.start_app();
  });
  frappe.Application = class Application {
    constructor() {
      this.startup();
    }
    startup() {
      frappe.socketio.init();
      frappe.model.init();
      if (frappe.boot.status === "failed") {
        frappe.msgprint({
          message: frappe.boot.error,
          title: __("Session Start Failed"),
          indicator: "red"
        });
        throw "boot failed";
      }
      this.setup_frappe_vue();
      this.load_bootinfo();
      this.load_user_permissions();
      this.make_nav_bar();
      this.set_favicon();
      this.setup_analytics();
      this.set_fullwidth_if_enabled();
      this.add_browser_class();
      this.setup_energy_point_listeners();
      this.setup_copy_doc_listener();
      frappe.ui.keys.setup();
      frappe.ui.keys.add_shortcut({
        shortcut: "shift+ctrl+g",
        description: __("Switch Theme"),
        action: () => {
          if (frappe.theme_switcher && frappe.theme_switcher.dialog.is_visible) {
            frappe.theme_switcher.hide();
          } else {
            frappe.theme_switcher = new frappe.ui.ThemeSwitcher();
            frappe.theme_switcher.show();
          }
        }
      });
      frappe.ui.add_system_theme_switch_listener();
      const root = document.documentElement;
      const observer = new MutationObserver(() => {
        frappe.ui.set_theme();
      });
      observer.observe(root, {
        attributes: true,
        attributeFilter: ["data-theme-mode"]
      });
      frappe.ui.set_theme();
      this.make_page_container();
      this.set_route();
      $(document).trigger("startup");
      $(document).trigger("app_ready");
      if (frappe.boot.messages) {
        frappe.msgprint(frappe.boot.messages);
      }
      if (frappe.user_roles.includes("System Manager")) {
        setTimeout(() => {
          this.show_change_log();
          this.show_update_available();
        }, 1e3);
      }
      if (!frappe.boot.developer_mode) {
        let console_security_message = __("Using this console may allow attackers to impersonate you and steal your information. Do not enter or paste code that you do not understand.");
        console.log(`%c${console_security_message}`, "font-size: large");
      }
      this.show_notes();
      if (frappe.ui.startup_setup_dialog && !frappe.boot.setup_complete) {
        frappe.ui.startup_setup_dialog.pre_show();
        frappe.ui.startup_setup_dialog.show();
      }
      frappe.realtime.on("version-update", function() {
        var dialog = frappe.msgprint({
          message: __("The application has been updated to a new version, please refresh this page"),
          indicator: "green",
          title: __("Version Updated")
        });
        dialog.set_primary_action(__("Refresh"), function() {
          location.reload(true);
        });
        dialog.get_close_btn().toggle(false);
      });
      this.setup_build_events();
      if (frappe.sys_defaults.email_user_password) {
        var email_list = frappe.sys_defaults.email_user_password.split(",");
        for (var u2 in email_list) {
          if (email_list[u2] === frappe.user.name) {
            this.set_password(email_list[u2]);
          }
        }
      }
      this.link_preview = new frappe.ui.LinkPreview();
      if (!frappe.boot.developer_mode) {
        setInterval(function() {
          frappe.call({
            method: "frappe.core.page.background_jobs.background_jobs.get_scheduler_status",
            callback: function(r2) {
              if (r2.message[0] == __("Inactive")) {
                frappe.call("frappe.utils.scheduler.activate_scheduler");
              }
            }
          });
        }, 3e5);
        if (frappe.user.has_role("System Manager")) {
          setInterval(function() {
            frappe.call({
              method: "frappe.core.doctype.log_settings.log_settings.has_unseen_error_log",
              args: {
                user: frappe.session.user
              },
              callback: function(r2) {
                if (r2.message.show_alert) {
                  frappe.show_alert({
                    indicator: "red",
                    message: r2.message.message
                  });
                }
              }
            });
          }, 6e5);
        }
      }
    }
    set_route() {
      frappe.flags.setting_original_route = true;
      if (frappe.boot && localStorage.getItem("session_last_route")) {
        frappe.set_route(localStorage.getItem("session_last_route"));
        localStorage.removeItem("session_last_route");
      } else {
        frappe.router.route();
      }
      frappe.after_ajax(() => frappe.flags.setting_original_route = false);
      frappe.router.on("change", () => {
        $(".tooltip").hide();
      });
    }
    setup_frappe_vue() {
      Vue.prototype.__ = window.__;
      Vue.prototype.frappe = window.frappe;
    }
    set_password(user) {
      var me = this;
      frappe.call({
        method: "frappe.core.doctype.user.user.get_email_awaiting",
        args: {
          "user": user
        },
        callback: function(email_account) {
          email_account = email_account["message"];
          if (email_account) {
            var i2 = 0;
            if (i2 < email_account.length) {
              me.email_password_prompt(email_account, user, i2);
            }
          }
        }
      });
    }
    email_password_prompt(email_account, user, i2) {
      var me = this;
      const email_id = email_account[i2]["email_id"];
      let d2 = new frappe.ui.Dialog({
        title: __("Password missing in Email Account"),
        fields: [
          {
            "fieldname": "password",
            "fieldtype": "Password",
            "label": __("Please enter the password for: <b>{0}</b>", [email_id], "Email Account"),
            "reqd": 1
          },
          {
            "fieldname": "submit",
            "fieldtype": "Button",
            "label": __("Submit", null, "Submit password for Email Account")
          }
        ]
      });
      d2.get_input("submit").on("click", function() {
        d2.hide();
        var s2 = new frappe.ui.Dialog({
          title: __("Checking one moment"),
          fields: [{
            "fieldtype": "HTML",
            "fieldname": "checking"
          }]
        });
        s2.fields_dict.checking.$wrapper.html('<i class="fa fa-spinner fa-spin fa-4x"></i>');
        s2.show();
        frappe.call({
          method: "frappe.email.doctype.email_account.email_account.set_email_password",
          args: {
            "email_account": email_account[i2]["email_account"],
            "user": user,
            "password": d2.get_value("password")
          },
          callback: function(passed) {
            s2.hide();
            d2.hide();
            if (!passed["message"]) {
              frappe.show_alert({ message: __("Login Failed please try again"), indicator: "error" }, 5);
              me.email_password_prompt(email_account, user, i2);
            } else {
              if (i2 + 1 < email_account.length) {
                i2 = i2 + 1;
                me.email_password_prompt(email_account, user, i2);
              }
            }
          }
        });
      });
      d2.show();
    }
    load_bootinfo() {
      if (frappe.boot) {
        this.setup_workspaces();
        frappe.model.sync(frappe.boot.docs);
        this.check_metadata_cache_status();
        this.set_globals();
        this.sync_pages();
        frappe.router.setup();
        this.setup_moment();
        if (frappe.boot.print_css) {
          frappe.dom.set_style(frappe.boot.print_css, "print-style");
        }
        frappe.user.name = frappe.boot.user.name;
        frappe.router.setup();
      } else {
        this.set_as_guest();
      }
    }
    setup_workspaces() {
      frappe.modules = {};
      frappe.workspaces = {};
      for (let page of frappe.boot.allowed_workspaces || []) {
        frappe.modules[page.module] = page;
        frappe.workspaces[frappe.router.slug(page.name)] = page;
      }
    }
    load_user_permissions() {
      frappe.defaults.update_user_permissions();
      frappe.realtime.on("update_user_permissions", frappe.utils.debounce(() => {
        frappe.defaults.update_user_permissions();
      }, 500));
    }
    check_metadata_cache_status() {
      if (frappe.boot.metadata_version != localStorage.metadata_version) {
        frappe.assets.clear_local_storage();
        frappe.assets.init_local_storage();
      }
    }
    set_globals() {
      frappe.session.user = frappe.boot.user.name;
      frappe.session.logged_in_user = frappe.boot.user.name;
      frappe.session.user_email = frappe.boot.user.email;
      frappe.session.user_fullname = frappe.user_info().fullname;
      frappe.user_defaults = frappe.boot.user.defaults;
      frappe.user_roles = frappe.boot.user.roles;
      frappe.sys_defaults = frappe.boot.sysdefaults;
      frappe.ui.py_date_format = frappe.boot.sysdefaults.date_format.replace("dd", "%d").replace("mm", "%m").replace("yyyy", "%Y");
      frappe.boot.user.last_selected_values = {};
      Object.defineProperties(window, {
        "user": {
          get: function() {
            console.warn("Please use `frappe.session.user` instead of `user`. It will be deprecated soon.");
            return frappe.session.user;
          }
        },
        "user_fullname": {
          get: function() {
            console.warn("Please use `frappe.session.user_fullname` instead of `user_fullname`. It will be deprecated soon.");
            return frappe.session.user;
          }
        },
        "user_email": {
          get: function() {
            console.warn("Please use `frappe.session.user_email` instead of `user_email`. It will be deprecated soon.");
            return frappe.session.user_email;
          }
        },
        "user_defaults": {
          get: function() {
            console.warn("Please use `frappe.user_defaults` instead of `user_defaults`. It will be deprecated soon.");
            return frappe.user_defaults;
          }
        },
        "roles": {
          get: function() {
            console.warn("Please use `frappe.user_roles` instead of `roles`. It will be deprecated soon.");
            return frappe.user_roles;
          }
        },
        "sys_defaults": {
          get: function() {
            console.warn("Please use `frappe.sys_defaults` instead of `sys_defaults`. It will be deprecated soon.");
            return frappe.user_roles;
          }
        }
      });
    }
    sync_pages() {
      if (localStorage["page_info"]) {
        frappe.boot.allowed_pages = [];
        var page_info = JSON.parse(localStorage["page_info"]);
        $.each(frappe.boot.page_info, function(name2, p2) {
          if (!page_info[name2] || page_info[name2].modified != p2.modified) {
            delete localStorage["_page:" + name2];
          }
          frappe.boot.allowed_pages.push(name2);
        });
      } else {
        frappe.boot.allowed_pages = Object.keys(frappe.boot.page_info);
      }
      localStorage["page_info"] = JSON.stringify(frappe.boot.page_info);
    }
    set_as_guest() {
      frappe.session.user = "Guest";
      frappe.session.user_email = "";
      frappe.session.user_fullname = "Guest";
      frappe.user_defaults = {};
      frappe.user_roles = ["Guest"];
      frappe.sys_defaults = {};
    }
    make_page_container() {
      if ($("#body").length) {
        $(".splash").remove();
        frappe.temp_container = $("<div id='temp-container' style='display: none;'>").appendTo("body");
        frappe.container = new frappe.views.Container();
      }
    }
    make_nav_bar() {
      if (frappe.boot && frappe.boot.home_page !== "setup-wizard") {
        frappe.frappe_toolbar = new frappe.ui.toolbar.Toolbar();
      }
    }
    logout() {
      var me = this;
      me.logged_out = true;
      return frappe.call({
        method: "logout",
        callback: function(r2) {
          if (r2.exc) {
            return;
          }
          me.redirect_to_login();
        }
      });
    }
    handle_session_expired() {
      if (!frappe.app.session_expired_dialog) {
        var dialog = new frappe.ui.Dialog({
          title: __("Session Expired"),
          keep_open: true,
          fields: [
            {
              fieldtype: "Password",
              fieldname: "password",
              label: __("Please Enter Your Password to Continue")
            }
          ],
          onhide: () => {
            if (!dialog.logged_in) {
              frappe.app.redirect_to_login();
            }
          }
        });
        dialog.set_primary_action(__("Login"), () => {
          dialog.set_message(__("Authenticating..."));
          frappe.call({
            method: "login",
            args: {
              usr: frappe.session.user,
              pwd: dialog.get_values().password
            },
            callback: (r2) => {
              if (r2.message === "Logged In") {
                dialog.logged_in = true;
                $(".modal-backdrop").css({
                  "opacity": "",
                  "background-color": "#334143"
                });
              }
              dialog.hide();
            },
            statusCode: () => {
              dialog.hide();
            }
          });
        });
        frappe.app.session_expired_dialog = dialog;
      }
      if (!frappe.app.session_expired_dialog.display) {
        frappe.app.session_expired_dialog.show();
        $(".modal-backdrop").css({
          "opacity": 1,
          "background-color": "#4B4C9D"
        });
      }
    }
    redirect_to_login() {
      window.location.href = "/";
    }
    set_favicon() {
      var link = $('link[type="image/x-icon"]').remove().attr("href");
      $('<link rel="shortcut icon" href="' + link + '" type="image/x-icon">').appendTo("head");
      $('<link rel="icon" href="' + link + '" type="image/x-icon">').appendTo("head");
    }
    trigger_primary_action() {
      $(document.activeElement).blur();
      setTimeout(() => {
        if (window.cur_dialog && cur_dialog.display) {
          cur_dialog.get_primary_btn().trigger("click");
        } else if (cur_frm && cur_frm.page.btn_primary.is(":visible")) {
          cur_frm.page.btn_primary.trigger("click");
        } else if (frappe.container.page.save_action) {
          frappe.container.page.save_action();
        }
      }, 100);
    }
    show_change_log() {
      var me = this;
      let change_log = frappe.boot.change_log;
      if (!Array.isArray(change_log) || !change_log.length || window.Cypress) {
        return;
      }
      var change_log_dialog = frappe.msgprint({
        message: frappe.render_template("change_log", { "change_log": change_log }),
        title: __("Updated To A New Version \u{1F389}"),
        wide: true
      });
      change_log_dialog.keep_open = true;
      change_log_dialog.custom_onhide = function() {
        frappe.call({
          "method": "frappe.utils.change_log.update_last_known_versions"
        });
        me.show_notes();
      };
    }
    show_update_available() {
      if (frappe.boot.sysdefaults.disable_system_update_notification)
        return;
      frappe.call({
        "method": "frappe.utils.change_log.show_update_popup"
      });
    }
    setup_analytics() {
      if (window.mixpanel) {
        window.mixpanel.identify(frappe.session.user);
        window.mixpanel.people.set({
          "$first_name": frappe.boot.user.first_name,
          "$last_name": frappe.boot.user.last_name,
          "$created": frappe.boot.user.creation,
          "$email": frappe.session.user
        });
      }
    }
    add_browser_class() {
      $("html").addClass(frappe.utils.get_browser().name.toLowerCase());
    }
    set_fullwidth_if_enabled() {
      frappe.ui.toolbar.set_fullwidth_if_enabled();
    }
    show_notes() {
      var me = this;
      if (frappe.boot.notes.length) {
        frappe.boot.notes.forEach(function(note) {
          if (!note.seen || note.notify_on_every_login) {
            var d2 = frappe.msgprint({ message: note.content, title: note.title });
            d2.keep_open = true;
            d2.custom_onhide = function() {
              note.seen = true;
              if (!note.notify_on_every_login) {
                frappe.call({
                  method: "frappe.desk.doctype.note.note.mark_as_seen",
                  args: {
                    note: note.name
                  }
                });
              }
              me.show_notes();
            };
          }
        });
      }
    }
    setup_build_events() {
      if (frappe.boot.developer_mode) {
        frappe.require("build_events.bundle.js");
      }
    }
    setup_energy_point_listeners() {
      frappe.realtime.on("energy_point_alert", (message2) => {
        frappe.show_alert(message2);
      });
    }
    setup_copy_doc_listener() {
      $("body").on("paste", (e2) => {
        try {
          let pasted_data = frappe.utils.get_clipboard_data(e2);
          let doc2 = JSON.parse(pasted_data);
          if (doc2.doctype) {
            e2.preventDefault();
            const sleep = frappe.utils.sleep;
            frappe.dom.freeze(__("Creating {0}", [doc2.doctype]) + "...");
            sleep(500).then(() => {
              let res = frappe.model.with_doctype(doc2.doctype, () => {
                let newdoc = frappe.model.copy_doc(doc2);
                newdoc.__newname = doc2.name;
                delete doc2.name;
                newdoc.idx = null;
                newdoc.__run_link_triggers = false;
                frappe.set_route("Form", newdoc.doctype, newdoc.name);
                frappe.dom.unfreeze();
              });
              res && res.fail(frappe.dom.unfreeze);
            });
          }
        } catch (e3) {
        }
      });
    }
    setup_moment() {
      moment.updateLocale("en", {
        week: {
          dow: frappe.datetime.get_first_day_of_the_week_index()
        }
      });
      moment.locale("en");
      moment.user_utc_offset = moment().utcOffset();
      if (frappe.boot.timezone_info) {
        moment.tz.add(frappe.boot.timezone_info);
      }
    }
  };
  frappe.get_module = function(m2, default_module) {
    var module2 = frappe.modules[m2] || default_module;
    if (!module2) {
      return;
    }
    if (module2._setup) {
      return module2;
    }
    if (!module2.label) {
      module2.label = m2;
    }
    if (!module2._label) {
      module2._label = __(module2.label);
    }
    module2._setup = true;
    return module2;
  };

  // frappe/public/js/frappe/query_string.js
  frappe.provide("frappe.utils");
  function get_url_arg(name2) {
    return get_query_params()[name2] || "";
  }
  function get_query_string(url) {
    if (url.includes("?")) {
      return url.slice(url.indexOf("?") + 1);
    } else {
      return "";
    }
  }
  function get_query_params(query_string) {
    var query_params = {};
    if (!query_string) {
      query_string = location.search.substring(1);
    }
    var query_list = query_string.split("&");
    for (var i2 = 0, l2 = query_list.length; i2 < l2; i2++) {
      var pair = query_list[i2].split(/=(.+)/);
      var key2 = pair[0];
      if (!key2) {
        continue;
      }
      var value = pair[1];
      if (typeof value === "string") {
        value = value.replace(/\+/g, "%20");
        try {
          value = decodeURIComponent(value);
        } catch (e2) {
        }
      }
      if (key2 in query_params) {
        if (typeof query_params[key2] === "undefined") {
          query_params[key2] = [];
        } else if (typeof query_params[key2] === "string") {
          query_params[key2] = [query_params[key2]];
        }
        query_params[key2].push(value);
      } else {
        query_params[key2] = value;
      }
    }
    return query_params;
  }
  function make_query_string(obj, encode = true) {
    let query_params = [];
    for (let key2 in obj) {
      let value = obj[key2];
      if (value === void 0 || value === "" || value === null) {
        continue;
      }
      if (typeof value === "object") {
        value = JSON.stringify(value);
      }
      if (encode) {
        key2 = encodeURIComponent(key2);
        value = encodeURIComponent(value);
      }
      query_params.push(`${key2}=${value}`);
    }
    return "?" + query_params.join("&");
  }
  Object.assign(frappe.utils, {
    get_url_arg,
    get_query_string,
    get_query_params,
    make_query_string
  });

  // frappe/public/js/frappe/utils/energy_point_utils.js
  frappe.provide("frappe.energy_points");
  Object.assign(frappe.energy_points, {
    get_points(points) {
      return `<span class="bold" style="color: ${points >= 0 ? "#45A163" : "#e42121"}">
			${points > 0 ? "+" : ""}${points}
		</span>`;
    },
    format_form_log(log) {
      const separator = `<span>&nbsp;-&nbsp;</span>`;
      const formatted_log = `<span>
			<!--${this.get_points(log.points)}&nbsp;-->
			<a href="/app/energy-point-log/${log.name}">${this.get_form_log_message(log)}</a>
			${log.reason ? separator + log.reason : ""}
		</span>`;
      return formatted_log;
    },
    format_history_log(log) {
      const separator = `<span>&nbsp;-&nbsp;</span>`;
      const route = frappe.utils.get_form_link(log.reference_doctype, log.reference_name);
      const formatted_log = `<div class="flex">
			<span class="${log.points >= 0 ? "green" : "red"} mr-2">
				${this.get_points(log.points)}
			</span>
			<a href="${route}" class="text-muted">${this.get_history_log_message(log)}</a>
			${log.reason ? separator + log.reason : ""}
			${separator + frappe.datetime.comment_when(log.creation)}
		</div>`;
      return formatted_log;
    },
    get_history_log_message(log) {
      const owner_name = frappe.user.full_name(log.owner).bold();
      const ref_doc = log.reference_name;
      if (log.type === "Appreciation") {
        return __("{0} appreciated on {1}", [owner_name, ref_doc]);
      }
      if (log.type === "Criticism") {
        return __("{0} criticized on {1}", [owner_name, ref_doc]);
      }
      if (log.type === "Revert") {
        return __("{0} reverted {1}", [owner_name, log.revert_of]);
      }
      return __("via automatic rule {0} on {1}", [log.rule.bold(), ref_doc]);
    },
    get_form_log_message(log) {
      const owner_name = frappe.user.full_name(log.owner).bold();
      const user = frappe.user.full_name(log.user).bold();
      if (log.type === "Appreciation") {
        return __("{0} appreciated {1}", [owner_name, user]);
      }
      if (log.type === "Criticism") {
        return __("{0} criticized {1}", [owner_name, user]);
      }
      if (log.type === "Revert") {
        return __("{0} reverted {1}", [owner_name, log.revert_of]);
      }
      return __("gained by {0} via automatic rule {1}", [user, log.rule.bold()]);
    }
  });

  // frappe/public/js/desk.bundle.js
  var import_dashboard_utils = __toESM(require_dashboard_utils());

  // node_modules/frappe-charts/dist/frappe-charts.esm.js
  function t(e2) {
    return (t = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(t3) {
      return typeof t3;
    } : function(t3) {
      return t3 && typeof Symbol == "function" && t3.constructor === Symbol && t3 !== Symbol.prototype ? "symbol" : typeof t3;
    })(e2);
  }
  function e(t3, e2) {
    if (!(t3 instanceof e2))
      throw new TypeError("Cannot call a class as a function");
  }
  function n(t3, e2) {
    for (var n2 = 0; n2 < e2.length; n2++) {
      var i2 = e2[n2];
      i2.enumerable = i2.enumerable || false, i2.configurable = true, "value" in i2 && (i2.writable = true), Object.defineProperty(t3, i2.key, i2);
    }
  }
  function i(t3, e2, i2) {
    return e2 && n(t3.prototype, e2), i2 && n(t3, i2), t3;
  }
  function a(t3, e2) {
    if (typeof e2 != "function" && e2 !== null)
      throw new TypeError("Super expression must either be null or a function");
    t3.prototype = Object.create(e2 && e2.prototype, { constructor: { value: t3, writable: true, configurable: true } }), e2 && r(t3, e2);
  }
  function s(t3) {
    return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function(t4) {
      return t4.__proto__ || Object.getPrototypeOf(t4);
    })(t3);
  }
  function r(t3, e2) {
    return (r = Object.setPrototypeOf || function(t4, e3) {
      return t4.__proto__ = e3, t4;
    })(t3, e2);
  }
  function o(t3, e2) {
    return !e2 || typeof e2 != "object" && typeof e2 != "function" ? function(t4) {
      if (t4 === void 0)
        throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
      return t4;
    }(t3) : e2;
  }
  function l(t3) {
    var e2 = function() {
      if (typeof Reflect == "undefined" || !Reflect.construct)
        return false;
      if (Reflect.construct.sham)
        return false;
      if (typeof Proxy == "function")
        return true;
      try {
        return Date.prototype.toString.call(Reflect.construct(Date, [], function() {
        })), true;
      } catch (t4) {
        return false;
      }
    }();
    return function() {
      var n2, i2 = s(t3);
      if (e2) {
        var a2 = s(this).constructor;
        n2 = Reflect.construct(i2, arguments, a2);
      } else
        n2 = i2.apply(this, arguments);
      return o(this, n2);
    };
  }
  function c(t3, e2, n2) {
    return (c = typeof Reflect != "undefined" && Reflect.get ? Reflect.get : function(t4, e3, n3) {
      var i2 = function(t5, e4) {
        for (; !Object.prototype.hasOwnProperty.call(t5, e4) && (t5 = s(t5)) !== null; )
          ;
        return t5;
      }(t4, e3);
      if (i2) {
        var a2 = Object.getOwnPropertyDescriptor(i2, e3);
        return a2.get ? a2.get.call(n3) : a2.value;
      }
    })(t3, e2, n2 || t3);
  }
  function u(t3, e2) {
    return function(t4) {
      if (Array.isArray(t4))
        return t4;
    }(t3) || function(t4, e3) {
      if (typeof Symbol == "undefined" || !(Symbol.iterator in Object(t4)))
        return;
      var n2 = [], i2 = true, a2 = false, s2 = void 0;
      try {
        for (var r2, o2 = t4[Symbol.iterator](); !(i2 = (r2 = o2.next()).done) && (n2.push(r2.value), !e3 || n2.length !== e3); i2 = true)
          ;
      } catch (t5) {
        a2 = true, s2 = t5;
      } finally {
        try {
          i2 || o2.return == null || o2.return();
        } finally {
          if (a2)
            throw s2;
        }
      }
      return n2;
    }(t3, e2) || d(t3, e2) || function() {
      throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function h(t3) {
    return function(t4) {
      if (Array.isArray(t4))
        return p(t4);
    }(t3) || function(t4) {
      if (typeof Symbol != "undefined" && Symbol.iterator in Object(t4))
        return Array.from(t4);
    }(t3) || d(t3) || function() {
      throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }();
  }
  function d(t3, e2) {
    if (t3) {
      if (typeof t3 == "string")
        return p(t3, e2);
      var n2 = Object.prototype.toString.call(t3).slice(8, -1);
      return n2 === "Object" && t3.constructor && (n2 = t3.constructor.name), n2 === "Map" || n2 === "Set" ? Array.from(t3) : n2 === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n2) ? p(t3, e2) : void 0;
    }
  }
  function p(t3, e2) {
    (e2 == null || e2 > t3.length) && (e2 = t3.length);
    for (var n2 = 0, i2 = new Array(e2); n2 < e2; n2++)
      i2[n2] = t3[n2];
    return i2;
  }
  function f2(t3, e2) {
    return typeof t3 == "string" ? (e2 || document).querySelector(t3) : t3 || null;
  }
  function v(t3) {
    var e2 = t3.getBoundingClientRect();
    return { top: e2.top + (document.documentElement.scrollTop || document.body.scrollTop), left: e2.left + (document.documentElement.scrollLeft || document.body.scrollLeft) };
  }
  function g(t3) {
    return t3.offsetParent === null;
  }
  function m(t3) {
    var e2 = t3.getBoundingClientRect();
    return e2.top >= 0 && e2.left >= 0 && e2.bottom <= (window.innerHeight || document.documentElement.clientHeight) && e2.right <= (window.innerWidth || document.documentElement.clientWidth);
  }
  !function(t3, e2) {
    e2 === void 0 && (e2 = {});
    var n2 = e2.insertAt;
    if (t3 && typeof document != "undefined") {
      var i2 = document.head || document.getElementsByTagName("head")[0], a2 = document.createElement("style");
      a2.type = "text/css", n2 === "top" && i2.firstChild ? i2.insertBefore(a2, i2.firstChild) : i2.appendChild(a2), a2.styleSheet ? a2.styleSheet.cssText = t3 : a2.appendChild(document.createTextNode(t3));
    }
  }(':root {\n  --charts-label-color: #313b44;\n  --charts-axis-line-color: #f4f5f6;\n  --charts-tooltip-title: var(--charts-label-color);\n  --charts-tooltip-label: var(--charts-label-color);\n  --charts-tooltip-value: #192734;\n  --charts-tooltip-bg: #ffffff;\n  --charts-stroke-width: 2px;\n  --charts-dataset-circle-stroke: #ffffff;\n  --charts-dataset-circle-stroke-width: var(--charts-stroke-width);\n  --charts-legend-label: var(--charts-label-color);\n  --charts-legend-value: var(--charts-label-color); }\n\n.chart-container {\n  position: relative;\n  /* for absolutely positioned tooltip */\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif; }\n  .chart-container .axis,\n  .chart-container .chart-label {\n    fill: var(--charts-label-color); }\n    .chart-container .axis line,\n    .chart-container .chart-label line {\n      stroke: var(--charts-axis-line-color); }\n  .chart-container .dataset-units circle {\n    stroke: var(--charts-dataset-circle-stroke);\n    stroke-width: var(--charts-dataset-circle-stroke-width); }\n  .chart-container .dataset-units path {\n    fill: none;\n    stroke-opacity: 1;\n    stroke-width: var(--charts-stroke-width); }\n  .chart-container .dataset-path {\n    stroke-width: var(--charts-stroke-width); }\n  .chart-container .path-group path {\n    fill: none;\n    stroke-opacity: 1;\n    stroke-width: var(--charts-stroke-width); }\n  .chart-container line.dashed {\n    stroke-dasharray: 5, 3; }\n  .chart-container .axis-line .specific-value {\n    text-anchor: start; }\n  .chart-container .axis-line .y-line {\n    text-anchor: end; }\n  .chart-container .axis-line .x-line {\n    text-anchor: middle; }\n  .chart-container .legend-dataset-label {\n    fill: var(--charts-legend-label);\n    font-weight: 600; }\n  .chart-container .legend-dataset-value {\n    fill: var(--charts-legend-value); }\n\n.graph-svg-tip {\n  position: absolute;\n  z-index: 99999;\n  padding: 10px;\n  font-size: 12px;\n  text-align: center;\n  background: var(--charts-tooltip-bg);\n  box-shadow: 0px 1px 4px rgba(17, 43, 66, 0.1), 0px 2px 6px rgba(17, 43, 66, 0.08), 0px 40px 30px -30px rgba(17, 43, 66, 0.1);\n  border-radius: 6px; }\n  .graph-svg-tip ul {\n    padding-left: 0;\n    display: flex; }\n  .graph-svg-tip ol {\n    padding-left: 0;\n    display: flex; }\n  .graph-svg-tip ul.data-point-list li {\n    min-width: 90px;\n    font-weight: 600; }\n  .graph-svg-tip .svg-pointer {\n    position: absolute;\n    height: 12px;\n    width: 12px;\n    border-radius: 2px;\n    background: var(--charts-tooltip-bg);\n    transform: rotate(45deg);\n    margin-top: -7px;\n    margin-left: -6px; }\n  .graph-svg-tip.comparison {\n    text-align: left;\n    padding: 0px;\n    pointer-events: none; }\n    .graph-svg-tip.comparison .title {\n      display: block;\n      padding: 16px;\n      margin: 0;\n      color: var(--charts-tooltip-title);\n      font-weight: 600;\n      line-height: 1;\n      pointer-events: none;\n      text-transform: uppercase; }\n      .graph-svg-tip.comparison .title strong {\n        color: var(--charts-tooltip-value); }\n    .graph-svg-tip.comparison ul {\n      margin: 0;\n      white-space: nowrap;\n      list-style: none; }\n      .graph-svg-tip.comparison ul.tooltip-grid {\n        display: grid;\n        grid-template-columns: repeat(4, minmax(0, 1fr));\n        gap: 5px; }\n    .graph-svg-tip.comparison li {\n      display: inline-block;\n      display: flex;\n      flex-direction: row;\n      font-weight: 600;\n      line-height: 1;\n      padding: 5px 15px 15px 15px; }\n      .graph-svg-tip.comparison li .tooltip-legend {\n        height: 12px;\n        width: 12px;\n        margin-right: 8px;\n        border-radius: 2px; }\n      .graph-svg-tip.comparison li .tooltip-label {\n        margin-top: 4px;\n        font-size: 11px;\n        line-height: 1.25;\n        max-width: 150px;\n        white-space: normal;\n        color: var(--charts-tooltip-label); }\n      .graph-svg-tip.comparison li .tooltip-value {\n        color: var(--charts-tooltip-value); }\n'), f2.create = function(e2, n2) {
    var i2 = document.createElement(e2);
    for (var a2 in n2) {
      var s2 = n2[a2];
      if (a2 === "inside")
        f2(s2).appendChild(i2);
      else if (a2 === "around") {
        var r2 = f2(s2);
        r2.parentNode.insertBefore(i2, r2), i2.appendChild(r2);
      } else
        a2 === "styles" ? t(s2) === "object" && Object.keys(s2).map(function(t3) {
          i2.style[t3] = s2[t3];
        }) : a2 in i2 ? i2[a2] = s2 : i2.setAttribute(a2, s2);
    }
    return i2;
  };
  var y = { margins: { top: 10, bottom: 10, left: 20, right: 20 }, paddings: { top: 20, bottom: 40, left: 30, right: 10 }, baseHeight: 240, titleHeight: 20, legendHeight: 30, titleFontSize: 12 };
  function b(t3) {
    return t3.titleHeight + t3.margins.top + t3.paddings.top;
  }
  function x(t3) {
    return t3.margins.left + t3.paddings.left;
  }
  function k(t3) {
    return t3.margins.top + t3.margins.bottom + t3.paddings.top + t3.paddings.bottom + t3.titleHeight + t3.legendHeight;
  }
  function w(t3) {
    return t3.margins.left + t3.margins.right + t3.paddings.left + t3.paddings.right;
  }
  var A = ["pink", "blue", "green", "grey", "red", "yellow", "purple", "teal", "cyan", "orange"];
  var D = { bar: A, line: A, pie: A, percentage: A, heatmap: ["#ebedf0", "#c6e48b", "#7bc96f", "#239a3b", "#196127"], donut: A };
  var L = Math.PI / 180;
  var M = function() {
    function t3(n2) {
      var i2 = n2.parent, a2 = i2 === void 0 ? null : i2, s2 = n2.colors, r2 = s2 === void 0 ? [] : s2;
      e(this, t3), this.parent = a2, this.colors = r2, this.titleName = "", this.titleValue = "", this.listValues = [], this.titleValueFirst = 0, this.x = 0, this.y = 0, this.top = 0, this.left = 0, this.setup();
    }
    return i(t3, [{ key: "setup", value: function() {
      this.makeTooltip();
    } }, { key: "refresh", value: function() {
      this.fill(), this.calcPosition();
    } }, { key: "makeTooltip", value: function() {
      var t4 = this;
      this.container = f2.create("div", { inside: this.parent, className: "graph-svg-tip comparison", innerHTML: '<span class="title"></span>\n				<ul class="data-point-list"></ul>\n				<div class="svg-pointer"></div>' }), this.hideTip(), this.title = this.container.querySelector(".title"), this.list = this.container.querySelector(".data-point-list"), this.dataPointList = this.container.querySelector(".data-point-list"), this.parent.addEventListener("mouseleave", function() {
        t4.hideTip();
      });
    } }, { key: "fill", value: function() {
      var t4, e2 = this;
      this.index && this.container.setAttribute("data-point-index", this.index), t4 = this.titleValueFirst ? "<strong>".concat(this.titleValue, "</strong>").concat(this.titleName) : "".concat(this.titleName, "<strong>").concat(this.titleValue, "</strong>"), this.listValues.length > 4 ? this.list.classList.add("tooltip-grid") : this.list.classList.remove("tooltip-grid"), this.title.innerHTML = t4, this.dataPointList.innerHTML = "", this.listValues.map(function(t5, n2) {
        var i2 = e2.colors[n2] || "black", a2 = t5.formatted === 0 || t5.formatted ? t5.formatted : t5.value, s2 = f2.create("li", { innerHTML: '<div class="tooltip-legend" style="background: '.concat(i2, ';"></div>\n					<div>\n						<div class="tooltip-value">').concat(a2 === 0 || a2 ? a2 : "", '</div>\n						<div class="tooltip-label">').concat(t5.title ? t5.title : "", "</div>\n					</div>") });
        e2.dataPointList.appendChild(s2);
      });
    } }, { key: "calcPosition", value: function() {
      var t4 = this.container.offsetWidth;
      this.top = this.y - this.container.offsetHeight - 7.48, this.left = this.x - t4 / 2;
      var e2 = this.parent.offsetWidth - t4, n2 = this.container.querySelector(".svg-pointer");
      if (this.left < 0)
        n2.style.left = "calc(50% - ".concat(-1 * this.left, "px)"), this.left = 0;
      else if (this.left > e2) {
        var i2 = this.left - e2, a2 = "calc(50% + ".concat(i2, "px)");
        n2.style.left = a2, this.left = e2;
      } else
        n2.style.left = "50%";
    } }, { key: "setValues", value: function(t4, e2) {
      var n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {}, i2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : [], a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : -1;
      this.titleName = n2.name, this.titleValue = n2.value, this.listValues = i2, this.x = t4, this.y = e2, this.titleValueFirst = n2.valueFirst || 0, this.index = a2, this.refresh();
    } }, { key: "hideTip", value: function() {
      this.container.style.top = "0px", this.container.style.left = "0px", this.container.style.opacity = "0";
    } }, { key: "showTip", value: function() {
      this.container.style.top = this.top + "px", this.container.style.left = this.left + "px", this.container.style.opacity = "1";
    } }]), t3;
  }();
  function T(t3) {
    return parseFloat(t3.toFixed(2));
  }
  function C(t3, e2, n2) {
    var i2 = arguments.length > 3 && arguments[3] !== void 0 && arguments[3];
    n2 || (n2 = i2 ? t3[0] : t3[t3.length - 1]);
    var a2 = new Array(Math.abs(e2)).fill(n2);
    return t3 = i2 ? a2.concat(t3) : t3.concat(a2);
  }
  function P(t3, e2) {
    return (t3 + "").length * e2;
  }
  function N(t3, e2) {
    return { x: Math.sin(t3 * L) * e2, y: Math.cos(t3 * L) * e2 };
  }
  function E(t3) {
    var e2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
    return !Number.isNaN(t3) && (t3 !== void 0 && (!!Number.isFinite(t3) && !(e2 && t3 < 0)));
  }
  function O(t3) {
    return Number(Math.round(t3 + "e4") + "e-4");
  }
  function S(e2) {
    var n2, i2, a2;
    if (e2 instanceof Date)
      return new Date(e2.getTime());
    if (t(e2) !== "object" || e2 === null)
      return e2;
    for (a2 in n2 = Array.isArray(e2) ? [] : {}, e2)
      i2 = e2[a2], n2[a2] = S(i2);
    return n2;
  }
  function F(t3, e2) {
    var n2, i2;
    return t3 <= e2 ? (n2 = e2 - t3, i2 = t3) : (n2 = t3 - e2, i2 = e2), [n2, i2];
  }
  function z(t3, e2) {
    var n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : e2.length - t3.length;
    return n2 > 0 ? t3 = C(t3, n2) : e2 = C(e2, n2), [t3, e2];
  }
  function H(t3, e2) {
    if (t3)
      return t3.length > e2 ? t3.slice(0, e2 - 3) + "..." : t3;
  }
  function R(t3) {
    var e2;
    if (typeof t3 == "number")
      e2 = t3;
    else if (typeof t3 == "string" && (e2 = Number(t3), Number.isNaN(e2)))
      return t3;
    var n2 = Math.floor(Math.log10(Math.abs(e2)));
    if (n2 <= 2)
      return e2;
    var i2 = Math.floor(n2 / 3), a2 = Math.pow(10, n2 - 3 * i2) * +(e2 / Math.pow(10, n2)).toFixed(1);
    return Math.round(100 * a2) / 100 + " " + ["", "K", "M", "B", "T"][i2];
  }
  function W(t3, e2) {
    for (var n2 = [], i2 = 0; i2 < t3.length; i2++)
      n2.push([t3[i2], e2[i2]]);
    var a2 = function(t4, e3, n3, i3) {
      var a3, s2, r2, o2, l2 = (a3 = e3 || t4, r2 = (s2 = n3 || t4)[0] - a3[0], o2 = s2[1] - a3[1], { length: Math.sqrt(Math.pow(r2, 2) + Math.pow(o2, 2)), angle: Math.atan2(o2, r2) }), c2 = l2.angle + (i3 ? Math.PI : 0), u2 = 0.2 * l2.length;
      return [t4[0] + Math.cos(c2) * u2, t4[1] + Math.sin(c2) * u2];
    };
    return function(t4, e3) {
      return t4.reduce(function(t5, n3, i3, a3) {
        return i3 === 0 ? "".concat(n3[0], ",").concat(n3[1]) : "".concat(t5, " ").concat(e3(n3, i3, a3));
      }, "");
    }(n2, function(t4, e3, n3) {
      var i3 = a2(n3[e3 - 1], n3[e3 - 2], t4), s2 = a2(t4, n3[e3 - 1], n3[e3 + 1], true);
      return "C ".concat(i3[0], ",").concat(i3[1], " ").concat(s2[0], ",").concat(s2[1], " ").concat(t4[0], ",").concat(t4[1]);
    });
  }
  function j(t3, e2) {
    return typeof t3 == "string" ? (e2 || document).querySelector(t3) : t3 || null;
  }
  function I(e2, n2) {
    var i2 = document.createElementNS("http://www.w3.org/2000/svg", e2);
    for (var a2 in n2) {
      var s2 = n2[a2];
      if (a2 === "inside")
        j(s2).appendChild(i2);
      else if (a2 === "around") {
        var r2 = j(s2);
        r2.parentNode.insertBefore(i2, r2), i2.appendChild(r2);
      } else
        a2 === "styles" ? t(s2) === "object" && Object.keys(s2).map(function(t3) {
          i2.style[t3] = s2[t3];
        }) : (a2 === "className" && (a2 = "class"), a2 === "innerHTML" ? i2.textContent = s2 : i2.setAttribute(a2, s2));
    }
    return i2;
  }
  function B(t3, e2) {
    return I("linearGradient", { inside: t3, id: e2, x1: 0, x2: 0, y1: 0, y2: 1 });
  }
  function Y(t3, e2, n2, i2) {
    return I("stop", { inside: t3, style: "stop-color: ".concat(n2), offset: e2, "stop-opacity": i2 });
  }
  function V(t3) {
    var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "", n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0, i2 = { className: t3, transform: e2 };
    return n2 && (i2.inside = n2), I("g", i2);
  }
  function U(t3) {
    var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "", n2 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : "none", i2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : "none", a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 2;
    return I("path", { className: e2, d: t3, styles: { stroke: n2, fill: i2, "stroke-width": a2 } });
  }
  function q(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 1, s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : 0, r2 = n2.x + t3.x, o2 = n2.y + t3.y, l2 = n2.x + e2.x, c2 = n2.y + e2.y;
    return "M".concat(n2.x, " ").concat(n2.y, "\n		L").concat(r2, " ").concat(o2, "\n		A ").concat(i2, " ").concat(i2, " 0 ").concat(s2, " ").concat(a2 ? 1 : 0, "\n		").concat(l2, " ").concat(c2, " z");
  }
  function G(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 1, s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : 0, r2 = n2.x + t3.x, o2 = n2.y + t3.y, l2 = n2.x + e2.x, c2 = 2 * n2.y, u2 = n2.y + e2.y;
    return "M".concat(n2.x, " ").concat(n2.y, "\n		L").concat(r2, " ").concat(o2, "\n		A ").concat(i2, " ").concat(i2, " 0 ").concat(s2, " ").concat(a2 ? 1 : 0, "\n		").concat(l2, " ").concat(c2, " z\n		L").concat(r2, " ").concat(c2, "\n		A ").concat(i2, " ").concat(i2, " 0 ").concat(s2, " ").concat(a2 ? 1 : 0, "\n		").concat(l2, " ").concat(u2, " z");
  }
  function _(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 1, s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : 0, r2 = n2.x + t3.x, o2 = n2.y + t3.y, l2 = n2.x + e2.x, c2 = n2.y + e2.y;
    return "M".concat(r2, " ").concat(o2, "\n		A ").concat(i2, " ").concat(i2, " 0 ").concat(s2, " ").concat(a2 ? 1 : 0, "\n		").concat(l2, " ").concat(c2);
  }
  function X(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 1, s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : 0, r2 = n2.x + t3.x, o2 = n2.y + t3.y, l2 = n2.x + e2.x, c2 = 2 * i2 + o2, u2 = n2.y + t3.y;
    return "M".concat(r2, " ").concat(o2, "\n		A ").concat(i2, " ").concat(i2, " 0 ").concat(s2, " ").concat(a2 ? 1 : 0, "\n		").concat(l2, " ").concat(c2, "\n		M").concat(r2, " ").concat(c2, "\n		A ").concat(i2, " ").concat(i2, " 0 ").concat(s2, " ").concat(a2 ? 1 : 0, "\n		").concat(l2, " ").concat(u2);
  }
  function J(t3, e2) {
    var n2 = arguments.length > 2 && arguments[2] !== void 0 && arguments[2], i2 = "path-fill-gradient-" + e2 + "-" + (n2 ? "lighter" : "default"), a2 = B(t3, i2), s2 = [1, 0.6, 0.2];
    return n2 && (s2 = [0.4, 0.05, 0]), Y(a2, "0%", e2, s2[0]), Y(a2, "50%", e2, s2[1]), Y(a2, "100%", e2, s2[2]), i2;
  }
  function K(t3, e2, n2) {
    var i2 = n2 / 2, a2 = e2 - i2;
    return "M".concat(t3, ",0 h").concat(a2, " q").concat(i2, ",0 ").concat(i2, ",").concat(i2, " q0,").concat(i2, " -").concat(i2, ",").concat(i2, " h-").concat(a2, " v").concat(n2, "z");
  }
  function $2(t3, e2, n2) {
    var i2 = n2 / 2, a2 = e2 - i2;
    return "M".concat(t3 + i2, ",0 h").concat(a2, " v").concat(n2, " h-").concat(a2, " q-").concat(i2, ", 0 -").concat(i2, ",-").concat(i2, " q0,-").concat(i2, " ").concat(i2, ",-").concat(i2, "z");
  }
  function Q(t3, e2, n2, i2, a2) {
    var s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : "none", r2 = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : {}, o2 = { className: t3, x: e2, y: n2, width: i2, height: i2, rx: a2, fill: s2 };
    return Object.keys(r2).map(function(t4) {
      o2[t4] = r2[t4];
    }), I("rect", o2);
  }
  function Z(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "none", s2 = arguments.length > 5 ? arguments[5] : void 0, r2 = arguments.length > 6 ? arguments[6] : void 0, o2 = arguments.length > 7 && arguments[7] !== void 0 ? arguments[7] : null, l2 = arguments.length > 8 && arguments[8] !== void 0 && arguments[8];
    o2 || (o2 = 10);
    var c2 = { className: "legend-dot", x: 0, y: 4 - n2, height: n2, width: n2, rx: i2, fill: a2 }, u2 = I("text", { className: "legend-dataset-label", x: n2, y: 0, dx: o2 + "px", dy: o2 / 3 + "px", "font-size": 1.6 * o2 + "px", "text-anchor": "start", innerHTML: s2 = l2 ? H(s2, 18) : s2 }), h2 = null;
    r2 && (h2 = I("text", { className: "legend-dataset-value", x: n2, y: 20, dx: "10px", dy: 10 / 3 + "px", "font-size": "12px", "text-anchor": "start", innerHTML: r2 }));
    var d2 = I("g", { transform: "translate(".concat(t3, ", ").concat(e2, ")") });
    return d2.appendChild(I("rect", c2)), d2.appendChild(u2), r2 && h2 && d2.appendChild(h2), d2;
  }
  function tt(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {}, s2 = a2.fontSize || 10, r2 = a2.dy !== void 0 ? a2.dy : s2 / 2, o2 = a2.fill || "var(--charts-label-color)", l2 = a2.textAnchor || "start";
    return I("text", { className: t3, x: e2, y: n2, dy: r2 + "px", "font-size": s2 + "px", fill: o2, "text-anchor": l2, innerHTML: i2 });
  }
  function et(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {}, s2 = I("line", { className: "line-vertical " + a2.className, x1: 0, x2: 0, y1: n2, y2: i2, styles: { stroke: a2.stroke } }), r2 = I("text", { x: 0, y: n2 > i2 ? n2 + 4 : n2 - 4 - 10, dy: "10px", "font-size": "10px", "text-anchor": "middle", innerHTML: e2 + "" }), o2 = I("g", { transform: "translate(".concat(t3, ", 0)") });
    return o2.appendChild(s2), o2.appendChild(r2), o2;
  }
  function nt(t3, e2, n2, i2) {
    var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {};
    a2.lineType || (a2.lineType = ""), a2.shortenNumbers && (e2 = R(e2));
    var s2 = "line-horizontal " + a2.className + (a2.lineType === "dashed" ? "dashed" : ""), r2 = I("line", { className: s2, x1: n2, x2: i2, y1: 0, y2: 0, styles: { stroke: a2.stroke } }), o2 = I("text", { x: n2 < i2 ? n2 - 4 : n2 + 4, y: 0, dy: "3px", "font-size": "10px", "text-anchor": n2 < i2 ? "end" : "start", innerHTML: e2 + "" }), l2 = I("g", { transform: "translate(0, ".concat(t3, ")"), "stroke-opacity": 1 });
    return o2 !== 0 && o2 !== "0" || (l2.style.stroke = "rgba(27, 31, 35, 0.6)"), l2.appendChild(r2), l2.appendChild(o2), l2;
  }
  var it = { bar: function(t3) {
    var e2;
    t3.nodeName !== "rect" && (e2 = t3.getAttribute("transform"), t3 = t3.childNodes[0]);
    var n2 = t3.cloneNode();
    return n2.style.fill = "#000000", n2.style.opacity = "0.4", e2 && n2.setAttribute("transform", e2), n2;
  }, dot: function(t3) {
    var e2;
    t3.nodeName !== "circle" && (e2 = t3.getAttribute("transform"), t3 = t3.childNodes[0]);
    var n2 = t3.cloneNode(), i2 = t3.getAttribute("r"), a2 = t3.getAttribute("fill");
    return n2.setAttribute("r", parseInt(i2) + 4), n2.setAttribute("fill", a2), n2.style.opacity = "0.6", e2 && n2.setAttribute("transform", e2), n2;
  }, heat_square: function(t3) {
    var e2;
    t3.nodeName !== "circle" && (e2 = t3.getAttribute("transform"), t3 = t3.childNodes[0]);
    var n2 = t3.cloneNode(), i2 = t3.getAttribute("r"), a2 = t3.getAttribute("fill");
    return n2.setAttribute("r", parseInt(i2) + 4), n2.setAttribute("fill", a2), n2.style.opacity = "0.6", e2 && n2.setAttribute("transform", e2), n2;
  } };
  var at = { bar: function(t3, e2) {
    var n2;
    t3.nodeName !== "rect" && (n2 = t3.getAttribute("transform"), t3 = t3.childNodes[0]);
    var i2 = ["x", "y", "width", "height"];
    Object.values(t3.attributes).filter(function(t4) {
      return i2.includes(t4.name) && t4.specified;
    }).map(function(t4) {
      e2.setAttribute(t4.name, t4.nodeValue);
    }), n2 && e2.setAttribute("transform", n2);
  }, dot: function(t3, e2) {
    var n2;
    t3.nodeName !== "circle" && (n2 = t3.getAttribute("transform"), t3 = t3.childNodes[0]);
    var i2 = ["cx", "cy"];
    Object.values(t3.attributes).filter(function(t4) {
      return i2.includes(t4.name) && t4.specified;
    }).map(function(t4) {
      e2.setAttribute(t4.name, t4.nodeValue);
    }), n2 && e2.setAttribute("transform", n2);
  }, heat_square: function(t3, e2) {
    var n2;
    t3.nodeName !== "circle" && (n2 = t3.getAttribute("transform"), t3 = t3.childNodes[0]);
    var i2 = ["cx", "cy"];
    Object.values(t3.attributes).filter(function(t4) {
      return i2.includes(t4.name) && t4.specified;
    }).map(function(t4) {
      e2.setAttribute(t4.name, t4.nodeValue);
    }), n2 && e2.setAttribute("transform", n2);
  } };
  var st = { pink: "#F683AE", blue: "#318AD8", green: "#48BB74", grey: "#A6B1B9", red: "#F56B6B", yellow: "#FACF7A", purple: "#44427B", teal: "#5FD8C4", cyan: "#15CCEF", orange: "#F8814F", "light-pink": "#FED7E5", "light-blue": "#BFDDF7", "light-green": "#48BB74", "light-grey": "#F4F5F6", "light-red": "#F6DFDF", "light-yellow": "#FEE9BF", "light-purple": "#E8E8F7", "light-teal": "#D3FDF6", "light-cyan": "#DDF8FD", "light-orange": "#FECDB8" };
  function rt(t3, e2, n2, i2) {
    var a2 = typeof e2 == "string" ? e2 : e2.join(", ");
    return [t3, { transform: n2.join(", ") }, i2, "easein", "translate", { transform: a2 }];
  }
  function ot(t3, e2, n2) {
    return rt(t3, [0, n2], [0, e2], 350);
  }
  function lt(t3, e2) {
    return [t3, { d: e2 }, 350, "easein"];
  }
  var ct = { ease: "0.25 0.1 0.25 1", linear: "0 0 1 1", easein: "0.1 0.8 0.2 1", easeout: "0 0 0.58 1", easeinout: "0.42 0 0.58 1" };
  function ut(t3, e2, n2) {
    var i2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : "linear", a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : void 0, s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {}, r2 = t3.cloneNode(true), o2 = t3.cloneNode(true);
    for (var l2 in e2) {
      var c2 = void 0;
      c2 = l2 === "transform" ? document.createElementNS("http://www.w3.org/2000/svg", "animateTransform") : document.createElementNS("http://www.w3.org/2000/svg", "animate");
      var u2 = s2[l2] || t3.getAttribute(l2), h2 = e2[l2], d2 = { attributeName: l2, from: u2, to: h2, begin: "0s", dur: n2 / 1e3 + "s", values: u2 + ";" + h2, keySplines: ct[i2], keyTimes: "0;1", calcMode: "spline", fill: "freeze" };
      for (var p2 in a2 && (d2.type = a2), d2)
        c2.setAttribute(p2, d2[p2]);
      r2.appendChild(c2), a2 ? o2.setAttribute(l2, "translate(".concat(h2, ")")) : o2.setAttribute(l2, h2);
    }
    return [r2, o2];
  }
  function ht(t3, e2) {
    t3.style.transform = e2, t3.style.webkitTransform = e2, t3.style.msTransform = e2, t3.style.mozTransform = e2, t3.style.oTransform = e2;
  }
  function dt(t3, e2) {
    var n2 = [], i2 = [];
    e2.map(function(t4) {
      var e3, a3, s2 = t4[0], r2 = s2.parentNode;
      t4[0] = s2;
      var o2 = u(ut.apply(void 0, h(t4)), 2);
      e3 = o2[0], a3 = o2[1], n2.push(a3), i2.push([e3, r2]), r2.replaceChild(e3, s2);
    });
    var a2 = t3.cloneNode(true);
    return i2.map(function(t4, i3) {
      t4[1].replaceChild(n2[i3], t4[0]), e2[i3][0] = n2[i3];
    }), a2;
  }
  function pt(t3, e2, n2) {
    if (n2.length !== 0) {
      var i2 = dt(e2, n2);
      e2.parentNode == t3 && (t3.removeChild(e2), t3.appendChild(i2)), setTimeout(function() {
        i2.parentNode == t3 && (t3.removeChild(i2), t3.appendChild(e2));
      }, 250);
    }
  }
  var ft = function() {
    function t3(n2, i2) {
      if (e(this, t3), i2 = S(i2), this.parent = typeof n2 == "string" ? document.querySelector(n2) : n2, !(this.parent instanceof HTMLElement))
        throw new Error("No `parent` element to render on was provided.");
      this.rawChartArgs = i2, this.title = i2.title || "", this.type = i2.type || "", this.realData = this.prepareData(i2.data), this.data = this.prepareFirstData(this.realData), this.colors = this.validateColors(i2.colors, this.type), this.config = { showTooltip: 1, showLegend: i2.showLegend !== void 0 ? i2.showLegend : 1, isNavigable: i2.isNavigable || 0, animate: i2.animate !== void 0 ? i2.animate : 1, truncateLegends: i2.truncateLegends || 1 }, this.measures = JSON.parse(JSON.stringify(y));
      var a2 = this.measures;
      this.setMeasures(i2), this.title.length || (a2.titleHeight = 0), this.config.showLegend || (a2.legendHeight = 0), this.argHeight = i2.height || a2.baseHeight, this.state = {}, this.options = {}, this.initTimeout = 700, this.config.isNavigable && (this.overlays = []), this.configure(i2);
    }
    return i(t3, [{ key: "prepareData", value: function(t4) {
      return t4;
    } }, { key: "prepareFirstData", value: function(t4) {
      return t4;
    } }, { key: "validateColors", value: function(t4, e2) {
      var n2 = [];
      return (t4 = (t4 || []).concat(D[e2])).forEach(function(t5) {
        var e3 = function(t6) {
          return /rgb[a]{0,1}\([\d, ]+\)/gim.test(t6) ? /\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(t6).map(function(t7, e4) {
            return e4 !== 0 ? Number(t7).toString(16) : "#";
          }).reduce(function(t7, e4) {
            return "".concat(t7).concat(e4);
          }) : st[t6] || t6;
        }(t5);
        !function(t6) {
          return /(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(t6) || /(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(t6);
        }(e3) ? console.warn('"' + t5 + '" is not a valid color.') : n2.push(e3);
      }), n2;
    } }, { key: "setMeasures", value: function() {
    } }, { key: "configure", value: function() {
      var t4 = this, e2 = this.argHeight;
      this.baseHeight = e2, this.height = e2 - k(this.measures), this.boundDrawFn = function() {
        return t4.draw(true);
      }, ResizeObserver && (this.resizeObserver = new ResizeObserver(this.boundDrawFn), this.resizeObserver.observe(this.parent)), window.addEventListener("resize", this.boundDrawFn), window.addEventListener("orientationchange", this.boundDrawFn);
    } }, { key: "destroy", value: function() {
      this.resizeObserver && this.resizeObserver.disconnect(), window.removeEventListener("resize", this.boundDrawFn), window.removeEventListener("orientationchange", this.boundDrawFn);
    } }, { key: "setup", value: function() {
      this.makeContainer(), this.updateWidth(), this.makeTooltip(), this.draw(false, true);
    } }, { key: "makeContainer", value: function() {
      this.parent.innerHTML = "";
      var t4 = { inside: this.parent, className: "chart-container" };
      this.independentWidth && (t4.styles = { width: this.independentWidth + "px" }), this.container = f2.create("div", t4);
    } }, { key: "makeTooltip", value: function() {
      this.tip = new M({ parent: this.container, colors: this.colors }), this.bindTooltip();
    } }, { key: "bindTooltip", value: function() {
    } }, { key: "draw", value: function() {
      var t4 = this, e2 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0], n2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      e2 && g(this.parent) || (this.updateWidth(), this.calc(e2), this.makeChartArea(), this.setupComponents(), this.components.forEach(function(e3) {
        return e3.setup(t4.drawArea);
      }), this.render(this.components, false), n2 && (this.data = this.realData, setTimeout(function() {
        t4.update(t4.data, true);
      }, this.initTimeout)), this.config.showLegend && this.renderLegend(), this.setupNavigation(n2));
    } }, { key: "calc", value: function() {
    } }, { key: "updateWidth", value: function() {
      var t4, e2, n2;
      this.baseWidth = (t4 = this.parent, e2 = window.getComputedStyle(t4), n2 = parseFloat(e2.paddingLeft) + parseFloat(e2.paddingRight), t4.clientWidth - n2), this.width = this.baseWidth - w(this.measures);
    } }, { key: "makeChartArea", value: function() {
      this.svg && this.container.removeChild(this.svg);
      var t4, e2, n2, i2, a2 = this.measures;
      this.svg = (t4 = this.container, e2 = "frappe-chart chart", n2 = this.baseWidth, i2 = this.baseHeight, I("svg", { className: e2, inside: t4, width: n2, height: i2 })), this.svgDefs = I("defs", { inside: this.svg }), this.title.length && (this.titleEL = tt("title", a2.margins.left, a2.margins.top, this.title, { fontSize: a2.titleFontSize, fill: "#666666", dy: a2.titleFontSize }));
      var s2 = b(a2);
      this.drawArea = V(this.type + "-chart chart-draw-area", "translate(".concat(x(a2), ", ").concat(s2, ")")), this.config.showLegend && (s2 += this.height + a2.paddings.bottom, this.legendArea = V("chart-legend", "translate(".concat(x(a2), ", ").concat(s2, ")"))), this.title.length && this.svg.appendChild(this.titleEL), this.svg.appendChild(this.drawArea), this.config.showLegend && this.svg.appendChild(this.legendArea), this.updateTipOffset(x(a2), b(a2));
    } }, { key: "updateTipOffset", value: function(t4, e2) {
      this.tip.offset = { x: t4, y: e2 };
    } }, { key: "setupComponents", value: function() {
      this.components = /* @__PURE__ */ new Map();
    } }, { key: "update", value: function(t4) {
      var e2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1];
      t4 || console.error("No data to update."), e2 || (t4 = S(t4)), this.data = this.prepareData(t4), this.calc(), this.render(this.components, this.config.animate);
    } }, { key: "render", value: function() {
      var t4 = this, e2 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.components, n2 = !(arguments.length > 1 && arguments[1] !== void 0) || arguments[1];
      this.config.isNavigable && this.overlays.map(function(t5) {
        return t5.parentNode.removeChild(t5);
      });
      var i2 = [];
      e2.forEach(function(t5) {
        i2 = i2.concat(t5.update(n2));
      }), i2.length > 0 ? (pt(this.container, this.svg, i2), setTimeout(function() {
        e2.forEach(function(t5) {
          return t5.make();
        }), t4.updateNav();
      }, 400)) : (e2.forEach(function(t5) {
        return t5.make();
      }), this.updateNav());
    } }, { key: "updateNav", value: function() {
      this.config.isNavigable && (this.makeOverlay(), this.bindUnits());
    } }, { key: "renderLegend", value: function(t4) {
      var e2 = this;
      this.legendArea.textContent = "";
      var n2 = 0, i2 = 0;
      t4.map(function(t5, a2) {
        var s2 = Math.floor(e2.width / 150);
        n2 > s2 && (n2 = 0, i2 += e2.config.legendRowHeight);
        var r2 = 150 * n2, o2 = e2.makeLegend(t5, a2, r2, i2);
        e2.legendArea.appendChild(o2), n2++;
      });
    } }, { key: "makeLegend", value: function() {
    } }, { key: "setupNavigation", value: function() {
      var t4 = this, e2 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
      this.config.isNavigable && e2 && (this.bindOverlay(), this.keyActions = { 13: this.onEnterKey.bind(this), 37: this.onLeftArrow.bind(this), 38: this.onUpArrow.bind(this), 39: this.onRightArrow.bind(this), 40: this.onDownArrow.bind(this) }, document.addEventListener("keydown", function(e3) {
        m(t4.container) && (e3 = e3 || window.event, t4.keyActions[e3.keyCode] && t4.keyActions[e3.keyCode]());
      }));
    } }, { key: "makeOverlay", value: function() {
    } }, { key: "updateOverlay", value: function() {
    } }, { key: "bindOverlay", value: function() {
    } }, { key: "bindUnits", value: function() {
    } }, { key: "onLeftArrow", value: function() {
    } }, { key: "onRightArrow", value: function() {
    } }, { key: "onUpArrow", value: function() {
    } }, { key: "onDownArrow", value: function() {
    } }, { key: "onEnterKey", value: function() {
    } }, { key: "addDataPoint", value: function() {
    } }, { key: "removeDataPoint", value: function() {
    } }, { key: "getDataPoint", value: function() {
    } }, { key: "setCurrentDataPoint", value: function() {
    } }, { key: "updateDataset", value: function() {
    } }, { key: "export", value: function() {
      var t4 = function(t5) {
        var e2 = t5.cloneNode(true);
        e2.classList.add("chart-container"), e2.setAttribute("xmlns", "http://www.w3.org/2000/svg"), e2.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink");
        var n2 = f2.create("style", { innerHTML: ".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}" });
        e2.insertBefore(n2, e2.firstChild);
        var i2 = f2.create("div");
        return i2.appendChild(e2), i2.innerHTML;
      }(this.svg);
      !function(t5, e2) {
        var n2 = document.createElement("a");
        n2.style = "display: none";
        var i2 = new Blob(e2, { type: "image/svg+xml; charset=utf-8" }), a2 = window.URL.createObjectURL(i2);
        n2.href = a2, n2.download = t5, document.body.appendChild(n2), n2.click(), setTimeout(function() {
          document.body.removeChild(n2), window.URL.revokeObjectURL(a2);
        }, 300);
      }(this.title || "Chart", [t4]);
    } }]), t3;
  }();
  var vt = function(t3) {
    a(r2, ft);
    var n2 = l(r2);
    function r2(t4, i2) {
      return e(this, r2), n2.call(this, t4, i2);
    }
    return i(r2, [{ key: "configure", value: function(t4) {
      c(s(r2.prototype), "configure", this).call(this, t4), this.config.formatTooltipY = (t4.tooltipOptions || {}).formatTooltipY, this.config.maxSlices = t4.maxSlices || 20, this.config.maxLegendPoints = t4.maxLegendPoints || 20, this.config.legendRowHeight = 60;
    } }, { key: "calc", value: function() {
      var t4 = this, e2 = this.state, n3 = this.config.maxSlices;
      e2.sliceTotals = [];
      var i2 = this.data.labels.map(function(e3, n4) {
        var i3 = 0;
        return t4.data.datasets.map(function(t5) {
          i3 += t5.values[n4];
        }), [i3, e3];
      }).filter(function(t5) {
        return t5[0] >= 0;
      }), a2 = i2;
      if (i2.length > n3) {
        i2.sort(function(t5, e3) {
          return e3[0] - t5[0];
        }), a2 = i2.slice(0, n3 - 1);
        var s2 = i2.slice(n3 - 1), r3 = 0;
        s2.map(function(t5) {
          r3 += t5[0];
        }), a2.push([r3, "Rest"]), this.colors[n3 - 1] = "grey";
      }
      e2.labels = [], a2.map(function(t5) {
        e2.sliceTotals.push(O(t5[0])), e2.labels.push(t5[1]);
      }), e2.grandTotal = e2.sliceTotals.reduce(function(t5, e3) {
        return t5 + e3;
      }, 0), this.center = { x: this.width / 2, y: this.height / 2 };
    } }, { key: "renderLegend", value: function() {
      var t4 = this.state;
      this.legendArea.textContent = "", this.legendTotals = t4.sliceTotals.slice(0, this.config.maxLegendPoints), c(s(r2.prototype), "renderLegend", this).call(this, this.legendTotals);
    } }, { key: "makeLegend", value: function(t4, e2, n3, i2) {
      var a2 = this.config.formatTooltipY ? this.config.formatTooltipY(t4) : t4;
      return Z(n3, i2, 12, 3, this.colors[e2], this.state.labels[e2], a2, null, this.config.truncateLegends);
    } }]), r2;
  }();
  var gt = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
  var mt = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
  function yt(t3) {
    var e2 = new Date(t3);
    return e2.setMinutes(e2.getMinutes() - e2.getTimezoneOffset()), e2;
  }
  function bt(t3) {
    var e2 = t3.getDate(), n2 = t3.getMonth() + 1;
    return [t3.getFullYear(), (n2 > 9 ? "" : "0") + n2, (e2 > 9 ? "" : "0") + e2].join("-");
  }
  function xt(t3) {
    return new Date(t3.getTime());
  }
  function kt(t3, e2) {
    var n2 = Lt(t3);
    return Math.ceil(function(t4, e3) {
      return (yt(e3) - yt(t4)) / 864e5;
    }(n2, e2) / 7);
  }
  function wt(t3, e2) {
    return t3.getMonth() === e2.getMonth() && t3.getFullYear() === e2.getFullYear();
  }
  function At(t3) {
    var e2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], n2 = gt[t3];
    return e2 ? n2.slice(0, 3) : n2;
  }
  function Dt(t3, e2) {
    return new Date(e2, t3 + 1, 0);
  }
  function Lt(t3) {
    var e2 = xt(t3), n2 = e2.getDay();
    return n2 !== 0 && Mt(e2, -1 * n2), e2;
  }
  function Mt(t3, e2) {
    t3.setDate(t3.getDate() + e2);
  }
  var Tt = function() {
    function t3(n2) {
      var i2 = n2.layerClass, a2 = i2 === void 0 ? "" : i2, s2 = n2.layerTransform, r2 = s2 === void 0 ? "" : s2, o2 = n2.constants, l2 = n2.getData, c2 = n2.makeElements, u2 = n2.animateElements;
      e(this, t3), this.layerTransform = r2, this.constants = o2, this.makeElements = c2, this.getData = l2, this.animateElements = u2, this.store = [], this.labels = [], this.layerClass = a2, this.layerClass = typeof this.layerClass == "function" ? this.layerClass() : this.layerClass, this.refresh();
    }
    return i(t3, [{ key: "refresh", value: function(t4) {
      this.data = t4 || this.getData();
    } }, { key: "setup", value: function(t4) {
      this.layer = V(this.layerClass, this.layerTransform, t4);
    } }, { key: "make", value: function() {
      this.render(this.data), this.oldData = this.data;
    } }, { key: "render", value: function(t4) {
      var e2 = this;
      this.store = this.makeElements(t4), this.layer.textContent = "", this.store.forEach(function(t5) {
        e2.layer.appendChild(t5);
      }), this.labels.forEach(function(t5) {
        e2.layer.appendChild(t5);
      });
    } }, { key: "update", value: function() {
      var t4 = !(arguments.length > 0 && arguments[0] !== void 0) || arguments[0];
      this.refresh();
      var e2 = [];
      return t4 && (e2 = this.animateElements(this.data) || []), e2;
    } }]), t3;
  }();
  var Ct = { donutSlices: { layerClass: "donut-slices", makeElements: function(t3) {
    return t3.sliceStrings.map(function(e2, n2) {
      var i2 = U(e2, "donut-path", t3.colors[n2], "none", t3.strokeWidth);
      return i2.style.transition = "transform .3s;", i2;
    });
  }, animateElements: function(t3) {
    return this.store.map(function(e2, n2) {
      return lt(e2, t3.sliceStrings[n2]);
    });
  } }, pieSlices: { layerClass: "pie-slices", makeElements: function(t3) {
    return t3.sliceStrings.map(function(e2, n2) {
      var i2 = U(e2, "pie-path", "none", t3.colors[n2]);
      return i2.style.transition = "transform .3s;", i2;
    });
  }, animateElements: function(t3) {
    return this.store.map(function(e2, n2) {
      return lt(e2, t3.sliceStrings[n2]);
    });
  } }, percentageBars: { layerClass: "percentage-bars", makeElements: function(t3) {
    var e2 = this, n2 = t3.xPositions.length;
    return t3.xPositions.map(function(i2, a2) {
      var s2 = a2 == n2 - 1, r2 = a2 == 0;
      return function(t4, e3, n3, i3, a3, s3) {
        var r3 = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : "none";
        if (s3) {
          var o2 = K(t4, n3, i3);
          return U(o2, "percentage-bar", null, r3);
        }
        if (a3) {
          var l2 = $2(t4, n3, i3);
          return U(l2, "percentage-bar", null, r3);
        }
        var c2 = { className: "percentage-bar", x: t4, y: e3, width: n3, height: i3, fill: r3 };
        return I("rect", c2);
      }(i2, 0, t3.widths[a2], e2.constants.barHeight, r2, s2, t3.colors[a2]);
    });
  }, animateElements: function(t3) {
    if (t3)
      return [];
  } }, yAxis: { layerClass: "y axis", makeElements: function(t3) {
    var e2 = this;
    return t3.positions.map(function(n2, i2) {
      return function(t4, e3, n3) {
        var i3 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
        E(t4) || (t4 = 0), i3.pos || (i3.pos = "left"), i3.offset || (i3.offset = 0), i3.mode || (i3.mode = "span"), i3.stroke || (i3.stroke = "#E2E6E9"), i3.className || (i3.className = "");
        var a2 = -6, s2 = i3.mode === "span" ? n3 + 6 : 0;
        return i3.mode === "tick" && i3.pos === "right" && (a2 = n3 + 6, s2 = n3), a2 += i3.offset, s2 += i3.offset, typeof e3 == "number" && (e3 = O(e3)), nt(t4, e3, a2, s2, { className: i3.className, lineType: i3.lineType, shortenNumbers: i3.shortenNumbers });
      }(n2, t3.labels[i2], e2.constants.width, { mode: e2.constants.mode, pos: e2.constants.pos, shortenNumbers: e2.constants.shortenNumbers });
    });
  }, animateElements: function(t3) {
    var e2 = t3.positions, n2 = t3.labels, i2 = this.oldData.positions, a2 = this.oldData.labels, s2 = u(z(i2, e2), 2);
    i2 = s2[0], e2 = s2[1];
    var r2 = u(z(a2, n2), 2);
    return a2 = r2[0], n2 = r2[1], this.render({ positions: i2, labels: n2 }), this.store.map(function(t4, n3) {
      return ot(t4, e2[n3], i2[n3]);
    });
  } }, xAxis: { layerClass: "x axis", makeElements: function(t3) {
    var e2 = this;
    return t3.positions.map(function(n2, i2) {
      return function(t4, e3, n3) {
        var i3 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
        E(t4) || (t4 = 0), i3.pos || (i3.pos = "bottom"), i3.offset || (i3.offset = 0), i3.mode || (i3.mode = "span"), i3.className || (i3.className = "");
        var a2 = n3 + 6, s2 = i3.mode === "span" ? -6 : n3;
        return i3.mode === "tick" && i3.pos === "top" && (a2 = -6, s2 = 0), et(t4, e3, a2, s2, { className: i3.className, lineType: i3.lineType });
      }(n2, t3.calcLabels[i2], e2.constants.height, { mode: e2.constants.mode, pos: e2.constants.pos });
    });
  }, animateElements: function(t3) {
    var e2 = t3.positions, n2 = t3.calcLabels, i2 = this.oldData.positions, a2 = this.oldData.calcLabels, s2 = u(z(i2, e2), 2);
    i2 = s2[0], e2 = s2[1];
    var r2 = u(z(a2, n2), 2);
    return a2 = r2[0], n2 = r2[1], this.render({ positions: i2, calcLabels: n2 }), this.store.map(function(t4, n3) {
      return function(t5, e3, n4) {
        return rt(t5, [n4, 0], [e3, 0], 350);
      }(t4, e2[n3], i2[n3]);
    });
  } }, yMarkers: { layerClass: "y-markers", makeElements: function(t3) {
    var e2 = this;
    return t3.map(function(t4) {
      return function(t5, e3, n2) {
        var i2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {};
        E(t5) || (t5 = 0), i2.labelPos || (i2.labelPos = "right"), i2.lineType || (i2.lineType = "dashed");
        var a2 = i2.labelPos === "left" ? 4 : n2 - P(e3, 5) - 4, s2 = I("text", { className: "chart-label", x: a2, y: 0, dy: "-5px", "font-size": "10px", "text-anchor": "start", innerHTML: e3 + "" }), r2 = nt(t5, "", 0, n2, { stroke: i2.stroke || "#E2E6E9", className: i2.className || "", lineType: i2.lineType });
        return r2.appendChild(s2), r2;
      }(t4.position, t4.label, e2.constants.width, { labelPos: t4.options.labelPos, stroke: t4.options.stroke, mode: "span", lineType: t4.options.lineType });
    });
  }, animateElements: function(t3) {
    var e2 = u(z(this.oldData, t3), 2);
    this.oldData = e2[0];
    var n2 = (t3 = e2[1]).map(function(t4) {
      return t4.position;
    }), i2 = t3.map(function(t4) {
      return t4.label;
    }), a2 = t3.map(function(t4) {
      return t4.options;
    }), s2 = this.oldData.map(function(t4) {
      return t4.position;
    });
    return this.render(s2.map(function(t4, e3) {
      return { position: s2[e3], label: i2[e3], options: a2[e3] };
    })), this.store.map(function(t4, e3) {
      return ot(t4, n2[e3], s2[e3]);
    });
  } }, yRegions: { layerClass: "y-regions", makeElements: function(t3) {
    var e2 = this;
    return t3.map(function(t4) {
      return function(t5, e3, n2, i2) {
        var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {}, s2 = t5 - e3, r2 = I("rect", { className: "bar mini", styles: { fill: a2.fill || "rgba(228, 234, 239, 0.49)", stroke: a2.stroke || "#E2E6E9", "stroke-dasharray": "".concat(n2, ", ").concat(s2) }, x: 0, y: 0, width: n2, height: s2 });
        a2.labelPos || (a2.labelPos = "right");
        var o2 = a2.labelPos === "left" ? 4 : n2 - P(i2 + "", 4.5) - 4, l2 = I("text", { className: "chart-label", x: o2, y: 0, dy: "-5px", "font-size": "10px", "text-anchor": "start", innerHTML: i2 + "" }), c2 = I("g", { transform: "translate(0, ".concat(e3, ")") });
        return c2.appendChild(r2), c2.appendChild(l2), c2;
      }(t4.startPos, t4.endPos, e2.constants.width, t4.label, { labelPos: t4.options.labelPos, stroke: t4.options.stroke, fill: t4.options.fill });
    });
  }, animateElements: function(t3) {
    var e2 = u(z(this.oldData, t3), 2);
    this.oldData = e2[0];
    var n2 = (t3 = e2[1]).map(function(t4) {
      return t4.endPos;
    }), i2 = t3.map(function(t4) {
      return t4.label;
    }), a2 = t3.map(function(t4) {
      return t4.startPos;
    }), s2 = t3.map(function(t4) {
      return t4.options;
    }), r2 = this.oldData.map(function(t4) {
      return t4.endPos;
    }), o2 = this.oldData.map(function(t4) {
      return t4.startPos;
    });
    this.render(r2.map(function(t4, e3) {
      return { startPos: o2[e3], endPos: r2[e3], label: i2[e3], options: s2[e3] };
    }));
    var l2 = [];
    return this.store.map(function(t4, e3) {
      l2 = l2.concat(function(t5, e4, n3, i3) {
        var a3 = e4 - n3, s3 = t5.childNodes[0], r3 = s3.getAttribute("width");
        return [[s3, { height: a3, "stroke-dasharray": "".concat(r3, ", ").concat(a3) }, 350, "easein"], rt(t5, [0, i3], [0, n3], 350)];
      }(t4, a2[e3], n2[e3], r2[e3]));
    }), l2;
  } }, heatDomain: { layerClass: function() {
    return "heat-domain domain-" + this.constants.index;
  }, makeElements: function(t3) {
    var e2 = this, n2 = this.constants, i2 = n2.index, a2 = n2.colWidth, s2 = n2.rowHeight, r2 = n2.squareSize, o2 = n2.radius, l2 = n2.xTranslate, c2 = l2, u2 = 0;
    return this.serializedSubDomains = [], t3.cols.map(function(t4, n3) {
      n3 === 1 && e2.labels.push(tt("domain-name", c2, -12, At(i2, true).toUpperCase(), { fontSize: 9 })), t4.map(function(t5, n4) {
        if (t5.fill) {
          var i3 = { "data-date": t5.yyyyMmDd, "data-value": t5.dataValue, "data-day": n4 }, a3 = Q("day", c2, u2, r2, o2, t5.fill, i3);
          e2.serializedSubDomains.push(a3);
        }
        u2 += s2;
      }), u2 = 0, c2 += a2;
    }), this.serializedSubDomains;
  }, animateElements: function(t3) {
    if (t3)
      return [];
  } }, barGraph: { layerClass: function() {
    return "dataset-units dataset-bars dataset-" + this.constants.index;
  }, makeElements: function(t3) {
    var e2 = this.constants;
    return this.unitType = "bar", this.units = t3.yPositions.map(function(n2, i2) {
      return function(t4, e3, n3, i3) {
        var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "", s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : 0, r2 = arguments.length > 6 && arguments[6] !== void 0 ? arguments[6] : 0, o2 = arguments.length > 7 && arguments[7] !== void 0 ? arguments[7] : {}, l2 = F(e3, o2.zeroLine), c2 = u(l2, 2), h2 = c2[0], d2 = c2[1];
        d2 -= r2, h2 === 0 && (h2 = o2.minHeight, d2 -= o2.minHeight), E(t4) || (t4 = 0), E(d2) || (d2 = 0), E(h2, true) || (h2 = 0), E(n3, true) || (n3 = 0);
        var p2 = I("rect", { className: "bar mini", style: "fill: ".concat(i3), "data-point-index": s2, x: t4, y: d2, width: n3, height: h2 });
        if ((a2 += "") || a2.length) {
          p2.setAttribute("y", 0), p2.setAttribute("x", 0);
          var f3 = I("text", { className: "data-point-value", x: n3 / 2, y: 0, dy: "-5px", "font-size": "10px", "text-anchor": "middle", innerHTML: a2 }), v2 = I("g", { "data-point-index": s2, transform: "translate(".concat(t4, ", ").concat(d2, ")") });
          return v2.appendChild(p2), v2.appendChild(f3), v2;
        }
        return p2;
      }(t3.xPositions[i2], n2, t3.barWidth, e2.color, t3.labels[i2], i2, t3.offsets[i2], { zeroLine: t3.zeroLine, barsWidth: t3.barsWidth, minHeight: e2.minHeight });
    }), this.units;
  }, animateElements: function(t3) {
    var e2 = t3.xPositions, n2 = t3.yPositions, i2 = t3.offsets, a2 = t3.labels, s2 = this.oldData.xPositions, r2 = this.oldData.yPositions, o2 = this.oldData.offsets, l2 = this.oldData.labels, c2 = u(z(s2, e2), 2);
    s2 = c2[0], e2 = c2[1];
    var h2 = u(z(r2, n2), 2);
    r2 = h2[0], n2 = h2[1];
    var d2 = u(z(o2, i2), 2);
    o2 = d2[0], i2 = d2[1];
    var p2 = u(z(l2, a2), 2);
    l2 = p2[0], a2 = p2[1], this.render({ xPositions: s2, yPositions: r2, offsets: o2, labels: a2, zeroLine: this.oldData.zeroLine, barsWidth: this.oldData.barsWidth, barWidth: this.oldData.barWidth });
    var f3 = [];
    return this.store.map(function(a3, s3) {
      f3 = f3.concat(function(t4, e3, n3, i3) {
        var a4 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : 0, s4 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : {}, r3 = F(n3, s4.zeroLine), o3 = u(r3, 2), l3 = o3[0], c3 = o3[1];
        if (c3 -= a4, t4.nodeName !== "rect") {
          var h3 = t4.childNodes[0], d3 = [h3, { width: i3, height: l3 }, 350, "easein"], p3 = t4.getAttribute("transform").split("(")[1].slice(0, -1), f4 = rt(t4, p3, [e3, c3], 350);
          return [d3, f4];
        }
        return [[t4, { width: i3, height: l3, x: e3, y: c3 }, 350, "easein"]];
      }(a3, e2[s3], n2[s3], t3.barWidth, i2[s3], { zeroLine: t3.zeroLine }));
    }), f3;
  } }, lineGraph: { layerClass: function() {
    return "dataset-units dataset-line dataset-" + this.constants.index;
  }, makeElements: function(t3) {
    var e2 = this.constants;
    return this.unitType = "dot", this.paths = {}, e2.hideLine || (this.paths = function(t4, e3, n2) {
      var i2 = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : {}, a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : {}, s2 = e3.map(function(e4, n3) {
        return t4[n3] + "," + e4;
      }), r2 = s2.join("L");
      i2.spline && (r2 = W(t4, e3));
      var o2 = U("M" + r2, "line-graph-path", n2);
      if (i2.heatline) {
        var l2 = J(a2.svgDefs, n2);
        o2.style.stroke = "url(#".concat(l2, ")");
      }
      var c2 = { path: o2 };
      if (i2.regionFill) {
        var u2 = J(a2.svgDefs, n2, true), h2 = "M" + "".concat(t4[0], ",").concat(a2.zeroLine, "L") + r2 + "L".concat(t4.slice(-1)[0], ",").concat(a2.zeroLine);
        c2.region = U(h2, "region-fill", "none", "url(#".concat(u2, ")"));
      }
      return c2;
    }(t3.xPositions, t3.yPositions, e2.color, { heatline: e2.heatline, regionFill: e2.regionFill, spline: e2.spline }, { svgDefs: e2.svgDefs, zeroLine: t3.zeroLine })), this.units = [], e2.showDots && (this.units = t3.yPositions.map(function(n2, i2) {
      return function(t4, e3, n3, i3) {
        var a2 = arguments.length > 4 && arguments[4] !== void 0 ? arguments[4] : "", s2 = arguments.length > 5 && arguments[5] !== void 0 ? arguments[5] : 0, r2 = I("circle", { style: "fill: ".concat(i3), "data-point-index": s2, cx: t4, cy: e3, r: n3 });
        if ((a2 += "") || a2.length) {
          r2.setAttribute("cy", 0), r2.setAttribute("cx", 0);
          var o2 = I("text", { className: "data-point-value", x: 0, y: 0, dy: -5 - n3 + "px", "font-size": "10px", "text-anchor": "middle", innerHTML: a2 }), l2 = I("g", { "data-point-index": s2, transform: "translate(".concat(t4, ", ").concat(e3, ")") });
          return l2.appendChild(r2), l2.appendChild(o2), l2;
        }
        return r2;
      }(t3.xPositions[i2], n2, t3.radius, e2.color, e2.valuesOverPoints ? t3.values[i2] : "", i2);
    })), Object.values(this.paths).concat(this.units);
  }, animateElements: function(t3) {
    var e2 = t3.xPositions, n2 = t3.yPositions, i2 = t3.values, a2 = this.oldData.xPositions, s2 = this.oldData.yPositions, r2 = this.oldData.values, o2 = u(z(a2, e2), 2);
    a2 = o2[0], e2 = o2[1];
    var l2 = u(z(s2, n2), 2);
    s2 = l2[0], n2 = l2[1];
    var c2 = u(z(r2, i2), 2);
    r2 = c2[0], i2 = c2[1], this.render({ xPositions: a2, yPositions: s2, values: i2, zeroLine: this.oldData.zeroLine, radius: this.oldData.radius });
    var h2 = [];
    return Object.keys(this.paths).length && (h2 = h2.concat(function(t4, e3, n3, i3, a3) {
      var s3 = [], r3 = n3.map(function(t5, n4) {
        return e3[n4] + "," + t5;
      }).join("L");
      a3 && (r3 = W(e3, n3));
      var o3 = [t4.path, { d: "M" + r3 }, 350, "easein"];
      if (s3.push(o3), t4.region) {
        var l3 = "".concat(e3[0], ",").concat(i3, "L"), c3 = "L".concat(e3.slice(-1)[0], ", ").concat(i3), u2 = [t4.region, { d: "M" + l3 + r3 + c3 }, 350, "easein"];
        s3.push(u2);
      }
      return s3;
    }(this.paths, e2, n2, t3.zeroLine, this.constants.spline))), this.units.length && this.units.map(function(t4, i3) {
      h2 = h2.concat(function(t5, e3, n3) {
        if (t5.nodeName !== "circle") {
          var i4 = t5.getAttribute("transform").split("(")[1].slice(0, -1);
          return [rt(t5, i4, [e3, n3], 350)];
        }
        return [[t5, { cx: e3, cy: n3 }, 350, "easein"]];
      }(t4, e2[i3], n2[i3]));
    }), h2;
  } } };
  function Pt(t3, e2, n2) {
    var i2 = Object.keys(Ct).filter(function(e3) {
      return t3.includes(e3);
    }), a2 = Ct[i2[0]];
    return Object.assign(a2, { constants: e2, getData: n2 }), new Tt(a2);
  }
  var Nt = function(t3) {
    a(r2, vt);
    var n2 = l(r2);
    function r2(t4, i2) {
      var a2;
      return e(this, r2), (a2 = n2.call(this, t4, i2)).type = "percentage", a2.setup(), a2;
    }
    return i(r2, [{ key: "setMeasures", value: function(t4) {
      var e2 = this.measures;
      this.barOptions = t4.barOptions || {};
      var n3 = this.barOptions;
      n3.height = n3.height || 16, e2.paddings.right = 30, e2.paddings.top = 60, e2.paddings.bottom = 0, e2.legendHeight = 80, e2.baseHeight = 8 * n3.height + k(e2);
    } }, { key: "setupComponents", value: function() {
      var t4 = this.state, e2 = [["percentageBars", { barHeight: this.barOptions.height }, function() {
        return { xPositions: t4.xPositions, widths: t4.widths, colors: this.colors };
      }.bind(this)]];
      this.components = new Map(e2.map(function(t5) {
        var e3 = Pt.apply(void 0, h(t5));
        return [t5[0], e3];
      }));
    } }, { key: "calc", value: function() {
      var t4 = this;
      c(s(r2.prototype), "calc", this).call(this);
      var e2 = this.state;
      e2.xPositions = [], e2.widths = [];
      var n3 = 0;
      e2.sliceTotals.map(function(i2) {
        var a2 = t4.width * i2 / e2.grandTotal;
        e2.widths.push(a2), e2.xPositions.push(n3), n3 += a2;
      });
    } }, { key: "makeDataByIndex", value: function() {
    } }, { key: "bindTooltip", value: function() {
      var t4 = this, e2 = this.state;
      this.container.addEventListener("mousemove", function(n3) {
        var i2 = t4.components.get("percentageBars").store, a2 = n3.target;
        if (i2.includes(a2)) {
          var s2 = i2.indexOf(a2), r3 = v(t4.container), o2 = v(a2), l2 = a2.getAttribute("width") || a2.getBoundingClientRect().width, c2 = o2.left - r3.left + parseInt(l2) / 2, u2 = o2.top - r3.top, h2 = (t4.formattedLabels && t4.formattedLabels.length > 0 ? t4.formattedLabels[s2] : t4.state.labels[s2]) + ": ", d2 = e2.sliceTotals[s2] / e2.grandTotal;
          t4.tip.setValues(c2, u2, { name: h2, value: (100 * d2).toFixed(1) + "%" }), t4.tip.showTip();
        }
      });
    } }]), r2;
  }();
  var Et = function(t3) {
    a(r2, vt);
    var n2 = l(r2);
    function r2(t4, i2) {
      var a2;
      return e(this, r2), (a2 = n2.call(this, t4, i2)).initTimeout = 0, a2.init = 1, a2.setup(), a2;
    }
    return i(r2, [{ key: "configure", value: function(t4) {
      c(s(r2.prototype), "configure", this).call(this, t4), this.mouseMove = this.mouseMove.bind(this), this.mouseLeave = this.mouseLeave.bind(this), this.hoverRadio = t4.hoverRadio || 0.1, this.config.startAngle = t4.startAngle || 0, this.type = "pie", this.sliceName = "pieSlices", this.arcFunc = q, this.shapeFunc = G, this.clockWise = t4.clockWise || false;
    } }, { key: "getRadius", value: function() {
      return this.height > this.width ? this.center.x : this.center.y;
    } }, { key: "calc", value: function() {
      var t4 = this;
      c(s(r2.prototype), "calc", this).call(this);
      var e2 = this.state;
      this.radius = this.getRadius();
      var n3 = this.radius, i2 = this.clockWise, a2 = e2.slicesProperties || [];
      e2.sliceStrings = [], e2.slicesProperties = [];
      var o2 = 180 - this.config.startAngle;
      e2.sliceTotals.map(function(s2, r3) {
        var l2, c2, u2 = o2, h2 = s2 / e2.grandTotal * 360, d2 = h2 > 180 ? 1 : 0, p2 = i2 ? -h2 : h2, f3 = o2 += p2, v2 = N(u2, n3), g2 = N(f3, n3), m2 = t4.init && a2[r3];
        t4.init ? (l2 = m2 ? m2.startPosition : v2, c2 = m2 ? m2.endPosition : v2) : (l2 = v2, c2 = g2);
        var y2 = h2 === 360 ? t4.shapeFunc(l2, c2, t4.center, t4.radius, i2, d2) : t4.arcFunc(l2, c2, t4.center, t4.radius, i2, d2);
        e2.sliceStrings.push(y2), e2.slicesProperties.push({ startPosition: v2, endPosition: g2, value: s2, total: e2.grandTotal, startAngle: u2, endAngle: f3, angle: p2 });
      }), this.init = 0;
    } }, { key: "setupComponents", value: function() {
      var t4 = this.state, e2 = [["pieSlices", {}, function() {
        return { sliceStrings: t4.sliceStrings, colors: this.colors };
      }.bind(this)]];
      this.components = new Map(e2.map(function(t5) {
        var e3 = Pt.apply(void 0, h(t5));
        return [t5[0], e3];
      }));
    } }, { key: "calTranslateByAngle", value: function(t4) {
      var e2 = this.radius, n3 = this.hoverRadio, i2 = N(t4.startAngle + t4.angle / 2, e2);
      return "translate3d(".concat(i2.x * n3, "px,").concat(i2.y * n3, "px,0)");
    } }, { key: "hoverSlice", value: function(t4, e2, n3, i2) {
      if (t4) {
        var a2 = this.colors[e2];
        if (n3) {
          ht(t4, this.calTranslateByAngle(this.state.slicesProperties[e2]));
          var s2 = v(this.svg), r3 = i2.pageX - s2.left + 10, o2 = i2.pageY - s2.top - 10, l2 = (this.formatted_labels && this.formatted_labels.length > 0 ? this.formatted_labels[e2] : this.state.labels[e2]) + ": ", c2 = (100 * this.state.sliceTotals[e2] / this.state.grandTotal).toFixed(1);
          this.tip.setValues(r3, o2, { name: l2, value: c2 + "%" }), this.tip.showTip();
        } else
          this.resetHover(t4, a2);
      }
    } }, { key: "resetHover", value: function(t4, e2) {
      ht(t4, "translate3d(0,0,0)"), this.tip.hideTip(), t4.style.fill = e2;
    } }, { key: "bindTooltip", value: function() {
      this.container.addEventListener("mousemove", this.mouseMove), this.container.addEventListener("mouseleave", this.mouseLeave);
    } }, { key: "mouseMove", value: function(t4) {
      var e2 = t4.target, n3 = this.components.get(this.sliceName).store, i2 = this.curActiveSliceIndex, a2 = this.curActiveSlice;
      if (n3.includes(e2)) {
        var s2 = n3.indexOf(e2);
        this.hoverSlice(a2, i2, false), this.curActiveSlice = e2, this.curActiveSliceIndex = s2, this.hoverSlice(e2, s2, true, t4);
      } else
        this.mouseLeave();
    } }, { key: "mouseLeave", value: function() {
      this.hoverSlice(this.curActiveSlice, this.curActiveSliceIndex, false);
    } }]), r2;
  }();
  function Ot(t3) {
    if (t3 === 0)
      return [0, 0];
    if (isNaN(t3))
      return { mantissa: -6755399441055744, exponent: 972 };
    var e2 = t3 > 0 ? 1 : -1;
    if (!isFinite(t3))
      return { mantissa: 4503599627370496 * e2, exponent: 972 };
    t3 = Math.abs(t3);
    var n2 = Math.floor(Math.log10(t3));
    return [e2 * (t3 / Math.pow(10, n2)), n2];
  }
  function St(t3) {
    var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n2 = Math.ceil(t3), i2 = Math.floor(e2), a2 = n2 - i2, s2 = a2, r2 = 1;
    a2 > 5 && (a2 % 2 != 0 && (a2 = ++n2 - i2), s2 = a2 / 2, r2 = 2), a2 <= 2 && (r2 = a2 / (s2 = 4)), a2 === 0 && (s2 = 5, r2 = 1);
    for (var o2 = [], l2 = 0; l2 <= s2; l2++)
      o2.push(i2 + r2 * l2);
    return o2;
  }
  function Ft(t3) {
    var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0, n2 = Ot(t3), i2 = u(n2, 2), a2 = i2[0], s2 = i2[1], r2 = e2 ? e2 / Math.pow(10, s2) : 0, o2 = St(a2 = a2.toFixed(6), r2);
    return o2 = o2.map(function(t4) {
      return t4 * Math.pow(10, s2);
    });
  }
  function zt(t3) {
    var e2 = arguments.length > 1 && arguments[1] !== void 0 && arguments[1], n2 = Math.max.apply(Math, h(t3)), i2 = Math.min.apply(Math, h(t3)), a2 = [];
    function s2(t4, e3) {
      for (var n3 = Ft(t4), i3 = n3[1] - n3[0], a3 = 0, s3 = 1; a3 < e3; s3++)
        a3 += i3, n3.unshift(-1 * a3);
      return n3;
    }
    if (n2 >= 0 && i2 >= 0)
      Ot(n2)[1], a2 = e2 ? Ft(n2, i2) : Ft(n2);
    else if (n2 > 0 && i2 < 0) {
      var r2 = Math.abs(i2);
      if (n2 >= r2)
        Ot(n2)[1], a2 = s2(n2, r2);
      else {
        Ot(r2)[1];
        var o2 = s2(r2, n2);
        a2 = o2.reverse().map(function(t4) {
          return -1 * t4;
        });
      }
    } else if (n2 <= 0 && i2 <= 0) {
      var l2 = Math.abs(i2), c2 = Math.abs(n2);
      Ot(l2)[1], a2 = (a2 = e2 ? Ft(l2, c2) : Ft(l2)).reverse().map(function(t4) {
        return -1 * t4;
      });
    }
    return a2;
  }
  function Ht(t3) {
    var e2, n2 = Rt(t3);
    if (t3.indexOf(0) >= 0)
      e2 = t3.indexOf(0);
    else if (t3[0] > 0) {
      e2 = -1 * t3[0] / n2;
    } else {
      e2 = -1 * t3[t3.length - 1] / n2 + (t3.length - 1);
    }
    return e2;
  }
  function Rt(t3) {
    return t3[1] - t3[0];
  }
  function Wt(t3) {
    return t3[t3.length - 1] - t3[0];
  }
  function jt(t3, e2) {
    return T(e2.zeroLine - t3 * e2.scaleMultiplier);
  }
  var It = function(t3) {
    a(s2, ft);
    var n2 = l(s2);
    function s2(t4, i2) {
      var a2;
      e(this, s2), (a2 = n2.call(this, t4, i2)).type = "heatmap", a2.countLabel = i2.countLabel || "";
      var r2 = ["Sunday", "Monday"], o2 = r2.includes(i2.startSubDomain) ? i2.startSubDomain : "Sunday";
      return a2.startSubDomainIndex = r2.indexOf(o2), a2.setup(), a2;
    }
    return i(s2, [{ key: "setMeasures", value: function(t4) {
      var e2 = this.measures;
      this.discreteDomains = t4.discreteDomains === 0 ? 0 : 1, e2.paddings.top = 36, e2.paddings.bottom = 0, e2.legendHeight = 24, e2.baseHeight = 84 + k(e2);
      var n3 = this.data, i2 = this.discreteDomains ? 12 : 0;
      this.independentWidth = 12 * (kt(n3.start, n3.end) + i2) + w(e2);
    } }, { key: "updateWidth", value: function() {
      var t4 = this.discreteDomains ? 12 : 0, e2 = this.state.noOfWeeks ? this.state.noOfWeeks : 52;
      this.baseWidth = 12 * (e2 + t4) + w(this.measures);
    } }, { key: "prepareData", value: function() {
      var t4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.data;
      if (t4.start && t4.end && t4.start > t4.end)
        throw new Error("Start date cannot be greater than end date.");
      if (t4.start || (t4.start = new Date(), t4.start.setFullYear(t4.start.getFullYear() - 1)), t4.end || (t4.end = new Date()), t4.dataPoints = t4.dataPoints || {}, parseInt(Object.keys(t4.dataPoints)[0]) > 1e5) {
        var e2 = {};
        Object.keys(t4.dataPoints).forEach(function(n3) {
          var i2 = new Date(1e3 * n3);
          e2[bt(i2)] = t4.dataPoints[n3];
        }), t4.dataPoints = e2;
      }
      return t4;
    } }, { key: "calc", value: function() {
      var t4 = this.state;
      t4.start = xt(this.data.start), t4.end = xt(this.data.end), t4.firstWeekStart = xt(t4.start), t4.noOfWeeks = kt(t4.start, t4.end), t4.distribution = function(t5, e2) {
        for (var n3 = Math.max.apply(Math, h(t5)), i2 = 1 / (e2 - 1), a2 = [], s3 = 0; s3 < e2; s3++) {
          var r2 = n3 * (i2 * s3);
          a2.push(r2);
        }
        return a2;
      }(Object.values(this.data.dataPoints), 5), t4.domainConfigs = this.getDomains();
    } }, { key: "setupComponents", value: function() {
      var t4 = this, e2 = this.state, n3 = this.discreteDomains ? 0 : 1, i2 = e2.domainConfigs.map(function(i3, a3) {
        return ["heatDomain", { index: i3.index, colWidth: 12, rowHeight: 12, squareSize: 10, radius: t4.rawChartArgs.radius || 0, xTranslate: 12 * e2.domainConfigs.filter(function(t5, e3) {
          return e3 < a3;
        }).map(function(t5) {
          return t5.cols.length - n3;
        }).reduce(function(t5, e3) {
          return t5 + e3;
        }, 0) }, function() {
          return e2.domainConfigs[a3];
        }.bind(t4)];
      });
      this.components = new Map(i2.map(function(t5, e3) {
        var n4 = Pt.apply(void 0, h(t5));
        return [t5[0] + "-" + e3, n4];
      }));
      var a2 = 0;
      mt.forEach(function(e3, n4) {
        if ([1, 3, 5].includes(n4)) {
          var i3 = tt("subdomain-name", -6, a2, e3, { fontSize: 10, dy: 8, textAnchor: "end" });
          t4.drawArea.appendChild(i3);
        }
        a2 += 12;
      });
    } }, { key: "update", value: function(t4) {
      t4 || console.error("No data to update."), this.data = this.prepareData(t4), this.draw(), this.bindTooltip();
    } }, { key: "bindTooltip", value: function() {
      var t4 = this;
      this.container.addEventListener("mousemove", function(e2) {
        t4.components.forEach(function(n3) {
          var i2 = n3.store, a2 = e2.target;
          if (i2.includes(a2)) {
            var s3 = a2.getAttribute("data-value"), r2 = a2.getAttribute("data-date").split("-"), o2 = At(parseInt(r2[1]) - 1, true), l2 = t4.container.getBoundingClientRect(), c2 = a2.getBoundingClientRect(), u2 = parseInt(e2.target.getAttribute("width")), h2 = c2.left - l2.left + u2 / 2, d2 = c2.top - l2.top, p2 = s3 + " " + t4.countLabel, f3 = " on " + o2 + " " + r2[0] + ", " + r2[2];
            t4.tip.setValues(h2, d2, { name: f3, value: p2, valueFirst: 1 }, []), t4.tip.showTip();
          }
        });
      });
    } }, { key: "renderLegend", value: function() {
      var t4 = this;
      this.legendArea.textContent = "";
      var e2 = 0, n3 = this.rawChartArgs.radius || 0, i2 = tt("subdomain-name", e2, 12, "Less", { fontSize: 11, dy: 9 });
      e2 = 30, this.legendArea.appendChild(i2), this.colors.slice(0, 5).map(function(i3, a3) {
        var s3 = Q("heatmap-legend-unit", e2 + 15 * a3, 12, 10, n3, i3);
        t4.legendArea.appendChild(s3);
      });
      var a2 = tt("subdomain-name", e2 + 75 + 3, 12, "More", { fontSize: 11, dy: 9 });
      this.legendArea.appendChild(a2);
    } }, { key: "getDomains", value: function() {
      for (var t4 = this.state, e2 = [t4.start.getMonth(), t4.start.getFullYear()], n3 = e2[0], i2 = e2[1], a2 = [t4.end.getMonth(), t4.end.getFullYear()], s3 = a2[0] - n3 + 1 + 12 * (a2[1] - i2), r2 = [], o2 = xt(t4.start), l2 = 0; l2 < s3; l2++) {
        var c2 = t4.end;
        if (!wt(o2, t4.end)) {
          var u2 = [o2.getMonth(), o2.getFullYear()];
          c2 = Dt(u2[0], u2[1]);
        }
        r2.push(this.getDomainConfig(o2, c2)), Mt(c2, 1), o2 = c2;
      }
      return r2;
    } }, { key: "getDomainConfig", value: function(t4) {
      var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "", n3 = [t4.getMonth(), t4.getFullYear()], i2 = n3[0], a2 = n3[1], s3 = Lt(t4), r2 = { index: i2, cols: [] };
      Mt(e2 = xt(e2) || Dt(i2, a2), 1);
      for (var o2, l2 = kt(s3, e2), c2 = [], u2 = 0; u2 < l2; u2++)
        o2 = this.getCol(s3, i2), c2.push(o2), Mt(s3 = new Date(o2[6].yyyyMmDd), 1);
      return o2[6].dataValue !== void 0 && (Mt(s3, 1), c2.push(this.getCol(s3, i2, true))), r2.cols = c2, r2;
    } }, { key: "getCol", value: function(t4, e2) {
      for (var n3 = arguments.length > 2 && arguments[2] !== void 0 && arguments[2], i2 = this.state, a2 = xt(t4), s3 = [], r2 = 0; r2 < 7; r2++, Mt(a2, 1)) {
        var o2 = {}, l2 = a2 >= i2.start && a2 <= i2.end;
        n3 || a2.getMonth() !== e2 || !l2 ? o2.yyyyMmDd = bt(a2) : o2 = this.getSubDomainConfig(a2), s3.push(o2);
      }
      return s3;
    } }, { key: "getSubDomainConfig", value: function(t4) {
      var e2, n3, i2 = bt(t4), a2 = this.data.dataPoints[i2];
      return { yyyyMmDd: i2, dataValue: a2 || 0, fill: this.colors[e2 = a2, n3 = this.state.distribution, n3.filter(function(t5) {
        return t5 < e2;
      }).length] };
    } }]), s2;
  }();
  function Bt(t3, e2) {
    t3.labels = t3.labels || [];
    var n2 = t3.labels.length, i2 = t3.datasets, a2 = new Array(n2).fill(0);
    return i2 || (i2 = [{ values: a2 }]), i2.map(function(t4) {
      if (t4.values) {
        var i3 = t4.values;
        i3 = (i3 = i3.map(function(t5) {
          return isNaN(t5) ? 0 : t5;
        })).length > n2 ? i3.slice(0, n2) : C(i3, n2 - i3.length, 0);
      } else
        t4.values = a2;
      t4.chartType || (t4.chartType = e2);
    }), t3.yRegions && t3.yRegions.map(function(t4) {
      if (t4.end < t4.start) {
        var e3 = [t4.end, t4.start];
        t4.start = e3[0], t4.end = e3[1];
      }
    }), t3;
  }
  function Yt(t3) {
    var e2 = t3.labels.length, n2 = new Array(e2).fill(0), i2 = { labels: t3.labels.slice(0, -1), datasets: t3.datasets.map(function(t4) {
      return { name: "", values: n2.slice(0, -1), chartType: t4.chartType };
    }) };
    return t3.yMarkers && (i2.yMarkers = [{ value: 0, label: "" }]), t3.yRegions && (i2.yRegions = [{ start: 0, end: 0, label: "" }]), i2;
  }
  var Vt = function(t3) {
    a(r2, ft);
    var n2 = l(r2);
    function r2(t4, i2) {
      var a2;
      return e(this, r2), (a2 = n2.call(this, t4, i2)).barOptions = i2.barOptions || {}, a2.lineOptions = i2.lineOptions || {}, a2.type = i2.type || "line", a2.init = 1, a2.setup(), a2;
    }
    return i(r2, [{ key: "setMeasures", value: function() {
      this.data.datasets.length <= 1 && (this.config.showLegend = 0, this.measures.paddings.bottom = 30);
    } }, { key: "configure", value: function(t4) {
      c(s(r2.prototype), "configure", this).call(this, t4), t4.axisOptions = t4.axisOptions || {}, t4.tooltipOptions = t4.tooltipOptions || {}, this.config.xAxisMode = t4.axisOptions.xAxisMode || "span", this.config.yAxisMode = t4.axisOptions.yAxisMode || "span", this.config.xIsSeries = t4.axisOptions.xIsSeries || 0, this.config.shortenYAxisNumbers = t4.axisOptions.shortenYAxisNumbers || 0, this.config.formatTooltipX = t4.tooltipOptions.formatTooltipX, this.config.formatTooltipY = t4.tooltipOptions.formatTooltipY, this.config.valuesOverPoints = t4.valuesOverPoints, this.config.legendRowHeight = 30;
    } }, { key: "prepareData", value: function() {
      var t4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.data;
      return Bt(t4, this.type);
    } }, { key: "prepareFirstData", value: function() {
      var t4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.data;
      return Yt(t4);
    } }, { key: "calc", value: function() {
      var t4 = arguments.length > 0 && arguments[0] !== void 0 && arguments[0];
      this.calcXPositions(), t4 || this.calcYAxisParameters(this.getAllYValues(), this.type === "line"), this.makeDataByIndex();
    } }, { key: "calcXPositions", value: function() {
      var t4 = this.state, e2 = this.data.labels;
      t4.datasetLength = e2.length, t4.unitWidth = this.width / t4.datasetLength, t4.xOffset = t4.unitWidth / 2, t4.xAxis = { labels: e2, positions: e2.map(function(e3, n3) {
        return T(t4.xOffset + n3 * t4.unitWidth);
      }) };
    } }, { key: "calcYAxisParameters", value: function(t4) {
      var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : "false", n3 = zt(t4, e2), i2 = this.height / Wt(n3), a2 = Rt(n3) * i2, s2 = this.height - Ht(n3) * a2;
      this.state.yAxis = { labels: n3, positions: n3.map(function(t5) {
        return s2 - t5 * i2;
      }), scaleMultiplier: i2, zeroLine: s2 }, this.calcDatasetPoints(), this.calcYExtremes(), this.calcYRegions();
    } }, { key: "calcDatasetPoints", value: function() {
      var t4 = this.state, e2 = function(e3) {
        return e3.map(function(e4) {
          return jt(e4, t4.yAxis);
        });
      };
      t4.datasets = this.data.datasets.map(function(t5, n3) {
        var i2 = t5.values, a2 = t5.cumulativeYs || [];
        return { name: t5.name && t5.name.replace(/<|>|&/g, function(t6) {
          return t6 == "&" ? "&amp;" : t6 == "<" ? "&lt;" : "&gt;";
        }), index: n3, chartType: t5.chartType, values: i2, yPositions: e2(i2), cumulativeYs: a2, cumulativeYPos: e2(a2) };
      });
    } }, { key: "calcYExtremes", value: function() {
      var t4 = this.state;
      this.barOptions.stacked ? t4.yExtremes = t4.datasets[t4.datasets.length - 1].cumulativeYPos : (t4.yExtremes = new Array(t4.datasetLength).fill(9999), t4.datasets.map(function(e2) {
        e2.yPositions.map(function(e3, n3) {
          e3 < t4.yExtremes[n3] && (t4.yExtremes[n3] = e3);
        });
      }));
    } }, { key: "calcYRegions", value: function() {
      var t4 = this.state;
      this.data.yMarkers && (this.state.yMarkers = this.data.yMarkers.map(function(e2) {
        return e2.position = jt(e2.value, t4.yAxis), e2.options || (e2.options = {}), e2;
      })), this.data.yRegions && (this.state.yRegions = this.data.yRegions.map(function(e2) {
        return e2.startPos = jt(e2.start, t4.yAxis), e2.endPos = jt(e2.end, t4.yAxis), e2.options || (e2.options = {}), e2;
      }));
    } }, { key: "getAllYValues", value: function() {
      var t4, e2 = this, n3 = "values";
      if (this.barOptions.stacked) {
        n3 = "cumulativeYs";
        var i2 = new Array(this.state.datasetLength).fill(0);
        this.data.datasets.map(function(t5, a3) {
          var s2 = e2.data.datasets[a3].values;
          t5[n3] = i2 = i2.map(function(t6, e3) {
            return t6 + s2[e3];
          });
        });
      }
      var a2 = this.data.datasets.map(function(t5) {
        return t5[n3];
      });
      return this.data.yMarkers && a2.push(this.data.yMarkers.map(function(t5) {
        return t5.value;
      })), this.data.yRegions && this.data.yRegions.map(function(t5) {
        a2.push([t5.end, t5.start]);
      }), (t4 = []).concat.apply(t4, h(a2));
    } }, { key: "setupComponents", value: function() {
      var t4 = this, e2 = [["yAxis", { mode: this.config.yAxisMode, width: this.width, shortenNumbers: this.config.shortenYAxisNumbers }, function() {
        return this.state.yAxis;
      }.bind(this)], ["xAxis", { mode: this.config.xAxisMode, height: this.height }, function() {
        var t5 = this.state;
        return t5.xAxis.calcLabels = function(t6) {
          var e3 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : [], n4 = !(arguments.length > 2 && arguments[2] !== void 0) || arguments[2], i3 = t6 / e3.length * 0.6;
          i3 <= 0 && (i3 = 1);
          var a3, s3 = i3 / 7;
          if (n4) {
            var r4 = Math.max.apply(Math, h(e3.map(function(t7) {
              return t7.length;
            })));
            a3 = Math.ceil(r4 / s3);
          }
          var o3 = e3.map(function(t7, i4) {
            return (t7 += "").length > s3 && (n4 ? i4 % a3 != 0 && i4 !== e3.length - 1 && (t7 = "") : t7 = s3 - 3 > 0 ? t7.slice(0, s3 - 3) + " ..." : t7.slice(0, s3) + ".."), t7;
          });
          return o3;
        }(this.width, t5.xAxis.labels, this.config.xIsSeries), t5.xAxis;
      }.bind(this)], ["yRegions", { width: this.width, pos: "right" }, function() {
        return this.state.yRegions;
      }.bind(this)]], n3 = this.state.datasets.filter(function(t5) {
        return t5.chartType === "bar";
      }), i2 = this.state.datasets.filter(function(t5) {
        return t5.chartType === "line";
      }), a2 = n3.map(function(e3) {
        var i3 = e3.index;
        return ["barGraph-" + e3.index, { index: i3, color: t4.colors[i3], stacked: t4.barOptions.stacked, valuesOverPoints: t4.config.valuesOverPoints, minHeight: 0 * t4.height }, function() {
          var t5 = this.state, e4 = t5.datasets[i3], a3 = this.barOptions.stacked, s3 = this.barOptions.spaceRatio || 0.5, r4 = t5.unitWidth * (1 - s3), o3 = r4 / (a3 ? 1 : n3.length), l2 = t5.xAxis.positions.map(function(t6) {
            return t6 - r4 / 2;
          });
          a3 || (l2 = l2.map(function(t6) {
            return t6 + o3 * i3;
          }));
          var c2 = new Array(t5.datasetLength).fill("");
          this.config.valuesOverPoints && (c2 = a3 && e4.index === t5.datasets.length - 1 ? e4.cumulativeYs : e4.values);
          var u2 = new Array(t5.datasetLength).fill(0);
          return a3 && (u2 = e4.yPositions.map(function(t6, n4) {
            return t6 - e4.cumulativeYPos[n4];
          })), { xPositions: l2, yPositions: e4.yPositions, offsets: u2, labels: c2, zeroLine: t5.yAxis.zeroLine, barsWidth: r4, barWidth: o3 };
        }.bind(t4)];
      }), s2 = i2.map(function(e3) {
        var n4 = e3.index;
        return ["lineGraph-" + e3.index, { index: n4, color: t4.colors[n4], svgDefs: t4.svgDefs, heatline: t4.lineOptions.heatline, regionFill: t4.lineOptions.regionFill, spline: t4.lineOptions.spline, showDots: t4.lineOptions.showDots, hideLine: t4.lineOptions.hideLine, valuesOverPoints: t4.config.valuesOverPoints }, function() {
          var t5 = this.state, e4 = t5.datasets[n4], i3 = t5.yAxis.positions[0] < t5.yAxis.zeroLine ? t5.yAxis.positions[0] : t5.yAxis.zeroLine;
          return { xPositions: t5.xAxis.positions, yPositions: e4.yPositions, values: e4.values, zeroLine: i3, radius: this.lineOptions.dotSize || 4 };
        }.bind(t4)];
      }), r3 = [["yMarkers", { width: this.width, pos: "right" }, function() {
        return this.state.yMarkers;
      }.bind(this)]];
      e2 = e2.concat(a2, s2, r3);
      var o2 = ["yMarkers", "yRegions"];
      this.dataUnitComponents = [], this.components = new Map(e2.filter(function(e3) {
        return !o2.includes(e3[0]) || t4.state[e3[0]];
      }).map(function(e3) {
        var n4 = Pt.apply(void 0, h(e3));
        return (e3[0].includes("lineGraph") || e3[0].includes("barGraph")) && t4.dataUnitComponents.push(n4), [e3[0], n4];
      }));
    } }, { key: "makeDataByIndex", value: function() {
      var t4 = this;
      this.dataByIndex = {};
      var e2 = this.state, n3 = this.config.formatTooltipX, i2 = this.config.formatTooltipY;
      e2.xAxis.labels.map(function(a2, s2) {
        var r3 = t4.state.datasets.map(function(e3, n4) {
          var a3 = e3.values[s2];
          return { title: e3.name, value: a3, yPos: e3.yPositions[s2], color: t4.colors[n4], formatted: i2 ? i2(a3) : a3 };
        });
        t4.dataByIndex[s2] = { label: a2, formattedLabel: n3 ? n3(a2) : a2, xPos: e2.xAxis.positions[s2], values: r3, yExtreme: e2.yExtremes[s2] };
      });
    } }, { key: "bindTooltip", value: function() {
      var t4 = this;
      this.container.addEventListener("mousemove", function(e2) {
        var n3 = t4.measures, i2 = v(t4.container), a2 = e2.pageX - i2.left - x(n3), s2 = e2.pageY - i2.top;
        s2 < t4.height + b(n3) && s2 > b(n3) ? t4.mapTooltipXPosition(a2) : t4.tip.hideTip();
      });
    } }, { key: "mapTooltipXPosition", value: function(t4) {
      var e2 = this.state;
      if (e2.yExtremes) {
        var n3 = function(t5, e3) {
          var n4 = arguments.length > 2 && arguments[2] !== void 0 && arguments[2], i3 = e3.reduce(function(e4, n5) {
            return Math.abs(n5 - t5) < Math.abs(e4 - t5) ? n5 : e4;
          }, []);
          return n4 ? e3.indexOf(i3) : i3;
        }(t4, e2.xAxis.positions, true);
        if (n3 >= 0) {
          var i2 = this.dataByIndex[n3];
          this.tip.setValues(i2.xPos + this.tip.offset.x, i2.yExtreme + this.tip.offset.y, { name: i2.formattedLabel, value: "" }, i2.values, n3), this.tip.showTip();
        }
      }
    } }, { key: "renderLegend", value: function() {
      var t4 = this.data;
      t4.datasets.length > 1 && c(s(r2.prototype), "renderLegend", this).call(this, t4.datasets);
    } }, { key: "makeLegend", value: function(t4, e2, n3, i2) {
      return Z(n3, i2 + 5, 12, 3, this.colors[e2], t4.name, null, 8.75, this.config.truncateLegends);
    } }, { key: "makeOverlay", value: function() {
      var t4 = this;
      this.init ? this.init = 0 : (this.overlayGuides && this.overlayGuides.forEach(function(t5) {
        var e2 = t5.overlay;
        e2.parentNode.removeChild(e2);
      }), this.overlayGuides = this.dataUnitComponents.map(function(t5) {
        return { type: t5.unitType, overlay: void 0, units: t5.units };
      }), this.state.currentIndex === void 0 && (this.state.currentIndex = this.state.datasetLength - 1), this.overlayGuides.map(function(e2) {
        var n3 = e2.units[t4.state.currentIndex];
        e2.overlay = it[e2.type](n3), t4.drawArea.appendChild(e2.overlay);
      }));
    } }, { key: "updateOverlayGuides", value: function() {
      this.overlayGuides && this.overlayGuides.forEach(function(t4) {
        var e2 = t4.overlay;
        e2.parentNode.removeChild(e2);
      });
    } }, { key: "bindOverlay", value: function() {
      var t4 = this;
      this.parent.addEventListener("data-select", function() {
        t4.updateOverlay();
      });
    } }, { key: "bindUnits", value: function() {
      var t4 = this;
      this.dataUnitComponents.map(function(e2) {
        e2.units.map(function(e3) {
          e3.addEventListener("click", function() {
            var n3 = e3.getAttribute("data-point-index");
            t4.setCurrentDataPoint(n3);
          });
        });
      }), this.tip.container.addEventListener("click", function() {
        var e2 = t4.tip.container.getAttribute("data-point-index");
        t4.setCurrentDataPoint(e2);
      });
    } }, { key: "updateOverlay", value: function() {
      var t4 = this;
      this.overlayGuides.map(function(e2) {
        var n3 = e2.units[t4.state.currentIndex];
        at[e2.type](n3, e2.overlay);
      });
    } }, { key: "onLeftArrow", value: function() {
      this.setCurrentDataPoint(this.state.currentIndex - 1);
    } }, { key: "onRightArrow", value: function() {
      this.setCurrentDataPoint(this.state.currentIndex + 1);
    } }, { key: "getDataPoint", value: function() {
      var t4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.state.currentIndex, e2 = this.state, n3 = { index: t4, label: e2.xAxis.labels[t4], values: e2.datasets.map(function(e3) {
        return e3.values[t4];
      }) };
      return n3;
    } }, { key: "setCurrentDataPoint", value: function(t4) {
      var e2 = this.state;
      (t4 = parseInt(t4)) < 0 && (t4 = 0), t4 >= e2.xAxis.labels.length && (t4 = e2.xAxis.labels.length - 1), t4 !== e2.currentIndex && (e2.currentIndex = t4, function(t5, e3, n3) {
        var i2 = document.createEvent("HTMLEvents");
        for (var a2 in i2.initEvent(e3, true, true), n3)
          i2[a2] = n3[a2];
        t5.dispatchEvent(i2);
      }(this.parent, "data-select", this.getDataPoint()));
    } }, { key: "addDataPoint", value: function(t4, e2) {
      var n3 = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : this.state.datasetLength;
      c(s(r2.prototype), "addDataPoint", this).call(this, t4, e2, n3), this.data.labels.splice(n3, 0, t4), this.data.datasets.map(function(t5, i2) {
        t5.values.splice(n3, 0, e2[i2]);
      }), this.update(this.data);
    } }, { key: "removeDataPoint", value: function() {
      var t4 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : this.state.datasetLength - 1;
      this.data.labels.length <= 1 || (c(s(r2.prototype), "removeDataPoint", this).call(this, t4), this.data.labels.splice(t4, 1), this.data.datasets.map(function(e2) {
        e2.values.splice(t4, 1);
      }), this.update(this.data));
    } }, { key: "updateDataset", value: function(t4) {
      var e2 = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0;
      this.data.datasets[e2].values = t4, this.update(this.data);
    } }, { key: "updateDatasets", value: function(t4) {
      this.data.datasets.map(function(e2, n3) {
        t4[n3] && (e2.values = t4[n3]);
      }), this.update(this.data);
    } }]), r2;
  }();
  var Ut = { bar: Vt, line: Vt, percentage: Nt, heatmap: It, pie: Et, donut: function(t3) {
    a(r2, Et);
    var n2 = l(r2);
    function r2(t4, i2) {
      return e(this, r2), n2.call(this, t4, i2);
    }
    return i(r2, [{ key: "configure", value: function(t4) {
      c(s(r2.prototype), "configure", this).call(this, t4), this.type = "donut", this.sliceName = "donutSlices", this.arcFunc = _, this.shapeFunc = X, this.strokeWidth = t4.strokeWidth || 30;
    } }, { key: "getRadius", value: function() {
      return this.height > this.width ? this.center.x - this.strokeWidth / 2 : this.center.y - this.strokeWidth / 2;
    } }, { key: "resetHover", value: function(t4, e2) {
      transform(t4, "translate3d(0,0,0)"), this.tip.hideTip(), t4.style.stroke = e2;
    } }, { key: "setupComponents", value: function() {
      var t4 = this.state, e2 = [[this.sliceName, {}, function() {
        return { sliceStrings: t4.sliceStrings, colors: this.colors, strokeWidth: this.strokeWidth };
      }.bind(this)]];
      this.components = new Map(e2.map(function(t5) {
        var e3 = Pt.apply(void 0, h(t5));
        return [t5[0], e3];
      }));
    } }]), r2;
  }() };
  var qt = function t2(n2, i2) {
    return e(this, t2), function() {
      var t3 = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "line", e2 = arguments.length > 1 ? arguments[1] : void 0, n3 = arguments.length > 2 ? arguments[2] : void 0;
      return t3 === "axis-mixed" ? (n3.type = "line", new Vt(e2, n3)) : Ut[t3] ? new Ut[t3](e2, n3) : void console.error("Undefined chart type: " + t3);
    }(i2.type, n2, i2);
  };

  // frappe/public/js/frappe/ui/chart.js
  frappe.provide("frappe.ui");
  frappe.Chart = qt;
  frappe.ui.RealtimeChart = class RealtimeChart extends frappe.Chart {
    constructor(element, socketEvent, maxLabelPoints = 8, data) {
      super(element, data);
      if (data.data.datasets[0].values.length > maxLabelPoints) {
        frappe.throw(__("Length of passed data array is greater than value of maximum allowed label points!"));
      }
      this.currentSize = data.data.datasets[0].values.length;
      this.socketEvent = socketEvent;
      this.maxLabelPoints = maxLabelPoints;
      this.start_updating = function() {
        frappe.realtime.on(this.socketEvent, (data2) => {
          this.update_chart(data2.label, data2.points);
        });
      };
      this.stop_updating = function() {
        frappe.realtime.off(this.socketEvent);
      };
      this.update_chart = function(label, data2) {
        if (this.currentSize >= this.maxLabelPoints) {
          this.removeDataPoint(0);
        } else {
          this.currentSize++;
        }
        this.addDataPoint(label, data2);
      };
    }
  };

  // frappe/public/js/frappe/ui/datatable.js
  var import_frappe_datatable = __toESM(require_frappe_datatable_cjs());
  frappe.DataTable = import_frappe_datatable.default;

  // frappe/public/js/frappe/ui/driver.js
  var import_driver = __toESM(require_driver_min());
  frappe.Driver = import_driver.default;

  // frappe/public/js/frappe/ui/plyr.js
  var import_plyr = __toESM(require_plyr_polyfilled());
  frappe.Plyr = import_plyr.default;

  // frappe/public/js/frappe/barcode_scanner/index.js
  frappe.provide("frappe.barcode");
  frappe.barcode.scan_barcode = function() {
    return new Promise((resolve, reject) => {
      if (window.cordova && window.cordova.plugins && window.cordova.plugins.barcodeScanner) {
        window.cordova.plugins.barcodeScanner.scan((result) => {
          if (!result.cancelled) {
            resolve(result.text);
          }
        }, reject);
      } else {
        frappe.require("barcode_scanner.bundle.js", () => {
          frappe.barcode.get_barcode().then((barcode) => {
            resolve(barcode);
          });
        });
      }
    });
  };

  // frappe/public/js/frappe/scanner/index.js
  frappe.provide("frappe.ui");
  frappe.ui.Scanner = class Scanner {
    constructor(options) {
      this.dialog = null;
      this.handler = null;
      this.options = options;
      this.is_alive = false;
      if (!("multiple" in this.options)) {
        this.options.multiple = false;
      }
      if (options.container) {
        this.$scan_area = $(options.container);
        this.scan_area_id = frappe.dom.set_unique_id(this.$scan_area);
      }
      if (options.dialog) {
        this.dialog = this.make_dialog();
        this.dialog.show();
      }
    }
    scan() {
      this.load_lib().then(() => this.start_scan());
    }
    start_scan() {
      if (!this.handler) {
        this.handler = new Html5Qrcode(this.scan_area_id);
      }
      this.handler.start({ facingMode: "environment" }, { fps: 10, qrbox: 250 }, (decodedText, decodedResult) => {
        if (this.options.on_scan) {
          try {
            this.options.on_scan(decodedResult);
          } catch (error) {
            console.error(error);
          }
        }
        if (!this.options.multiple) {
          this.stop_scan();
          this.hide_dialog();
        }
      }, (errorMessage) => {
      }).catch((err) => {
        this.is_alive = false;
        this.hide_dialog();
        console.error(err);
      });
      this.is_alive = true;
    }
    stop_scan() {
      if (this.handler && this.is_alive) {
        this.handler.stop().then(() => {
          this.is_alive = false;
          this.$scan_area.empty();
          this.hide_dialog();
        });
      }
    }
    make_dialog() {
      let dialog = new frappe.ui.Dialog({
        title: __("Scan QRCode"),
        fields: [
          {
            fieldtype: "HTML",
            fieldname: "scan_area"
          }
        ],
        on_page_show: () => {
          this.$scan_area = dialog.get_field("scan_area").$wrapper;
          this.$scan_area.addClass("barcode-scanner");
          this.scan_area_id = frappe.dom.set_unique_id(this.$scan_area);
          this.scan();
        },
        on_hide: () => {
          this.stop_scan();
        }
      });
      return dialog;
    }
    hide_dialog() {
      this.dialog && this.dialog.hide();
    }
    load_lib() {
      return frappe.require("/assets/frappe/node_modules/html5-qrcode/dist/html5-qrcode.min.js");
    }
  };
})();
/*!
    localForage -- Offline Storage, Improved
    Version 1.9.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
/*!
 * Cropper.js v1.5.12
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-06-12T08:00:17.411Z
 */
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/*! For license information please see editor.js.LICENSE.txt */
/*! showdown v 1.9.1 - 02-11-2019 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
//# sourceMappingURL=desk.bundle.CZ4ZDTPC.js.map
